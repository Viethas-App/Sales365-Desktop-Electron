{"version":3,"file":"default-src_app_cafe_components_bill-detail_bill-detail_module_ts.js","mappings":"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","sources":["./src/app/cafe/components/bill-detail/bill-detail.module.ts","./src/app/cafe/components/bill-detail/delivery-goods/delivery-goods.component.ts","./src/app/cafe/components/bill-detail/delivery-goods/delivery-goods.component.html","./src/app/cafe/components/bill-detail/destroy-product/destroy-product.component.ts","./src/app/cafe/components/bill-detail/destroy-product/destroy-product.component.html","./src/app/cafe/components/bill-detail/exchange-payment-card/exchange-payment-card.component.ts","./src/app/cafe/components/bill-detail/exchange-payment-card/exchange-payment-card.component.html","./src/app/cafe/components/bill-detail/exchange-voucher/exchange-voucher.component.ts","./src/app/cafe/components/bill-detail/exchange-voucher/exchange-voucher.component.html","./src/app/cafe/components/bill-detail/export-kitchen/export-kitchen.component.ts","./src/app/cafe/components/bill-detail/export-kitchen/export-kitchen.component.html","./src/app/cafe/components/bill-detail/import-kitchen/import-kitchen.component.ts","./src/app/cafe/components/bill-detail/import-kitchen/import-kitchen.component.html","./src/app/cafe/components/bill-detail/openning-stock/openning-stock.component.ts","./src/app/cafe/components/bill-detail/openning-stock/openning-stock.component.html","./src/app/cafe/components/bill-detail/purchase/purchase.component.ts","./src/app/cafe/components/bill-detail/purchase/purchase.component.html","./src/app/cafe/components/bill-detail/recieve-goods/recieve-goods.component.ts","./src/app/cafe/components/bill-detail/recieve-goods/recieve-goods.component.html","./src/app/cafe/components/bill-detail/return-supplier/return-supplier.component.ts","./src/app/cafe/components/bill-detail/return-supplier/return-supplier.component.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SalesComponent } from './sales/sales.component';\r\nimport { PurchaseComponent } from './purchase/purchase.component';\r\nimport { ReturnSupplierComponent } from './return-supplier/return-supplier.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { OpenningStockComponent } from './openning-stock/openning-stock.component';\r\nimport { DeliveryGoodsComponent } from './delivery-goods/delivery-goods.component';\r\nimport { RecieveGoodsComponent } from './recieve-goods/recieve-goods.component';\r\nimport { SalesVoucherComponent } from './sales-voucher/sales-voucher.component';\r\nimport { SalesPaymentCardComponent } from './sales-payment-card/sales-payment-card.component';\r\nimport { ExchangeVoucherComponent } from './exchange-voucher/exchange-voucher.component';\r\nimport { ExchangePaymentCardComponent } from './exchange-payment-card/exchange-payment-card.component';\r\nimport { DestroyProductComponent } from './destroy-product/destroy-product.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ExportKitchenComponent } from './export-kitchen/export-kitchen.component';\r\nimport { ImportKitchenComponent } from './import-kitchen/import-kitchen.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SalesComponent,\r\n    PurchaseComponent,\r\n    ReturnSupplierComponent,\r\n    OpenningStockComponent,\r\n    DeliveryGoodsComponent,\r\n    RecieveGoodsComponent,\r\n    SalesVoucherComponent,\r\n    SalesPaymentCardComponent,\r\n    ExchangeVoucherComponent,\r\n    ExchangePaymentCardComponent,\r\n    DestroyProductComponent,\r\n    ExportKitchenComponent,\r\n    ImportKitchenComponent\r\n  ],\r\n  exports :[\r\n    SalesComponent,\r\n    PurchaseComponent,\r\n    ReturnSupplierComponent,\r\n    OpenningStockComponent,\r\n    DeliveryGoodsComponent,\r\n    RecieveGoodsComponent,\r\n    SalesVoucherComponent,\r\n    SalesPaymentCardComponent,\r\n    ExchangeVoucherComponent,\r\n    ExchangePaymentCardComponent,\r\n    DestroyProductComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule,\r\n    IonicModule, \r\n    NgZorroAntModule,\r\n  ],\r\n  entryComponents:[\r\n    SalesComponent,\r\n    PurchaseComponent,\r\n    ReturnSupplierComponent,\r\n    OpenningStockComponent,\r\n    DeliveryGoodsComponent,\r\n    RecieveGoodsComponent,\r\n    SalesVoucherComponent,\r\n    SalesPaymentCardComponent,\r\n    ExchangeVoucherComponent,\r\n    ExchangePaymentCardComponent,\r\n    DestroyProductComponent\r\n  ],\r\n})\r\nexport class BillDetailModule { }\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { DeliveryGoodsA4Component } from 'src/app/cafe/components/print/delivery-goods/delivery-goods-a4/delivery-goods-a4.component';\r\nimport { DeliveryGoodsA5Component } from 'src/app/cafe/components/print/delivery-goods/delivery-goods-a5/delivery-goods-a5.component';\r\nimport { DeliveryGoodsK57Col3Component } from 'src/app/cafe/components/print/delivery-goods/delivery-goods-k57-col3/delivery-goods-k57-col3.component';\r\nimport { DeliveryGoodsK80Col3Component } from 'src/app/cafe/components/print/delivery-goods/delivery-goods-k80-col3/delivery-goods-k80-col3.component';\r\nimport { DeliveryGoodsK80Col4Component } from 'src/app/cafe/components/print/delivery-goods/delivery-goods-k80-col4/delivery-goods-k80-col4.component';\r\n\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhBillType2930DetailEdit, VhBillType2930Edit } from '../../bill-type/bill-type-29-30/bill-type2930-interface';\r\n\r\n@Component({\r\n  selector: 'app-delivery-goods',\r\n  templateUrl: './delivery-goods.component.html',\r\n  styleUrls: ['./delivery-goods.component.scss']\r\n})\r\nexport class DeliveryGoodsComponent {\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  printer: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail: VhBillType2930DetailEdit[] = []\r\n  subTotal = 0;\r\n  public invoice: VhBillType2930Edit\r\n  @Input() id_bill: any;\r\n  branchList: any = this.vhQueryCafe.getlocalBranchs()\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private lang: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n     \r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n\r\n  }\r\n\r\n  init(invoice: VhBillType2930Edit = null, invoiceDetail: VhBillType2930DetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        invoice.id_branch_send = invoice.id_branch;\r\n        invoice.id_branch_receive = invoice.id_branch_receive;\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n\r\n  getBranchName(id_branch) {\r\n\r\n    if (id_branch)\r\n      return this.branchList.find(e => e._id == id_branch).name\r\n    else return ''\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  deleteInvoice() {\r\n    this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", `${this.lang.translate(\"Delete\")}?`, \"OK\", this.lang.translate(\"Cancel\"))\r\n      .then(() => {\r\n        this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n          this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(2000,\r\n                `${this.lang.translate(\"Delivery goods\")} ${this.invoice.bill_code} ${this.lang.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n              this.router.navigate(['/cafe/dashboard/management/stock/delivery'])\r\n            })\r\n          })\r\n        })\r\n      }, () => { })\r\n  }\r\n  /**\r\n  * ly thng tin d liu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice, invoice_detail: this.invoice_detail }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.lang.translate(\"Function\"), \"\", this.lang.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return DeliveryGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return DeliveryGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return DeliveryGoodsK80Col4Component\r\n      case 'print_size_a5': return DeliveryGoodsA5Component\r\n      case 'print_size_a4': return DeliveryGoodsA4Component\r\n      default: return DeliveryGoodsA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#delivery-good-detail-invoice\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".delivery-good-detail-invoice-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#delivery-good-detail-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".delivery-good-detail-invoice-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n      \r\n<nz-layout id=\"delivery-good-detail-invoice\">\r\n    <div class=\"sales\"  *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header delivery-good-detail-invoice-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"14\" class=\"title\">\r\n                    <b>{{'Goods delivery receipt' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"custom-btn right-all-content\">\r\n                     \r\n                    <div>\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                     \r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                <td>{{item.name}}\r\n                                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                      <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                                    </ng-container></td>\r\n                                <td nzAlign='center'> {{getUnit(item.units, item.ratio)}}</td>\r\n                                <td nzAlign='center'>{{item.quantity}}</td>\r\n                                <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Date' | translate}}</b>\r\n                    <div>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Prepared by' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name']}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Receive branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name_reception']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                    <div>\r\n                      {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n          \r\n                  </div> \r\n                  <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                  </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { DestroyProductK57Col3Component } from 'src/app/cafe/components/print/destroy-product/destroy-product-k57-col3/destroy-product-k57-col3.component';\r\nimport { DestroyProductK80Col3Component } from 'src/app/cafe/components/print/destroy-product/destroy-product-k80-col3/destroy-product-k80-col3.component';\r\nimport { DestroyProductK80Col4Component } from 'src/app/cafe/components/print/destroy-product/destroy-product-k80-col4/destroy-product-k80-col4.component';\r\nimport { DestroyProductA5Component } from 'src/app/cafe/components/print/destroy-product/destroy-product-a5/destroy-product-a5.component';\r\nimport { DestroyProductA4Component } from 'src/app/cafe/components/print/destroy-product/destroy-product-a4/destroy-product-a4.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhBillType38DetailEdit, VhBillType38Edit } from '../../bill-type/bill-type-38/bill-type38-interface';\r\n\r\n@Component({\r\n  selector: 'app-destroy-product',\r\n  templateUrl: './destroy-product.component.html',\r\n  styleUrls: ['./destroy-product.component.scss']\r\n})\r\nexport class DestroyProductComponent  {\r\n\r\n  @Input() id_bill: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail  : VhBillType38DetailEdit[] = [] \r\n  public invoice: VhBillType38Edit\r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.init();\r\n    let print = this.vhQueryCafe.getlocalPrinters().find(item => item.desktop)\r\n    this.printer = print ? print.desktop.purchase[print.desktop.purchase.type] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType38Edit = null, invoiceDetail: VhBillType38DetailEdit[] = null) {\r\n    console.log(invoice);\r\n    \r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n   \r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      ]).then(([invoice, invoiceDetail, list_barcode]: any) => {\r\n        this.listBarcodeLot = list_barcode.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n\r\n  getDateLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return this.functionService.formatDate(lot.date_mfg) + ' - ' + this.functionService.formatDate(lot.date_exp)\r\n  }\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n   /**\r\n   * ly thng tin d liu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_destroy_product')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice_detail : this.invoice_detail,invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n    \r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n         \r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (DestroyProductK57Col3Component)\r\n      case 'print_size_k80_3c': return (DestroyProductK80Col3Component)\r\n      case 'print_size_k80_4c': return (DestroyProductK80Col4Component)\r\n      case 'print_size_a5': return (DestroyProductA5Component)\r\n      case 'print_size_a4': return (DestroyProductA4Component)\r\n      default: return (DestroyProductA4Component)\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#purchase-invoice-detail-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-detail-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#purchase-invoice-detail-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-detail-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n\r\n    <nz-layout id=\"purchase-invoice-detail-today\">\r\n        <div class=\"sales\" *ngIf=\"invoice\">\r\n            <div class=\"sales-cart\">\r\n                <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\" class=\"title\">\r\n                        <b>{{'Invoice for destroying goods' | translate}}</b>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                         \r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                    <div class=\"invoiceDetail-item\">\r\n                        <nz-table nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n                            [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n                            nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                    <!-- <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th> -->\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                    <td>{{item.name}} <br>\r\n                                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n\r\n                                            </span>\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                                            </span>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                                    <!-- <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td> -->\r\n                                </tr>\r\n                            </tbody>\r\n                        </nz-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills not-continue-sell\">\r\n                <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                    <div>\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <div> {{invoice.bill_code}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <div>{{invoiceInfo.employee.name}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                    <b>{{'Payment information' | translate}}</b>\r\n\r\n                    <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                        <span>{{'Note' | translate}}</span>\r\n                        <div>{{invoice.note}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service'; \r\nimport { ExchangePaymentCardK57Col3Component } from 'src/app/cafe/components/print/prepaid-card/exchange-payment-card-k57-col3/exchange-payment-card-k57-col3.component';\r\nimport { ExchangePaymentCardK80Col4Component } from 'src/app/cafe/components/print/prepaid-card/exchange-payment-card-k80-col4/exchange-payment-card-k80-col4.component';\r\nimport { ExchangePaymentCardK80Col3Component } from 'src/app/cafe/components/print/prepaid-card/exchange-payment-card-k80-col3/exchange-payment-card-k80-col3.component';\r\nimport { ExchangePaymentCardA5Component } from 'src/app/cafe/components/print/prepaid-card/exchange-payment-card-a5/exchange-payment-card-a5.component';\r\nimport { ExchangePaymentCardA4Component } from 'src/app/cafe/components/print/prepaid-card/exchange-payment-card-a4/exchange-payment-card-a4.component';\r\nimport { VhBillType51DetailEdit, VhBillType51Edit } from '../../bill-type/bill-type-51/bill-type51-interface';\r\n\r\n\r\n@Component({\r\n  selector: 'app-exchange-payment-card',\r\n  templateUrl: './exchange-payment-card.component.html',\r\n  styleUrls: ['./exchange-payment-card.component.scss']\r\n})\r\nexport class ExchangePaymentCardComponent   {\r\n\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType51Edit;\r\n  invoiceDetail: VhBillType51DetailEdit[];\r\n  dataRestore: any;\r\n  total_product: number = 0;\r\n  bill_type: any;\r\n  root: any;\r\n  product_codes: any;\r\n  list_product_print: any = [];\r\n  @Input() id_bill: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n     \r\n   \r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n\r\n  init(bill_type, invoice: VhBillType51Edit = null, invoiceDetail: VhBillType51DetailEdit[] = null) {\r\n    if (bill_type == 51) this.invoice = invoice\r\n    this.invoiceDetail = invoiceDetail\r\n    console.log(this.invoiceDetail);\r\n    \r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQueryCafe.getlocalCustomer(this.invoice.id_customer),\r\n\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.total_product = 0\r\n    for (let i of this.invoiceDetail) {\r\n      this.total_product += i.products.reduce((prev: number, next) => prev + next.quantity, 0)\r\n    }\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        console.log(invoiceDetail);\r\n        if (invoice.bill_type == 51) {\r\n          let promise = new Array();\r\n          for (let i = 0; i < invoiceDetail.length; i++) {\r\n            promise[i] = this.vhQueryCafe.getPaymentCard_Code_Name_Release(invoiceDetail[i].id_payment_card_code)\r\n          }\r\n          this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n            let invoiceDetailFresh = invoiceDetail;\r\n            console.log(array);\r\n            \r\n            invoiceDetailFresh = array.map((item, index) => {\r\n              return {\r\n                name_payment_card_release : item.name_payment_card_release,\r\n                name_payment_card  : item.name_payment_card,\r\n                code : item.code,\r\n                products: invoiceDetail[index].products.map(prod_child => {\r\n                  return { \r\n                    name: prod_child.name,\r\n                    units: prod_child.units,\r\n                    ratio: prod_child.ratio,\r\n                    quantity_use: prod_child.quantity,\r\n                    outquantity: prod_child.outquantity ,\r\n                    restquantity: prod_child.restquantity,\r\n                    quantity: item.products.find(e => prod_child.id_subproduct ? ( e.id_subproduct == prod_child.id_subproduct) : ( e.id_product == prod_child.id_product)).quantity\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            this.init(invoice.bill_type, invoice, invoiceDetailFresh)\r\n            setTimeout(() => {\r\n              this.product_codes = invoiceDetailFresh;\r\n              console.log(this.product_codes);\r\n              \r\n            }, 200);\r\n            this.vhComponent.hideLoading(0);\r\n          }, error => {\r\n            console.log(error);\r\n            this.vhComponent.hideLoading(0);\r\n\r\n          })\r\n        }\r\n\r\n      })\r\n    })\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-return-invoice-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-return-invoice-detail-header\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-return-invoice-detail-header\").clientHeight - 60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#sales-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".sales-return-invoice-detail-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods/exchange-card-invoice'], { state: this.dataRestore });\r\n  }\r\n\r\n  printInvoice() {\r\n    let print = this.vhQueryCafe.getLocalPrintPage('page_desktop_exchange_payment_card')\r\n    if (print && print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)].enable) {\r\n      let printer =  print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] \r\n      if (printer) {\r\n        let type = printer._id;\r\n        this.vhComponent.showModal(this.renderPrintPage(type), { printer: printer , invoice: this.invoice ,invoice_detail:this.invoiceDetail}, false, false, `modal-print-${type}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.goBack())\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExchangePaymentCardK57Col3Component\r\n      case 'print_size_k80_3c': return ExchangePaymentCardK80Col3Component\r\n      case 'print_size_k80_4c': return ExchangePaymentCardK80Col4Component\r\n      case 'print_size_a5': return ExchangePaymentCardA5Component\r\n      case 'print_size_a4': return ExchangePaymentCardA4Component\r\n      default: return ExchangePaymentCardA4Component\r\n    }\r\n  }\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel this invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.alertMessageDesktop(\"success\",\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`)\r\n                this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods/exchange-card-invoice'], { state: { ...this.dataRestore, reload: true } })\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('You do not have this rights'))\r\n  }\r\n\r\n\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n \r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n     \r\n<nz-layout id=\"sales-return-invoice-detail\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header sales-return-invoice-detail-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{ 'Card exchange invoice' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-contentn\">\r\n                    <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                        nzType=\"default\">\r\n                        <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                        {{'Print' | translate}}\r\n                    </button>\r\n                     \r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table #expandTable nzTableLayout=\"fixed\" nzNoResult=\"{{'No data'| translate}}\"\r\n                        [nzData]=\"product_codes\" nzShowSizeChanger nzShowPagination [nzPageSize]=\"20\"\r\n                        [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Initial quantity' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Quantity exported' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Quantity export' | translate}}</b></th>\r\n                                <th nzAlign=\"right\"><b>{{'Remaining' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <ng-container *ngFor=\"let data of product_codes\">\r\n                                <tr (click)=\"data.expand = !data.expand\">\r\n            \r\n                                    <td colspan=\"6\" >\r\n                                        <i style=\"cursor: pointer;\"  nz-icon [nzType]=\"!data.expand ? 'minus' : 'plus'\" nzTheme=\"outline\"></i>\r\n                                        <b>{{data.name_payment_card_release}} ({{data.name_payment_card}})</b>: {{data.code}}\r\n                                    </td>\r\n                                </tr>\r\n                                <ng-container *ngIf=\"!data.expand\">\r\n                                    <tr  *ngFor=\"let item of data['products']\">\r\n                                        <td >\r\n                                            {{item.name}} <br> \r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                       >{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                {{'Stock' | translate}}: {{item.stock}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{getUnit(item.units, item.ratio)}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{item.quantity}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">{{item.quantity - item.restquantity}}</td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{item.quantity_use}}\r\n                                        </td>\r\n                                        <td nzAlign=\"right\">\r\n                                            <ng-container  >\r\n                                                {{item.restquantity - item.quantity_use}}\r\n                                            </ng-container>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Salesman' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Exchange date' | translate}}</b>\r\n                    <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery' | translate}}</b>\r\n                    <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n\r\n                <div nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'Total items' | translate}}</span>\r\n                    <div>{{total_product}}</div>\r\n                </div>\r\n\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n</ion-content>","\r\nimport { ChangeDetectorRef, Component, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service'; \r\nimport { ExchangeVoucherK57Col3Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k57-col3/exchange-voucher-k57-col3.component';\r\nimport { ExchangeVoucherK80Col3Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k80-col3/exchange-voucher-k80-col3.component';\r\nimport { ExchangeVoucherK80Col4Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k80-col4/exchange-voucher-k80-col4.component';\r\nimport { ExchangeVoucherA5Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-a5/exchange-voucher-a5.component';\r\nimport { ExchangeVoucherA4Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-a4/exchange-voucher-a4.component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhBillType41DetailEdit, VhBillType41Edit } from '../../bill-type/bill-type-41/bill-type41-interface';\r\n\r\n@Component({\r\n  selector: 'app-exchange-voucher',\r\n  templateUrl: './exchange-voucher.component.html',\r\n  styleUrls: ['./exchange-voucher.component.scss']\r\n})\r\nexport class ExchangeVoucherComponent    {\r\n\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType41Edit;\r\n  invoiceDetail : VhBillType41DetailEdit[]\r\n  dataRestore: any;\r\n  percent_discount: number = 0;\r\n  @Input() id_bill: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private nzModalService: NzModalService,\r\n\r\n  ) {\r\n    \r\n    \r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n\r\n  init(bill_type, invoice: VhBillType41Edit = null, invoiceDetail: VhBillType41DetailEdit[] = null) {\r\n    if (bill_type == 41) this.invoice = invoice\r\n    this.invoiceDetail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQueryCafe.getlocalCustomer(this.invoice.id_customer),\r\n        \r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        console.log(invoiceDetail);\r\n\r\n        // if (invoice.bill_type == 41) {\r\n        //   let invoiceDetailFresh: VhSaleExchangeVoucherInvoiceDetails[]\r\n        //   let promise = new Array();\r\n        //   for (let i = 0; i < invoiceDetail.length; i++) {\r\n        //     promise[i] = this.vhQueryCafe.getVoucher(invoiceDetail[i].id_voucher)\r\n        //   }\r\n        //   this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n        //     invoiceDetailFresh = array.map((item,index) => { return {...item,...invoiceDetail[index] }})\r\n        this.init(invoice.bill_type, invoice, invoiceDetail);\r\n\r\n        //   },error => {\r\n        //     console.log(error);\r\n        this.vhComponent.hideLoading(0)\r\n\r\n        //   })\r\n        // }\r\n      })\r\n    })\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n \r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-return-invoice\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-tabs-nav\") && document.querySelector(\".invoice-header\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-return-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".invoice-header\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - 60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#sales-return-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".invoice-header\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n \r\n\r\n  printInvoice() {\r\n    // let print = this.vhQueryCafe.getLocalPrintPage('page_desktop_exchange_voucher')\r\n    // if (print && print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)].enable) {\r\n    //   let printer =  print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)]\r\n\r\n    // }\r\n\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer) {\r\n        let type = printer._id;\r\n        this.vhComponent.showModal(this.renderPrintPage(type), { printer: printer, invoice: this.invoice ,  invoice_detail : this.invoiceDetail }, false, false, `modal-print-${type}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.goBack())\r\n        })\r\n      }\r\n    }, (err) => {\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => { this.gotoPrinter('page_desktop_exchange_voucher', 'i voucher ly hng') }\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n  gotoPrinter(type, name) {\r\n    this.router.navigate(['/cafe/dashboard/management/printer', type], { state: name });\r\n  }\r\n  /**\r\n  * ly thng tin d liu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  private checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_exchange_voucher')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(false)\r\n    })\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExchangeVoucherK57Col3Component\r\n      case 'print_size_k80_3c': return ExchangeVoucherK80Col3Component\r\n      case 'print_size_k80_4c': return ExchangeVoucherK80Col4Component\r\n      case 'print_size_a5': return ExchangeVoucherA5Component\r\n      case 'print_size_a4': return ExchangeVoucherA4Component\r\n      default: return ExchangeVoucherA4Component\r\n    }\r\n  }\r\n\r\n\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n \r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    <nz-layout id=\"sales-return-invoice-detail\">\r\n        <div class=\"sales\" *ngIf=\"invoice\">\r\n            <div class=\"sales-cart\">\r\n                <div class=\"sales-cart-header sales-return-invoice-detail-header\" nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\" class=\"title\">\r\n                        <b>{{ 'Voucher exchange invoice' | translate}}</b>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" class=\"sales-cart-header-button\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                         \r\n                    </div>\r\n                </div>\r\n                <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                    <div class=\"invoiceDetail-item\">\r\n                        <table  >\r\n                            <thead>\r\n                                <tr>\r\n                                    <th nzWidth=\"35%\"><b>{{'Voucher name' | translate}}</b></th>\r\n                                    <th nzWidth=\"20%\"><b>{{'Voucher code' | translate}}</b></th>\r\n                                    <th nzWidth=\"25%\" nzAlign='center'><b>{{'Issuance batch' | translate}}</b></th>\r\n                                    <th nzWidth=\"20%\" nzAlign='center'><b>{{'Release date' | translate}}</b></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <ng-container *ngFor=\"let item of invoiceDetail\">\r\n                                    <tr>\r\n                                        <td>\r\n                                            <b>{{item['name_voucher']}} </b>\r\n                                        </td>\r\n                                        <td>\r\n                                            {{item['code']}}\r\n                                        </td>\r\n                                        <td nzAlign='left'>\r\n                                            {{item['name_voucher_release']}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{item['date_validity'] |date: 'dd/MM/yyyy HH:mm'}}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td colspan=\"4\" style=\"width: 100% ; word-break: break-all; padding-top: 0px\">\r\n                                            <ng-container *ngIf=\"item.products\">\r\n                                                <span *ngFor=\"let product of item.products\">\r\n                                                    {{ product.name}} ({{getUnit(product.units,product.ratio)}}) x\r\n                                                    {{product.quantity}} <br>\r\n                                                    <div *ngIf=\"product.id_lotproduct\"></div>\r\n                                                    <div *ngIf=\"product.combos\">\r\n                                                        <span *ngFor=\"let e of product.combos\" style=\"color:gray;font-size:0.7rem;\">\r\n                                                            {{ e.name}} ({{getUnit(e.units, e.ratio)}}) x{{e.quantity}}\r\n                                                            <ng-container *ngIf=\"e.id_lotproduct\">\r\n                                                                <pre>{{getLotNumber(e.lots, e.id_lotproduct)}}</pre>\r\n                                                            </ng-container>\r\n                                                            ,\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </span>\r\n                                            </ng-container>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n    \r\n                            </tbody>\r\n                        </table>\r\n    \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills not-continue-sell\">\r\n                <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                    <div>\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <div> {{invoice.bill_code}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <div>{{invoiceInfo.employee.name}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Exchange date' | translate}}</b>\r\n                        <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Delivery' | translate}}</b>\r\n                        <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                    <b>{{'Customer information' | translate}}</b>\r\n                    <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                        {{invoiceInfo.partner.name | translate}}\r\n                    </div>\r\n                    <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                        {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                    </div>\r\n                    <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                        {{renderAddress(invoiceInfo.partner)}}\r\n                    </div>\r\n                    <div *ngIf=\"invoiceInfo.partner._id == 'id_retail' && invoice.retail_name\" nz-col nzSpan=\"24\">\r\n                        {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n                        ''}} {{invoice.retail_address}}\r\n                      </div>\r\n                </div>\r\n    \r\n            </div>\r\n        </div>\r\n    </nz-layout>\r\n    \r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks'; \r\nimport { ExportKitchenA4Component } from 'src/app/cafe/components/print/export-kitchen/export-kitchen-a4/export-kitchen-a4.component';\r\nimport { ExportKitchenA5Component } from 'src/app/cafe/components/print/export-kitchen/export-kitchen-a5/export-kitchen-a5.component';\r\nimport { ExportKitchenK57Col3Component } from 'src/app/cafe/components/print/export-kitchen/export-kitchen-k57-col3/export-kitchen-k57-col3.component';\r\nimport { ExportKitchenK80Col3Component } from 'src/app/cafe/components/print/export-kitchen/export-kitchen-k80-col3/export-kitchen-k80-col3.component';\r\nimport { ExportKitchenK80Col4Component } from 'src/app/cafe/components/print/export-kitchen/export-kitchen-k80-col4/export-kitchen-k80-col4.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhBillType3DetailEdit, VhBillType3Edit } from '../../bill-type/bill-type-3/bill-type3-interface';\r\n\r\n@Component({\r\n  selector: 'app-export-kitchen',\r\n  templateUrl: './export-kitchen.component.html',\r\n  styleUrls: ['./export-kitchen.component.scss']\r\n})\r\nexport class ExportKitchenComponent   {\r\n\r\n  @Input() id_bill: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail  : VhBillType3DetailEdit[] = [] \r\n  public invoice: VhBillType3Edit\r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.init();\r\n    let print = this.vhQueryCafe.getlocalPrinters().find(item => item.desktop)\r\n    this.printer = print ? print.desktop.purchase[print.desktop.purchase.type] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType3Edit = null, invoiceDetail: VhBillType3DetailEdit[] = null) {\r\n    console.log(invoice);\r\n    \r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n   \r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      ]).then(([invoice, invoiceDetail, list_barcode]: any) => {\r\n        this.listBarcodeLot = list_barcode.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n\r\n  getDateLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return this.functionService.formatDate(lot.date_mfg) + ' - ' + this.functionService.formatDate(lot.date_exp)\r\n  }\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n    /**\r\n   * ly thng tin d liu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_export_kitchen')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /**\r\n   * kim tra thng tin d liu trang in v m component in\r\n   * @example this.printInvoice()\r\n   */\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer,invoice_detail : this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      let state: any = \"Xut hy hng ha\"\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.router.navigate(['/cafe/dashboard/management/printer', 'page_desktop_export_kitchen'], { state: state }))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (ExportKitchenK57Col3Component)\r\n      case 'print_size_k80_3c': return (ExportKitchenK80Col3Component)\r\n      case 'print_size_k80_4c': return (ExportKitchenK80Col4Component)\r\n      case 'print_size_a5': return (ExportKitchenA5Component)\r\n      case 'print_size_a4': return (ExportKitchenA4Component)\r\n      default: return (ExportKitchenA4Component)\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#purchase-invoice-detail-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-detail-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#purchase-invoice-detail-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-detail-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n\r\n    <nz-layout id=\"purchase-invoice-detail-today\">\r\n        <div class=\"sales\" *ngIf=\"invoice\">\r\n            <div class=\"sales-cart\">\r\n                <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\" class=\"title\">\r\n                        <b>{{'Receipt for kitchen' | translate}}</b>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                         \r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                    <div class=\"invoiceDetail-item\">\r\n                        <nz-table nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n                            [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n                            nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                    <!-- <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th> -->\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                    <td>{{item.name}} <br>\r\n                                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n\r\n                                            </span>\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                                            </span>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                                    <!-- <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td> -->\r\n                                </tr>\r\n                            </tbody>\r\n                        </nz-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills not-continue-sell\">\r\n                <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                    <div>\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <div> {{invoice.bill_code}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <div>{{invoiceInfo.employee.name}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                    <b>{{'Payment information' | translate}}</b>\r\n\r\n                    <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                        <span>{{'Note' | translate}}</span>\r\n                        <div>{{invoice.note}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks'; \r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhBillType16DetailEdit, VhBillType16Edit } from '../../bill-type/bill-type-16/bill-type16-interface';\r\nimport { ImportKitchenA4Component } from 'src/app/cafe/components/print/import_kitchen/import-kitchen-a4/import-kitchen-a4.component';\r\nimport { ImportKitchenA5Component } from 'src/app/cafe/components/print/import_kitchen/import-kitchen-a5/import-kitchen-a5.component';\r\nimport { ImportKitchenK57Col3Component } from 'src/app/cafe/components/print/import_kitchen/import-kitchen-k57-col3/import-kitchen-k57-col3.component';\r\nimport { ImportKitchenK80Col3Component } from 'src/app/cafe/components/print/import_kitchen/import-kitchen-k80-col3/import-kitchen-k80-col3.component';\r\nimport { ImportKitchenK80Col4Component } from 'src/app/cafe/components/print/import_kitchen/import-kitchen-k80-col4/import-kitchen-k80-col4.component';\r\n@Component({\r\n  selector: 'app-import-kitchen',\r\n  templateUrl: './import-kitchen.component.html',\r\n  styleUrls: ['./import-kitchen.component.scss']\r\n})\r\nexport class ImportKitchenComponent   {\r\n\r\n  @Input() id_bill: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail  : VhBillType16DetailEdit[] = [] \r\n  public invoice: VhBillType16Edit\r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.init();\r\n    let print = this.vhQueryCafe.getlocalPrinters().find(item => item.desktop)\r\n    this.printer = print ? print.desktop.purchase[print.desktop.purchase.type] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType16Edit = null, invoiceDetail: VhBillType16DetailEdit[] = null) {\r\n    console.log(invoice);\r\n    \r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n   \r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      ]).then(([invoice, invoiceDetail, list_barcode]: any) => {\r\n        this.listBarcodeLot = list_barcode.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n\r\n  getDateLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return this.functionService.formatDate(lot.date_mfg) + ' - ' + this.functionService.formatDate(lot.date_exp)\r\n  }\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n  \r\n   /**\r\n   * ly thng tin d liu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n   checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_destroy_product')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /**\r\n   * kim tra thng tin d liu trang in v m component in\r\n   * @example this.printInvoice()\r\n   */\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer,invoice_detail : this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      let state: any = \"Xut hy hng ha\"\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.router.navigate(['/cafe/dashboard/management/printer', 'page_desktop_destroy_product'], { state: state }))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (ImportKitchenK57Col3Component)\r\n      case 'print_size_k80_3c': return (ImportKitchenK80Col3Component)\r\n      case 'print_size_k80_4c': return (ImportKitchenK80Col4Component)\r\n      case 'print_size_a5': return (ImportKitchenA5Component)\r\n      case 'print_size_a4': return (ImportKitchenA4Component)\r\n      default: return (ImportKitchenA4Component)\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#purchase-invoice-detail-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-detail-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#purchase-invoice-detail-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-detail-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n\r\n    <nz-layout id=\"purchase-invoice-detail-today\">\r\n        <div class=\"sales\" *ngIf=\"invoice\">\r\n            <div class=\"sales-cart\">\r\n                <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\" class=\"title\">\r\n                        <b>{{'Entering ingredient from kitchen' | translate}}</b>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                         \r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                    <div class=\"invoiceDetail-item\">\r\n                        <nz-table nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n                            [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n                            nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                    <!-- <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th> -->\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                    <td>{{item.name}} <br>\r\n                                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n\r\n                                            </span>\r\n                                            <span style=\"font-size: 0.85rem;\">\r\n                                                <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                                            </span>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                                    <!-- <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td> -->\r\n                                </tr>\r\n                            </tbody>\r\n                        </nz-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills not-continue-sell\">\r\n                <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                    <div>\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <div> {{invoice.bill_code}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <div>{{invoiceInfo.employee.name}}</div>\r\n                    </div>\r\n                    <div>\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                    <b>{{'Payment information' | translate}}</b>\r\n\r\n                    <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                        <span>{{'Note' | translate}}</span>\r\n                        <div>{{invoice.note}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhBillType9DetailEdit, VhBillType9Edit } from '../../bill-type/bill-type-9/bill-type9-interface';\r\n\r\n\r\n@Component({\r\n  selector: 'app-openning-stock',\r\n  templateUrl: './openning-stock.component.html',\r\n  styleUrls: ['./openning-stock.component.scss']\r\n})\r\nexport class OpenningStockComponent   {\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  invoice_detail  : VhBillType9DetailEdit[] = []\r\n  subTotal = 0\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType9Edit\r\n  @Input() id_bill: any;\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef\r\n  ) { \r\n    this.init()\r\n  }\r\n\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType9Edit = null, invoiceDetail: VhBillType9DetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      \r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        let invoiceDetailFresh: VhBillType9DetailEdit[] = invoiceDetail \r\n        this.init(invoice, invoiceDetailFresh)\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"import_enable_cancel_openning_stock\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Opening stock\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  } \r\n\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#opening-stock-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".opening-stock-detail-header\")) {\r\n      this.tableHeight = (document.querySelector(\"#opening-stock-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".opening-stock-detail-header\").clientHeight) - 90 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n     \r\n<nz-layout id=\"opening-stock-detail\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n          <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n            <div nz-col nzSpan=\"12\" class=\"title\">\r\n              <b>{{'Opening stock' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n              \r\n              \r\n            \r\n            </div>\r\n           \r\n          </div>\r\n          <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n            <div class=\"invoiceDetail-item\">\r\n              <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger\r\n                nzNoResult=\"{{'No data' | translate}}\">\r\n                <thead>\r\n                  <tr>\r\n                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                    <td>{{item.name}} <br> <ng-container *ngIf=\"item.id_lotproduct\">\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                          <i style=\"font-size: 1rem;\" nz-icon nzType=\"printer\" nzTheme=\"outline\" nz-tooltip\r\n                            nzTooltipTitle=\"{{'_Print batch label' | translate}}\"\r\n                            (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                        </span>\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                        </span>\r\n                      </ng-container></td>\r\n                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                    <td nzAlign='right'>\r\n                      {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                      <del style=\"font-size: 0.7rem;\">\r\n                        {{item.price_origin > item.price ?\r\n                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                      </del>\r\n                    </td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </nz-table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sales-bills continue-sell\" >\r\n          <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n            <div>\r\n              <b>{{'Invoice code' | translate}}</b>\r\n              <div> {{invoice.bill_code}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Employee' | translate}}</b>\r\n              <div>{{invoiceInfo.employee.name}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Purchase date' | translate}}</b>\r\n              <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n            <b>{{'Supplier information' | translate}}</b>\r\n            <div *ngIf=\"invoiceInfo.partner\" nz-col nzSpan=\"24\">\r\n              <div>\r\n                <p>{{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone | translate}}</p>\r\n                <p>{{renderAddress(invoiceInfo.partner)}}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n            <b>{{'Payment information' | translate}}</b>\r\n            <div nz-col nzSpan=\"24\">\r\n              <span>{{'SubTotal' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n            \r\n            <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\"  >\r\n              <span>{{'Tax' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n              <div>\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n              <span>{{'Total' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n    \r\n            </div>\r\n             \r\n            <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" >\r\n              <span>{{'Note' | translate}}</span>\r\n              <div>{{invoice.note}}</div>\r\n            </div>\r\n          </div>\r\n          <div  nz-row class=\"sales-bills-button\">\r\n            <div nz-col nzSpan=\"24\">\r\n              \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n</nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { PurchaseA4Component } from 'src/app/cafe/components/print/purchase/purchase-a4/purchase-a4.component';\r\nimport { PurchaseA5Component } from 'src/app/cafe/components/print/purchase/purchase-a5/purchase-a5.component';\r\nimport { PurchaseK80Col4Component } from 'src/app/cafe/components/print/purchase/purchase-k80-col4/purchase-k80-col4.component';\r\nimport { PurchaseK80Col3Component } from 'src/app/cafe/components/print/purchase/purchase-k80-col3/purchase-k80-col3.component';\r\nimport { PurchaseK57Col3Component } from 'src/app/cafe/components/print/purchase/purchase-k57-col3/purchase-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhBillType2DetailEdit, VhBillType2Edit } from '../../bill-type/bill-type-2/bill-type2-interface';\r\n\r\n@Component({\r\n  selector: 'app-purchase',\r\n  templateUrl: './purchase.component.html',\r\n  styleUrls: ['./purchase.component.scss']\r\n})\r\nexport class PurchaseComponent implements OnInit {\r\n\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice: VhBillType2Edit\r\n  invoice_detail  : VhBillType2DetailEdit[] = []\r\n  subTotal = 0\r\n  @Input() id_bill: any;\r\n  printer : any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService:FunctionService,\r\n    private vhQuery:VhQuery\r\n  ) { \r\n     \r\n  }\r\n\r\n  ngOnInit(): void {  \r\n    let print = this.vhQueryCafe.getLocalPrintPage('page_desktop_purchase')\r\n    this.printer =print  ? print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] : {discount_hidden :false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType2Edit = null, invoiceDetail: VhBillType2DetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQueryCafe.getlocalSupplier(this.invoice.id_supplier),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type)\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      ]).then(([invoice, invoiceDetail, list_barcode]: any) => {\r\n        this.listBarcodeLot = list_barcode.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n        \r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units,ratio).unit\r\n  }\r\n  getLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number  \r\n  } \r\n  \r\n  getDateLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return this.functionService.formatDate(lot.date_mfg) + ' - ' +  this.functionService.formatDate(lot.date_exp)\r\n  } \r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQueryCafe.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n   /**\r\n   * ly thng tin d liu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_purchase')\r\n      if (printer  && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer , invoice_detail: this.invoice_detail,  invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      let state :any =\"Purchase\"\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        \r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ( PurchaseK57Col3Component)\r\n      case 'print_size_k80_3c': return ( PurchaseK80Col3Component)\r\n      case 'print_size_k80_4c': return ( PurchaseK80Col4Component)\r\n      case 'print_size_a5': return ( PurchaseA5Component)\r\n      case 'print_size_a4': return ( PurchaseA4Component)\r\n      default: return (  PurchaseA4Component)\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#purchase-invoice-detail-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-detail-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#purchase-invoice-detail-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-detail-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    \r\n<nz-layout id=\"purchase-invoice-detail-today\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n          <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n            <div nz-col nzSpan=\"12\" class=\"title\">\r\n              <b>{{'Purchase' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n              \r\n              <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                nzType=\"default\">\r\n                <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                {{'Print' | translate}}\r\n              </button>\r\n              \r\n            </div>\r\n           \r\n          </div>\r\n          <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n            <div class=\"invoiceDetail-item\">\r\n              <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger\r\n                nzNoResult=\"{{'No data' | translate}}\">\r\n                <thead>\r\n                  <tr>\r\n                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                    <td>{{item.name}} <br> <ng-container *ngIf=\"item.id_lotproduct\">\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                          <i style=\"font-size: 1rem;\" nz-icon nzType=\"printer\" nzTheme=\"outline\" nz-tooltip\r\n                            nzTooltipTitle=\"{{'_Print batch label' | translate}}\"\r\n                            (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                        </span>\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                        </span>\r\n                      </ng-container></td>\r\n                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                    <td nzAlign='right'>\r\n                      {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                      <del style=\"font-size: 0.7rem;\">\r\n                        {{item.price_origin > item.price ?\r\n                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                      </del>\r\n                    </td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </nz-table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sales-bills\" [ngClass]=\"invoice.bill_type == 6 ? 'continue-sell' : 'not-continue-sell'\">\r\n          <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n            <div>\r\n              <b>{{'Invoice code' | translate}}</b>\r\n              <div> {{invoice.bill_code}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Employee' | translate}}</b>\r\n              <div>{{invoiceInfo.employee.name}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Purchase date' | translate}}</b>\r\n              <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n            <b>{{'Supplier information' | translate}}</b>\r\n            <div *ngIf=\"invoiceInfo.partner\" nz-col nzSpan=\"24\">\r\n              <div>\r\n                <p>{{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone | translate}}</p>\r\n                <p>{{renderAddress(invoiceInfo.partner)}}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n            <b>{{'Payment information' | translate}}</b>\r\n            <div nz-col nzSpan=\"24\">\r\n              <span>{{'SubTotal' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n              <span>{{'Discount value' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n              <span>{{'Fee' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n              <span>{{'Tax' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n              <div>\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n              <span>{{'Total' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n    \r\n            </div>\r\n            <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n              <span>{{'Pay' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n    \r\n            </div>\r\n            <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"!printer.debt_hidden\">\r\n              <span>{{'Rest' | translate}}</span>\r\n              <div style=\"color: var(--ion-color-vh-red);\">\r\n                {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total * (1+invoice.tax / 100) - invoice.payment)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n              <span>{{'Payment method' | translate}}</span>\r\n              <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n              <span>{{'Note' | translate}}</span>\r\n              <div>{{invoice.note}}</div>\r\n            </div>\r\n          </div>\r\n           \r\n        </div>\r\n      </div>\r\n</nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { ReceiveGoodsA4Component } from 'src/app/cafe/components/print/receive-goods/receive-goods-a4/receive-goods-a4.component';\r\nimport { ReceiveGoodsA5Component } from 'src/app/cafe/components/print/receive-goods/receive-goods-a5/receive-goods-a5.component';\r\nimport { ReceiveGoodsK57Col3Component } from 'src/app/cafe/components/print/receive-goods/receive-goods-k57-col3/receive-goods-k57-col3.component';\r\nimport { ReceiveGoodsK80Col3Component } from 'src/app/cafe/components/print/receive-goods/receive-goods-k80-col3/receive-goods-k80-col3.component';\r\nimport { ReceiveGoodsK80Col4Component } from 'src/app/cafe/components/print/receive-goods/receive-goods-k80-col4/receive-goods-k80-col4.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component'; \r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhBillType2930DetailEdit, VhBillType2930Edit } from '../../bill-type/bill-type-29-30/bill-type2930-interface';\r\n\r\n@Component({\r\n  selector: 'app-recieve-goods',\r\n  templateUrl: './recieve-goods.component.html',\r\n  styleUrls: ['./recieve-goods.component.scss']\r\n})\r\nexport class RecieveGoodsComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  printer: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType2930Edit\r\n  invoiceDetail: VhBillType2930DetailEdit[] =  []\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  @Input() id_bill: any;\r\n  branchList: any = this.vhQueryCafe.getlocalBranchs()\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private lang: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n     \r\n  }\r\n  ngOnInit() {\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable;\r\n    }\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n  checkPrinter: boolean = false;\r\n\r\n  init(invoice: VhBillType2930Edit = null, invoiceDetail: VhBillType2930DetailEdit[] = null) {\r\n    this.invoice = invoice;\r\n    this.invoiceDetail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        branch_name : this.vhQueryCafe.getlocalBranch(invoice.id_branch),\r\n        branch_name_reception: this.vhQueryCafe.getlocalBranch(invoice.id_branch_receive),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n    //tnh tng tin\r\n    let subTotal = 0;\r\n    for (let i of this.invoiceDetail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n  }\r\n\r\n  getBranchName(id_branch) {\r\n    if (id_branch)\r\n      return this.branchList.find(e => e._id == id_branch).name\r\n    else return ''\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        invoice.id_branch_send = invoice.bill_type == 29 ? invoice.id_branch : invoice.id_branch_send;\r\n        invoice.id_branch_receive = invoice.bill_type == 29 ? invoice.id_branch_receive : invoice.id_branch;\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n\r\n      })\r\n    })\r\n\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n  * ly thng tin d liu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice(goback?) {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice ,invoice_detail: this.invoiceDetail}, false, false, `modal-print-${printer['_id']}`).then(modal => {\r\n          modal.onWillDismiss().then(() => { })\r\n        })\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.lang.translate(\"Function\"), \"\", this.lang.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ReceiveGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return ReceiveGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return ReceiveGoodsK80Col4Component\r\n      case 'print_size_a5': return ReceiveGoodsA5Component\r\n      case 'print_size_a4': return ReceiveGoodsA4Component\r\n      default: return ReceiveGoodsA4Component\r\n    }\r\n  }\r\n  /**Tr v trang nhn hng\r\n   * nu l bill 29 m c uuid th update li\r\n   * nu l 29 nhng khng c uuid tc l bill ny  chuyn trng thi, trn db khng phi l bill 29 na\r\n   */\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#receive-good-detail-invoice\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".receive-good-detail-invoice-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#receive-good-detail-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".receive-good-detail-invoice-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n      \r\n<nz-layout id=\"receive-good-detail-invoice\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header receive-good-detail-invoice-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"14\" class=\"title\">\r\n                    <b>{{'Goods received receipt' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"custom-btn right-all-content\">\r\n                    <div *ngIf=\"invoice.bill_type == 31\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceDetail\" #rowSelectionTable\r\n                        nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"12%\"><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"25%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                <td>{{item.name}}\r\n                                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                      <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                                    </ng-container></td>\r\n                                <td> {{getUnit(item.units, item.ratio)}}</td>\r\n                                <td nzAlign='center'>{{item.quantity}}</td>\r\n                                <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div [ngClass]=\"invoice.bill_type == 29 ? 'continue-sell' :'not-continue-sell'\" class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Date' | translate}}</b>\r\n                    <div>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Prepared by' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery branch' | translate}}</b>\r\n                    <div>{{invoiceInfo['branch_name']}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Receive branch' | translate}}</b>\r\n                    <div>{{invoiceInfo['branch_name_reception']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                    <div>\r\n                      {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n          \r\n                  </div> \r\n                  <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                  </div>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { ReturnSupplierA4Component } from 'src/app/cafe/components/print/return-supplier/return-supplier-a4/return-supplier-a4.component';\r\nimport { ReturnSupplierA5Component } from 'src/app/cafe/components/print/return-supplier/return-supplier-a5/return-supplier-a5.component';\r\nimport { ReturnSupplierK80Col4Component } from 'src/app/cafe/components/print/return-supplier/return-supplier-k80-col4/return-supplier-k80-col4.component';\r\nimport { ReturnSupplierK80Col3Component } from 'src/app/cafe/components/print/return-supplier/return-supplier-k80-col3/return-supplier-k80-col3.component';\r\nimport { ReturnSupplierK57Col3Component } from 'src/app/cafe/components/print/return-supplier/return-supplier-k57-col3/return-supplier-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhSupplierReturnInvoiceDetail, VhSupplierReturnInvoices } from 'src/app/cafe/interface/vh-supplier-return-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhBillType10DetailEdit, VhBillType10Edit } from '../../bill-type/bill-type-10/bill-type10-interface';\r\n\r\n@Component({\r\n  selector: 'app-return-supplier',\r\n  templateUrl: './return-supplier.component.html',\r\n  styleUrls: ['./return-supplier.component.scss']\r\n})\r\nexport class ReturnSupplierComponent implements OnInit {\r\n  printer:any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType10Edit\r\n  invoice_detail  : VhBillType10DetailEdit[] = []\r\n  subTotal = 0\r\n  @Input() id_bill: any;\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService:FunctionService\r\n  ) { \r\n    \r\n  }\r\n\r\n  ngOnInit(): void {  \r\n    let print = this.vhQueryCafe.getLocalPrintPage('page_desktop_return_supplier')\r\n    this.printer =print  ? print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] : {discount_hidden :false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhBillType10Edit = null, invoiceDetail: VhBillType10DetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQueryCafe.getlocalSupplier(this.invoice.id_supplier),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type)\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        let invoiceDetailFresh: VhBillType10DetailEdit[] = invoiceDetail \r\n        invoiceDetailFresh = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetailFresh, 'name');\r\n        console.log(invoice);\r\n        \r\n        this.init(invoice, invoiceDetailFresh)\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units,ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' +  this.fncService.formatDate(lot.date_exp)\r\n  } \r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"return_enable_cancel_supplier\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Return supplier\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQueryCafe.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n  /**\r\n  * ly thng tin d liu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_return_supplier')\r\n      if (printer  && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer ,invoice_detail: this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      let state : any =\"Return customer\"\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n       \r\n    })\r\n  }\r\n\r\n  /**\r\n   * tr v component ca trang in tng ng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ReturnSupplierK57Col3Component\r\n      case 'print_size_k80_3c': return ReturnSupplierK80Col3Component\r\n      case 'print_size_k80_4c': return ReturnSupplierK80Col4Component\r\n      case 'print_size_a5': return ReturnSupplierA5Component\r\n      case 'print_size_a4': return ReturnSupplierA4Component\r\n      default: return ReturnSupplierA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal();\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#return-invoice-supplier-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".return-invoice-supplier-detail-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#return-invoice-supplier-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".return-invoice-supplier-detail-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    \r\n<nz-layout id=\"return-invoice-supplier-detail\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n          <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n            <div nz-col nzSpan=\"12\" class=\"title\">\r\n              <b>{{'Return supplier invoice' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n             \r\n              <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                nzType=\"default\">\r\n                <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                {{'Print' | translate}}\r\n              </button>\r\n              \r\n            </div>\r\n           \r\n          </div>\r\n          <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n            <div class=\"invoiceDetail-item\">\r\n              <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger\r\n                nzNoResult=\"{{'No data' | translate}}\">\r\n                <thead>\r\n                  <tr>\r\n                    <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                    <td>{{item.name}} <br> <ng-container *ngIf=\"item.id_lotproduct\">\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                          <i style=\"font-size: 1rem;\" nz-icon nzType=\"printer\" nzTheme=\"outline\" nz-tooltip\r\n                            nzTooltipTitle=\"{{'_Print batch label' | translate}}\"\r\n                            (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                        </span>\r\n                        <span style=\"font-size: 0.85rem;\">\r\n                          <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                        </span>\r\n                      </ng-container></td>\r\n                    <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                    <td nzAlign='center'>{{item.quantity}}</td>\r\n                    <td nzAlign='right'>\r\n                      {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                      <del style=\"font-size: 0.7rem;\">\r\n                        {{item.price_origin > item.price ?\r\n                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                      </del>\r\n                    </td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </nz-table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\" >\r\n          <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n            <div>\r\n              <b>{{'Invoice code' | translate}}</b>\r\n              <div> {{invoice.bill_code}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Employee' | translate}}</b>\r\n              <div>{{invoiceInfo.employee.name}}</div>\r\n            </div>\r\n            <div>\r\n              <b>{{'Purchase date' | translate}}</b>\r\n              <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n            <b>{{'Supplier information' | translate}}</b>\r\n            <div *ngIf=\"invoiceInfo.partner\" nz-col nzSpan=\"24\">\r\n              <div>\r\n                <p>{{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone | translate}}</p>\r\n                <p>{{renderAddress(invoiceInfo.partner)}}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n            <b>{{'Payment information' | translate}}</b>\r\n            <div nz-col nzSpan=\"24\">\r\n              <span>{{'SubTotal' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n              <span>{{'Discount value' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n              <span>{{'Fee' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n              <span>{{'Tax' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n              <div>\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n              <span>{{'Total' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n    \r\n            </div>\r\n            <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n              <span>{{'Pay' | translate}}</span>\r\n              <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n    \r\n            </div>\r\n            <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"!printer.debt_hidden\">\r\n              <span>{{'Rest' | translate}}</span>\r\n              <div style=\"color: var(--ion-color-vh-red);\">\r\n                {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total * (1+invoice.tax / 100) - invoice.payment)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n              <span>{{'Payment method' | translate}}</span>\r\n              <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n              <span>{{'Note' | translate}}</span>\r\n              <div>{{invoice.note}}</div>\r\n            </div>\r\n          </div>\r\n         \r\n        </div>\r\n      </div>\r\n</nz-layout>\r\n</ion-content>"],"names":["ExchangePaymentCardK57Col3Component","ExchangePaymentCardK80Col4Component","ExchangePaymentCardK80Col3Component","ExchangePaymentCardA5Component","ExchangePaymentCardA4Component","i0","ExchangePaymentCardComponent","constructor","router","vhQueryCafe","languageService","vhAuth","vhComponent","vhAlgorithm","cdRef","vhQuery","getLocalAppSettingNameBranch","display_promotion_selling_price","ngAfterViewInit","getDataInvoice","id_bill","init","bill_type","invoice","invoiceDetail","console","log","invoiceInfo","employee","getlocalEmployee","id_employee","partner","getlocalCustomer","id_customer","paymentName","total_product","i","products","reduce","prev","next","quantity","id","showLoading","then","Promise","all","getBill","getBill_details_byId_bill","promise","Array","length","getPaymentCard_Code_Name_Release","id_payment_card_code","asyncPromiseAll","array","invoiceDetailFresh","map","item","index","name_payment_card_release","name_payment_card","code","prod_child","name","units","ratio","quantity_use","outquantity","restquantity","find","e","id_subproduct","id_product","setTimeout","product_codes","hideLoading","error","getUnit","getUnit_byRatio","unit","getLotNumber","lots","_id","lot","lot_number","ngAfterViewChecked","document","querySelector","tableHeight","clientHeight","detectChanges","goBack","navigate","state","dataRestore","printInvoice","print","getLocalPrintPage","print_sizes","findIndex","print_size_default","enable","printer","type","showModal","renderPrintPage","invoice_detail","modal","onWillDismiss","deleteInvoice","checkMyPermission","alertConfirm","translate","deleteBill_Billdetail","alertMessageDesktop","bill_code","reload","renderAddress","address","district","province","country","selectors","inputs","decls","vars","consts","template","ctx","ExchangeVoucherK57Col3Component","ExchangeVoucherK80Col3Component","ExchangeVoucherK80Col4Component","ExchangeVoucherA5Component","ExchangeVoucherA4Component","ExchangeVoucherComponent","nzModalService","hideModal","checkPrint","err","confirm","nzTitle","nzContent","nzIconType","nzCancelText","nzOnOk","gotoPrinter","resolve","rejects"],"sourceRoot":"webpack:///"}