{"version":3,"file":"default-src_app_cafe_interface_vh-booking_ts.js","mappings":"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","sources":["./src/app/cafe/interface/vh-booking.ts"],"sourcesContent":["export interface VhBookingInvoice {\r\n  bill_type: 17 | 5;\r\n  id_customer: 'id_retail' | string;\r\n  tax_buyerDisplayName?: string;\r\n  tax_buyerLegalName?: string;\r\n  tax_buyerTaxCode?: string;\r\n  tax_buyerAddressLine?: string;\r\n  tax_buyerEmail?: string;\r\n  id_branch: string;\r\n  id_employee: string;\r\n  date: string;\r\n  total: number;\r\n  tax: number;\r\n  discount: number;\r\n  fee: number;\r\n  note: string;\r\n  _id?: string;\r\n  bill_code?: string;\r\n  id_table: string;\r\n  id_area: string;\r\n  partner_name?: string;\r\n  payment_name?: string;\r\n  retail_name?: string;\r\n  retail_phone?: string;\r\n  retail_address?: string;\r\n  payment_type: 1 | 2 | 3;\r\n  id_wallet?: 'id_cash' | string;\r\n  cash: number;\r\n  price_type: number;\r\n}\r\nexport interface VhBookingInvoiceDetail {\r\n  quantity: number;\r\n  price: number;\r\n  price_origin?: number;\r\n  ptype: number;\r\n  note: string;\r\n  properties?: VhBookingInvoiceDetailProperties[];\r\n  toppings?: VhBookingInvoiceDetailTopping[];\r\n  combos?: VhBookingInvoiceDetailCombo[];\r\n  id_product: string;\r\n  id_subproduct?: string;\r\n   \r\n  id_bill?: string;\r\n  _id?: string;\r\n  name?: string;\r\n  subComboName?: string;\r\n  unit?: string;\r\n  units?: any[];\r\n  ratio: number;\r\n  time_start_order?: string;\r\n  type?: number;\r\n  id_promotion?: string;\r\n  pmtype?: number;\r\n  products?: any;\r\n  products_gift?: any;\r\n  lots?: any[];\r\n  lot_number?: string;\r\n  id_lotproduct?: string;\r\n  promotions_maximum?: any;\r\n  earning_points_product?: number;\r\n}\r\nexport interface VhBookingInvoiceDetailProperties {\r\n  value: string[];\r\n  selectedValue: string;\r\n  name: string;\r\n}\r\nexport interface VhBookingInvoiceDetailTopping {\r\n  id_product: string;\r\n  id_category: string;\r\n  price: number;\r\n  price_origin?: number;\r\n  quantity: number;\r\n  name?: string;\r\n  unit?: string;\r\n  units?: any[];\r\n  ratio: number;\r\n}\r\nexport interface VhBookingInvoiceDetailCombo {\r\n  id_product: string;\r\n  id_subproduct?: string;\r\n  id_category: string;\r\n  price: number;\r\n  quantity: number;\r\n  name?: string;\r\n  ptype: number;\r\n  unit?: string;\r\n  units?: any[];\r\n  ratio: number;\r\n  id_lotproduct?: string;\r\n  lots?: any[];\r\n}\r\nexport class VhBookingInvoices {\r\n  private invoice: VhBookingInvoice = {\r\n    payment_type: 1,\r\n    date: new Date().toISOString(),\r\n    id_customer: 'id_retail',\r\n    tax_buyerDisplayName: 'Người mua không lấy hoá đơn',\r\n    tax_buyerLegalName: '',\r\n    tax_buyerTaxCode: '',\r\n    tax_buyerAddressLine: '',\r\n    tax_buyerEmail: '',\r\n    id_table: 'go_home',\r\n    id_area: null,\r\n    id_branch: null,\r\n    id_employee: null,\r\n    total: 0,\r\n    tax: 0,\r\n    discount: 0,\r\n    fee: 0,\r\n    bill_type: null,\r\n    note: '',\r\n    id_wallet: 'id_cash',\r\n    price_type: 1,\r\n    cash: 0,\r\n  };\r\n  private subTotal?: number = 0;\r\n  private taxValue?: number = 0;\r\n\r\n  private invoiceDetail?: VhBookingInvoiceDetail[] = [];\r\n  constructor(invoice: any = null, invoiceDetail: any[] = []) {\r\n    if (invoice) {\r\n      if(invoice['_id']) this.invoice.bill_code = invoice['bill_code']\r\n        ? invoice['bill_code']\r\n        : null;\r\n      this.invoice.id_customer = invoice['id_customer']\r\n        ? invoice['id_customer']\r\n        : 'id_retail';\r\n      this.invoice.tax_buyerDisplayName = invoice['tax_buyerDisplayName'] ? invoice['tax_buyerDisplayName'] : '';\r\n      this.invoice.tax_buyerLegalName = invoice['tax_buyerLegalName'] ? invoice['tax_buyerLegalName'] : '';\r\n      this.invoice.tax_buyerTaxCode = invoice['tax_buyerTaxCode'] ? invoice['tax_buyerTaxCode'] : '';\r\n      this.invoice.tax_buyerAddressLine = invoice['tax_buyerAddressLine'] ? invoice['tax_buyerAddressLine'] : '';\r\n      this.invoice.tax_buyerEmail = invoice['tax_buyerEmail'] ? invoice['tax_buyerEmail'] : '';\r\n      this.invoice.id_employee = invoice['id_employee']\r\n        ? invoice['id_employee']\r\n        : null;\r\n      this.invoice.id_branch = invoice['id_branch']\r\n        ? invoice['id_branch']\r\n        : null;\r\n\r\n      this.invoice.id_table = invoice['id_table'] ? invoice['id_table'] : null;\r\n      this.invoice.id_area = invoice['id_area'] ? invoice['id_area'] : null;\r\n      this.invoice.total = invoice['total'] ? invoice['total'] : 0;\r\n      this.invoice.tax = invoice['tax'] ? invoice['tax'] : 0;\r\n      this.invoice.discount = invoice['discount'] ? invoice['discount'] : 0;\r\n      this.invoice.fee = invoice['fee'] ? invoice['fee'] : 0;\r\n      this.invoice.price_type = invoice['price_type']\r\n        ? invoice['price_type']\r\n        : 1;\r\n      this.invoice.bill_type = invoice['bill_type']\r\n        ? invoice['bill_type']\r\n        : null;\r\n      this.invoice.date = invoice['date']\r\n        ? invoice['date']\r\n        : new Date().toISOString();\r\n      this.invoice.cash = invoice['cash'] ? invoice['cash'] : 0;\r\n\r\n      this.invoice.note = invoice['note'] ? invoice['note'] : '';\r\n      if(invoice['_id']) this.invoice._id = invoice['_id'] ? invoice['_id'] : null;\r\n      this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n      if (invoice['id_customer'] == 'id_retail') {\r\n        this.invoice.retail_name = invoice['retail_name'] || '';\r\n        this.invoice.retail_phone = invoice['retail_phone'] || '';\r\n        this.invoice.retail_address = invoice['retail_address'] || '';\r\n      }\r\n    }\r\n\r\n    if (invoiceDetail) {\r\n      this.invoiceDetail = invoiceDetail;\r\n      this.subTotal = this.invoiceDetail.reduce(\r\n        (prev: number, next: VhBookingInvoiceDetail) => {\r\n          let total = prev + next.quantity * next.price;\r\n          if (next.toppings)\r\n            total += next.toppings.reduce(\r\n              (\r\n                prevTopping: number,\r\n                nextTopping: VhBookingInvoiceDetailTopping\r\n              ) => prevTopping + nextTopping.quantity * nextTopping.price,\r\n              0\r\n            );\r\n          return total;\r\n        },\r\n        0\r\n      );\r\n    }\r\n  }\r\n  /******************************Xu ly invoice *******************************/\r\n  public getID(): string {\r\n    return this.invoice._id;\r\n  }\r\n\r\n  public getBillType(): 17 | 5 {\r\n    return this.invoice.bill_type;\r\n  }\r\n  public setBillType(value: 17 | 5) {\r\n    this.invoice.bill_type = value;\r\n  }\r\n  public getDate(): string {\r\n    return this.invoice.date;\r\n  }\r\n  public setDate(value: string) {\r\n    this.invoice.date = value;\r\n  }\r\n\r\n  public getBillCode(): string {\r\n    return this.invoice.bill_code;\r\n  }\r\n  public setBillCode(value: string) {\r\n    this.invoice.bill_code = value;\r\n  }\r\n\r\n  public getIdPartner(): string {\r\n    return this.invoice.id_customer;\r\n  }\r\n  public setIdPartner(value: string) {\r\n    this.invoice.id_customer = value;\r\n  }\r\n\r\n  public getTaxBuyerDisplayName(): string {\r\n    return this.invoice.tax_buyerDisplayName;\r\n  }\r\n  public setTaxBuyerDisplayName(value: string) {\r\n    this.invoice.tax_buyerDisplayName = value;\r\n  }\r\n\r\n  public getTaxBuyerLegalName(): string {\r\n    return this.invoice.tax_buyerLegalName;\r\n  }\r\n  public setTaxBuyerLegalName(value: string) {\r\n    this.invoice.tax_buyerLegalName = value;\r\n  }\r\n\r\n  public getTaxBuyerTaxCode(): string {\r\n    return this.invoice.tax_buyerTaxCode;\r\n  }\r\n  public setTaxBuyerTaxCode(value: string) {\r\n    this.invoice.tax_buyerTaxCode = value;\r\n  }\r\n\r\n  public getTaxBuyerAddressLine(): string {\r\n    return this.invoice.tax_buyerAddressLine;\r\n  }\r\n  public setTaxBuyerAddressLine(value: string) {\r\n    this.invoice.tax_buyerAddressLine = value;\r\n  }\r\n\r\n  public getTaxBuyerEmail(): string {\r\n    return this.invoice.tax_buyerEmail;\r\n  }\r\n  public setTaxBuyerEmail(value: string) {\r\n    this.invoice.tax_buyerEmail = value;\r\n  }\r\n\r\n  public getIdEmployee(): string {\r\n    return this.invoice.id_employee;\r\n  }\r\n  public setIdEmployee(value: string) {\r\n    this.invoice.id_employee = value;\r\n  }\r\n\r\n  public getIdBranch(): string {\r\n    return this.invoice.id_branch;\r\n  }\r\n  public setIdBranch(value: string) {\r\n    this.invoice.id_branch = value;\r\n  }\r\n\r\n  public getIdTable(): string {\r\n    return this.invoice.id_table;\r\n  }\r\n  public setIdTable(value: string) {\r\n    this.invoice.id_table = value;\r\n  }\r\n\r\n  public getIdArea(): string {\r\n    return this.invoice.id_area;\r\n  }\r\n  public setIdArea(value: string) {\r\n    this.invoice.id_area = value;\r\n  }\r\n\r\n  public getNote(): string {\r\n    return this.invoice.note;\r\n  }\r\n  public setNote(value: string) {\r\n    this.invoice.note = value;\r\n  }\r\n\r\n  public getTax(): number {\r\n    return this.invoice.tax;\r\n  }\r\n  public setTax(value: number) {\r\n    this.invoice.tax = value;\r\n    this.setTaxValue();\r\n  }\r\n\r\n  public getTaxValue(): number {\r\n    return this.taxValue;\r\n  }\r\n  public setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n  }\r\n\r\n  public getDiscount(): number {\r\n    return this.invoice.discount;\r\n  }\r\n  public setDiscount(value: number) {\r\n    this.invoice.discount = value;\r\n    this.setTotal();\r\n  }\r\n\r\n  public getFee(): number {\r\n    return this.invoice.fee;\r\n  }\r\n  public setFee(value: number) {\r\n    this.invoice.fee = value;\r\n    this.setTotal();\r\n  }\r\n\r\n  public getCash() {\r\n    return this.invoice.cash;\r\n  }\r\n  public setCash(value) {\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0;\r\n    else {\r\n      if (value) this.invoice.cash = parseFloat(value);\r\n      else this.invoice.cash = 0;\r\n    }\r\n  }\r\n  public getSubTotal(): number {\r\n    return this.subTotal;\r\n  }\r\n  public setSubTotal() {\r\n    this.subTotal = this.invoiceDetail.reduce(\r\n      (prev: number, next: VhBookingInvoiceDetail) => {\r\n        let total = prev + next.quantity * next.price;\r\n        if (next.toppings)\r\n          total += next.toppings.reduce(\r\n            (prevTopping: number, nextTopping: VhBookingInvoiceDetailTopping) =>\r\n              prevTopping + nextTopping.quantity * nextTopping.price,\r\n            0\r\n          );\r\n        return total;\r\n      },\r\n      0\r\n    );\r\n    this.setTotal();\r\n  }\r\n\r\n  public getTotal(): number {\r\n    return this.invoice.total;\r\n  }\r\n  public setTotal() {\r\n    this.invoice.total =\r\n      this.getSubTotal() - this.getDiscount() + this.getFee();\r\n    this.setTaxValue();\r\n  }\r\n  public getTotalATax(): number {\r\n    return this.getTotal() + this.getTaxValue();\r\n  }\r\n  public getRetailName() {\r\n    return this.invoice.retail_name;\r\n  }\r\n  public setRetailName(retail_name: string) {\r\n    this.invoice.retail_name = retail_name;\r\n  }\r\n  public getRetailPhone() {\r\n    return this.invoice.retail_phone;\r\n  }\r\n  public setRetailPhone(retail_phone: string) {\r\n    this.invoice.retail_phone = retail_phone;\r\n  }\r\n  public getRetailAddress() {\r\n    return this.invoice.retail_address;\r\n  }\r\n  public setRetailAddress(retail_address: string) {\r\n    this.invoice.retail_address = retail_address;\r\n  }\r\n  public getPaymentType(): 1 | 2 | 3 {\r\n    return this.invoice.payment_type;\r\n  }\r\n  public setPaymentType(value: 1 | 2 | 3) {\r\n    this.invoice.payment_type = value;\r\n  }\r\n  public getIdWallet(): string {\r\n    return this.invoice.id_wallet;\r\n  }\r\n  public setIdWallet(value: string) {\r\n    this.invoice.id_wallet = value;\r\n  }\r\n\r\n  public getPriceType(): number {\r\n    return this.invoice.price_type;\r\n  }\r\n\r\n  public setPriceType(price_type: number) {\r\n    this.invoice.price_type = price_type;\r\n  }\r\n  /******************************Xu ly invoice detail *******************************/\r\n  /**Đưa sản phẩm vô danh sách bill detail */\r\n  public addInvoiceDetail(value: any) {\r\n    value['id_product'] = value['_id'];\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoiceDetail.findIndex(\r\n          (detail) => detail['id_lotproduct'] == value['id_lotproduct']\r\n        );\r\n        if (index != -1) {\r\n          if (this.invoiceDetail[index]['quantity'] < 9999999999)\r\n            this.invoiceDetail[index]['quantity'] += value['quantity'];\r\n        } else {\r\n          this.invoiceDetail.push(value);\r\n        }\r\n      } else {\r\n\r\n        let index = this.invoiceDetail.findIndex(\r\n          (detail) =>\r\n            detail['id_subproduct'] == value['id_subproduct'] &&\r\n            detail['ratio'] == value['ratio']\r\n        );\r\n        if (index != -1) {\r\n          if (this.invoiceDetail[index]['quantity'] < 9999999999)\r\n            this.invoiceDetail[index]['quantity'] += value['quantity'];\r\n        } else {\r\n          this.invoiceDetail.push(value);\r\n        }\r\n      }\r\n    } else {\r\n      if (value.lot_number) {\r\n        let index = this.invoiceDetail.findIndex(\r\n          (detail) => detail['id_lotproduct'] == value['id_lotproduct']\r\n        );\r\n        if (index != -1) {\r\n          if (this.invoiceDetail[index]['quantity'] < 9999999999)\r\n            this.invoiceDetail[index]['quantity'] += value['quantity'];\r\n        } else {\r\n          this.invoiceDetail.push(value);\r\n        }\r\n      } else {\r\n        let index = this.invoiceDetail.findIndex(\r\n          (detail) =>\r\n            detail['id_product'] == value['_id'] &&\r\n            detail['ratio'] == value['ratio']\r\n        );\r\n        if (index != -1) {\r\n          if (this.invoiceDetail[index]['quantity'] < 9999999999)\r\n            this.invoiceDetail[index]['quantity'] += value['quantity'];\r\n        } else {\r\n          this.invoiceDetail.push(value);\r\n        }\r\n      }\r\n    }\r\n    this.setSubTotal();\r\n  }\r\n\r\n  addInvoiceDetailMutilLine(value: any) {\r\n    this.invoiceDetail.push(value);\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /** Xóa sản phẩm khỏi danh sách bill detail */\r\n  public removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoiceDetail.findIndex(\r\n      (detail) => detail['id_product'] == id || detail['id_subproduct'] == id\r\n    );\r\n    if (index != -1) {\r\n      this.invoiceDetail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal();\r\n    }\r\n  }\r\n  /** Lấy danh sách toàn bộ bill detail */\r\n  public getInvoiceDetail(): VhBookingInvoiceDetail[] {\r\n    return this.invoiceDetail;\r\n  }\r\n  /** Lấy toàn bộ topping trong 1 bill detail */\r\n  public getInvoiceDetailToppings(\r\n    idDetail: string\r\n  ): VhBookingInvoiceDetailTopping[] {\r\n    let detailBill: VhBookingInvoiceDetail = this.invoiceDetail.find(\r\n      (detail) => detail._id == idDetail\r\n    );\r\n    return detailBill ? detailBill.toppings : null;\r\n  }\r\n  /**Lấy toàn bộ combo trong 1 bill detail */\r\n  public getInvoiceDetailCombos(\r\n    idDetail: string\r\n  ): VhBookingInvoiceDetailCombo[] {\r\n    let detailBill: VhBookingInvoiceDetail = this.invoiceDetail.find(\r\n      (detail) => detail._id == idDetail\r\n    );\r\n    return detailBill ? detailBill.combos : null;\r\n  }\r\n  /******************************create - update - delete invoice / detail *******************************/\r\n  /** Hàm lấy collection bill dùng để đưa vô database */\r\n  public getCreateUpdateInvoice(bill_type: 17 | 5 | null = null) {\r\n    if (bill_type) this.setBillType(bill_type);\r\n    return this.invoice;\r\n  }\r\n  /** Hàm lấy collection bill details dùng để đưa vô database */\r\n  public getCreateUpdateInvoiceDetail(\r\n    toOrder: boolean = false\r\n  ): VhBookingInvoiceDetail[] {\r\n    console.log(this.invoiceDetail);\r\n\r\n    return this.invoiceDetail.map((item) => {\r\n      let detail: VhBookingInvoiceDetail = {\r\n        \r\n        id_product: item.id_product ?item.id_product :item._id,\r\n        price: item.price,\r\n        price_origin: item.price_origin,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype ? item.ptype: item.type,\r\n        note: item.note,\r\n        ratio: item.ratio,\r\n      };\r\n      // xét điều kiện phụ\r\n      if (detail.ptype == 5){\r\n        detail['combos'] = item.combos.map((combo) => {\r\n          let product: VhBookingInvoiceDetailCombo = {\r\n            id_product: combo.id_product,\r\n            id_category: combo.id_category,\r\n            price: combo.price,\r\n            quantity: combo.quantity,\r\n            ptype: combo.ptype,\r\n            ratio: combo.ratio,\r\n          };\r\n          if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct;\r\n          return product;\r\n        });\r\n      }\r\n      if (detail.ptype == 1) {\r\n        if (item.toppings)\r\n          detail['toppings'] = [\r\n            ...item.toppings.map((item) => {\r\n              return {\r\n                id_product: item.id_product,\r\n                id_category: item.id_category,\r\n                price: item.price,\r\n                price_origin: item.price_origin,\r\n                quantity: item.quantity,\r\n                unit: item.unit,\r\n                units: item.units,\r\n                ratio: item.ratio,\r\n              };\r\n            }),\r\n          ];\r\n\r\n        if (item.properties)\r\n          detail['properties'] = [\r\n            ...item.properties.map((item) => {\r\n              return {\r\n                name: item.name,\r\n                value: [...item.value],\r\n                selectedValue: item.selectedValue,\r\n              };\r\n            }),\r\n          ];\r\n      }\r\n      if (toOrder) {\r\n        detail['dispatcher_done'] = false;\r\n        detail['time_start_order'] = new Date().toISOString();\r\n      }\r\n      if(item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      return detail;\r\n    });\r\n  }\r\n  /**Tạo bill detail từ sản phẩm */\r\n  public getCreateItemDetail(food, subItem?, dispatcher_done?: any) {\r\n    let detail: any = {\r\n      id_bill: this.invoice._id,\r\n      id_product: food.id_product? food.id_product: food._id,\r\n      name: food.name,\r\n      quantity: food.quantity,\r\n      ptype: food.ptype,\r\n      price: food.price,\r\n      dispatcher_done: dispatcher_done ? dispatcher_done : false,\r\n      time_start_order: new Date().toISOString(),\r\n      note: food.note,\r\n      price_origin: food.price,\r\n      ratio: food.ratio,\r\n      units: food.units,\r\n    };\r\n    if (food.id_lotproduct) detail['id_lotproduct'] = food.id_lotproduct;\r\n    if (food.id_subproduct) detail['id_subproduct'] = food.id_subproduct;\r\n\r\n    if (detail.ptype == 1) {\r\n      if (food.properties && food.properties.length)\r\n        detail['properties'] = [\r\n          ...food.properties.map((item) => {\r\n            return {\r\n              ...item,\r\n              value: [...item.value],\r\n            };\r\n          }),\r\n        ];\r\n\r\n      if (food.toppings && food.toppings.length)\r\n        detail['toppings'] = [\r\n          ...food.toppings\r\n            .filter((item) => item.quantity)\r\n            .map((topping) => {\r\n              return {\r\n                id_product: topping.id_product,\r\n                ptype: 4,\r\n                price: topping.price,\r\n                price_origin: topping.price_origin,\r\n                quantity: topping.quantity,\r\n                units: topping.units,\r\n                name: topping.name,\r\n                unit: topping.unit,\r\n                ratio: topping.ratio,\r\n              };\r\n            }),\r\n        ];\r\n    }\r\n\r\n    if (detail.ptype == 5) {\r\n      detail['subComboName'] = food.subComboName;\r\n      detail['combos'] = [\r\n        ...food.combos.map((item) => {\r\n          let product: VhBookingInvoiceDetailCombo = {\r\n            id_product: item.id_product,\r\n            name: item.name,\r\n            ptype: item.type,\r\n            ratio: item.ratio,\r\n            price: item.price,\r\n            quantity: item.quantity,\r\n            units: item.units,\r\n            id_category: item.id_category,\r\n            unit: item.unit,\r\n          };\r\n          if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n          if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n          if (item.lots) product['lots'] = item.lots;\r\n          return product;\r\n        }),\r\n      ];\r\n    }\r\n    return detail;\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}