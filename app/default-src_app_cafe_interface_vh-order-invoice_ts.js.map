{"version":3,"file":"default-src_app_cafe_interface_vh-order-invoice_ts.js","mappings":"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","sources":["./src/app/cafe/interface/vh-order-invoice.ts"],"sourcesContent":["import { Platform } from '@ionic/angular';\r\nimport { VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhType } from './vh-type';\r\nexport interface VhOrderInvoice {\r\n  bill_type: 1 | 4 | 5 | 36;\r\n  payment_type: 1 | 2 | 3;\r\n  id_customer: 'id_retail' | string;\r\n  tax_buyerDisplayName?: string;\r\n  tax_buyerLegalName?: string;\r\n  tax_buyerTaxCode?: string;\r\n  tax_buyerAddressLine?: string;\r\n  tax_buyerEmail?: string;\r\n  id_branch: string;\r\n  id_employee: string;\r\n  id_wallet?: 'id_cash' | string;\r\n  date: string;\r\n  total: number;\r\n  payment: number;\r\n  tax: number;\r\n  discount: number;\r\n  discount_bill?: number;\r\n  payment_points?: number;\r\n  payment_coupons?: number;\r\n  coupon_codes?: any[];\r\n  earning_points_bill?: number;\r\n  use_points?: number;\r\n  fee: number;\r\n  note: string;\r\n  _id?: string;\r\n  cash: number;\r\n  bill_code?: string;\r\n  id_table: string;\r\n  id_area: string;\r\n  partner_name?: string;\r\n  payment_name?: string;\r\n  retail_name?: string;\r\n  retail_phone?: string;\r\n  retail_address?: string;\r\n  price_type: number;\r\n  is_promotion: boolean;\r\n  cqt_status?: number;\r\n  cqt_invoice_code?: string;\r\n}\r\nexport interface VhOrderInvoiceDetail {\r\n  quantity?: number;\r\n  price?: number;\r\n  price_origin?: number;\r\n  time_start_order?: string;\r\n  dispatcher_done?: boolean;\r\n  ptype?: number;\r\n  type?: number;\r\n  note?: string;\r\n  properties?: VhOrderInvoiceDetailProperties[];\r\n  toppings?: VhOrderInvoiceDetailTopping[];\r\n  combos?: VhOrderInvoiceDetailCombo[];\r\n  ratio?: number;\r\n  id_product?: string;\r\n  id_subproduct?: string;\r\n  id_bill?: string;\r\n  _id?: string;\r\n  name?: string;\r\n  subComboName?: string;\r\n  id_promotion?: string;\r\n  pmtype?: number;\r\n  products?: any;\r\n  products_gift?: any;\r\n  lots?: any[];\r\n  lot_number?: string;\r\n  id_lotproduct?: string;\r\n  promotions_maximum?: any;\r\n  units?: any[];\r\n  earning_points_product?: number;\r\n  id_dispatcherzone?: string;\r\n  is_paused?: boolean; // (dịch vụ thời gian) có tạm dừngtính giờ hay không\r\n  time_end_order?: Date | string | undefined; // (dịch vụ thời gian) thời gian tạm tính đến\r\n}\r\nexport interface VhOrderInvoiceDetailProperties {\r\n  value: string[];\r\n  selectedValue: string;\r\n  name: string;\r\n}\r\nexport interface VhOrderInvoiceDetailTopping {\r\n  id_product: string;\r\n  price: number;\r\n  price_origin?: number;\r\n  quantity: number;\r\n  units?: any[];\r\n  name?: string;\r\n}\r\nexport interface VhOrderInvoiceDetailCombo {\r\n  id_product: string;\r\n  id_subproduct?: string;\r\n  price: number;\r\n  quantity: number;\r\n  name?: string;\r\n  ptype: number;\r\n  units?: any[];\r\n  ratio: number;\r\n  id_lotproduct?: string;\r\n  lots?: any[];\r\n}\r\nexport class VhOrderInvoices {\r\n  private invoice: VhOrderInvoice = {\r\n    payment_type: 1,\r\n    date: new Date().toISOString(),\r\n    id_customer: 'id_retail',\r\n    id_table: 'go_home',\r\n    id_area: null,\r\n    id_branch: null,\r\n    id_employee: null,\r\n    id_wallet: 'id_cash',\r\n    total: 0,\r\n    payment: 0,\r\n    tax: 0,\r\n    discount: 0,\r\n    fee: 0,\r\n    bill_type: null,\r\n    note: '',\r\n    cash: 0,\r\n    price_type: 1,\r\n    is_promotion: false,\r\n    cqt_status: 1,\r\n  };\r\n  private subTotal?: number = 0;\r\n  private taxValue?: number = 0;\r\n  private percent_discount_bill?: number = 0;\r\n  private invoiceDetail?: VhOrderInvoiceDetail[] = [];\r\n\r\n  constructor(\r\n    invoice: any = null,\r\n    invoiceDetail: any[] = [],\r\n    private vhQueryCafe?: VhQueryCafe,\r\n    private plaform?: Platform\r\n  ) {\r\n    this.plaform = plaform;\r\n    if (invoice) {\r\n      this.invoice.bill_code = invoice['bill_code']\r\n        ? invoice['bill_code']\r\n        : null;\r\n      this.invoice.payment_type = invoice['payment_type']\r\n        ? invoice['payment_type']\r\n        : 1;\r\n\r\n      this.invoice.id_customer = invoice['id_customer']\r\n        ? invoice['id_customer']\r\n        : 'id_retail';\r\n      this.invoice.tax_buyerDisplayName = invoice['tax_buyerDisplayName'] ? invoice['tax_buyerDisplayName'] : '';\r\n      this.invoice.tax_buyerLegalName = invoice['tax_buyerLegalName'] ? invoice['tax_buyerLegalName'] : '';\r\n      this.invoice.tax_buyerTaxCode = invoice['tax_buyerTaxCode'] ? invoice['tax_buyerTaxCode'] : '';\r\n      this.invoice.tax_buyerAddressLine = invoice['tax_buyerAddressLine'] ? invoice['tax_buyerAddressLine'] : '';\r\n      this.invoice.tax_buyerEmail = invoice['tax_buyerEmail'] ? invoice['tax_buyerEmail'] : '';\r\n      this.invoice.id_employee = invoice['id_employee']\r\n        ? invoice['id_employee']\r\n        : null;\r\n      this.invoice.id_wallet = invoice['id_wallet']\r\n        ? invoice['id_wallet']\r\n        : 'id_cash';\r\n      this.invoice.id_branch = invoice['id_branch']\r\n        ? invoice['id_branch']\r\n        : null;\r\n      this.invoice.id_table = invoice['id_table'] ? invoice['id_table'] : null;\r\n      this.invoice.id_area = invoice['id_area'] ? invoice['id_area'] : null;\r\n\r\n      this.invoice.price_type = invoice['price_type']\r\n        ? invoice['price_type']\r\n        : 1;\r\n      this.invoice.total = invoice['total'] ? invoice['total'] : 0;\r\n      this.invoice.payment = invoice['payment'] ? invoice['payment'] : 0;\r\n      this.invoice.tax = invoice['tax'] ? invoice['tax'] : 0;\r\n      this.invoice.discount = invoice['discount'] ? invoice['discount'] : 0;\r\n      this.invoice.discount_bill = invoice['discount_bill']\r\n        ? invoice['discount_bill']\r\n        : 0;\r\n      this.invoice.payment_points = invoice['payment_points']\r\n        ? invoice['payment_points']\r\n        : 0;\r\n      this.invoice.payment_coupons = invoice['payment_coupons']\r\n        ? invoice['payment_coupons']\r\n        : 0;\r\n      this.invoice.earning_points_bill = invoice['earning_points_bill']\r\n        ? invoice['earning_points_bill']\r\n        : 0;\r\n      this.invoice.use_points = invoice['use_points']\r\n        ? invoice['use_points']\r\n        : 0;\r\n      this.invoice.coupon_codes = invoice['coupon_codes']\r\n        ? invoice['coupon_codes']\r\n        : [];\r\n      this.invoice.fee = invoice['fee'] ? invoice['fee'] : 0;\r\n\r\n      this.invoice.bill_type = invoice['bill_type']\r\n        ? invoice['bill_type']\r\n        : null;\r\n      this.invoice.cash = invoice['cash'] ? invoice['cash'] : 0;\r\n      this.invoice.date = invoice['date']\r\n        ? invoice['date']\r\n        : new Date().toISOString();\r\n      this.invoice.note = invoice['note'] ? invoice['note'] : '';\r\n\r\n      this.invoice._id = invoice['_id'] ? invoice['_id'] : null;\r\n      this.invoice.is_promotion = invoice['is_promotion']\r\n        ? invoice['is_promotion']\r\n        : false;\r\n      this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n\r\n      if (invoice['id_customer'] == 'id_retail') {\r\n        this.invoice.retail_name = invoice['retail_name'] || '';\r\n        this.invoice.retail_phone = invoice['retail_phone'] || '';\r\n        this.invoice.retail_address = invoice['retail_address'] || '';\r\n      }\r\n      if(invoice['cqt_status'] !== undefined) this.invoice.cqt_status = invoice['cqt_status'];\r\n      if (invoice['cqt_invoice_code'] !== undefined) this.invoice.cqt_invoice_code = invoice['cqt_invoice_code'];\r\n    } else {\r\n      this.invoice.discount_bill = 0;\r\n      this.invoice.payment_points = 0;\r\n      this.invoice.payment_coupons = 0;\r\n      this.invoice.use_points = 0;\r\n      this.invoice.earning_points_bill = 0;\r\n    }\r\n    if (invoiceDetail) {\r\n      this.invoiceDetail = invoiceDetail;\r\n      let subTotal = 0;\r\n      for (let i of this.invoiceDetail) {\r\n        let total_product_gift = 0;\r\n        let total_products = 0;\r\n        if (i.products_gift) {\r\n          total_product_gift = i.products_gift\r\n            .filter((item) => item.choose)\r\n            .reduce(\r\n              (prev: number, next) => prev + next.quantity * next.price,\r\n              0\r\n            );\r\n          i.products_gift.forEach((element) => {\r\n            if (element.toppings)\r\n              total_product_gift += element.toppings.reduce(\r\n                (prev: number, next) => prev + next.quantity * next.price,\r\n                0\r\n              );\r\n          });\r\n        } else if (i.products) {\r\n          total_products = i.products.reduce(\r\n            (prev: number, next) => prev + next.quantity * next.price,\r\n            0\r\n          );\r\n          i.products.forEach((element) => {\r\n            if (element.toppings)\r\n              total_product_gift += element.toppings.reduce(\r\n                (prev: number, next) => prev + next.quantity * next.price,\r\n                0\r\n              );\r\n          });\r\n        }\r\n        if (i.toppings)\r\n          subTotal += i.toppings.reduce(\r\n            (prevTopping: number, nextTopping: VhOrderInvoiceDetailTopping) =>\r\n              prevTopping + nextTopping.quantity * nextTopping.price,\r\n            0\r\n          );\r\n        subTotal +=\r\n          total_products +\r\n          total_product_gift +\r\n          (i.price ? i.price * i.quantity : 0);\r\n      }\r\n      this.subTotal = subTotal;\r\n      // this.subTotal = this.invoiceDetail.reduce((prev: number, next: VhOrderInvoiceDetail) => {\r\n      //     let total = prev + next.quantity * next.price\r\n      //     if (next.toppings)\r\n      //         total += next.toppings.reduce((prevTopping: number, nextTopping: VhOrderInvoiceDetailTopping) => prevTopping + nextTopping.quantity * nextTopping.price, 0)\r\n      //     return total;\r\n      // }, 0)\r\n      this.percent_discount_bill = this.subTotal\r\n        ? (this.invoice.discount / this.subTotal) * 100\r\n        : 0;\r\n      if (this.plaform && this.plaform.is('electron')) {\r\n        // console.log('refreshLocalDisplayLEDs');\r\n        // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n        //     .then(() => {\r\n        //         console.log('xong refreshLocalDisplayLEDs');\r\n        console.log(' writeBill_BillDetails_toDisplayLEDScreens');\r\n        this.vhQueryCafe.writeBill_BillDetails_toDisplayLEDScreens(\r\n          this.invoice,\r\n          this.invoiceDetail\r\n        );\r\n        // })\r\n      }\r\n    } else this.percent_discount_bill = 0;\r\n  }\r\n  /******************************Xu ly invoice *******************************/\r\n  public getID(): string {\r\n    return this.invoice._id;\r\n  }\r\n\r\n  public getBillType(): 1 | 4 | 5 | 36 {\r\n    return this.invoice.bill_type;\r\n  }\r\n  public setBillType(value: 1 | 4 | 5 | 36) {\r\n    this.invoice.bill_type = value;\r\n  }\r\n  public getDate(): string {\r\n    return this.invoice.date;\r\n  }\r\n  public setDate(value: string) {\r\n    this.invoice.date = value;\r\n  }\r\n\r\n  public getBillCode(): string {\r\n    return this.invoice.bill_code;\r\n  }\r\n  public setBillCode(value: string) {\r\n    this.invoice.bill_code = value;\r\n  }\r\n\r\n  public getPaymentType(): 1 | 2 | 3 {\r\n    return this.invoice.payment_type;\r\n  }\r\n  public setPaymentType(value: 1 | 2 | 3) {\r\n    this.invoice.payment_type = value;\r\n  }\r\n\r\n  public getIdPartner(): string {\r\n    return this.invoice.id_customer;\r\n  }\r\n  public setIdPartner(value: string) {\r\n    this.invoice.id_customer = value;\r\n    this.setDiscountBill();\r\n    if (value === 'id_retail') this.setPayment(this.getTotalATax());\r\n  }\r\n\r\n  public getTaxBuyerDisplayName(): string {\r\n    return this.invoice.tax_buyerDisplayName;\r\n  }\r\n  public setTaxBuyerDisplayName(value: string) {\r\n    this.invoice.tax_buyerDisplayName = value;\r\n  }\r\n\r\n  public getTaxBuyerLegalName(): string {\r\n    return this.invoice.tax_buyerLegalName;\r\n  }\r\n  public setTaxBuyerLegalName(value: string) {\r\n    this.invoice.tax_buyerLegalName = value;\r\n  }\r\n\r\n  public getTaxBuyerTaxCode(): string {\r\n    return this.invoice.tax_buyerTaxCode;\r\n  }\r\n  public setTaxBuyerTaxCode(value: string) {\r\n    this.invoice.tax_buyerTaxCode = value;\r\n  }\r\n\r\n  public getTaxBuyerAddressLine(): string {\r\n    return this.invoice.tax_buyerAddressLine;\r\n  }\r\n  public setTaxBuyerAddressLine(value: string) {\r\n    this.invoice.tax_buyerAddressLine = value;\r\n  }\r\n\r\n  public getTaxBuyerEmail(): string {\r\n    return this.invoice.tax_buyerEmail;\r\n  }\r\n  public setTaxBuyerEmail(value: string) {\r\n    this.invoice.tax_buyerEmail = value;\r\n  }\r\n\r\n  /**\r\n   * Cập nhật id_customer cho bill mà không thay đổi discount_bill (dùng cho booking)\r\n   * @param value \r\n   */\r\n  public setIdPartnerNoUpdateDiscountBill(value: string) {\r\n    this.invoice.id_customer = value;\r\n    if (value === 'id_retail') this.setPayment(this.getTotalATax());\r\n  }\r\n\r\n  public getIdEmployee(): string {\r\n    return this.invoice.id_employee;\r\n  }\r\n  public setIdEmployee(value: string) {\r\n    this.invoice.id_employee = value;\r\n  }\r\n\r\n  public getIdBranch(): string {\r\n    return this.invoice.id_branch;\r\n  }\r\n  public setIdBranch(value: string) {\r\n    this.invoice.id_branch = value;\r\n  }\r\n\r\n  public getIdWallet(): string {\r\n    return this.invoice.id_wallet;\r\n  }\r\n  public setIdWallet(value: string) {\r\n    this.invoice.id_wallet = value;\r\n  }\r\n\r\n  public getIdTable(): string {\r\n    return this.invoice.id_table;\r\n  }\r\n  public setIdTable(value: string) {\r\n    this.invoice.id_table = value;\r\n  }\r\n\r\n  public getIdArea(): string {\r\n    return this.invoice.id_area;\r\n  }\r\n  public setIdArea(value: string) {\r\n    this.invoice.id_area = value;\r\n  }\r\n\r\n  public getNote(): string {\r\n    return this.invoice.note;\r\n  }\r\n  public setNote(value: string) {\r\n    this.invoice.note = value;\r\n  }\r\n\r\n  public getTax(): number {\r\n    return this.invoice.tax;\r\n  }\r\n  public setTax(value: number) {\r\n    this.invoice.tax = value;\r\n    this.setTaxValue();\r\n  }\r\n\r\n  public getTaxValue(): number {\r\n    return this.taxValue;\r\n  }\r\n  public setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n    this.setPayment();\r\n  }\r\n\r\n  public getDiscount(): number {\r\n    return this.invoice.discount;\r\n  }\r\n  public setDiscount(value: number) {\r\n    this.invoice.discount = value;\r\n    this.setTotal();\r\n  }\r\n\r\n  public getEarningPointBill(): number {\r\n    return this.invoice.earning_points_bill;\r\n  }\r\n  public setEarningPointBill(value: number) {\r\n    this.invoice.earning_points_bill = value;\r\n  }\r\n\r\n  public getDiscountOther() {\r\n    return this.getDiscountPoint() + this.getDiscountCoupon();\r\n  }\r\n  public getDiscountPoint(): number {\r\n    return this.invoice.payment_points;\r\n  }\r\n  public setDiscountPoint(value: number) {\r\n    this.invoice.payment_points = value;\r\n    this.setTotal();\r\n  }\r\n  public getDiscountCoupon(): number {\r\n    return this.invoice.payment_coupons;\r\n  }\r\n  public setDiscountCoupon(value: number) {\r\n    this.invoice.payment_coupons += value;\r\n    this.setTotal();\r\n  }\r\n  public resetDiscountCoupon() {\r\n    this.invoice.payment_coupons = 0;\r\n    this.setTotal();\r\n  }\r\n  public getUsePoint(): number {\r\n    return this.invoice.use_points;\r\n  }\r\n  public setUsePoint(value: number) {\r\n    this.invoice.use_points = value;\r\n  }\r\n  public getDiscountBill(): number {\r\n    return this.invoice.discount_bill;\r\n  }\r\n  public setDiscountBill() {\r\n    this.invoice.discount_bill = this.vhQueryCafe.getDiscount_bill_byCustomer(\r\n      this.getSubTotal(),\r\n      this.getIdPartner()\r\n    )\r\n      ? this.vhQueryCafe.getDiscount_bill_byCustomer(\r\n        this.getSubTotal(),\r\n        this.getIdPartner()\r\n      ).discount\r\n      : 0;\r\n    this.setTotal();\r\n  }\r\n\r\n  public isPromotion(): boolean {\r\n    return this.invoice.is_promotion;\r\n  }\r\n  public setBillHavePromotion(value: boolean) {\r\n    this.invoice.is_promotion = value;\r\n  }\r\n\r\n  public getCqtStatus(): number {\r\n    return this.invoice.cqt_status;\r\n  }\r\n  public setCqtStatus(value: number): void {\r\n    this.invoice.cqt_status = value;\r\n  }\r\n\r\n  /**\r\n   * set lại giá trị percent_discount_bill khi nhập từ input giảm giá trường hợp giảm theo %\r\n   * @param value\r\n   */\r\n  setPercentDiscountBill(value) {\r\n    this.percent_discount_bill =\r\n      parseFloat(value) <= 100 && parseFloat(value) ? parseFloat(value) : 0;\r\n    this.setDiscount(this.getSubTotal() * (this.percent_discount_bill / 100));\r\n  }\r\n  /**\r\n   * lấy % dc giảm của khách hàng có chiết khấu\r\n   * @returns number\r\n   */\r\n  getPercentDiscountBillHasDiscountInvoice() {\r\n    return parseFloat(\r\n      parseFloat(\r\n        ((this.invoice.discount / this.subTotal) * 100).toString()\r\n      ).toFixed(2)\r\n    );\r\n  }\r\n  public getFee(): number {\r\n    return this.invoice.fee;\r\n  }\r\n  public setFee(value: number) {\r\n    this.invoice.fee = value;\r\n    this.setTotal();\r\n  }\r\n\r\n  public getSubTotal(): number {\r\n    return this.subTotal;\r\n  }\r\n  public setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoiceDetail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift\r\n          .filter((item) => item.choose)\r\n          .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n        i.products_gift.forEach((element) => {\r\n          if (element.toppings)\r\n            total_product_gift += element.toppings.reduce(\r\n              (prev: number, next) => prev + next.quantity * next.price,\r\n              0\r\n            );\r\n        });\r\n      } else if (i.products) {\r\n        total_products = i.products.reduce(\r\n          (prev: number, next) => prev + next.quantity * next.price,\r\n          0\r\n        );\r\n        i.products.forEach((element) => {\r\n          if (element.toppings)\r\n            total_product_gift += element.toppings.reduce(\r\n              (prev: number, next) => prev + next.quantity * next.price,\r\n              0\r\n            );\r\n        });\r\n      }\r\n      if (i.toppings)\r\n        subTotal += i.toppings.reduce(\r\n          (prevTopping: number, nextTopping: VhOrderInvoiceDetailTopping) =>\r\n            prevTopping + nextTopping.quantity * nextTopping.price,\r\n          0\r\n        );\r\n      subTotal +=\r\n        total_products +\r\n        total_product_gift +\r\n        (i.price ? i.price * i.quantity : 0);\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.setDiscountBill();\r\n\r\n  }\r\n\r\n  public getTotal(): number {\r\n    return this.invoice.total;\r\n  }\r\n  public setTotal() {\r\n    this.invoice.total =\r\n      this.getSubTotal() -\r\n        this.getDiscount() -\r\n        this.getDiscountBill() -\r\n        this.getDiscountOther() +\r\n        this.getFee() >\r\n        0\r\n        ? this.getSubTotal() -\r\n        this.getDiscount() -\r\n        this.getDiscountBill() -\r\n        this.getDiscountOther() +\r\n        this.getFee()\r\n        : 0;\r\n    this.setTaxValue();\r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n      //     .then(() => {\r\n      console.log('writeBill_BillDetails_toDisplayLEDScreens');\r\n\r\n      this.vhQueryCafe.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice,\r\n        this.invoiceDetail\r\n      );\r\n      // })\r\n    }\r\n  }\r\n  public getTotalATax(): number {\r\n    return this.getTotal() + this.getTaxValue();\r\n  }\r\n  public getPayment(): number {\r\n    return this.invoice.payment;\r\n  }\r\n  public setPayment(value?: number) {\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0;\r\n    } else {\r\n      if (value != null) this.invoice.payment = value;\r\n      else {\r\n        this.invoice.payment = this.getTotal() + this.getTaxValue();\r\n      }\r\n    }\r\n  }\r\n\r\n  public getCash() {\r\n    return this.invoice.cash;\r\n  }\r\n  public setCash(value) {\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0;\r\n    else {\r\n      if (value) this.invoice.cash = parseFloat(value);\r\n      else this.invoice.cash = 0;\r\n    }\r\n  }\r\n\r\n  public getExcessCash() {\r\n    return this.invoice.cash - this.getPayment() > 0\r\n      ? this.invoice.cash - this.getPayment()\r\n      : 0;\r\n  }\r\n\r\n  public getRetailName() {\r\n    return this.invoice.retail_name;\r\n  }\r\n  public setRetailName(retail_name: string) {\r\n    this.invoice.retail_name = retail_name;\r\n  }\r\n  public getRetailPhone() {\r\n    return this.invoice.retail_phone;\r\n  }\r\n  public setRetailPhone(retail_phone: string) {\r\n    this.invoice.retail_phone = retail_phone;\r\n  }\r\n  public getRetailAddress() {\r\n    return this.invoice.retail_address;\r\n  }\r\n  public setRetailAddress(retail_address: string) {\r\n    this.invoice.retail_address = retail_address;\r\n  }\r\n  /******************************Xu ly invoice detail *******************************/\r\n  /** Thêm sản phẩm vô bill detail */\r\n  public addInvoiceDetail(value: any) {\r\n    if (\r\n      this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable\r\n    )\r\n      value['dispatcher_done'] = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n    this.invoiceDetail.unshift(value);\r\n    console.log(value);\r\n    \r\n    this.setDiscountBill();\r\n    this.setSubTotal();\r\n  }\r\n  /** Xóa sản phẩm khỏi bill detail */\r\n  public removeInvoiceDetail(id: string) {\r\n    let index = this.invoiceDetail.findIndex((detail) => detail['_id'] == id);\r\n    if (index != -1) {\r\n      this.invoiceDetail.splice(index, 1);\r\n      this.setSubTotal();\r\n    }\r\n    this.setDiscountBill();\r\n  }\r\n  addBill_detail_promotion(value) {\r\n    // thêm sp của khuyen mãi type 7\r\n    this.invoiceDetail.push({...value, products_gift: value.products_gift.filter(e => e.choose)});\r\n  }\r\n  /** Lấy toàn bộ bill detail */\r\n  public getInvoiceDetail(): VhOrderInvoiceDetail[] {\r\n    return this.invoiceDetail;\r\n  }\r\n  /** Lấy toàn bộ topping trong 1 bill detail */\r\n  public getInvoiceDetailToppings(\r\n    idDetail: string\r\n  ): VhOrderInvoiceDetailTopping[] {\r\n    let detailBill: VhOrderInvoiceDetail = this.invoiceDetail.find(\r\n      (detail) => detail._id == idDetail\r\n    );\r\n    return detailBill ? detailBill.toppings : null;\r\n  }\r\n  /** Lấy toàn bộ combo trong 1 bill detail */\r\n  public getInvoiceDetailCombos(idDetail: string): VhOrderInvoiceDetailCombo[] {\r\n    let detailBill: VhOrderInvoiceDetail = this.invoiceDetail.find(\r\n      (detail) => detail._id == idDetail\r\n    );\r\n    return detailBill ? detailBill.combos : null;\r\n  }\r\n\r\n  public getPriceType(): number {\r\n    return this.invoice.price_type;\r\n  }\r\n\r\n  public setPriceType(price_type: number) {\r\n    this.invoice.price_type = price_type;\r\n  }\r\n\r\n  public getArrayCouponCodes() {\r\n    return this.invoice.coupon_codes ? this.invoice.coupon_codes : [];\r\n  }\r\n\r\n  public setArrayCouponCodes(coupons) {\r\n    this.invoice.coupon_codes = coupons;\r\n  }\r\n  /******************************create - update - delete invoice / detail *******************************/\r\n  /** Hàm lấy collection bill dùng để đưa vô database */\r\n  public getCreateUpdateInvoice(bill_type: 1 | 4 | 5 | 36 | null = null) {\r\n    if (bill_type) this.setBillType(bill_type);\r\n    if (bill_type == 1 || bill_type == 36) {\r\n      delete this.invoice.coupon_codes;\r\n      delete this.invoice.is_promotion;\r\n      return this.invoice;\r\n    } else return this.invoice;\r\n  }\r\n  /** Hàm lấy collection bill details dùng để đưa vô database */\r\n  public getCreateUpdateInvoiceDetail(): VhOrderInvoiceDetail[] {\r\n    return this.invoiceDetail.map((item) => {\r\n      if (!item.pmtype) {\r\n        let detail: VhOrderInvoiceDetail = {\r\n          _id: item._id,\r\n          id_product: item.id_product,\r\n          ratio: item.ratio,\r\n          price: item.price,\r\n          price_origin: item.price_origin,\r\n          quantity: item.quantity,\r\n          ptype: item.ptype,\r\n          time_start_order: item.time_start_order,\r\n          note: item.note,\r\n          earning_points_product: item.earning_points_product\r\n            ? item.earning_points_product\r\n            : 0,\r\n        };\r\n        if (\r\n          this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n            .dispatchers_enable\r\n        )\r\n          detail['dispatcher_done'] = item.dispatcher_done;\r\n        if (item.id_dispatcherzone)\r\n          detail['id_dispatcherzone'] = item.id_dispatcherzone;\r\n        if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct;\r\n        if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct;\r\n        // xét điều kiện phụ\r\n        if (item.ptype == 5)\r\n          detail['combos'] = item.combos.map((combo) => {\r\n            let product: VhOrderInvoiceDetailCombo = {\r\n              id_product: combo.id_product,\r\n              ratio: combo.ratio,\r\n              price: combo.price,\r\n              quantity: combo.quantity,\r\n              ptype: combo.ptype,\r\n            };\r\n            if (combo.id_subproduct)\r\n              product['id_subproduct'] = combo.id_subproduct;\r\n            return product;\r\n          });\r\n        if (item.ptype == 1) {\r\n          if (item.toppings && item.toppings.length)\r\n            detail['toppings'] = [\r\n              ...item.toppings.map((top) => {\r\n                return {\r\n                  id_product: top.id_product,\r\n                  ratio: 1,\r\n                  price: 0,\r\n                  price_origin: top.price_origin,\r\n                  quantity: top.quantity,\r\n                };\r\n              }),\r\n            ];\r\n\r\n          if (item.properties && item.properties.length)\r\n            detail['properties'] = [\r\n              ...item.properties.map((pro) => {\r\n                return {\r\n                  name: pro.name,\r\n                  value: [...pro.value],\r\n                  selectedValue: pro.selectedValue,\r\n                };\r\n              }),\r\n            ];\r\n        }\r\n        // Nếu là dịch vụ thời gian\r\n        if (item.ptype == VhType.SERVICETIME) {\r\n          if(item.is_paused !== undefined) detail.is_paused = item.is_paused;\r\n          if(item.time_end_order !== undefined) detail.time_end_order = item.time_end_order;\r\n        }\r\n        return detail;\r\n      } else {\r\n        let detail: VhOrderInvoiceDetail = {\r\n          _id: item._id,\r\n          id_promotion: item.id_promotion,\r\n          pmtype: item.pmtype,\r\n         \r\n        };\r\n        if (item.products_gift) {\r\n          if (item.products_gift.filter((ele) => ele.choose).length) {\r\n            detail['products_gift'] = item.products_gift\r\n              .filter((ele) => ele.choose)\r\n              .map((e) => {\r\n                let prod = {\r\n                  id_product: e.id_product,\r\n                  price: e.price,\r\n                  price_origin: e.price_origin,\r\n                  quantity: e.quantity,\r\n                  ptype: e.ptype,\r\n                  earning_points_product: e.earning_points_product,\r\n                  ratio: e.ratio,\r\n                  _id: e._id,\r\n                  time_start_order: e.time_start_order,\r\n                };\r\n                if (e.ptype == 5) {\r\n                  prod['combos'] = e.combos.map((combo) => {\r\n                    let product: VhOrderInvoiceDetailCombo = {\r\n                      id_product: combo.id_product,\r\n                      price: combo.price,\r\n                      quantity: combo.quantity,\r\n                      ptype: combo.ptype,\r\n                      ratio: combo.ratio ? combo.ratio : 1,\r\n                    };\r\n                    if (combo.id_lotproduct)\r\n                      product['id_lotproduct'] = combo.id_lotproduct;\r\n                    if (combo.id_subproduct)\r\n                      product['id_subproduct'] = combo.id_subproduct;\r\n                    return product;\r\n                  });\r\n                }\r\n                if (e.ptype == 1) {\r\n                  if (e.toppings && e.toppings.length)\r\n                    prod['toppings'] = [\r\n                      ...e.toppings.map((top) => {\r\n                        return {\r\n                          id_product: top.id_product,\r\n                          ratio: 1,\r\n                          price: 0,\r\n                          price_origin: top.price_origin,\r\n                          quantity: top.quantity,\r\n                        };\r\n                      }),\r\n                    ];\r\n\r\n                  if (e.properties && e.properties.length)\r\n                    prod['properties'] = [\r\n                      ...e.properties.map((pro) => {\r\n                        return {\r\n                          name: pro.name,\r\n                          value: [...pro.value],\r\n                          selectedValue: pro.selectedValue,\r\n                        };\r\n                      }),\r\n                    ];\r\n                }\r\n                // Nếu là dịch vụ thời gian\r\n                if (e.ptype == VhType.SERVICETIME) {\r\n                  prod['time_start_order'] = e.time_start_order;\r\n                  if(e.is_paused !== undefined) prod['is_paused'] = e.is_paused;\r\n                  if(e.time_end_order !== undefined) prod['time_end_order'] = e.time_end_order;\r\n                }\r\n                if (e.id_dispatcherzone)\r\n                  prod['id_dispatcherzone'] = e.id_dispatcherzone;\r\n                if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct;\r\n                if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct;\r\n                return prod;\r\n              });\r\n            return detail;\r\n          }\r\n          else {\r\n            detail['products_gift'] = [];\r\n            return detail;\r\n          }\r\n        } else {\r\n          detail['products'] = item.products.map((e) => {\r\n            let prod = {\r\n              id_product: e.id_product,\r\n              price: e.price,\r\n              price_origin: e.price_origin,\r\n              quantity: e.quantity,\r\n              ptype: e.ptype,\r\n              earning_points_product: e.earning_points_product,\r\n              ratio: e.ratio,\r\n              _id: e._id,\r\n              time_start_order: e.time_start_order,\r\n            };\r\n            if (e.ptype == 5) {\r\n              prod['combos'] = e.combos.map((combo) => {\r\n                let product: VhOrderInvoiceDetailCombo = {\r\n                  id_product: combo.id_product,\r\n                  price: combo.price,\r\n                  quantity: combo.quantity,\r\n                  ptype: combo.ptype,\r\n                  ratio: combo.ratio ? combo.ratio : 1,\r\n                };\r\n                if (combo.id_lotproduct)\r\n                  product['id_lotproduct'] = combo.id_lotproduct;\r\n                if (combo.id_subproduct)\r\n                  product['id_subproduct'] = combo.id_subproduct;\r\n                return product;\r\n              });\r\n            }\r\n            if (e.ptype == 1) {\r\n              if (e.toppings && e.toppings.length)\r\n                prod['toppings'] = [\r\n                  ...e.toppings.map((top) => {\r\n                    return {\r\n                      id_product: top.id_product,\r\n                      ratio: 1,\r\n                      price: item.price,\r\n                      price_origin: top.price_origin,\r\n                      quantity: top.quantity,\r\n                    };\r\n                  }),\r\n                ];\r\n\r\n              if (e.properties && e.properties.length)\r\n                prod['properties'] = [\r\n                  ...e.properties.map((pro) => {\r\n                    return {\r\n                      name: pro.name,\r\n                      value: [...pro.value],\r\n                      selectedValue: pro.selectedValue,\r\n                    };\r\n                  }),\r\n                ];\r\n            }\r\n            // Nếu là dịch vụ thời gian\r\n            if (e.ptype == VhType.SERVICETIME) {\r\n              prod['time_start_order'] = e.time_start_order;\r\n              if(e.is_paused !== undefined) prod['is_paused'] = e.is_paused;\r\n              if(e.time_end_order !== undefined) prod['time_end_order'] = e.time_end_order;\r\n            }\r\n            if (e.id_dispatcherzone)\r\n              prod['id_dispatcherzone'] = e.id_dispatcherzone;\r\n            if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct;\r\n            if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct;\r\n            return prod;\r\n          });\r\n          return detail;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /**Tạo bill detail từ sản phẩm */\r\n  public getCreateItemDetail(food, sub?, dispatcher_done?: any) {\r\n    let detail: any = {\r\n      id_bill: this.invoice._id,\r\n      id_product: food._id,\r\n      quantity: food.quantity,\r\n      ptype: food.ptype,\r\n      price: food.price,\r\n      time_start_order: new Date().toISOString(),\r\n      note: food.note,\r\n      price_origin: food.price_origin,\r\n      ratio: food.ratio,\r\n      earning_points_product: food.earning_points_product\r\n        ? food.earning_points_product\r\n        : 0,\r\n    };\r\n    if (\r\n      this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable\r\n    )\r\n      detail['dispatcher_done'] = food.dispatcher_done;\r\n    if (food.id_lotproduct) detail['id_lotproduct'] = food.id_lotproduct;\r\n    if (food.id_subproduct) detail['id_subproduct'] = food.id_subproduct;\r\n    if (\r\n      this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable\r\n    )\r\n      detail['id_dispatcherzone'] = food.id_dispatcherzone;\r\n    if (food.ptype == 1) {\r\n      if (food.properties && food.properties.length)\r\n        detail['properties'] = [\r\n          ...food.properties.map((item) => {\r\n            return {\r\n              ...item,\r\n              value: [...item.value],\r\n            };\r\n          }),\r\n        ];\r\n\r\n      if (food.toppings && food.toppings.length)\r\n        detail['toppings'] = [\r\n          ...food.toppings\r\n            .map((item) => {\r\n              return {\r\n                id_product: item._id,\r\n                name: item.name,\r\n                ptype: 4,\r\n                price: item.price,\r\n                price_origin: item.price_origin,\r\n                quantity: item.quantity,\r\n              };\r\n            }),\r\n        ];\r\n    }\r\n\r\n    if (food.ptype == 5) {\r\n      detail['subComboName'] = food.subComboName;\r\n      detail['combos'] = [\r\n        ...food.combos.map((item) => {\r\n          let product: VhOrderInvoiceDetailCombo = {\r\n            id_product: item.id_product,\r\n            name: item.name,\r\n            ptype: item.type,\r\n            ratio: item.ratio,\r\n            price: item.price,\r\n            quantity: item.quantity,\r\n            units: item.units,\r\n          };\r\n          if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n          if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n          if (item.lots) product['lots'] = item.lots;\r\n          return product;\r\n        }),\r\n      ];\r\n    }\r\n    return detail;\r\n  }\r\n  /**Làm sạch bill detail */\r\n  public getCreateItemCleanDetail(cleanedDetail: VhOrderInvoiceDetail) {\r\n    let detail: any = {\r\n      id_bill: this.invoice._id,\r\n      id_product: cleanedDetail.id_product,\r\n      quantity: cleanedDetail.quantity,\r\n      ptype: cleanedDetail.ptype,\r\n      price: cleanedDetail.price,\r\n      dispatcher_done: cleanedDetail.dispatcher_done,\r\n      time_start_order: cleanedDetail.time_start_order,\r\n      note: cleanedDetail.note,\r\n      price_origin: cleanedDetail.price_origin,\r\n      ratio: cleanedDetail.ratio,\r\n      earning_points_product: cleanedDetail.earning_points_product\r\n        ? cleanedDetail.earning_points_product\r\n        : 0,\r\n    };\r\n    if (cleanedDetail.id_lotproduct)\r\n      detail['id_lotproduct'] = cleanedDetail.id_lotproduct;\r\n    if (cleanedDetail.id_subproduct)\r\n      detail['id_subproduct'] = cleanedDetail.id_subproduct;\r\n    if (cleanedDetail.id_dispatcherzone)\r\n      detail['id_dispatcherzone'] = cleanedDetail.id_dispatcherzone;\r\n\r\n    if (cleanedDetail.ptype == 1) {\r\n      if (cleanedDetail.properties && cleanedDetail.properties.length)\r\n        detail['properties'] = [\r\n          ...cleanedDetail.properties.map((item) => {\r\n            return {\r\n              name: item.name,\r\n              value: [...item.value],\r\n              selectedValue: item.selectedValue,\r\n            };\r\n          }),\r\n        ];\r\n\r\n      if (cleanedDetail.toppings && cleanedDetail.toppings.length)\r\n        detail['toppings'] = [\r\n          ...cleanedDetail.toppings.map((item) => {\r\n            return {\r\n              id_product: item.id_product,\r\n              ratio: 1,\r\n              price: item.price,\r\n              price_origin: item.price_origin,\r\n              quantity: item.quantity,\r\n            };\r\n          }),\r\n        ];\r\n    }\r\n    if (cleanedDetail.ptype == 5) {\r\n      detail['combos'] = [\r\n        ...cleanedDetail.combos.map((item) => {\r\n          let product: VhOrderInvoiceDetailCombo = {\r\n            id_product: item.id_product,\r\n            ptype: item.ptype,\r\n            ratio: item.ratio,\r\n            price: item.price,\r\n            quantity: item.quantity,\r\n          };\r\n          if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n          if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n          return product;\r\n        }),\r\n      ];\r\n    }\r\n\r\n    return detail;\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}