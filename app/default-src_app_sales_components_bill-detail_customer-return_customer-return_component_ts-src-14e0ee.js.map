{"version":3,"file":"default-src_app_sales_components_bill-detail_customer-return_customer-return_component_ts-src-14e0ee.js","mappings":"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","sources":["./src/app/sales/components/bill-detail/customer-return/customer-return.component.ts","./src/app/sales/components/bill-detail/customer-return/customer-return.component.html","./src/app/sales/components/bill-detail/sales/sales.component.ts","./src/app/sales/components/bill-detail/sales/sales.component.html","./src/app/sales/components/bill-detail/warranty/warranty.component.ts","./src/app/sales/components/bill-detail/warranty/warranty.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { CustomerReturnedA4Component } from 'src/app/sales/components/print/customer-returned/customer-returned-a4/customer-returned-a4.component';\r\nimport { CustomerReturnedA5Component } from 'src/app/sales/components/print/customer-returned/customer-returned-a5/customer-returned-a5.component';\r\nimport { CustomerReturnedK80Col4Component } from 'src/app/sales/components/print/customer-returned/customer-returned-k80-col4/customer-returned-k80-col4.component';\r\nimport { CustomerReturnedK80Col3Component } from 'src/app/sales/components/print/customer-returned/customer-returned-k80-col3/customer-returned-k80-col3.component';\r\nimport { CustomerReturnedK57Col3Component } from 'src/app/sales/components/print/customer-returned/customer-returned-k57-col3/customer-returned-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { VhReturnCustomerInvoiceDetail, VhReturnCustomerInvoiceEdit } from '../../bill-type/bill-type-3/mange-invoice/bill-type3-interface';\r\n@Component({\r\n  selector: 'app-customer-return',\r\n  templateUrl: './customer-return.component.html',\r\n  styleUrls: ['./customer-return.component.scss']\r\n})\r\nexport class CustomerReturnComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice: VhReturnCustomerInvoiceEdit = null;\r\n  invoice_detail: VhReturnCustomerInvoiceDetail[]\r\n  subTotal = 0;\r\n  @Input() id_bill: any;\r\n  printer: any\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService:FunctionService\r\n  ) { \r\n    \r\n  }\r\n\r\n  ngOnInit(): void { \r\n    let print = this.vhQuerySales.getLocalPrintPage('page_desktop_customer_returned')\r\n    this.printer =print  ? print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] : {discount_hidden :false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhReturnCustomerInvoiceEdit = null, invoiceDetail: VhReturnCustomerInvoiceDetail[] = null) {\r\n   \r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type)\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        \r\n        invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n        this.init(invoice, invoiceDetail)\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  \r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units,ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' +  this.fncService.formatDate(lot.date_exp)\r\n  } \r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"return_enable_cancel_customer\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Customer returned invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_customer_returned')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice  , invoice_detail : this.invoice_detail}, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n       \r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return CustomerReturnedK57Col3Component\r\n      case 'print_size_k80_3c': return CustomerReturnedK80Col3Component\r\n      case 'print_size_k80_4c': return CustomerReturnedK80Col4Component\r\n      case 'print_size_a5': return CustomerReturnedA5Component\r\n      case 'print_size_a4': return CustomerReturnedA4Component\r\n      default: return CustomerReturnedA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#customer-return-invoice-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".customer-return-invoice-detail-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#customer-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".customer-return-invoice-detail-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    \r\n<nz-layout id=\"customer-return-invoice-detail\">\r\n    <div class=\"sales\" *ngIf=\"invoice\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header customer-return-invoice-detail-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"18\" class=\"title\">\r\n                    <b>{{'Customer returned invoice' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n                    <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                        nzType=\"default\">\r\n                        <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                        {{'Print' | translate}}\r\n                    </button>\r\n                </div> \r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table  nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n                        nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                <td>{{item.name}} <br>\r\n                                    <ng-container *ngIf=\"item.lots\">\r\n                                        <pre>{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                      </ng-container>\r\n                                      <ng-container *ngIf=\"item.ptype == 5\">\r\n                                        <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">{{combo.quantity}}x {{combo.name}}\r\n                                          ({{getUnit(combo.units,combo.ratio)}}), </span><br>\r\n                                      </ng-container>\r\n                                </td>\r\n                                <td nzAlign='center'>\r\n                                    {{getUnit(item.units, item.ratio)}}\r\n                                  </td>\r\n                                <td nzAlign='center'>{{item.quantity}}</td>\r\n                                <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                        {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                        : ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Salesman' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Sales date' | translate}}</b>\r\n                    <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n                <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Discount' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.tax/ 100)}}</div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.total + invoice.total * (invoice.tax / 100))}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Pay' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Rest' | translate}}</span>\r\n                    <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.total * (1+invoice.tax / 100) -\r\n                        invoice.payment)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Payment method' | translate}}</span>\r\n                    <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n</ion-content>","import { ChangeDetectorRef, Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component'; \r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';  \r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhSaleInvoiceDetailEdit, VhSaleInvoiceEdit } from '../../bill-type/bill-type-1/sales-desktop/sales-desktop-interface';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { ProductService } from 'src/app/sales/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-sales',\r\n  templateUrl: './sales.component.html',\r\n  styleUrls: ['./sales.component.scss']\r\n})\r\nexport class SalesComponent  {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice_detail: VhSaleInvoiceDetailEdit[]\r\n  public invoice: VhSaleInvoiceEdit \r\n  subTotal = 0;\r\n  taxValue = 0\r\n  @Input() id_bill: any;\r\n  percent_discount: number = 0;\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private vhQuery: VhQuery,\r\n    public productService: ProductService,\r\n  ) { \r\n    \r\n  }\r\n \r\n\r\n  ngOnInit(): void {  \r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n  init(invoice: VhSaleInvoiceEdit = null, invoiceDetail: VhSaleInvoiceDetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type)\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  \r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              if (this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).earning_point && this.invoice.bill_type == 1) this.vhQuerySales.updateCustomer(this.invoice.id_customer, { earning_point: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).earning_point - this.invoice.earning_points_bill })\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                  this.goBack()\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  private getDataInvoice(id) {\r\n    \r\n    \r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        if (!invoiceDetail.length)\r\n          this.init(  invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortStringbyASC(invoiceDetail, 'name')\r\n          this.init( invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units,ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' +  this.fncService.formatDate(lot.date_exp)\r\n  } \r\n \r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  \r\n\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales') \r\n      if (printer) resolve(printer)\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer.print_size_default), { printer: { ...printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] },invoice_detail: this.invoice_detail,  invoice: this.invoice }, false, false, `modal-print-${printer.print_size_default}`)\r\n    }, (err) => {\r\n      let page_name: any =  \"Sales\"\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        \r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (  SalesK57Col3Component)\r\n      case 'print_size_k80_3c': return (  SalesK80Col3Component)\r\n      case 'print_size_k80_4c': return ( SalesK80Col4Component)\r\n      case 'print_size_a5': return (  SalesA5Component)\r\n      case 'print_size_a4': return ( SalesA4Component)\r\n      default: return ( SalesA4Component)\r\n    }\r\n  }\r\n  goBack() {\r\n    this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-return-invoice-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-return-invoice-detail-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-return-invoice-detail-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n\r\n    <nz-layout id=\"sales-return-invoice-detail\">\r\n        <div class=\"sales\" *ngIf=\"invoice\">\r\n            <div class=\"sales-cart\">\r\n              <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                  <b>{{'Sales order' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                  \r\n                  <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                    nzType=\"default\">\r\n                    <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                    {{'Print' | translate}}\r\n                  </button>\r\n                   \r\n                </div> \r\n              </div>\r\n              <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                  <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n                    nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\"   nzAlign='right'><b>{{'Discount value' | translate}}</b></th>\r\n                        <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <ng-container *ngFor=\"let item of rowSelectionTable.data\" >\r\n                        <ng-container *ngIf=\"item.id_promotion\">\r\n                          <tr style=\"cursor: pointer;\">\r\n                            <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                          </tr>\r\n                          <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products\">\r\n                            <td><div>{{data.name}}</div> <br>\r\n                              <ng-container *ngIf=\"data.lots\">\r\n                                <pre>{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> <br>\r\n                              </ng-container>\r\n                              <ng-container *ngIf=\"data.combos\">\r\n                                <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">\r\n                                  {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                                  <ng-container *ngIf=\"combo.lots\">\r\n                                    <pre style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                                  </ng-container>, \r\n                                </span>\r\n                              </ng-container>\r\n                            </td>\r\n                            <td nzAlign='center'>\r\n                              {{getUnit(data.units, data.ratio)}}\r\n                            </td>\r\n                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                            <td nzAlign='right'>\r\n                              {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                              <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                              </del>\r\n                            </td>\r\n                            <td nzAlign='center'  *ngIf=\"show_discount_product\"></td>\r\n                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                          </tr>\r\n                          <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products_gift\">\r\n                            <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                              <ng-container *ngIf=\"data.lots\">\r\n                                {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                              </ng-container>\r\n                              <ng-container *ngIf=\"data.combos\">\r\n                                <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">{{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}) \r\n                                  <ng-container *ngIf=\"combo.lots\">\r\n                                  <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                                </ng-container>,  </span>\r\n                              </ng-container>\r\n                            </td>\r\n                            <td nzAlign='center'>\r\n                              {{getUnit(data.units, data.ratio)}}\r\n                            </td>\r\n                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                            <td nzAlign='right'>\r\n                              {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                              <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                              </del>\r\n                            </td>\r\n                            <td nzAlign='center'  *ngIf=\"show_discount_product\"></td>\r\n                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                          </tr>\r\n                        </ng-container>\r\n                        \r\n                        <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                          <td><div>{{item.name}}</div>\r\n                            <ng-container *ngIf=\"item.id_lotproduct\">\r\n                              <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                            </ng-container>\r\n                             \r\n                            <ng-container *ngIf=\"item.combos\">\r\n                              <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                                {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                                <ng-container *ngIf=\"combo.lots\">\r\n                                  <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                                </ng-container>,  </span>\r\n                            </ng-container>\r\n\r\n                            <!-- Hàng thời gian -->\r\n                            <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                                <div class=\"delete-btn\"></div>\r\n                                <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                                <p *ngIf=\"item.time_end_order\">\r\n                                  {{(item.is_paused ? '_Ended at' : 'Estimated until') | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                                </p>\r\n                                <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                                  <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                                </ng-container>\r\n                            </div>\r\n                          </td>\r\n                          <td nzAlign='center'>\r\n                            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{getUnit(item.units, item.ratio)}}</ng-container>\r\n                          </td>\r\n                          <td nzAlign='center'><ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{item.quantity}}</ng-container></td>\r\n                          <td nzAlign='right'>\r\n                            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                              {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                              <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                              </del>\r\n                            </ng-container>\r\n                          </td>\r\n                          <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(item.price_origin > item.price ? ((1 - item.price/item.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                          <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b></td>\r\n                        </tr>\r\n                      </ng-container>\r\n                      \r\n                      \r\n                    </tbody>\r\n                  </nz-table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"sales-bills not-continue-sell\" >\r\n              <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                  <b>{{'Invoice code' | translate}}</b>\r\n                  <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                  <b>{{'Salesman' | translate}}</b>\r\n                  <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                  <b>{{'Sales date' | translate}}</b>\r\n                  <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n                <div>\r\n                  <b>{{'Delivery' | translate}}</b>\r\n                  <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n                </div>\r\n              </div>\r\n              <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n                <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                  {{invoiceInfo.partner.name | translate}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                  {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                  {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id == 'id_retail' && invoice.retail_name\" nz-col nzSpan=\"24\">\r\n                  {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n                  ''}} {{invoice.retail_address}}\r\n                </div>\r\n              </div>\r\n              <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <!-- <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_discount_invoice') && invoice.getDiscountInvoice() >= 0\">\r\n                  <div>{{'Discount' | translate}}</div>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountInvoice())}}</div>\r\n              </div> -->\r\n                <div nz-col nzSpan=\"24\">\r\n                  <span>{{'SubTotal' | translate}}</span>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.discount_bill\">\r\n                  <span>{{'Discount' | translate}}\r\n                  </span>\r\n        \r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount_bill)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Discount value' | translate}}\r\n                  </span>\r\n                  <span>{{(invoice.discount/subTotal)*100 || 0 | number :'1.0-2'}}%</span>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                </div>\r\n                 \r\n                <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                  <div>{{'Point payment' | translate}}</div>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n                </div>\r\n                <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                  <div>{{'Coupon payment' | translate}}</div>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n                </div>\r\n        \r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                  <span>{{'Fee' | translate}}</span>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                  <span>{{'Tax' | translate}}</span>\r\n                  <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                  <div>\r\n                    {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Total' | translate}}</span>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n      \r\n              </div>\r\n              <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Pay' | translate}}</span>\r\n                  <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n      \r\n              </div>\r\n              <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Rest' | translate}}</span>\r\n                  <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.total * (1+invoice.tax / 100) -\r\n                      invoice.payment)}}</div>\r\n              </div>\r\n              <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Payment method' | translate}}</span>\r\n                  <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n              </div>\r\n              <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                  <span>{{'Note' | translate}}</span>\r\n                  <div>{{invoice.note}}</div>\r\n              </div>\r\n              </div>\r\n             \r\n            </div>\r\n          </div>\r\n    </nz-layout>\r\n</ion-content>\r\n ","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { WarrantyK57Col3Component } from 'src/app/sales/components/print/warranty/warranty-k57-col3/warranty-k57-col3.component';\r\nimport { WarrantyK80Col3Component } from 'src/app/sales/components/print/warranty/warranty-k80-col3/warranty-k80-col3.component';\r\nimport { WarrantyK80Col4Component } from 'src/app/sales/components/print/warranty/warranty-k80-col4/warranty-k80-col4.component';\r\nimport { WarrantyA5Component } from 'src/app/sales/components/print/warranty/warranty-a5/warranty-a5.component';\r\nimport { WarrantyA4Component } from 'src/app/sales/components/print/warranty/warranty-a4/warranty-a4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { VhBillType15 , VhBillType15Detail, VhWarranty } from '../../bill-type/bill-type-15/bill-type15-interface';\r\n\r\n@Component({\r\n  selector: 'app-warranty',\r\n  templateUrl: './warranty.component.html',\r\n  styleUrls: ['./warranty.component.scss']\r\n})\r\nexport class WarrantyComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  printer: any\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice: VhBillType15\r\n  subTotal = 0;\r\n  invoice_detail = [] \r\n  warrantyProd: VhWarranty[] = []\r\n  warrantyNote: VhWarranty[] = []\r\n  @Input() id_bill: any ;\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.init(null,[],[])\r\n  }\r\n\r\n  init(invoice: VhBillType15 = null, invoiceDetail: VhBillType15Detail[] = null, warranty: VhWarranty[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail;\r\n    this.warrantyProd  = warranty.filter(e => e.type == 1)\r\n    this.warrantyNote  = warranty.filter(e => e.type == 2)\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type),\r\n         technician: this.vhAuth.getlocalEmployee(this.invoice.id_technician),\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n  ngOnInit(): void {  \r\n    let print = this.vhQuerySales.getLocalPrintPage('page_desktop_warranty')\r\n    this.printer =print  ? print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] : {discount_hidden :false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.getDataInvoice(this.id_bill)\r\n     \r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id),\r\n        this.vhQuerySales.getWarrantys_byFields({id_bill :{$eq: id }})\r\n      ]).then(([invoice, invoiceDetail, waranty]: any) => { \r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [], [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail, waranty)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  \r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"warranty_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Warranty, Repair invoices\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack()\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  } \r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_warranty')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice,  invoice_detail : this.invoice_detail,  warrantyProd: this.warrantyProd , warrantyNote :this.warrantyNote }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return WarrantyK57Col3Component\r\n      case 'print_size_k80_3c': return WarrantyK80Col3Component\r\n      case 'print_size_k80_4c': return WarrantyK80Col4Component\r\n      case 'print_size_a5': return WarrantyA5Component\r\n      case 'print_size_a4': return WarrantyA4Component\r\n      default: return WarrantyA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n     this.vhComponent.hideModal()\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".sales-best-selling\") && document.querySelector(\".waranty-invoice-quote-header\") && document.querySelector(\".ant-table-thead\")  ) {\r\n      this.tableHeight = document.querySelector(\".sales-best-selling\").clientHeight\r\n        - document.querySelector(\".waranty-invoice-quote-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n         - 35 + \"px\"\r\n    }\r\n    if (document.getElementById(\"receipt-invoice-prodAndnote-invoiceDetail\") && document.querySelector(\".sales-cart\") && document.querySelector(\".sales-cart-header\")) {\r\n      document.getElementById(\"receipt-invoice-prodAndnote-invoiceDetail\").style.height = document.querySelector(\".sales-cart\").clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - 10 + 'px';\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<ion-content scrollX=\"true\">\r\n    <ion-header mode=\"ios\" class=\"ion-no-border\">\r\n        <ion-toolbar mode=\"ios\">\r\n            <ion-buttons slot=\"start\">\r\n                <ion-button mode=\"md\" color=\"vh-black\" (click)=\"goBack()\" fill=\"clear\">\r\n                    <ion-icon slot=\"icon-only\" color=\"vh-red\" name=\"close-outline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    \r\n<nz-layout>\r\n  <div class=\"sales\" *ngIf=\"invoice\">\r\n    <div class=\"sales-cart\">\r\n        <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n            <div nz-col nzSpan=\"12\" class=\"title sales-cart-header-title\">\r\n                <b>{{\"Invoice\" | translate}}: {{invoice.bill_code}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n               \r\n                <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                    <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                    {{'Print' | translate}}\r\n                </button>\r\n                <button [disabled]=\"invoice.bill_type == 17\" (click)=\"deleteInvoice()\"\r\n                class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n                {{'Delete' | translate}}\r\n            </button>\r\n            </div>\r\n            \r\n            <div id=\"receipt-invoice-prodAndnote-invoiceDetail\"\r\n                class=\"receipt-invoice-prodAndnote-invoiceDetail hideScrollbar\" nz-col nzSpan=\"24\">\r\n                <div nz-row>\r\n                    <div nz-col class=\"search-product-warrany\" nzSpan=\"24\">\r\n                        <div>\r\n                            <h5>{{\"Warranty, repair products\"|translate}}</h5>\r\n                        </div>\r\n                        <div>\r\n                        </div>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div class=\"hideScrollbar waranty-invoice-prod-invoiceDetail\">\r\n                            <div class=\"invoiceDetail-item\" *ngFor=\"let item of warrantyProd\">\r\n                                <div nz-row>\r\n                                    <div nz-col nzSpan=\"20\" class=\"invoiceDetail-item-content\">\r\n                                        {{item.content}}\r\n                                    </div>\r\n                                    <div style=\"font-weight: bold;\" nz-col nzSpan=\"4\"\r\n                                        class=\"ion-text-end invoiceDetail-item-quantity\">\r\n                                        {{\"Quantity\" | translate}}: {{item.quantity}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div nz-col class=\"search-product-warrany\" nzSpan=\"24\">\r\n                        <h5>{{\"Note\"|translate}}</h5>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div class=\"hideScrollbar waranty-invoice-prod-invoiceDetail\">\r\n                            <div class=\"invoiceDetail-item\" *ngFor=\"let item of warrantyNote\">\r\n                                <div nz-row>\r\n                                    <div nz-col nzSpan=\"24\" class=\"center-col\">\r\n                                        {{item.content}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"sales-best-selling\">\r\n        <div nz-row class=\"waranty-invoice-quote\">\r\n            <div class=\"waranty-invoice-quote-header\" nz-col nzSpan=\"24\">\r\n                <h5>{{\"Quote\" | translate}}</h5>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                    <div class=\"invoiceDetail-item\">\r\n                        <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\"\r\n                            #rowSelectionTable nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                    <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                    <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <ng-container *ngFor=\"let item of rowSelectionTable.data\">\r\n                                    <ng-container *ngIf=\"item.id_promotion\">\r\n                                        <tr style=\"cursor: pointer;\">\r\n                                            <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let data of item.products\">\r\n                                            <td>{{data.name}} <br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    <pre>{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\"\r\n                                                        *ngFor=\"let combo of data.combos\">{{combo.quantity}}x\r\n                                                        {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}),\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\"\r\n                                                    *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let data of item.products_gift\">\r\n                                            <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\"\r\n                                                        *ngFor=\"let combo of data.combos\">{{combo.quantity}}x\r\n                                                        {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}),\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\"\r\n                                                    *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n\r\n                                    <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                                        <td>{{item.name}}\r\n                                            <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                                            </ng-container>\r\n\r\n                                            <ng-container *ngIf=\"item.combos\">\r\n                                                <span class=\"sub-name\"\r\n                                                    *ngFor=\"let combo of item.combos\">{{combo.quantity}}x\r\n                                                    {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}), </span>\r\n                                            </ng-container>\r\n\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{getUnit(item.units, item.ratio)}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>{{item.quantity}}</td>\r\n                                        <td nzAlign='right'>\r\n                                            {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                            <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                {{item.price_origin > item.price ?\r\n                                                vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                                            </del>\r\n                                        </td>\r\n                                        <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity *\r\n                                                item.price)}}</b></td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </tbody>\r\n                        </nz-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"sales-bills\" [ngClass]=\"invoice.bill_type == 16 ? 'continue-sell' : 'not-continue-sell'\">\r\n        <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n            <div>\r\n                <b>{{'Receptionist' | translate}}</b>\r\n                <div>{{invoiceInfo.employee.name}}</div>\r\n            </div>\r\n            <div>\r\n                <b>{{'Technician' | translate}}</b>\r\n                <div>{{invoiceInfo.technician.name}}</div>\r\n            </div>\r\n            <div>\r\n                <b>{{'Issued date' | translate}}</b>\r\n                <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n            <b>{{'Customer information' | translate}}</b>\r\n            <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                {{invoiceInfo.partner.name | translate}}\r\n            </div>\r\n            <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n            </div>\r\n            <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                {{renderAddress(invoiceInfo.partner)}}\r\n            </div>\r\n            <div *ngIf=\"invoiceInfo.partner._id == 'id_retail' && invoice.retail_name\" nz-col nzSpan=\"24\">\r\n                {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n                ''}} {{invoice.retail_address}}\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n            <b>{{'Payment information' | translate}}</b>\r\n            <!-- <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_discount_invoice') && invoice.getDiscountInvoice() >= 0\">\r\n            <div>{{'Discount' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountInvoice())}}</div>\r\n        </div> -->\r\n            <div nz-col nzSpan=\"24\">\r\n                <span>{{'SubTotal' | translate}}</span>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.discount_bill\">\r\n                <span>{{'Discount' | translate}}\r\n                </span>\r\n\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount_bill)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n                <span>{{'Discount value' | translate}}\r\n                </span>\r\n                <span>{{(invoice.discount/subTotal)*100 || 0 | number :'1.0-2'}}%</span>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n            </div>\r\n\r\n            <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Point payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n            </div>\r\n            <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Coupon payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n            </div>\r\n\r\n            <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\"  >\r\n                <span>{{'Fee' | translate}}</span>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\"  >\r\n                <span>{{'Tax' | translate}}</span>\r\n                <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                <div>\r\n                    {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <span>{{'Total' | translate}}</span>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n\r\n            </div>\r\n            <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                <span>{{'Pay' | translate}}</span>\r\n                <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n\r\n            </div>\r\n            <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n                <span>{{'Rest' | translate}}</span>\r\n                <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.total *\r\n                    (1+invoice.tax / 100) -\r\n                    invoice.payment)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                <span>{{'Payment method' | translate}}</span>\r\n                <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n            </div>\r\n            <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                <span>{{'Note' | translate}}</span>\r\n                <div>{{invoice.note}}</div>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"invoice.bill_type == 16\" nz-row class=\"sales-bills-button\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <button nz-button class=\"button payment-print\" (click)=\"goToCart()\">{{'Continue to sell...'\r\n                    |translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n  </nz-layout>\r\n</ion-content>"],"names":[],"sourceRoot":"webpack:///"}