{"version":3,"file":"default-src_app_sales_components_bill-type_bill-type-1_sales-desktop_sales-desktop-bill-type1-781d48.js","mappings":"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","sources":["./src/app/sales/components/bill-type/bill-type-1/sales-desktop/add/add.component.ts","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/add/add.component.html","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/detail/detail.component.ts","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/detail/detail.component.html","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/edit/edit.component.ts","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/edit/edit.component.html","./src/app/sales/components/bill-type/bill-type-1/sales-desktop/sales-desktop-bill-type1.module.ts"],"sourcesContent":["import { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, HostListener, ViewChild, ElementRef } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhDisplayLEDService, VhEinvoice, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhSaleDesktopInvoiceDetailCombo, VhSaleInvoiceAdd, VhSaleInvoiceDetailAdd } from '../sales-desktop-interface';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { ProductService } from 'src/app/sales/services/product.service';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { BillService } from 'src/app/sales/services/bill.service';\r\n@Component({\r\n  selector: 'sales-desktop-bill-type1-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  root: any; // biến nhận state truyền qua\r\n  invoice: VhSaleInvoiceAdd = {\r\n    bill_type: 1,\r\n    payment_type: 1,\r\n    id_customer: 'id_retail',\r\n    id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n    id_employee: this.vhAuth.getUser()._id,\r\n    id_wallet: 'id_cash',\r\n    date: new Date(),\r\n    total: 0,\r\n    payment: 0,\r\n    tax: 0,\r\n    discount: 0,\r\n    fee: 0,\r\n    note: '',\r\n    price_type: 1,\r\n    id_delivery: '',\r\n    payment_points: 0,\r\n    payment_coupons: 0,\r\n    discount_bill: 0,\r\n    earning_points_bill: 0,\r\n    use_points: 0,\r\n    cash: 0\r\n  }\r\n  invoice_detail: VhSaleInvoiceDetailAdd[] = []\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  public showBestSelling: any = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  customer: any;\r\n  checkPrinter: boolean = false;\r\n  closerBrower: any;\r\n  default_price_type: number\r\n  showModalChangePriceType: boolean = false;\r\n  // enable_quantity_export_exceed_quantity_stock: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').enable_quantity_export_exceed_quantity_stock\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  warning_lot_expried: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried;\r\n\r\n  discount_bill: number = 0;\r\n  percent_discount_bill: number = 0;\r\n  is_discount_bill: boolean = false;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  customer_group: any = [];\r\n  showModalOtherDiscount: boolean = false;\r\n  id_branch = this.vhQuerySales.getDefaultBranch()._id\r\n  show_modal_select_lots_combo = false;\r\n  symbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text;\r\n  default_discount_price_type = this.vhAuth.localStorageGET(\"default_discount_price_type\") ? this.vhAuth.localStorageGET(\"default_discount_price_type\").value : '%';\r\n  discount_price_bill_detail = 0\r\n  show_discount_product = this.vhAuth.localStorageGET(\"show_discount_product\");\r\n  sales_enable_edit_create_date = true\r\n\r\n  cqt_invoice_auto_sign: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').cqt_invoice_auto_sign\r\n  cqt_submit_invoice_immediately: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').cqt_submit_invoice_immediately\r\n  public VhType = VhType;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private nzModalService: NzModalService,\r\n    private vhQuery: VhQuery,\r\n    private fncService: FunctionService,\r\n    private plaform: Platform,\r\n    private vhEinvoice: VhEinvoice,\r\n    private productService: ProductService,\r\n    private billService: BillService,\r\n  ) {\r\n    this.root = this.router.getCurrentNavigation().extras.state;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // check quyền chỉnh sửa ngày tạo đơn\r\n    this.sales_enable_edit_create_date = this.vhAuth.getUser().owner == 'boss' ? true : this.vhAuth.checkLocalMyPermissionName(\"sales_enable_edit_create_date\")\r\n    // kết nối tới thiết bị hiển thị giá\r\n    if (this.plaform.is('electron')) {\r\n      this.vhQuerySales.connectDisplayLEDScreens()\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice, this.invoice_detail\r\n      )\r\n    }\r\n\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    if (this.vhAuth.checkMyPermission('default_price_type_1')) this.default_price_type = 1;\r\n    else if (this.vhAuth.checkMyPermission('default_price_type_2')) this.default_price_type = 2;\r\n    this.invoice.price_type = (this.default_price_type)\r\n\r\n    this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n  }\r\n\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n    if (this.plaform.is('electron')) this.vhQuerySales.disconnectDisplayLEDScreens()\r\n  }\r\n  /**\r\n   * lắng nghe sk nhấn f1 f2 f3 f4 trên bàn phím\r\n   * @example \r\n   */\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n          case 114: \r\n            this.updateServiceTime();\r\n            this.payInvoice(5);\r\n            break;\r\n          case 112:\r\n            this.openModalPaymentInfo(false);\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.openModalPaymentInfo(true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // //sự kiện f5, close tab...\r\n    // this.closerBrower = (event: BeforeUnloadEvent) => {\r\n    //   (event || window.event).returnValue = 'Changes you made may not be saved';\r\n    //   return 'Changes you made may not be saved';\r\n    // }\r\n    // window.addEventListener('beforeunload', this.closerBrower)\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    let tax = this.listTax.find(item => item.default);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n      this.invoice.tax = (tax['value']);\r\n    }\r\n\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n    if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n\r\n    // get các loại chương trình tích điểm\r\n    Promise.all([\r\n      this.vhQuerySales.getEarningPointsBills(),\r\n      this.vhQuerySales.getEarningPointsProducts(),\r\n    ])\r\n      .then(([earning_point_bills, earning_points_products]: any) => {\r\n        this.list_earning_point_bills = earning_point_bills\r\n        this.list_earning_points_products = earning_points_products\r\n        this.customer_group = this.vhQuerySales.getlocalCustomerClasss()\r\n        // this.getClassAndProgram(this.invoice.id_customer);\r\n      })\r\n\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.discount_price = document.querySelector(\".discount-price\") ? this.vhAlgorithm.vhnumeral(\".discount-price\") : 0;\r\n      this.invoice_fee = document.querySelector(\".invoice-fee\") ? this.vhAlgorithm.vhnumeral(\".invoice-fee\") : 0\r\n    })\r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n  }\r\n  ngAfterViewChecked() {\r\n    // if (document.querySelector(\".ant-tabs-nav\") && document.querySelector(\".sales-best-selling\")) {\r\n    //   let height = document.querySelector(\".sales-best-selling\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - 20 + \"px\";\r\n    //   if (document.getElementById(\"carousel-product\")) document.getElementById(\"carousel-product\").style.height = height;\r\n    //   if (document.getElementById(\"carousel-service\")) document.getElementById(\"carousel-service\").style.height = height;\r\n    // }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (this.program_bill && this.subTotal > this.program_bill.bill_total_minimum) {\r\n      let subTotal = this.subTotal;\r\n      if (!this.program_bill.include_promotion_product) { // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion()\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.subTotal;\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  /**\r\n  * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n  * @return : number\r\n  */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoice_detail.filter(item => !item.id_promotion).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * @return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoice_detail\r\n      .filter(item => item.price_origin == item.price && products_of_program_earnig_product.find(i => i == item.id_product || i == item.id_subproduct))\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(this.program_product.products)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = products.filter(item => item.price_origin == item.price && this.program_product.products.find(i => i == item.id_product)).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n\r\n  earning_point: number = 0;\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point = this.getEarningProduct(this.invoice_detail) + this.getEarningBill();\r\n    return this.earning_point ? this.earning_point : 0\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  /**\r\n   *  hàm xóa sp\r\n   * @param detail\r\n   * @example  this.deleteGoods(bill_detail_selected)\r\n   */\r\n  deleteGoods(detail: VhSaleInvoiceDetailAdd) {\r\n    this.removeInvoiceDetail(detail.id_product);\r\n    this.setSubTotal()\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer();\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * hủy lấy khuyến mãi\r\n   * @returns  Promise<unknown>\r\n   * @example this.deletePromotion().then(() =>{\r\n   *  \r\n   * })\r\n   */\r\n  deletePromotion() {\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQuerySales.destroyBillDetails_withPromotions(this.invoice_detail)\r\n      this.invoice_detail = bill_details\r\n      this.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true)\r\n    })\r\n\r\n  }\r\n  searchProductList: boolean = false;\r\n  /**\r\n   * mở component chọn sp\r\n   * @example this.openSearchProductList()\r\n   */\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product)\r\n   * @param data sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(data) {\r\n\r\n    if (data.manylot && !data.id_lotproduct) this.openModalChooseLot(data)\r\n    else {\r\n      if (data) {\r\n        if (data.combos && data.combos.filter(e => e.lots && !e.id_lotproduct).length) {\r\n          this.tempDetail = data;\r\n          this.show_modal_select_lots_combo = true;\r\n        }\r\n        else {\r\n          let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n          if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_sales)\r\n            this.addInvoiceDetail(\r\n              {\r\n                ...data,\r\n                price: price,\r\n                earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n              })\r\n          else {\r\n            this.addBill_Detail(\r\n              {\r\n                ...data,\r\n                price: price,\r\n                earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n              })\r\n            // if (this.enable_quantity_export_exceed_quantity_stock && this.checkWarningStock(data)) {\r\n            //   this.nzModalService.confirm({\r\n            //     nzTitle: this.languageService.translate(\"Số lượng bán vượt quá số lượng tồn kho\"),\r\n            //   });\r\n            //   this.removeInvoiceDetail(data._id)\r\n            // }\r\n          }\r\n        }\r\n        this.setSubTotal()\r\n      }\r\n      // nếu có ck hóa đơn thì phải tính lại chiết khấu này\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n    }\r\n\r\n    if (!data) this.searchProductList = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * tính lại chiết khấu hóa đơn\r\n   * @example this.getDiscountBillOfCustomer()\r\n   */\r\n  getDiscountBillOfCustomer() {\r\n    this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer).discount : 0;\r\n    this.invoice.discount_bill = (this.discount_bill)\r\n    this.setTotal()\r\n  }\r\n\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    this.showModalChangePriceType = false;\r\n    if (event != null) { // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.deletePromotion().then(() => {\r\n        if (this.invoice_detail.length) { // nếu có  length mơi update\r\n          let bill_details = this.invoice_detail\r\n          for (let i in bill_details) {\r\n            // Nếu là dịch vụ thời gian\r\n            if (this.invoice_detail[i].ptype === VhType.SERVICETIME) {\r\n              this.productService.updateServiceTimePrice(this.invoice_detail[i], event);\r\n              delete (this.invoice_detail[i] as any).serviceTimePrice;\r\n              // Cập nhật lại sản phẩm trong danh sách hóa đơn\r\n              this.invoice_detail[i] = { ...this.invoice_detail[i] };\r\n              continue;\r\n            }\r\n            let price_update = 0;\r\n            let product = this.vhQuerySales.getlocalDetailProduct(bill_details[i].id_subproduct ? bill_details[i].id_subproduct : bill_details[i].id_product);\r\n            product = { ...product, ...this.vhQuerySales.getUnit_byRatio(product.units, bill_details[i].ratio) }\r\n            if (event == 1) {\r\n              price_update = product.price\r\n            }\r\n            else {\r\n              price_update = product.price2 ? product.price2 : product.price\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.setSubTotal();;\r\n          if (this.is_discount_bill) {\r\n            setTimeout(() => {\r\n              this.getDiscountBillOfCustomer()\r\n            }, 200);\r\n          }\r\n          else {\r\n            this.invoice.discount_bill = (0);\r\n            this.discount_bill = 0;\r\n          }\r\n        }\r\n        this.invoice.price_type = (event)\r\n      })\r\n\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * trở về trang danh sách hóa đơn\r\n   * @example this.goBack() \r\n   */\r\n  goBack() {\r\n    if (!this.invoice_detail.length) {\r\n      this.isExit = true;\r\n      this.router.navigate([\"/sales/sales-desktop\"], { state: { isSync: true } })\r\n    }\r\n    else\r\n      this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the sales order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n        .then(() => { this.isExit = true; this.router.navigate([\"/sales/sales-desktop\"], { state: { isSync: true } }) }, () => { })\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi số lượng sp trong bill\r\n   * @param product \r\n   * @param event : giá trị thay đổi\r\n   * @example this.checkQuantityProduct(bill_detail_selected, 1)\r\n   */\r\n  checkQuantityProduct(product: VhSaleInvoiceDetailAdd, event) {\r\n    if (!event || event <= 0) {\r\n      event = 1\r\n      product.quantity = 1;\r\n    }\r\n    else { product.quantity = product.quantity ? parseFloat(parseFloat(event).toFixed(2)) : 1; }\r\n    this.cdRef.detectChanges()\r\n    // if (this.enable_quantity_export_exceed_quantity_stock && this.checkWarningStock(product)) {\r\n    //   this.nzModalService.confirm({\r\n    //     nzTitle: this.languageService.translate(\"Số lượng bán vượt quá số lượng tồn kho\"),\r\n    //     nzOnOk: () => {\r\n    //       product.quantity = 1\r\n    //       this.setSubTotal();\r\n    //       if (this.is_discount_bill) {\r\n    //         setTimeout(() => {\r\n    //           this.getDiscountBillOfCustomer()\r\n    //         }, 200);\r\n    //       }\r\n    //       else {\r\n    //         this.invoice.discount_bill = (0);\r\n    //         this.discount_bill = 0;\r\n    //       }\r\n    //       if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n    //     },\r\n    //     nzCancelText: null,\r\n    //     nzOnCancel: () => {\r\n    //       product.quantity = 1\r\n    //       this.setSubTotal();\r\n    //       if (this.is_discount_bill) {\r\n    //         setTimeout(() => {\r\n    //           this.getDiscountBillOfCustomer()\r\n    //         }, 200);\r\n    //       }\r\n    //       else {\r\n    //         this.invoice.discount_bill = (0);\r\n    //         this.discount_bill = 0;\r\n    //       }\r\n    //       if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n    //     }\r\n    //   });\r\n\r\n    // }\r\n    // else {\r\n    this.setSubTotal();\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer()\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n    // }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi đơn vị của bill_detail\r\n   * @param ev  ratio được chọn\r\n   * @param item\r\n   * @example  this.changeUnit(24, bill_detail_selected)\r\n   */\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n    this.setSubTotal();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  unit_price_discount: any;\r\n  tempDetail: VhSaleInvoiceDetailAdd;\r\n  /**\r\n   * mở modal thay đổi giá bán sản phẩm trong bill\r\n   * @param detail \r\n   * @example this.openEditUnitPrice(bilL_detail_selected)\r\n   */\r\n  openEditUnitPrice(detail: VhSaleInvoiceDetailAdd) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.default_discount_price_type = this.vhAuth.localStorageGET(\"default_discount_price_type\") ? this.vhAuth.localStorageGET(\"default_discount_price_type\").value : '%';\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n      this.unit_price_discount = this.vhAlgorithm.vhnumeral('.unit_price_discount');\r\n      this.getValueDiscount(detail.price_origin)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * tính lại % giảm của bill_detail để show ra giao diện\r\n   * @param price_origin \r\n   * @example  this.getValueDiscount(100000)\r\n   */\r\n  getValueDiscount(price_origin) {\r\n    let price = parseFloat(this.unit_price.getRawValue());\r\n    if (price < 0) this.discount_price_bill_detail = 0;\r\n    else {\r\n      if (this.default_discount_price_type == '%') {\r\n        this.discount_price_bill_detail = price_origin - price > 0 ? parseFloat(parseFloat(((1 - (price / price_origin)) * 100).toString()).toFixed(2)) : 0\r\n      }\r\n      else this.discount_price_bill_detail = price_origin - price > 0 ? price_origin - price : 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giảm giá theo % của bill_detail\r\n   * @param item \r\n   * @param event \r\n   * @example this.changePercentDiscountBillDetail(bill_detail_selected, 10)\r\n   */\r\n  changePercentDiscountBillDetail(item, event) {\r\n    item.price = item.price_origin * (1 - event / 100)\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút Ok modal giảm giá sp\r\n   * @example this.handleEditUnit()\r\n   */\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n\r\n      this.setSubTotal();;\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Invalid data, please check again\")) }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  /**\r\n   * tắt modal giảm giá sp\r\n   * @example this.handleCancelEditUnit()\r\n   */\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n\r\n  /**\r\n   * tính lại giá bán của sp sau khi nhập giá trị giảm và loại giảm giá\r\n   * @example this.caculateDiscountPrice_billDetail()\r\n   */\r\n  caculateDiscountPrice_billDetail() {\r\n    switch (this.default_discount_price_type) {\r\n      case '%': {\r\n        if (this.unit_price_discount.getRawValue() > 100 || this.unit_price_discount.getRawValue() < 0) {\r\n          this.tempDetail.price = 0;\r\n          this.tempDetail.percent_discount_product = 100;\r\n        }\r\n        else {\r\n          this.tempDetail.price = this.tempDetail.price_origin * (1 - this.unit_price_discount.getRawValue() / 100)\r\n          this.tempDetail.percent_discount_product = this.unit_price_discount.getRawValue();\r\n        }\r\n        break;\r\n      }\r\n      case this.symbol: {\r\n        if (this.unit_price_discount.getRawValue() > this.tempDetail.price_origin || this.unit_price_discount.getRawValue() < 0) {\r\n          this.tempDetail.price = 0;\r\n          this.tempDetail.percent_discount_product = 100;\r\n        }\r\n        else {\r\n          this.tempDetail.price = this.tempDetail.price_origin - this.unit_price_discount.getRawValue();\r\n          this.tempDetail.percent_discount_product = parseFloat(parseFloat(((1 - (this.tempDetail.price / this.tempDetail.price_origin)) * 100).toString()).toFixed(2));\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi loại giảm giá bill_detail\r\n   * @param value % || vnd\r\n   * @example this.changeValueDiscount('%')\r\n   */\r\n  changeValueDiscount(value) {\r\n    this.default_discount_price_type = value;\r\n    this.tempDetail.price = this.tempDetail.price_origin;\r\n    this.discount_price_bill_detail = 0;\r\n  }\r\n  // -------set employee-------\r\n  /**\r\n   * bắt sk thay đổi nv bán hàng\r\n   * @param event id_employee selected\r\n   */\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n  // ----set customer-----\r\n  radioValue: 1 | 2 | 3 = 1;\r\n  /**\r\n   * bắt sk thay đổi khách hàng\r\n   * @param event id_customer được chọn\r\n   * @example this.closeAndReceiveCustomer('DIWJNMFHOIWUHJDIUWH')\r\n   */\r\n  closeAndReceiveCustomer(event) {\r\n    if (event) {\r\n      this.invoice.id_customer = event;\r\n      const localCustomer = this.vhQuerySales.getlocalCustomer(event);\r\n      this.invoice.tax_buyerDisplayName = localCustomer?.name || '';\r\n      this.invoice.tax_buyerLegalName = localCustomer?.name || '';\r\n      this.invoice.tax_buyerTaxCode = localCustomer?.taxcode || '';\r\n      this.invoice.tax_buyerAddressLine = localCustomer?.address || '';\r\n      this.invoice.tax_buyerEmail = localCustomer?.email || '';\r\n\r\n      if (!this.vhQuerySales.getlocalCustomer(event).debt_enable) this.invoice.payment = (this.getTotalATax());\r\n      this.invoice.retail_name = ('')\r\n      this.invoice.retail_phone = ('')\r\n      this.invoice.retail_address = ('')\r\n      this.getClassAndProgram(event)\r\n      this.updateServiceTime();\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n\r\n  }\r\n\r\n  /**\r\n   * kiểm tra khách hàng có chương trình tích điểm nào ko\r\n   * @param id_customer \r\n   * @example this.getDiscountMethodCustomer()\r\n   */\r\n  getDiscountMethodCustomer() {\r\n    let check = this.vhQuerySales.getlocalDiscount_bill(this.customer_class?.id_discount_bill)\r\n    if (check) {\r\n      this.is_discount_bill = true\r\n      this.getDiscountBillOfCustomer()\r\n      this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"This customer applies the discount calculation formula \") + check.name, 5000)\r\n    }\r\n    else {\r\n      this.is_discount_bill = false\r\n      this.invoice.discount_bill = (0)\r\n    }\r\n\r\n  }\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   * @example this.getClassAndProgram('DNIWUHFIUEHNIWUDHIUDH')\r\n   */\r\n  getClassAndProgram(id_customer) {\r\n    this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n    this.customer_class = this.customer_group.find(item => item._id == this.vhQuerySales.getlocalCustomer(id_customer).id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(item => item._id == this.customer_class.id_earning_points_bill);\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(item => item._id == this.customer_class.id_earning_points_product);\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n    this.point_validity = this.vhQuerySales.getlocalCustomerPoints(this.invoice.id_customer)\r\n    this.getDiscountMethodCustomer()\r\n\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi loại khách hàng (member or retail)\r\n   * @param event \r\n   * @example this.changeCustomerType(1)\r\n   */\r\n  changeCustomerType(event) {\r\n    if (this.radioValue == 1) {\r\n      this.invoice.discount_bill = 0;\r\n      this.invoice.id_customer = \"id_retail\";\r\n      this.invoice.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      this.invoice.tax_buyerLegalName = '';\r\n      this.invoice.tax_buyerTaxCode = '';\r\n      this.invoice.tax_buyerAddressLine = '';\r\n      this.invoice.tax_buyerEmail = '';\r\n      this.invoice.payment = (this.getTotalATax());\r\n      this.updateServiceTime(); \r\n    } if (event == 2 && this.invoice.retail_name) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => { this.clearRetailCustomer() },\r\n        nzOnCancel: () => { this.radioValue = 1 },\r\n      }\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clear dữ liệu khách lẻ trong bill trường hợp thay đổi thành khách thành viên\r\n   * @example this.clearRetailCustomer()\r\n   */\r\n  clearRetailCustomer() {\r\n    this.invoice.retail_address = ('')\r\n    this.invoice.retail_name = ('')\r\n    this.invoice.retail_phone = ('')\r\n  }\r\n\r\n  // ----set delivery ------\r\n  /**\r\n   * bắt sk thay đổi nhà giao hàng\r\n   * @param event id_delivery được chọn\r\n   * @example this.closeAndReceiveDelivery('DJKHWIUHDJUWIYGDUWQ')\r\n   */\r\n  closeAndReceiveDelivery(event) {\r\n    if (event) this.invoice.id_delivery = (event)\r\n    else this.invoice.id_delivery = ('');\r\n    this.updateServiceTime();\r\n  }\r\n  /**\r\n   * bắt sk thay đổi phương thức thanh toán\r\n   * @param event \r\n   * @example this.closeAndGetValuePayment(event)\r\n   */\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0]);\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  /**\r\n   * cập nhật payment_type cho bill\r\n   * @param type \r\n   * @param id_wallet \r\n   * @example  this.setPaymentType(1)\r\n   */\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.payment_type = (type)\r\n    switch (type) {\r\n      case 1: {\r\n        this.invoice.id_wallet = ('id_cash');\r\n        this.invoice.payment = (this.invoice.payment ? this.invoice.payment : this.invoice.total + this.taxValue);\r\n\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.invoice.payment = (0); this.invoice.id_wallet = (null);\r\n        this.invoice.cash = (0);\r\n\r\n        break;\r\n      }\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.id_wallet = (id_wallet)\r\n          this.invoice.payment = (this.invoice.payment ? this.invoice.payment : this.invoice.total + this.taxValue);\r\n\r\n          break;\r\n        }\r\n      }\r\n    };\r\n  }\r\n  isGotPromotion = false\r\n  /**\r\n   * bắt sk thay đổi date của hóa đơn , gán lại giá trị date mới cho đơn\r\n   * @example this.setPickerTime('2023-06-12T08:02:27.697Z')\r\n   */\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.date)\r\n      this.invoice.date = (new Date(this.pickerTime));\r\n    }\r\n    else this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.date = (event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.date = (new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n    if (this.isGotPromotion) this.getPromotions()\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  /**\r\n   * bắt sk thay đổi thuế của bill\r\n   * @param event \r\n   */\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  discount_price: any;\r\n\r\n  /**\r\n   * bắt sk thay đổi giảm giá của hóa đơn , gán lại giá trị giảm giá mới cho đơn\r\n   * @example this.editDiscount()\r\n   */\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0 && this.discount_price.getRawValue() <= this.subTotal) {\r\n      this.invoice.discount = (parseFloat(this.discount_price.getRawValue()));\r\n      this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.discount;\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * mở modal thanh toán bằng điểm hoặc coupon\r\n   * @example openModalOtherDiscount()\r\n   */\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn ok modal thanh toán bằng điểm hoặc coupon\r\n   * @example handleOkOtherDiscount()\r\n   */\r\n  handleOkOtherDiscount() {\r\n    if (this.invoice.payment < this.invoice.payment_points + this.invoice.payment_coupons) this.invoice.payment = (0);\r\n    this.showModalOtherDiscount = false;\r\n    this.setSubTotal();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  value_discount_point: number = 0;\r\n  point_validity: number = 0;\r\n  /**\r\n   * tính lại giá trị thanh toán bằng tiền với số điểm sử dụng tương úng trong chương trình tích điểm\r\n   * @param value điểm sử dụng\r\n   * @example this.calculatePoint2Money(10)\r\n   */\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n\r\n      this.invoice.payment_points = ((value / this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoice.use_points = (value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi giảm giá bill theo %\r\n   * @param value % giảm\r\n   * @example this.editPercentDiscount(10) \r\n   */\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.percent_discount_bill = value;\r\n    this.invoice.discount = this.subTotal * (this.percent_discount_bill / 100)\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  product_codes: any = [];\r\n  /**\r\n   * kiểm tra mã coupon hợp lệ hay ko , tính số tiền thanh toán theo coupon tương ứng\r\n   * @param code \r\n   * @example getDiscountOfCoupon('KDJWOIHA')\r\n   */\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQuerySales.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoice.payment_coupons += (product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n\r\n  /**\r\n   * xóa coupon đã thêm, tính lại tiền thanh toán bằng coupon\r\n   * @param item \r\n   * @example this.onCloseProductCode(coupon_selected)\r\n   */\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoice.payment_coupons -= item.value\r\n  }\r\n  invoice_fee: any;\r\n  /**\r\n   * bắt sk thay đổi phí của hóa đơn , gán lại giá trị phí mới cho đơn\r\n   * @example this.editFee()\r\n   */\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.fee = (parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.fee;\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi tiền khách đưa\r\n   * @param cash \r\n   */\r\n  updateCash(cash: any) {\r\n    this.invoice.cash = (cash.replaceAll(',', ''))\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  /**\r\n   * mở modal chỉnh sửa thanh toán của bill\r\n   * @example this.showModalEditTotalPay()\r\n   */\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.payment_type != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhComponent.showToast(5000,\r\n        this.languageService.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok modal chỉnh sửa thanh toán của bill\r\n   * @example this.handleEditPay()\r\n   */\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.getTotalATax()) {\r\n      this.invoice.payment = (parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chỉnh sửa thanh toán của bill\r\n   * @example this.handleCancelEditPay()\r\n   */\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n\r\n  handleMinvoice(bill) {\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQuerySales.getlocalBranch(this.vhQuerySales.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n\r\n                      bill.cqt_status = 1\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n\r\n                      bill.cqt_status = 1\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n\r\n                      bill.cqt_status = 1\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n\r\n                      bill.cqt_status = 1\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            resolve(true)\r\n            console.log('error', error)\r\n          })\r\n      }\r\n    })\r\n\r\n  }\r\n  save_enable = true;\r\n  /**\r\n   * xử lý sk nhấn nút thanh toán hoặc lưu tạm\r\n   * @param bill_type \r\n   * @param print biến cờ để check in hay ko\r\n   * @example this.payInvoice(1)\r\n   */\r\n  payInvoice(bill_type: 1 | 4 | 5 = 5, print?) {\r\n    if (this.save_enable) {\r\n      this.save_enable = false;\r\n      if (this.vhAuth.checkMyPermission(\"sales_enable_payment\")) {\r\n        // nếu là lưu tạm thì hủy thanh toán điểm và coupon \r\n        if (bill_type == 5) {\r\n          this.invoice.payment_coupons = 0;\r\n          this.invoice.payment_points = (0);\r\n          this.invoice.use_points = (0);\r\n          this.setTotal()\r\n        }\r\n        // tính lại điểm tích lũy còn lại của khách hàng\r\n        if (this.getTotalEarningPoint() && bill_type != 5 || this.invoice.use_points) {\r\n          let earned_points = this.getTotalEarningPoint() - this.value_discount_point\r\n          this.vhQuerySales.updateCustomer_byEarnedPoints(this.invoice.id_customer, earned_points)\r\n          this.invoice.earning_points_bill = (this.getTotalEarningPoint())\r\n        }\r\n        if (print) {\r\n          if (this.checkPrinter) {\r\n            if (this.vhAuth.localStorageGET(\"show_confirm_pay\"))\r\n              this.nzModalService.confirm({\r\n                nzTitle: bill_type == 5 ? `${this.languageService.translate(\"Save\")}?` : (!print ? `${this.languageService.translate(\"Pay\")}?` : `${this.languageService.translate(\"Pay & Print\")}?`),\r\n                nzCancelText: this.languageService.translate(\"Cancel\"),\r\n                nzOkText: \"Ok\",\r\n                nzOnOk: () => {\r\n                  this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                    this.createOrUpdate(bill_type).then(bill => {\r\n                      this.save_enable = true;\r\n                      if (bill_type == 1) {\r\n\r\n                        // cập nhật lại trạng thái của coupon là đã sử dụng nếu có thanh toán bằng coupon\r\n                        let promise = new Array();\r\n                        for (let i = 0; i < this.product_codes.length; i++) {\r\n                          promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                        }\r\n                        console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                        if (this.cqt_submit_invoice_immediately) {\r\n                          promise.push(this.handleMinvoice(bill))\r\n                        }\r\n                        this.vhQuery.asyncPromiseAll(promise)\r\n                          .then((array) => {\r\n                            if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                            this.vhComponent.hideLoading(0).then(() => {\r\n                              this.vhComponent.showToast(5000,\r\n                                `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                              )\r\n                              this.handlePrint()\r\n                            })\r\n                          }, error => {\r\n                            this.vhComponent.hideLoading(0).then(() => {\r\n                              this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                            })\r\n                          })\r\n                      }\r\n                      else {\r\n                        if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000,\r\n                            `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                          )\r\n                          this.handlePrint()\r\n                        })\r\n                      }\r\n                    })\r\n                  })\r\n                },\r\n                nzOnCancel: () => { this.save_enable = true; },\r\n              })\r\n            else {\r\n              this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                this.createOrUpdate(bill_type).then(bill => {\r\n                  this.save_enable = true;\r\n                  if (bill_type == 1) {\r\n                    let promise = new Array();\r\n                    for (let i = 0; i < this.product_codes.length; i++) {\r\n                      promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                    }\r\n                    console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                    if (this.cqt_submit_invoice_immediately) {\r\n                      promise.push(this.handleMinvoice(bill))\r\n                    }\r\n                    this.vhQuery.asyncPromiseAll(promise)\r\n                      .then((array) => {\r\n                        if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000,\r\n                            `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                          )\r\n                          this.handlePrint()\r\n                        })\r\n                      }, error => {\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                        })\r\n                      })\r\n                  }\r\n                  else {\r\n                    if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                    this.vhComponent.hideLoading(0).then(() => {\r\n                      this.vhComponent.showToast(5000,\r\n                        `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                      )\r\n                      this.handlePrint()\r\n                    })\r\n                  }\r\n                })\r\n              })\r\n\r\n            }\r\n          }\r\n          else {\r\n            this.nzModalService.confirm({\r\n              nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n              nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n              nzIconType: \"info-circle\",\r\n              nzCancelText: null,\r\n              nzOnOk: () => { this.save_enable = true; }\r\n            })\r\n          }\r\n        }\r\n        else {\r\n          if (this.vhAuth.localStorageGET(\"show_confirm_pay\")) {\r\n            this.nzModalService.confirm({\r\n              nzTitle: bill_type == 5 ? `${this.languageService.translate(\"Save\")}?` : (!print ? `${this.languageService.translate(\"Pay\")}?` : `${this.languageService.translate(\"Pay & Print\")}?`),\r\n              nzCancelText: this.languageService.translate(\"Cancel\"),\r\n              nzOkText: \"Ok\",\r\n              nzOnOk: () => {\r\n                this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                  this.createOrUpdate(bill_type).then(bill => {\r\n                    if (bill_type == 1) {\r\n                      let promise = new Array();\r\n                      for (let i = 0; i < this.product_codes.length; i++) {\r\n                        promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                      }\r\n                      console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                      if (this.cqt_submit_invoice_immediately) {\r\n                        promise.push(this.handleMinvoice(bill))\r\n                      }\r\n                      this.vhQuery.asyncPromiseAll(promise)\r\n                        .then((array) => {\r\n                          if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                          this.vhComponent.hideLoading(0).then(() => {\r\n                            this.vhComponent.showToast(5000,\r\n                              `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                            )\r\n                            this.handle()\r\n                          })\r\n                        }, error => {\r\n                          this.vhComponent.hideLoading(0).then(() => {\r\n                            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                          })\r\n                        })\r\n                    }\r\n                    else {\r\n                      if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000,\r\n                          `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                        )\r\n                        this.handle()\r\n                      })\r\n                    }\r\n                  })\r\n                })\r\n              },\r\n              nzOnCancel: () => { this.save_enable = true; },\r\n            })\r\n          }\r\n          else {\r\n            this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n              this.createOrUpdate(bill_type).then(bill => {\r\n                if (bill_type == 1) {\r\n                  let promise = new Array();\r\n                  for (let i = 0; i < this.product_codes.length; i++) {\r\n                    promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                  }\r\n                  console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                  if (this.cqt_submit_invoice_immediately) {\r\n                    promise.push(this.handleMinvoice(bill))\r\n                  }\r\n                  this.vhQuery.asyncPromiseAll(promise)\r\n                    .then((array) => {\r\n                      if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000,\r\n                          `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                        )\r\n                        this.handle()\r\n                      })\r\n                    }, error => {\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                      })\r\n                    })\r\n                }\r\n                else {\r\n                  if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                  this.vhComponent.hideLoading(0).then(() => {\r\n                    this.vhComponent.showToast(5000,\r\n                      `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                    )\r\n                    this.handle()\r\n                  })\r\n                }\r\n              })\r\n            })\r\n\r\n          }\r\n        }\r\n\r\n      }\r\n      else this.vhComponent.showToast(5000, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n    }\r\n  }\r\n  /**\r\n   * tạo bill lên DB\r\n   * @param bill_type \r\n   * @returns \r\n   */\r\n  createOrUpdate(bill_type: 1 | 4 | 5) {\r\n    this.productService.updateAllServiceTimeToPause(this.invoice_detail);\r\n    let invoice = { \r\n      ...this.getCreateUpdateInvoice(bill_type),\r\n      id_shop: 'local',\r\n    }\r\n    if(invoice.id_customer == 'id_retail') {\r\n      invoice.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      invoice.tax_buyerLegalName = '';\r\n      invoice.tax_buyerTaxCode = '';\r\n      invoice.tax_buyerAddressLine = '';\r\n      invoice.tax_buyerEmail = '';\r\n    }\r\n    return this.vhQuerySales.createBill_Billdetail(invoice, this.getCreateUpdateInvoiceDetail())\r\n\r\n  }\r\n\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(false)\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trờ về trang danh sách hóa đơn sau khi đã thanh toán xong\r\n   * @example this.handle(true)\r\n   */\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/sales-desktop'], { state: { isSync: true } })\r\n  }\r\n  /**\r\n   * kiểm tra dữ liệu thông tin máy in và mở component in\r\n   * @example this.handlePrint()\r\n   */\r\n  handlePrint(temp?) {\r\n    this.invoice_detail.forEach(e => {\r\n      if (e.products_gift) e.products_gift = e.products_gift.filter(item => item.choose)\r\n    })\r\n\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer) {\r\n        this.updateServiceTime();\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: { ...printer, name: \"Sales\" }, invoice_detail: this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => {\r\n            if (!temp)\r\n              this.handle()\r\n          })\r\n        })\r\n      }\r\n    }, (err) => {\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => { if (!temp) this.handle() }\r\n      })\r\n    })\r\n  }\r\n  note: string;\r\n  /**\r\n   * bắt sk thay đổi note của bill\r\n   * @example this.edit_note()\r\n   */\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n\r\n  //--------------visible drawer info customer-----------\r\n  visibleInfoCustomer: boolean = false;\r\n  /**\r\n   * mở modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  openInfoCustomer() {\r\n    if (this.invoice.id_customer != 'id_retail') {\r\n      this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n      this.visibleInfoCustomer = true;\r\n    }\r\n  }\r\n  /**\r\n   * đóng modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  closeInfoCustomer(event) {\r\n    this.visibleInfoCustomer = false;\r\n  }\r\n\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/sales-desktop/add' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.languageService.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n\r\n  /**add customer */\r\n  showDrawerAddCusomer: boolean = false;\r\n  showDrawerAddRetail: boolean = false\r\n  /**\r\n   * mở modal thêm khách hàng thành viên mới hoặc thêm thông tin khách lẻ\r\n   * @example this.openDrawerAddCustomerOrRetail()\r\n   */\r\n  openDrawerAddCustomerOrRetail() {\r\n    if (this.radioValue == 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCusomer = true\r\n  }\r\n  /**\r\n   * bắt sk tắt drawer thêm khách hàng\r\n   * @param result output kết quả trả về\r\n   * @example this.closeAddCustomer('NDWOIUHDIUWQHSIOQUH')\r\n   */\r\n  closeAddCustomer(result) {\r\n    if (this.radioValue == 1) {\r\n      if (result) {\r\n        this.invoice.retail_name = result.retail_name;\r\n        this.invoice.retail_phone = result.retail_phone;\r\n        this.invoice.retail_address = result.retail_address;\r\n      }\r\n      this.invoice.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      this.invoice.tax_buyerLegalName = '';\r\n      this.invoice.tax_buyerTaxCode = '';\r\n      this.invoice.tax_buyerAddressLine = '';\r\n      this.invoice.tax_buyerEmail = '';\r\n      this.showDrawerAddRetail = false\r\n    }\r\n    else {\r\n      this.showDrawerAddCusomer = false\r\n      if (result) {\r\n        this.invoice.id_customer = result;\r\n        const localCustomer = this.vhQuerySales.getlocalCustomer(result);\r\n        this.invoice.tax_buyerDisplayName = localCustomer?.name || '';\r\n        this.invoice.tax_buyerLegalName = localCustomer?.name || '';\r\n        this.invoice.tax_buyerTaxCode = localCustomer?.taxcode || '';\r\n        this.invoice.tax_buyerAddressLine = localCustomer?.address || '';\r\n        this.invoice.tax_buyerEmail = localCustomer?.email || '';\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện quét barcode bằng máy\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === \"/sales/sales-desktop/add\" && !this.showModalOtherDiscount && !this.isVisibleEditUnitPrice) {\r\n\r\n      // if (!this.showSearchBar && !this.showPayInfo) {\r\n      if (_event.key == \"Enter\") {\r\n\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        // this.scanBarcode(this.barcode_array.join(\"\"));\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n\r\n\r\n          if (this.barcode) {\r\n            let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.barcode);\r\n            if (detailproduct) {\r\n              this.closeSearchProductList({ ...detailproduct, ...this.vhQuerySales.getUnit_byRatio(detailproduct.units, detailproduct.ratio) });\r\n            }\r\n            else {\r\n              this.quantity?.nativeElement.blur();\r\n              if (this.barcode.length > 3) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Not found\"))\r\n            }\r\n          } else\r\n            this.quantity?.nativeElement.blur();\r\n          this.barcode_array = [];\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n  //tra cước phí\r\n  visibleCheckFees: boolean = false\r\n\r\n\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  /**\r\n   * bắt sk nhấn nút ok chọn quà của promotion type = 7, gán các sp được chọn trong CTKM vào bill_detail\r\n   * @example this.handleAddGiftType7()\r\n   */\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n      for (let i in this.product_gift_type7) {\r\n        // this.product_gift_type7[i].products_gift = this.product_gift_type7[i].products_gift.filter(item => item.choose).map(e => { return { ...e } })\r\n        if (this.product_gift_type7[i].products_gift.length) this.invoice_detail.push(this.product_gift_type7[i])\r\n      }\r\n\r\n    this.gotten_gift_type7 = true;\r\n    this.setSubTotal();\r\n  }\r\n  /**\r\n   * xử lý nhấn nút lấy quà\r\n   * @example this.getPromotions()\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        /** Chứa các bill_detail có ptype = 6 */\r\n        let bill_details_type_6;\r\n        /** Chứa các bill_detail có ptype != 6 */\r\n        let bill_details_others;\r\n        // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n        if(this.productService.isContainServiceTime(this.invoice_detail)) {\r\n          bill_details_type_6 = this.invoice_detail.filter((item) => item.ptype === VhType.SERVICETIME);\r\n          bill_details_others = this.invoice_detail.filter((item) => item.ptype !== VhType.SERVICETIME);\r\n          this.invoice_detail = bill_details_others;\r\n        }\r\n        this.vhQuerySales.changeBillDetails_withPromotions(this.invoice_detail, this.invoice.date).then((bill_details_display: any) => {\r\n          // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n          if(bill_details_type_6) {\r\n            bill_details_display.bill_details_pmtype_0to6 = [\r\n              ...bill_details_type_6,\r\n              ...bill_details_display.bill_details_pmtype_0to6,\r\n            ];\r\n          }\r\n\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_0to6)\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_7)\r\n\r\n          this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC([...bill_details_display.bill_details_pmtype_7], 'total_bill_value')\r\n          this.isGotPromotion = true;\r\n          this.vhComponent.hideLoading(0)\r\n          this.invoice_detail = [...bill_details_display.bill_details_pmtype_0to6,]\r\n          // if (bill_details_display.filter(item => item.products_gift).length) this.showProductGift = true;\r\n          this.getEarningpointPromotion();\r\n\r\n          // this.product_gift_type7 = [...bill_details_display.bill_details_pmtype_7]\r\n          this.handlePromotionType7(this.bill_details_pmtype_7)\r\n          this.setSubTotal()\r\n\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * xử lý dữ liệu sản phẩm sau khi lấy quả của prmotion_type = 7\r\n   * @param bill_details_pmtype_7 \r\n   */\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length)\r\n      if (bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax()) != -1)\r\n        this.product_gift_type7 = [bill_details_pmtype_7[bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax())]]\r\n      else this.product_gift_type7 = []\r\n    else this.product_gift_type7 = []\r\n    // \r\n\r\n  }\r\n\r\n  /**\r\n   * xử lý chọn lô tự động cho sản phẩm chọn trong khuyến mãi\r\n   * @param promotion array product promotion\r\n   * @example this.handleChooseLotForPromotion([])\r\n   */\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(product.lots, 'date_exp')\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach(element => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(element.lots, 'date_exp')\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    for (let i of this.invoice_detail) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n        }\r\n      }\r\n      if (i.products) {\r\n        for (let product of i.products) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n        }\r\n      }\r\n      if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n    }\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns bool\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (data.products_gift.filter(item => item.choose).length == data.promotions_maximum) return true;\r\n    else return false\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit theo ratio truyền vào\r\n   * @param units mảng units của sp\r\n   * @param ratio ratio được chọn\r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  /**\r\n   * trả về tên lô theo id_lot được chọn\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  /**\r\n   * lọc danh sách lô của sp theo số lô (lot_number)\r\n   * @param value \r\n   */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk thay đổi id_lotnumber của bill-detail\r\n   * @param e id_lotnumber thay đổi\r\n   * @example this.changeLot('DNIUHWIDCHBIQOHSDOIHW')\r\n   */\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.tempDetail.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.tempDetail.lots = this.list_search_lot;\r\n            if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.tempDetail.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.tempDetail.lots = this.list_search_lot;\r\n        if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.tempDetail.lots = this.list_search_lot;\r\n      if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô cho combo\r\n   * @example this.handleChooseLotCombo()\r\n   */\r\n  handleChooseLotCombo() {\r\n    if (this.tempDetail.combos.filter(item => item.lots && !item.id_lotproduct).length)\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Vui lòng chọn lô cho sản phẩm thuộc combo này\"))\r\n    else {\r\n      this.show_modal_select_lots_combo = false;\r\n      this.closeSearchProductList(this.tempDetail)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trả về tổng tiền \r\n   * @returns number\r\n   * @example let total = this.getTotalATax()\r\n   */\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n\r\n  /**\r\n   * xóa 1 bill_detail trong local\r\n   * @param id id_bill_detail selected\r\n   * @param notSetSub \r\n   */\r\n  removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tính lại cộng tiền của bill khi có sự thay đổi (thêm xóa sửa bill_detail, đổi giá bán, khuyến mãi, phí ,thuế ,...)\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n      }\r\n      else if (i.products) {\r\n\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.editPercentDiscount(this.percent_discount_bill)\r\n    this.setTotal();\r\n  }\r\n\r\n  /**\r\n   * tính lại tổng tiền của bill để lưu trường total\r\n   * @example this.setTotal();\r\n   */\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee > 0 ? this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee : 0\r\n    this.setTaxValue()\r\n    // xuất ra màn hình LED\r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice, this.invoice_detail\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tính giá trị thuế ra tiền\r\n   * @example this.setTaxValue()\r\n   */\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n    this.setPayment()\r\n  }\r\n  /**\r\n   * tính lại thanh toán để lưu trường payment của bill\r\n   * @param value : giá trị thanh toán tự nhập nếu có (trường hợp nợ lại 1 phần)\r\n   * @example this.setPayment()\r\n   */\r\n  setPayment(value?: number) {\r\n\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0\r\n    } else {\r\n      if (value != null)\r\n        this.invoice.payment = value\r\n      else\r\n        this.invoice.payment = this.invoice.total + this.taxValue\r\n    }\r\n    this.setCash(this.invoice.cash);\r\n  }\r\n\r\n  /**\r\n   * cập nhật lại tiền khách đưa để lưu trường cash trong bill\r\n   * @param value \r\n   * @example this.setCash(100000)\r\n   */\r\n  setCash(value) {\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0\r\n    else {\r\n      if (value) this.invoice.cash = parseFloat(value);\r\n      else this.invoice.cash = 0\r\n    }\r\n  }\r\n  /**\r\n   * trả về dữ liệu thông tin bill clean để lưu DB\r\n   * @param bill_type bill-type cần thay đổi\r\n   * @returns object\r\n   * @example let bill = this.getCreateUpdateInvoice(1)\r\n   */\r\n  getCreateUpdateInvoice(bill_type: 1 | 4 | 5 | 36 | null = null) {\r\n    if (bill_type) this.invoice.bill_type = (bill_type)\r\n    return this.invoice\r\n  }\r\n\r\n  /**\r\n   * trả về dữ liệu thông tin bill_detail clean để lưu DB\r\n   * @returns array[object]\r\n   *  @example let bill_details = this.getCreateUpdateInvoiceDetail()\r\n   */\r\n  getCreateUpdateInvoiceDetail(): VhSaleInvoiceDetailAdd[] {\r\n    return this.invoice_detail.map(item => {\r\n      if (!item.pmtype) {\r\n        let detail: VhSaleInvoiceDetailAdd = {\r\n          id_product: item.id_product,\r\n          ptype: item.ptype,\r\n          price: item.price,\r\n          price_origin: item.price_origin,\r\n          quantity: item.quantity,\r\n          earning_points_product: item.earning_points_product,\r\n          ratio: item.ratio,\r\n          note: item.note,\r\n          time_start_order: item.time_start_order,\r\n          time_end_order: item.time_end_order,\r\n          is_paused: item.is_paused,\r\n        }\r\n        if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n        if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n\r\n        if (item.ptype == 5) {\r\n          detail['combos'] = item.combos.map(combo => {\r\n            let product: VhSaleDesktopInvoiceDetailCombo = {\r\n              id_product: combo.id_product,\r\n              price: combo.price,\r\n              quantity: combo.quantity,\r\n              ptype: combo.ptype,\r\n              ratio: combo.ratio ? combo.ratio : 1,\r\n            }\r\n            if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n            if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n            return product;\r\n          })\r\n        }\r\n        return detail\r\n      }\r\n      else {\r\n        let detail: any = {\r\n          id_promotion: item.id_promotion,\r\n          pmtype: item.pmtype,\r\n        }\r\n        if (item.products_gift) {\r\n          if (item.products_gift.filter(ele => ele.choose).length) {\r\n            detail['products_gift'] = item.products_gift.filter(ele => ele.choose).map(e => {\r\n              let prod = {\r\n                id_product: e.id_product,\r\n                price: e.price,\r\n                price_origin: e.price_origin,\r\n                quantity: e.quantity,\r\n                ptype: e.ptype,\r\n                earning_points_product: e.earning_points_product,\r\n                ratio: e.ratio\r\n              }\r\n              if (e.ptype == 5) {\r\n                prod['combos'] = e.combos.map(combo => {\r\n                  let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                    id_product: combo.id_product,\r\n                    price: combo.price,\r\n                    quantity: combo.quantity,\r\n                    ptype: combo.ptype,\r\n                    ratio: combo.ratio ? combo.ratio : 1,\r\n                  }\r\n                  if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                  if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                  return product;\r\n                })\r\n              }\r\n              if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n              if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n              return prod\r\n            })\r\n            return detail\r\n          }\r\n        }\r\n        else {\r\n          detail['products'] = item.products.map(e => {\r\n            let prod = {\r\n              id_product: e.id_product,\r\n              price: e.price,\r\n              price_origin: e.price_origin,\r\n              quantity: e.quantity,\r\n              ptype: e.ptype,\r\n              earning_points_product: e.earning_points_product,\r\n              ratio: e.ratio,\r\n              note: e.note,\r\n            }\r\n            if (e.ptype == 5) {\r\n              prod['combos'] = e.combos.map(combo => {\r\n                let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                  id_product: combo.id_product,\r\n                  price: combo.price,\r\n                  quantity: combo.quantity,\r\n                  ptype: combo.ptype,\r\n                  ratio: combo.ratio ? combo.ratio : 1,\r\n                }\r\n                if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                return product;\r\n              })\r\n            }\r\n            if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n            if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n            return prod\r\n          })\r\n          return detail\r\n        }\r\n\r\n      }\r\n    }).filter(item => item)\r\n\r\n  }\r\n\r\n  /**\r\n   * thêm sản phẩm được chọn từ drawer search-product\r\n   * @param value \r\n   * @example this.addInvoiceDetail(product_selected)\r\n   */\r\n  addInvoiceDetail(value: any) {\r\n    // if (this.enable_quantity_export_exceed_quantity_stock && this.checkWarningStock(value)) {\r\n    //   this.nzModalService.confirm({\r\n    //     nzTitle: this.languageService.translate(\"Số lượng bán vượt quá số lượng tồn kho\"),\r\n    //   });\r\n    //   return\r\n    // }\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1 && value.type !== VhType.SERVICETIME) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * hàm này để check số lượng bán lớn hơn số lượng tồn kho thì hiển thị cảnh báo\r\n   * @example let bool =  this.checkWarningStock(product)\r\n   * @returns true nếu âm, false nếu chưa âm\r\n   */\r\n  // checkWarningStock(product_check) {\r\n\r\n  //   // lấy số lượng tồn kho của sản phẩm trong localDetailProduct\r\n  //   let id_sub_or_product = '';\r\n  //   if (product_check.id_subproduct) id_sub_or_product = product_check.id_subproduct\r\n  //   else {\r\n  //     if (product_check.id_product) id_sub_or_product = product_check.id_product\r\n  //     else id_sub_or_product = product_check._id\r\n  //   }\r\n  //   let quantity_stock = this.vhQuerySales.getlocalDetailProduct(id_sub_or_product)?.quantity_branch[this.id_branch]\r\n\r\n  //   // lấy số lượng trong toàn bill_detail trường hợp chọn sp nhiều dòng hoặc combo\r\n  //   let quantity_check = 0;\r\n  //   for (let item of this.invoice_detail) {\r\n  //     if (item.combos) {\r\n  //       for (let combo of item.combos) {\r\n  //         if (combo.id_subproduct && combo.id_subproduct == id_sub_or_product) quantity_check += combo.quantity*item.quantity\r\n  //         else if (combo.id_product == id_sub_or_product) quantity_check += combo.quantity*item.quantity\r\n  //       }\r\n  //     }\r\n  //     else {\r\n  //       if (item.id_subproduct && item.id_subproduct == id_sub_or_product) { quantity_check += item.quantity; \r\n\r\n  //       else if (item.id_product == id_sub_or_product) { quantity_check += item.quantity; \r\n  //     }\r\n  //   }\r\n  //   \r\n\r\n  //   if (quantity_stock < quantity_check) return true\r\n  //   else return false\r\n\r\n  // }\r\n\r\n  /**\r\n   * xử lý các trường của sp được chọn và thêm vào mảng local\r\n   * @param value \r\n   * @param new_price \r\n   * @example  this.addBill_Detail(product_selected)\r\n   */\r\n  addBill_Detail(value: any, new_price?: number) {\r\n    let detail: any = {\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      ptype: value.type,\r\n      unit: value.unit,\r\n      units: value.units ? value.units : [],\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      price: new_price != null ? new_price : value.price,\r\n      price2: value.price2,\r\n      price_origin: value.price,\r\n      earning_points_product: value.earning_points_product ? value.earning_points_product : 0,\r\n      percent_discount_product: 0,\r\n      time_start_order: new Date().toISOString(),\r\n    }\r\n\r\n    if (value.type == 5) {\r\n      detail['cbtype'] = 5;\r\n      detail['combos'] = [...value.combos.map(item => {\r\n        let product: VhSaleDesktopInvoiceDetailCombo = {\r\n          id_product: item.id_product,\r\n          name: item.name,\r\n          ptype: item.type,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n          unit: item.unit,\r\n          units: item.units,\r\n          ratio: item.ratio ? item.ratio : 1,\r\n          lots: item.lots ? item.lots : [],\r\n          id_lotproduct: item.id_lotproduct,\r\n        }\r\n        if (item.lots) product['lots'] = item.lots;\r\n        if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n        if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n        return product;\r\n      })]\r\n    }\r\n    if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n    if (value.lots) detail['lots'] = value.lots;\r\n    if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n    this.invoice_detail.unshift(detail);\r\n    if (this.auto_active_quantity_input) {\r\n      setTimeout(() => {\r\n\r\n        this.quantity.nativeElement.focus();\r\n        this.quantity.nativeElement.select();\r\n      }, 0);\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n  auto_active_quantity_input: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').auto_active_quantity_input;\r\n  @ViewChild('quantity') quantity: ElementRef; // dùng viewchild để active inputkhi render ra html\r\n\r\n  /**\r\n   * trả về tổng số lượng sp đang chọn bán\r\n   * @returns number\r\n   */\r\n  getNumbersProduct() {\r\n    return this.invoice_detail.reduce((sum: number, next) => sum + next.quantity, 0)\r\n  }\r\n\r\n\r\n\r\n\r\n    \r\n  /* -------------------------------------------------------------------------------------------------------------------------------------- */\r\n  /*                                                            DỊCH VỤ THỜI GIAN                                                           */\r\n  /* -------------------------------------------------------------------------------------------------------------------------------------- */\r\n\r\n  \r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  endTime: Date = new Date();\r\n  /** Biến tạm lưu dịch vụ thời gian đang được chọn */\r\n  selectedServiceTime: any;\r\n  /** Có hiện modal Chỉnh sửa Dịch vụ thời gian hay không */\r\n  isShowModalEditServiceTime: boolean = false;\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chỉnh sửa Dịch vụ thời gian\r\n   */\r\n  editServiceTime(item, index) {\r\n    this.selectedServiceTime = item;\r\n    this.selectedServiceTime.index = index;\r\n    // Nếu là Dịch vụ thời gian\r\n    this.productService.updateServiceTimePrice(this.selectedServiceTime, this.default_price_type);\r\n    if(!this.selectedServiceTime.is_paused) {\r\n      this.updateBillCalculations();\r\n    }\r\n    this.isShowModalEditServiceTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi đóng modal chỉnh sửa Dịch vụ thời gian\r\n   */\r\n  saveServiceTime() {\r\n    if(this.selectedServiceTime.ptype === VhType.SERVICETIME) {\r\n      if (!this.selectedServiceTime.is_paused) {\r\n        this.selectedServiceTime.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n      this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n      this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n      delete this.selectedServiceTime.serviceTimePrice;\r\n    }\r\n\r\n    this.selectedServiceTime.price = parseFloat(this.selectedServiceTime.price)\r\n    this.isShowModalEditServiceTime = false;\r\n    const detail = { ...this.selectedServiceTime };\r\n    delete detail.index; // Xoá index để không lưu vào invoice_detail\r\n    this.invoice_detail[this.selectedServiceTime.index] = detail;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  \r\n  /**\r\n   * Tính lại tất cả thông số ở Bill.\r\n   *\r\n   * Tính lại subTotal, chiết khấu, discount, discount_bill, payment_points, payment_coupons, fee, tax, Điểm tích lũy cộng thêm\r\n   */\r\n  updateBillCalculations() {\r\n    // subTotal\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      else if (i.products) {\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0);\r\n    }\r\n    this.subTotal = subTotal;\r\n\r\n    // chiết khấu\r\n    if (this.is_discount_bill) {\r\n      this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer).discount : 0;\r\n      this.invoice.discount_bill = this.discount_bill;\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = 0;\r\n    }\r\n\r\n    // total\r\n    this.invoice.total = Math.max(0, this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee);\r\n\r\n    // tax\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n    \r\n    // payment\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0;\r\n    } \r\n    else {\r\n      this.invoice.payment = this.invoice.total + this.taxValue;\r\n    }\r\n\r\n    // cash\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0;\r\n    else this.invoice.cash = 0;\r\n\r\n    // earning_point\r\n    this.getTotalEarningPoint();\r\n    \r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(this.invoice, this.invoice_detail);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoice_detail)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoice_detail, this.default_price_type);\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------- MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------- */\r\n  \r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  isShowModalEditUsedTime: boolean = false;\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  tempStartTime: any;\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  tempEndTime: any;\r\n  \r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.selectedServiceTime.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.selectedServiceTime.is_paused) {\r\n      this.tempEndTime = this.selectedServiceTime.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.selectedServiceTime.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.selectedServiceTime.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.selectedServiceTime.is_paused = true;\r\n    }\r\n\r\n    this.selectedServiceTime.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n    this.selectedServiceTime.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n    this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.selectedServiceTime.time_end_order = new Date();\r\n    this.selectedServiceTime.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n    this.selectedServiceTime.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n    this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /** Sẽ in hóa đơn ay không sau khi nhấn Thanh toán và hiện modal Thông tin thanh toán */\r\n  willPrintInvoice: boolean = false;\r\n  /** Hiển thị modal Thông tin thanh toán hay không */\r\n  isShowModalPaymentInfo: boolean = false;\r\n\r\n  /**\r\n   * Mở modal Thông tin thanh toán\r\n   */\r\n  openModalPaymentInfo(print: boolean = false) {\r\n    this.updateServiceTime();\r\n    this.willPrintInvoice = print;\r\n    this.isShowModalPaymentInfo = true;\r\n  }\r\n\r\n\r\n\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ];\r\n  /**\r\n   * Lấy label của phương thức thanh toán\r\n   * @param value value của phương thức thanh toán cần lấy label\r\n   * @returns label của phương thức thanh toán \r\n   */\r\n  getPaymentTypeLabel(value) {\r\n    if(value[1]) {\r\n      let wallet = this.vhQuerySales.getlocalWallets().find(item => item._id == value[1]);\r\n      if(wallet) return `${this.nzOptions.filter(item => item.value == value[0])?.[0]?.label} / ${wallet.name}`;\r\n    }\r\n    else {\r\n      return this.nzOptions.filter(item => item.value == value[0])?.[0]?.label;\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} | <b> {{'Create sales invoice' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\" [ngClass]=\"showBestSelling ? 'show-best-selling':'hide-best-selling'\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Select product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"showModalChangePriceType = true\">\r\n                            {{'Choose selling price' | translate}}</button>\r\n                    </div>\r\n                    <div>\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}</button>\r\n                    </div>\r\n                    <div>\r\n                        <button [disabled]=\"  !invoice_detail.length\"\r\n                            (click)=\"updateServiceTime(); payInvoice(5)\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                            {{'Temporary' | translate}} (F3)</button>\r\n                    </div>\r\n                    <div>\r\n                        <button [disabled]=\"  !invoice_detail.length\" style=\"margin-left: 8px;\"\r\n                            (click)=\"handlePrint(true)\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                            {{'Print' | translate}}</button>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div>\r\n                    {{'Number of products being paid for:' | translate}} <span><b>{{getNumbersProduct() | number:'1.0-2'}}</b></span>\r\n                </div>\r\n                <ng-container>\r\n                    <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail,index as i\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"24\">\r\n                                <ng-container [ngSwitch]=\"item.pmtype\">\r\n                                    <ng-container *ngSwitchCase=\"1\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\">\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"2\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"3\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"4\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"5\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"6\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGift = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <!-- <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" >\r\n                                                \r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                 \r\n                                            </div>\r\n                                            <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\" style=\" margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div> -->\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                        <br>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                    <!-- Ghi chú -->\r\n                                                    <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                      <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                        [placeholder]=\"'Note' | translate\" \r\n                                                        [(ngModel)]=\"data.note\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"7\">\r\n                                        <div nz-row *ngIf=\"item.products_gift.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGiftType7 = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                    <!-- Ghi chú -->\r\n                                                    <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                      <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                        [placeholder]=\"'Note' | translate\" \r\n                                                        [(ngModel)]=\"data.note\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div nz-row>\r\n                                            <div nz-popconfirm\r\n                                                nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                                                (nzOnConfirm)=\"deleteGoods(item)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{item.name}}</p>\r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"item.combos\">\r\n                                                    <span *ngFor=\"let combo of item.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == item.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ' :\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        <ng-container *ngIf=\"combo.id_lotproduct\">\r\n                                                            <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                                (click)=\"openModalChooseLot(combo)\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre>\r\n                                                        </ng-container>\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Dịch vụ thời gian -->\r\n                                                <div *ngIf=\"item.ptype === VhType.SERVICETIME\"\r\n                                                    (click)=\"editServiceTime(item, i)\" \r\n                                                    class=\"bill-detail-area-item-time\">\r\n                                                    <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                                                    <p *ngIf=\"item.time_end_order\"\r\n                                                        [ngStyle]=\"{'color': item.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n                                                        {{'Estimated until' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                                                    </p>\r\n                                                    <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                                                        <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                                                    </ng-container>\r\n                                                </div>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"item.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <!-- Đơn vị -->\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n                                                <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                    <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                                        (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"1\"></nz-option> -->\r\n                                                        <nz-option *ngFor=\"let i of item.units\" [nzLabel]=\"i.unit\"\r\n                                                            [nzValue]=\"i.ratio\"></nz-option>\r\n                                                    </nz-select>\r\n                                                    <!-- {{item.unit}} -->\r\n                                                </ng-container>\r\n                                            </div>\r\n                                            <!-- Số lượng -->\r\n                                            <div nz-col [nzSpan]=\" show_discount_product ? '2' : '4'\"\r\n                                                style=\"text-align: center;\">\r\n                                                <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n                                                <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                    <!-- {{item.quantity}} -->\r\n                                                    <!-- <nz-input-number autofocus style=\"width:80%;\" [nzMax]=\"9999999999\" [nzMin]=\"0.1\"\r\n                                                        [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event )\" id=\"quantity\">\r\n                                                    </nz-input-number> -->\r\n                                                    <input id=\"quantity\" #quantity [step]=\"1\" [min]=\"0\" [max]=\"9999999999\" placeholder=\"Nhập số lượng\"\r\n                                                        [(ngModel)]=\"item.quantity\"  (change)=\"checkQuantityProduct(item,$event.target.value )\" type=\"number\" />\r\n                                                </ng-container>\r\n                                            </div>\r\n                                            <!-- Dịch vụ thời gian không hiện giá -->\r\n                                            <ng-container *ngIf=\"item.ptype === VhType.SERVICETIME\">\r\n                                                <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\" style=\"padding-top: 8px; border-bottom: 0;\"></div>\r\n                                                <div *ngIf=\"show_discount_product\" nz-col nzSpan=\"2\" style=\"text-align: center; align-self: center; padding-top:8px\"></div>\r\n                                            </ng-container>\r\n                                            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                <!-- Giá -->\r\n                                                <div class=\"invoiceDetail-item-quantity text-end \" nz-col nzSpan=\"4\" style=\"padding-top:8px;\"\r\n                                                    (click)=\"openEditUnitPrice(item)\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{item.price_origin > item.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                                                    </del>\r\n                                                </div>\r\n                                                <!-- Giảm giá % sản phẩm -->\r\n                                                <div *ngIf=\"show_discount_product\" nz-col nzSpan=\"2\"  style=\"text-align: center;align-self: center;padding-top:8px\">\r\n                                                    <span style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;\">\r\n                                                        <span nz-icon nzType=\"arrow-down\" nzTheme=\"outline\"  style=\"font-size: 0.7rem;\"></span> {{(item.price_origin > item.price ? ((1 - item.price/item.price_origin)*100) : 0) | number:'1.0-2'}}%\r\n                                                    </span> \r\n                                                </div>\r\n                                            </ng-container>\r\n                                            <!-- Thành tiền -->\r\n                                            <div nz-col nzSpan=\"4\" style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;text-align: end;align-self: center;padding-top:8px\">\r\n                                            <!-- <p class=\"max-width-two-line\"> -->\r\n                                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                                            <!-- </p> -->\r\n                                        </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n            <div nz-row>\r\n                <div>\r\n                    <button nz-button nzType=\"primary\" (click)=\"getPromotions()\">\r\n                        <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Promotions' | translate}}</button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-best-selling\" *ngIf=\"showBestSelling\" style=\"padding: 0 8px;\">\r\n            <app-best-selling (chooseBestSelling)=\"closeSearchProductList($event)\"\r\n                [default_price_type]=\"default_price_type\">\r\n            </app-best-selling>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Sales date' | translate}}</b>\r\n                        <nz-date-picker [nzDisabled]=\"!sales_enable_edit_create_date\" [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless\r\n                            nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer\" nz-row style=\"overflow-y: auto;\">\r\n                <div class=\"sales-bills-customer-title\">\r\n                    <b>{{'Customer information' | translate}}\r\n                    </b>\r\n                    <ion-icon (click)=\"openDrawerAddCustomerOrRetail()\"\r\n                        style=\"color: var(--ion-color-vh-white);padding-right: 5px;\"\r\n                        [src]=\"invoice.retail_name ? 'assets/icon/eye.svg':'assets/icon/add.svg'\">\r\n                    </ion-icon>\r\n\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" style=\"margin: 8px 0;\">\r\n                    <nz-radio-group [(ngModel)]=\"radioValue\" (ngModelChange)=\"changeCustomerType($event)\"\r\n                        nzName=\"radiogroup\">\r\n                        <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n                        <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n                        <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n                    </nz-radio-group>\r\n\r\n                    <!-- <a *ngIf=\"radioValue == 2\" nz-dropdown [nzDropdownMenu]=\"menu\" nzTrigger=\"click\"\r\n                        (click)=\"getTotalEarningPoint()\">\r\n                        {{'View points' | translate}}\r\n                    </a> -->\r\n                    <!-- <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n                        <ul nz-menu nzSelectable>\r\n                            <li nz-menu-item>Điểm tích lũy hiện tại : <b>{{customer.earning_point ?\r\n                                    customer.earning_point : 0 }}</b></li>\r\n                            <li nz-menu-item>Điểm tích lũy cộng thêm : <b> {{earning_point}}</b></li>\r\n                        </ul>\r\n                    </nz-dropdown-menu> -->\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <ng-container *ngIf=\"radioValue == 1 && invoice.retail_name\">\r\n                        {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n                        ''}} {{invoice.retail_address}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"radioValue == 2\">\r\n                        <app-customer [id_customer]=\"invoice.id_customer\"\r\n                            (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-customer>\r\n                        <i (click)=\"openInfoCustomer()\"\r\n                            [ngClass]=\"invoice.id_customer !='id_retail' ? 'active' : 'deactive'\"\r\n                            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"radioValue == 3\">\r\n                        <app-search-customer [id_customer]=\"invoice.id_customer\"\r\n                            (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-search-customer>\r\n                        <i (click)=\"openInfoCustomer()\"\r\n                            [ngClass]=\"invoice.id_customer !='id_retail' ? 'active' : 'deactive'\"\r\n                            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n                    </ng-container>\r\n                </div>\r\n                <!-- <span *ngIf=\"radioValue == 2\">\r\n                    {{'Additional points' | translate}} : {{getTotalEarningPoint(\r\n                    {{'Accumulated points' | translate}} : {{customer.earning_point ? customer.earning_point : 0}}\r\n                </span> -->\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"radioValue == 2 && invoice.id_customer != 'id_retail'\"\r\n                    style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n                    <span>\r\n                        {{'Accumulated points' | translate}} : <b>{{point_validity}}</b>\r\n                    </span>\r\n                    <span>\r\n                        {{'Plus' | translate}} : <b>{{getTotalEarningPoint()}}</b>\r\n                    </span>\r\n                </div>\r\n                <div style=\"align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Delivery' | translate}} <i\r\n                            style=\"color: var(--ion-color-vh-green);cursor: pointer;margin-left: 4px;\" nz-tooltip\r\n                            nzTooltipPlacement=\"top\" [nzTooltipTitle]=\"'Check shipping fee'|translate\"\r\n                            *ngIf=\"invoice.id_delivery\" (click)=\"visibleCheckFees=true\" nz-icon nzType=\"file-search\"\r\n                            nzTheme=\"outline\"></i></b>\r\n                    <app-delivery [id_delivery]=\"invoice.id_delivery\"\r\n                        (closeAndReceiveDelivery)=\"closeAndReceiveDelivery($event)\"></app-delivery>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n\r\n                <!-- Thêm thanh toán khác -->\r\n                <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n                    <b>{{'Payment information' | translate}}</b>\r\n                    <span (click)=\"openModalOtherDiscount()\" style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        {{'Add other payment' |translate}}\r\n                    </span>\r\n                </div>\r\n\r\n                <!-- Cộng tiền -->\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n\r\n                <!-- Giảm giá -->\r\n                <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n                    <div class=\"sales-bills-content-discount\"\r\n                        style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                        <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                        <div>\r\n                            <input id=\"percent-discount-price\" style=\"width: 50px;\" #percentDiscount type=\"number\"\r\n                                max=\"100\" min=\"0\" step=\"1\"\r\n                                (blur)=\"updateServiceTime(); editPercentDiscount(percentDiscount.value)\"\r\n                                [ngModel]=\"percent_discount_bill | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                                nz-input />%\r\n                        </div>\r\n                        <input (blur)=\"updateServiceTime(); editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                            class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                            nz-input />\r\n                    </div>\r\n                </ng-container>\r\n\r\n\r\n                <!-- Chiết khấu -->\r\n                <div *ngIf=\"discount_bill >0\" class=\"sales-bills-content-discount\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div style=\"width: auto;\">{{'Discount' | translate}}\r\n                    </div>\r\n                    <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}}</span>\r\n                </div>\r\n\r\n                <!-- Thanh toán điểm -->\r\n                <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Point payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n                </div>\r\n\r\n                <!-- Thanh toán phiếu -->\r\n                <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Coupon payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n                </div>\r\n\r\n                <!-- Phí -->\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"updateServiceTime(); editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"border_bottom invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n\r\n                <!-- Thuế -->\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"updateServiceTime(); changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"7\" style=\"text-align: end;\">\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n\r\n                <!-- Tổng -->\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n\r\n                <!-- Thanh toán -->\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <div>\r\n                        <b>{{'Pay' | translate}}</b>\r\n                        <ng-container *ngIf=\"product_gift_type7.length && !gotten_gift_type7\">\r\n                            <i style=\"font-size: 1rem;  margin-left: 8px; cursor: pointer;color: var(--ion-color-vh-green)\"\r\n                                nz-icon nzType=\"gift\" nzTheme=\"outline\" (click)=\"showProductGiftType7 = true\"></i>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit(invoice.payment)}}<img (click)=\"showModalEditTotalPay()\"\r\n                            *ngIf=\"invoice.payment_type != 2\" style=\"width: 16px;margin-left:10px\"\r\n                            src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n                </div>\r\n\r\n                <!-- Nợ lại -->\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                    <div>{{'Rest' | translate}}</div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit_symbol(getTotalATax() - invoice.payment)}}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Phương thức thanh toán -->\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <app-tax [payment_type]=\"invoice.payment_type\" [id_wallet]=\"invoice.id_wallet\"\r\n                        [id_customer]=\"invoice.id_customer\"\r\n                        (closeAndGetValuePayment)=\"updateServiceTime(); closeAndGetValuePayment($event)\">\r\n                    </app-tax>\r\n                </div>\r\n\r\n                <!-- Tiền khách đưa -->\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\"\r\n                    style=\"margin-top: 10px;\">\r\n                    <div>{{'cash' | translate}}</div>\r\n                    <input style=\"text-align: end;width: 35%;\" type=\"text\" #cash maxlength=\"15\" nz-input\r\n                        [disabled]=\"invoice.payment_type == 2\"\r\n                        [value]=\"vhAlgorithm.vhcurrencyunit(invoice.cash)\" class=\"customerPay border_bottom\"\r\n                        (keyup)=\"updateServiceTime(); updateCash(cash.value)\" />\r\n                </div>\r\n\r\n                <!-- Tiền thối lại -->\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                    <div>{{'Change' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.cash - invoice.payment > 0 ? this.invoice.cash - invoice.payment : 0)}}</div>\r\n                </div>\r\n\r\n                <!-- Ghi chú -->\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"updateServiceTime(); edit_note()\" nz-input\r\n                        [placeholder]=\"'Enter note...' | translate\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"openModalPaymentInfo(true)\"\r\n                    nz-button class=\"order-and-print\">\r\n                    {{'Pay & Print' | translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"openModalPaymentInfo(false)\"\r\n                    nz-button class=\"order\">\r\n                    {{'Pay' | translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<!-- Search product -->\r\n<app-search-product [searchProductList]=\"searchProductList\" (closeSearchProductList)=\"closeSearchProductList($event)\"\r\n    [default_price_type]=\"default_price_type\">\r\n</app-search-product>\r\n\r\n<!--Modal edit unit price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'New unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\"\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(tempDetail.price)\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" (keyup.enter)=\"handleEditUnit()\"\r\n                    (blur)=\"getValueDiscount(tempDetail.price_origin);\" />\r\n            </div>\r\n\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\">\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'Discount value' | translate}}</div>\r\n            <div nz-col nzSpan=\"10\">\r\n                <input class=\"unit_price_discount\" type=\"text\" maxlength=\"15\" [value]=\"discount_price_bill_detail\"\r\n                    nz-input placeholder=\"{{'Enter unit price' | translate}}\"\r\n                    (blur)=\"caculateDiscountPrice_billDetail()\" />\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                <button style=\"border-radius: 0px !important;width:44px;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount('%');\"\r\n                    [nzType]=\"default_discount_price_type == '%' ? 'primary' : 'default'\">%</button>\r\n                <button style=\"border-radius: 0px !important;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount(symbol);\"\r\n                    [nzType]=\"default_discount_price_type == symbol ? 'primary' : 'default'\">{{symbol}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!--Modal edit pay-->\r\n<nz-modal [(nzVisible)]=\"edit_pay\" [nzFooter]=\"modalFooterEditPay\" nzTitle=\"{{'Edit' | translate}}\"\r\n    (nzOnCancel)=\"updateServiceTime(); handleCancelEditPay()\" (nzOnOk)=\"updateServiceTime(); handleEditPay()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Pay' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice.payment)\" class=\"edit-pay\" type=\"text\"\r\n                    maxlength=\"15\" nz-input />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditPay>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"updateServiceTime(); handleCancelEditPay()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"updateServiceTime(); handleEditPay()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal [(nzVisible)]=\"showModalOtherDiscount\" nzTitle=\"{{'Other payment' | translate}}\" nzWidth=\"50vw\"\r\n    (nzOnCancel)=\"updateServiceTime(); showModalOtherDiscount = false\" nzCancelText=\"\" (nzOnOk)=\"updateServiceTime(); handleOkOtherDiscount()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{\"Coupon\" | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n                <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\"\r\n                    (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n                <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                    (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\"></div>\r\n            <div nz-col nzSpan=\"18\">\r\n                <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                    (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <div nz-row class=\"center-all-content mt-8\">\r\n                <div nz-col nzSpan=\"6\">\r\n                    {{\"Accumulated points\" | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                        nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                        (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                    {{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"mt-8\">\r\n                <div nz-col nzSpan=\"14\">\r\n                    <label>{{\"Point conversion rate\" | translate}}:\r\n                        {{customer_class.payment.points}} Điểm =\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                    {{'Current accumulated points' | translate}} : {{point_validity }}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div nz-row class=\"mt-8 beetween-all-content\">\r\n            <b>{{'Total discount' | translate}}</b>\r\n            <b>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points + invoice.payment_coupons)}}</b>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGift\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGift = false\" (nzOnOk)=\"showProductGift = false;getEarningpointPromotion()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"invoice_detail\" [nzShowPagination]=\"false\"\r\n            [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.pmtype == 6\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                                <span *ngFor=\"let data of item.products\">\r\n                                    {{data.name}}({{data.unit}}) x{{data.quantity}} <br>\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of gifted products' | translate }} :</b>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n\r\n\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                            [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                    <!-- Ghi chú -->\r\n                                    <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                      <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                        [placeholder]=\"'Note' | translate\" \r\n                                        [(ngModel)]=\"data.note\" />\r\n                                    </div>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGiftType7\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGiftType7 = false\" (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.products_gift\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n            style=\"width:100%;padding: 8px 0;\">\r\n            <ng-container *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-row *ngIf=\"!item.hidden\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                            <div nz-row>\r\n                                <div nz-col nzSpan=\"6\">\r\n                                    {{item.lot_number}}\r\n                                </div>\r\n    \r\n                                <div nz-col nzSpan=\"6\">\r\n                                    NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                                </div>\r\n                                <div nz-col nzSpan=\"6\">\r\n                                    HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                                </div>\r\n                                <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                                    {{'Stock' | translate}}:\r\n                                    <span\r\n                                        style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/tempDetail.ratio\r\n                                        | number : '1.0-2'}}</span>\r\n                                </div>\r\n                            </div>\r\n    \r\n                        </label>\r\n                    </div>\r\n    \r\n                </div>\r\n            </ng-container>\r\n            \r\n           \r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD cho combo-->\r\n<nz-modal nzWidth=\"70vw\" *ngIf=\"show_modal_select_lots_combo\" [nzFooter]=\"modalFooterEditUnitPrice3\"\r\n    [(nzVisible)]=\"show_modal_select_lots_combo\"\r\n    nzTitle=\"{{'Select lot number for products in combo' | translate}}: {{tempDetail.name}}\"\r\n    (nzOnCancel)=\"show_modal_select_lots_combo = false\" (nzOnOk)=\"handleChooseLotCombo()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"tempDetail.combos\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\">{{\"Product name\" | translate}}</th>\r\n                    <th nzWidth=\"30%\">{{'Lot number' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Unit' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Quantity' | translate}}</th>\r\n                    <th nzWidth=\"20%\" nzAlign=\"right\">{{'Unit price' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let data of basicTable.data\">\r\n                    <ng-container *ngIf=\"data.lots\">\r\n\r\n                        <tr>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\" style=\"width: 100%;\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date: 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_select_lots_combo = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLotCombo()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- --------------visible drawer info customer----------- -->\r\n<app-customer-profile *ngIf=\"visibleInfoCustomer\" [visibleInfoCustomer]=\"visibleInfoCustomer\" [customer]=\"customer\"\r\n    (closeInfoCustomer)=\"closeInfoCustomer($event)\"></app-customer-profile>\r\n\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCusomer\" [showDrawerAddCusomer]=\"showDrawerAddCusomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\"></app-add-customer>\r\n\r\n<!-- đổi giá bán -->\r\n<app-change-price-type *ngIf=\"showModalChangePriceType\" [showModalChangePriceType]=\"showModalChangePriceType\"\r\n    (changePriceType)=\"changePriceType($event)\" [default_price_type]=\"default_price_type\"></app-change-price-type>\r\n\r\n<app-check-fees *ngIf=\"visibleCheckFees\" [visibleCheckFees]='visibleCheckFees' [id_delivery]=\"invoice.id_delivery\"\r\n    (hideModalCheckFees)=\"visibleCheckFees = $event\" [id_customer]=\"invoice.id_customer\">\r\n</app-check-fees>\r\n<!-- --------------------add retail---------------------- -->\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n    [retail_name]=\"invoice.retail_name\" [retail_phone]=\"invoice.retail_phone\"\r\n    [retail_address]=\"invoice.retail_address\" (closeAddCustomer)=\"closeAddCustomer($event)\"></app-retail-info>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA DỊCH VỤ THỜI GIAN ------------------------------------------------ -->\r\n<nz-modal\r\n  *ngIf=\"selectedServiceTime\"\r\n  (nzOnCancel)=\"saveServiceTime()\"\r\n  [(nzVisible)]=\"isShowModalEditServiceTime\"\r\n  [nzTitle]=\"selectedServiceTime.name\"\r\n  [nzFooter]=\"null\"\r\n  nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body modal-edit\" style=\"max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n        <!-- Tiêu đề -->\r\n        <div class=\"flex-between\" style=\"margin-bottom: 8px; font-size: 0.95rem;\">\r\n          <b>{{'Used time' | translate}}</b>\r\n          <b>{{'Drafted' | translate}}</b>\r\n        </div>\r\n  \r\n        <div>\r\n          <!-- First time -->\r\n          <div *ngIf=\"selectedServiceTime.units[0].is_first_time\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'First time block' | translate}} - {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}} {{'first' | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}} {{'will be rounded up to' | translate}} {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{selectedServiceTime.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{selectedServiceTime?.serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.first_time?.price)}}</p>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- Special time -->\r\n          <div *ngIf=\"selectedServiceTime.units[0].is_special_times && selectedServiceTime?.serviceTimePrice?.special_times?.length\" style=\"margin-bottom: 1rem;\">\r\n            <span>{{'Special time' | translate}}</span>\r\n            <div *ngFor=\"let specialTime of selectedServiceTime?.serviceTimePrice?.special_times\" class=\"flex-between\">\r\n              <p style=\"margin-bottom: 0\">{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, selectedServiceTime.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}})</p>\r\n              <p style=\"margin-bottom: 0\">{{vhAlgorithm.vhcurrencyunit(specialTime.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- Merge block -->\r\n          <div *ngIf=\"selectedServiceTime.units[0].is_merge_block\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime?.serviceTimePrice?.merge_block?.price)}} / 1 block</span>\r\n              <p style=\"margin-top: 0.25rem;\">{{selectedServiceTime?.serviceTimePrice?.merge_block?.count}} block = {{selectedServiceTime?.serviceTimePrice?.merge_block?.duration}} {{selectedServiceTime.units[0].unit | translate}} (1 block = {{selectedServiceTime?.serviceTimePrice?.merge_block?.time_per_block}} {{selectedServiceTime.units[0].unit | translate}})</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.merge_block?.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- Normal time -->\r\n          <div *ngIf=\"selectedServiceTime?.serviceTimePrice?.time_used\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Regular selling time' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime.units[0].price)}} / {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{productService.generateTimeFromValue(selectedServiceTime?.serviceTimePrice?.time_used, selectedServiceTime?.serviceTimePrice?.unit)}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.price)}}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Thành tiền -->\r\n        <div class=\"flex-between\">\r\n          <p>{{'From' | translate}} <b>{{selectedServiceTime.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> {{'to' | translate}} <b>{{selectedServiceTime?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> <br> <b>({{productService.generateTimeUseString(selectedServiceTime.time_start_order, selectedServiceTime?.time_end_order)}})</b></p>\r\n          <b style=\"font-size: 1rem;\">{{'Total' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime?.serviceTimePrice?.total_price)}}</b>\r\n        </div>\r\n  \r\n        <div class=\"flex-between\" style=\"margin: 16px 0;\">\r\n          <!-- Tạm ngưng / Tiếp tục tính giờ -->\r\n          <i (click)=\"pauseTime(!selectedServiceTime?.is_paused)\" style=\"text-align: right; color: var(--ion-color-vh-orange); cursor: pointer;\">{{(selectedServiceTime?.is_paused ? 'Continue timing' : 'Pause timing') | translate}}</i>\r\n          <hr style=\"background-color: #f0f0f0; flex: auto;\">\r\n          <!-- Chỉnh sửa thời gian sử dụng -->\r\n          <i (click)=\"handleOpenEditUsedTime()\" style=\"text-align: right; color: var(--ion-color-vh-green); cursor: pointer;\">{{'Edit usage time'| translate}}</i>\r\n        </div>\r\n  \r\n        <!-- Ghi chú -->\r\n        <div class=\"order-div-note1\" nz-col nzSpan=\"24\">\r\n          <b>{{'Note' | translate}}</b>\r\n          <input class=\"order-note\" nz-input\r\n            [(ngModel)]=\"selectedServiceTime.note\"\r\n            [placeholder]=\"'Enter note' | translate\" />\r\n        </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n<nz-modal\r\n  [(nzVisible)]=\"isShowModalEditUsedTime\"\r\n  (nzOnCancel)=\"isShowModalEditUsedTime = false\"\r\n  (nzOnOk)=\"handleUpdateUsedTime()\"\r\n  [nzTitle]=\"'Edit used time' | translate\"\r\n  [nzFooter]=\"modalFooterEditUsedTime\" >\r\n\r\n  <ng-container *nzModalContent>\r\n    <div nz-row [nzGutter]=\"16\">\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'_Started at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          [nzAllowClear]=\"false\"\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'Ended at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          nzAllowClear\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 32px\">\r\n      <p style=\"margin-bottom: 4px\"><b>*{{'_Note' | translate}}:</b></p>\r\n      <p style=\"margin-bottom: 0px\">{{'The start time must be less than or equal to the current time.' | translate}}</p>\r\n      <p style=\"margin-bottom: 0px\">{{'The end time must be greater than the start time.' | translate}}</p>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterEditUsedTime>\r\n    <button (click)=\"isShowModalEditUsedTime = false\"\r\n      nz-button class=\"nz-hover-border\" nzType=\"default\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\">{{'Cancel' |translate}}</button>\r\n    <button [disabled]=\"!tempStartTime\"\r\n      (click)=\"handleUpdateUsedTime()\"\r\n      nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\">{{'Ok' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------- MODAL HIỂN THỊ THÔNG TIN THANH TOÁN ----------------------------------------------- -->\r\n<nz-modal \r\n    [nzMaskClosable]=\"false\" \r\n    [nzFooter]=\"modalFooterPrintKitchen\"\r\n    [(nzVisible)]=\"isShowModalPaymentInfo\"\r\n    (nzOnCancel)=\"isShowModalPaymentInfo = false\" \r\n    (nzOnOk)=\"payInvoice(1, willPrintInvoice)\"\r\n    [nzTitle]=\"'Payment information' | translate\" >\r\n    <ng-container *nzModalContent>\r\n        <div class=\"sales-bills-content\" style=\"overflow: auto; box-shadow: none; display: flex; flex-direction: column; gap: 10px;\">\r\n            <!-- Cộng tiền -->\r\n            <div nz-col nzSpan=\"24\">\r\n                <div>{{'SubTotal' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n    \r\n            <!-- Giảm giá -->\r\n            <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n                <div style=\"display: flex;justify-content: space-between; align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <!-- % -->\r\n                    <span>{{percent_discount_bill | number:'1.0-2'}} %</span>\r\n                    <!-- Value -->\r\n                    <span class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</span>\r\n                </div>\r\n            </ng-container>\r\n    \r\n            <!-- Chiết khấu -->\r\n            <div *ngIf=\"discount_bill\" style=\"display: flex;justify-content: space-between; align-items: center;\"\r\n                nz-col nzSpan=\"24\">\r\n                <div>{{'Discount' | translate}}\r\n                </div>\r\n                <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}} </span>\r\n            </div>\r\n    \r\n            <!-- Thanh toán điển -->\r\n            <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Point payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n            </div>\r\n    \r\n            <!-- Thanh toán phiếu -->\r\n            <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Coupon payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n            </div>\r\n    \r\n            <!-- Phí -->\r\n            <div nz-row *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                <div nz-col nzSpan=\"12\">{{'Fee' | translate}}</div>\r\n                <span nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</span>\r\n            </div>\r\n    \r\n            <!-- Thuế -->\r\n            <div class=\"order-bill-contain-bill-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                <div>{{'Tax' | translate}}</div>\r\n                <div *ngIf=\"data\">\r\n                    <span>{{data.tax}}%</span>\r\n                </div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n            </div>\r\n    \r\n            <!-- Tổng -->\r\n            <div class=\"order-bill-contain-bill-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Total' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n            </div>\r\n    \r\n            <!-- Thanh toán -->\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <b>{{'Pay' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" style=\"text-align: end;\">\r\n                    <b class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoice.payment)}}</b>\r\n                </div>\r\n            </div>\r\n    \r\n            <!-- Nợ lại -->\r\n            <div class=\"order-bill-contain-bill-rest\" nz-col nzSpan=\"24\"\r\n                *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                <div>{{'Rest' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit_symbol(getTotalATax() - invoice.payment)}}</div>\r\n            </div>\r\n    \r\n            <!-- Phương thức thanh toán -->\r\n            <div nz-col nzSpan=\"24\">\r\n                <div>{{'Payment method' | translate}}</div>\r\n                <span nz-col nzSpan=\"12\" class=\"text-end payment-price\">{{getPaymentTypeLabel(!invoice.id_wallet || invoice.id_wallet === 'id_cash' ? [invoice.payment_type] : [invoice.payment_type, invoice.id_wallet])}}</span>\r\n            </div>\r\n    \r\n            <!-- Tiền khách đưa -->\r\n            <div nz-row *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                <div nz-col nzSpan=\"12\">{{'cash' | translate}}</div>\r\n                <div nz-col nzSpan=\"12\" style=\"text-align: end;\" id=\"cash\">\r\n                    <span class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoice.cash)}}</span>\r\n                </div>\r\n            </div>\r\n    \r\n            <!-- Tiền thối lại -->\r\n            <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                <div>{{'Change' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.cash - invoice.payment > 0 ? this.invoice.cash - invoice.payment : 0)}}</div>\r\n            </div>\r\n    \r\n            <!-- Ghi chú -->\r\n            <div nz-col nzSpan=\"24\" id=\"note\" *ngIf=\"vhAuth.localStorageGET('show_note')\"\r\n                style=\"padding-top: 16px;\">\r\n                <span class=\"payment-price\">{{invoice_note}}</span>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterPrintKitchen>\r\n        <div class=\"order-bill-btn\">\r\n            <button [disabled]=\"!invoice_detail.length\" \r\n                (click)=\"payInvoice(1, willPrintInvoice)\" nz-button class=\"order-and-print\">\r\n                {{'Complete' | translate}}\r\n            </button>\r\n        </div>\r\n    </ng-template>\r\n</nz-modal>","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales, VhQuery, VhEinvoice } from 'ionic-vhframeworks';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoice, VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { VhSaleInvoiceDetailEdit, VhSaleInvoiceEdit } from '../sales-desktop-interface';\r\nimport { ProductService } from 'src/app/sales/services/product.service';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'sales-desktop-bill-type1-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent {\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  @Input() url = '';\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail: VhSaleInvoiceDetailEdit[]\r\n  public invoice: VhSaleInvoiceEdit\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  show_discount_product = this.vhAuth.localStorageGET(\"show_discount_product\");\r\n  /** Có phải được router đến từ Invoice hay không */\r\n  get isFromInvoice(): boolean {\r\n    return !this.dataRestore || !this.dataRestore.shop_info;\r\n  }\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modal: NzModalService,\r\n    private fncService: FunctionService,\r\n    private vhEinvoice:VhEinvoice,\r\n    public productService: ProductService,\r\n  ) {\r\n    this.getDataInvoice(this.router.getCurrentNavigation().extras.state.id)\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * gán bill và bill-detail get được vào biến và get các thông tin của nv, khách hàng, phương thức thanh toán\r\n   * @example this.init(bill, bill-deails)\r\n   */\r\n  init(invoice: VhSaleInvoiceEdit = null, invoiceDetail: VhSaleInvoiceDetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if(invoice.bill_type == 5) {\r\n      this.updateServiceTime();\r\n    }\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer),\r\n        paymentName: this.setPaymentName(this.invoice.payment_type)\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  /**\r\n   * tính cộng tiền hóa đơn\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      else if (i.products) {\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0);\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu bill từ DB\r\n   * @param id : nhận từ state truyền qua\r\n   * @example this.getDataInvoice('DHIWHNXDIWODUHIWDHOWID')\r\n   */\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * xóa hóa đơn lên DB\r\n   * @example this.deleteInvoice()\r\n   */\r\n  deleteInvoice() {\r\n    this.vhQuerySales.getValidityDate(this.invoice.date).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n          this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n            .then(() => {\r\n              this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n                this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n                  if(this.invoice.cqt_status != 1){\r\n                    // this.vhEinvoice.deleteInvoice_byMinvoice\r\n                  }\r\n                  if (this.invoice.earning_points_bill) this.vhQuerySales.updateCustomer_byEarnedPoints(this.invoice.id_customer,  this.invoice.earning_points_bill*(-1))\r\n                  this.vhComponent.hideLoading(0).then(() => {\r\n                    this.dataRestore.invoice = this.dataRestore.invoice.filter(e => e._id != this.invoice._id)\r\n                    this.vhComponent.showToast(2000,\r\n                      `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                    this.router.navigate([this.url], { state: { isSync: true , ...this.dataRestore} })\r\n                  })\r\n                })\r\n              })\r\n            }, () => { })\r\n        } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n\r\n  }\r\n  /**\r\n   * trả về tên phương thức thanh toán\r\n   * @param type \r\n   * @returns string\r\n   * @example this.setPaymentName(1)\r\n   */\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.id_wallet).name\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit của sản phẩm theo ratio truyền vào\r\n   * @param units \r\n   * @param ratio \r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([object], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  /**\r\n   * trả về chuỗi thông tin lô theo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let lot = this.getLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n   * trả về chuỗi thông tin địa chỉ của customer\r\n   * @param partner \r\n   * @returns string\r\n   * @example let addr = this.renderAddress(customer_info)\r\n   */\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  /**\r\n   * router trang cập nhật hóa đơn\r\n   * @example this.goToCart()\r\n   */\r\n  public goToCart() {\r\n    this.vhQuerySales.getValidityDate(this.invoice.date).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        if ((this.vhAuth.checkMyPermission(\"sell_enable_edit_bill\") && this.invoice.bill_type == 1) || (this.vhAuth.checkMyPermission(\"sell_enable_edit_bill_temporary\") && this.invoice.bill_type == 5))\r\n          this.router.navigate([this.url + '/edit-sales'], { state: { invoiceDetail: this.invoice_detail, invoice: this.invoice, dataRestore: this.dataRestore } })\r\n        else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer) resolve(printer)\r\n      else rejects(false)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * kiểm tra thông tin dữ liệu trang in và mở component in\r\n   * @example this.printInvoice()\r\n   */\r\n  printInvoice() {\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer.print_size_default), { printer: { ...printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)], name: \"Sales\" }, invoice_detail: this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer.print_size_default}`)\r\n    }, (err) => {\r\n      this.modal.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => {}\r\n      });\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n  /**\r\n   * quay về trang danh sách hóa đơn\r\n   * @example this.goBack()\r\n   */\r\n  goBack() {\r\n    let url = this.url;\r\n    if(!this.isFromInvoice) {\r\n      // Xử lý router từ Thương mại điện tử\r\n      const fromType = this.dataRestore?.shop_info?.from_type;\r\n      if (fromType?.includes('invoice_issued')) {\r\n        const platform = fromType.replace('_invoice_issued', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-issued`;\r\n      } \r\n      else if (fromType?.includes('invoice_returned')) {\r\n        const platform = fromType.replace('_invoice_returned', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-returned`;\r\n      }\r\n    }\r\n    this.router.navigate([url], { state: { isSync: true, ...this.dataRestore } });\r\n  }\r\n  ngAfterViewChecked() {\r\n    // tính lại chiều cao của table để scroll\r\n    if (document.getElementById('sales-invoice-detail-today') && document.querySelector(\".sales-cart-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('sales-invoice-detail-today').clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoice_detail)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoice_detail, this.invoice.price_type);\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại tất cả thông số ở Bill.\r\n   *\r\n   * Tính lại subTotal, chiết khấu, discount, discount_bill, payment_points, payment_coupons, fee, tax, Điểm tích lũy cộng thêm\r\n   */\r\n  updateBillCalculations() {\r\n    // subTotal\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      else if (i.products) {\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0);\r\n    }\r\n    this.subTotal = subTotal;\r\n\r\n    // total\r\n    this.invoice.total = Math.max(0, this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee);\r\n\r\n    // tax\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n    \r\n    // payment\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0;\r\n    } \r\n    else {\r\n      this.invoice.payment = this.invoice.total + this.taxValue;\r\n    }\r\n\r\n    // cash\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0;\r\n    else this.invoice.cash = 0;\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} \r\n  </div>\r\n  <nz-layout id=\"sales-invoice-detail-today\" *ngIf=\"invoice\">\r\n    <div class=\"sales\">\r\n      <div class=\"sales-cart\">\r\n        <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n          <div nz-col nzSpan=\"12\" class=\"title\">\r\n            <b>{{'Sales order' | translate}}</b>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <button (click)=\"goToCart()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n              nzType=\"default\">\r\n              <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n              {{'Edit' | translate}}\r\n            </button>\r\n            <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n              nzType=\"default\">\r\n              <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n              {{'Print' | translate}}\r\n            </button>\r\n            <button   (click)=\"deleteInvoice()\"\r\n              class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n              <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n              {{'Delete' | translate}}\r\n            </button>\r\n          </div>\r\n          <!-- <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n            <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n              class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n              <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n              {{'Delete' | translate}}\r\n            </button>\r\n          </div> -->\r\n        </div>\r\n        <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n          <div class=\"invoiceDetail-item\">\r\n            <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable\r\n              nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n              <thead>\r\n                <tr>\r\n                  <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\"  *ngIf=\"show_discount_product\" nzAlign='right'><b>{{'Discount value' | translate}}</b></th>\r\n                  <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <ng-container *ngFor=\"let item of rowSelectionTable.data\" >\r\n                  <ng-container *ngIf=\"item.id_promotion\">\r\n                    <tr style=\"cursor: pointer;\">\r\n                      <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                    </tr>\r\n                    <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products\">\r\n                      <td><div>{{data.name}}</div> <br>\r\n                        <ng-container *ngIf=\"data.lots\">\r\n                          <pre>{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> <br>\r\n                        </ng-container>\r\n                        <ng-container *ngIf=\"data.combos\">\r\n                          <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">\r\n                            {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                            <ng-container *ngIf=\"combo.lots\">\r\n                              <pre style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                            </ng-container>, \r\n                          </span>\r\n                        </ng-container>\r\n                      </td>\r\n                      <td nzAlign='center'>\r\n                        {{getUnit(data.units, data.ratio)}}\r\n                      </td>\r\n                      <td nzAlign='center'>{{data.quantity}}</td>\r\n                      <td nzAlign='right'>\r\n                        {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                        <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                          {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                        </del>\r\n                      </td>\r\n                      <td nzAlign='center'  *ngIf=\"show_discount_product\"></td>\r\n                      <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                    </tr>\r\n                    <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products_gift\">\r\n                      <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                        <ng-container *ngIf=\"data.lots\">\r\n                          {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                        </ng-container>\r\n                        <ng-container *ngIf=\"data.combos\">\r\n                          <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">{{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}) \r\n                            <ng-container *ngIf=\"combo.lots\">\r\n                            <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                          </ng-container>,  </span>\r\n                        </ng-container>\r\n                      </td>\r\n                      <td nzAlign='center'>\r\n                        {{getUnit(data.units, data.ratio)}}\r\n                      </td>\r\n                      <td nzAlign='center'>{{data.quantity}}</td>\r\n                      <td nzAlign='right'>\r\n                        {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                        <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                          {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                        </del>\r\n                      </td>\r\n                      <td nzAlign='center'  *ngIf=\"show_discount_product\"></td>\r\n                      <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                    </tr>\r\n                  </ng-container>\r\n                  \r\n                  <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                    <td><div>{{item.name}}</div>\r\n                      <ng-container *ngIf=\"item.id_lotproduct\">\r\n                        <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                      </ng-container>\r\n                       \r\n                      <ng-container *ngIf=\"item.combos\">\r\n                        <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                          {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                          <ng-container *ngIf=\"combo.lots\">\r\n                            <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                          </ng-container>,  </span>\r\n                      </ng-container>\r\n\r\n                      <!-- Hàng thời gian -->\r\n                      <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                          <div class=\"delete-btn\"></div>\r\n                          <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                          <p *ngIf=\"item.time_end_order\">\r\n                            {{(item.is_paused ? '_Ended at' : 'Estimated until') | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                          </p>\r\n                          <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                            <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                          </ng-container>\r\n                      </div>\r\n                    </td>\r\n                    <td nzAlign='center'>\r\n                      <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{getUnit(item.units, item.ratio)}}</ng-container>\r\n                    </td>\r\n                    <td nzAlign='center'><ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{item.quantity}}</ng-container></td>\r\n                    <td nzAlign='right'>\r\n                      <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                        {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                        <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                          {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                        </del>\r\n                      </ng-container>\r\n                    </td>\r\n                    <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(item.price_origin > item.price ? ((1 - item.price/item.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b></td>\r\n                  </tr>\r\n                </ng-container>\r\n                \r\n                \r\n              </tbody>\r\n            </nz-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills\" [ngClass]=\"invoice.bill_type == 5 ? 'continue-sell' : 'not-continue-sell'\">\r\n        <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n          <div>\r\n            <b>{{'Invoice code' | translate}}</b>\r\n            <div> {{invoice.bill_code}}</div>\r\n          </div>\r\n          <div>\r\n            <b>{{'Salesman' | translate}}</b>\r\n            <div>{{invoiceInfo.employee.name}}</div>\r\n          </div>\r\n          <div>\r\n            <b>{{'Sales date' | translate}}</b>\r\n            <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n          </div>\r\n          <div>\r\n            <b>{{'Delivery' | translate}}</b>\r\n            <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n          <b>{{'Customer information' | translate}}</b>\r\n          <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n            {{invoiceInfo.partner.name | translate}}\r\n          </div>\r\n          <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n            {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n          </div>\r\n          <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n            {{renderAddress(invoiceInfo.partner)}}\r\n          </div>\r\n          <div *ngIf=\"invoiceInfo.partner._id == 'id_retail' && invoice.retail_name\" nz-col nzSpan=\"24\">\r\n            {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n            ''}} {{invoice.retail_address}}\r\n          </div>\r\n        </div>\r\n        <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n          <b>{{'Payment information' | translate}}</b>\r\n          <!-- <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_discount_invoice') && invoice.getDiscountInvoice() >= 0\">\r\n            <div>{{'Discount' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountInvoice())}}</div>\r\n        </div> -->\r\n          <div nz-col nzSpan=\"24\">\r\n            <span>{{'SubTotal' | translate}}</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n          </div>\r\n          <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.discount_bill\">\r\n            <span>{{'Discount' | translate}}\r\n            </span>\r\n  \r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount_bill)}}</div>\r\n          </div>\r\n          <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n            <span>{{'Discount value' | translate}}\r\n            </span>\r\n            <span>{{(invoice.discount/subTotal)*100 || 0 | number :'1.0-2'}}%</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n          </div>\r\n           \r\n          <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n            <div>{{'Point payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n          </div>\r\n          <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n            <div>{{'Coupon payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n          </div>\r\n  \r\n          <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n            <span>{{'Fee' | translate}}</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n          </div>\r\n          <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n            <span>{{'Tax' | translate}}</span>\r\n            <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n            <div>\r\n              {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n          </div>\r\n          <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n            <span>{{'Total' | translate}}</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n\r\n        </div>\r\n        <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n            <span>{{'Pay' | translate}}</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.payment)}}</div>\r\n\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n            <span>{{'Rest' | translate}}</span>\r\n            <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.total * (1+invoice.tax / 100) -\r\n                invoice.payment)}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n            <span>{{'Payment method' | translate}}</span>\r\n            <div>{{setPaymentName(this.invoice.payment_type)}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n            <span>{{'Note' | translate}}</span>\r\n            <pre>{{invoice.note}}</pre>\r\n        </div>\r\n        </div>\r\n        <div *ngIf=\"invoice.bill_type == 5\" nz-row class=\"sales-bills-button\">\r\n          <div nz-col nzSpan=\"24\">\r\n            <button nz-button class=\"button payment-print\" (click)=\"goToCart()\">{{'Continue to sell...'\r\n              |translate}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nz-layout>","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, HostListener, Input } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales, VhEinvoice } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhSaleDesktopInvoiceDetailCombo, VhSaleInvoiceDetailAdd, VhSaleInvoiceDetailEdit, VhSaleInvoiceEdit } from '../sales-desktop-interface';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { ProductService } from 'src/app/sales/services/product.service';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { BillService } from 'src/app/sales/services/bill.service';\r\n\r\n@Component({\r\n  selector: 'sales-desktop-bill-type1-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n  @Input() url = '';\r\n  dataRestore: any; // biến nhận state truyền qua\r\n  invoice: VhSaleInvoiceEdit = this.router.getCurrentNavigation().extras.state.invoice\r\n  invoice_detail: VhSaleInvoiceDetailEdit[] = this.router.getCurrentNavigation().extras.state.invoiceDetail\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  public showBestSelling: any = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  customer: any;\r\n  checkPrinter: boolean = false;\r\n  closerBrower: any;\r\n  default_price_type: number\r\n  showModalChangePriceType: boolean = false;\r\n  // auto_select_lot : boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  warning_lot_expried: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried\r\n  discount_bill: number = 0;\r\n  percent_discount_bill: number = 0;\r\n  is_discount_bill: boolean = false;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  customer_group: any = [];\r\n  showModalOtherDiscount: boolean = false;\r\n  id_branch = this.vhQuerySales.getDefaultBranch()._id\r\n  show_modal_select_lots_combo = false;\r\n  symbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text;\r\n  default_discount_price_type = this.vhAuth.localStorageGET(\"default_discount_price_type\") ? this.vhAuth.localStorageGET(\"default_discount_price_type\").value : '%';\r\n  discount_price_bill_detail = 0\r\n  show_discount_product = this.vhAuth.localStorageGET(\"show_discount_product\");\r\n  formatterPercent = (value: number): string => `${value} %`;\r\n  parserPercent = (value: string): string => value.replace('%', '').toString().replace(' ', '');\r\n  sales_enable_edit_create_date = true\r\n  /** Có phải được router đến từ Invoice hay không */\r\n  get isFromInvoice(): boolean {\r\n    return !this.dataRestore || !this.dataRestore.shop_info;\r\n  }\r\n  public VhType = VhType;\r\n\r\n\r\n  \r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private nzModalService: NzModalService,\r\n    private vhQuery: VhQuery,\r\n    private fncService: FunctionService,\r\n    private plaform: Platform,\r\n    private vhEinvoice: VhEinvoice,\r\n    public productService: ProductService,\r\n    private billService: BillService,\r\n  ) {\r\n    this.dataRestore = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n    // Nếu không là từ Invoice thì khởi tạo các trường thiếu\r\n    if(!this.isFromInvoice) {\r\n      this.invoice.cash = this.invoice.cash ?? 0;\r\n      this.invoice.payment_points = this.invoice.payment_points ?? 0;\r\n      this.invoice.payment_coupons = this.invoice.payment_coupons ?? 0;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // check quyền chỉnh sửa ngày tạo đơn\r\n    this.sales_enable_edit_create_date = this.vhAuth.getUser().owner == 'boss' ? true : this.vhAuth.checkLocalMyPermissionName(\"sales_enable_edit_create_date\")\r\n\r\n    if (this.plaform.is('electron')) {\r\n      this.vhQuerySales.connectDisplayLEDScreens()\r\n    }\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n    this.radioValue = this.invoice.id_customer == 'id_retail' ? 1 : 2\r\n    this.pickerTime = new Date(this.invoice.date)\r\n\r\n    this.default_price_type = this.invoice.price_type\r\n    //tính tổng tiền\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n      }\r\n      else if (i.products) {\r\n\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n    this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0;\r\n\r\n    this.updateServiceTime();\r\n\r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice, this.invoice_detail\r\n      )\r\n    }\r\n  }\r\n\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n    if (this.plaform.is('electron')) this.vhQuerySales.disconnectDisplayLEDScreens()\r\n  }\r\n  /**\r\n   * lắng nghe sk nhấn f1 f2 f3 f4 trên bàn phím\r\n   * @example \r\n   */\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n          case 114: \r\n            this.updateServiceTime();\r\n            this.payInvoice(5)\r\n            break;\r\n          case 112:\r\n            this.openModalPaymentInfo(false);\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.openModalPaymentInfo(true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // //sự kiện f5, close tab...\r\n    // this.closerBrower = (event: BeforeUnloadEvent) => {\r\n    //   (event || window.event).returnValue = 'Changes you made may not be saved';\r\n    //   return 'Changes you made may not be saved';\r\n    // }\r\n    // window.addEventListener('beforeunload', this.closerBrower)\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    let tax = this.listTax.find(item => item.value == this.invoice.tax);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n    }\r\n\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n    if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n\r\n    // get các loại chương trình tích điểm\r\n    Promise.all([\r\n      this.vhQuerySales.getEarningPointsBills(),\r\n      this.vhQuerySales.getEarningPointsProducts(),\r\n    ])\r\n      .then(([earning_point_bills, earning_points_products]: any) => {\r\n        // this.list_earning_point_bills = this.vhQuerySales.getLocalAppSettingNameStation('sales_program').enable_sales_method_all_branch ? earning_point_bills.filter( item => item.id_branch == this.vhQuerySales.getDefaultBranch()._id) : earning_point_bills;\r\n        // this.list_earning_points_products =  this.vhQuerySales.getLocalAppSettingNameStation('sales_program').enable_sales_method_all_branch ? earning_points_products.filter( item => item.id_branch == this.vhQuerySales.getDefaultBranch()._id) : earning_points_products;\r\n        this.list_earning_point_bills = earning_point_bills\r\n        this.list_earning_points_products = earning_points_products\r\n        this.customer_group = this.vhQuerySales.getlocalCustomerClasss()\r\n        this.getClassAndProgram(this.invoice.id_customer);\r\n      })\r\n\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.discount_price = document.querySelector(\".discount-price\") ? this.vhAlgorithm.vhnumeral(\".discount-price\") : 0;\r\n      this.invoice_fee = document.querySelector(\".invoice-fee\") ? this.vhAlgorithm.vhnumeral(\".invoice-fee\") : 0\r\n    })\r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n  }\r\n  ngAfterViewChecked() {\r\n    // if (document.querySelector(\".ant-tabs-nav\") && document.querySelector(\".sales-best-selling\")) {\r\n    //   let height = document.querySelector(\".sales-best-selling\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - 20 + \"px\";\r\n    //   if (document.getElementById(\"carousel-product\")) document.getElementById(\"carousel-product\").style.height = height;\r\n    //   if (document.getElementById(\"carousel-service\")) document.getElementById(\"carousel-service\").style.height = height;\r\n    // }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (this.program_bill && this.subTotal > this.program_bill.bill_total_minimum) {\r\n      let subTotal = this.subTotal;\r\n      if (!this.program_bill.include_promotion_product) { // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion()\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.subTotal;\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  /**\r\n  * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n  * return : number\r\n  */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoice_detail.filter(item => !item.id_promotion).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoice_detail\r\n      .filter(item => item.price_origin == item.price && products_of_program_earnig_product.find(i => i == item.id_product || i == item.id_subproduct))\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(this.program_product.products)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = products.filter(item => item.price_origin == item.price && this.program_product.products.find(i => i == item.id_product)).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n\r\n  earning_point: number = 0;\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point = this.getEarningProduct(this.invoice_detail) + this.getEarningBill();\r\n    return this.earning_point ? this.earning_point : 0\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   *  bắt sk nhấn xóa sp\r\n   * @param detail\r\n   * @example  this.deleteGoods(bill_detail_selected)\r\n   */\r\n  deleteGoods(detail: VhSaleInvoiceDetailAdd) {\r\n    this.removeInvoiceDetail(detail.id_product);\r\n    this.setSubTotal()\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer();\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * hủy lấy khuyến mãi\r\n   * @returns  Promise<unknown>\r\n   * @example this.deletePromotion().then(() =>{\r\n   *  \r\n   * })\r\n   */\r\n  deletePromotion() {\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQuerySales.destroyBillDetails_withPromotions(this.invoice_detail)\r\n      this.invoice_detail = bill_details\r\n      this.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true)\r\n    })\r\n\r\n  }\r\n  searchProductList: boolean = false;\r\n  /**\r\n  * mở component chọn sp\r\n  * @example this.openSearchProductList()\r\n  */\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product)\r\n   * @param data sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(data) {\r\n\r\n    if (data.manylot && !data.id_lotproduct) this.openModalChooseLot(data)\r\n    else {\r\n      if (data) {\r\n        if (data.combos && data.combos.filter(e => e.lots && !e.id_lotproduct).length) {\r\n          this.tempDetail = data;\r\n          this.show_modal_select_lots_combo = true;\r\n        }\r\n        else {\r\n          let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n          if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_sales)\r\n            this.addInvoiceDetail(\r\n              {\r\n                ...data,\r\n                price: price,\r\n                earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n              })\r\n          else this.addBill_Detail(\r\n            {\r\n              ...data,\r\n              price: price,\r\n              earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n            })\r\n        }\r\n        this.setSubTotal()\r\n      }\r\n\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n    }\r\n\r\n    if (!data) this.searchProductList = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n\r\n  /**\r\n   * tính lại chiết khấu hóa đơn\r\n   * @example this.getDiscountBillOfCustomer()\r\n   */\r\n  getDiscountBillOfCustomer() {\r\n    this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer).discount : 0;\r\n    this.invoice.discount_bill = (this.discount_bill)\r\n    this.setTotal()\r\n  }\r\n\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    this.showModalChangePriceType = false;\r\n    if (event != null) { // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.deletePromotion().then(() => {\r\n        if (this.invoice_detail.length) { // nếu có  length mơi update\r\n          let bill_details = this.invoice_detail\r\n          for (let i in bill_details) {\r\n            // Nếu là dịch vụ thời gian\r\n            if (this.invoice_detail[i].ptype === VhType.SERVICETIME) {\r\n              this.productService.updateServiceTimePrice(this.invoice_detail[i], event);\r\n              delete (this.invoice_detail[i] as any).serviceTimePrice;\r\n              // Cập nhật lại sản phẩm trong danh sách hóa đơn\r\n              this.invoice_detail[i] = { ...this.invoice_detail[i] };\r\n              continue;\r\n            }\r\n            let price_update = 0;\r\n            let product = this.vhQuerySales.getlocalDetailProduct(bill_details[i].id_subproduct ? bill_details[i].id_subproduct : bill_details[i].id_product);\r\n            product = { ...product, ...this.vhQuerySales.getUnit_byRatio(product.units, bill_details[i].ratio) }\r\n            if (event == 1) {\r\n              price_update = product.price\r\n            }\r\n            else {\r\n              price_update = product.price2 ? product.price2 : product.price\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.setSubTotal();;\r\n          if (this.is_discount_bill) {\r\n            setTimeout(() => {\r\n              this.getDiscountBillOfCustomer()\r\n            }, 200);\r\n          }\r\n          else {\r\n            this.invoice.discount_bill = (0);\r\n            this.discount_bill = 0;\r\n          }\r\n        }\r\n        this.invoice.price_type = (event)\r\n      })\r\n\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * trở về trang danh sách hóa đơn\r\n   * @example this.goBack() \r\n   */\r\n  goBack() {\r\n    let url = this.url;\r\n    if(!this.isFromInvoice) {\r\n      // Xử lý router từ Thương mại điện tử\r\n      const fromType = this.dataRestore?.shop_info?.from_type;\r\n      if (fromType?.includes('invoice_issued')) {\r\n        const platform = fromType.replace('_invoice_issued', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-issued`;\r\n      } \r\n      else if (fromType?.includes('invoice_returned')) {\r\n        const platform = fromType.replace('_invoice_returned', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-returned`;\r\n      }\r\n    }\r\n    if (!this.invoice_detail.length) {\r\n      this.isExit = true;\r\n      this.router.navigate([url], { state: { isSync: true, ...this.dataRestore } })\r\n    }\r\n    else {\r\n      this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the sales order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n        .then(() => { this.isExit = true; this.router.navigate([url], { state: { isSync: true, ...this.dataRestore } }) }, () => { })\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi số lượng sp trong bill\r\n   * @param product \r\n   * @param event : giá trị thay đổi\r\n   * @example this.checkQuantityProduct(bill_detail_selected, 1)\r\n   */\r\n  checkQuantityProduct(product: VhSaleInvoiceDetailAdd, event) {\r\n    if (!event || event <= 0) {\r\n      event = 1\r\n      product.quantity = 1;\r\n    }\r\n    else { product.quantity = product.quantity ? parseFloat(parseFloat(event).toFixed(2)) : 1; }\r\n    this.setSubTotal();\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer()\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi đơn vị của bill_detail\r\n   * @param ev  ratio được chọn\r\n   * @param item\r\n   * @example  this.changeUnit(24, bill_detail_selected)\r\n   */\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n    this.setSubTotal();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  unit_price_discount: any;\r\n  tempDetail: VhSaleInvoiceDetailAdd;\r\n  /**\r\n * mở modal thay đổi giá bán sản phẩm trong bill\r\n * @param detail \r\n * @example this.openEditUnitPrice(bilL_detail_selected)\r\n */\r\n  openEditUnitPrice(detail: VhSaleInvoiceDetailAdd) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.default_discount_price_type = this.vhAuth.localStorageGET(\"default_discount_price_type\") ? this.vhAuth.localStorageGET(\"default_discount_price_type\").value : '%';\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n      this.unit_price_discount = this.vhAlgorithm.vhnumeral('.unit_price_discount');\r\n      this.getValueDiscount(detail.price_origin)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * tính lại % giảm của bill_detail để show ra giao diện\r\n   * @param price_origin \r\n   * @example  this.getValueDiscount(100000)\r\n   */\r\n  getValueDiscount(price_origin) {\r\n    let price = parseFloat(this.unit_price.getRawValue());\r\n    if (price < 0) this.discount_price_bill_detail = 0;\r\n    else {\r\n      if (this.default_discount_price_type == '%') {\r\n        this.discount_price_bill_detail = price_origin - price > 0 ? parseFloat(parseFloat(((1 - (price / price_origin)) * 100).toString()).toFixed(2)) : 0\r\n      }\r\n      else this.discount_price_bill_detail = price_origin - price > 0 ? price_origin - price : 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giảm giá theo % của bill_detail\r\n   * @param item \r\n   * @param event \r\n   * @example this.changePercentDiscountBillDetail(bill_detail_selected, 10)\r\n   */\r\n  changePercentDiscountBillDetail(item, event) {\r\n    item.price = item.price_origin * (1 - event / 100)\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút Ok modal giảm giá sp\r\n   * @example this.handleEditUnit()\r\n   */\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n\r\n      this.setSubTotal();;\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Invalid data, please check again\")) }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  /**\r\n   * tắt modal giảm giá sp\r\n   * @example this.handleCancelEditUnit()\r\n   */\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n\r\n  /**\r\n   * tính lại giá bán của sp sau khi nhập giá trị giảm và loại giảm giá\r\n   * @example this.caculateDiscountPrice_billDetail()\r\n   */\r\n  caculateDiscountPrice_billDetail() {\r\n    switch (this.default_discount_price_type) {\r\n      case '%': {\r\n        if (this.unit_price_discount.getRawValue() > 100 || this.unit_price_discount.getRawValue() < 0) {\r\n          this.tempDetail.price = 0;\r\n          this.tempDetail.percent_discount_product = 100;\r\n        }\r\n        else {\r\n          this.tempDetail.price = this.tempDetail.price_origin * (1 - this.unit_price_discount.getRawValue() / 100)\r\n          this.tempDetail.percent_discount_product = this.unit_price_discount.getRawValue();\r\n        }\r\n        break;\r\n      }\r\n      case this.symbol: {\r\n        if (this.unit_price_discount.getRawValue() > this.tempDetail.price_origin || this.unit_price_discount.getRawValue() < 0) {\r\n          this.tempDetail.price = 0;\r\n          this.tempDetail.percent_discount_product = 100;\r\n        }\r\n        else {\r\n          this.tempDetail.price = this.tempDetail.price_origin - this.unit_price_discount.getRawValue();\r\n          this.tempDetail.percent_discount_product = parseFloat(parseFloat(((1 - (this.tempDetail.price / this.tempDetail.price_origin)) * 100).toString()).toFixed(2));\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi loại giảm giá bill_detail\r\n   * @param value % || vnd\r\n   * @example this.changeValueDiscount('%')\r\n   */\r\n  changeValueDiscount(value) {\r\n    this.default_discount_price_type = value;\r\n    this.tempDetail.price = this.tempDetail.price_origin;\r\n    this.discount_price_bill_detail = 0;\r\n  }\r\n  // -------set employee-------\r\n  /**\r\n * bắt sk thay đổi nv bán hàng\r\n * @param event id_employee selected\r\n */\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n  // ----set customer-----\r\n  radioValue: 1 | 2 | 3 = 1;\r\n  /**\r\n  * bắt sk thay đổi khách hàng\r\n  * @param event id_customer được chọn\r\n  * @example this.closeAndReceiveCustomer('DIWJNMFHOIWUHJDIUWH')\r\n  */\r\n  closeAndReceiveCustomer(event) {\r\n    if (event) {\r\n      this.invoice.id_customer = event;\r\n      const localCustomer = this.vhQuerySales.getlocalCustomer(event);\r\n      this.invoice.tax_buyerDisplayName = localCustomer?.name || '';\r\n      this.invoice.tax_buyerLegalName = localCustomer?.name || '';\r\n      this.invoice.tax_buyerTaxCode = localCustomer?.taxcode || '';\r\n      this.invoice.tax_buyerAddressLine = localCustomer?.address || '';\r\n      this.invoice.tax_buyerEmail = localCustomer?.email || '';\r\n      if (!this.vhQuerySales.getlocalCustomer(event).debt_enable) this.invoice.payment = (this.getTotalATax());\r\n      this.invoice.retail_name = ('')\r\n      this.invoice.retail_phone = ('')\r\n      this.invoice.retail_address = ('')\r\n      this.getClassAndProgram(event)\r\n      this.updateServiceTime();\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n\r\n  }\r\n\r\n  /**\r\n   * kiểm tra khách hàng có chương trình tích điểm nào ko\r\n   * @param id_customer \r\n   * @example this.getDiscountMethodCustomer()\r\n   */\r\n  getDiscountMethodCustomer(id_customer) {\r\n    let check = this.vhQuerySales.getlocalDiscount_bill(this.customer_class?.id_discount_bill)\r\n    if (check) {\r\n      this.is_discount_bill = true\r\n      this.getDiscountBillOfCustomer()\r\n      this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"This customer applies the discount calculation formula \") + check.name, 5000)\r\n    }\r\n    else {\r\n      this.is_discount_bill = false\r\n      this.invoice.discount_bill = (0)\r\n    }\r\n\r\n  }\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   */\r\n  getClassAndProgram(id_customer) {\r\n    this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n    this.customer_class = this.customer_group.find(item => item._id == this.vhQuerySales.getlocalCustomer(id_customer).id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(item => item._id == this.customer_class.id_earning_points_bill);\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(item => item._id == this.customer_class.id_earning_points_product);\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n    this.point_validity = this.vhQuerySales.getlocalCustomerPoints(this.invoice.id_customer)\r\n    this.getDiscountMethodCustomer(this.invoice.id_customer)\r\n\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi loại khách hàng (member or retail)\r\n   * @param event \r\n   * @example this.changeCustomerType(1)\r\n   */\r\n  changeCustomerType(event) {\r\n    if (this.radioValue == 1) {\r\n      this.invoice.discount_bill = 0;\r\n      this.invoice.id_customer = \"id_retail\";\r\n      this.invoice.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      this.invoice.tax_buyerLegalName = '';\r\n      this.invoice.tax_buyerTaxCode = '';\r\n      this.invoice.tax_buyerAddressLine = '';\r\n      this.invoice.tax_buyerEmail = '';\r\n      this.invoice.payment = (this.getTotalATax());\r\n      this.updateServiceTime(); \r\n    } if (event == 2 && this.invoice.retail_name) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => { this.clearRetailCustomer() },\r\n        nzOnCancel: () => { this.radioValue = 1 },\r\n      }\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clear dữ liệu khách lẻ trong bill trường hợp thay đổi thành khách thành viên\r\n   * @example this.clearRetailCustomer()\r\n   */\r\n  clearRetailCustomer() {\r\n    this.invoice.retail_address = ('')\r\n    this.invoice.retail_name = ('')\r\n    this.invoice.retail_phone = ('')\r\n  }\r\n\r\n  // ----set delivery ------\r\n  /**\r\n  * bắt sk thay đổi nhà giao hàng\r\n  * @param event id_delivery được chọn\r\n  * @example this.closeAndReceiveDelivery('DJKHWIUHDJUWIYGDUWQ')\r\n  */\r\n  closeAndReceiveDelivery(event) {\r\n    if (event) this.invoice.id_delivery = (event)\r\n    else this.invoice.id_delivery = ('');\r\n    this.updateServiceTime();\r\n  }\r\n  /**\r\n   * bắt sk thay đổi phương thức thanh toán\r\n   * @param event \r\n   * @example this.closeAndGetValuePayment(event)\r\n   */\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0]);\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  /**\r\n   * cập nhật payment_type cho bill\r\n   * @param type \r\n   * @param id_wallet \r\n   * @example  this.setPaymentType(1)\r\n   */\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.payment_type = (type)\r\n    switch (type) {\r\n      case 1: {\r\n        this.invoice.id_wallet = ('id_cash'); this.invoice.payment = (this.invoice.payment ? this.invoice.payment : null);\r\n\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.invoice.payment = (0); this.invoice.id_wallet = (null);\r\n        this.invoice.cash = (0);\r\n\r\n        break;\r\n      }\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.id_wallet = (id_wallet)\r\n          this.invoice.payment = (this.invoice.payment ? this.invoice.payment : null);\r\n\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n\r\n  }\r\n  isGotPromotion = false\r\n  /**\r\n   * bắt sk thay đổi date của hóa đơn , gán lại giá trị date mới cho đơn\r\n   * @example this.setPickerTime('2023-06-12T08:02:27.697Z')\r\n   */\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.date)\r\n      this.invoice.date = (new Date(this.pickerTime));\r\n    }\r\n    else this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.date = (event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.date = (new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n    if (this.isGotPromotion) this.getPromotions()\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  /**\r\n   * bắt sk thay đổi thuế của bill\r\n   * @param event \r\n   */\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  discount_price: any;\r\n  /**\r\n   * bắt sk thay đổi giảm giá của hóa đơn , gán lại giá trị giảm giá mới cho đơn\r\n   * @example this.editDiscount()\r\n   */\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0 && this.discount_price.getRawValue() <= this.subTotal) {\r\n      this.invoice.discount = (parseFloat(this.discount_price.getRawValue()));\r\n      this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.discount;\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * mở modal thanh toán bằng điểm hoặc coupon\r\n   * @example openModalOtherDiscount()\r\n   */\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn ok modal thanh toán bằng điểm hoặc coupon\r\n   * @example handleOkOtherDiscount()\r\n   */\r\n  handleOkOtherDiscount() {\r\n    if (this.invoice.payment < this.invoice.payment_points + this.invoice.payment_coupons) this.invoice.payment = (0);\r\n    this.showModalOtherDiscount = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  value_discount_point: number = 0;\r\n  point_validity: number = 0;\r\n  /**\r\n  * tính lại giá trị thanh toán bằng tiền với số điểm sử dụng tương úng trong chương trình tích điểm\r\n  * @param value điểm sử dụng\r\n  * @example this.calculatePoint2Money(10)\r\n  */\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n\r\n      this.invoice.payment_points = ((value / this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoice.use_points = (value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n  /**\r\n    * bắt sk thay đổi giảm giá bill theo %\r\n    * @param value % giảm\r\n    * @example this.editPercentDiscount(10) \r\n    */\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.percent_discount_bill = value;\r\n    this.invoice.discount = this.subTotal * (this.percent_discount_bill / 100)\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  product_codes: any = [];\r\n  /**\r\n * kiểm tra mã coupon hợp lệ hay ko , tính số tiền thanh toán theo coupon tương ứng\r\n * @param code \r\n * @example getDiscountOfCoupon('KDJWOIHA')\r\n */\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQuerySales.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoice.payment_coupons += (product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n  /**\r\n   * xóa coupon đã thêm, tính lại tiền thanh toán bằng coupon\r\n   * @param item \r\n   * @example this.onCloseProductCode(coupon_selected)\r\n   */\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoice.payment_coupons -= item.value\r\n  }\r\n  invoice_fee: any;\r\n  /**\r\n * bắt sk thay đổi phí của hóa đơn , gán lại giá trị phí mới cho đơn\r\n * @example this.editFee()\r\n */\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.fee = (parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.fee;\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  /**\r\n     * bắt sk thay đổi tiền khách đưa\r\n     * @param cash \r\n     */\r\n  updateCash(cash: any) {\r\n    this.invoice.cash = (cash.replaceAll(',', ''))\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  /**\r\n  * mở modal chỉnh sửa thanh toán của bill\r\n  * @example this.showModalEditTotalPay()\r\n  */\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.payment_type != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhComponent.showToast(5000,\r\n        this.languageService.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  /**\r\n  * bắt sk nhấn nút ok modal chỉnh sửa thanh toán của bill\r\n  * @example this.handleEditPay()\r\n  */\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.getTotalATax()) {\r\n      this.invoice.payment = (parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chỉnh sửa thanh toán của bill\r\n   * @example this.handleCancelEditPay()\r\n   */\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n  save_enable = true;\r\n  /**\r\n  * xử lý sk nhấn nút thanh toán hoặc lưu tạm\r\n  * @param bill_type \r\n  * @param print biến cờ để check in hay ko\r\n  * @example this.payInvoice(1)\r\n  */\r\n  payInvoice(bill_type: 1 | 4 | 5 = 5, print?) {\r\n    if (this.save_enable) {\r\n      this.save_enable = false;\r\n      if (this.vhAuth.checkMyPermission(\"sales_enable_payment\")) {\r\n        if (bill_type == 5) {\r\n          this.invoice.payment_coupons = 0;\r\n          this.invoice.payment_points = (0);\r\n          this.invoice.use_points = (0);\r\n          this.setTotal()\r\n        }\r\n        if (this.getTotalEarningPoint() && bill_type != 5 || this.invoice.use_points) {\r\n          let earned_points = this.getTotalEarningPoint() - this.value_discount_point - this.invoice.earning_points_bill\r\n          this.vhQuerySales.updateCustomer_byEarnedPoints(this.invoice.id_customer, earned_points)\r\n          this.invoice.earning_points_bill = (this.getTotalEarningPoint())\r\n        }\r\n        if (print) {\r\n          if (this.checkPrinter) {\r\n            if (this.vhAuth.localStorageGET(\"show_confirm_pay\"))\r\n              this.nzModalService.confirm({\r\n                nzTitle: bill_type == 5 ? `${this.languageService.translate(\"Save\")}?` : (!print ? `${this.languageService.translate(\"Save\")}?` : `${this.languageService.translate(\"Save & Print\")}?`),\r\n                nzCancelText: this.languageService.translate(\"Cancel\"),\r\n                nzOkText: \"Ok\",\r\n                nzOnOk: () => {\r\n                  this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                    this.createOrUpdate(bill_type).then(bill => {\r\n\r\n                      this.save_enable = true;\r\n                      if (bill_type == 1) {\r\n                        let promise = new Array();\r\n                        for (let i = 0; i < this.product_codes.length; i++) {\r\n                          promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                        }\r\n                        console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                        if (this.isFromInvoice && this.cqt_submit_invoice_immediately) {\r\n                          promise.push(this.handleMinvoice(bill))\r\n                        }\r\n                        this.vhQuery.asyncPromiseAll(promise)\r\n                          .then((array) => {\r\n                            if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                            this.vhComponent.hideLoading(0).then(() => {\r\n                              this.vhComponent.showToast(5000,\r\n                                `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                              )\r\n                              this.handlePrint()\r\n                            })\r\n                          }, error => {\r\n                            this.vhComponent.hideLoading(0).then(() => {\r\n                              this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                            })\r\n                          })\r\n                      }\r\n                      else {\r\n                        if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000,\r\n                            `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                          )\r\n                          this.handlePrint()\r\n                        })\r\n                      }\r\n                    })\r\n                  })\r\n                },\r\n                nzOnCancel: () => { this.save_enable = true; },\r\n              })\r\n            else {\r\n              this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                this.createOrUpdate(bill_type).then(bill => {\r\n                  this.save_enable = true;\r\n                  if (bill_type == 1) {\r\n\r\n                    let promise = new Array();\r\n                    for (let i = 0; i < this.product_codes.length; i++) {\r\n                      promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                    }\r\n                    console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                    if (this.isFromInvoice && this.cqt_submit_invoice_immediately) {\r\n                      promise.push(this.handleMinvoice(bill))\r\n                    }\r\n                    this.vhQuery.asyncPromiseAll(promise)\r\n                      .then((array) => {\r\n                        if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000,\r\n                            `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                          )\r\n                          this.handlePrint()\r\n                        })\r\n                      }, error => {\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                        })\r\n                      })\r\n                  }\r\n                  else {\r\n                    if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                    this.vhComponent.hideLoading(0).then(() => {\r\n                      this.vhComponent.showToast(5000,\r\n                        `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                      )\r\n                      this.handlePrint()\r\n                    })\r\n                  }\r\n                })\r\n              })\r\n\r\n            }\r\n          }\r\n          else {\r\n            this.nzModalService.confirm({\r\n              nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n              nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n              nzIconType: \"info-circle\",\r\n              nzCancelText: null,\r\n              nzOnOk: () => { this.save_enable = true; }\r\n            })\r\n          }\r\n        }\r\n        else {\r\n          if (this.vhAuth.localStorageGET(\"show_confirm_pay\")) {\r\n            this.nzModalService.confirm({\r\n              nzTitle: bill_type == 5 ? `${this.languageService.translate(\"Save\")}?` : (!print ? `${this.languageService.translate(\"Pay\")}?` : `${this.languageService.translate(\"Pay & Print\")}?`),\r\n              nzCancelText: this.languageService.translate(\"Cancel\"),\r\n              nzOkText: \"Ok\",\r\n              nzOnOk: () => {\r\n                this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n                  this.createOrUpdate(bill_type).then(bill => {\r\n                    if (bill_type == 1) {\r\n\r\n                      let promise = new Array();\r\n                      for (let i = 0; i < this.product_codes.length; i++) {\r\n                        promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                      }\r\n                      console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                      if (this.isFromInvoice && this.cqt_submit_invoice_immediately) {\r\n                        promise.push(this.handleMinvoice(bill))\r\n                      }\r\n                      this.vhQuery.asyncPromiseAll(promise)\r\n                        .then((array) => {\r\n                          if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                          this.vhComponent.hideLoading(0).then(() => {\r\n                            this.vhComponent.showToast(5000,\r\n                              `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                            )\r\n                            this.handle()\r\n                          })\r\n                        }, error => {\r\n                          this.vhComponent.hideLoading(0).then(() => {\r\n                            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                          })\r\n                        })\r\n                    }\r\n                    else {\r\n                      if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000,\r\n                          `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                        )\r\n                        this.handle()\r\n                      })\r\n                    }\r\n                  })\r\n                })\r\n              },\r\n              nzOnCancel: () => { this.save_enable = true; },\r\n            })\r\n          }\r\n          else {\r\n            this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n              this.createOrUpdate(bill_type).then(bill => {\r\n                if (bill_type == 1) {\r\n\r\n                  let promise = new Array();\r\n                  for (let i = 0; i < this.product_codes.length; i++) {\r\n                    promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                  }\r\n                  console.log('cqt_submit_invoice_immediately', this.cqt_submit_invoice_immediately)\r\n                  if (this.isFromInvoice && this.cqt_submit_invoice_immediately) {\r\n                    promise.push(this.handleMinvoice(bill))\r\n                  }\r\n                  this.vhQuery.asyncPromiseAll(promise)\r\n                    .then((array) => {\r\n                      if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000,\r\n                          `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                        )\r\n                        this.handle()\r\n                      })\r\n                    }, error => {\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                      })\r\n                    })\r\n                }\r\n                else {\r\n                  if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                  this.vhComponent.hideLoading(0).then(() => {\r\n                    this.vhComponent.showToast(5000,\r\n                      `${this.languageService.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                    )\r\n                    this.handle()\r\n                  })\r\n                }\r\n              })\r\n            })\r\n\r\n          }\r\n        }\r\n\r\n      }\r\n      else this.vhComponent.showToast(5000, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n    }\r\n  }\r\n  /**\r\n   * update bill lên DB\r\n   * @param bill_type \r\n   * @returns \r\n   */\r\n  createOrUpdate(bill_type: 1 | 4 | 5) {\r\n    this.productService.updateAllServiceTimeToPause(this.invoice_detail);\r\n    let invoice = { ...this.getCreateUpdateInvoice(bill_type) }\r\n    return this.vhQuerySales.updateBill_Billdetail(this.invoice._id, invoice, this.getCreateUpdateInvoiceDetail())\r\n\r\n  }\r\n\r\n  cqt_invoice_auto_sign: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').cqt_invoice_auto_sign\r\n  cqt_submit_invoice_immediately: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').cqt_submit_invoice_immediately\r\n\r\n  handleMinvoice(bill) {\r\n    console.log(bill);\r\n    bill = { ...this.getCreateUpdateInvoice(1) }\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQuerySales.getlocalBranch(this.vhQuerySales.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp đã gửi lên cqt rồi thì khỏi\r\n      if(bill.cqt_status == 2 || bill.cqt_status == 3){\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      resolve(true)\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      resolve(true)\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQuerySales.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      resolve(true)\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            resolve(true)\r\n            console.log('error', error)\r\n          })\r\n      }\r\n    })\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(false)\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trờ về trang danh sách hóa đơn sau khi đã thanh toán xong\r\n   * @example this.handle(true)\r\n   */\r\n  handle() {\r\n    let url = this.url;\r\n\r\n    if(this.dataRestore) {\r\n      // Xử lý router từ Thương mại điện tử\r\n      const fromType = this.dataRestore?.shop_info?.from_type;\r\n      if (fromType?.includes('invoice_issued')) {\r\n        const platform = fromType.replace('_invoice_issued', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-issued`;\r\n      } \r\n      else if (fromType?.includes('invoice_returned')) {\r\n        const platform = fromType.replace('_invoice_returned', '');\r\n        url = `/sales/dashboard/manage/ecommerce/${platform}/issue-invoice/invoice-returned`;\r\n      }\r\n\r\n      // replace trong invoice state để tránh lỗi khi quay lại\r\n      this.dataRestore.invoice = this.dataRestore?.invoice?.map((invoice) => {\r\n        if (invoice._id === this.invoice._id) {\r\n          invoice['sum_price'] = this.invoice.total * (1 + this.invoice.tax / 100);\r\n          invoice['total'] = this.invoice.total;\r\n        }\r\n        return invoice;\r\n      });\r\n    }\r\n\r\n    this.isExit = true;\r\n    this.router.navigate([url], { state: { isSync: true, ...this.dataRestore } })\r\n  }\r\n\r\n  /**\r\n   * kiểm tra dữ liệu thông tin máy in và mở component in\r\n   * @example this.handlePrint()\r\n   */\r\n  handlePrint() {\r\n    this.invoice_detail.forEach(e => {\r\n      if (e.products_gift) e.products_gift = e.products_gift.filter(item => item.choose)\r\n    })\r\n\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer) {\r\n        this.updateServiceTime();\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: { ...printer, name: \"Sales\" }, invoice_detail: this.invoice_detail, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n      }\r\n    }, (err) => {\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => { this.handle() }\r\n      })\r\n    })\r\n  }\r\n  note: string;\r\n  /**\r\n  * bắt sk thay đổi note của bill\r\n  * @example this.edit_note()\r\n  */\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n\r\n  //--------------visible drawer info customer-----------\r\n  visibleInfoCustomer: boolean = false;\r\n  /**\r\n   * mở modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  openInfoCustomer() {\r\n    if (this.invoice.id_customer != 'id_retail') {\r\n      this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.id_customer);\r\n      this.visibleInfoCustomer = true;\r\n    }\r\n  }\r\n  /**\r\n   * đóng modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  closeInfoCustomer(event) {\r\n    this.visibleInfoCustomer = false;\r\n  }\r\n\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == this.url + '/edit-sales' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.languageService.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n\r\n  /**add customer */\r\n  showDrawerAddCusomer: boolean = false;\r\n  showDrawerAddRetail: boolean = false\r\n  /**\r\n   * mở drawer xem thông tin khách lẻ\r\n   * @example this.openDrawerAddCustomerOrRetail()\r\n   */\r\n  openDrawerAddCustomerOrRetail() {\r\n    if (this.radioValue == 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCusomer = true\r\n  }\r\n  /**\r\n   * bắt sk tắt drawer thêm khách hàng\r\n   * @param result output kết quả trả về\r\n   * @example this.closeAddCustomer('NDWOIUHDIUWQHSIOQUH')\r\n   */\r\n  closeAddCustomer(result) {\r\n    if (this.radioValue == 1) {\r\n      if (result) {\r\n        this.invoice.retail_name = (result.retail_name)\r\n        this.invoice.retail_phone = (result.retail_phone)\r\n        this.invoice.retail_address = (result.retail_address)\r\n      }\r\n      this.invoice.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      this.invoice.tax_buyerLegalName = '';\r\n      this.invoice.tax_buyerTaxCode = '';\r\n      this.invoice.tax_buyerAddressLine = '';\r\n      this.invoice.tax_buyerEmail = '';\r\n      this.showDrawerAddRetail = false\r\n    }\r\n    else {\r\n      this.showDrawerAddCusomer = false\r\n      if (result) {\r\n        this.invoice.id_customer = result;\r\n        const localCustomer = this.vhQuerySales.getlocalCustomer(result);\r\n        this.invoice.tax_buyerDisplayName = localCustomer?.name || '';\r\n        this.invoice.tax_buyerLegalName = localCustomer?.name || '';\r\n        this.invoice.tax_buyerTaxCode = localCustomer?.taxcode || '';\r\n        this.invoice.tax_buyerAddressLine = localCustomer?.address || '';\r\n        this.invoice.tax_buyerEmail = localCustomer?.email || '';\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  /**\r\n   * Sự kiện quét barcode bằng máy\r\n   */\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện nhận barcode\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === this.url + \"/edit-sales\" && !this.showModalOtherDiscount && !this.isVisibleEditUnitPrice) {\r\n      // if (!this.showSearchBar && !this.showPayInfo) {\r\n      if (_event.key == \"Enter\") {\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        // this.scanBarcode(this.barcode_array.join(\"\"));\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n          let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.barcode);\r\n          if (detailproduct) {\r\n            this.closeSearchProductList({ ...detailproduct, ...this.vhQuerySales.getUnit_byRatio(detailproduct.units, detailproduct.ratio) });\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Not found\"))\r\n          this.barcode_array = [];\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n  //tra cước phí\r\n  visibleCheckFees: boolean = false\r\n\r\n\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  /**\r\n  * bắt sk nhấn nút ok chọn quà của promotion type = 7, gán các sp được chọn trong CTKM vào bill_detail\r\n  * @example this.handleAddGiftType7()\r\n  */\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n      for (let i in this.product_gift_type7) {\r\n        // this.product_gift_type7[i].products_gift = this.product_gift_type7[i].products_gift.filter(item => item.choose).map(e => { return { ...e } })\r\n        if (this.product_gift_type7[i].products_gift.length) this.invoice_detail.push(this.product_gift_type7[i])\r\n      }\r\n\r\n    this.gotten_gift_type7 = true;\r\n    this.setSubTotal();\r\n  }\r\n  /**\r\n    * xử lý nhấn nút lấy quà\r\n    * @example this.getPromotions()\r\n    */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        /** Chứa các bill_detail có ptype = 6 */\r\n        let bill_details_type_6;\r\n        /** Chứa các bill_detail có ptype != 6 */\r\n        let bill_details_others;\r\n        // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n        if(this.productService.isContainServiceTime(this.invoice_detail)) {\r\n          bill_details_type_6 = this.invoice_detail.filter((item) => item.ptype === VhType.SERVICETIME);\r\n          bill_details_others = this.invoice_detail.filter((item) => item.ptype !== VhType.SERVICETIME);\r\n          this.invoice_detail = bill_details_others;\r\n        }\r\n        this.vhQuerySales.changeBillDetails_withPromotions(this.invoice_detail, this.invoice.date).then((bill_details_display: any) => {\r\n          // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n          if(bill_details_type_6) {\r\n            bill_details_display.bill_details_pmtype_0to6 = [\r\n              ...bill_details_type_6,\r\n              ...bill_details_display.bill_details_pmtype_0to6,\r\n            ];\r\n          }\r\n\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_0to6)\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_7)\r\n\r\n          this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC([...bill_details_display.bill_details_pmtype_7], 'total_bill_value')\r\n          this.isGotPromotion = true;\r\n          this.vhComponent.hideLoading(0)\r\n          this.invoice_detail = [...bill_details_display.bill_details_pmtype_0to6,]\r\n          // if (bill_details_display.filter(item => item.products_gift).length) this.showProductGift = true;\r\n          this.getEarningpointPromotion();\r\n\r\n          // this.product_gift_type7 = [...bill_details_display.bill_details_pmtype_7]\r\n          this.handlePromotionType7(this.bill_details_pmtype_7)\r\n          this.setSubTotal()\r\n\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * xử lý dữ liệu sản phẩm sau khi lấy quả của prmotion_type = 7\r\n   * @param bill_details_pmtype_7 \r\n   */\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length)\r\n      if (bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax()) != -1)\r\n        this.product_gift_type7 = [bill_details_pmtype_7[bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax())]]\r\n      else this.product_gift_type7 = []\r\n    else this.product_gift_type7 = []\r\n    // \r\n\r\n  }\r\n  /**\r\n    * xử lý chọn lô tự động cho sản phẩm chọn trong khuyến mãi\r\n    * @param promotion array product promotion\r\n    * @example this.handleChooseLotForPromotion([])\r\n    */\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(product.lots, 'date_exp')\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach(element => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(element.lots, 'date_exp')\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    for (let i of this.invoice_detail) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n        }\r\n      }\r\n      if (i.products) {\r\n        for (let product of i.products) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n        }\r\n      }\r\n      if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n    }\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (data.products_gift.filter(item => item.choose).length == data.promotions_maximum) return true;\r\n    else return false\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit theo ratio truyền vào\r\n   * @param units mảng units của sp\r\n   * @param ratio ratio được chọn\r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  /**\r\n     * trả về tên lô theo id_lot được chọn\r\n     * @param lots \r\n     * @param _id \r\n     * @returns string\r\n     * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n     */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  /**\r\n  * lọc danh sách lô của sp theo số lô (lot_number)\r\n  * @param value \r\n  */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi id_lotnumber của bill-detail\r\n   * @param e id_lotnumber thay đổi\r\n   * @example this.changeLot('DNIUHWIDCHBIQOHSDOIHW')\r\n   */\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.tempDetail.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.tempDetail.lots = this.list_search_lot;\r\n            if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.tempDetail.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.tempDetail.lots = this.list_search_lot;\r\n        if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.tempDetail.lots = this.list_search_lot;\r\n      if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleChooseLotCombo() {\r\n    if (this.tempDetail.combos.filter(item => item.lots && !item.id_lotproduct).length)\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Vui lòng chọn lô cho sản phẩm thuộc combo này\"))\r\n    else {\r\n      this.show_modal_select_lots_combo = false;\r\n      this.closeSearchProductList(this.tempDetail)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trả về tổng tiền \r\n   * @returns number\r\n   * @example let total = this.getTotalATax()\r\n   */\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n\r\n  /**\r\n   * xóa 1 bill_detail trong local\r\n   * @param id id_bill_detail selected\r\n   * @param notSetSub \r\n   */\r\n  removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tính lại cộng tiền của bill khi có sự thay đổi (thêm xóa sửa bill_detail, đổi giá bán, khuyến mãi, phí ,thuế ,...)\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n      }\r\n      else if (i.products) {\r\n\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.editPercentDiscount(this.percent_discount_bill)\r\n    this.setTotal();\r\n  }\r\n\r\n  /**\r\n   * tính lại tổng tiền của bill để lưu trường total\r\n   * @example this.setTotal();\r\n   */\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee > 0 ? this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee : 0\r\n    this.setTaxValue()\r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n      //     .then(() => {\r\n\r\n\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice, this.invoice_detail\r\n      )\r\n      // })\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tính giá trị thuế ra tiền\r\n   * @example this.setTaxValue()\r\n   */\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n    this.setPayment()\r\n  }\r\n  /**\r\n   * tính lại thanh toán để lưu trường payment của bill\r\n   * @param value : giá trị thanh toán tự nhập nếu có (trường hợp nợ lại 1 phần)\r\n   * @example this.setPayment()\r\n   */\r\n  setPayment(value?: number) {\r\n\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0\r\n    } else {\r\n      if (value != null)\r\n        this.invoice.payment = value\r\n      else\r\n        this.invoice.payment = this.invoice.total + this.taxValue\r\n    }\r\n    this.setCash(this.invoice.cash);\r\n  }\r\n\r\n  /**\r\n   * cập nhật lại tiền khách đưa để lưu trường cash trong bill\r\n   * @param value \r\n   * @example this.setCash(100000)\r\n   */\r\n  setCash(value) {\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0\r\n    else {\r\n      if (value) this.invoice.cash = parseFloat(value);\r\n      else this.invoice.cash = 0\r\n    }\r\n  }\r\n  /**\r\n   * trả về dữ liệu thông tin bill clean để lưu DB\r\n   * @param bill_type bill-type cần thay đổi\r\n   * @returns object\r\n   * @example let bill = this.getCreateUpdateInvoice(1)\r\n   */\r\n  getCreateUpdateInvoice(bill_type: 1 | 4 | 5 | 36 | null = null) {\r\n    if (bill_type) this.invoice.bill_type = (bill_type)\r\n    return this.invoice\r\n  }\r\n\r\n  /**\r\n   * trả về dữ liệu thông tin bill_detail clean để lưu DB\r\n   * @returns array[object]\r\n   *  @example let bill_details = this.getCreateUpdateInvoiceDetail()\r\n   */\r\n  getCreateUpdateInvoiceDetail(): VhSaleInvoiceDetailEdit[] {\r\n    return this.invoice_detail.map(item => {\r\n      if (!item.pmtype) {\r\n        let detail: VhSaleInvoiceDetailEdit = {\r\n          id_product: item.id_product,\r\n          ptype: item.ptype,\r\n          price: item.price,\r\n          price_origin: item.price_origin,\r\n          quantity: item.quantity,\r\n          earning_points_product: item.earning_points_product,\r\n          ratio: item.ratio,\r\n          note: item.note,\r\n          time_start_order: item.time_start_order,\r\n          time_end_order: item.time_end_order,\r\n          is_paused: item.is_paused,\r\n        }\r\n        if (item._id) detail['_id'] = item._id\r\n        if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n        if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n\r\n        if (item.ptype == 5) {\r\n          detail['combos'] = item.combos.map(combo => {\r\n            let product: VhSaleDesktopInvoiceDetailCombo = {\r\n              id_product: combo.id_product,\r\n              price: combo.price,\r\n              quantity: combo.quantity,\r\n              ptype: combo.ptype,\r\n              ratio: combo.ratio ? combo.ratio : 1,\r\n            }\r\n            if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n            if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n            return product;\r\n          })\r\n        }\r\n        return detail\r\n      }\r\n      else {\r\n        let detail: any = {\r\n          id_promotion: item.id_promotion,\r\n          pmtype: item.pmtype,\r\n        }\r\n        if (item._id) detail['_id'] = item._id\r\n        if (item.products_gift) {\r\n          if (item.products_gift.filter(ele => ele.choose).length) {\r\n            detail['products_gift'] = item.products_gift.filter(ele => ele.choose).map(e => {\r\n              let prod = {\r\n                id_product: e.id_product,\r\n                price: e.price,\r\n                price_origin: e.price_origin,\r\n                quantity: e.quantity,\r\n                ptype: e.ptype,\r\n                earning_points_product: e.earning_points_product,\r\n                ratio: e.ratio\r\n              }\r\n              if (e.ptype == 5) {\r\n                prod['combos'] = e.combos.map(combo => {\r\n                  let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                    id_product: combo.id_product,\r\n                    price: combo.price,\r\n                    quantity: combo.quantity,\r\n                    ptype: combo.ptype,\r\n                    ratio: combo.ratio ? combo.ratio : 1,\r\n                  }\r\n                  if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                  if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                  return product;\r\n                })\r\n              }\r\n              if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n              if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n              return prod\r\n            })\r\n            return detail\r\n          }\r\n        }\r\n        else {\r\n          detail['products'] = item.products.map(e => {\r\n            let prod = {\r\n              id_product: e.id_product,\r\n              price: e.price,\r\n              price_origin: e.price_origin,\r\n              quantity: e.quantity,\r\n              ptype: e.ptype,\r\n              earning_points_product: e.earning_points_product,\r\n              ratio: e.ratio,\r\n              note: e.note,\r\n            }\r\n            if (e.ptype == 5) {\r\n              prod['combos'] = e.combos.map(combo => {\r\n                let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                  id_product: combo.id_product,\r\n                  price: combo.price,\r\n                  quantity: combo.quantity,\r\n                  ptype: combo.ptype,\r\n                  ratio: combo.ratio ? combo.ratio : 1,\r\n                }\r\n                if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                return product;\r\n              })\r\n            }\r\n            if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n            if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n            return prod\r\n          })\r\n          return detail\r\n        }\r\n\r\n      }\r\n    }).filter(item => item)\r\n\r\n  }\r\n\r\n  /**\r\n   * thêm sản phẩm được chọn từ drawer search-product\r\n   * @param value \r\n   * @example this.addInvoiceDetail(product_selected)\r\n   */\r\n  addInvoiceDetail(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1 && value.type !== VhType.SERVICETIME) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * xử lý các trường của sp được chọn và thêm vào mảng local\r\n   * @param value \r\n   * @param new_price \r\n   * @example  this.addBill_Detail(product_selected)\r\n   */\r\n  addBill_Detail(value: any, new_price?: number) {\r\n    let detail: any = {\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      ptype: value.type,\r\n      unit: value.unit,\r\n      units: value.units ? value.units : [],\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      price: new_price != null ? new_price : value.price,\r\n      price2: value.price2,\r\n      price_origin: value.price,\r\n      earning_points_product: value.earning_points_product ? value.earning_points_product : 0,\r\n      percent_discount_product: 0,\r\n      time_start_order: new Date().toISOString(),\r\n    }\r\n\r\n    if (value.type == 5) {\r\n      detail['cbtype'] = 5;\r\n      detail['combos'] = [...value.combos.map(item => {\r\n        let product: VhSaleDesktopInvoiceDetailCombo = {\r\n          id_product: item.id_product,\r\n          name: item.name,\r\n          ptype: item.type,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n          unit: item.unit,\r\n          units: item.units,\r\n          ratio: item.ratio ? item.ratio : 1,\r\n          lots: item.lots ? item.lots : [],\r\n          id_lotproduct: item.id_lotproduct,\r\n        }\r\n        if (item.lots) product['lots'] = item.lots;\r\n        if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n        if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n        return product;\r\n      })]\r\n    }\r\n    if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n    if (value.lots) detail['lots'] = value.lots;\r\n    if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n    this.invoice_detail.unshift(detail)\r\n\r\n    this.setSubTotal()\r\n  }\r\n\r\n  /**\r\n   * trả về tổng số lượng sp đang chọn bán\r\n   * @returns number\r\n   */\r\n  getNumbersProduct() {\r\n    return this.invoice_detail.reduce((sum: number, next) => sum + next.quantity, 0)\r\n  }\r\n    \r\n    \r\n      \r\n    \r\n      \r\n  /* -------------------------------------------------------------------------------------------------------------------------------------- */\r\n  /*                                                            DỊCH VỤ THỜI GIAN                                                           */\r\n  /* -------------------------------------------------------------------------------------------------------------------------------------- */\r\n\r\n  \r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  endTime: Date = new Date();\r\n  /** Biến tạm lưu dịch vụ thời gian đang được chọn */\r\n  selectedServiceTime: any;\r\n  /** Có hiện modal Chỉnh sửa Dịch vụ thời gian hay không */\r\n  isShowModalEditServiceTime: boolean = false;\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chỉnh sửa Dịch vụ thời gian\r\n   */\r\n  editServiceTime(item, index) {\r\n    this.selectedServiceTime = item;\r\n    this.selectedServiceTime.index = index;\r\n    // Nếu là Dịch vụ thời gian\r\n    this.productService.updateServiceTimePrice(this.selectedServiceTime, this.default_price_type);\r\n    if(!this.selectedServiceTime.is_paused) {\r\n      this.updateBillCalculations();\r\n    }\r\n    this.isShowModalEditServiceTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi đóng modal chỉnh sửa Dịch vụ thời gian\r\n   */\r\n  saveServiceTime() {\r\n    if(this.selectedServiceTime.ptype === VhType.SERVICETIME) {\r\n      if (!this.selectedServiceTime.is_paused) {\r\n        this.selectedServiceTime.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n      this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n      this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n      delete this.selectedServiceTime.serviceTimePrice;\r\n    }\r\n\r\n    this.selectedServiceTime.price = parseFloat(this.selectedServiceTime.price)\r\n    this.isShowModalEditServiceTime = false;\r\n    const detail = { ...this.selectedServiceTime };\r\n    delete detail.index; // Xoá index để không lưu vào invoice_detail\r\n    this.invoice_detail[this.selectedServiceTime.index] = detail;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  \r\n  /**\r\n   * Tính lại tất cả thông số ở Bill.\r\n   *\r\n   * Tính lại subTotal, chiết khấu, discount, discount_bill, payment_points, payment_coupons, fee, tax, Điểm tích lũy cộng thêm\r\n   */\r\n  updateBillCalculations() {\r\n    // subTotal\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      else if (i.products) {\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0);\r\n    }\r\n    this.subTotal = subTotal;\r\n\r\n    // chiết khấu\r\n    if (this.is_discount_bill) {\r\n      this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer).discount : 0;\r\n      this.invoice.discount_bill = this.discount_bill;\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = 0;\r\n    }\r\n\r\n    // total\r\n    this.invoice.total = Math.max(0, this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee);\r\n\r\n    // tax\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n    \r\n    // payment\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0;\r\n    } \r\n    else {\r\n      this.invoice.payment = this.invoice.total + this.taxValue;\r\n    }\r\n\r\n    // cash\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0;\r\n    else this.invoice.cash = 0;\r\n\r\n    // earning_point\r\n    this.getTotalEarningPoint();\r\n    \r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(this.invoice, this.invoice_detail);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoice_detail)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoice_detail, this.default_price_type);\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------- MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------- */\r\n  \r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  isShowModalEditUsedTime: boolean = false;\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  tempStartTime: any;\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  tempEndTime: any;\r\n  \r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.selectedServiceTime.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.selectedServiceTime.is_paused) {\r\n      this.tempEndTime = this.selectedServiceTime.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.selectedServiceTime.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.selectedServiceTime.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.selectedServiceTime.is_paused = true;\r\n    }\r\n\r\n    this.selectedServiceTime.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n    this.selectedServiceTime.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n    this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.selectedServiceTime.time_end_order = new Date();\r\n    this.selectedServiceTime.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.selectedServiceTime, this.endTime, this.default_price_type);\r\n    this.selectedServiceTime.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.selectedServiceTime.price = serviceTimePrice.total_price;\r\n    this.selectedServiceTime.price_origin = serviceTimePrice.total_price;\r\n    this.updateBillCalculations();\r\n  }\r\n\r\n\r\n\r\n  /** Sẽ in hóa đơn ay không sau khi nhấn Thanh toán và hiện modal Thông tin thanh toán */\r\n  willPrintInvoice: boolean = false;\r\n  /** Hiển thị modal Thông tin thanh toán hay không */\r\n  isShowModalPaymentInfo: boolean = false;\r\n\r\n  /**\r\n   * Mở modal Thông tin thanh toán\r\n   */\r\n  openModalPaymentInfo(print: boolean = false) {\r\n    this.updateServiceTime();\r\n    this.willPrintInvoice = print;\r\n    this.isShowModalPaymentInfo = true;\r\n  }\r\n\r\n\r\n\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ];\r\n  /**\r\n   * Lấy label của phương thức thanh toán\r\n   * @param value value của phương thức thanh toán cần lấy label\r\n   * @returns label của phương thức thanh toán \r\n   */\r\n  getPaymentTypeLabel(value) {\r\n    if(value[1]) {\r\n      let wallet = this.vhQuerySales.getlocalWallets().find(item => item._id == value[1]);\r\n      if(wallet) return `${this.nzOptions.filter(item => item.value == value[0])?.[0]?.label} / ${wallet.name}`;\r\n    }\r\n    else {\r\n      return this.nzOptions.filter(item => item.value == value[0])?.[0]?.label;\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}| <b> {{'Edit sales invoice' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\" [ngClass]=\"showBestSelling ? 'show-best-selling':'hide-best-selling'\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <!-- Tiêu đề -->\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Select product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <!-- Chọn giá bán -->\r\n                    <div *ngIf=\"isFromInvoice\">\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"showModalChangePriceType = true\">\r\n                            {{'Choose selling price' | translate}}</button>\r\n                    </div>\r\n                    <!-- Tìm sản phẩm -->\r\n                    <div>\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}</button>\r\n                    </div>\r\n                    <!-- Lưu tạm -->\r\n                    <div *ngIf=\"invoice.bill_type == 5\">\r\n                        <button [disabled]=\"  !invoice_detail.length\" (click)=\"updateServiceTime(); payInvoice(5)\"\r\n                            class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                            {{'Temporary' | translate}} (F3)</button>\r\n                    </div>\r\n                </div>\r\n                <!-- Chưa có sản phẩm nào được chọn -->\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <!-- Số lượng sản phẩm đang thanh toán -->\r\n                <div>\r\n                    {{'Number of products being paid for:' | translate}} <span><b>{{getNumbersProduct() | number:'1.0-2'}}</b></span>\r\n                </div>\r\n\r\n                <!-- Danh sách bill details -->\r\n                <ng-container>\r\n                    <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail,index as i\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"24\">\r\n                                <ng-container [ngSwitch]=\"item.pmtype\">\r\n                                    <ng-container *ngSwitchCase=\"1\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\">\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"2\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"3\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"4\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"5\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"data.note\" />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"6\">\r\n                                        <div nz-row *ngIf=\"item.products?.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGift = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <!-- <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" >\r\n                                                \r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                 \r\n                                            </div>\r\n                                            <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\" style=\" margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div> -->\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                        <br>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                    <!-- Ghi chú -->\r\n                                                    <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                      <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                        [placeholder]=\"'Note' | translate\" \r\n                                                        [(ngModel)]=\"data.note\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                \r\n                                                    </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"7\">\r\n                                        <div nz-row *ngIf=\"item.products_gift.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGiftType7 = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                    <!-- Ghi chú -->\r\n                                                    <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                      <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                        [placeholder]=\"'Note' | translate\" \r\n                                                        [(ngModel)]=\"data.note\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div nz-row>\r\n                                            <div nz-popconfirm\r\n                                                nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                                                (nzOnConfirm)=\"deleteGoods(item)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{item.name}}</p>\r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"item.combos\">\r\n                                                    <span *ngFor=\"let combo of item.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == item.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ' :\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        <ng-container *ngIf=\"combo.id_lotproduct\">\r\n                                                            <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                                (click)=\"openModalChooseLot(combo)\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre>\r\n                                                        </ng-container>\r\n                                                    </span>\r\n                                                </p>\r\n                                                <!-- Dịch vụ thời gian -->\r\n                                                <div *ngIf=\"item.ptype === VhType.SERVICETIME\"\r\n                                                    (click)=\"editServiceTime(item, i)\" \r\n                                                    class=\"bill-detail-area-item-time\">\r\n                                                    <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                                                    <p *ngIf=\"item.time_end_order\"\r\n                                                        [ngStyle]=\"{'color': item.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n                                                        {{'Estimated until' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                                                    </p>\r\n                                                    <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                                                        <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                                                    </ng-container>\r\n                                                </div>\r\n                                                <!-- Ghi chú -->\r\n                                                <div *ngIf=\"vhAuth.localStorageGET('show_note_for_each_product')\">\r\n                                                  <input nz-input nzBorderless class=\"bill-detail-note\" style=\"text-align: left !important;\"\r\n                                                    [placeholder]=\"'Note' | translate\" \r\n                                                    [(ngModel)]=\"item.note\" />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <!-- Đơn vị -->\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n                                                <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                    <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                                        (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"1\"></nz-option> -->\r\n                                                        <nz-option *ngFor=\"let i of item.units\" [nzLabel]=\"i.unit\"\r\n                                                            [nzValue]=\"i.ratio\"></nz-option>\r\n                                                    </nz-select>\r\n                                                    <!-- {{item.unit}} -->\r\n                                                </ng-container>\r\n                                            </div>\r\n\r\n                                            <div nz-col [nzSpan]=\" show_discount_product ? '2' : '4'\"\r\n                                                style=\"text-align: center;\">\r\n                                                <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n                                                <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                    <!-- {{item.quantity}} -->\r\n                                                    <nz-input-number style=\"width:80%;\" [nzMax]=\"9999999999\" [nzMin]=\"0.1\"\r\n                                                        [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event )\" id=\"quantity\">\r\n                                                    </nz-input-number>\r\n                                                </ng-container>\r\n                                            </div>\r\n                                            <!-- Dịch vụ thời gian không hiện giá -->\r\n                                            <ng-container *ngIf=\"item.ptype === VhType.SERVICETIME\">\r\n                                                <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\" style=\"padding-top: 8px; border-bottom: 0;\"></div>\r\n                                                <div *ngIf=\"show_discount_product\" nz-col nzSpan=\"2\" style=\"text-align: center; align-self: center; padding-top:8px\"></div>\r\n                                            </ng-container>\r\n                                            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                                <div class=\"invoiceDetail-item-quantity text-end \" nz-col nzSpan=\"4\"\r\n                                                    style=\"padding-top:8px;\" (click)=\"openEditUnitPrice(item)\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{item.price_origin > item.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                                                    </del>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                            <div *ngIf=\"show_discount_product\" nz-col nzSpan=\"2\"\r\n                                                style=\"text-align: center;align-self: center;padding-top:8px\">\r\n                                                <span style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;\">\r\n                                                    <span nz-icon nzType=\"arrow-down\" nzTheme=\"outline\"\r\n                                                        style=\"font-size: 0.7rem;\"></span> {{(item.price_origin >\r\n                                                    item.price ? ((1 - item.price/item.price_origin)*100) : 0) |\r\n                                                    number:'1.0-2'}}%\r\n                                                </span>\r\n                                                <!-- <nz-input-number style=\"width:80%;\" [nzMax]=\"100\" [nzMin]=\"0\"\r\n                                                [nzStep]=\"1\" [nzFormatter]=\"formatterPercent\"\r\n                                                [nzParser]=\"parserPercent\"\r\n                                                [(ngModel)]=\"item.percent_discount_product\"\r\n                                                (nzBlur)=\"changePercentDiscountBillDetail(item )\">\r\n                                            </nz-input-number> -->\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\"\r\n                                                style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;text-align: end;align-self: center;padding-top:8px\">\r\n                                                <!-- <p class=\"max-width-two-line\"> -->\r\n                                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                                                <!-- </p> -->\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n\r\n            <!-- Khuyến mãi -->\r\n            <div *ngIf=\"isFromInvoice\" nz-row>\r\n                <div>\r\n                    <button nz-button nzType=\"primary\" (click)=\"getPromotions()\">\r\n                        <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Promotions' | translate}}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Best selling -->\r\n        <div class=\"sales-best-selling\" *ngIf=\"showBestSelling\" style=\"padding: 0 8px;\">\r\n            <app-best-selling (chooseBestSelling)=\"closeSearchProductList($event)\"\r\n                [default_price_type]=\"default_price_type\">\r\n            </app-best-selling>\r\n        </div>\r\n\r\n        <!-- --------------------------------------------------------- Thông tin bill ---------------------------------------------------------- -->\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <!-- Tên nhân viên -->\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <ng-container *ngIf=\"isFromInvoice\">\r\n                            <app-staff [id_employee]=\"invoice.id_employee\"\r\n                                (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                        </ng-container>\r\n                        <ng-container *ngIf=\"!isFromInvoice\">\r\n                            <span>{{vhAuth.getlocalEmployee(invoice.id_employee)?.name}}</span>\r\n                        </ng-container>\r\n                    </div>\r\n                    <!-- Ngày -->\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Sales date' | translate}}</b>\r\n                        <nz-date-picker  [nzDisabled]=\"!isFromInvoice || !sales_enable_edit_create_date\" [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless\r\n                            nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Thông tin khách hàng -->\r\n            <div class=\"sales-bills-customer\" nz-row style=\"overflow-y: auto;\">\r\n                <div class=\"sales-bills-customer-title\">\r\n                    <b>{{'Customer information' | translate}}\r\n                    </b>\r\n                    <ion-icon *ngIf=\"isFromInvoice\" (click)=\"openDrawerAddCustomerOrRetail()\"\r\n                        style=\"color: var(--ion-color-vh-white);padding-right: 5px;\"\r\n                        [src]=\"invoice.retail_name ? 'assets/icon/eye.svg':'assets/icon/add.svg'\">\r\n                    </ion-icon>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" style=\"margin: 8px 0;\">\r\n                    <nz-radio-group [(ngModel)]=\"radioValue\" (ngModelChange)=\"changeCustomerType($event)\"\r\n                        nzName=\"radiogroup\"\r\n                        [nzDisabled]=\"!isFromInvoice\">\r\n                        <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n                        <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n                        <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n                    </nz-radio-group>\r\n\r\n                    <!-- <a *ngIf=\"radioValue == 2\" nz-dropdown [nzDropdownMenu]=\"menu\" nzTrigger=\"click\"\r\n                        (click)=\"getTotalEarningPoint()\">\r\n                        {{'View points' | translate}}\r\n                    </a> -->\r\n                    <!-- <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n                        <ul nz-menu nzSelectable>\r\n                            <li nz-menu-item>Điểm tích lũy hiện tại : <b>{{customer.earning_point ?\r\n                                    customer.earning_point : 0 }}</b></li>\r\n                            <li nz-menu-item>Điểm tích lũy cộng thêm : <b> {{earning_point}}</b></li>\r\n                        </ul>\r\n                    </nz-dropdown-menu> -->\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <ng-container *ngIf=\"radioValue == 1 && invoice.retail_name\">\r\n                        {{invoice.retail_name}} - {{invoice.retail_phone}} {{invoice.retail_address ? '-':\r\n                        ''}} {{invoice.retail_address}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"radioValue == 2\">\r\n                        <ng-container *ngIf=\"isFromInvoice\">\r\n                            <app-customer [id_customer]=\"invoice.id_customer\"\r\n                                (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-customer>\r\n                        </ng-container>\r\n                        <ng-container *ngIf=\"!isFromInvoice\">\r\n                            <span>{{vhQuerySales.getlocalCustomer(invoice.id_customer)?.name}}</span>\r\n                        </ng-container>\r\n                        <i (click)=\"openInfoCustomer()\"\r\n                            [ngClass]=\"invoice.id_customer !='id_retail' ? 'active' : 'deactive'\"\r\n                            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"radioValue == 3\">\r\n                        <app-search-customer [id_customer]=\"invoice.id_customer\"\r\n                            (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-search-customer>\r\n                        <i (click)=\"openInfoCustomer()\"\r\n                            [ngClass]=\"invoice.id_customer !='id_retail' ? 'active' : 'deactive'\"\r\n                            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n                    </ng-container>\r\n\r\n                </div>\r\n                <!-- <span *ngIf=\"radioValue == 2\">\r\n                    {{'Additional points' | translate}} : {{getTotalEarningPoint(\r\n                    {{'Accumulated points' | translate}} : {{customer.earning_point ? customer.earning_point : 0}}\r\n                </span> -->\r\n\r\n                <!-- Điểm -->\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"radioValue == 2 && invoice.id_customer != 'id_retail'\"\r\n                    style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n                    <span>\r\n                        {{'Accumulated points' | translate}} : <b>{{point_validity}}</b>\r\n                    </span>\r\n                    <span>\r\n                        {{'Plus' | translate}} : <b>{{getTotalEarningPoint()}}</b>\r\n                    </span>\r\n                </div>\r\n\r\n                <!-- Giao hàng -->\r\n                <div *ngIf=\"isFromInvoice\" style=\"align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Delivery' | translate}} <i\r\n                            style=\"color: var(--ion-color-vh-green);cursor: pointer;margin-left: 4px;\" nz-tooltip\r\n                            nzTooltipPlacement=\"top\" [nzTooltipTitle]=\"'Check shipping fee'|translate\"\r\n                            *ngIf=\"invoice.id_delivery\" (click)=\"visibleCheckFees=true\" nz-icon nzType=\"file-search\"\r\n                            nzTheme=\"outline\"></i></b>\r\n                    <app-delivery [id_delivery]=\"invoice.id_delivery\"\r\n                        (closeAndReceiveDelivery)=\"closeAndReceiveDelivery($event)\"></app-delivery>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Thông tin thanh toán -->\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <!-- Thêm thanh toán khác -->\r\n                <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n                    <b>{{'Payment information' | translate}}</b>\r\n                    <span *ngIf=\"isFromInvoice\" \r\n                        (click)=\"openModalOtherDiscount()\" style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        {{'Add other payment' |translate}}\r\n                    </span>\r\n                </div>\r\n\r\n                <!-- Cộng tiền -->\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n\r\n                <!-- Giảm giá -->\r\n                <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n                    <div class=\"sales-bills-content-discount\"\r\n                        style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                        <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                        <div>\r\n                            <input id=\"percent-discount-price\" style=\"width: 50px;\" #percentDiscount type=\"number\"\r\n                                max=\"100\" min=\"0\" step=\"1\" (blur)=\"updateServiceTime(); editPercentDiscount(percentDiscount.value)\"\r\n                                [ngModel]=\"percent_discount_bill | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                                nz-input />%\r\n                        </div>\r\n                        <input (blur)=\"updateServiceTime(); editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                            class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                            nz-input />\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <!-- Chiết khấu -->\r\n                <div *ngIf=\"discount_bill >0\" class=\"sales-bills-content-discount\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div style=\"width: auto;\">{{'Discount' | translate}}\r\n                    </div>\r\n                    <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}}</span>\r\n                </div>\r\n\r\n                <!-- Thanh toán điểm -->\r\n                <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Point payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n                </div>\r\n\r\n                <!-- Thanh toán coupon -->\r\n                <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Coupon payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n                </div>\r\n\r\n                <!-- Phí -->\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"updateServiceTime(); editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"border_bottom invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n\r\n                <!-- Thuế -->\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"updateServiceTime(); changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"7\" style=\"text-align: end;\">\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n\r\n                <!-- Tổng -->\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n\r\n                <!-- Thanh toán -->\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <div>\r\n                        <b>{{'Pay' | translate}}</b>\r\n                        <ng-container *ngIf=\"product_gift_type7.length && !gotten_gift_type7\">\r\n                            <i style=\"font-size: 1rem;  margin-left: 8px; cursor: pointer;color: var(--ion-color-vh-green)\"\r\n                                nz-icon nzType=\"gift\" nzTheme=\"outline\" (click)=\"showProductGiftType7 = true\"></i>\r\n                        </ng-container>\r\n\r\n                    </div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit(invoice.payment)}}<img (click)=\"showModalEditTotalPay()\"\r\n                            *ngIf=\"invoice.payment_type != 2\" style=\"width: 16px;margin-left:10px\"\r\n                            src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n                </div>\r\n\r\n                <!-- Nợ lại -->\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                    <div>{{'Rest' | translate}}</div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit_symbol(getTotalATax() - invoice.payment)}}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Phương thức thanh toán -->\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <app-tax [disabled]=\"!isFromInvoice\"\r\n                        [payment_type]=\"invoice.payment_type\" [id_wallet]=\"invoice.id_wallet\"\r\n                        [id_customer]=\"invoice.id_customer\" (closeAndGetValuePayment)=\"updateServiceTime(); closeAndGetValuePayment($event)\">\r\n                    </app-tax>\r\n                </div>\r\n\r\n                <!-- Tiền khách đưa -->\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"isFromInvoice && vhAuth.localStorageGET('show_cash')\"\r\n                    style=\"margin-top: 10px;\">\r\n                    <div>{{'cash' | translate}}</div>\r\n                    <input style=\"text-align: end;width: 35%;\" type=\"text\" #cash maxlength=\"15\" nz-input\r\n                        [disabled]=\"invoice.payment_type == 2\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.cash)\"\r\n                        class=\"customerPay border_bottom\" (keyup)=\"updateServiceTime(); updateCash(cash.value)\" />\r\n                </div>\r\n\r\n                <!-- Tiền thối lại -->\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"isFromInvoice && vhAuth.localStorageGET('show_cash')\">\r\n                    <div>{{'Change' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.cash - invoice.payment > 0 ? this.invoice.cash -\r\n                        invoice.payment : 0)}}</div>\r\n                </div>\r\n\r\n                <!-- Ghi chú -->\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <textarea [disabled]=\"!isFromInvoice\"\r\n                        class=\"nz-hover-border\" [(ngModel)]=\"invoice.note\" (blur)=\"updateServiceTime(); edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Danh sách nút -->\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <!-- Lưu và in -->\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"openModalPaymentInfo(true)\" nz-button\r\n                    class=\"order-and-print\">\r\n                    {{'Save & Print' | translate}} (F2)\r\n                </button>\r\n                <!-- Lưu -->\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"openModalPaymentInfo(false)\" nz-button class=\"order\">\r\n                    {{'Save' | translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<!-- Search product -->\r\n<app-search-product [searchProductList]=\"searchProductList\" (closeSearchProductList)=\"closeSearchProductList($event)\"\r\n    [default_price_type]=\"default_price_type\">\r\n</app-search-product>\r\n\r\n<!--Modal edit unit price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'New unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\"\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(tempDetail.price)\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" (keyup.enter)=\"handleEditUnit()\"\r\n                    (blur)=\"getValueDiscount(tempDetail.price_origin);\" />\r\n            </div>\r\n\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\">\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'Discount value' | translate}}</div>\r\n            <div nz-col nzSpan=\"10\">\r\n                <input class=\"unit_price_discount\" type=\"text\" maxlength=\"15\" [value]=\"discount_price_bill_detail\"\r\n                    nz-input placeholder=\"{{'Enter unit price' | translate}}\"\r\n                    (blur)=\"caculateDiscountPrice_billDetail()\" />\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                <button style=\"border-radius: 0px !important;width:44px;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount('%');\"\r\n                    [nzType]=\"default_discount_price_type == '%' ? 'primary' : 'default'\">%</button>\r\n                <button style=\"border-radius: 0px !important;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount(symbol);\"\r\n                    [nzType]=\"default_discount_price_type == symbol ? 'primary' : 'default'\">{{symbol}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!--Modal edit pay-->\r\n<nz-modal [(nzVisible)]=\"edit_pay\" [nzFooter]=\"modalFooterEditPay\" nzTitle=\"{{'Edit' | translate}}\"\r\n    (nzOnCancel)=\"handleCancelEditPay()\" (nzOnOk)=\"handleEditPay()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Pay' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice.payment)\" class=\"edit-pay\" type=\"text\" maxlength=\"15\"\r\n                    nz-input />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditPay>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"updateServiceTime(); handleCancelEditPay()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"updateServiceTime(); handleEditPay()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal [(nzVisible)]=\"showModalOtherDiscount\" nzTitle=\"{{'Other payment' | translate}}\" nzWidth=\"50vw\"\r\n    (nzOnCancel)=\"updateServiceTime(); showModalOtherDiscount = false\" nzCancelText=\"\" (nzOnOk)=\"updateServiceTime(); handleOkOtherDiscount()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{\"Coupon\" | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n                <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\"\r\n                    (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n                <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                    (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\"></div>\r\n            <div nz-col nzSpan=\"18\">\r\n                <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                    (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <div nz-row class=\"center-all-content mt-8\">\r\n                <div nz-col nzSpan=\"6\">\r\n                    {{\"Accumulated points\" | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                        nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                        (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                    {{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"mt-8\">\r\n                <div nz-col nzSpan=\"14\">\r\n                    <label>{{\"Point conversion rate\" | translate}}:\r\n                        {{customer_class.payment.points}} Điểm =\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                    {{'Current accumulated points' | translate}} : {{point_validity }}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div nz-row class=\"mt-8 beetween-all-content\">\r\n            <b>{{'Total discount' | translate}}</b>\r\n            <b>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points + invoice.payment_coupons)}}</b>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGift\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGift = false\" (nzOnOk)=\"showProductGift = false;getEarningpointPromotion()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"invoice_detail\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.pmtype == 6\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                                <span *ngFor=\"let data of item.products\">\r\n                                    {{data.name}}({{data.unit}}) x{{data.quantity}} <br>\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of gifted products' | translate }} :</b>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n\r\n\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                            [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGiftType7\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGiftType7 = false\" (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.products_gift\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n            style=\"width:100%;padding: 8px 0;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"6\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                                {{'Stock' | translate}}:\r\n                                <span\r\n                                    style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/tempDetail.ratio\r\n                                    | number : '1.0-2'}}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD cho combo-->\r\n<nz-modal nzWidth=\"70vw\" *ngIf=\"show_modal_select_lots_combo\" [nzFooter]=\"modalFooterEditUnitPrice3\"\r\n    [(nzVisible)]=\"show_modal_select_lots_combo\"\r\n    nzTitle=\"{{'Select lot number for products in combo' | translate}}: {{tempDetail.name}}\"\r\n    (nzOnCancel)=\"show_modal_select_lots_combo = false\" (nzOnOk)=\"handleChooseLotCombo()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"tempDetail.combos\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\">{{\"Product name\" | translate}}</th>\r\n                    <th nzWidth=\"30%\">{{'Lot number' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Unit' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Quantity' | translate}}</th>\r\n                    <th nzWidth=\"20%\" nzAlign=\"right\">{{'Unit price' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let data of basicTable.data\">\r\n                    <ng-container *ngIf=\"data.lots\">\r\n\r\n                        <tr>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\" style=\"width: 100%;\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date: 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_select_lots_combo = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLotCombo()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- --------------visible drawer info customer----------- -->\r\n<app-customer-profile *ngIf=\"isFromInvoice && visibleInfoCustomer\" [visibleInfoCustomer]=\"visibleInfoCustomer\" [customer]=\"customer\"\r\n    (closeInfoCustomer)=\"closeInfoCustomer($event)\"></app-customer-profile>\r\n\r\n<nz-drawer *ngIf=\"!isFromInvoice\" \r\n    [nzMaskClosable]=\"true\" \r\n    [nzWidth]=\"400\" \r\n    [nzVisible]=\"visibleInfoCustomer\"\r\n    (nzOnClose)=\"visibleInfoCustomer = false\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Customer type' | translate}}:</b><span> {{(customer.isBusiness ? 'Business/Business household' : 'Individual') | translate}}</span>\r\n        </div>\r\n        <ng-container *ngIf=\"customer.isBusiness\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <b>{{'Tax code' | translate}}:</b><span> {{customer.taxcode}}</span>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!customer.isBusiness\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <b>{{'Gender' | translate}}:</b><span> {{customer.gender | translate}}</span>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n            </div>\r\n        </ng-container>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n        </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>\r\n\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCusomer\" [showDrawerAddCusomer]=\"showDrawerAddCusomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\"></app-add-customer>\r\n\r\n<!-- đổi giá bán -->\r\n<app-change-price-type *ngIf=\"showModalChangePriceType\" [showModalChangePriceType]=\"showModalChangePriceType\"\r\n    (changePriceType)=\"changePriceType($event)\" [default_price_type]=\"default_price_type\"></app-change-price-type>\r\n\r\n<app-check-fees *ngIf=\"visibleCheckFees\" [visibleCheckFees]='visibleCheckFees' [id_delivery]=\"invoice.id_delivery\"\r\n    (hideModalCheckFees)=\"visibleCheckFees = $event\" [id_customer]=\"invoice.id_customer\">\r\n</app-check-fees>\r\n<!-- --------------------add retail---------------------- -->\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n    [retail_name]=\"invoice.retail_name\" [retail_phone]=\"invoice.retail_phone\" [retail_address]=\"invoice.retail_address\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\"></app-retail-info>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA DỊCH VỤ THỜI GIAN ------------------------------------------------ -->\r\n<nz-modal\r\n    *ngIf=\"selectedServiceTime\"\r\n    (nzOnCancel)=\"saveServiceTime()\"\r\n    [(nzVisible)]=\"isShowModalEditServiceTime\"\r\n    [nzTitle]=\"selectedServiceTime.name\"\r\n    [nzFooter]=\"null\"\r\n    nzWidth=\"40vw\">\r\n    <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body modal-edit\" style=\"max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n        <!-- Tiêu đề -->\r\n        <div class=\"flex-between\" style=\"margin-bottom: 8px; font-size: 0.95rem;\">\r\n            <b>{{'Used time' | translate}}</b>\r\n            <b>{{'Drafted' | translate}}</b>\r\n        </div>\r\n    \r\n        <div>\r\n            <!-- First time -->\r\n            <div *ngIf=\"selectedServiceTime.units[0].is_first_time\" class=\"flex-between\">\r\n            <div>\r\n                <span>{{'First time block' | translate}} - {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}} {{'first' | translate}}</span>\r\n                <small style=\"display: block;\">*{{'Time less than' | translate}} {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}} {{'will be rounded up to' | translate}} {{selectedServiceTime.units[0].first_time.time_block}} {{selectedServiceTime.units[0].first_time.unit | translate}}</small>\r\n                <p style=\"margin-top: 0.25rem;\">{{selectedServiceTime.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{selectedServiceTime?.serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            </div>\r\n            <div>\r\n                <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.first_time?.price)}}</p>\r\n            </div>\r\n            </div>\r\n    \r\n            <!-- Special time -->\r\n            <div *ngIf=\"selectedServiceTime.units[0].is_special_times && selectedServiceTime?.serviceTimePrice?.special_times?.length\" style=\"margin-bottom: 1rem;\">\r\n            <span>{{'Special time' | translate}}</span>\r\n            <div *ngFor=\"let specialTime of selectedServiceTime?.serviceTimePrice?.special_times\" class=\"flex-between\">\r\n                <p style=\"margin-bottom: 0\">{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, selectedServiceTime.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}})</p>\r\n                <p style=\"margin-bottom: 0\">{{vhAlgorithm.vhcurrencyunit(specialTime.total_price)}}</p>\r\n            </div>\r\n            </div>\r\n    \r\n            <!-- Merge block -->\r\n            <div *ngIf=\"selectedServiceTime.units[0].is_merge_block\" class=\"flex-between\">\r\n            <div>\r\n                <span>{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime?.serviceTimePrice?.merge_block?.price)}} / 1 block</span>\r\n                <p style=\"margin-top: 0.25rem;\">{{selectedServiceTime?.serviceTimePrice?.merge_block?.count}} block = {{selectedServiceTime?.serviceTimePrice?.merge_block?.duration}} {{selectedServiceTime.units[0].unit | translate}} (1 block = {{selectedServiceTime?.serviceTimePrice?.merge_block?.time_per_block}} {{selectedServiceTime.units[0].unit | translate}})</p>\r\n            </div>\r\n            <div>\r\n                <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.merge_block?.total_price)}}</p>\r\n            </div>\r\n            </div>\r\n    \r\n            <!-- Normal time -->\r\n            <div *ngIf=\"selectedServiceTime?.serviceTimePrice?.time_used\" class=\"flex-between\">\r\n            <div>\r\n                <span>{{'Regular selling time' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime.units[0].price)}} / {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}}</span>\r\n                <small style=\"display: block;\">*{{'Time less than' | translate}} {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{selectedServiceTime.units[0].time_block}} {{selectedServiceTime.units[0].unit | translate}}</small>\r\n                <p style=\"margin-top: 0.25rem;\">{{productService.generateTimeFromValue(selectedServiceTime?.serviceTimePrice?.time_used, selectedServiceTime?.serviceTimePrice?.unit)}}</p>\r\n            </div>\r\n            <div>\r\n                <p>{{vhAlgorithm.vhcurrencyunit(selectedServiceTime?.serviceTimePrice?.price)}}</p>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    \r\n        <!-- Thành tiền -->\r\n        <div class=\"flex-between\">\r\n            <p>{{'From' | translate}} <b>{{selectedServiceTime.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> {{'to' | translate}} <b>{{selectedServiceTime?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> <br> <b>({{productService.generateTimeUseString(selectedServiceTime.time_start_order, selectedServiceTime?.time_end_order)}})</b></p>\r\n            <b style=\"font-size: 1rem;\">{{'Total' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(selectedServiceTime?.serviceTimePrice?.total_price)}}</b>\r\n        </div>\r\n    \r\n        <div class=\"flex-between\" style=\"margin: 16px 0;\">\r\n            <!-- Tạm ngưng / Tiếp tục tính giờ -->\r\n            <i (click)=\"pauseTime(!selectedServiceTime?.is_paused)\" style=\"text-align: right; color: var(--ion-color-vh-orange); cursor: pointer;\">{{(selectedServiceTime?.is_paused ? 'Continue timing' : 'Pause timing') | translate}}</i>\r\n            <hr style=\"background-color: #f0f0f0; flex: auto;\">\r\n            <!-- Chỉnh sửa thời gian sử dụng -->\r\n            <i (click)=\"handleOpenEditUsedTime()\" style=\"text-align: right; color: var(--ion-color-vh-green); cursor: pointer;\">{{'Edit usage time'| translate}}</i>\r\n        </div>\r\n    \r\n        <!-- Ghi chú -->\r\n        <div class=\"order-div-note1\" nz-col nzSpan=\"24\">\r\n            <b>{{'Note' | translate}}</b>\r\n            <input class=\"order-note\" nz-input\r\n            [(ngModel)]=\"selectedServiceTime.note\"\r\n            [placeholder]=\"'Enter note' | translate\" />\r\n        </div>\r\n    </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n<nz-modal\r\n    [(nzVisible)]=\"isShowModalEditUsedTime\"\r\n    (nzOnCancel)=\"isShowModalEditUsedTime = false\"\r\n    (nzOnOk)=\"handleUpdateUsedTime()\"\r\n    [nzTitle]=\"'Edit used time' | translate\"\r\n    [nzFooter]=\"modalFooterEditUsedTime\" >\r\n\r\n    <ng-container *nzModalContent>\r\n    <div nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'_Started at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n            nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n            nzShowTime\r\n            [nzAllowClear]=\"false\"\r\n            style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'Ended at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n            nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n            nzShowTime\r\n            nzAllowClear\r\n            style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 32px\">\r\n        <p style=\"margin-bottom: 4px\"><b>*{{'_Note' | translate}}:</b></p>\r\n        <p style=\"margin-bottom: 0px\">{{'The start time must be less than or equal to the current time.' | translate}}</p>\r\n        <p style=\"margin-bottom: 0px\">{{'The end time must be greater than the start time.' | translate}}</p>\r\n    </div>\r\n    </ng-container>\r\n\r\n    <ng-template #modalFooterEditUsedTime>\r\n    <button (click)=\"isShowModalEditUsedTime = false\"\r\n        nz-button class=\"nz-hover-border\" nzType=\"default\"\r\n        style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\">{{'Cancel' |translate}}</button>\r\n    <button [disabled]=\"!tempStartTime\"\r\n        (click)=\"handleUpdateUsedTime()\"\r\n        nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n        class=\"nz-hover-border-green\">{{'Ok' | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------- MODAL HIỂN THỊ THÔNG TIN THANH TOÁN ----------------------------------------------- -->\r\n<nz-modal \r\n    [nzMaskClosable]=\"false\" \r\n    [nzFooter]=\"modalFooterPrintKitchen\"\r\n    [(nzVisible)]=\"isShowModalPaymentInfo\"\r\n    (nzOnCancel)=\"isShowModalPaymentInfo = false\" \r\n    (nzOnOk)=\"payInvoice(1, willPrintInvoice)\"\r\n    [nzTitle]=\"'Payment information' | translate\" >\r\n    <ng-container *nzModalContent>\r\n        <div class=\"sales-bills-content\" style=\"overflow: auto; box-shadow: none; display: flex; flex-direction: column; gap: 10px;\">\r\n            <!-- Cộng tiền -->\r\n            <div nz-col nzSpan=\"24\">\r\n                <div>{{'SubTotal' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n            </div>\r\n    \r\n            <!-- Giảm giá -->\r\n            <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n                <div style=\"display: flex;justify-content: space-between; align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <!-- % -->\r\n                    <span>{{percent_discount_bill | number:'1.0-2'}} %</span>\r\n                    <!-- Value -->\r\n                    <span class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</span>\r\n                </div>\r\n            </ng-container>\r\n    \r\n            <!-- Chiết khấu -->\r\n            <div *ngIf=\"discount_bill\" style=\"display: flex;justify-content: space-between; align-items: center;\"\r\n                nz-col nzSpan=\"24\">\r\n                <div>{{'Discount' | translate}}\r\n                </div>\r\n                <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}} </span>\r\n            </div>\r\n    \r\n            <!-- Thanh toán điển -->\r\n            <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Point payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n            </div>\r\n    \r\n            <!-- Thanh toán phiếu -->\r\n            <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Coupon payment' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n            </div>\r\n    \r\n            <!-- Phí -->\r\n            <div nz-row *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                <div nz-col nzSpan=\"12\">{{'Fee' | translate}}</div>\r\n                <span nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</span>\r\n            </div>\r\n    \r\n            <!-- Thuế -->\r\n            <div class=\"order-bill-contain-bill-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                <div>{{'Tax' | translate}}</div>\r\n                <div *ngIf=\"data\">\r\n                    <span>{{data.tax}}%</span>\r\n                </div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n            </div>\r\n    \r\n            <!-- Tổng -->\r\n            <div class=\"order-bill-contain-bill-total\" nz-col nzSpan=\"24\">\r\n                <div>{{'Total' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n            </div>\r\n    \r\n            <!-- Thanh toán -->\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <b>{{'Pay' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" style=\"text-align: end;\">\r\n                    <b class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoice.payment)}}</b>\r\n                </div>\r\n            </div>\r\n    \r\n            <!-- Nợ lại -->\r\n            <div class=\"order-bill-contain-bill-rest\" nz-col nzSpan=\"24\"\r\n                *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                <div>{{'Rest' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit_symbol(getTotalATax() - invoice.payment)}}</div>\r\n            </div>\r\n    \r\n            <!-- Phương thức thanh toán -->\r\n            <div nz-col nzSpan=\"24\">\r\n                <div>{{'Payment method' | translate}}</div>\r\n                <span nz-col nzSpan=\"12\" class=\"text-end payment-price\">{{getPaymentTypeLabel(!invoice.id_wallet || invoice.id_wallet === 'id_cash' ? [invoice.payment_type] : [invoice.payment_type, invoice.id_wallet])}}</span>\r\n            </div>\r\n    \r\n            <!-- Tiền khách đưa -->\r\n            <div nz-row *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                <div nz-col nzSpan=\"12\">{{'cash' | translate}}</div>\r\n                <div nz-col nzSpan=\"12\" style=\"text-align: end;\" id=\"cash\">\r\n                    <span class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoice.cash)}}</span>\r\n                </div>\r\n            </div>\r\n    \r\n            <!-- Tiền thối lại -->\r\n            <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                <div>{{'Change' | translate}}</div>\r\n                <div>{{vhAlgorithm.vhcurrencyunit(invoice.cash - invoice.payment > 0 ? this.invoice.cash - invoice.payment : 0)}}</div>\r\n            </div>\r\n    \r\n            <!-- Ghi chú -->\r\n            <div nz-col nzSpan=\"24\" id=\"note\" *ngIf=\"vhAuth.localStorageGET('show_note')\"\r\n                style=\"padding-top: 16px;\">\r\n                <span class=\"payment-price\">{{invoice_note}}</span>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterPrintKitchen>\r\n        <div class=\"order-bill-btn\">\r\n            <button [disabled]=\"!invoice_detail.length\" \r\n                (click)=\"payInvoice(1, willPrintInvoice)\" nz-button class=\"order-and-print\">\r\n                {{'Complete' | translate}}\r\n            </button>\r\n        </div>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { ComponentsModule } from 'src/app/sales/sale-desktop/components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SearchModule } from 'src/app/sales/components/search/search.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DetailComponent\r\n  ],\r\n})\r\nexport class SalesDesktopBillType1Module { }\r\n"],"names":["SalesA4Component","SalesA5Component","SalesK80Col4Component","SalesK80Col3Component","SalesK57Col3Component","VhType","i0","data_r58","data_r85","data_r112","data_r139","data_r166","data_r194","data_r225","item_r43","i_r287","ctx_r325","ctx_r327","ctx_r328","ctx_r336","ctx_r342","ctx_r17","ctx_r346","ctx_r20","ctx_r363","ctx_r365","ctx_r368","data_r386","ctx_r384","data_r420","ctx_r419","ctx_r30","ctx_r31","ctx_r33","ctx_r34","ctx_r35","ctx_r36","ctx_r520","AddComponent","constructor","router","vhComponent","languageService","vhQuerySales","vhAlgorithm","vhAuth","cdRef","nzModalService","vhQuery","fncService","plaform","vhEinvoice","productService","billService","bill_type","payment_type","id_customer","id_branch","getDefaultBranch","_id","id_employee","getUser","id_wallet","date","Date","total","payment","tax","discount","fee","note","price_type","id_delivery","payment_points","payment_coupons","discount_bill","earning_points_bill","use_points","cash","getlocalTaxs","filter","status","localStorageGET","getLocalAppSettingNameBranch","display_promotion_selling_price","warning_lot_expried","JSON","parse","localStorage","getItem","symbol","text","value","cqt_invoice_auto_sign","cqt_submit_invoice_immediately","auto_active_quantity_input","label","translate","isLeaf","disabled","children","root","getCurrentNavigation","extras","state","ngOnInit","sales_enable_edit_create_date","owner","checkLocalMyPermissionName","is","connectDisplayLEDScreens","writeBill_BillDetails_toDisplayLEDScreens","invoice","invoice_detail","employee","getlocalEmployee","checkMyPermission","default_price_type","customer","getlocalCustomer","ngOnDestroy","document","removeEventListener","event","disconnectDisplayLEDScreens","eventKeypress","keycode","keyCode","preventDefault","searchProductList","length","updateServiceTime","payInvoice","openModalPaymentInfo","checkPrinter","addEventListener","ngAfterViewInit","listTax","find","item","default","id_tax","printer","getLocalPrintPage","print_sizes","findIndex","e","print_size_default","enable","Promise","all","getEarningPointsBills","getEarningPointsProducts","then","earning_point_bills","earning_points_products","list_earning_point_bills","list_earning_points_products","customer_group","getlocalCustomerClasss","waitingStack","discount_price","querySelector","vhnumeral","invoice_fee","ngAfterViewChecked","detectChanges","getEarningBill","program_bill","subTotal","bill_total_minimum","include_promotion_product","getSubTotalNotPromotion","include_discount","include_paid_points","include_fee","include_tax","exchange","money","points","id_promotion","reduce","prev","next","quantity","price","getSubTotalNotPromotionOFProduct","products_of_program_earnig_product","price_origin","i","id_product","id_subproduct","getEarningProduct","products","program_product","getTotalEarningPoint","earning_point","getTotalEarningPointProduct","product","promotion","deleteGoods","detail","removeInvoiceDetail","setSubTotal","is_discount_bill","setTimeout","getDiscountBillOfCustomer","gotten_gift_type7","handlePromotionType7","bill_details_pmtype_7","deletePromotion","resolve","bill_details","destroyBillDetails_withPromotions","product_gift_type7","openSearchProductList","closeSearchProductList","data","manylot","id_lotproduct","openModalChooseLot","combos","lots","tempDetail","show_modal_select_lots_combo","price2","show_product_mutil_line_sales","addInvoiceDetail","Object","earning_points_product","addBill_Detail","getDiscount_bill_byCustomer","setTotal","changePriceType","showModalChangePriceType","ptype","SERVICETIME","updateServiceTimePrice","serviceTimePrice","price_update","getlocalDetailProduct","getUnit_byRatio","units","ratio","goBack","isExit","navigate","isSync","alertConfirm","checkQuantityProduct","parseFloat","toFixed","changeUnit","ev","unit","openEditUnitPrice","isVisibleEditUnitPrice","default_discount_price_type","unit_price","unit_price_discount","getValueDiscount","getRawValue","discount_price_bill_detail","toString","changePercentDiscountBillDetail","handleEditUnit","alertMessageDesktop","handleCancelEditUnit","caculateDiscountPrice_billDetail","percent_discount_product","changeValueDiscount","closeAndReceiveEmployee","closeAndReceiveCustomer","localCustomer","tax_buyerDisplayName","name","tax_buyerLegalName","tax_buyerTaxCode","taxcode","tax_buyerAddressLine","address","tax_buyerEmail","email","debt_enable","getTotalATax","retail_name","retail_phone","retail_address","getClassAndProgram","getDiscountMethodCustomer","check","getlocalDiscount_bill","customer_class","_a","id_discount_bill","id_customer_class","id_earning_points_bill","id_earning_points_product","point_validity","getlocalCustomerPoints","changeCustomerType","radioValue","confirm","nzTitle","nzCancelText","nzOkText","nzOnOk","clearRetailCustomer","nzOnCancel","closeAndReceiveDelivery","closeAndGetValuePayment","setPaymentType","type","taxValue","setPickerTime","getTime","getStore","registrationdate","formatDate","pickerTime","getValidityDate","validitydate","isGotPromotion","getPromotions","changeTax","setTaxValue","editDiscount","percent_discount_bill","getElementById","openModalOtherDiscount","showModalOtherDiscount","handleOkOtherDiscount","calculatePoint2Money","value_discount_point","editPercentDiscount","getDiscountOfCoupon","code","getCoupon_Code_Name_Release_byCode","product_codes","date_expire","push","getElementsByTagName","onCloseProductCode","splice","editFee","updateCash","replaceAll","showModalEditTotalPay","edit_paytotal","edit_pay","showToast","handleEditPay","handleCancelEditPay","handleMinvoice","bill","reject","currentBranch","getlocalBranch","einvoices","invoiceSeries","changeBill_byLocal_toInvoice_byMinvoice","rsp","console","log","vcode","saveInvoice_Sign_byMinvoice","token","res","cqt_status","updateBill","bool","error","saveInvoice_noSign_byMinvoice","print","save_enable","earned_points","updateCustomer_byEarnedPoints","showLoadingNotDuration","createOrUpdate","promise","Array","updateCouponCode","id_bill","date_used","id_customer_used","asyncPromiseAll","array","bill_code","hideLoading","handlePrint","nzContent","nzIconType","handle","updateAllServiceTimeToPause","getCreateUpdateInvoice","id_shop","createBill_Billdetail","getCreateUpdateInvoiceDetail","checkPrint","rejects","renderPrintPage","temp","forEach","products_gift","choose","showModal","modal","onWillDismiss","err","edit_note","openInfoCustomer","visibleInfoCustomer","closeInfoCustomer","checkDeactivate","currentRoute","currentState","nextState","url","catch","openDrawerAddCustomerOrRetail","showDrawerAddRetail","showDrawerAddCusomer","closeAddCustomer","result","getKeyUp","_event","key","barcode_array","index","toUpperCase","barcode","join","detailproduct","getlocalDetailProduct_byBarcode","nativeElement","blur","_b","handleAddGiftType7","showProductGiftType7","showLoading","bill_details_type_6","bill_details_others","isContainServiceTime","changeBillDetails_withPromotions","bill_details_display","bill_details_pmtype_0to6","handleChooseLotForPromotion","sortNumberbyASC","getEarningpointPromotion","findLastIndex","total_bill_value","min_date_exp","sortDatebyASC","lot_number","element","checkDisableChooseProductGift","promotions_maximum","getUnit","getLotNumber","lot","searchLot","searchList","changeAlias","list_search_lot","show_modal_select_lots","changeLot","handleChooseLot","lot_select","date_exp","handleCancelChooseLot","handleChooseLotCombo","id","notSetSub","total_product_gift","total_products","setPayment","setCash","map","pmtype","time_start_order","time_end_order","is_paused","combo","ele","prod","new_price","toISOString","unshift","focus","select","getNumbersProduct","sum","editServiceTime","selectedServiceTime","updateBillCalculations","isShowModalEditServiceTime","saveServiceTime","calculateServiceTimePrice","endTime","total_price","Math","max","updateServiceTimePriceInvoiceDetail","handleOpenEditUsedTime","tempStartTime","tempEndTime","isShowModalEditUsedTime","handleUpdateUsedTime","currentTime","stringify","pauseTime","isPause","willPrintInvoice","isShowModalPaymentInfo","getPaymentTypeLabel","wallet","getlocalWallets","nzOptions","_c","_d","selectors","viewQuery","ctx","_r22","_r38","_r41","ctx_r53","data_r70","data_r97","data_r124","data_r151","data_r178","data_r206","data_r237","item_r55","i_r300","ctx_r350","ctx_r352","ctx_r353","ctx_r361","ctx_r367","ctx_r24","ctx_r371","ctx_r26","ctx_r27","ctx_r388","ctx_r390","ctx_r393","data_r411","ctx_r409","data_r440","ctx_r439","ctx_r37","ctx_r38","ctx_r39","ctx_r41","ctx_r42","ctx_r43","ctx_r44","ctx_r543","EditComponent","invoiceDetail","replace","dataRestore","isFromInvoice","shop_info","fromType","from_type","includes","platform","updateBill_Billdetail","hostBindings","_r29","_r46","_r49"],"sourceRoot":"webpack:///"}