{"version":3,"file":"default-src_app_sales_interface_vh-sale-invoice_ts.js","mappings":"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","sources":["./src/app/sales/interface/vh-sale-invoice.ts"],"sourcesContent":["import { Platform } from '@ionic/angular';\r\nimport { VhDisplayLEDService, VhQuerySales } from 'ionic-vhframeworks';\r\nexport interface VhSaleInvoiceDetail {\r\n    id_bill?: string;\r\n    _id?: string;\r\n    name?: string;\r\n    id_product?: string;\r\n    // id_category?: string;\r\n    quantity?: number;\r\n    price2?: number;\r\n    price?: number;\r\n    price_origin?: number;\r\n    unit?: string;\r\n    units?: any[];\r\n    ratio?: number;\r\n    ptype?: number;\r\n    cbtype?: number;\r\n    combos?: VhSaleInvoiceDetailCombo[];\r\n    free?: boolean,\r\n    earning_points_product?: number;\r\n    products_gift?: any;\r\n    products?: any;\r\n    id_promotion?: any;\r\n    pmtype?: number;\r\n    promotions_maximum?: any;\r\n    id_subproduct?: string;\r\n    lots?: any[];\r\n    lot_number?: string;\r\n    id_lotproduct?: string;\r\n    percent_discount_product?: number;\r\n}\r\nexport interface VhSaleInvoice {\r\n    bill_type: 1 | 4 | 5 | 36;\r\n    payment_type: 1 | 2 | 3;\r\n    id_customer: 'id_retail' | string;\r\n    tax_buyerDisplayName?: string;\r\n    tax_buyerLegalName?: string;\r\n    tax_buyerTaxCode?: string;\r\n    tax_buyerAddressLine?: string;\r\n    tax_buyerEmail?: string;\r\n    id_branch: string;\r\n    id_employee: string;\r\n    id_wallet: 'id_cash' | string;\r\n    date: string,\r\n    total: number;\r\n    payment: number;\r\n    tax: number;\r\n    discount: number;\r\n    payment_points?: number;\r\n    payment_coupons?: number;\r\n    discount_bill?: number;\r\n    earning_points_bill?: number;\r\n    use_points?: number;\r\n    fee: number;\r\n    note: string;\r\n    _id?: string;\r\n    price_type: number;\r\n    cash?: number;\r\n    bill_code?: string\r\n    id_delivery: string;\r\n    partner_name?: string;\r\n    payment_name?: string;\r\n    order_code?: string;\r\n    order_number_ecommerce?: string,\r\n    id_shop?: string,\r\n    retail_name?: string,\r\n    retail_phone?: string,\r\n    retail_address?: string,\r\n    delivery_viettel_data?: any //dữ liệu cho giao hàng viettel, vì viettel chưa hỗ trợ api get chi tiết đơn\r\n}\r\nexport interface VhSaleInvoiceDetailCombo {\r\n    id_product: string;\r\n    id_subproduct?: string;\r\n    price: number;\r\n    quantity: number;\r\n    name?: string;\r\n    ptype: number;\r\n    unit?: string;\r\n    units?: any[];\r\n    ratio: number;\r\n    id_lotproduct?: string;\r\n    lots?: any[];\r\n    cbtype?: number;\r\n    // id_category?: string;\r\n}\r\nexport class VhSaleInvoices {\r\n    private date: Date = new Date();\r\n    private subTotal?: number = 0;\r\n    private percent_discount_bill?: number = 0;\r\n    private taxValue?: number = 0;\r\n    private invoice: VhSaleInvoice = {\r\n        payment_type: 1,\r\n        date: this.date.toISOString(),\r\n        id_customer: 'id_retail',\r\n        id_delivery: '',\r\n        id_branch: null,\r\n        id_employee: null,\r\n        id_wallet: 'id_cash',\r\n        total: 0,\r\n        payment: 0,\r\n        tax: 0,\r\n        discount: 0,\r\n        fee: 0,\r\n        bill_type: null,\r\n        note: '',\r\n        _id: null,\r\n        cash: 0,\r\n        price_type: 1,\r\n    };\r\n    protected invoiceDetail?: VhSaleInvoiceDetail[] = [];\r\n    private vhQuerySales: VhQuerySales\r\n    private plaform: Platform\r\n    private vhDisplayLEDService: VhDisplayLEDService\r\n    constructor(invoice: any = null, invoiceDetail: any[] = [], vhQuerySales?: VhQuerySales, plaform?: Platform, vhDisplayLEDService?: VhDisplayLEDService) {\r\n        this.vhQuerySales = vhQuerySales\r\n        this.plaform = plaform\r\n        this.vhDisplayLEDService = vhDisplayLEDService\r\n        if (invoice) {\r\n            this.invoice.bill_code = invoice['bill_code'] ? invoice['bill_code'] : null\r\n            this.invoice.payment_type = invoice['payment_type'] ? invoice['payment_type'] : 1\r\n            this.invoice.id_customer = invoice['id_customer'] ? invoice['id_customer'] : 'id_retail';\r\n            this.invoice.tax_buyerDisplayName = invoice['tax_buyerDisplayName'] ? invoice['tax_buyerDisplayName'] : '';\r\n            this.invoice.tax_buyerLegalName = invoice['tax_buyerLegalName'] ? invoice['tax_buyerLegalName'] : '';\r\n            this.invoice.tax_buyerTaxCode = invoice['tax_buyerTaxCode'] ? invoice['tax_buyerTaxCode'] : '';\r\n            this.invoice.tax_buyerAddressLine = invoice['tax_buyerAddressLine'] ? invoice['tax_buyerAddressLine'] : '';\r\n            this.invoice.tax_buyerEmail = invoice['tax_buyerEmail'] ? invoice['tax_buyerEmail'] : '';\r\n            this.invoice.id_branch = invoice['id_branch'] ? invoice['id_branch'] : null\r\n            this.invoice.id_employee = invoice['id_employee'] ? invoice['id_employee'] : null\r\n            this.invoice.id_wallet = invoice['id_wallet'] ? invoice['id_wallet'] : 'id_cash'\r\n            this.invoice.total = invoice['total'] ? invoice['total'] : 0\r\n            this.invoice.payment = invoice['payment'] ? invoice['payment'] : 0\r\n            this.invoice.tax = invoice['tax'] ? invoice['tax'] : 0\r\n            this.invoice.discount = invoice['discount'] ? invoice['discount'] : 0\r\n            this.invoice.payment_points = invoice['payment_points'] ? invoice['payment_points'] : 0\r\n            this.invoice.payment_coupons = invoice['payment_coupons'] ? invoice['payment_coupons'] : 0\r\n            this.invoice.earning_points_bill = invoice['earning_points_bill'] ? invoice['earning_points_bill'] : 0\r\n            this.invoice.use_points = invoice['use_points'] ? invoice['use_points'] : 0\r\n            this.invoice.discount_bill = invoice['discount_bill'] ? invoice['discount_bill'] : 0\r\n            this.invoice.fee = invoice['fee'] ? invoice['fee'] : 0\r\n            this.invoice.bill_type = invoice['bill_type'] ? invoice['bill_type'] : null\r\n            this.invoice.cash = invoice['cash'] ? invoice['cash'] : 0\r\n            this.invoice.date = invoice['date'] ? invoice['date'] : this.date.toISOString()\r\n            this.invoice.note = invoice['note'] ? invoice['note'] : ''\r\n            this.invoice._id = invoice['_id'] ? invoice['_id'] : null\r\n            this.invoiceDetail = invoice['invoiceDetail'] ? invoice['invoiceDetail'] : []\r\n            this.invoice.id_delivery = invoice['id_delivery'] ? invoice['id_delivery'] : ''\r\n            this.invoice.price_type = invoice['price_type'] ? invoice['price_type'] : 1\r\n            if (invoice['order_code']) {\r\n                this.invoice.order_code = invoice['order_code']\r\n            }\r\n            if (invoice['order_number_ecommerce']) this.invoice.order_number_ecommerce = invoice['order_number_ecommerce']\r\n            if (invoice['id_shop']) this.invoice.id_shop = invoice['id_shop']\r\n            this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n            if (invoice['id_customer'] == 'id_retail') {\r\n                this.invoice.retail_name = invoice['retail_name'] || ''\r\n                this.invoice.retail_phone = invoice['retail_phone'] || ''\r\n                this.invoice.retail_address = invoice['retail_address'] || ''\r\n            }\r\n            if (invoice['delivery_viettel_data']) this.invoice.delivery_viettel_data = invoice['delivery_viettel_data']\r\n        }\r\n        else {\r\n            this.invoice.discount_bill = 0\r\n            this.invoice.payment_points = 0\r\n            this.invoice.payment_coupons = 0\r\n            this.invoice.use_points = 0\r\n            this.invoice.earning_points_bill = 0\r\n        }\r\n        if (invoiceDetail) {\r\n            this.invoiceDetail = invoiceDetail\r\n            let subTotal = 0;\r\n            for (let i of this.invoiceDetail) {\r\n                let total_product_gift = 0;\r\n                let total_products = 0;\r\n                if (i.products_gift) {\r\n                    total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n                }\r\n                else if (i.products) {\r\n                    total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n                }\r\n                \r\n\r\n                if (!i.pmtype) i.percent_discount_product = i.price < i.price_origin ? parseFloat(parseFloat(((1 - (i.price / i.price_origin)) * 100).toString()).toFixed(2)) : 0\r\n                subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n            }\r\n            this.subTotal = subTotal;\r\n            this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0;\r\n            if (this.plaform && this.plaform.is('electron')) {\r\n                this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n                    this.invoice, this.invoiceDetail\r\n                ) \r\n            }\r\n        }\r\n        else\r\n            this.percent_discount_bill = 0\r\n    }\r\n    /******************************Xu ly invoice *******************************/\r\n    public getID(): string {\r\n        return this.invoice._id;\r\n    }\r\n    public getBillType(): 1 | 4 | 5 | 36 {\r\n        return this.invoice.bill_type\r\n    }\r\n    public setBillType(value: 1 | 4 | 5 | 36) {\r\n        this.invoice.bill_type = value\r\n    }\r\n    public getDate(): string {\r\n        return this.invoice.date\r\n    }\r\n    public setDate(value: Date | string) {\r\n        this.invoice.date = typeof (value) == 'string' ? value : value.toISOString()\r\n    }\r\n    public getBillCode(): string {\r\n        return this.invoice.bill_code\r\n    }\r\n    public setBillCode(value: string) {\r\n        this.invoice.bill_code = value\r\n    }\r\n    public getPaymentType(): 1 | 2 | 3 {\r\n        return this.invoice.payment_type\r\n    }\r\n    public setPaymentType(value: 1 | 2 | 3) {\r\n        this.invoice.payment_type = value\r\n    }\r\n    public getIdPartner(): string {\r\n        return this.invoice.id_customer\r\n    }\r\n    public setIdPartner(value: string) {\r\n        this.invoice.id_customer = value;\r\n        // this.getDiscountInvoice();\r\n    }\r\n    public getIdEmployee(): string {\r\n        return this.invoice.id_employee\r\n    }\r\n    public setIdEmployee(value: string) {\r\n        this.invoice.id_employee = value\r\n    }\r\n    public getIdBranch(): string {\r\n        return this.invoice.id_branch\r\n    }\r\n    public setIdBranch(value: string) {\r\n        this.invoice.id_branch = value\r\n    }\r\n    public getIdWallet(): string {\r\n        return this.invoice.id_wallet\r\n    }\r\n    public setIdWallet(value: string) {\r\n        this.invoice.id_wallet = value\r\n    }\r\n    public getIdDelivery(): string {\r\n        return this.invoice.id_delivery\r\n    }\r\n    public setIdDelivery(value: string) {\r\n        this.invoice.id_delivery = value\r\n    }\r\n    public getOrderCode(): string {\r\n        return this.invoice.order_code\r\n    }\r\n    public setOrderCode(value: string) {\r\n        this.invoice.order_code = value\r\n    }\r\n    public getNote(): string {\r\n        return this.invoice.note\r\n    }\r\n    public setNote(value: string) {\r\n        this.invoice.note = value\r\n    }\r\n    public getTax(): number {\r\n        return this.invoice.tax\r\n    }\r\n    public setTax(value: number) {\r\n        this.invoice.tax = value\r\n        this.setTaxValue()\r\n    }\r\n    public getTaxValue(): number {\r\n        return this.taxValue\r\n    }\r\n    public setTaxValue() {\r\n        this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n        this.setPayment()\r\n    }\r\n    public getDiscount(): number {\r\n        return this.invoice.discount\r\n    }\r\n    public setDiscount(value: number) {\r\n        this.invoice.discount = value\r\n        this.setTotal()\r\n    }\r\n    public getDiscountPoint(): number {\r\n        return this.invoice.payment_points\r\n    }\r\n    public setDiscountPoint(value: number) {\r\n        this.invoice.payment_points = value\r\n        this.setTotal()\r\n    }\r\n    public getDiscountCoupon(): number {\r\n        return this.invoice.payment_coupons\r\n    }\r\n    public setDiscountCoupon(value: number) {\r\n        this.invoice.payment_coupons += value\r\n        this.setTotal()\r\n    }\r\n    public resetDiscountCoupon() {\r\n        this.invoice.payment_coupons = 0\r\n        this.setTotal()\r\n    }\r\n    public getDiscountBill(): number {\r\n        return this.invoice.discount_bill\r\n    }\r\n    public getDiscountOther() {\r\n        return this.getDiscountPoint() + this.getDiscountCoupon();\r\n    }\r\n    public setDiscountBill(value: number) {\r\n        this.invoice.discount_bill = value\r\n        this.setTotal()\r\n    }\r\n    public getEarningPointBill(): number {\r\n        return this.invoice.earning_points_bill\r\n    }\r\n    public setEarningPointBill(value: number) {\r\n        this.invoice.earning_points_bill = value\r\n    }\r\n\r\n    public getUsePoint(): number {\r\n        return this.invoice.use_points\r\n    }\r\n    public setUsePoint(value: number) {\r\n        this.invoice.use_points = value\r\n    }\r\n\r\n    public getFee(): number {\r\n        return this.invoice.fee\r\n    }\r\n    public setFee(value: number) {\r\n        this.invoice.fee = value\r\n        this.setTotal()\r\n    }\r\n    public getSubTotal(): number {\r\n        return this.subTotal\r\n    }\r\n    public setSubTotal(value?) {\r\n        let subTotal = 0;\r\n        for (let i of this.invoiceDetail) {\r\n            let total_product_gift = 0;\r\n            let total_products = 0;\r\n            if (i.products_gift) {\r\n                total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n            }\r\n            else if (i.products) {\r\n\r\n                total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n            }\r\n            subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n        }\r\n        this.subTotal = subTotal;\r\n        this.setTotal();\r\n    }\r\n    public getTotal(): number {\r\n        return this.invoice.total\r\n    }\r\n    public setTotal() {\r\n        this.invoice.total = this.getSubTotal() - this.getDiscount() - this.getDiscountBill() - this.getDiscountOther() + this.getFee() > 0 ? this.getSubTotal() - this.getDiscount() - this.getDiscountBill() - this.getDiscountOther() + this.getFee() : 0\r\n        this.setTaxValue()\r\n        if (this.plaform && this.plaform.is('electron')) {\r\n            // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n            //     .then(() => {\r\n            \r\n\r\n            this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n                this.invoice, this.invoiceDetail\r\n            )\r\n            // })\r\n\r\n        }\r\n    }\r\n    public getNumbersProduct() {\r\n        return this.invoiceDetail.reduce((sum: number, next) => sum + next.quantity, 0)\r\n    }\r\n    public getTotalATax(): number {\r\n        return this.getTotal() + this.getTaxValue()\r\n    }\r\n    public getPayment(): number {\r\n        return this.invoice.payment\r\n    }\r\n    public setPayment(value?: number) {\r\n\r\n        if (this.invoice.payment_type == 2) {\r\n            this.invoice.payment = 0\r\n        } else {\r\n            if (value != null)\r\n                this.invoice.payment = value\r\n            else\r\n                this.invoice.payment = this.getTotal() + this.getTaxValue()\r\n        }\r\n        this.setCash(this.invoice.cash);\r\n\r\n    }\r\n    public getCash() {\r\n        return this.invoice.cash;\r\n    }\r\n    public setCash(value) {\r\n        if (this.invoice.payment_type == 2) this.invoice.cash = 0\r\n        else {\r\n            if (value) this.invoice.cash = parseFloat(value);\r\n            else this.invoice.cash = 0\r\n        }\r\n    }\r\n\r\n    public getExcessCash() {\r\n        return this.invoice.cash - this.getPayment() > 0 ? this.invoice.cash - this.getPayment() : 0;\r\n    }\r\n\r\n    public getPriceType(): number {\r\n        return this.invoice.price_type\r\n    }\r\n\r\n    public setPriceType(price_type: number) {\r\n        this.invoice.price_type = price_type\r\n    }\r\n    public getRetailName() {\r\n        return this.invoice.retail_name\r\n    }\r\n    public setRetailName(retail_name: string) {\r\n        this.invoice.retail_name = retail_name\r\n    }\r\n    public getRetailPhone() {\r\n        return this.invoice.retail_phone\r\n    }\r\n    public setRetailPhone(retail_phone: string) {\r\n        this.invoice.retail_phone = retail_phone\r\n    }\r\n    public getRetailAddress() {\r\n        return this.invoice.retail_address\r\n    }\r\n    public setRetailAddress(retail_address: string) {\r\n        this.invoice.retail_address = retail_address\r\n    }\r\n    public getDeliveryViettelData() {\r\n        return this.invoice.delivery_viettel_data\r\n    }\r\n    public setDeliveryViettelData(data) {\r\n        this.invoice.delivery_viettel_data = data\r\n    }\r\n    /**\r\n     * get chiết khấu hóa đơn\r\n     * @returns null : ko có cong thuc | value : co công thức\r\n     */\r\n    public getDiscountInvoice() {\r\n        let discount = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer);\r\n        if (discount != null) {\r\n            this.setDiscount(discount.discount)\r\n            return discount.discount\r\n        }\r\n        else return null\r\n    }\r\n\r\n    /**\r\n     * lấy % dc giảm của khách hàng có chiết khấu\r\n     * @returns number\r\n     */\r\n    getPercentDiscountBillHasDiscountInvoice() {\r\n        return parseFloat(parseFloat(((this.invoice.discount / this.subTotal) * 100).toString()).toFixed(2))\r\n    }\r\n\r\n    /**\r\n     * set lại giá trị percent_discount_bill khi nhập từ input giảm giá trường hợp giảm theo %\r\n     * @param value\r\n     */\r\n    setPercentDiscountBill(value) {\r\n        this.percent_discount_bill = parseFloat(value) <= 100 && parseFloat(value) ? parseFloat(value) : 0;\r\n        this.setDiscount(this.getSubTotal() * (this.percent_discount_bill / 100));\r\n\r\n    }\r\n\r\n    getPercentDiscountBill() {\r\n        return this.percent_discount_bill\r\n    }\r\n\r\n    /**\r\n     * set lại giá trị giảm giá cho khách ko có công thức chiết khấu trường hợp giảm giá tiền\r\n     * @param value\r\n     */\r\n    setDiscountForCustomerNotDiscountInvoice(value) {\r\n        if (value < this.subTotal) {\r\n            this.setDiscount(value);\r\n            this.percent_discount_bill = parseFloat(parseFloat((value / this.getSubTotal() * 100).toString()).toFixed(2))\r\n        }\r\n        else {\r\n            this.setDiscount(0);\r\n            this.percent_discount_bill = 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**Phương thức này dùng riêng cho sendo, không cần duyệt qua mảng detail để tính tổng mà set thẳng giá trị */\r\n    public setTotalEcommerce(total: number) {\r\n        this.invoice.total = total\r\n    }\r\n    /**Get/Set order number của sendo */\r\n    public getOrderNumberEcommerce() {\r\n        return this.invoice.order_number_ecommerce\r\n    }\r\n    public setOrderNumberEcommerce(order_number: string) {\r\n        this.invoice.order_number_ecommerce = order_number\r\n    }\r\n    public getIdShopEcommerce() {\r\n        return this.invoice.id_shop\r\n    }\r\n    public setIdShopEcommerce(id_shop: string) {\r\n        this.invoice.id_shop = id_shop\r\n    }\r\n    /******************************Xu ly invoice detail *******************************/\r\n    /** Thêm sản phẩm vô bill detail */\r\n    public addInvoiceDetail(value: any, new_price?: number) {\r\n        if (value['id_subproduct']) {\r\n            if (value.lot_number) {\r\n                let index = this.invoiceDetail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n                if (index != -1) {\r\n                    if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n                    this.setSubTotal()\r\n                } else {\r\n                    this.addBill_Detail(value)\r\n                }\r\n            }\r\n            else {\r\n                let index = this.invoiceDetail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n                if (index != -1) {\r\n                    if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n                    this.setSubTotal()\r\n                } else {\r\n                    this.addBill_Detail(value)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (value.lot_number) {\r\n                let index = this.invoiceDetail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n                if (index != -1) {\r\n                    if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n                    this.setSubTotal()\r\n                } else {\r\n                    this.addBill_Detail(value)\r\n                }\r\n            }\r\n            else {\r\n                let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n                if (index != -1) {\r\n                    if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n                    this.setSubTotal()\r\n                } else {\r\n                    this.addBill_Detail(value)\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    addBill_Detail(value: any, new_price?: number) {\r\n        let detail: any = {\r\n            name: value.name,\r\n            id_product: value._id,\r\n            quantity: 1,\r\n            ptype: value.type,\r\n            unit: value.unit,\r\n            units: value.units ? value.units : [],\r\n            ratio: value.ratio ? value.ratio : 1,\r\n            price: new_price != null ? new_price : value.price,\r\n            price2: value.price2,\r\n            price_origin: value.price,\r\n            earning_points_product: value.earning_points_product ? value.earning_points_product : 0,\r\n            percent_discount_product: 0\r\n        }\r\n\r\n        if (value.type == 5) {\r\n            detail['cbtype'] = 5;\r\n            detail['combos'] = [...value.combos.map(item => {\r\n                let product: VhSaleInvoiceDetailCombo = {\r\n                    id_product: item.id_product,\r\n                    name: item.name,\r\n                    ptype: item.type,\r\n                    price: item.price,\r\n                    quantity: item.quantity,\r\n                    unit: item.unit,\r\n                    units: item.units,\r\n                    ratio: item.ratio ? item.ratio : 1,\r\n                    lots: item.lots ? item.lots : [],\r\n                    id_lotproduct: item.id_lotproduct,\r\n                }\r\n                if (item.lots) product['lots'] = item.lots;\r\n                if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n                if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n                return product;\r\n            })]\r\n        }\r\n        if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n        if (value.lots) detail['lots'] = value.lots;\r\n        if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n        if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n        this.invoiceDetail.unshift(detail)\r\n\r\n        this.setSubTotal()\r\n    }\r\n\r\n    addBill_detail_promotion(value) {\r\n        this.invoiceDetail.push(value)\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail đã tạo*/\r\n    public addInvoiceDetailDB(value: any, id_billDetail: any, new_price?: number) {\r\n        if (value['id_subproduct']) {\r\n            let index = this.invoiceDetail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n            if (index != -1) {\r\n                if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n            } else {\r\n                this.addBill_detail_DB(value, id_billDetail)\r\n            }\r\n        }\r\n        else {\r\n            let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n            if (index != -1) {\r\n                if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n            } else {\r\n                this.addBill_detail_DB(value, id_billDetail)\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    addBill_detail_DB(value: any, id_billDetail: any) {\r\n        let detail: any = {\r\n            name: value.name,\r\n            id_product: value._id,\r\n            quantity: 1,\r\n            ptype: value.type,\r\n            unit: value.unit,\r\n            units: value.units,\r\n            ratio: value.ratio ? value.ratio : 1,\r\n            price2: value.price2,\r\n            price: value.price,\r\n            price_origin: value.price,\r\n            id_category: value.id_category,\r\n            _id: id_billDetail,\r\n            earning_points_product: value.earning_points_product ? value.earning_points_product : 0,\r\n            lot_number: value.lot_number,\r\n            lots: value.lots ? value.lots : [],\r\n            percent_discount_product: 0\r\n        }\r\n\r\n        if (value.type == 5) {\r\n            detail['subComboName'] = value.subComboName\r\n            detail['combos'] = [...value.combos.map(item => {\r\n                let product: VhSaleInvoiceDetailCombo = {\r\n                    id_product: item.id_product,\r\n                    name: item.name,\r\n                    ptype: item.type,\r\n                    price: item.price,\r\n                    quantity: item.quantity,\r\n                    unit: item.unit,\r\n                    units: item.units,\r\n                    ratio: item.ratio ? item.ratio : 1,\r\n                    lots: item.lots ? item.lots : [],\r\n                }\r\n                if (item.lots) product['lots'] = item.lots;\r\n                if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n                if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n                return product;\r\n            })]\r\n        }\r\n        if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n        if (value.lots) detail['lots'] = value.lots;\r\n        if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n        if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n        this.invoiceDetail.unshift(detail)\r\n        this.setSubTotal()\r\n    }\r\n\r\n    /**Thêm sản phẩm từ sàn sendo\r\n     * @params sku_detail : danh sách đơn hàng trên sendo\r\n     * @params products : danh sách sp của app\r\n     */\r\n    public addInvoiceDetailSendo(sku_details, products, id_branch) {\r\n        for (let sku of sku_details) {\r\n            let exist: boolean = false;//nếu duyệt hết các sp trong app mà không tồn tại thì sp sendo chưa được liên kết\r\n            for (let index in products) {\r\n                if (products[index][id_branch] && products[index][id_branch].sendos.findIndex(item => item.id == sku.product_variant_id) >= 0) {\r\n                    exist = true\r\n                    this.invoiceDetail.unshift({\r\n                        name: products[index].name,\r\n                        id_product: products[index]._id,\r\n                        quantity: sku.quantity,\r\n                        ptype: products[index].type,\r\n                        unit: products[index].unit,\r\n                        units: products[index].units,\r\n                        ratio: 1,\r\n                        price: sku.price,\r\n                        price_origin: products[index].price_origin,\r\n                        id_subproduct: products.id_subproduct,\r\n                        lots: products.lots,\r\n                        id_lotproduct: products.id_lotproduct,\r\n\r\n                        free: false //nếu có trường này true thì được quyền chỉnh số lượng\r\n                    })\r\n                }\r\n            }\r\n            if (!exist) this.invoiceDetail.unshift({\r\n                id_product: null,\r\n                quantity: sku.quantity,\r\n                price: sku.price,\r\n                ptype: 1,\r\n                ratio: 1,\r\n            })\r\n        }\r\n    }\r\n    /**Thêm sản phẩm từ sàn lazada\r\n     */\r\n    public addInvoiceDetailLazada(price, product, exist) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == product['_id'] && product['_id'] != null)\r\n        if (index != -1) {\r\n            if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n        }\r\n        else {\r\n            if (exist) {\r\n                this.invoiceDetail.unshift({\r\n                    name: product.name,\r\n                    id_product: product._id,\r\n                    quantity: 1,\r\n                    ptype: product.type,\r\n                    unit: product.unit,\r\n                    ratio: 1,\r\n                    units: product.units,\r\n                    price: price,\r\n                    price_origin: product.price_origin || null,\r\n                    id_subproduct: product.id_subproduct,\r\n                    lots: product.lots,\r\n                    id_lotproduct: product.id_lotproduct,\r\n\r\n                    free: false //nếu có trường này true thì được quyền chỉnh số lượng\r\n                })\r\n            } else {\r\n                this.invoiceDetail.unshift({\r\n                    id_product: null,\r\n                    quantity: 1,\r\n                    price: price,\r\n                    ptype: 1,\r\n\r\n                    ratio: 1,\r\n                    name: product.name\r\n                })\r\n            }\r\n        }\r\n    }\r\n    /**Thêm sản phẩm từ sàn tiki\r\n     */\r\n    public addInvoiceDetailTiki(price, quantity, product, exist) {\r\n        if (exist) {\r\n            this.invoiceDetail.unshift({\r\n                name: product.name,\r\n                id_product: product._id,\r\n                quantity: quantity,\r\n                ptype: product.type,\r\n                unit: product.unit,\r\n                price: price,\r\n                ratio: 1,\r\n                units: product.units,\r\n                price_origin: product.price_origin || null,\r\n                id_subproduct: product.id_subproduct,\r\n                lots: product.lots,\r\n                id_lotproduct: product.id_lotproduct,\r\n                free: false //nếu có trường này true thì được quyền chỉnh số lượng\r\n            })\r\n        } else {\r\n            this.invoiceDetail.unshift({\r\n                id_product: null,\r\n                quantity: quantity,\r\n                price: price,\r\n                ptype: 1,\r\n\r\n                ratio: 1,\r\n                name: product.name\r\n            })\r\n        }\r\n    }\r\n\r\n    /**Thêm sản phẩm từ sàn shopee\r\n     */\r\n    public addInvoiceDetailShopee(price, quantity, product, exist) {\r\n        if (exist) {\r\n            this.invoiceDetail.unshift({\r\n                name: product.name,\r\n                id_product: product._id,\r\n                quantity: quantity,\r\n                ptype: product.type,\r\n                unit: product.unit,\r\n                ratio: 1,\r\n                units: product.units,\r\n                price: price,\r\n                price_origin: product.price_origin || null,\r\n                id_subproduct: product.id_subproduct,\r\n                lots: product.lots,\r\n                id_lotproduct: product.id_lotproduct,\r\n                free: false, //nếu có trường này true thì được quyền chỉnh số lượng\r\n\r\n            })\r\n        } else {\r\n            this.invoiceDetail.unshift({\r\n                id_product: null,\r\n                quantity: quantity,\r\n                price: price,\r\n                ptype: 1,\r\n                ratio: 1,\r\n                name: product.name\r\n            })\r\n        }\r\n    }\r\n    addInvoiceDetailExtraEcommerce(value: any) {\r\n\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'] && detail['free'])\r\n        if (index != -1) {\r\n            if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n        } else {\r\n            let detail: any = {\r\n                name: value.name,\r\n                id_product: value._id,\r\n                quantity: 1,\r\n                ptype: value.type,\r\n                unit: value.unit,\r\n                units: value.units,\r\n                ratio: value.ratio,\r\n                price: 0,\r\n                price_origin: value.price,\r\n                id_category: value.id_category,\r\n                free: true, //nếu có trường này thì được quyền chỉnh số lượng\r\n                id_subproduct: value.id_subproduct,\r\n                lots: value.lots,\r\n                id_lotproduct: value.id_lotproduct,\r\n            }\r\n\r\n            if (value.type == 5) {\r\n                detail['subComboName'] = value.subComboName\r\n                detail['combos'] = [...value.combos.map(item => {\r\n                    let product: any = {\r\n                        id_product: item.id_product, name: item.name, ptype: item.type,\r\n                        price: 0, quantity: item.quantity, id_subproduct: item.id_subproduct,\r\n                        lots: item.lots,\r\n                        id_lotproduct: item.id_lotproduct, units: item.units, ratio: item.ratio,\r\n                        free: true//nếu có trường này thì được quyền chỉnh số lượng\r\n                    }\r\n                    return product;\r\n                })]\r\n            }\r\n\r\n            this.invoiceDetail.unshift(detail)\r\n        }\r\n\r\n    }\r\n    /** xóa sản phẩm */\r\n    public removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == id)\r\n        if (index != -1) {\r\n            this.invoiceDetail.splice(index, 1);\r\n            if (!notSetSub) this.setSubTotal()\r\n        }\r\n    }\r\n    /** Lấy toàn bộ bill detail */\r\n    public getInvoiceDetail() {\r\n        return this.invoiceDetail;\r\n    }\r\n    /** Lấy toàn bộ combo của 1 detail */\r\n    public getInvoiceDetailCombos(idDetail: string): VhSaleInvoiceDetailCombo[] {\r\n        let detailBill: VhSaleInvoiceDetail = this.invoiceDetail.find(detail => detail._id == idDetail)\r\n        return detailBill ? detailBill.combos : null;\r\n    }\r\n\r\n    compareSubTotal() {\r\n        let sub = this.invoiceDetail.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        if (sub == this.subTotal) return true\r\n        else return false\r\n    }\r\n    /******************************create - update - delete invoice / detail *******************************/\r\n    /** Lấy toàn bộ bill dùng để lưu database */\r\n    public getCreateUpdateInvoice(bill_type: 1 | 4 | 5 | 36 | null = null) {\r\n        if (bill_type) this.setBillType(bill_type)\r\n        return this.invoice\r\n    }\r\n    /** Lấy toàn bộ bill dùng để lưu database dành cho giao diện pos */\r\n    public getCreateUpdateInvoicePosInterface(bill_type: 1 | 4 | 5 | null = null) {\r\n        if (bill_type) this.setBillType(bill_type)\r\n        return {\r\n            payment_type: this.invoice.payment_type,\r\n            date: this.invoice.date,\r\n            id_customer: this.invoice.id_customer,\r\n            tax_buyerDisplayName: this.invoice?.tax_buyerDisplayName || '',\r\n            tax_buyerLegalName: this.invoice?.tax_buyerLegalName || '',\r\n            tax_buyerTaxCode: this.invoice?.tax_buyerTaxCode || '',\r\n            tax_buyerAddressLine: this.invoice?.tax_buyerAddressLine || '',\r\n            tax_buyerEmail: this.invoice?.tax_buyerEmail || '',\r\n            id_delivery: this.invoice.id_delivery,\r\n            id_branch: this.invoice.id_branch,\r\n            id_employee: this.invoice.id_employee,\r\n            id_wallet: this.invoice.id_wallet,\r\n            total: this.invoice.total,\r\n            payment: this.invoice.payment,\r\n            tax: this.invoice.tax,\r\n            discount: this.invoice.discount,\r\n            fee: this.invoice.fee,\r\n            bill_type: this.invoice.bill_type,\r\n            note: this.invoice.note,\r\n            cash: this.invoice.cash,\r\n            price_type: this.invoice.price_type,\r\n            _id: this.invoice._id,\r\n            discount_bill: this.invoice.discount_bill,\r\n            payment_points: this.invoice.payment_points,\r\n            use_points: this.invoice.use_points,\r\n            payment_coupons: this.invoice.payment_coupons,\r\n            earning_points_bill: this.invoice.earning_points_bill,\r\n\r\n        }\r\n\r\n    }\r\n    /** Lấy toàn bộ bill detail dùng để lưu database */\r\n    public getCreateUpdateInvoiceDetail(): VhSaleInvoiceDetail[] {\r\n        return this.invoiceDetail.map(item => {\r\n            if (!item.pmtype) {\r\n                let detail: VhSaleInvoiceDetail = {\r\n                    id_product: item.id_product,\r\n                    ptype: item.ptype,\r\n                    price: item.price,\r\n                    price_origin: item.price_origin,\r\n                    quantity: item.quantity,\r\n                    earning_points_product: item.earning_points_product,\r\n                    ratio: item.ratio,\r\n                }\r\n                if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n                if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n\r\n                if (item.ptype == 5) {\r\n                    detail['combos'] = item.combos.map(combo => {\r\n                        let product: VhSaleInvoiceDetailCombo = {\r\n                            id_product: combo.id_product,\r\n                            price: combo.price,\r\n                            quantity: combo.quantity,\r\n                            ptype: combo.ptype,\r\n                            ratio: combo.ratio ? combo.ratio : 1,\r\n                        }\r\n                        if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                        if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                        return product;\r\n                    })\r\n                }\r\n                return detail\r\n            }\r\n            else {\r\n                let detail = {\r\n                    id_promotion: item.id_promotion,\r\n                    pmtype: item.pmtype,\r\n                }\r\n                if (item.products_gift) {\r\n                    if (item.products_gift.filter(ele => ele.choose).length) {\r\n                        detail['products_gift'] = item.products_gift.filter(ele => ele.choose).map(e => {\r\n                            let prod = {\r\n                                id_product: e.id_product,\r\n                                price: e.price,\r\n                                price_origin: e.price_origin,\r\n                                quantity: e.quantity,\r\n                                ptype: e.ptype,\r\n                                earning_points_product: e.earning_points_product,\r\n                                ratio: e.ratio\r\n                            }\r\n                            if (e.ptype == 5) {\r\n                                prod['combos'] = e.combos.map(combo => {\r\n                                    let product: VhSaleInvoiceDetailCombo = {\r\n                                        id_product: combo.id_product,\r\n                                        price: combo.price,\r\n                                        quantity: combo.quantity,\r\n                                        ptype: combo.ptype,\r\n                                        ratio: combo.ratio ? combo.ratio : 1,\r\n                                    }\r\n                                    if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                                    if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                                    return product;\r\n                                })\r\n                            }\r\n                            if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n                            if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n                            return prod\r\n                        })\r\n                        return detail\r\n                    }\r\n                }\r\n                else {\r\n                    detail['products'] = item.products.map(e => {\r\n                        let prod = {\r\n                            id_product: e.id_product,\r\n                            price: e.price,\r\n                            price_origin: e.price_origin,\r\n                            quantity: e.quantity,\r\n                            ptype: e.ptype,\r\n                            earning_points_product: e.earning_points_product,\r\n                            ratio: e.ratio\r\n                        }\r\n                        if (e.ptype == 5) {\r\n                            prod['combos'] = e.combos.map(combo => {\r\n                                let product: VhSaleInvoiceDetailCombo = {\r\n                                    id_product: combo.id_product,\r\n                                    price: combo.price,\r\n                                    quantity: combo.quantity,\r\n                                    ptype: combo.ptype,\r\n                                    ratio: combo.ratio ? combo.ratio : 1,\r\n                                }\r\n                                if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                                if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                                return product;\r\n                            })\r\n                        }\r\n                        if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n                        if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n                        return prod\r\n                    })\r\n                    return detail\r\n                }\r\n\r\n            }\r\n        }).filter(item => item)\r\n\r\n    }\r\n    /**Làm sạch bill detail */\r\n    public getCreateItemCleanDetail(cleanedDetail: VhSaleInvoiceDetail) {\r\n        let detail: any = {\r\n            id_bill: this.invoice._id,\r\n            id_product: cleanedDetail.id_product,\r\n            quantity: cleanedDetail.quantity,\r\n            ptype: cleanedDetail.ptype,\r\n            price: cleanedDetail.price,\r\n            price_origin: cleanedDetail.price_origin,\r\n            earning_points_product: cleanedDetail.earning_points_product,\r\n            ratio: cleanedDetail.ratio,\r\n            id_subproduct: cleanedDetail.id_subproduct\r\n        }\r\n\r\n        if (cleanedDetail.ptype == 5) {\r\n            detail['combos'] = [...cleanedDetail.combos.map(item => {\r\n                let product: VhSaleInvoiceDetailCombo = {\r\n                    id_product: item.id_product,\r\n                    id_subproduct: item.id_subproduct,\r\n                    ptype: item.ptype,\r\n                    price: item.price,\r\n                    quantity: item.quantity,\r\n                    ratio: item.ratio ? item.ratio : 1,\r\n                    name: item.name\r\n                }\r\n                return product;\r\n            })]\r\n        }\r\n\r\n        return detail;\r\n    }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}