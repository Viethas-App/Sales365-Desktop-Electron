{"version":3,"file":"default-src_app_sales_interface_vh-sale-voucher-invoice_ts.js","mappings":"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","sources":["./src/app/sales/interface/vh-sale-voucher-invoice.ts"],"sourcesContent":["import { VhQuerySales } from 'ionic-vhframeworks';\r\n\r\nexport interface VhSaleVoucherInvoice {\r\n    bill_type: 40 | 41 | 42 | 43,\r\n    payment_type: 1 | 2 | 3,\r\n    id_customer: 'id_retail' | string;\r\n    id_branch: string;\r\n    id_employee: string;\r\n    id_wallet: 'id_cash' | string;\r\n    date: string,\r\n    total: number;\r\n    payment?: number;\r\n    tax?: number;\r\n    discount?: number;\r\n    fee?: number;\r\n    note: string;\r\n    _id: string;\r\n    price_type?: number;\r\n    cash?: number;\r\n    bill_code: string\r\n    id_delivery?: string;\r\n    partner_name?: string;\r\n    payment_name?: string;\r\n    order_code?: string;\r\n    order_number_ecommerce?: string,\r\n    id_shop?: string,\r\n    retail_name?: string,\r\n    retail_phone?: string,\r\n    retail_address?: string\r\n}\r\n\r\n// Bán voucher\r\nexport interface VhSaleVoucherInvoiceDetails {\r\n    id_voucher_code: string;\r\n    id_bill?: string;\r\n    id_voucher: string;\r\n    code: string;\r\n    price: number;\r\n    quantity: number;\r\n    vtype: 1;\r\n    products?: any[];\r\n    name?: string;\r\n    name_voucher_release?: string;\r\n    ratio: number;\r\n}\r\nexport class VhSaleVoucherInvoices {\r\n    private date: Date = new Date();\r\n    private subTotal?: number = 0;\r\n    private taxValue?: number = 0;\r\n    private percent_discount_bill?: number = 0;\r\n    private invoice: VhSaleVoucherInvoice = {\r\n        payment_type: 1,\r\n        date: this.date.toISOString(),\r\n        id_customer: 'id_retail',\r\n        id_delivery: '',\r\n        id_branch: null,\r\n        id_employee: null,\r\n        id_wallet: 'id_cash',\r\n        total: 0,\r\n        payment: 0,\r\n        tax: 0,\r\n        discount: 0,\r\n        fee: 0,\r\n        bill_type: null,\r\n        note: '',\r\n        _id: null,\r\n        cash: 0,\r\n        price_type: 1,\r\n        bill_code: ''\r\n    };\r\n    protected invoiceDetail?: VhSaleVoucherInvoiceDetails[] = [];\r\n    private vhQuerySales: VhQuerySales\r\n    constructor(invoice: any = null, invoiceDetail: any[] = [], vhQuerySales: VhQuerySales) {\r\n        this.vhQuerySales = vhQuerySales\r\n        if (invoice) {\r\n            this.invoice.bill_code = invoice['bill_code'] ? invoice['bill_code'] : null\r\n            this.invoice.payment_type = invoice['payment_type'] ? invoice['payment_type'] : 1\r\n            this.invoice.id_customer = invoice['id_customer'] ? invoice['id_customer'] : 'id_retail'\r\n            this.invoice.id_branch = invoice['id_branch'] ? invoice['id_branch'] : null\r\n            this.invoice.id_employee = invoice['id_employee'] ? invoice['id_employee'] : null\r\n            this.invoice.id_wallet = invoice['id_wallet'] ? invoice['id_wallet'] : 'id_cash'\r\n            this.invoice.total = invoice['total'] ? invoice['total'] : 0\r\n            this.invoice.payment = invoice['payment'] ? invoice['payment'] : 0\r\n            this.invoice.tax = invoice['tax'] ? invoice['tax'] : 0\r\n            this.invoice.discount = invoice['discount'] ? invoice['discount'] : 0\r\n            this.invoice.fee = invoice['fee'] ? invoice['fee'] : 0\r\n            this.invoice.bill_type = invoice['bill_type'] ? invoice['bill_type'] : null\r\n            this.invoice.cash = invoice['cash'] ? invoice['cash'] : 0\r\n            this.invoice.date = invoice['date'] ? invoice['date'] : this.date.toISOString()\r\n            this.invoice.note = invoice['note'] ? invoice['note'] : ''\r\n            this.invoice._id = invoice['_id'] ? invoice['_id'] : null\r\n            this.invoiceDetail = invoice['invoiceDetail'] ? invoice['invoiceDetail'] : []\r\n            this.invoice.id_delivery = invoice['id_delivery'] ? invoice['id_delivery'] : ''\r\n            this.invoice.price_type = invoice['price_type'] ? invoice['price_type'] : 1\r\n            if (invoice['order_code']) {\r\n                this.invoice.order_code = invoice['order_code']\r\n            }\r\n            if (invoice['order_number_ecommerce']) this.invoice.order_number_ecommerce = invoice['order_number_ecommerce']\r\n            if (invoice['id_shop']) this.invoice.id_shop = invoice['id_shop']\r\n            this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n            if (invoice['id_customer'] == 'id_retail') {\r\n                this.invoice.retail_name = invoice['retail_name'] || ''\r\n                this.invoice.retail_phone = invoice['retail_phone'] || ''\r\n                this.invoice.retail_address = invoice['retail_address'] || ''\r\n            }\r\n        }\r\n\r\n        if (invoiceDetail) {\r\n            this.invoiceDetail = invoiceDetail\r\n            this.subTotal = this.invoiceDetail.reduce((prev: number, next) => prev + 1 * next.price, 0)\r\n            this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0\r\n        }\r\n        else\r\n            this.percent_discount_bill = 0\r\n    }\r\n    /******************************Xu ly invoice *******************************/\r\n    public getID(): string {\r\n        return this.invoice._id;\r\n    }\r\n    public getBillType(): 40 | 41 | 42 | 43 {\r\n        return this.invoice.bill_type\r\n    }\r\n    public setBillType(value: 40 | 41 | 42 | 43) {\r\n        this.invoice.bill_type = value\r\n    }\r\n    public getDate(): string {\r\n        return this.invoice.date\r\n    }\r\n    public setDate(value: Date | string) {\r\n        this.invoice.date = typeof (value) == 'string' ? value : value.toISOString()\r\n    }\r\n    public getBillCode(): string {\r\n        return this.invoice.bill_code\r\n    }\r\n    public setBillCode(value: string) {\r\n        this.invoice.bill_code = value\r\n    }\r\n    public getPaymentType(): 1 | 2 | 3 {\r\n        return this.invoice.payment_type\r\n    }\r\n    public setPaymentType(value: 1 | 2 | 3) {\r\n        this.invoice.payment_type = value\r\n    }\r\n    public getIdPartner(): string {\r\n        return this.invoice.id_customer\r\n    }\r\n    public setIdPartner(value: string) {\r\n        this.invoice.id_customer = value;\r\n        // this.getDiscountInvoice();\r\n    }\r\n    public getIdEmployee(): string {\r\n        return this.invoice.id_employee\r\n    }\r\n    public setIdEmployee(value: string) {\r\n        this.invoice.id_employee = value\r\n    }\r\n    public getIdBranch(): string {\r\n        return this.invoice.id_branch\r\n    }\r\n    public setIdBranch(value: string) {\r\n        this.invoice.id_branch = value\r\n    }\r\n    public getIdWallet(): string {\r\n        return this.invoice.id_wallet\r\n    }\r\n    public setIdWallet(value: string) {\r\n        this.invoice.id_wallet = value\r\n    }\r\n    public getIdDelivery(): string {\r\n        return this.invoice.id_delivery\r\n    }\r\n    public setIdDelivery(value: string) {\r\n        this.invoice.id_delivery = value\r\n    }\r\n    public getOrderCode(): string {\r\n        return this.invoice.order_code\r\n    }\r\n    public setOrderCode(value: string) {\r\n        this.invoice.order_code = value\r\n    }\r\n    public getNote(): string {\r\n        return this.invoice.note\r\n    }\r\n    public setNote(value: string) {\r\n        this.invoice.note = value\r\n    }\r\n    public getTax(): number {\r\n        return this.invoice.tax\r\n    }\r\n    public setTax(value: number) {\r\n        this.invoice.tax = value\r\n        this.setTaxValue()\r\n    }\r\n    public getTaxValue(): number {\r\n        return this.taxValue\r\n    }\r\n    public setTaxValue() {\r\n        this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n        this.setPayment()\r\n    }\r\n    public getDiscount(): number {\r\n        return this.invoice.discount\r\n    }\r\n    public setDiscount(value: number) {\r\n        this.invoice.discount = value\r\n        this.setTotal()\r\n    }\r\n\r\n\r\n    public getFee(): number {\r\n        return this.invoice.fee\r\n    }\r\n    public setFee(value: number) {\r\n        this.invoice.fee = value\r\n        this.setTotal()\r\n    }\r\n    public getSubTotal(): number {\r\n        return this.subTotal\r\n    }\r\n    public setSubTotal() {\r\n        this.subTotal = this.invoiceDetail.reduce((prev: number, next) => prev + 1 * next.price, 0)\r\n        this.setTotal();\r\n    }\r\n    public getTotal(): number {\r\n        return this.invoice.total\r\n    }\r\n    public setTotal() {\r\n        this.invoice.total = this.getSubTotal() - this.getDiscount() + this.getFee()\r\n        this.setTaxValue()\r\n    }\r\n    public getTotalATax(): number {\r\n        return this.getTotal() + this.getTaxValue()\r\n    }\r\n    public getPayment(): number {\r\n        return this.invoice.payment\r\n    }\r\n    public setPayment(value?: number) {\r\n\r\n        if (this.invoice.payment_type == 2) {\r\n            this.invoice.payment = 0\r\n        } else {\r\n            if (value != null)\r\n                this.invoice.payment = value\r\n            else\r\n                this.invoice.payment = this.getTotal() + this.getTaxValue()\r\n        }\r\n        this.setCash(this.invoice.cash);\r\n    }\r\n    public getCash() {\r\n        return this.invoice.cash;\r\n    }\r\n    public setCash(value) {\r\n        if (this.invoice.payment_type == 2) this.invoice.cash = 0\r\n        else {\r\n            if (value) this.invoice.cash = parseFloat(value);\r\n            else this.invoice.cash = 0\r\n        }\r\n    }\r\n\r\n    public getExcessCash() {\r\n        return this.invoice.cash - this.getPayment() > 0 ? this.invoice.cash - this.getPayment() : 0;\r\n    }\r\n\r\n    public getPriceType(): number {\r\n        return this.invoice.price_type\r\n    }\r\n\r\n    public setPriceType(price_type: number) {\r\n        this.invoice.price_type = price_type\r\n    }\r\n    public getRetailName() {\r\n        return this.invoice.retail_name\r\n    }\r\n    public setRetailName(retail_name: string) {\r\n        this.invoice.retail_name = retail_name\r\n    }\r\n    public getRetailPhone() {\r\n        return this.invoice.retail_phone\r\n    }\r\n    public setRetailPhone(retail_phone: string) {\r\n        this.invoice.retail_phone = retail_phone\r\n    }\r\n    public getRetailAddress() {\r\n        return this.invoice.retail_address\r\n    }\r\n    public setRetailAddress(retail_address: string) {\r\n        this.invoice.retail_address = retail_address\r\n    }\r\n\r\n    /**\r\n     * get chiết khấu hóa đơn\r\n     * @returns null : ko có cong thuc | value : co công thức\r\n     */\r\n    public getDiscountInvoice() {\r\n        let discount = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer);\r\n        if (discount != null) {\r\n            this.setDiscount(discount.discount)\r\n            return discount.discount\r\n        }\r\n        else return null\r\n    }\r\n\r\n    /**\r\n    * set lại giá trị percent_discount_bill khi nhập từ input giảm giá trường hợp giảm theo %\r\n    * @param value\r\n    */\r\n    setPercentDiscountBill(value) {\r\n        this.percent_discount_bill = parseFloat(value) <= 100 && parseFloat(value) ? parseFloat(value) : 0;\r\n        this.setDiscount(this.getSubTotal() * (this.percent_discount_bill / 100));\r\n\r\n    }\r\n\r\n    getPercentDiscountBill() {\r\n        return this.percent_discount_bill\r\n    }\r\n\r\n    /******************************Xu ly invoice detail *******************************/\r\n    /** Thêm sản phẩm vô bill detail */\r\n    public addInvoiceDetail(value: any) {\r\n        let detail: any = {\r\n            id_voucher_code: value.id_voucher_code,\r\n            name: value.name,\r\n            id_voucher: value.id_voucher,\r\n            code: value.code,\r\n            id_bill: value.id_bill,\r\n            vtype: 1,\r\n            price: value.price,\r\n            products: value.products,\r\n            name_voucher_release: value.name_voucher_release\r\n        }\r\n        this.invoiceDetail.push(detail)\r\n        this.setSubTotal()\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail */\r\n    public addInvoiceDetailMutilLine(value: any) {\r\n        let detail: any = {\r\n            id_voucher_code: value.id_voucher_code,\r\n            name: value.name,\r\n            id_voucher: value.id_voucher,\r\n            code: value.code,\r\n            id_bill: value.id_bill,\r\n            vtype: 1,\r\n            price: value.price,\r\n            products: value.products,\r\n            name_voucher_release: value.name_voucher_release\r\n        }\r\n        this.invoiceDetail.unshift(detail)\r\n        this.setSubTotal()\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail đã tạo*/\r\n    public addInvoiceDetailDB(value: any, id_billDetail: any) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'])\r\n        if (index != -1) {\r\n            if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n        } else {\r\n            let detail: any = {\r\n                id_voucher_code: value.id_voucher_code,\r\n                name: value.name,\r\n                id_voucher: value.id_voucher,\r\n                code: value.code,\r\n                id_bill: value.id_bill,\r\n                vtype: 1,\r\n                price: value.price,\r\n                products: value.products\r\n            }\r\n            this.invoiceDetail.unshift(detail)\r\n        }\r\n        this.setSubTotal()\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail đã tạo*/\r\n    public addInvoiceDetailDBMutilLine(value: any, id_billDetail: any) {\r\n        let detail: any = {\r\n            id_voucher_code: value.id_voucher_code,\r\n            name: value.name,\r\n            id_voucher: value.id_voucher,\r\n            code: value.code,\r\n            id_bill: value.id_bill,\r\n            vtype: 1,\r\n            price: value.price,\r\n            products: value.products\r\n        }\r\n        this.invoiceDetail.unshift(detail)\r\n        this.setSubTotal()\r\n    }\r\n\r\n    /** xóa sản phẩm */\r\n    public removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail.id_voucher_code == id)\r\n        if (index != -1) {\r\n            this.invoiceDetail.splice(index, 1);\r\n            if (!notSetSub) this.setSubTotal()\r\n        }\r\n    }\r\n    /** Lấy toàn bộ bill detail */\r\n    public getInvoiceDetail() {\r\n        return this.invoiceDetail;\r\n    }\r\n\r\n\r\n    compareSubTotal() {\r\n        let sub = this.invoiceDetail.reduce((prev: number, next) => prev + 1 * next.price, 0)\r\n        if (sub == this.subTotal) return true\r\n        else return false\r\n    }\r\n    /******************************create - update - delete invoice / detail *******************************/\r\n    /** Lấy toàn bộ bill dùng để lưu database */\r\n    public getCreateUpdateInvoice(bill_type: 40 | 41 | 42 | 43 | null = null) {\r\n        if (bill_type) this.setBillType(bill_type)\r\n        return this.invoice\r\n    }\r\n    /** Lấy toàn bộ bill detail dùng để lưu database */\r\n    public getCreateUpdateInvoiceDetail(): VhSaleVoucherInvoiceDetails[] {\r\n        return this.invoiceDetail.map(item => {\r\n            let detail: VhSaleVoucherInvoiceDetails = {\r\n                id_voucher_code: item.id_voucher_code,\r\n                id_voucher: item.id_voucher,\r\n                code: item.code,\r\n                id_bill: item.id_bill,\r\n                vtype: 1,\r\n                ratio: 1,\r\n                quantity: 1,\r\n                price: item.price,\r\n                products: item.products.map(pro => {\r\n                    let data = {\r\n                        id_product: pro.id_product,\r\n                        ptype: pro.ptype,\r\n                        ratio: pro.ratio,\r\n                        quantity: pro.quantity,\r\n                        price: 0,\r\n                    }\r\n                    if (pro.id_subproduct) data['id_subproduct'] = pro.id_subproduct\r\n                    if (pro.combos) {\r\n                        data['combos'] = pro.combos.map(combo => {\r\n                            let product = {\r\n                                id_product: combo.id_product,\r\n                                price: combo.price,\r\n                                quantity: combo.quantity,\r\n                                ptype: combo.ptype,\r\n                                ratio: combo.ratio ? combo.ratio : 1,\r\n                            }\r\n                            if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                            if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                            return product;\r\n                        })\r\n                    }\r\n                    return data\r\n                }),\r\n            }\r\n\r\n            return detail\r\n        })\r\n    }\r\n    /**Làm sạch bill detail */\r\n    public getCreateItemCleanDetail(cleanedDetail: VhSaleVoucherInvoiceDetails) {\r\n        let detail: any = {\r\n            id_voucher_code: cleanedDetail.id_voucher_code,\r\n            id_bill: this.invoice._id,\r\n            vtype: cleanedDetail.vtype,\r\n            price: cleanedDetail.price,\r\n            id_voucher: cleanedDetail.id_voucher,\r\n            code: cleanedDetail.code,\r\n            products: cleanedDetail.products\r\n        }\r\n        return detail;\r\n    }\r\n}\r\n\r\n\r\n\r\n// Đổi voucher\r\nexport interface VhSaleExchangeVoucherInvoice {\r\n    bill_type: 41,\r\n    payment_type: 1 | 2 | 3,\r\n    id_customer: 'id_retail' | string;\r\n    id_branch: string;\r\n    id_employee: string;\r\n    id_wallet: 'id_cash' | string;\r\n    date: string,\r\n    note: string;\r\n    _id: string;\r\n    bill_code: string,\r\n    retail_name?: string,\r\n    retail_phone?: string,\r\n    retail_address?: string,\r\n    discount?: number,\r\n    fee?: number,\r\n    tax?: number\r\n    payment?: number;\r\n\r\n}\r\n\r\nexport interface VhSaleExchangeVoucherInvoiceDetails {\r\n    id_voucher_code: string;\r\n    id_bill?: string;\r\n    id_voucher: string;\r\n    code: string;\r\n    vtype: 1;\r\n    products?: any[];\r\n    name?: string;\r\n    price?: number;\r\n}\r\nexport class VhSaleExchangeVoucherInvoices {\r\n    private date: Date = new Date();\r\n    private subTotal?: number = 0;\r\n    private percent_discount_bill?: number = 0;\r\n    private taxValue?: number = 0;\r\n    private invoice: VhSaleExchangeVoucherInvoice = {\r\n        date: this.date.toISOString(),\r\n        id_customer: 'id_retail',\r\n        id_branch: null,\r\n        id_employee: null,\r\n        id_wallet: 'id_cash',\r\n        bill_type: 41,\r\n        note: '',\r\n        bill_code: '',\r\n        _id: null,\r\n        payment_type: 1,\r\n        discount: 0,\r\n        fee: 0,\r\n        tax: 0,\r\n        payment: 0,\r\n\r\n    };\r\n    protected invoiceDetail?: VhSaleExchangeVoucherInvoiceDetails[] = [];\r\n    public vhQuerySales: VhQuerySales\r\n    constructor(invoice: any = null, invoiceDetail: any[] = [], vhQuerySales: VhQuerySales) {\r\n        this.vhQuerySales = vhQuerySales\r\n        if (invoice) {\r\n            this.invoice.bill_code = invoice['bill_code'] ? invoice['bill_code'] : null\r\n            this.invoice.id_customer = invoice['id_customer'] ? invoice['id_customer'] : 'id_retail'\r\n            this.invoice.id_branch = invoice['id_branch'] ? invoice['id_branch'] : null\r\n            this.invoice.id_employee = invoice['id_employee'] ? invoice['id_employee'] : null\r\n            this.invoice.id_wallet = invoice['id_wallet'] ? invoice['id_wallet'] : 'id_cash'\r\n            this.invoice.bill_type = invoice['bill_type'] ? invoice['bill_type'] : null\r\n            this.invoice.date = invoice['date'] ? invoice['date'] : this.date.toISOString()\r\n            this.invoice.note = invoice['note'] ? invoice['note'] : ''\r\n            this.invoice._id = invoice['_id'] ? invoice['_id'] : null\r\n            this.invoiceDetail = invoice['invoiceDetail'] ? invoice['invoiceDetail'] : []\r\n            this.invoice.payment = invoice['payment'] ? invoice['payment'] : 0\r\n\r\n        }\r\n        if (invoiceDetail) {\r\n            this.invoiceDetail = invoiceDetail\r\n        }\r\n    }\r\n    /******************************Xu ly invoice *******************************/\r\n    public getID(): string {\r\n        return this.invoice._id;\r\n    }\r\n    public getBillType() {\r\n        return 41\r\n    }\r\n    public setBillType(value) {\r\n        this.invoice.bill_type = value\r\n    }\r\n    public getDate(): string {\r\n        return this.invoice.date\r\n    }\r\n    public setDate(value: Date | string) {\r\n        this.invoice.date = typeof (value) == 'string' ? value : value.toISOString()\r\n    }\r\n    public getBillCode(): string {\r\n        return this.invoice.bill_code\r\n    }\r\n    public setBillCode(value: string) {\r\n        this.invoice.bill_code = value\r\n    }\r\n\r\n    public getIdPartner(): string {\r\n        return this.invoice.id_customer\r\n    }\r\n    public setIdPartner(value: string) {\r\n        this.invoice.id_customer = value;\r\n        // this.getDiscountInvoice();\r\n    }\r\n    public getIdEmployee(): string {\r\n        return this.invoice.id_employee\r\n    }\r\n    public setIdEmployee(value: string) {\r\n        this.invoice.id_employee = value\r\n    }\r\n    public getIdBranch(): string {\r\n        return this.invoice.id_branch\r\n    }\r\n    public setIdBranch(value: string) {\r\n        this.invoice.id_branch = value\r\n    }\r\n    public getIdWallet(): string {\r\n        return this.invoice.id_wallet\r\n    }\r\n    public setIdWallet(value: string) {\r\n        this.invoice.id_wallet = value\r\n    }\r\n\r\n    public getRetailName() {\r\n        return this.invoice.retail_name\r\n    }\r\n    public setRetailName(retail_name: string) {\r\n        this.invoice.retail_name = retail_name\r\n    }\r\n\r\n    public getRetailPhone() {\r\n        return this.invoice.retail_phone\r\n    }\r\n    public setRetailPhone(retail_phone: string) {\r\n        this.invoice.retail_phone = retail_phone\r\n    }\r\n    public getRetailAddress() {\r\n        return this.invoice.retail_address\r\n    }\r\n    public setRetailAddress(retail_address: string) {\r\n        this.invoice.retail_address = retail_address\r\n    }\r\n    public getNote(): string {\r\n        return this.invoice.note\r\n    }\r\n    public setNote(value: string) {\r\n        this.invoice.note = value\r\n    }\r\n    public getTaxValue(): number {\r\n        return this.taxValue\r\n    }\r\n\r\n    public getSubTotal(): number {\r\n        return this.subTotal\r\n    }\r\n\r\n    getPercentDiscountBill() {\r\n        return this.percent_discount_bill\r\n    }\r\n    public getDiscount(): number {\r\n        return this.invoice.discount\r\n    }\r\n    public setDiscount(value: number) {\r\n        this.invoice.discount = value\r\n    }\r\n\r\n    public getFee(): number {\r\n        return this.invoice.fee\r\n    }\r\n    public setFee(value: number) {\r\n        this.invoice.fee = value\r\n    }\r\n    public getTax(): number {\r\n        return this.invoice.tax\r\n    }\r\n    public setTax(value: number) {\r\n        this.invoice.tax = value\r\n    }\r\n    public getTotalATax(): number {\r\n        return this.getTaxValue()\r\n    }\r\n    public getPayment(): number {\r\n        return this.invoice.payment;\r\n    }\r\n    public setPayment(value?: number) {\r\n        if (this.invoice.payment_type == 2) {\r\n            this.invoice.payment = 0;\r\n        } else {\r\n            if (value != null) this.invoice.payment = value;\r\n            else this.invoice.payment = this.getTaxValue();\r\n        }\r\n    }\r\n\r\n    public getPaymentType(): 1 | 2 | 3 {\r\n        return this.invoice.payment_type\r\n    }\r\n    /******************************Xu ly invoice detail *******************************/\r\n    /** Thêm sản phẩm vô bill detail */\r\n    public addInvoiceDetail(value: any) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'])\r\n        if (index != -1) {\r\n            if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n        } else {\r\n            let detail: any = {\r\n                id_voucher: value.id_voucher,\r\n                id_voucher_code: value.id_voucher_code,\r\n                code: value.code,\r\n                id_bill: value.id_bill,\r\n                vtype: 1,\r\n                name: value.name,\r\n                products: [...value.products.map(item => {\r\n                    let product: any = {\r\n                        id_product: item.id_product,\r\n                        ptype: item.type,\r\n                        price: 0,\r\n                        quantity: item.quantity,\r\n                        name: item.name\r\n                    }\r\n                    return product;\r\n                })]\r\n            }\r\n\r\n            this.invoiceDetail.push(detail)\r\n        }\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail */\r\n    public addInvoiceDetailMutilLine(value: any) {\r\n        let detail: any = {\r\n            id_voucher: value.id_voucher,\r\n            id_voucher_code: value.id_voucher_code,\r\n            code: value.code,\r\n            id_bill: value.id_bill,\r\n            vtype: 1,\r\n            products: [...value.products.map(item => {\r\n                let product: any = {\r\n                    ...item,\r\n                    id_product: item.id_product,\r\n                    ptype: item.type,\r\n                    price: 0,\r\n                    quantity: item.quantity,\r\n                    name: item.name\r\n                }\r\n                return product;\r\n            })]\r\n        }\r\n        this.invoiceDetail.unshift(detail)\r\n\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail đã tạo*/\r\n    public addInvoiceDetailDB(value: any, id_billDetail: any) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_product'] == value['_id'])\r\n        if (index != -1) {\r\n            if (this.invoiceDetail[index]['quantity'] < 9999999999) this.invoiceDetail[index]['quantity'] += 1\r\n        } else {\r\n            let detail: any = {\r\n                id_voucher: value.id_voucher,\r\n                id_voucher_code: value.id_voucher_code,\r\n                code: value.code,\r\n                id_bill: value.id_bill,\r\n                vtype: 1,\r\n                _id: id_billDetail,\r\n                products: [...value.products.map(item => {\r\n                    let product: any = {\r\n                        ...item,\r\n                        id_product: item.id_product,\r\n                        ptype: item.type,\r\n                        price: 0,\r\n                        quantity: item.quantity,\r\n                        name: item.name\r\n                    }\r\n                    return product;\r\n                })]\r\n            }\r\n            this.invoiceDetail.unshift(detail)\r\n        }\r\n\r\n    }\r\n\r\n    /** Thêm sản phẩm vô bill detail đã tạo*/\r\n    public addInvoiceDetailDBMutilLine(value: any, id_billDetail: any) {\r\n        let detail: any = {\r\n            id_voucher: value.id_voucher,\r\n            id_voucher_code: value.id_voucher_code,\r\n            code: value.code,\r\n            id_bill: value.id_bill,\r\n            vtype: 1,\r\n            _id: id_billDetail,\r\n            products: [...value.products.map(item => {\r\n                let product: any = {\r\n                    ...item,\r\n                    id_product: item.id_product,\r\n                    ptype: item.ptype,\r\n                    price: 0,\r\n                    quantity: item.quantity,\r\n                    name: item.name,\r\n                }\r\n                if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct\r\n                if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct\r\n                if (item.combos) product['combos'] = item.combos\r\n                return product;\r\n            })]\r\n        }\r\n        this.invoiceDetail.unshift(detail)\r\n\r\n    }\r\n\r\n    /** xóa sản phẩm */\r\n    public removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n        let index = this.invoiceDetail.findIndex(detail => detail['id_voucher'] == id)\r\n        if (index != -1) {\r\n            this.invoiceDetail.splice(index, 1);\r\n        }\r\n    }\r\n    /** Lấy toàn bộ bill detail */\r\n    public getInvoiceDetail() {\r\n        return this.invoiceDetail;\r\n    }\r\n\r\n\r\n    /******************************create - update - delete invoice / detail *******************************/\r\n    /** Lấy toàn bộ bill dùng để lưu database */\r\n    public getCreateUpdateInvoice(bill_type) {\r\n        if (bill_type) this.setBillType(bill_type)\r\n        return this.invoice\r\n    }\r\n    /** Lấy toàn bộ bill detail dùng để lưu database */\r\n    public getCreateUpdateInvoiceDetail(): VhSaleExchangeVoucherInvoiceDetails[] {\r\n        return this.invoiceDetail.map(item => {\r\n            let detail: VhSaleExchangeVoucherInvoiceDetails = {\r\n                id_voucher: item.id_voucher,\r\n                id_voucher_code: item.id_voucher_code,\r\n                code: item.code,\r\n                id_bill: item.id_bill,\r\n                vtype: 1,\r\n                products: [...item.products.map(item => {\r\n                    let product: any = {\r\n                        id_product: item.id_product,\r\n                        ptype: item.ptype,\r\n                        price: 0,\r\n                        ratio: item.ratio,\r\n                        quantity: item.quantity,\r\n                    }\r\n                    if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct\r\n                    if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct\r\n                   \r\n                    if (item.ptype == 5) {\r\n                        product['combos'] = item.combos.map(combo => {\r\n                            let e = {\r\n                                id_product: combo.id_product,\r\n                                price: combo.price,\r\n                                quantity: combo.quantity,\r\n                                ptype: combo.type,\r\n                                ratio: combo.ratio ? combo.ratio : 1,\r\n                            }\r\n                            if (combo.id_lotproduct) e['id_lotproduct'] = combo.id_lotproduct\r\n                            if (combo.id_subproduct) e['id_subproduct'] = combo.id_subproduct\r\n                            return e;\r\n                        })\r\n                    }\r\n                    return product;\r\n                })]\r\n            }\r\n\r\n            return detail\r\n        })\r\n    }\r\n    /**Làm sạch bill detail */\r\n    public getCreateItemCleanDetail(cleanedDetail: VhSaleExchangeVoucherInvoiceDetails) {\r\n        let detail: any = {\r\n            id_bill: this.invoice._id,\r\n            vtype: cleanedDetail.vtype,\r\n            id_voucher: cleanedDetail.id_voucher,\r\n            id_voucher_code: cleanedDetail.id_voucher_code,\r\n            code: cleanedDetail.code,\r\n            products: cleanedDetail.products,\r\n            name: cleanedDetail.name\r\n        }\r\n        return detail;\r\n    }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}