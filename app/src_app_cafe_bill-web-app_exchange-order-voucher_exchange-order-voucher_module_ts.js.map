{"version":3,"file":"src_app_cafe_bill-web-app_exchange-order-voucher_exchange-order-voucher_module_ts.js","mappings":"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","sources":["./src/app/cafe/bill-web-app/exchange-order-voucher/detail/detail.component.ts","./src/app/cafe/bill-web-app/exchange-order-voucher/detail/detail.component.html","./src/app/cafe/bill-web-app/exchange-order-voucher/exchange-order-voucher.component.html","./src/app/cafe/bill-web-app/exchange-order-voucher/exchange-order-voucher.component.ts","./src/app/cafe/bill-web-app/exchange-order-voucher/exchange-order-voucher.module.ts"],"sourcesContent":["\r\nimport { ExchangeVoucherA4Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-a4/exchange-voucher-a4.component';\r\nimport { ExchangeVoucherA5Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-a5/exchange-voucher-a5.component';\r\nimport { ExchangeVoucherK57Col3Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k57-col3/exchange-voucher-k57-col3.component';\r\nimport { ExchangeVoucherK80Col3Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k80-col3/exchange-voucher-k80-col3.component';\r\nimport { ExchangeVoucherK80Col4Component } from 'src/app/cafe/components/print/exchange-voucher/exchange-voucher-k80-col4/exchange-voucher-k80-col4.component';\r\nimport { VhSaleExchangeVoucherInvoice, VhSaleExchangeVoucherInvoiceDetails, VhSaleExchangeVoucherInvoices } from 'src/app/cafe/interface/vh-sale-voucher-invoice';\r\nimport { ActivatedRouteSnapshot, Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  listShow = []\r\n  public root: any; // biến nhận state truyền qua\r\n  public invoice: VhSaleExchangeVoucherInvoices = new VhSaleExchangeVoucherInvoices({}, [])\r\n  public employee: any = {};\r\n  public pickerTime = new Date();\r\n  public customer: any;\r\n  public checkPrinter: boolean = false;\r\n  public closerBrower: any;\r\n  public id_product_delete: string = '';\r\n  customer_online: any;\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth: VhAuth,\r\n    private nzModalService: NzModalService,\r\n    private fncService: FunctionService,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.root = this.router.getCurrentNavigation().extras.state;\r\n    this.customer_online = this.root.customer\r\n    this.getDataInvoice(this.root.bill);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  private getDataInvoice(bill) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill_details_byId_bill(bill._id)\r\n      ]).then(([invoiceDetail]: any) => {\r\n        console.log(invoiceDetail);\r\n        if (!invoiceDetail.length)\r\n          this.init(bill, [])\r\n        else {\r\n          // invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          let promise = []\r\n          for (let i in invoiceDetail) {\r\n            promise[i] = this.vhQueryCafe.getVoucher_Code_Name_Release(invoiceDetail[i].id_voucher_code)\r\n          }\r\n          Promise.all(promise).then((array) => {\r\n            invoiceDetail = invoiceDetail.map((e, index) => {\r\n              return { ...e, price: array[index].units[0].price, ...array[index] }\r\n            })\r\n            this.init(bill, invoiceDetail);\r\n            this.listShow = invoiceDetail;\r\n            console.log(this.listShow);\r\n\r\n          })\r\n\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  init(invoice: VhSaleExchangeVoucherInvoice = null, invoiceDetail: VhSaleExchangeVoucherInvoiceDetails[] = null) {\r\n    this.vhComponent.hideLoading(0)\r\n    this.invoice = new VhSaleExchangeVoucherInvoices(invoice, invoiceDetail)\r\n    if (invoice && invoiceDetail) {\r\n      // set nhân viên mặc định\r\n      if (!this.invoice.getIdEmployee())\r\n        this.invoice.setIdEmployee(this.vhAuth.getUser()._id)\r\n        this.invoice.setDate(new Date().toISOString())\r\n      this.note = this.invoice.getNote();\r\n      this.pickerTime = new Date(this.invoice.getDate());\r\n\r\n      this.employee = this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee());\r\n\r\n    }\r\n  }\r\n  ngAfterViewInit() {\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales_voucher')\r\n    if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n\r\n\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this.cdf.detectChanges()\r\n  }\r\n\r\n\r\n  // chuổi danh sách sản phẩm\r\n  getStringName(products: any[]) {\r\n    let name = ''\r\n    products.forEach(element => {\r\n      let product = this.vhQueryCafe.getlocalDetailProduct(element.id_subproduct ? element.id_subproduct : element.id_product)\r\n      name += '- ' + element.quantity + 'x ' + product.name +' \\n';\r\n    });\r\n    return name\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/bill-web-app/exchange-order-voucher']);\r\n  }\r\n\r\n  // -------set employee-------\r\n  employees = this.vhAuth.getlocalEmployees();\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.setIdEmployee(event);\r\n    }\r\n  }\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.getDate())\r\n      this.invoice.setDate(new Date(this.pickerTime));\r\n    }\r\n    else this.vhQueryCafe.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.setDate(event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.setDate(new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n  }\r\n\r\n  payInvoice(bill_type: 41, print?) {\r\n    console.log(this.invoice.getCreateUpdateInvoiceDetail());\r\n    console.log(this.checkBillDetailSave());\r\n    if (this.checkBillDetailSave()) {\r\n      if (this.vhAuth.checkMyPermission(\"sales_enable_payment\")) {\r\n        if (print) {\r\n          if (this.checkPrinter) {\r\n            this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n              this.createOrUpdate().then((bill: any) => {\r\n                \r\n                this.vhComponent.hideLoading(0).then(() => {\r\n                  this.vhComponent.showToast(5000,\r\n                    `${this.languageService.translate(\"Invoice for exchanging voucher for goods (capitalized)\")} ${ this.invoice.getBillCode()} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                  )\r\n                  this.handlePrint()\r\n                })\r\n              })\r\n            })\r\n          }\r\n          else {\r\n            this.nzModalService.confirm({\r\n              nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n              nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n              nzIconType: \"info-circle\",\r\n              nzCancelText: null,\r\n              nzOnOk: () => { }\r\n            })\r\n          }\r\n        }\r\n        else {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.createOrUpdate().then((bill: any) => {\r\n              \r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(5000,\r\n                  `${this.languageService.translate(\"Hóa Đơn đặt đổi voucher lấy hàng lấy hàng hóa\")} ${ this.invoice.getBillCode()} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                )\r\n                this.goBack()\r\n              })\r\n            })\r\n          })\r\n        }\r\n      }\r\n      else this.vhComponent.showToast(5000, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('Please select the lot number for the products in the voucher'))\r\n  }\r\n\r\n  checkBillDetailSave() {\r\n    for (let i of this.invoice.getInvoiceDetail()) {\r\n      if (i.products.find(item => (item.lots && !item.id_lotproduct) || (item.combos && item.combos.find(e => e.lots && !e.id_lotproduct)))) return false;\r\n    }\r\n    return true\r\n  }\r\n\r\n\r\n  createOrUpdate() {\r\n    return new Promise(resolve => {\r\n      let invoice = { ...this.invoice.getCreateUpdateInvoice(43) }\r\n      console.log('bill', invoice);\r\n      console.log('bill_details', this.invoice.getCreateUpdateInvoiceDetail()); \r\n      \r\n      this.vhQueryCafe.updateBill_Billdetail(this.invoice.getID(), invoice, this.invoice.getCreateUpdateInvoiceDetail())\r\n        .then(() => {\r\n          resolve(this.vhQueryCafe.saveBill_Billdetail(this.invoice.getID(),41))\r\n        })\r\n    })\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  \r\n  deleteInvoice() {\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.invoice.getID())\r\n          .then((bool) => {\r\n            if (bool) {\r\n              this.vhComponent.hideLoading(0)\r\n              console.log('success');\r\n              this.goBack()\r\n            } else {\r\n              console.log('no success');\r\n            }\r\n          }, (error: any) => {\r\n            console.log('error ', error);\r\n          })\r\n      })\r\n\r\n  }\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getlocalPrinters().find(item => item.name == \"DESKTOP\")\r\n      if (printer && printer.voucher.enable) resolve(printer.voucher)\r\n      else resolve(false)\r\n      if (!printer) rejects(false)\r\n    })\r\n  }\r\n\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExchangeVoucherK57Col3Component\r\n      case 'print_size_k80_3c': return ExchangeVoucherK80Col3Component\r\n      case 'print_size_k80_4c': return ExchangeVoucherK80Col4Component\r\n      case 'print_size_a5': return ExchangeVoucherA5Component\r\n      case 'print_size_a4': return ExchangeVoucherA4Component\r\n      default: return ExchangeVoucherA4Component\r\n    }\r\n  }\r\n\r\n\r\n  handlePrint() {\r\n    let print = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales_voucher')\r\n    if (print && print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)].enable) {\r\n      let printer = print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)]\r\n      if (printer) {\r\n        let type = printer._id;\r\n        this.vhComponent.showModal(this.renderPrintPage(type), { printer: printer, invoice: this.invoice }, false, false, `modal-print-${type}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.goBack())\r\n        })\r\n      }\r\n    }\r\n  }\r\n  note: string;\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.setNote(this.note)\r\n    }\r\n  } \r\n  tempDetail: any = {}\r\n  show_modal_select_lots_combo = false;\r\n  handleChooseLotCombo() {\r\n    let check = false;\r\n    for (let i of this.tempDetail) {\r\n      if (i.ptype == 1 && i.lots && !i.id_lotproduct) check = true;\r\n      if (i.ptype == 5 && i.combos.filter(item => item.lots && !item.id_lotproduct).length) check = true;\r\n    }\r\n    if (check)\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Please select the lot for the product!\"))\r\n    else {\r\n      this.show_modal_select_lots_combo = false;\r\n      // this.closeSearchProductList(this.tempDetail)\r\n    }\r\n  }\r\n\r\n   \r\n\r\n  deleteGoods(position) {\r\n    if (this.listShow.length == 1) {\r\n      this.listShow = []\r\n    } else {\r\n      this.listShow.splice(position, 1);\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"sales hide-best-selling\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{'Invoice for exchanging voucher for goods (capitalized)' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n\r\n                    <div>\r\n                        <button (click)=\"deleteInvoice()\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                          <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                          {{'Delete' | translate}}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <table style=\"width: 100%\" *ngIf=\"invoice.getInvoiceDetail().length\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"40%\"><b>{{'Voucher name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\"><b>{{'Voucher code' | translate}}</b></th>\r\n                                <th nzWidth=\"25%\"><b>{{'_Issuance name' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign=\"center\"><b>{{'Release date' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <ng-container *ngFor=\"let data of listShow; let i = index\">\r\n                                <tr>\r\n                                    <td>\r\n                                        <span><b>{{data.name_voucher}}</b></span><br>\r\n                                        <ng-container *ngIf=\"data.products\">\r\n                                            <span *ngFor=\"let product of data.products\">\r\n                                                x{{product.quantity}} {{ product.name}}\r\n                                                \r\n                                                <div *ngIf=\"product.combos\">\r\n                                                    <span *ngFor=\"let e of product.combos\">\r\n                                                        {{ e.name}} x{{e.quantity}},\r\n                                                    </span>\r\n                                                </div>\r\n                                                <br>\r\n                                            </span>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td>{{data.code}}</td>\r\n\r\n                                    <td><b>{{data.name_voucher_release}}</b></td>\r\n                                    <td nzAlign=\"center\">\r\n                                        {{data.date_validity |date: 'dd/MM/yyyy HH:mm'}}\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <!-- <app-staff [id_employee]=\"invoice.getIdEmployee()\" (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff> -->\r\n                        <nz-select nzPlaceHolder=\"{{'Select employee' | translate}}\" [ngModel]=\"invoice.getIdEmployee()\"\r\n                            (ngModelChange)=\"closeAndReceiveEmployee($event)\" nzBorderless class=\"cus-select\"\r\n                            nzShowSearch>\r\n                            <nz-option *ngFor=\"let item of employees\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Sales date' | translate}}</b>\r\n                        <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless\r\n                            nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <div class=\"sales-bills-customer-title\">\r\n                    <b>{{'Customer information' | translate}}\r\n                    </b>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    {{customer_online.name}} - {{customer_online.phone}} {{customer_online.address ? '-':\r\n                    ''}} {{invoice.getRetailAddress()}}\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice.getInvoiceDetail().length\" (click)=\"payInvoice(41,true)\" nz-button\r\n                    class=\"order-and-print\">\r\n                    {{\"Complete & Print\"|translate}} (F2)\r\n                </button>\r\n                <button style=\"margin: auto;\" [disabled]=\"!invoice.getInvoiceDetail().length\"\r\n                    (click)=\"payInvoice(41,false)\" nz-button class=\"order\">\r\n                    {{\"Complete\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n<!-- modal chọn lô/HSD cho combo-->\r\n<nz-modal nzWidth=\"70vw\" *ngIf=\"show_modal_select_lots_combo\" [nzFooter]=\"modalFooterEditUnitPrice3\"\r\n    [(nzVisible)]=\"show_modal_select_lots_combo\"\r\n    nzTitle=\"{{'Select lot number for products in voucher' | translate}}: {{tempDetail.name}}\"\r\n    (nzOnCancel)=\"show_modal_select_lots_combo = false\" (nzOnOk)=\"handleChooseLotCombo()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"tempDetail\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\">{{\"Product name\" | translate}}</th>\r\n                    <th nzWidth=\"30%\"> {{'Lot number' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Unit' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Quantity' | translate}}</th>\r\n                    <th nzAlign=\"right\" nzWidth=\"20%\">{{'Unit price' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let data of basicTable.data\">\r\n\r\n                    <ng-container *ngIf=\"data.combos\">\r\n                        <tr>\r\n                            <td colspan=\"4\">{{ data.name }}</td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let item of data.combos\">\r\n                            <tr *ngIf=\"item.lots\">\r\n                                <td style=\"padding-left: 16px !important;\">{{ item.name }}</td>\r\n                                <td>\r\n                                    <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\" style=\"width:100%\"\r\n                                        [(ngModel)]=\"item.id_lotproduct\">\r\n                                        <nz-option *ngFor=\"let element of item.lots\"\r\n                                            nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date: 'dd/MM/yyyy'}}\"\r\n                                            [nzValue]=\"element._id\"></nz-option>\r\n                                    </nz-select>\r\n                                </td>\r\n                                <td>{{getUnit(item.units, item.ratio)}}</td>\r\n                                <td>{{ item.quantity }}</td>\r\n                                <td nzAlign=\"right\">\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price) }}\r\n\r\n                                </td>\r\n                            </tr>\r\n                        </ng-container>\r\n\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"!data.combos && data.lots\">\r\n                        <tr>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\" style=\"width:100%\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date: 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleChooseLotCombo()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLotCombo()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>"," \r\n    <nz-layout id=\"sales-invoice-today\" >\r\n        <div class=\"sales-invoice-today-header\" style=\"padding: 8px;  background: white;\" nz-row>\r\n            <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n                <b>{{'Order for exchanging voucher for goods' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                    <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input placeholder=\"{{'Search for invoice code, customer name, payment, status,phone' | translate}}\" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconSearch>\r\n                    <i nz-icon nzType=\"search\"></i>\r\n                </ng-template>\r\n               \r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"right-all-content\" style=\"padding-right: 16px;\">\r\n                <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n                <button class=\" btn-add\"   nz-button nzType=\"default\" (click)=\"getInvoiceToday()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" >\r\n               <app-header-account-info></app-header-account-info>\r\n            </div>\r\n        </div>\r\n    \r\n        <div nz-row style=\"height: 100%; margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"24\" style=\"padding: 0 160px;\">\r\n                <div nz-row *ngIf=\"!invoiceShow.length\" style=\"height: 100%;\">\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <p>{{'No invoice today' | translate}}</p>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"invoiceShow.length\" style=\"padding: 8px; background-color: white;height: 100%;border-radius: 5px;\">\r\n                    <div class='total-item'>{{'Total' |translate}}<span style=\"color:var(--ion-color-vh-red)\">\r\n                            {{invoiceShow.length}}\r\n                        </span>{{'invoices today' | translate}}\r\n                    </div>\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceShow\" #tableSales nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" nzShowSizeChanger [nzNoResult]=\"noBill\" (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"dateCol = !dateCol;sortTable('date')\">\r\n                                    <b>{{'Date' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                                    <b>{{'Invoice code' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"partner_nameCol = !partner_nameCol;sortTable('partner_name')\">\r\n                                    <b>{{'Customer' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"partner_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th nzWidth=\"15%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"15%\" nzAlign='right' (click)=\"sum_priceCol = !sum_priceCol;sortTable('sum_price')\">\r\n                                    <b>{{'Total' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"sum_priceCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"goToDetail(invoice)\">\r\n                                <td nzAlign='left'>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                                <td nzAlign='left'>{{invoice.bill_code}} <i (click)=\"$event.stopPropagation();vhComponent.copyValue(invoice.bill_code)\" nz-icon nzType=\"copy\" nzTheme=\"outline\"></i></td>\r\n                                <td nzAlign='left'>{{(invoice.customer ? invoice.customer['name'] : 'Not found') | translate}} \r\n                                </td>\r\n                                \r\n                                <td nzAlign='left'>{{invoice.note}}</td> \r\n                                <td class=\"money-right\">\r\n                                    {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total*(1+invoice.tax/100))}}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                    <ng-template #noBill>\r\n                        <div class=\"pos-content-empty\">\r\n                            <div>\r\n                                <div>\r\n                                    <ion-icon style=\"font-size: 230px;\" src=\"assets/icon/pos/undraw_add_to_cart_vkjp.svg\">\r\n                                    </ion-icon>\r\n                                </div>\r\n                                {{'No data' | translate}}\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n    \r\n                </div>\r\n            </div> \r\n        </div>\r\n    </nz-layout>\r\n   \r\n    ","import { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, HostListener } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhDisplayLEDService, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { NzNotificationService } from 'ng-zorro-antd/notification';\r\n\r\n@Component({\r\n  selector: 'app-exchange-order-voucher',\r\n  templateUrl: './exchange-order-voucher.component.html',\r\n  styleUrls: ['./exchange-order-voucher.component.scss']\r\n})\r\nexport class ExchangeOrderVoucherComponent implements OnInit {\r\n  useBranch: boolean = this.functionService.checkUsingBranch()\r\n  public searchValue: string = ''\r\n  public invoiceShow: any[] = []\r\n  public invoiceToday: any[];\r\n  tableHeight: string;\r\n  public date: Date[] = [new Date(), new Date()];\r\n\r\n  public invoiceInfo: any;\r\n  public invoice: any // bill được chọn để xem chi tiết\r\n\r\n  constructor(\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private notification: NzNotificationService,\r\n    private plaform: Platform,\r\n    private vhDisplayLEDService: VhDisplayLEDService,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    let data = this.router.getCurrentNavigation().extras.state\r\n    if(data && data.invoiceToday){\r\n      this.invoiceToday = this.router.getCurrentNavigation().extras.state.invoiceToday\r\n      this.invoiceShow =  this.invoiceToday\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0, 0, 0, 0)).getTime() - new Date(event[0].setHours(0, 0, 0, 0)).getTime() <= this.fncService.checkDateReport() * 86000000) {\r\n      //this.getTransferList();\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" + this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n\r\n\r\n  getInvoiceToday() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.getBills_byFields({ date: { $gte: new Date(this.date[0].setHours(0, 0, 0)).toISOString(), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)).toISOString() }, bill_type: { $in: [43] }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }, {})\r\n        .then((invoice: any[]) => {\r\n          console.log(invoice);\r\n          let promise = new Array();\r\n          for (let i = 0; i < invoice.length; i++) {\r\n            promise[i] = this.vhQueryCafe.getCustomer(invoice[i].id_customer)\r\n          }\r\n          this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n            this.invoiceToday = invoice.map((item,index) => {\r\n              return { ...item, customer: array[index],  sum_price: item.total * (1 + item.tax / 100),   }\r\n            })\r\n            this.searchBill(this.searchValue)\r\n          }, error => { console.log(error); })\r\n          this.vhComponent.hideLoading(0);\r\n\r\n        })\r\n    })\r\n  }\r\n  searchBill(value: string) {\r\n    if (value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoiceToday, ['bill_code', 'partner_name', 'employee_name', 'payment_name', 'status', 'phone'])\r\n    } else this.invoiceShow = [...this.invoiceToday]\r\n    console.log(this.invoiceShow);\r\n\r\n  }\r\n  /* -----Pagination----- */\r\n  onCurrentPageDataChange(value) {\r\n  }\r\n\r\n  goToDetail(bill) {\r\n    console.log(bill);\r\n\r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_view_bill_today\")) {\r\n      this.router.navigate([\"/cafe/bill-web-app/exchange-order-voucher/detail\"], { state: { bill: bill, invoiceToday :  this.invoiceToday , customer : bill.customer} })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  goToCart() {\r\n\r\n    this.router.navigate(['/cafe/sales-desktop/add'])\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-invoice-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-invoice-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-today-header\").clientHeight - 110 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  deleteBill() {\r\n    let bill: any = { ...this.invoice }\r\n    this.invoiceShow = this.invoiceShow.filter(item => item._id != bill._id)\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  partner_nameCol = false;\r\n  payment_nameCol = false;\r\n  name_employeeCol = false;\r\n  sum_priceCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'date':\r\n        if (this.dateCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if (this.bill_codeCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'partner_name':\r\n        if (this.partner_nameCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'payment_name':\r\n        if (this.payment_nameCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n\r\n      case 'sum_price':\r\n        if (this.sum_priceCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ExchangeOrderVoucherComponent } from './exchange-order-voucher.component';\r\nimport { HeaderAccountInfoModule } from '../header-account-info/header-account-info.module'; \r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ExchangeOrderVoucherComponent,\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailComponent,\r\n  }\r\n]\r\n@NgModule({\r\n  declarations: [ExchangeOrderVoucherComponent, DetailComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    HeaderAccountInfoModule\r\n  ]\r\n})\r\nexport class ExchangeOrderVoucherModule { }\r\n"],"names":["i0","$event","ctx_r11","ctx_r14","ctx_r15","ctx_r16","ctx_r17","ctx_r3","_r6","ExchangeOrderVoucherComponent","constructor","vhQuery","router","vhQueryCafe","vhAlgorithm","vhComponent","languageService","vhAuth","cdRef","functionService","notification","plaform","vhDisplayLEDService","fncService","checkUsingBranch","Date","date","setHours","data","getCurrentNavigation","extras","state","invoiceToday","invoiceShow","ngOnInit","changeTime","event","getTime","checkDateReport","showToast","translate","getInvoiceToday","showLoading","then","getBills_byFields","$gte","toISOString","$lte","bill_type","$in","id_branch","$eq","getDefaultBranch","_id","invoice","console","log","promise","Array","i","length","getCustomer","id_customer","asyncPromiseAll","array","map","item","index","customer","sum_price","total","tax","searchBill","searchValue","error","hideLoading","value","val","changeAlias","trim","toLowerCase","searchList","onCurrentPageDataChange","goToDetail","bill","checkMyPermission","navigate","goToCart","renderAddress","partner","address","district","province","country","ngAfterViewChecked","document","querySelector","tableHeight","clientHeight","detectChanges","deleteBill","filter","sortTable","colName","dateCol","sortDatebyASC","sortDatebyDESC","bill_codeCol","sortVietnamesebyASC","sortVietnamesebyDESC","partner_nameCol","payment_nameCol","sum_priceCol","sortNumberbyASC","sortNumberbyDESC","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}