{"version":3,"file":"src_app_cafe_desktop_cafe-desktop_components_cart1_cart1_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/cafe-desktop/components/cart1/bill-detail1/bill-detail1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill-detail1/bill-detail1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill-detail1/bill-detail1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill-detail1/print-one-col/print-one-col.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill-detail1/print-one-col/print-one-col.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill1/bill1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill1/bill1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/bill1/bill1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/cart1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/cart1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/cart1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer-profile/customer-profile.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer-profile/customer-profile.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer-profile/customer-profile.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer1/customer1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer1/customer1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/customer1/customer1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/info-bill1/info-bill1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/info-bill1/info-bill1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/info-bill1/info-bill1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/payment-button1/payment-button1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/payment-button1/payment-button1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/payment-button1/payment-button1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/product-wishlist1/product-wishlist1.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/product-wishlist1/product-wishlist1.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/product-wishlist1/product-wishlist1.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/retail-info/retail-info.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/retail-info/retail-info.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-combo/search-combo.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-combo/search-combo.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-combo/search-combo.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-product/search-product.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-product/search-product.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-product/search-product.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-service/search-service.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-service/search-service.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-service/search-service.module.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-topping/search-topping.component.ts","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-topping/search-topping.component.html","./src/app/cafe/desktop/cafe-desktop/components/cart1/search-topping/search-topping.module.ts"],"sourcesContent":["import { Component, EventEmitter, HostListener, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport PrintJs from 'print-js'\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-bill-detail1',\r\n  templateUrl: './bill-detail1.component.html',\r\n  styleUrls: ['./bill-detail1.component.scss']\r\n})\r\nexport class BillDetail1Component implements OnInit {\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F3\", \"F4\", \"F5\", \"F6\"].includes(event.key)) {\r\n      this.closeSearchProduct(false)\r\n      this.closeSearchService(false)\r\n      this.closeSearchSideDishes(false)\r\n      this.closeSearchCombos(false)\r\n\r\n      switch (event.key) {\r\n        case \"F3\": this.openSearchService(); break;\r\n        case \"F4\": this.openSearchProduct(); break;\r\n        case \"F5\": this.openSearchSideDishes(); break;\r\n        case \"F6\": this.openSearchCombos(); break;\r\n      }\r\n      event.preventDefault(); event.stopPropagation()\r\n    }\r\n  }\r\n  @Output() goBack = new EventEmitter()\r\n  @Input() statusInvoice: any = {}\r\n  @Input() printKitchenAll: boolean;\r\n  @Input() stamp: any; // thông tin tem in truyền từ component card\r\n  @Input() default_price_type: any;\r\n  @Input() printAllLabelEvent: boolean;\r\n  list_selected_dishs: any; // danh sách món cần in\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices\r\n  // cho phép in bếp hay không?\r\n  @Input() checkPrinterKitchen: any\r\n  // Thông tin bàn\r\n  @Input() tableInfo: any;\r\n  // cập nhật lại bill khi có thay đổi\r\n  @Output() updateInvoice: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() deletePromotion: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGift: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGiftType7: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showModalChangePriceType: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() checkPromotion: EventEmitter<boolean> = new EventEmitter()\r\n  @Input() printer: any\r\n  showDrawerProductList: boolean = false\r\n  showDrawerServiceList: boolean = false\r\n  showDrawerSideDishesList: boolean = false\r\n  showDrawerCombosList: boolean = false\r\n  showDrawerEdit: boolean = false\r\n  showPrintKitchenAgain = false\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  public printKitchen: any = {\r\n    status: false,\r\n    title: 'Add dishes',\r\n    value: []\r\n  };\r\n  wishList: boolean = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  warning_lot_expried: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried\r\n  dispatchers_enable: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n  open_dialog_print_kitchen_bill_detail: any = this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").open_dialog_print_kitchen_bill_detail;\r\n  id_branch = this.vhQueryCafe.getDefaultBranch()._id\r\n  show_modal_dispatcher: boolean = false;\r\n  dispatcherzones = this.vhQueryCafe.getlocalDispatcherZones();\r\n  id_dispatcherzone = this.vhQueryCafe.getlocalDispatcherZones().length ? this.vhQueryCafe.getlocalDispatcherZones().find(e => e.default)._id : '';\r\n  printer_kitchens = this.vhQueryCafe.getlocalPrinters();\r\n  id_printer_kitchen = this.vhQueryCafe.getlocalPrinters().length ? this.vhQueryCafe.getlocalPrinters().find(e => e.default)._id : ''\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n\r\n\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth: VhAuth,\r\n    private lang: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    public platform: Platform,\r\n    private nzModalService: NzModalService,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    console.log('default_price_type',this.default_price_type);\r\n  }\r\n\r\n\r\n\r\n  ngOnChanges({ printAllLabelEvent, printKitchenAll, invoices }: SimpleChanges): void {\r\n    // Nếu thay đổi invoices thì tính lại giá cho các dịch vụ thời gian và total cho bill\r\n    if(invoices && invoices.currentValue) {\r\n      if(this.invoices.getInvoiceDetail().length && this.productService.isContainServiceTime(this.invoices)) {\r\n        this.endTime = new Date();\r\n        // set lại price\r\n        this.invoices.getInvoiceDetail()?.forEach((item, index) => {\r\n          if (item.ptype === VhType.SERVICETIME && !item.is_paused) {\r\n            const newItem = { ...item, time_end_order: this.endTime };\r\n            const serviceTimePrice: any = this.productService.calculateServiceTimePrice(newItem, this.endTime, this.invoices.getPriceType());\r\n            newItem.price = serviceTimePrice.total_price;\r\n            newItem.price_origin = serviceTimePrice.total_price;\r\n            this.invoices.getInvoiceDetail()[index] = {...newItem};\r\n          }\r\n        });\r\n        // Tính lại total cho bill\r\n        this.invoices.setSubTotal();\r\n      }\r\n    }\r\n    if (printAllLabelEvent && printAllLabelEvent.currentValue == true)\r\n      this.printAllLabel()\r\n    if (printKitchenAll && printKitchenAll.currentValue) {\r\n      this.printAllDishToKitchen();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  printAllDishToKitchen() {\r\n    if (this.checkPrinterKitchen.enable) {\r\n      for (let detail of this.invoices.getInvoiceDetail()) {\r\n        let dataKitchen: any = {\r\n          name: detail.name,\r\n          quantity: +detail.quantity,\r\n          note: detail.note,\r\n          max_quantity: +detail.quantity,\r\n          ptype: detail.ptype,\r\n          ratio: detail.ratio,\r\n          units: detail.units,\r\n        }\r\n        if (detail.properties) dataKitchen['properties'] = detail.properties\r\n        if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity } })\r\n        if (detail.combos) dataKitchen['combos'] = detail.combos\r\n        this.printKitchen['value'].push(dataKitchen)\r\n      }\r\n      this.printKitchen = { ...this.printKitchen, title: 'Add dishes' }\r\n      this.showPrintKitchenAgain = true\r\n    }\r\n  }\r\n\r\n  printLabel(item, i) {\r\n    if(item.ptype == VhType.SERVICETIME && !item.is_paused) {\r\n      this.productService.updateServiceTimePrice(item, this.invoices.getPriceType());\r\n      this.invoices.getInvoiceDetail()[i] = item;\r\n      this.invoices.setSubTotal();\r\n    }\r\n    // lọc bỏ topping số lượng = 0\r\n    const data = JSON.parse(JSON.stringify(item || {}));\r\n    if(item.toppings && item.toppings.length > 0) {\r\n      data.toppings = item.toppings.filter(topping => topping.quantity > 0);\r\n    }\r\n    this.list_selected_dishs = [{ ...data, index: i }]\r\n  }\r\n\r\n  printAllLabel() {\r\n    let arr = []\r\n    this.invoices.getInvoiceDetail().forEach((element, index) => {\r\n      if ([1, 4, 5].includes(element.ptype))\r\n        arr.push({ ...element, index: index })\r\n    });\r\n    this.list_selected_dishs = arr\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  myTrackByNameFunction(element: any, index: any) {\r\n    return element.name ? element.name : index\r\n  }\r\n\r\n  openSearchProduct() {\r\n    this.showDrawerProductList = true\r\n  }\r\n  closeSearchProduct(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerProductList = false\r\n  }\r\n  openSearchService() {\r\n    this.showDrawerServiceList = true\r\n  }\r\n  closeSearchService(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerServiceList = false\r\n  }\r\n  openSearchSideDishes() {\r\n    this.showDrawerSideDishesList = true\r\n  }\r\n  closeSearchSideDishes(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerSideDishesList = false\r\n  }\r\n  openSearchCombos() {\r\n    this.showDrawerCombosList = true\r\n  }\r\n  closeSearchCombos(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerCombosList = false\r\n  }\r\n  /** Tạo bill detail lên database\r\n   * @param productValue thông tin sản phẩm\r\n  */\r\n  async createBillDetail(productValue: any) {\r\n    if (productValue.quantity) { // nếu SL sản phẩm > 0\r\n\r\n      let name = `${productValue.name}`\r\n\r\n      //tạo detail lưu local\r\n      let detail: any = this.invoices.getCreateItemDetail(\r\n        productValue\r\n      )\r\n      detail['name'] = name;\r\n      \r\n      // thêm bill detail đó vào danh sách bill detail\r\n      this.invoices.addInvoiceDetail({ ...productValue, id_product: productValue._id, time_start_order: new Date() })\r\n\r\n      let bill_detail = this.invoices.getCreateItemCleanDetail(detail) // dữ liệu detail sạch phù hợp với database\r\n      if (bill_detail.ptype == 5) {\r\n        this.vhQueryCafe.createBill_Detail_ptype_5(bill_detail)\r\n          .then((vhbill_detail) => {\r\n            this.invoices.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n            this.choiceFood = this.invoices.getInvoiceDetail()[0]\r\n            this.updateInvoice.emit(true);\r\n            this.printKitchenOrDispatcher(detail)\r\n          }, error => {\r\n            console.log('error', error);\r\n          })\r\n      }\r\n      else {\r\n        console.log('createBill_Detail',bill_detail);\r\n        this.vhQueryCafe.createBill_Detail(bill_detail)\r\n          .then((vhbill_detail) => {\r\n            console.log('vhbill_detail',vhbill_detail);\r\n            \r\n            this.invoices.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n            this.choiceFood = this.invoices.getInvoiceDetail()[0]\r\n            this.updateInvoice.emit(true)\r\n            this.printKitchenOrDispatcher(detail)\r\n          }, error => {\r\n            console.log('error', error);\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  printKitchenOrDispatcher(bill_detail) {\r\n    // Bật in bếp\r\n    if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n      let dataKitchen: any = {\r\n        name: bill_detail.name,\r\n        quantity: +bill_detail.quantity,\r\n        note: bill_detail.note,\r\n        ptype: bill_detail.ptype,\r\n        ratio: bill_detail.ratio,\r\n        units: bill_detail.units,\r\n      }\r\n      if (bill_detail.properties) dataKitchen['properties'] = bill_detail.properties\r\n      if (bill_detail.toppings) dataKitchen['toppings'] = bill_detail.toppings\r\n      if (bill_detail.combos) dataKitchen['combos'] = bill_detail.combos\r\n      this.printKitchen['value'].push(dataKitchen)\r\n      this.printKitchen = { ...this.printKitchen, title: 'Add dishes', status: true }\r\n    }\r\n    // nếu chọn là điều phối bằng giao diện\r\n    if (this.dispatchers_enable) {\r\n      // show modal chọn giao diện để điều phối\r\n      this.show_modal_dispatcher = true;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  changeLot(e, item) {\r\n    item.lot_number = item.lots.find(find => find._id == e).lot_number\r\n  }\r\n\r\n\r\n\r\n  /**xử lý điều phối */\r\n  handleDispatcher() {\r\n    this.choiceFood.id_dispatcherzone = this.id_dispatcherzone\r\n    this.choiceFood.dispatcher_done = false\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_dispatcherzone: this.id_dispatcherzone, dispatcher_done: false })\r\n    this.show_modal_dispatcher = false\r\n  }\r\n\r\n\r\n\r\n  openPrintKitchen(detail, i) {\r\n    // Bật in bếp\r\n    if (this.checkPrinterKitchen.enable) {\r\n      if(detail.ptype == VhType.SERVICETIME && !detail.is_paused) {\r\n        this.productService.updateServiceTimePrice(detail, this.invoices.getPriceType());\r\n        this.invoices.getInvoiceDetail()[i] = detail;\r\n        this.invoices.setSubTotal();\r\n      }\r\n      let dataKitchen: any = {\r\n        name: detail.name,\r\n        quantity: +detail.quantity,\r\n        note: detail.note,\r\n        max_quantity: +detail.quantity,\r\n        ptype: detail.ptype,\r\n        ratio: detail.ratio,\r\n        units: detail.units,\r\n      }\r\n      if (detail.properties) dataKitchen['properties'] = detail.properties\r\n      if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity } })\r\n      if (detail.combos) dataKitchen['combos'] = detail.combos\r\n      this.printKitchen['value'].push(dataKitchen)\r\n      this.printKitchen = { ...this.printKitchen, title:  this.lang.translate('Print kitchen') }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**In bếp */\r\n  public handlePrint(value) {\r\n    if (this.platform.is(\"electron\")) this.printElectron(value)\r\n    else this.printDesktop(value)\r\n  }\r\n\r\n\r\n\r\n  handleCancelPrint(value?) {\r\n    this.printKitchen['value'] = []\r\n    if (value) this.showPrintKitchenAgain = false\r\n    else this.printKitchen['status'] = false;\r\n  }\r\n\r\n\r\n\r\n  printElectron(value) {\r\n    let html = value ? document.getElementById(\"print-kitchen-again\").innerHTML : document.getElementById(\"print-kitchen\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.printer_kitchens.find(e => e._id == this.id_printer_kitchen).printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (data) this.handleCancelPrint(value)\r\n      else this.vhComponent.alertMessageDesktop('warning', this.lang.translate('Printing failed'), 3000)\r\n    });\r\n  }\r\n\r\n\r\n  \r\n  /**In bằng desktop */\r\n  printDesktop(value) {\r\n    PrintJs({\r\n      printable: value ? \"print-kitchen-again\" : \"print-kitchen\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      style:\r\n        'html { font-size: 14pt;}' +\r\n        '.print-kitchen .font-bold {font-size:1.8rem; font-weight:bold}' +\r\n        '.print-kitchen b {font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-font{font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-value-name { width : 70% ; font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value-quantity { width : 30% ; font-size: 14pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-value-name-note {font-style: italic; font-size: 10pt}' +\r\n        '.print-kitchen .print-kitchen-combo { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-combo-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-properties-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties-quantity { width : 30% ; font-size: 12pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-topping { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-topping-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-topping-quantity { width : 30% ; font-size: 12pt ; text-align:center}'\r\n    })\r\n  }\r\n\r\n\r\n\r\n  changeQuantityPrintKitchen(value, max, current_value) {\r\n    if (parseFloat(value) < 0.01) current_value.quantity = 0.01;\r\n    if (parseFloat(value) > max) current_value.quantity = max;\r\n  }\r\n\r\n\r\n\r\n  /**Cập nhật ghi chú món\r\n   * @param item: thông tin bill detail cần cập nhật\r\n  */\r\n  updateNote(item) {\r\n    this.vhQueryCafe.updateBill_Detail(item._id, { note: item.note })\r\n  }\r\n\r\n\r\n\r\n  /**Cập nhật thông tin món ăn */\r\n  saveEdit() {\r\n    if(this.choiceFood.ptype === VhType.SERVICETIME) {\r\n      if (!this.choiceFood.is_paused) {\r\n        this.choiceFood.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n      this.choiceFood.price = serviceTimePrice.total_price;\r\n      this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n      delete this.choiceFood.serviceTimePrice;\r\n    }\r\n    this.choiceFood.price = parseFloat(this.choiceFood.price)\r\n    this.showDrawerEdit = false;\r\n    let index: number = this.invoices.getInvoiceDetail().findIndex(item => item._id == this.choiceFood._id);\r\n\r\n    this.invoices.getInvoiceDetail()[index] = { ...this.choiceFood }\r\n    this.invoices.setSubTotal()\r\n    // console.log(this.invoices.getCreateItemCleanDetail(this.choiceFood));\r\n    if (this.choiceFood.ptype == 5) {\r\n      this.vhQueryCafe.updateBill_Detail_btype_5(this.choiceFood._id, { quantity: this.choiceFood.quantity, price: this.choiceFood.price, ratio: this.choiceFood.ratio })\r\n        .then((bool) => {\r\n          console.log('updateBill_Detail_btype_5', bool);\r\n        }, error => {\r\n          console.log('error', error);\r\n        })\r\n    }\r\n    else {\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { quantity: this.choiceFood.quantity, price: this.choiceFood.price, ratio: this.choiceFood.ratio }).then((res) => {\r\n        this.updateInvoice.emit(true)\r\n\r\n        delete this.choiceFood\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  editPrice: any = {}\r\n  choiceFood: any;\r\n  /** Chỉnh sửa sản phẩm\r\n   * @param item thông tin sản phẩm đang được xử lý\r\n   */\r\n  editFood(item: any) {\r\n    this.choiceFood = item\r\n    this.showDrawerEdit = true;\r\n    \r\n    // Nếu không phải Dịch vụ thời gian\r\n    if(this.choiceFood.ptype !== VhType.SERVICETIME) {\r\n      // backup\r\n      // cleavejs cho các input\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + item.id_product] = this.vhAlgorithm.vhnumeral(\".price-\" + item.id_product)\r\n        // if (this.choiceFood.toppings) {\r\n        //   this.choiceFood.toppings.forEach(topping => {\r\n        //     this.editPrice['topping-' + topping.id_product] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping.id_product)\r\n        //   });\r\n        // }\r\n      }, 200)\r\n      return;\r\n    }\r\n\r\n    // Nếu là Dịch vụ thời gian\r\n    this.productService.updateServiceTimePrice(this.choiceFood, this.invoices.getPriceType());\r\n    if(!this.choiceFood.is_paused) {\r\n      this.invoices.setSubTotal();\r\n    }\r\n\r\n    console.log('editFood this.choiceFood', this.choiceFood);\r\n  }\r\n\r\n\r\n\r\n  /**Thêm cleavejs chỉnh sửa giá sản phẩm\r\n   * @param item thông tin sản phẩm đang xử lý\r\n  */\r\n  updatePrice(item) {\r\n    if (item.ptype) {\r\n      let price = this.editPrice['price-' + item.id_product].getRawValue()\r\n      console.log(this.choiceFood.quantity);\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity = this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1\r\n    } else {\r\n      let price = this.editPrice['topping-' + item.id_product].getRawValue()\r\n      let index = this.choiceFood.toppings.findIndex(element => element.id_product == item.id_product)\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity = this.choiceFood.toppings[index].quantity > 0 ? this.choiceFood.toppings[index].quantity : 1\r\n      }\r\n    }\r\n    console.log(this.choiceFood);\r\n  }\r\n\r\n\r\n\r\n  /**Xóa món ăn\r\n   * @param food: thông tin sản phẩm đang xử lý\r\n  */\r\n  removeFood(food: any) {\r\n    if (this.vhAuth.checkLocalMyPermissionName('sell_enable_cancel_bill_detail')) {\r\n      food.deleting = true;\r\n      // thêm hủy món vô in bếp\r\n      if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n        let dataKitchen: any = { name: food.name, quantity: food.quantity, note: food.note }\r\n        if (food.properties) dataKitchen['properties'] = food.properties\r\n        if (food.toppings) dataKitchen['toppings'] = food.toppings\r\n        if (food.combos) dataKitchen['combos'] = food.subComboName\r\n        this.printKitchen['value'].push(dataKitchen)\r\n        this.printKitchen = { ...this.printKitchen, title: 'Cancel dishes', status: true }\r\n      }\r\n      if (food.ptype == 5) {\r\n        this.vhQueryCafe.deleteBill_Detail_ptype_5(food._id).then(value => {\r\n          this.invoices.removeInvoiceDetail(food._id)\r\n          this.updateInvoice.emit(true)\r\n          console.log('deleteBill_Detail_ptype_5', value);\r\n        })\r\n      }\r\n      else {\r\n        this.vhQueryCafe.deleteBill_Detail(food._id).then(value => {\r\n          this.invoices.removeInvoiceDetail(food._id)\r\n          this.updateInvoice.emit(true)\r\n\r\n        })\r\n      }\r\n    }\r\n    else this.vhComponent.showToast(3000, this.lang.translate(\"You do not have this rights\"), \"alert-toast\")\r\n  }\r\n\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity}x ${item.name}${'(' + this.getUnit(item.units, item.ratio) + ')'}`\r\n      else subName += `${item.quantity}x ${item.name}${'(' + this.getUnit(item.units, item.ratio) + ')'}`\r\n    })\r\n    return subName\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  searchLot(value) {\r\n    this.choiceFood.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.choiceFood = data\r\n    this.list_search_lot = this.choiceFood.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.choiceFood.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.lang.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.choiceFood.lots = this.list_search_lot;\r\n            this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n          },\r\n          nzOnCancel: () => {\r\n          }\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.choiceFood.lots = this.list_search_lot;\r\n        this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.choiceFood.lots = this.list_search_lot;\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.choiceFood.lots = this.list_search_lot\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------- MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------- */\r\n  \r\n  public VhType = VhType;\r\n\r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  isShowModalEditUsedTime: boolean = false;\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  tempStartTime: any;\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  tempEndTime: any;\r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  endTime: Date = new Date();\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.choiceFood.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.choiceFood.is_paused) {\r\n      this.tempEndTime = this.choiceFood.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.choiceFood.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.choiceFood.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.choiceFood.is_paused = true;\r\n    }\r\n\r\n    this.choiceFood.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_start_order: this.tempStartTime,\r\n      time_end_order: this.tempEndTime ? this.choiceFood.time_end_order : null,\r\n      is_paused: this.choiceFood.is_paused,\r\n    });\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.choiceFood.time_end_order = new Date();\r\n    this.choiceFood.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_end_order: isPause ? this.choiceFood.time_end_order : undefined, \r\n      is_paused: isPause ,\r\n      price: this.choiceFood.price,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"layout\" [ngClass]=\"{'layout-1': wishList}\">\r\n  <div class=\"bill-detail\">\r\n    <div class=\"btn-list\">\r\n      <button [nzLoading]=\"statusInvoice.updating\" nz-button nzType=\"default\" (click)=\"goBack.emit(true)\">\r\n        <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n      </button>\r\n      <button nz-button nzType=\"default\" (click)=\"openSearchService()\">\r\n        <i nz-icon nzType=\"file-search\" nzTheme=\"outline\"></i>\r\n        {{'Service' | translate}} (F3)\r\n      </button>\r\n      <button nz-button nzType=\"default\" (click)=\"openSearchProduct()\">\r\n        <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n        {{'Dishes/beverage' | translate}} (F4)</button>\r\n      <button nz-button nzType=\"default\" (click)=\"openSearchSideDishes()\">\r\n        <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n        {{'Side dishes' | translate}} (F5)</button>\r\n      <button nz-button nzType=\"default\" (click)=\"openSearchCombos()\">\r\n        <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n        {{'Combos' | translate}} (F6)</button>\r\n      <button *ngIf=\"management_product_price2\" nz-button nzType=\"default\"\r\n        (click)=\"showModalChangePriceType.emit(true)\">{{'Chọn giá bán' |\r\n        translate}}</button>\r\n      <button style=\"background: #00a859; color: white;\" nz-button (click)=\"checkPromotion.emit(true)\"><i nz-icon\r\n          nzType=\"gift\" nzTheme=\"outline\"></i>\r\n        {{'Promotions' | translate}}</button>\r\n    </div>\r\n    <div class=\"bill-detail-area ant-table-body\">\r\n      <div *ngIf=\"!invoices.getInvoiceDetail().length\" class=\"no-data\">\r\n        <p>{{'Please select a dishes/beverage' | translate}}</p>\r\n      </div>\r\n      <div class=\"bill-detail-area-item\"\r\n        *ngFor=\"let item of invoices.getInvoiceDetail(),index as i; trackBy:myTrackByFunction\">\r\n\r\n        <!-- CÓ Chương trình khuyến mãi -->\r\n        <ng-container *ngIf=\"item.id_promotion; else elseTemplate\">\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"1\" class=\"center-col\">\r\n              <button nzType=\"text\" nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                [nzLoading]=\"item.deleting\" (nzOnConfirm)=\"deletePromotion.emit(true)\"\r\n                nzPopconfirmPlacement=\"bottomLeft\" nz-button>\r\n                <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"cursor: pointer;\"></i>\r\n              </button>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"23\">\r\n              <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}\r\n                <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\" *ngIf=\"item.pmtype == 6\"\r\n                  (click)=\"showProductGift.emit(true)\"></i>\r\n                <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\" *ngIf=\"item.pmtype == 7\"\r\n                  (click)=\"showProductGiftType7.emit(true)\"></i>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <ng-container *ngIf=\"item.pmtype != 6\">\r\n            <div *ngFor=\"let data of item.products\">\r\n              <div class=\"bill-detail-area-item-info\">\r\n                <div class=\"delete-btn\">\r\n                </div>\r\n                <div class=\"item-name\">{{data.name}}\r\n                  <i *ngIf=\"checkPrinterKitchen.enable\" (click)=\"showPrintKitchenAgain = true;openPrintKitchen(data)\"\r\n                    style=\"color: var(--ion-color-vh-green);margin-right: 8px;cursor: pointer;\" nz-icon nzType=\"printer\"\r\n                    nzTheme=\"outline\" nz-tooltip nzTooltipTitle=\"{{'Print kitchen' | translate}}\"\r\n                    nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"></i>\r\n                  <i *ngIf=\"stamp\" (click)=\"printLabel(data,i)\" nz-icon nzType=\"printer\" nzTheme=\"outline\"\r\n                    style=\"cursor: pointer;\" nz-tooltip nzTooltipTitle=\"{{'Label printing' | translate}}\"\r\n                    nzTooltipPlacement=\"bottom\"></i>\r\n                  <ng-container *ngIf=\"data.id_lotproduct\">\r\n                    <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\" (click)=\"openModalChooseLot(data)\">\r\n                      {{getLotNumber(data.lots,\r\n                      data.id_lotproduct)}}</div>\r\n                  </ng-container>\r\n                </div>\r\n                <div class=\"item-quantity\">x{{data.quantity | number:'1.0-2'}}</div>\r\n                <div class=\"item-price\">\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n\r\n                  <!-- Giá khuyến mãi -->\r\n                  <s *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\">\r\n                    {{vhAlgorithm.vhcurrencyunit(data.price_origin)}}\r\n                  </s>\r\n                </div>\r\n                <div class=\"item-total\">\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price * data.quantity)}}\r\n                </div>\r\n                <div class=\"edit-btn\">\r\n                </div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-combo\">\r\n                <div *ngIf=\"data.combos\">\r\n                  <span *ngFor=\"let combo of data.combos;index as i\"\r\n                    style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                    {{ i == data.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                    ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                    + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-side-dishes\"\r\n                *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n                  <div class=\"delete-btn\"></div>\r\n                  <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n                  <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n                  <div class=\"item-price\">\r\n                    <!-- {{vhAlgorithm.vhcurrencyunit(sideDishes.price)}} -->\r\n  \r\n                    <!-- Giá khuyến mãi -->\r\n                    <!-- <s *ngIf=\"sideDishes.price < sideDishes.price_origin\">\r\n                                          {{vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)}}\r\n                                      </s> -->\r\n                  </div>\r\n                  <!-- <div class=\"item-total\">\r\n                                      {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                                  </div> -->\r\n                  <div class=\"edit-btn\"></div>\r\n                </ng-container>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-properties\"\r\n                *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                <div class=\"delete-btn\"></div>\r\n                <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n                <div class=\"edit-btn\"></div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n                <span>{{data.note}}</span>\r\n                <!-- <input nz-input [(ngModel)]=\"data.note\" placeholder=\"{{'Note' | translate}}\" nzBorderless\r\n                  (blur)=\"updateNote(item)\" /> -->\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n          <div nz-row *ngFor=\"let data of item.products_gift\">\r\n            <ng-container *ngIf=\"data.choose\">\r\n              <div class=\"bill-detail-area-item-info\">\r\n                <div class=\"delete-btn\">\r\n                </div>\r\n                <div class=\"item-name\">{{data.name}} (Quà tặng)\r\n                  <i *ngIf=\"checkPrinterKitchen.enable\" (click)=\"showPrintKitchenAgain = true;openPrintKitchen(data)\"\r\n                    style=\"color: var(--ion-color-vh-green);margin-right: 8px;cursor: pointer;\" nz-icon nzType=\"printer\"\r\n                    nzTheme=\"outline\" nz-tooltip nzTooltipTitle=\"{{'Print kitchen' | translate}}\"\r\n                    nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"></i>\r\n                  <i *ngIf=\"stamp\" (click)=\"printLabel(data,i)\" nz-icon nzType=\"printer\" nzTheme=\"outline\"\r\n                    style=\"cursor: pointer;\" nz-tooltip nzTooltipTitle=\"{{'Label printing' | translate}}\"\r\n                    nzTooltipPlacement=\"bottom\"></i>\r\n                  <ng-container *ngIf=\"data.id_lotproduct\">\r\n                    <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\" (click)=\"openModalChooseLot(data)\">\r\n                      {{getLotNumber(data.lots,\r\n                      data.id_lotproduct)}}</div>\r\n                  </ng-container>\r\n                </div>\r\n                <div class=\"item-quantity\">x{{data.quantity | number:'1.0-2'}}</div>\r\n                <div class=\"item-price\">\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                  <s *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\">\r\n                    {{vhAlgorithm.vhcurrencyunit(data.price_origin)}}\r\n                  </s>\r\n                </div>\r\n                <div class=\"item-total\">\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price * data.quantity)}}\r\n                </div>\r\n                <div class=\"edit-btn\">\r\n                </div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-combo\">\r\n                <div *ngIf=\"data.combos\">\r\n                  <span class=\"sub-name\" *ngFor=\"let combo of data.combos\">\r\n                    {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                    <ng-container *ngIf=\"combo.lots && combo.id_lotproduct\">\r\n                      <b style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots,\r\n                        combo.id_lotproduct)}}</b>\r\n                    </ng-container>,\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-side-dishes\"\r\n                *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n                  <div class=\"delete-btn\"></div>\r\n                  <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n                  <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n                  <div class=\"item-price\">\r\n                  </div>\r\n                  <div class=\"edit-btn\"></div>\r\n                </ng-container>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-properties\"\r\n                *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                <div class=\"delete-btn\"></div>\r\n                <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n                <div class=\"edit-btn\"></div>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n                <span>{{data.note}}</span>\r\n                <!-- <input nz-input [(ngModel)]=\"data.note\" placeholder=\"{{'Note' | translate}}\" nzBorderless\r\n                  (blur)=\"updateNote(item)\" /> -->\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <!-- KHÔNG CÓ Chương trình khuyến mãi -->\r\n        <ng-template #elseTemplate>\r\n          <div class=\"bill-detail-area-item-info\">\r\n            <!-- Nút xoá -->\r\n            <div class=\"delete-btn\">\r\n              <button nz-button nzType=\"text\" [nzLoading]=\"!item._id || item.deleting\" nz-popconfirm\r\n                nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"removeFood(item)\"\r\n                nzPopconfirmPlacement=\"right\">\r\n                <i nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n              </button>\r\n            </div>\r\n\r\n            <!-- Tên -->\r\n            <div class=\"item-name\">\r\n              {{item.name}} <ng-container *ngIf=\"item.ptype == 3\">\r\n                ({{getUnit(item.units,item.ratio)}})\r\n              </ng-container>\r\n              <i *ngIf=\"checkPrinterKitchen.enable\" (click)=\"showPrintKitchenAgain = true; openPrintKitchen(item, i)\"\r\n                style=\"color: var(--ion-color-vh-green);margin-right: 8px;cursor: pointer;\" nz-icon nzType=\"printer\"\r\n                nzTheme=\"outline\" nz-tooltip nzTooltipTitle=\"{{'Print kitchen' | translate}}\"\r\n                nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"></i>\r\n              <i *ngIf=\"stamp\" (click)=\"printLabel(item,i)\" nz-icon nzType=\"printer\" nzTheme=\"outline\"\r\n                style=\"cursor: pointer;\" nz-tooltip nzTooltipTitle=\"{{'Label printing' | translate}}\"\r\n                nzTooltipPlacement=\"bottom\"></i>\r\n              <ng-container *ngIf=\"item.id_lotproduct\">\r\n                <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\" (click)=\"openModalChooseLot(item)\">\r\n                  {{getLotNumber(item.lots,\r\n                  item.id_lotproduct)}}</div>\r\n              </ng-container>\r\n            </div>\r\n\r\n            <!-- Số lượng -->\r\n            <div class=\"item-quantity\">\r\n              <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n              <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                x{{item.quantity | number:'1.0-2'}}\r\n              </ng-container>\r\n            </div>\r\n            \r\n            <div class=\"item-price\">\r\n              <!-- Dịch vụ thời gian không hiện giá -->\r\n              <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                <!-- Giá -->\r\n                {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                <!-- Giá khuyến mãi -->\r\n                <s *ngIf=\"item.price < item.price_origin && display_promotion_selling_price\">\r\n                  {{vhAlgorithm.vhcurrencyunit(item.price_origin)}}\r\n                </s>\r\n              </ng-container>\r\n            </div>\r\n\r\n            <!-- Thành tiền -->\r\n            <div class=\"item-total\">\r\n              {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n            </div>\r\n\r\n            <!-- Nút sửa -->\r\n            <div class=\"edit-btn\">\r\n              <button nz-button nzType=\"text\" (click)=\"editFood(item)\">\r\n                <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"bill-detail-area-item-combo\">\r\n            <div *ngIf=\"item.combos\">\r\n              <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                <ng-container *ngIf=\"combo.lots && combo.id_lotproduct\">\r\n                  <b style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots,\r\n                    combo.id_lotproduct)}}</b>\r\n                </ng-container>,\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Topping -->\r\n          <div class=\"bill-detail-area-item-side-dishes\"\r\n            *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n            <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n              <div class=\"delete-btn\"></div>\r\n              <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n              <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n              <div class=\"item-price\">\r\n                {{vhAlgorithm.vhcurrencyunit(sideDishes.price)}}\r\n                <!-- Giá khuyến mãi -->\r\n                <s *ngIf=\"sideDishes.price < sideDishes.price_origin\">{{vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)}}</s>\r\n              </div>\r\n              <div class=\"item-total\">{{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}</div>\r\n              <div class=\"edit-btn\"></div>\r\n            </ng-container>\r\n          </div>\r\n\r\n          <!-- Thuộc tính -->\r\n          <div class=\"bill-detail-area-item-properties\"\r\n            *ngFor=\"let properties of item.properties ? item.properties : []; trackBy:myTrackByNameFunction\">\r\n            <div class=\"delete-btn\"></div>\r\n            <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n            <div class=\"edit-btn\"></div>\r\n          </div>\r\n\r\n          <!-- Hàng thời gian -->\r\n          <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n            <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            <p *ngIf=\"item.time_end_order\"\r\n              [ngStyle]=\"{'color': item.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n              {{'Estimated until' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n            </p>\r\n            <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n              <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n            </ng-container>\r\n          </div>\r\n\r\n          <!-- Ghi chú -->\r\n          <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n            <input nz-input [(ngModel)]=\"item.note\" placeholder=\"{{'Note' | translate}}\" nzBorderless\r\n              (blur)=\"updateNote(item)\" />\r\n          </div>\r\n        </ng-template>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <app-product-wishlist1 *ngIf=\"wishList\" style=\"padding-top: 8px\" [default_price_type]=\"default_price_type\"\r\n    (productChoice)=\"createBillDetail($event)\"></app-product-wishlist1>\r\n</div>\r\n\r\n\r\n<app-print-one-col style=\"display: none;\" [totalNumber]=\"list_selected_dishs ? list_selected_dishs.length : invoices.getInvoiceDetail().length\"\r\n  [list_dishs]=\"list_selected_dishs\" [stamp]=\"stamp\" [tableInfo]=\"tableInfo\"></app-print-one-col>\r\n\r\n<!-- --------------------open product search---------------------- -->\r\n<app-search-product *ngIf=\"showDrawerProductList\" [showDrawerProductList]=\"showDrawerProductList\"\r\n  (closeSearchProductList)=\"closeSearchProduct($event)\" [default_price_type]=\"default_price_type\">\r\n</app-search-product>\r\n<!-- --------------------open service search---------------------- -->\r\n<app-search-service *ngIf=\"showDrawerServiceList\" [showDrawerServiceList]=\"showDrawerServiceList\"\r\n  (closeSearchServiceList)=\"closeSearchService($event)\" [default_price_type]=\"default_price_type\">\r\n</app-search-service>\r\n<!-- --------------------open side dishes search---------------------- -->\r\n<app-search-topping *ngIf=\"showDrawerSideDishesList\" [showDrawerSideDishesList]=\"showDrawerSideDishesList\"\r\n  (closeSearchSideDishesList)=\"closeSearchSideDishes($event)\" [default_price_type]=\"default_price_type\">\r\n</app-search-topping>\r\n<!-- --------------------open combo search---------------------- -->\r\n<app-search-combo *ngIf=\"showDrawerCombosList\" [showDrawerCombosList]=\"showDrawerCombosList\"\r\n  (closeSearchCombosList)=\"closeSearchCombos($event)\">\r\n</app-search-combo>\r\n<!-- chọn khu vực điều phối  -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterDispatcher\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"show_modal_dispatcher\" nzTitle=\"{{'Dish dispatch' | translate}}\" [nzCloseIcon]=\"null\"\r\n  (nzOnOk)=\"handleDispatcher()\" [nzMaskClosable]=\"false\">\r\n  <ng-container *nzModalContent>\r\n    <div>Chọn khu vực điều phối bếp/quầy pha chế</div>\r\n    <nz-select [(ngModel)]=\"id_dispatcherzone\">\r\n      <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of dispatcherzones\"></nz-option>\r\n    </nz-select>\r\n  </ng-container>\r\n  <ng-template #modalFooterDispatcher>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleDispatcher()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n<!-- ---------------------print chicken------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\" *ngIf=\"printKitchen.status\"\r\n  [(nzVisible)]=\"printKitchen.status\" nzTitle=\"{{'Print kitchen' | translate}}\" (nzOnCancel)=\"handleCancelPrint()\"\r\n  (nzOnOk)=\"handlePrint(false)\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}\r\n      </div>\r\n      <div *ngIf=\"!checkPrinterKitchen.table_name_hidden\">\r\n        <span\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}: </span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(false)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!-- ---------------------print chicken lại------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"showPrintKitchenAgain\" nzTitle=\"{{'Print kitchen' | translate}}\"\r\n  (nzOnCancel)=\"showPrintKitchenAgain = false;handleCancelPrint()\" (nzOnOk)=\"handlePrint(true)\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen-again\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}\r\n      </div>\r\n      <div *ngIf=\"!checkPrinterKitchen.table_name_hidden\">\r\n        <span\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}: </span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{ getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(true)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------------- MODAL CHỈNH SỬA MÓN ĂN ------------------------------------------------------ -->\r\n<nz-modal\r\n  *ngIf=\"choiceFood\"\r\n  (nzOnCancel)=\"saveEdit()\"\r\n  [(nzVisible)]=\"showDrawerEdit\"\r\n  [nzTitle]=\"choiceFood.name\"\r\n  [nzFooter]=\"null\"\r\n  nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body modal-edit\" style=\"max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <!-- Không phải Dịch vụ thời gian -->\r\n      <ng-container *ngIf=\"choiceFood.ptype !== VhType.SERVICETIME else serviceTimeTemplate\">\r\n        <div nz-row style=\"width: 100%; align-items: center;\">\r\n          <!-- Giá -->\r\n          <div nz-col nzSpan=\"7\">\r\n            <input [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\"\r\n              (blur)=\"updatePrice(choiceFood)\"\r\n              [ngClass]=\"'price-' + choiceFood.id_product\" maxlength=\"15\"\r\n              nz-input [placeholder]=\"'Price' | translate\" />\r\n          </div>\r\n          <!-- Input số lượng -->\r\n          <div class=\"price-edit\" style=\"display: flex; justify-content: space-between; align-items: stretch; gap: 6px; padding: 0 20px;\" nz-col nzSpan=\"10\">\r\n            <!-- Giảm -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity <= 1\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity - 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 1}\">\r\n              <i nz-icon nzType=\"minus\"></i>\r\n            </button>\r\n            <!-- Ô nhập -->\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n              [(ngModel)]=\"choiceFood.quantity\"\r\n              (ngModelChange)=\"updatePrice(choiceFood)\"\r\n              style=\"flex: 1;\">\r\n            </nz-input-number>\r\n            <!-- Tăng -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity > 9999999998\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity + 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n              <i nz-icon nzType=\"plus\"></i>\r\n            </button>\r\n          </div>\r\n          <!-- Thành tiền -->\r\n          <div style=\"text-align: right\" nz-col nzSpan=\"7\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <!-- Combo -->\r\n          <div *ngIf=\"choiceFood.combos\" nz-col nzSpan=\"24\" style=\"font-size: 0.7rem; margin-top: 8px;\">\r\n            {{getSubCombo(choiceFood.combos)}}\r\n          </div>\r\n          <!-- Ghi chú -->\r\n          <div class=\"order-div-note1\" nz-col nzSpan=\"24\" style=\"margin-top: 8px;\">\r\n            <input class=\"order-note\" nzBorderless nz-input\r\n              [(ngModel)]=\"choiceFood.note\"\r\n              [ngModelOptions]=\"{standalone: true}\"\r\n              [placeholder]=\"'Enter note' | translate\" />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thuoc tinh -->\r\n        <div *ngIf=\"choiceFood.properties\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.properties.length\">\r\n            {{'Properties' | translate}}\r\n          </div>\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n            <nz-collapse nzGhost>\r\n              <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n                [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n                <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                  <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n                </nz-radio-group>\r\n              </nz-collapse-panel>\r\n            </nz-collapse>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Mon phu -->\r\n        <div *ngIf=\"choiceFood.toppings\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.toppings.length\">\r\n            {{'Side dishes' | translate}}\r\n          </div>\r\n          <div nz-row class=\"option-modal\">\r\n            <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n              <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                  {{item.name |translate}} <br>\r\n                </div>\r\n                <div class=\"text-align-center price-edit\" style=\"display: flex;justify-content: space-evenly;align-items: end;\" nz-col nzSpan=\"10\">\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                    (click)=\"item.quantity = item.quantity - 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 0}\">\r\n                    <i nz-icon nzType=\"minus\"></i>\r\n                  </button>\r\n                  <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0\" [nzStep]=\"1\"\r\n                    (ngModelChange)=\"updatePrice(choiceFood)\" [(ngModel)]=\"item.quantity\">\r\n                  </nz-input-number>\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                    (click)=\"item.quantity = item.quantity + 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                    <i nz-icon nzType=\"plus\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"align-end text-align-right\" nz-col nzSpan=\"7\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Combo -->\r\n        <ng-container *ngFor=\"let combo of choiceFood.combos\">\r\n          <!-- chọn lô - hsd -->\r\n          <div *ngIf=\"combo.lots\">\r\n            <b>{{'Select lot and expiry date for combo components' | translate}}</b><br>\r\n            <span>{{combo.name}} ({{getUnit(combo.units, combo.ratio)}})</span>\r\n            <nz-radio-group [(ngModel)]=\"combo.id_lotproduct\" (ngModelChange)=\"changeLot($event, combo)\"\r\n              style=\"width:100%; padding: 8px 0;\">\r\n              <div nz-row *ngFor=\"let lot of combo.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                  <label class=\"radio-purchase\" nz-radio [nzValue]=\"lot._id\" style=\"width:100%;\">\r\n                    <div nz-row>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        {{lot.lot_number}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        NSX: {{lot.date_mfg | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        HSD: {{lot.date_exp | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                        {{'Stock' | translate}}:\r\n                        <span style=\" color: var(--ion-color-vh-orange)\">{{lot.quantity_branch[id_branch]/combo.ratio | number : '1.0-2'}}</span>\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </nz-radio-group>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <!-- Dịch vụ thời gian -->\r\n      <ng-template #serviceTimeTemplate>\r\n        <!-- Tiêu đề -->\r\n        <div class=\"flex-between\" style=\"margin-bottom: 8px; font-size: 0.95rem;\">\r\n          <b>{{'Used time' | translate}}</b>\r\n          <b>{{'Drafted' | translate}}</b>\r\n        </div>\r\n\r\n        <div>\r\n          <!-- First time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_first_time\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'First time block' | translate}} - {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'first' | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{choiceFood?.serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.first_time?.price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Special time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_special_times && choiceFood?.serviceTimePrice?.special_times?.length\" style=\"margin-bottom: 1rem;\">\r\n            <span>{{'Special time' | translate}}</span>\r\n            <div *ngFor=\"let specialTime of choiceFood?.serviceTimePrice?.special_times\" class=\"flex-between\">\r\n              <p style=\"margin-bottom: 0\">{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, choiceFood.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n              <p style=\"margin-bottom: 0\">{{vhAlgorithm.vhcurrencyunit(specialTime.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Merge block -->\r\n          <div *ngIf=\"choiceFood.units[0].is_merge_block\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.merge_block?.price)}} / 1 block</span>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood?.serviceTimePrice?.merge_block?.count}} block = {{choiceFood?.serviceTimePrice?.merge_block?.duration}} {{choiceFood.units[0].unit | translate}} (1 block = {{choiceFood?.serviceTimePrice?.merge_block?.time_per_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.merge_block?.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Normal time -->\r\n          <div *ngIf=\"choiceFood?.serviceTimePrice?.time_used\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Regular selling time' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood.units[0].price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{productService.generateTimeFromValue(choiceFood?.serviceTimePrice?.time_used, choiceFood?.serviceTimePrice?.unit)}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.price)}}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thành tiền -->\r\n        <div class=\"flex-between\">\r\n          <p>{{'From' | translate}} <b>{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> {{'to' | translate}} <b>{{choiceFood?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> <br> <b>({{productService.generateTimeUseString(choiceFood.time_start_order, choiceFood?.time_end_order)}})</b></p>\r\n          <b style=\"font-size: 1rem;\">{{'Total' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.total_price)}}</b>\r\n        </div>\r\n\r\n        <div class=\"flex-between\" style=\"margin: 16px 0;\">\r\n          <!-- Tạm ngưng / Tiếp tục tính giờ -->\r\n          <i (click)=\"pauseTime(!choiceFood?.is_paused)\" style=\"text-align: right; color: var(--ion-color-vh-orange); cursor: pointer;\">{{(choiceFood?.is_paused ? 'Continue timing' : 'Pause timing') | translate}}</i>\r\n          <hr style=\"background-color: #f0f0f0; flex: auto;\">\r\n          <!-- Chỉnh sửa thời gian sử dụng -->\r\n          <i (click)=\"handleOpenEditUsedTime()\" style=\"text-align: right; color: var(--ion-color-vh-green); cursor: pointer;\">{{'Edit usage time'| translate}}</i>\r\n        </div>\r\n\r\n        <!-- Ghi chú -->\r\n        <div class=\"order-div-note1\" nz-col nzSpan=\"24\">\r\n          <b>{{'Note' | translate}}</b>\r\n          <input class=\"order-note\" nz-input\r\n            [(ngModel)]=\"choiceFood.note\"\r\n            [placeholder]=\"'Enter note' | translate\" />\r\n        </div>\r\n      </ng-template>\r\n\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n<nz-modal\r\n  [(nzVisible)]=\"isShowModalEditUsedTime\"\r\n  (nzOnCancel)=\"isShowModalEditUsedTime = false\"\r\n  (nzOnOk)=\"handleUpdateUsedTime()\"\r\n  [nzTitle]=\"'Edit used time' | translate\"\r\n  [nzFooter]=\"modalFooterEditUsedTime\" >\r\n\r\n  <ng-container *nzModalContent>\r\n    <div nz-row [nzGutter]=\"16\">\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'_Started at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          [nzAllowClear]=\"false\"\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'Ended at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          nzAllowClear\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 32px\">\r\n      <p style=\"margin-bottom: 4px\"><b>*{{'_Note' | translate}}:</b></p>\r\n      <p style=\"margin-bottom: 0px\">{{'The start time must be less than or equal to the current time.' | translate}}</p>\r\n      <p style=\"margin-bottom: 0px\">{{'The end time must be greater than the start time.' | translate}}</p>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterEditUsedTime>\r\n    <button (click)=\"isShowModalEditUsedTime = false\"\r\n      nz-button class=\"nz-hover-border\" nzType=\"default\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\">{{'Cancel' |translate}}</button>\r\n    <button [disabled]=\"!tempStartTime\"\r\n      (click)=\"handleUpdateUsedTime()\"\r\n      nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\">{{'Ok' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n  nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n          (keyup)=\"searchLot(searchValue.value )\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" style=\"width:100%;padding: 8px 0;\">\r\n      <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.lot_number}}\r\n              </div>\r\n\r\n              <div nz-col nzSpan=\"6\">\r\n                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                {{'Stock' | translate}}:\r\n                <span style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                  | number : '1.0-2'}}</span>\r\n              </div>\r\n            </div>\r\n\r\n          </label>\r\n        </div>\r\n\r\n      </div>\r\n    </nz-radio-group>\r\n    <div *ngIf=\"!choiceFood.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice2>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!choiceFood.id_lotproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BillDetail1Component } from './bill-detail1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SearchProductModule } from '../search-product/search-product.module';\r\nimport { SearchServiceModule } from '../search-service/search-service.module';\r\nimport { SearchToppingModule } from '../search-topping/search-topping.module';\r\nimport { SearchComboModule } from '../search-combo/search-combo.module';\r\nimport { ProductWishlist1Module } from '../product-wishlist1/product-wishlist1.module';\r\nimport { PrintOneColComponent } from './print-one-col/print-one-col.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BillDetail1Component,PrintOneColComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ProductWishlist1Module,\r\n    SearchProductModule,\r\n    SearchServiceModule,\r\n    SearchToppingModule,\r\n    SearchComboModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    BillDetail1Component\r\n  ]\r\n})\r\nexport class BillDetail1Module { }\r\n","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef, Input, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\ndeclare var electron: any;\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'app-print-one-col',\r\n  templateUrl: './print-one-col.component.html',\r\n  styleUrls: ['./print-one-col.component.scss']\r\n})\r\nexport class PrintOneColComponent {\r\n  \r\n  /** Mảng object sẽ in */\r\n  @Input() list_dishs: any[];\r\n  @Input() stamp: any;\r\n  @Input() number = 1;\r\n  @Input() tableInfo;\r\n  @Input() totalNumber;\r\n\r\n  ratio: number = 3;\r\n  root: any;\r\n  data_show : any[] = [];\r\n\r\n\r\n\r\n  constructor(\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private platform: Platform,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnChanges({ list_dishs }: SimpleChanges): void {\r\n    if (list_dishs && list_dishs.currentValue) {\r\n      this.data_show = []\r\n      this.onChangeData()\r\n      setTimeout(() => {\r\n        this.printBrowser();\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính tổng tiền của sản phẩm. Nếu có topping thì tính cả topping\r\n   * @param data sản phẩm cần tính tiền\r\n   * @returns tổng tiền của sản phẩm \r\n   */\r\n  getPrice(data) {\r\n    let total = data.price * data.quantity;\r\n    if(data.toppings) {\r\n      total += data.toppings.reduce((sum, topping) => sum + topping.price * topping.quantity, 0);\r\n    }\r\n    return total;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Gọi khi thay đổi dữ liệu list_dishs truyền vào, để cập nhật lại data_show\r\n   */\r\n  onChangeData() {\r\n    for (let i of this.list_dishs) { \r\n      for(let j = 0; j < i.quantity; j++) {\r\n        const item = {\r\n          ...i,\r\n          price: this.getPrice(i),\r\n        };\r\n        // Nếu là combo thì lấy tên combo\r\n        if (i.ptype === 5) item.subComboName = this.getComboName(i);\r\n        this.data_show.push(item);\r\n      }\r\n    } \r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên combo\r\n   * @param product sản phẩm cần lấy tên combo \r\n   * @returns tên combo, nếu không có thì trả về chuỗi rỗng\r\n   */\r\n  getComboName(product): string {\r\n    if(!product.combos) return '';\r\n\r\n    let comboName = [];\r\n    for (let combo of product.combos) {\r\n      let cb = `${combo.quantity}x ${combo.name} (${this.getUnit(combo.units, combo.ratio)})`;\r\n      if (combo.lots && combo.id_lotproduct) {\r\n        cb += ` (${this.getLotNumber(combo.lots, combo.id_lotproduct)})`;\r\n      }\r\n      comboName.push(cb);\r\n    }\r\n    return comboName.join(', ');\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên đơn vị theo tỷ lệ\r\n   * @param units mảng đơn vị của sản phẩm\r\n   * @param ratio tỷ lệ cần lấy\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n\r\n  /**\r\n   * Lấy tên lô theo id_lot được chọn\r\n   * @param lots mảng lô của sản phẩm\r\n   * @param _id id lô cần lấy\r\n   * @returns tên lô\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number;\r\n  }\r\n\r\n\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron();\r\n    else this.printBrowser();\r\n  }\r\n\r\n\r\n\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', this.lang.translate('Printing failed'), 3000);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 6) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<nz-layout>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -3 : stamp.height*1.375 -2 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex;\"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    \r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\"\r\n                        class=\"border-top\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                                 this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.time.text_align,\r\n                                 'font-weight': stamp.property.time.font_weight,\r\n                                 'font-style': stamp.property.time.font_style  ,\r\n                                 'text-decoration': stamp.property.time.text_decoration ,\r\n                                 'height.mm': stamp.property.time.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.time.width*1.375,\r\n                                 'top.px': stamp.property.time.y,\r\n                                 'left.px':stamp.property.time.x,\r\n                                 'display':stamp.property.time.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.time.font_size}\">\r\n                                 {{item.time_start_order | date:'HH:mm'}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}} <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                                 {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.notice.text_align,\r\n                                 'font-weight': stamp.property.notice.font_weight,\r\n                                 'font-style': stamp.property.notice.font_style  ,\r\n                                 'text-decoration': stamp.property.notice.text_decoration ,\r\n                                 'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.notice.width*1.375,\r\n                                 'top.px': stamp.property.notice.y,\r\n                                 'left.px':stamp.property.notice.x,\r\n                                 'display':stamp.property.notice.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.notice.font_size}\">\r\n                            **{{stamp.property.notice.value}}\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                            {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.number.text_align,\r\n                                 'font-weight': stamp.property.number.font_weight,\r\n                                 'font-style': stamp.property.number.font_style  ,\r\n                                 'text-decoration': stamp.property.number.text_decoration ,\r\n                                 'height.mm': stamp.property.number.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.number.width*1.375,\r\n                                 'top.px': stamp.property.number.y,\r\n                                 'left.px':stamp.property.number.x,\r\n                                 'display':stamp.property.number.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.number.font_size}\">\r\n                                 {{item.index+1}}/{{totalNumber}}\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"height: 100%;margin-top: -1.5mm;display: none;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex; \"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\"\r\n                    class=\"border-top\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                             this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.time.text_align,\r\n                             'font-weight': stamp.property.time.font_weight,\r\n                             'font-style': stamp.property.time.font_style  ,\r\n                             'text-decoration': stamp.property.time.text_decoration ,\r\n                             'height.mm': stamp.property.time.height*1.375-1 ,\r\n                             'width.mm': stamp.property.time.width*1.375,\r\n                             'top.px': stamp.property.time.y,\r\n                             'left.px':stamp.property.time.x,\r\n                             'display':stamp.property.time.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.time.font_size}\">\r\n                             {{item.time_start_order | date:'HH:mm'}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}} <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                             {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.notice.text_align,\r\n                             'font-weight': stamp.property.notice.font_weight,\r\n                             'font-style': stamp.property.notice.font_style  ,\r\n                             'text-decoration': stamp.property.notice.text_decoration ,\r\n                             'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                             'width.mm': stamp.property.notice.width*1.375,\r\n                             'top.px': stamp.property.notice.y,\r\n                             'left.px':stamp.property.notice.x,\r\n                             'display':stamp.property.notice.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.notice.font_size}\">\r\n                        **{{stamp.property.notice.value}}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                        {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.number.text_align,\r\n                             'font-weight': stamp.property.number.font_weight,\r\n                             'font-style': stamp.property.number.font_style  ,\r\n                             'text-decoration': stamp.property.number.text_decoration ,\r\n                             'height.mm': stamp.property.number.height*1.375-1 ,\r\n                             'width.mm': stamp.property.number.width*1.375,\r\n                             'top.px': stamp.property.number.y,\r\n                             'left.px':stamp.property.number.x,\r\n                             'display':stamp.property.number.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.number.font_size}\">\r\n                             {{item.index+1}}/{{totalNumber}}\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { AfterViewInit, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-bill1',\r\n  templateUrl: './bill1.component.html',\r\n  styleUrls: ['./bill1.component.scss']\r\n})\r\nexport class Bill1Component implements OnInit, AfterViewInit, OnChanges {\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices\r\n  // khách hàng hiện tại có được nợ hay không?\r\n  @Input() debt: boolean = false;\r\n  // giá trị thuế hiện tại\r\n  @Input() tax: number = 0\r\n  // giá trị thuế hiện tại\r\n  @Input() payment: number = 0\r\n  // phương thức thanh toán hiện tại - cấu trúc dữ liệu tương thích với component đang được sử dụng\r\n  @Input() paymentType: Array<any> = [1]\r\n  @Input() product_gift_type7: Array<any> = []\r\n  @Input() gotten_gift_type7 = false;\r\n  /** Có ngăn edit hay không, có thì sẽ hiển thị các input và textarea dưới dạng span */\r\n  @Input() isPreventEdit: boolean = false;\r\n\r\n  @Output() updateInvoice: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGiftType7: EventEmitter<boolean> = new EventEmitter()\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ]\r\n  /** Danh sách thuế được tạo và đang được kích hoạt */\r\n  listTax: any[] = this.vhQueryCafe.getlocalTaxs().filter(tax => tax.status);\r\n  moneyEdit: any = {}\r\n  /**biến lưu thông tin bill - discount ,fee, payment, cash, note- dùng để gán giá trị khi dùng bàn phim ảo */\r\n  invoice_discount: string;\r\n  invoice_fee: string;\r\n  invoice_payment: string;\r\n  invoice_cash: string;\r\n  invoice_note: string;\r\n  percent_discount: number = 0;\r\n  is_discount_bill: boolean = false;\r\n  customer_group = this.vhQueryCafe.getlocalCustomerClasss();\r\n  @Input() customer_class: any;\r\n  customer: any;\r\n  discount_bill = 0;\r\n\r\n\r\n\r\n  constructor(\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // lấy thông tin tài khoản\r\n    this.getWallets()\r\n  }\r\n  ngOnChanges(change: SimpleChanges) {\r\n    if (change.debt) {\r\n      if (!change.debt.currentValue) {\r\n        if (this.paymentType[0] == 2) this.changePaymentType([1])\r\n      }\r\n      this.nzOptions[1].disabled = !change.debt.currentValue\r\n    }\r\n    this.invoice_discount = this.invoices.getDiscount().toString();\r\n    this.invoice_fee = this.invoices.getFee().toString();\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.invoice_note = this.invoices.getNote();\r\n    this.percent_discount = this.invoices.getSubTotal() ? this.invoices.getDiscount() / this.invoices.getSubTotal() * 100 : 0\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if (document.querySelector(\".discount-price\")) this.moneyEdit['discount'] = this.vhAlgorithm.vhnumeral(\".discount-price\")\r\n    if (document.querySelector(\".fee-price\")) this.moneyEdit['fee'] = this.vhAlgorithm.vhnumeral(\".fee-price\")\r\n    if (document.querySelector(\".payment-price\")) this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n    if (document.querySelector(\".customerPay\")) this.moneyEdit['cash'] = this.vhAlgorithm.vhnumeral(\".customerPay\")\r\n\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  getWallets() {\r\n    this.nzOptions[2].children = this.vhQueryCafe.getlocalWallets()\r\n      .filter(wallet => wallet._id != 'id_cash' &&\r\n        wallet.id_branch == this.vhQueryCafe.getDefaultBranch()._id\r\n      ).map(wallet => {\r\n        return { label: wallet.name, value: wallet._id, isLeaf: true }\r\n      })\r\n  }\r\n\r\n  changePercentDiscount(value) {\r\n    this.percent_discount = value\r\n    this.invoices.setDiscount(this.invoices.getSubTotal() * value / 100)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.invoice_discount = (this.invoices.getDiscount()).toString();\r\n\r\n  }\r\n\r\n  /**Cập nhật giảm giá */\r\n  updateDiscount() {\r\n    let discount: any = this.moneyEdit['discount'].getRawValue()\r\n    this.invoices.setDiscount(discount ? parseFloat(discount) : 0)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.percent_discount = discount / this.invoices.getSubTotal() * 100\r\n  }\r\n\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.changePercentDiscount(value)\r\n  }\r\n  /** Cập nhật phí */\r\n  updateFee() {\r\n    let fee: any = this.moneyEdit['fee'].getRawValue()\r\n    this.invoices.setFee(fee ? parseFloat(fee) : 0)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n  }\r\n  /**Cập nhật thuế */\r\n  updateTax(value) {\r\n    this.invoices.setTax(parseFloat(value))\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n  }\r\n  /**Cập nhật tiền khách trả */\r\n  updatePayment() {\r\n    console.log('update payment');\r\n\r\n    if (this.debt) {\r\n      let payment: any = this.moneyEdit['payment'].getRawValue()\r\n      let value = payment ? parseFloat(payment) : 0\r\n\r\n      this.invoices.setPayment(value ? (value > this.invoices.getTotalATax() || value < 0 ? this.invoices.getTotalATax() : value) : 0)\r\n\r\n      document.getElementById(\"payment-price\")['value'] = this.invoices.getPayment()\r\n      this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n\r\n      this.updateInvoice.emit(true);\r\n      this.invoice_payment = this.invoices.getPayment().toString();\r\n      this.invoice_cash = this.invoices.getCash().toString();\r\n    }\r\n  }\r\n  /**Cập nhật ghi chú */\r\n  updateNote() {\r\n    let note: any = document.getElementById(\"invoice-note\")\r\n    this.invoices.setNote(note.value)\r\n    this.updateInvoice.emit(true)\r\n  }\r\n\r\n  /**Cập nhật tiền khách trả*/\r\n  updateCash() {\r\n    this.invoices.setCash(parseFloat(this.moneyEdit['cash'].getRawValue()))\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n  }\r\n\r\n  /** Thay đổi phương thức thanh toán\r\n   * @param value loại thanh toán\r\n  */\r\n  changePaymentType(value: any) {\r\n    this.invoices.setPaymentType(value[0])\r\n    this.invoices.setPayment()\r\n    switch (value[0]) {\r\n      case 1:\r\n        this.invoices.setIdWallet(\"id_cash\");\r\n        this.invoice_payment = this.invoices.getPayment().toString();\r\n        this.invoice_cash = this.invoices.getCash().toString();\r\n        break\r\n      case 2:\r\n        this.invoices.setIdWallet(\"\");\r\n        this.invoices.setCash(0);\r\n        this.invoice_cash = '0';\r\n        this.invoice_payment = this.invoices.getPayment().toString();\r\n        break;\r\n\r\n      case 3:\r\n        this.invoices.setIdWallet(value[1]);\r\n        this.invoice_payment = this.invoices.getPayment().toString();\r\n        this.invoice_cash = this.invoices.getCash().toString();\r\n        break;\r\n    }\r\n\r\n    this.updateInvoice.emit(true);\r\n    console.log(this.invoice_cash);\r\n\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả discount\r\n   * @param value\r\n   */\r\n  checkMaxLengthDiscount(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_discount = value }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả fee\r\n   * @param value\r\n   */\r\n  checkMaxLengthFee(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_fee = value }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả payment\r\n   * @param value\r\n   */\r\n  checkMaxLengthPayment(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_payment = value }\r\n  }\r\n\r\n  /**\r\n     * kiểm tra tối đa 12 ky tự cuả cash\r\n     * @param value\r\n     */\r\n  checkMaxLengthCash(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_cash = value }\r\n  }\r\n\r\n  showModalOtherDiscount = false\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n    this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.invoices.getIdPartner())\r\n  }\r\n\r\n  handleOkOtherDiscount() {\r\n    if (this.invoices.getPayment() < this.invoices.getDiscountOther()) this.invoices.setPayment(0);\r\n    this.showModalOtherDiscount = false;\r\n    // this.updateInvoice.emit(true);\r\n  }\r\n  point_validity = 0\r\n  value_discount_point: number = 0;\r\n  product_codes: any = [];\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQueryCafe.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoices.setDiscountCoupon(product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoices.setDiscountCoupon(-item.value)\r\n  }\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n      this.invoices.setDiscountPoint((value / this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoices.setUsePoint(value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy label của phương thức thanh toán\r\n   * @param value value của phương thức thanh toán cần lấy label\r\n   * @returns label của phương thức thanh toán \r\n   */\r\n  getPaymentTypeLabel(value) {\r\n    if(value[1]) {\r\n      let wallet = this.vhQueryCafe.getlocalWallets().find(item => item._id == value[1]);\r\n      if(wallet) return `${this.nzOptions.filter(item => item.value == value[0])?.[0]?.label} / ${wallet.name}`;\r\n    }\r\n    else {\r\n      return this.nzOptions.filter(item => item.value == value[0])?.[0]?.label;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(this.isPreventEdit || !this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div class=\"bill\">\r\n    <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n        <!-- Tiêu đề -->\r\n        <b>{{'Payment information' | translate}}</b>\r\n        \r\n        <!-- Thêm thanh toán khác -->\r\n        <span *ngIf=\"!isPreventEdit\"\r\n            (click)=\"openModalOtherDiscount()\" \r\n            style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n            <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n            {{'Add other payment' |translate}}\r\n        </span>\r\n    </div>\r\n\r\n    <div class=\"bill-area hideScrollbar\">\r\n\r\n        <!-- Cộng tiền -->\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\">{{'SubTotal' | translate}}</div>\r\n            <div  nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getSubTotal())}}</div>\r\n        </div>\r\n\r\n        <!-- Giảm giá -->\r\n        <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n            <div class=\"sales-bills-content-discount\"\r\n                style=\"display: flex; justify-content: space-between; align-items: center; margin-top: 8px;\" nz-col nzSpan=\"24\">\r\n                <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                <!-- Phần trăm -->\r\n                <div>\r\n                    <span *ngIf=\"isPreventEdit\">{{percent_discount | number:'1.0-2'}} %</span>\r\n                </div>\r\n                <div *ngIf=\"!isPreventEdit\">\r\n                    <input id=\"percent-discount-price\" style=\"width: 60px;\" #percentDiscount type=\"number\"\r\n                        max=\"100\" min=\"0\" step=\"1\"\r\n                        (blur)=\"updateServiceTime(); invoices.setPercentDiscountBill(percentDiscount.value); editPercentDiscount(percentDiscount.value)\"\r\n                        [value]=\"percent_discount | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                        nz-input />%\r\n                </div>\r\n                <!-- Giá trị -->\r\n                <span *ngIf=\"isPreventEdit\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getDiscount())}}</span>\r\n                <input *ngIf=\"!isPreventEdit\" style=\"width:50%;\" (blur)=\"updateServiceTime(); updateDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getDiscount())\"\r\n                    class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                    nz-input />\r\n            </div>\r\n        </ng-container>\r\n\r\n        <!-- Chiết khấu -->\r\n        <div *ngIf=\"invoices.getDiscountBill()\" class=\"sales-bills-content-discount\"\r\n            style=\"display: flex; justify-content: space-between; align-items: center; margin-top: 8px;\" nz-col nzSpan=\"24\">\r\n            <div style=\"width: auto;\">{{'Discount' | translate}}\r\n            </div>\r\n            <span>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountBill())}}</span>\r\n        </div>\r\n\r\n        <!-- Thanh toán điểm -->\r\n        <div *ngIf=\"invoices.getDiscountPoint()\" class=\"sales-bills-content-total\"  style=\"display: flex; justify-content: space-between;align-items: center; margin-top: 8px;\" nz-col nzSpan=\"24\">\r\n            <div>{{'Point payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountPoint())}}</div>\r\n        </div>\r\n\r\n        <!-- Thanh toán coupon -->\r\n        <div *ngIf=\"invoices.getDiscountCoupon()\" class=\"sales-bills-content-total\"  style=\"display: flex; justify-content: space-between;align-items: center; margin-top: 8px;\" nz-col nzSpan=\"24\">\r\n            <div>{{'Coupon payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountCoupon())}}</div>\r\n        </div>\r\n\r\n        <!-- Phí -->\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n            <div nz-col nzSpan=\"12\">{{'Fee' | translate}}</div>\r\n            <span *ngIf=\"isPreventEdit\" nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoice_fee)}}</span>\r\n            <div *ngIf=\"!isPreventEdit\" nz-col nzSpan=\"12\">\r\n                <input maxlength=\"15\" \r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(invoice_fee)\"\r\n                    (blur)=\"updateServiceTime(); updateFee()\"\r\n                    class=\"fee-price\" id=\"fee-price\" nz-input/>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Thuế -->\r\n        <div class=\"bill-area-item\" style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n            <div class=\"bill-area-item-value\">{{'Tax' | translate}}</div>\r\n            <div>\r\n                <span *ngIf=\"isPreventEdit\">{{tax}} %</span>\r\n                <nz-select *ngIf=\"!isPreventEdit && listTax.length\" style=\"min-width: 72px;\" \r\n                    [(ngModel)]=\"tax\"\r\n                    (ngModelChange)=\"updateServiceTime(); updateTax($event)\">\r\n                    <nz-option [nzValue]=\"item.value\" nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\"\r\n                        *ngFor=\"let item of listTax; trackBy:myTrackByFunction\">\r\n                    </nz-option>\r\n                </nz-select>\r\n                <span *ngIf=\"!listTax.length\">0.00%</span>\r\n            </div>\r\n            <div class=\"bill-area-item-value\">{{vhAlgorithm.vhcurrencyunit(invoices.getTaxValue())}}</div>\r\n        </div>\r\n\r\n        <!-- Tổng -->\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\">{{'Total' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\"  class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getTotalATax())}}</div>\r\n        </div>\r\n\r\n        <!-- Thanh toán -->\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div  nz-col nzSpan=\"12\" class=\"payment\">\r\n                <b>{{'Pay' | translate}}</b>\r\n                <ng-container *ngIf=\"product_gift_type7.length && !gotten_gift_type7\">\r\n                    <i style=\"font-size: 1rem;  margin-left: 8px; cursor: pointer;color: var(--ion-color-vh-green)\"\r\n                        nz-icon nzType=\"gift\" nzTheme=\"outline\" (click)=\"showProductGiftType7.emit(true)\"></i>\r\n                </ng-container>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <span *ngIf=\"isPreventEdit\" class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoices.getPayment())}}</span>\r\n                <input *ngIf=\"!isPreventEdit\" \r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getPayment())\" maxlength=\"15\"\r\n                    (blur)=\"updateServiceTime(); updatePayment()\" \r\n                    class=\"payment-price\" id=\"payment-price\" nz-input \r\n                    [disabled]=\"!debt || invoices.getPaymentType() == 2\" />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Nợ lại -->\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n            <div nz-col nzSpan=\"12\">{{'Rest' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit_symbol(invoices.getTotalATax() - invoices.getPayment())}}\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Hình thức thanh toán -->\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\">{{'Payment method' | translate}}</div>\r\n            <span *ngIf=\"isPreventEdit\" nz-col nzSpan=\"12\" class=\"text-end payment-price\">{{getPaymentTypeLabel(paymentType)}}</span>\r\n            <div *ngIf=\"!isPreventEdit\" nz-col nzSpan=\"12\">\r\n                <nz-cascader [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" \r\n                    [(ngModel)]=\"paymentType\"\r\n                    (ngModelChange)=\"updateServiceTime(); changePaymentType($event)\" \r\n                    [nzPlaceHolder]=\"'Payment method' | translate\">\r\n            </nz-cascader>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Tiền khách đưa -->\r\n        <div nz-row  style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n            <div nz-col nzSpan=\"12\">{{'cash' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" id=\"cash\">\r\n                <span *ngIf=\"isPreventEdit\" class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoice_cash)}}</span>\r\n                <input *ngIf=\"!isPreventEdit\" \r\n                    style=\"text-align: end;\" type=\"text\" #cash maxlength=\"15\" nz-input\r\n                    [disabled]=\"invoices.getPaymentType() == 2\" \r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(invoice_cash)\"\r\n                    class=\"customerPay\" \r\n                    (blur)=\"updateServiceTime(); updateCash()\"  />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Tiền thối lại -->\r\n        <div nz-row  style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n            <div nz-col nzSpan=\"12\">{{'Change' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getExcessCash())}}</div>\r\n        </div>\r\n\r\n        <!-- Ghi chú -->\r\n        <div class=\"bill-area-item-note\" nz-col nzSpan=\"24\" id=\"note\">\r\n            <span *ngIf=\"isPreventEdit\" class=\"payment-price\">{{invoice_note}}</span>\r\n            <textarea *ngIf=\"!isPreventEdit\" class=\"nz-hover-border\" id=\"invoice-note\" nz-input [placeholder]=\"'Enter note...' | translate\"\r\n                [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\" (blur)=\"updateServiceTime(); updateNote()\" #note [value]=\"invoice_note\"></textarea>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal \r\n    [(nzVisible)]=\"showModalOtherDiscount\" \r\n    [nzTitle]=\"'Other payment' | translate\" \r\n    nzWidth=\"50vw\"\r\n    (nzOnCancel)=\"updateServiceTime(); showModalOtherDiscount = false\" \r\n    nzCancelText=\"\" \r\n    (nzOnOk)=\"updateServiceTime(); handleOkOtherDiscount()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{'Coupon' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n                <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\" style=\"text-align: left;\"\r\n                    (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n                <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                    (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoices.getDiscountCoupon())}}\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\"></div>\r\n            <div nz-col nzSpan=\"18\">\r\n                <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                    (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <div nz-row class=\"center-all-content mt-8\">\r\n                <div nz-col nzSpan=\"6\">\r\n                    {{'Accumulated points' | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                        nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                        (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                    {{vhAlgorithm.vhcurrencyunit(invoices.getDiscountPoint())}}\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"mt-8\">\r\n                <div nz-col nzSpan=\"14\">\r\n                    <label>{{'Conversion rate' | translate}}:\r\n                        {{customer_class.payment.points}} Điểm =\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                    {{'Current accumulated points' | translate}} : {{point_validity }}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div nz-row class=\"mt-8 beetween-all-content\">\r\n            <b>{{'Total discount' | translate}}</b>\r\n            <b>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountOther())}}</b>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Bill1Component } from './bill1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Bill1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    Bill1Component\r\n  ]\r\n})\r\nexport class Bill1Module { }\r\n","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport {\r\n  AfterViewChecked,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  UrlTree,\r\n} from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth, VhQuery, VhEinvoice } from 'ionic-vhframeworks';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { SalesA4Component } from 'src/app/cafe/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/cafe/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/cafe/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/cafe/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/cafe/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\n@Component({\r\n  selector: 'app-cart1',\r\n  templateUrl: './cart1.component.html',\r\n  styleUrls: ['./cart1.component.scss'],\r\n})\r\nexport class Cart1Component implements OnInit, AfterViewChecked {\r\n  dataRestore: any;\r\n  invoices: VhOrderInvoices = new VhOrderInvoices();\r\n  printAllLabel: boolean = false;\r\n  checkPrinterKitchen: any = {};\r\n  checkPrinter: boolean = false;\r\n  // cho phép nợ hay không\r\n  debt: boolean = false;\r\n  printKitchenAll = false; // biến nhận giá trị output printKitchenAll từ component payment-button1\r\n  // thông tin bàn đang được đặt\r\n  tableInfo: string = '';\r\n  // trạng thái\r\n  statusInvoice: any = {\r\n    updating: false,\r\n    deleting: false,\r\n  };\r\n  // thuộc tính máy in\r\n  printer: any;\r\n  stamp: any; // mẫu tem in để in món. lấy từ collection design_barcodes với trường default = true\r\n  observableSyncOpeningBill: Subscription;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  default_price_type = 1;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private router: Router,\r\n    public vhAuth: VhAuth,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private cdRef: ChangeDetectorRef,\r\n    private mess: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private plaform: Platform,\r\n    private vhQuery: VhQuery,\r\n    private productService: ProductService,\r\n    private vhEinvoice: VhEinvoice,\r\n    private billService: BillService,\r\n  ) {\r\n    let dataTrans: any = this.router.getCurrentNavigation().extras.state;\r\n    if (dataTrans.dataRestore) this.dataRestore = dataTrans.dataRestore;\r\n    this.initInvoice(dataTrans);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.plaform.is('electron')) {\r\n      // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n      //   .then((led) => {\r\n      // console.log(\"led\", led)\r\n      console.log('connectDisplayLEDScreens');\r\n      this.vhQueryCafe.connectDisplayLEDScreens();\r\n      // })\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.vhQueryCafe.closeSyncOpeningBill();\r\n    // this.observableSyncOpeningBill.unsubscribe();\r\n    if (this.plaform.is('electron'))\r\n      this.vhQueryCafe.disconnectDisplayLEDScreens();\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**Pop up báo khi phát sinh lỗi\r\n   * @param err thông tin lỗi\r\n   */\r\n  alertErr(err: string) {\r\n    this.vhComponent.alertMessageDesktop(\r\n      'error',\r\n      this.languageService.translate('Connect error')\r\n    );\r\n    this.goBack()\r\n  }\r\n\r\n  /**Hàm trở về trang khu vực order\r\n   * @param reset: reset quyền truy cập\r\n   * @default reset = true\r\n   */\r\n  async goBack(reset: boolean = true) {\r\n    this.isExit = true;\r\n    if (\r\n      this.dataRestore['searchValueToday'] &&\r\n      this.dataRestore['filterTypeToday']\r\n    ) {\r\n      delete this.dataRestore['searchValueToday'];\r\n      delete this.dataRestore['filterTypeToday'];\r\n    }\r\n    this.router.navigate(['/cafe/cafe-desktop'], { state: this.dataRestore });\r\n  }\r\n  /**Render food name\r\n   * @param id_prod: id product\r\n   * @param id_subProd: id subproduct\r\n   */\r\n  renderNameFood(id_prod: string, id_subProd?: string) {\r\n    let food = this.vhQueryCafe.getlocalProduct(id_prod);\r\n    let subFood: any;\r\n\r\n    if (id_subProd) subFood = food.subs.find((item) => item._id == id_subProd);\r\n    return `${food ? food.name : ''} ${subFood ? '(' + subFood.name + ')' : ''\r\n      }`;\r\n  }\r\n  /**Render các thành phần combo\r\n   * @package arr: mảng combos\r\n   */\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = '';\r\n    arr.forEach((item) => {\r\n      if (subName.length)\r\n        subName += `, ${item.name} ${'(' + this.getUnit(item.units, item.ratio) + ')'\r\n          } ${'x' + item.quantity}`;\r\n      else\r\n        subName += `${item.name} ${item.unit ? '(' + item.unit + ')' : ''} ${'x' + item.quantity\r\n          }`;\r\n    });\r\n    return subName;\r\n  }\r\n  /**Khởi tạo hóa đơn\r\n   * @param dataTrans: dữ liệu state\r\n   */\r\n  initInvoice(dataTrans) {\r\n    this.invoices.setIdTable(dataTrans['id_table']);\r\n    this.invoices.setIdEmployee(this.vhAuth.getUser()._id);\r\n    this.invoices.setIdArea(this.dataRestore['id_area']);\r\n\r\n    // lấy thuế\r\n    let tax: any = this.vhQueryCafe\r\n      .getlocalTaxs()\r\n      .find((tax) => tax.status && tax.default);\r\n    if (tax) this.invoices.setTax(parseFloat(tax.value));\r\n    if (dataTrans.id_bill) {\r\n      // bàn đã sinh bill\r\n\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(dataTrans.id_bill),\r\n        this.vhQueryCafe.getBill_details_byId_bill(dataTrans.id_bill),\r\n        this.vhComponent.showLoading('', 'transparent-loading', null, 0, false),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", {\r\n          id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n          default: { $eq: true },\r\n        }),\r\n        this.vhQueryCafe.getEarningPointsBills(),\r\n        this.vhQueryCafe.getEarningPointsProducts(),\r\n      ])\r\n        .then(\r\n          ([\r\n            bill,\r\n            billDetail,\r\n            loading,\r\n            label,\r\n            earning_point_bills,\r\n            earning_points_products,\r\n          ]) => {\r\n            if (label['length'] && label[0].status) this.stamp = label[0];\r\n            this.list_earning_point_bills = earning_point_bills;\r\n            this.list_earning_points_products = earning_points_products;\r\n            if (!bill) {\r\n              this.vhComponent\r\n                .alertMessage(\r\n                  '',\r\n                  '',\r\n                  this.languageService.translate('The invoice is not existed'),\r\n                  'OK'\r\n                )\r\n                .then(() => this.goBack(false));\r\n              return;\r\n            }\r\n            this.invoices = new VhOrderInvoices(\r\n              bill,\r\n              this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n              this.vhQueryCafe,\r\n              this.plaform\r\n            );\r\n            this.getClassAndProgram();\r\n            // kiểm tra cho phép nợ\r\n            this.debt =\r\n              this.invoices.getIdPartner() == 'id_retail'\r\n                ? false\r\n                : this.vhQueryCafe.getlocalCustomer(\r\n                  this.invoices.getIdPartner()\r\n                );\r\n            this.observableCheckBill(bill['_id']);\r\n            this.default_price_type = this.invoices.getPriceType()\r\n              ? this.invoices.getPriceType()\r\n              : 1;\r\n          }\r\n        )\r\n        .catch((err) => this.alertErr(err))\r\n        .finally(() => this.vhComponent.hideLoading(0));\r\n    }\r\n    else {\r\n      this.goBack()\r\n    }\r\n    // lấy thông tin bàn\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      this.tableInfo = this.languageService.translate('Take away');\r\n    } else {\r\n      this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.invoices.getIdArea()).name\r\n        } - ${this.vhQueryCafe.getlocalTable(this.invoices.getIdTable()).name}`;\r\n    }\r\n    // kiểm tra máy in\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales');\r\n    this.printer = printer\r\n      ? printer.print_sizes[\r\n      printer.print_sizes.findIndex(\r\n        (e) => e._id == printer.print_size_default\r\n      )\r\n      ]\r\n      : null;\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable;\r\n    }\r\n    let printer_kitchen = this.vhQueryCafe.getLocalPrintPage(\r\n      'page_desktop_kitchen'\r\n    );\r\n    this.checkPrinterKitchen = printer_kitchen\r\n      ? printer_kitchen.print_sizes[\r\n      printer_kitchen.print_sizes.findIndex(\r\n        (e) => e._id == printer_kitchen.print_size_default\r\n      )\r\n      ]\r\n      : { enable: false };\r\n  }\r\n\r\n  // sự kiện subscribe bill dc mở ở thiết bị khác\r\n  observableCheckBill(id_bill) {\r\n    console.log('id_bill', id_bill);\r\n    this.vhQueryCafe.observableSyncOpeningBill(id_bill, 5).subscribe(\r\n      (rsp: any) => {\r\n        console.log('observableSyncOpeningBill', rsp);\r\n        this.vhQueryCafe.closeSyncOpeningBill();\r\n        if (rsp.vcode === 0) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate(\r\n              'Hóa đơn này đang được cập nhật ở thiết bị khác!'\r\n            ),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 1) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate(\r\n              'Hóa đơn này đã được thanh toán ở thiết bị khác!'\r\n            ),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 2) {\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate('Hóa đơn đã bị xóa!')\r\n          );\r\n          this.goBack();\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**Tiến hành cập nhặt hóa đơn\r\n   * @param ev: event trả về từ output\r\n   */\r\n  updateInvoice(ev) {\r\n    this.statusInvoice.updating = true;\r\n    // tiến hành cập nhật\r\n    // kiểm tra bill đang có km thì destroy km trước khi luu\r\n    if (this.invoices.isPromotion()) {\r\n      this.deletePromotions();\r\n      this.statusInvoice.updating = false;\r\n    } else {\r\n      this.vhQueryCafe\r\n        .updateBill(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(5)\r\n        )\r\n        .then((id) => {\r\n          console.log('update invoice: ', id);\r\n          this.getClassAndProgram();\r\n        })\r\n        .catch((err) => console.error(err))\r\n        .finally(() => (this.statusInvoice.updating = false));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (\r\n      this.program_bill &&\r\n      this.invoices.getSubTotal() > this.program_bill.bill_total_minimum\r\n    ) {\r\n      let subTotal = this.invoices.getSubTotal();\r\n      if (!this.program_bill.include_promotion_product) {\r\n        // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion();\r\n        if (this.program_bill.include_discount)\r\n          subTotal =\r\n            subTotal -\r\n            this.invoices.getDiscount() -\r\n            this.invoices.getDiscountBill();\r\n\r\n        if (\r\n          this.program_bill.include_paid_points &&\r\n          this.invoices.getDiscountPoint()\r\n        )\r\n          subTotal = subTotal - this.invoices.getDiscountPoint();\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax)\r\n          subTotal += subTotal * (this.invoices.getTax() / 100);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_bill.exchange.money)) /\r\n            this.program_bill.exchange.money) *\r\n          this.program_bill.exchange.points\r\n        );\r\n      } else {\r\n        subTotal = this.invoices.getSubTotal();\r\n        if (this.program_bill.include_discount)\r\n          subTotal =\r\n            subTotal -\r\n            this.invoices.getDiscount() -\r\n            this.invoices.getDiscountBill();\r\n\r\n        if (\r\n          this.program_bill.include_paid_points &&\r\n          this.invoices.getDiscountPoint()\r\n        )\r\n          subTotal = subTotal - this.invoices.getDiscountPoint();\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax)\r\n          subTotal += subTotal * (this.invoices.getTax() / 100);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_bill.exchange.money)) /\r\n            this.program_bill.exchange.money) *\r\n          this.program_bill.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoices\r\n      .getInvoiceDetail()\r\n      .filter((item) => !item.id_promotion)\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoices\r\n      .getInvoiceDetail()\r\n      .filter(\r\n        (item) =>\r\n          item.price_origin == item.price &&\r\n          products_of_program_earnig_product.find(\r\n            (i) => i == item.id_product || i == item.id_subproduct\r\n          )\r\n      )\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) {\r\n        // tích điểm sp ko có km\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(\r\n          this.program_product.products\r\n        );\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      } else {\r\n        // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = products\r\n          .filter(\r\n            (item) =>\r\n              item.price_origin == item.price &&\r\n              this.program_product.products.find((i) => i == item.id_product)\r\n          )\r\n          .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n  earning_point: number = 0;\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   */\r\n  getClassAndProgram() {\r\n    let customer = this.vhQueryCafe.getlocalCustomer(\r\n      this.invoices.getIdPartner()\r\n    );\r\n    this.customer_class = this.vhQueryCafe\r\n      .getlocalCustomerClasss()\r\n      .find((item) => item._id == customer.id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_bill\r\n      );\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_product\r\n      );\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n  }\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point =\r\n      this.getEarningProduct(this.invoices.getInvoiceDetail()) +\r\n      this.getEarningBill();\r\n    return this.earning_point ? this.earning_point : 0;\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) {\r\n        // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find((i) => i == product._id)\r\n          ? product.price\r\n          : 0;\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      } else {\r\n        subTotal = this.program_product.products.find((i) => i == product._id)\r\n          ? product.price\r\n          : 0;\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  /** Tiến hành xóa hóa đơn\r\n   */\r\n  deleteProcess() {\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.invoices.getID()),\r\n      ]);\r\n    } else {\r\n      this.vhQueryCafe.closeSyncOpeningBill();\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.invoices.getID()),\r\n        this.vhQueryCafe.updateTable(this.invoices.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n  /**Xóa hóa đơn\r\n   * @param ev: event trả về từ output\r\n   */\r\n  deleteInvoice(ev) {\r\n    if (ev) {\r\n      this.vhQueryCafe.closeSyncOpeningBill();\r\n      this.statusInvoice.deleting = true;\r\n      // tiến hành xóa\r\n      this.deleteProcess()\r\n        .then((id) => console.log('delete invoice: ', id))\r\n        .catch((err) => {\r\n          console.error(err);\r\n          this.vhComponent.showToast(\r\n            2000,\r\n            this.languageService.translate('Delete fail'),\r\n            'alert-toast'\r\n          );\r\n        })\r\n        .finally(() => {\r\n          this.statusInvoice.deleting = false;\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate('Invoice deleted successfully')\r\n          );\r\n          this.goBack();\r\n        });\r\n    }\r\n  }\r\n  /**Save hóa đơn */\r\n  createProcess() {\r\n    this.productService.updateAllServiceTimeToPause(this.invoices.getInvoiceDetail());\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(1),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        ),\r\n\r\n      ]);\r\n    } else {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(1),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        ),\r\n\r\n        this.vhQueryCafe.updateTable(this.invoices.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n  /** Thanh toán hóa đơn\r\n   * @param print: cho phép in hóa đơn hay k?\r\n   */\r\n  saveInvoice(print: 'print' | 'notPrint') {\r\n    if (!this.vhAuth.checkLocalMyPermissionName('sales_enable_payment')) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('You do not have this rights'));\r\n      return\r\n    }\r\n    if (this.getTotalEarningPoint() || this.invoices.getUsePoint()) {\r\n      let earned_points =\r\n        this.getTotalEarningPoint() - this.invoices.getUsePoint();\r\n      this.vhQueryCafe.updateCustomer_byEarnedPoints(\r\n        this.invoices.getIdPartner(),\r\n        earned_points\r\n      );\r\n      this.invoices.setEarningPointBill(this.getTotalEarningPoint());\r\n    }\r\n    // if (print == \"print\") {\r\n    if (this.checkPrinter) {\r\n      this.statusInvoice['payment'] = true;\r\n      const bill: any = {...this.invoices};\r\n      const invoiceTemp = {...bill?.invoice};\r\n      this.createProcess().then(async (res: any) => {\r\n        if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n        this.mess.success(\r\n          `${this.languageService.translate(\r\n            'Sales invoice'\r\n          )} ${this.invoices.getBillCode()} ${this.languageService.translate(\r\n            'has been created successfully'\r\n          )}`\r\n        );\r\n        this.handlePrintInvoice();\r\n        // this.goBack(false)\r\n\r\n        this.statusInvoice['payment'] = false;\r\n      });\r\n    } else {\r\n      this.statusInvoice['payment'] = true;\r\n      const bill: any = {...this.invoices};\r\n      const invoiceTemp = {...bill?.invoice};\r\n      this.createProcess().then(async (res) => {\r\n        if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n        this.mess.success(\r\n          `${this.languageService.translate(\r\n            'Sales invoice'\r\n          )} ${this.invoices.getBillCode()} ${this.languageService.translate(\r\n            'has been created successfully'\r\n          )}`\r\n        );\r\n        this.goBack(false);\r\n\r\n        this.statusInvoice['payment'] = false;\r\n      });\r\n    }\r\n  }\r\n  ///////////////////////////////////////////////IN HÓA ĐƠN//////////////////////////////////////////////////////////\r\n  /**\r\n   * Lấy các trang in\r\n   * @param type size\r\n   * @returns\r\n   */\r\n  private renderPrintPage(\r\n    type:\r\n      | 'print_size_a4'\r\n      | 'print_size_a5'\r\n      | 'print_size_k80_4c'\r\n      | 'print_size_k80_3c'\r\n      | 'print_size_k57_3c'\r\n  ) {\r\n    switch (type) {\r\n      case 'print_size_k57_3c':\r\n        return SalesK57Col3Component;\r\n      case 'print_size_k80_3c':\r\n        return SalesK80Col3Component;\r\n      case 'print_size_k80_4c':\r\n        return SalesK80Col4Component;\r\n      case 'print_size_a5':\r\n        return SalesA5Component;\r\n      case 'print_size_a4':\r\n        return SalesA4Component;\r\n      default:\r\n        return SalesA4Component;\r\n    }\r\n  }\r\n  /** Mở trang in */\r\n  handlePrintInvoice() {\r\n    if (this.printer)\r\n      this.vhQueryCafe.getBill(this.invoices.getID()).then((res: any) => {\r\n        this.invoices.setBillCode(res.bill_code);\r\n        this.vhComponent\r\n          .showModal(\r\n            this.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.invoices },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          )\r\n          .then((modal) => {\r\n            modal.onWillDismiss().then(() => {\r\n              this.goBack(false);\r\n            });\r\n          });\r\n      });\r\n\r\n    else this.goBack(false);\r\n  }\r\n\r\n  /** Mở trang in thử*/\r\n  handlePrintTest() {\r\n    if (this.checkPrinter) {\r\n      this.updateServiceTime();\r\n      if (this.vhAuth.checkMyPermission('sales_enable_print_out_for_customer'))\r\n        this.vhComponent\r\n          .showModal(\r\n            this.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.invoices, temp: true },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          )\r\n          .then((modal) => {\r\n            modal.onWillDismiss().then(() => { });\r\n          });\r\n      else\r\n        this.mess.error(\r\n          this.languageService.translate('You do not have this rights'),\r\n          { nzDuration: 5000 }\r\n        );\r\n    } else\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate('Function') + '</i>',\r\n        nzContent:\r\n          '<b>' +\r\n          this.languageService.translate('Please open the function in') +\r\n          ' ' +\r\n          '<i>' +\r\n          '\"' +\r\n          this.languageService.translate('Sales page settings') +\r\n          '\"' +\r\n          '</i>' +\r\n          ' ' +\r\n          ' -> ' +\r\n          '<i>' +\r\n          '\"' +\r\n          this.languageService.translate('Print page') +\r\n          '\"' +\r\n          '</i>' +\r\n          '</b>',\r\n        nzIconType: 'info-circle',\r\n        nzCancelText: null,\r\n        nzOnOk: () => { },\r\n      });\r\n  }\r\n\r\n  handleEmit_printKitchenAll(ev) {\r\n    this.printKitchenAll = ev;\r\n    setTimeout(() => {\r\n      this.printKitchenAll = false;\r\n    }, 2000);\r\n  }\r\n  isExit: boolean = false;\r\n  checkDeactivate(\r\n    currentRoute: ActivatedRouteSnapshot,\r\n    currentState: RouterStateSnapshot,\r\n    nextState?: RouterStateSnapshot\r\n  ):\r\n    | Observable<boolean | UrlTree>\r\n    | Promise<boolean | UrlTree>\r\n    | boolean\r\n    | UrlTree {\r\n    if (!this.isExit) {\r\n      if (this.invoices.getInvoiceDetail().length) {\r\n        Promise.all([\r\n          this.vhComponent.showLoading('', 'transparent-loading'),\r\n          this.vhQueryCafe.updateBill(\r\n            this.invoices.getID(),\r\n            this.invoices.getCreateUpdateInvoice(this.invoices.getBillType())\r\n          ),\r\n        ]).then(() => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.isExit = true;\r\n          this.router.navigateByUrl(nextState.url);\r\n        });\r\n      } else {\r\n        this.statusInvoice.deleting = true;\r\n        // tiến hành xóa\r\n        Promise.all([\r\n          this.vhComponent.showLoading('', 'transparent-loading'),\r\n          this.deleteProcess(),\r\n        ])\r\n          .then((id) => {\r\n            this.isExit = true;\r\n            this.router.navigateByUrl(nextState.url);\r\n          })\r\n          .catch((err) => {\r\n            console.error(err);\r\n            this.vhComponent.showToast(\r\n              2000,\r\n              this.languageService.translate('Delete fail'),\r\n              'alert-toast'\r\n            );\r\n          })\r\n          .finally(() => {\r\n            this.vhComponent.hideLoading(0);\r\n            this.statusInvoice.deleting = false;\r\n          });\r\n      }\r\n    }\r\n    return this.isExit;\r\n  }\r\n  getBill_Detail_ByID_Bill() {\r\n    this.vhQueryCafe.getBill_details_byId_bill(this.invoices.getID()).then(\r\n      (bill_details) => {\r\n        console.log('getBill_details_byId_bill', bill_details);\r\n        this.invoices = new VhOrderInvoices(\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          bill_details,\r\n          this.vhQueryCafe,\r\n          this.plaform\r\n        );\r\n      },\r\n      (error: any) => {\r\n        console.log('error ', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * hàm này để xóa tất cả promotion trong bill và update\r\n   */\r\n  deletePromotions() {\r\n    this.destroyBillDetails_withPromotions().then(() => {\r\n      this.vhQueryCafe\r\n        .updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        )\r\n        .then(() => {\r\n          this.getBill_Detail_ByID_Bill();\r\n        })\r\n        .catch((err) => console.error(err));\r\n    });\r\n  }\r\n\r\n  destroyBillDetails_withPromotions() {\r\n    this.invoices.setBillHavePromotion(false);\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQueryCafe\r\n        .destroyBillDetails_withPromotions(this.invoices.getInvoiceDetail())\r\n        .map((item) => {\r\n          return { ...item, _id: item._id ? item._id : true };\r\n        });\r\n      console.log(bill_details);\r\n\r\n      this.invoices = new VhOrderInvoices(\r\n        this.invoices.getCreateUpdateInvoice(5),\r\n        bill_details,\r\n        this.vhQueryCafe,\r\n        this.plaform\r\n      );\r\n      this.invoices.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true);\r\n    });\r\n  }\r\n  isGotPromotion = false;\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n\r\n      for (let i in this.product_gift_type7) {\r\n        if (this.product_gift_type7[i].products_gift.filter(e => e.choose).length)\r\n          this.invoices.addBill_detail_promotion(this.product_gift_type7[i]);\r\n      }\r\n    this.gotten_gift_type7 = true;\r\n    console.log(this.invoices.getInvoiceDetail());\r\n\r\n  }\r\n  /**\r\n   * hàm lấy quà\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('').then(() => {\r\n      /** Chứa các bill_detail có ptype = 6 */\r\n      let bill_details_type_6;\r\n      /** Chứa các bill_detail có ptype != 6 */\r\n      let bill_details_others;\r\n      // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n      if(this.productService.isContainServiceTime(this.invoices)) {\r\n        bill_details_type_6 = this.invoices.getInvoiceDetail().filter((item) => item.ptype === VhType.SERVICETIME);\r\n        bill_details_others = this.invoices.getInvoiceDetail().filter((item) => item.ptype !== VhType.SERVICETIME);\r\n        this.invoices = new VhOrderInvoices(\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          bill_details_others,\r\n          this.vhQueryCafe,\r\n        );\r\n      }\r\n      this.vhQueryCafe\r\n        .changeBillDetails_withPromotions(\r\n          this.invoices.getInvoiceDetail(),\r\n          this.invoices.getDate()\r\n        )\r\n        .then(\r\n          (bill_details_display: any) => {\r\n            // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n            if(this.productService.isContainServiceTime(this.invoices)) {\r\n              bill_details_display.bill_details_pmtype_0to6 = [\r\n                ...bill_details_type_6,\r\n                ...bill_details_display.bill_details_pmtype_0to6,\r\n              ];\r\n            }\r\n\r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_0to6\r\n            );\r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_7\r\n            );\r\n            this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC(\r\n              [...bill_details_display.bill_details_pmtype_7],\r\n              'total_bill_value'\r\n            );\r\n            this.isGotPromotion = true;\r\n            this.vhComponent.hideLoading(0);\r\n            this.invoices = new VhOrderInvoices(\r\n              this.invoices.getCreateUpdateInvoice(5),\r\n              [...bill_details_display.bill_details_pmtype_0to6],\r\n              this.vhQueryCafe,\r\n              this.plaform\r\n            );\r\n            this.handlePromotionType7(this.bill_details_pmtype_7);\r\n            this.getEarningpointPromotion().then(() => {\r\n              this.vhQueryCafe.updateBill_Billdetail(\r\n                this.invoices.getID(),\r\n                this.invoices.getCreateUpdateInvoice(5),\r\n                this.invoices.getCreateUpdateInvoiceDetail()\r\n              ).then(() => {\r\n                console.log(\"success\");\r\n              })\r\n            })\r\n          },\r\n          (error) => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(5000, error, 'alert-toast');\r\n            });\r\n          }\r\n        );\r\n    });\r\n  }\r\n\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length) {\r\n      if (\r\n        bill_details_pmtype_7.findLastIndex(\r\n          (e) => e.total_bill_value <= this.invoices.getTotalATax()\r\n        ) != -1\r\n      )\r\n        this.product_gift_type7 = [\r\n          bill_details_pmtype_7[\r\n          bill_details_pmtype_7.findLastIndex(\r\n            (e) => e.total_bill_value <= this.invoices.getTotalATax()\r\n          )\r\n          ],\r\n        ];\r\n      else this.product_gift_type7 = [];\r\n    } else this.product_gift_type7 = [];\r\n  }\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n              product.lots,\r\n              'date_exp'\r\n            );\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach((element) => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n                  element.lots,\r\n                  'date_exp'\r\n                );\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n  * hàm này để get SubTotal mới của mảng đã lấy quà\r\n  * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n  */\r\n  getEarningpointPromotion() {\r\n    return new Promise((resolve) => {\r\n      for (let i of this.invoices.getInvoiceDetail()) {\r\n        if (i.pmtype) this.invoices.setBillHavePromotion(true);\r\n        if (i.products_gift) {\r\n          for (let product of i.products_gift) {\r\n            product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n          }\r\n        }\r\n        if (i.products) {\r\n          for (let product of i.products) {\r\n            product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n          }\r\n        }\r\n        if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n      }\r\n      this.invoices.setSubTotal();\r\n      resolve(true);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (\r\n      data.products_gift.filter((item) => item.choose).length ==\r\n      data.promotions_maximum\r\n    )\r\n      return true;\r\n    else return false;\r\n  }\r\n  showModalChangePriceType = false;\r\n  handleOk() {\r\n    this.showModalChangePriceType = false;\r\n    this.changePriceType(this.default_price_type);\r\n  }\r\n\r\n  handleCancel() {\r\n    this.showModalChangePriceType = false;\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find((item) => item._id == _id);\r\n    return lot.lot_number;\r\n  }\r\n  /**\r\n   *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n   * @event : boolean | null\r\n   */\r\n  changePriceType(event) {\r\n    if (event != null) {\r\n      // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.destroyBillDetails_withPromotions().then(() => {\r\n        if (this.invoices.getInvoiceDetail().length) {\r\n          // nếu có  length mơi update\r\n          let bill_details = this.invoices.getInvoiceDetail();\r\n          for (let i in bill_details) {\r\n          // Nếu là dịch vụ thời gian\r\n          if (bill_details[i].ptype === VhType.SERVICETIME) {\r\n            this.productService.updateServiceTimePrice(bill_details[i], event);\r\n            delete (bill_details[i] as any).serviceTimePrice;\r\n            // Cập nhật lại sản phẩm trong danh sách hóa đơn\r\n            bill_details[i] = { ...bill_details[i] };\r\n            continue;\r\n          }\r\n          \r\n            let price_update = 0;\r\n            let product = this.vhQueryCafe.getlocalDetailProduct(\r\n              bill_details[i].id_subproduct\r\n                ? bill_details[i].id_subproduct\r\n                : bill_details[i].id_product\r\n            );\r\n            product = {\r\n              ...product,\r\n              ...this.vhQueryCafe.getUnit_byRatio(\r\n                product.units,\r\n                bill_details[i].ratio\r\n              ),\r\n            };\r\n            if (event == 1) {\r\n              price_update = product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  top.price = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  ).units[0].price;\r\n                }\r\n              }\r\n            } else {\r\n              price_update = product.price2 ? product.price2 : product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  let topping = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  );\r\n                  top.price = topping.units[0].price2\r\n                    ? topping.units[0].price2\r\n                    : topping.units[0].price;\r\n                }\r\n              }\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.invoices.setSubTotal();\r\n        }\r\n        this.invoices.setPriceType(event);\r\n        this.vhQueryCafe\r\n          .updateBill_Billdetail(\r\n            this.invoices.getID(),\r\n            this.invoices.getCreateUpdateInvoice(5),\r\n            this.invoices.getCreateUpdateInvoiceDetail()\r\n          )\r\n          .then(() => {\r\n            console.log('success');\r\n          });\r\n      });\r\n    }\r\n    if (!this.gotten_gift_type7)\r\n      this.handlePromotionType7(this.bill_details_pmtype_7);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------------- HÓA ĐƠN ĐIỆN TỬ ---------------------------------------------------------- */\r\n\r\n  cqt_invoice_auto_sign: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_invoice_auto_sign\r\n  cqt_submit_invoice_immediately: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_submit_invoice_immediately\r\n\r\n  handleMinvoice(bill) {\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQueryCafe.getlocalBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp đã gửi lên cqt rồi thì khỏi\r\n      if(bill.cqt_status == 2 || bill.cqt_status == 3){\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                     \r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            console.log('error', error)\r\n            resolve(true)\r\n            return\r\n          })\r\n      }\r\n    })\r\n  }\r\n  \r\n}\r\n","<nz-layout *ngIf=\"invoices\">\r\n  <nz-content>\r\n    <div nz-row class=\"row\" style=\"background: #f7f7f7; margin: 0;\">\r\n      <div nz-col [nzSpan]=\"17\" class=\"col-left\" style=\"padding: 4px\">\r\n        <app-bill-detail1 [stamp]=\"stamp\" [invoices]=\"invoices\" [checkPrinterKitchen]=\"checkPrinterKitchen\"\r\n          [printer]=\"printer\" [printAllLabelEvent]=\"printAllLabel\" [printKitchenAll]=\"printKitchenAll\"\r\n          [tableInfo]=\"tableInfo\" (showModalChangePriceType)=\"showModalChangePriceType = true;\"\r\n          (checkPromotion)=\"getPromotions()\" (deletePromotion)=\"deletePromotions()\"\r\n          (updateInvoice)=\"updateInvoice($event)\"\r\n          (goBack)=\"invoices.getInvoiceDetail().length ? goBack() : deleteInvoice(true)\"\r\n          (showProductGift)=\"showProductGift = true\"\r\n          (showProductGiftType7)=\"showProductGiftType7 = true\"\r\n          [default_price_type]=\"default_price_type\">\r\n        </app-bill-detail1>\r\n      </div>\r\n      <div nz-col [nzSpan]=\"7\" class=\"col-right\"\r\n        [ngStyle]=\"{'grid-template-rows': checkPrinterKitchen && stamp ? 'calc(100% - 155px) 175px':'calc(100% - 115px) 115px'}\">\r\n        <div class=\"ant-table-body\">\r\n          <app-info-bill1 style=\"padding: 4px\" [invoices]=\"invoices\" [employeeID]=\"invoices.getIdEmployee()\"\r\n            [tableInfo]=\"tableInfo\" (updateInvoice)=\"updateInvoice($event)\">\r\n          </app-info-bill1>\r\n          <app-customer1 style=\"padding: 4px\" [invoices]=\"invoices\" [customerID]=\"invoices.getIdPartner()\"\r\n            (changeDebt)=\"debt = $event\" (updateInvoice)=\"updateInvoice($event)\"\r\n            [total_earning_points]=\"getTotalEarningPoint()\">\r\n          </app-customer1>\r\n          <div id=\"bill1\">\r\n            <app-bill1 style=\"padding: 4px\" [invoices]=\"invoices\" [debt]=\"debt\" [tax]=\"invoices.getTax()\"\r\n              [payment]=\"invoices.getPayment()\"\r\n              [paymentType]=\"invoices.getPaymentType() == 3 ? [invoices.getPaymentType(), invoices.getIdWallet()]: [invoices.getPaymentType()]\"\r\n              (updateInvoice)=\"updateInvoice($event)\" [customer_class]=\"customer_class\"\r\n              [product_gift_type7]=\"product_gift_type7\" \r\n              [gotten_gift_type7]=\"gotten_gift_type7\"\r\n              (showProductGiftType7)=\"showProductGiftType7 = true\"\r\n              >\r\n            </app-bill1>\r\n          </div>\r\n\r\n        </div>\r\n        <app-payment-button1 style=\"padding: 4px\" [stamp]=\"stamp\" [invoices]=\"invoices\" [statusInvoice]=\"statusInvoice\"\r\n          (printAllLabel)=\"printAllLabel = $event\" (printKitchenAll)=\"handleEmit_printKitchenAll($event)\"\r\n          (payment)=\"saveInvoice($event)\" (deleteInvoice)=\"deleteInvoice($event)\" (testPrint)=\"handlePrintTest()\">\r\n        </app-payment-button1>\r\n      </div>\r\n    </div>\r\n  </nz-content>\r\n</nz-layout>\r\n\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGift\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n  (nzOnCancel)=\"showProductGift = false\" (nzOnOk)=\"showProductGift = false;getEarningpointPromotion()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-table #basicTable [nzData]=\"invoices.getInvoiceDetail()\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n      <thead>\r\n        <tr>\r\n          <th>{{\"Product name\" | translate}}</th>\r\n          <th>{{'Unit' | translate}}</th>\r\n          <th>{{'Quantity' | translate}}</th>\r\n          <th>{{'Unit price' | translate}}</th>\r\n          <th>{{'Functions' | translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let item of basicTable.data\">\r\n          <ng-container *ngIf=\"item.pmtype == 6\">\r\n            <tr>\r\n              <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                item.promotions_maximum }})</td>\r\n            </tr>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                <span *ngFor=\"let data of item.products\">\r\n                  {{data.name}}({{data.unit ?data.unit: getUnit(data.units, data.ratio)}}) x{{data.quantity}} <br>\r\n                </span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <b>{{ 'List of gifted products' | translate }} :</b>\r\n              </td>\r\n            </tr>\r\n            <ng-container *ngFor=\"let data of item.products_gift\">\r\n              <tr>\r\n                <td>\r\n                  {{ data.name }}\r\n                  <ng-container *ngIf=\"data.lots\">\r\n                    <br> {{'Lot number' | translate}}:\r\n                    <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                      [(ngModel)]=\"data.id_lotproduct\">\r\n                      <nz-option *ngFor=\"let element of data.lots\"\r\n                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                        [nzValue]=\"element._id\"></nz-option>\r\n                    </nz-select>\r\n                  </ng-container>\r\n                </td>\r\n                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                <td>\r\n                  <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                  </nz-input-number>\r\n                </td>\r\n                <td>\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                  <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                </td>\r\n                <td>\r\n                  <nz-switch [(ngModel)]=\"data.choose\"\r\n                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.ptype == 5\">\r\n                <tr *ngFor=\"let combo of data.combos\">\r\n                  <td>- {{ combo.name }}\r\n                    <ng-container *ngIf=\"combo.lots\">\r\n                      <br> {{'Lot number' | translate}}:\r\n                      <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                        [(ngModel)]=\"combo.id_lotproduct\">\r\n                        <nz-option *ngFor=\"let element of combo.lots\"\r\n                          nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                          [nzValue]=\"element._id\"></nz-option>\r\n                      </nz-select>\r\n                    </ng-container>\r\n                  </td>\r\n\r\n                  <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                  <td>{{ combo.quantity }}</td>\r\n                  <td>\r\n                    {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                  </td>\r\n                  <td>\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </nz-table>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGiftType7\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n  (nzOnCancel)=\"showProductGiftType7 = false\" (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n      <thead>\r\n        <tr>\r\n          <th>{{\"Product name\" | translate}}</th>\r\n          <!-- <th>{{'Lot number' | translate}}</th> -->\r\n          <th>{{'Unit' | translate}}</th>\r\n          <th>{{'Quantity' | translate}}</th>\r\n          <th>{{'Unit price' | translate}}</th>\r\n          <th>{{'Functions' | translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let item of basicTable.data\">\r\n          <ng-container *ngIf=\"item.products_gift\">\r\n            <tr>\r\n              <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                item.promotions_maximum }})</td>\r\n            </tr>\r\n            <ng-container *ngFor=\"let data of item.products_gift\">\r\n              <tr>\r\n                <td>\r\n                  {{ data.name }}\r\n                  <ng-container *ngIf=\"data.lots\">\r\n                    <br> {{'Lot number' | translate}}:\r\n                    <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                      [(ngModel)]=\"data.id_lotproduct\">\r\n                      <nz-option *ngFor=\"let element of data.lots\"\r\n                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                        [nzValue]=\"element._id\"></nz-option>\r\n                    </nz-select>\r\n                  </ng-container>\r\n                </td>\r\n\r\n                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                <td>\r\n                  <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                  </nz-input-number>\r\n                </td>\r\n                <td>\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                  <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                </td>\r\n                <td>\r\n                  <nz-switch [(ngModel)]=\"data.choose\"\r\n                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.ptype == 5\">\r\n                <tr *ngFor=\"let combo of data.combos\">\r\n                  <td>- {{ combo.name }}\r\n                    <ng-container *ngIf=\"combo.lots\">\r\n                      <br> {{'Lot number' | translate}}:\r\n                      <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                        [(ngModel)]=\"combo.id_lotproduct\">\r\n                        <nz-option *ngFor=\"let element of combo.lots\"\r\n                          nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                          [nzValue]=\"element._id\"></nz-option>\r\n                      </nz-select>\r\n                    </ng-container>\r\n                  </td>\r\n\r\n                  <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                  <td>{{ combo.quantity }}</td>\r\n                  <td>\r\n                    {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                    <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                  </td>\r\n                  <td>\r\n                    <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </nz-table>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!-- chọn giá bán -->\r\n<nz-modal nzCentered=\"\" [(nzVisible)]=\"showModalChangePriceType\" nzTitle=\"{{'Choose selling price' | translate}}\"\r\n  (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\" nzCancelText=\"{{'Cancel' | translate}}\">\r\n  <ng-container *nzModalContent>\r\n    <nz-radio-group [(ngModel)]=\"default_price_type\">\r\n      <label nz-radio [nzValue]=\"1\">{{'Selling price' | translate}} 1</label>\r\n      <label nz-radio [nzValue]=\"2\">{{'Selling price' | translate}} 2</label>\r\n    </nz-radio-group>\r\n  </ng-container>\r\n</nz-modal>\r\n","import { Bill1Module } from './bill1/bill1.module';\r\n\r\nimport { Customer1Module } from './customer1/customer1.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { Cart1Component } from './cart1.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { BillDetail1Module } from '../cart1/bill-detail1/bill-detail1.module';\r\nimport { InfoBill1Module } from '../cart1/info-bill1/info-bill1.module';\r\nimport { PaymentButton1Module } from '../cart1/payment-button1/payment-button1.module';\r\nimport { CanLeavePage } from 'src/app/cafe/desktop/canLeavePage';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: Cart1Component,\r\n    canDeactivate: [CanLeavePage]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [Cart1Component],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes),\r\n    BillDetail1Module,\r\n    Customer1Module,\r\n    InfoBill1Module,\r\n    Bill1Module,\r\n    PaymentButton1Module\r\n  ]\r\n})\r\nexport class Cart1Module { }\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-customer-profile',\r\n  templateUrl: './customer-profile.component.html',\r\n  styleUrls: ['./customer-profile.component.scss']\r\n})\r\nexport class CustomerProfileComponent {\r\n  @Input(\"id\") customerID;\r\n  @Input(\"showDrawerCustomerInfo\") showDrawerCustomerInfo;\r\n  @Output(\"closeInfoCustomer\") closeInfoCustomer = new EventEmitter<any>();\r\n\r\n  customer: any = {}\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe\r\n  ) { }\r\n\r\n  ngOnChanges(change: SimpleChanges) {\r\n    // lấy dữ liệu khách hàng\r\n    this.initCustomer(change.customerID.currentValue)\r\n  }\r\n\r\n  initCustomer(id_customer: string) {\r\n    if (id_customer != 'id_retail') {\r\n      let customer = this.vhQueryCafe.getlocalCustomer(id_customer)\r\n      this.customer = customer ? customer : {}\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.closeInfoCustomer.emit(false)\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" [nzVisible]=\"showDrawerCustomerInfo\"\r\n  (nzOnClose)=\"goBack()\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Gender' | translate}}:</b><span> {{customer.gender}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CustomerProfileComponent } from './customer-profile.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CustomerProfileComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    CustomerProfileComponent\r\n  ]\r\n})\r\nexport class CustomerProfileModule { }\r\n","import { VhComponent } from './../../../../../components/vh-component/vh-component';\r\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhQueryCafe, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-customer1',\r\n  templateUrl: './customer1.component.html',\r\n  styleUrls: ['./customer1.component.scss']\r\n})\r\nexport class Customer1Component implements OnInit, OnChanges {\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices;\r\n  // ID khách hàng\r\n  @Input() customerID: string;\r\n  @Input() total_earning_points: any;\r\n  // Cập nhật hóa đơn khi có sự thay đổi\r\n  @Output() updateInvoice: EventEmitter<any> = new EventEmitter()\r\n  @Output() changeDebt: EventEmitter<boolean> = new EventEmitter() // trạng thái cho phép nợ bị thay đổi\r\n  customerList: any[] = []\r\n  customerSearchList: any[] = []\r\n  customerType: 1 | 2 | 3;\r\n  // Customer\r\n  customer: any = '';\r\n  // Customer\r\n  showDrawerAddCustomer: boolean = false\r\n  showDrawerCustomerInfo: boolean = false\r\n  showDrawerAddRetail: boolean = false\r\n  show_box_search = false;\r\n  point_validity = 0\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private vhAlgorithm: VhAlgorithm,\r\n    private nzModalService: NzModalService,\r\n    private lang: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initCustomer()\r\n  }\r\n\r\n  initCustomer() {\r\n    this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    if (this.customerID == \"id_retail\") {\r\n      this.customerType = 1\r\n    } else {\r\n      this.customerType = 2;\r\n      this.customer = this.vhQueryCafe.getlocalCustomer(this.customerID).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.customerID).phone;\r\n      setTimeout(() => {\r\n        this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.customerID);\r\n        console.log(this.point_validity);\r\n      }, 200);\r\n\r\n    }\r\n  }\r\n\r\n  ngOnChanges({ customerID }: SimpleChanges) {\r\n    if (customerID)\r\n      if (customerID.previousValue) {\r\n        if (customerID.previousValue != customerID.currentValue) {\r\n          if (this.customerID == \"id_retail\") {\r\n            this.customerType = 1\r\n          } else {\r\n            this.customerType = 2;\r\n            this.customer = this.vhQueryCafe.getlocalCustomer(this.customerID).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.customerID).phone;\r\n            setTimeout(() => {\r\n              this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.customerID);\r\n              console.log(this.point_validity);\r\n            }, 200);\r\n          }\r\n        }\r\n      }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  changeCustomerType(type) {\r\n    if (type == 1) {\r\n      this.customerID = \"id_retail\"\r\n      this.invoices.setIdPartner(\"id_retail\");\r\n      this.invoices.setTaxBuyerDisplayName('Người mua không lấy hoá đơn');\r\n      this.invoices.setTaxBuyerLegalName('');\r\n      this.invoices.setTaxBuyerTaxCode('');\r\n      this.invoices.setTaxBuyerAddressLine('');\r\n      this.invoices.setTaxBuyerEmail('');\r\n      this.updateInvoice.emit({ id_customer: 'id_retail', tax_buyerDisplayName: this.invoices.getTaxBuyerDisplayName(), tax_buyerLegalName: this.invoices.getTaxBuyerLegalName(), tax_buyerTaxCode: this.invoices.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.invoices.getTaxBuyerAddressLine(), tax_buyerEmail: this.invoices.getTaxBuyerEmail() })\r\n      this.changeDebt.emit(false)\r\n      if (this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill) {\r\n        this.vhComponent.alertMessageDesktop('success', this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\") + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill).name)\r\n        this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), 'id_retail').discount)\r\n      }\r\n      this.updateServiceTime();\r\n    } else if (type == 2 && this.invoices.getRetailName()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.lang.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.lang.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.clearRetailCustomer()\r\n          this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n          this.customerSearchList = this.customerList\r\n          setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n        },\r\n        nzOnCancel: () => { this.customerType = 1 },\r\n      })\r\n    }\r\n    else if (type == 2) {\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      this.customerSearchList = this.customerList\r\n      setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n    }\r\n  }\r\n  clearRetailCustomer() {\r\n    this.invoices.setRetailName('')\r\n    this.invoices.setRetailPhone('')\r\n    this.invoices.setRetailAddress('')\r\n  }\r\n  blurCustomer() {\r\n    setTimeout(() => {\r\n      if (this.customerID == \"id_retail\") this.customerType = 1;\r\n    }, 500)\r\n  }\r\n  changeCustomer(ev) {\r\n    this.invoices.setIdPartner(ev)\r\n    const localCustomer = this.vhQueryCafe.getlocalCustomer(ev);\r\n    this.invoices.setTaxBuyerDisplayName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerLegalName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerTaxCode(localCustomer?.taxcode || '');\r\n    this.invoices.setTaxBuyerAddressLine(localCustomer?.address || '');\r\n    this.invoices.setTaxBuyerEmail(localCustomer?.email || '');\r\n    this.updateInvoice.emit({ id_customer: ev, tax_buyerDisplayName: this.invoices.getTaxBuyerDisplayName(), tax_buyerLegalName: this.invoices.getTaxBuyerLegalName(), tax_buyerTaxCode: this.invoices.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.invoices.getTaxBuyerAddressLine(), tax_buyerEmail: this.invoices.getTaxBuyerEmail() })\r\n    let debt = this.vhQueryCafe.getlocalCustomer(ev).debt_enable\r\n    this.changeDebt.emit(debt ? debt : false)\r\n    this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(ev);\r\n    console.log(this.point_validity);\r\n    // if (this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill) {\r\n    //   this.vhComponent.alertMessageDesktop('success',this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\")+ \" \" + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill).name)\r\n    //   this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), ev).discount)\r\n    // }\r\n    // else this.invoices.setDiscount(0)\r\n    this.updateServiceTime();\r\n  }\r\n\r\n\r\n  // Customer process\r\n  openAddCustomer() {\r\n    if (this.customerType == 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCustomer = true\r\n  }\r\n  closeAddCustomer(ev) {\r\n    if (ev.reload) { // restart customer list\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      this.customerID = ev.value._id;\r\n      this.changeCustomer(ev.value._id)\r\n\r\n    }\r\n\r\n    this.showDrawerAddCustomer = false\r\n  }\r\n  openCustomerInfo() {\r\n    this.showDrawerCustomerInfo = true\r\n  }\r\n  closeCustomerInfo(ev) {\r\n    this.showDrawerCustomerInfo = false\r\n  }\r\n\r\n  searchCustomer(event) {\r\n    this.customerList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(event.toString().toLowerCase()), this.customerSearchList, ['name', 'phone'])\r\n  }\r\n  //Lưu thông tin khách lẻ\r\n  saveRetailInfo(result) {\r\n    if (result) {\r\n      this.invoices.setRetailName(result.retail_name)\r\n      this.invoices.setRetailPhone(result.retail_phone)\r\n      this.invoices.setRetailAddress(result.retail_address)\r\n      this.updateInvoice.emit({ id_customer: 'id_retail' })\r\n    }\r\n    this.showDrawerAddRetail = false\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div class=\"customer\">\r\n    <div class=\"customer-title\">\r\n        <div class=\"title\">\r\n            {{'Customer information' | translate}}\r\n        </div>\r\n        <div class=\"btn-add\">\r\n            <button nz-button nzType=\"text\" nzShape=\"circle\" (click)=\"openAddCustomer()\">\r\n                <i [nzType]=\"invoices.getRetailName() ? 'eye':'plus'\" nz-icon nzTheme=\"outline\"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class=\"customer-type\">\r\n        <nz-radio-group nzName=\"radiogroup\" [(ngModel)]=\"customerType\" (ngModelChange)=\"changeCustomerType($event)\" ks>\r\n            <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n            <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n            <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n        </nz-radio-group>\r\n    </div>\r\n    <ng-container *ngIf=\"customerType == 1 && invoices.getRetailName()\">\r\n        {{invoices.getRetailName()}} - {{invoices.getRetailPhone()}} {{invoices.getRetailAddress() ? '-':\r\n        ''}} {{invoices.getRetailAddress()}}\r\n    </ng-container>\r\n    <div class=\"customer-select\" *ngIf=\"customerType == 2\">\r\n\r\n        <ng-container>\r\n            <nz-select id=\"select-customer\" nzShowSearch nzPlaceHolder=\"{{'Select customer' | translate}}\"\r\n                [(ngModel)]=\"customerID\" (ngModelChange)=\"changeCustomer($event)\" (nzBlur)=\"blurCustomer()\">\r\n                <nz-option *ngFor=\"let item of customerList\" [nzValue]=\"item._id\"\r\n                    [nzLabel]=\"item.name + ' - ' + item.phone\">\r\n                </nz-option>\r\n            </nz-select>\r\n            <button nz-button nzType=\"text\" nzShape=\"circle\" (click)=\"openCustomerInfo()\">\r\n                <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n            </button>\r\n        </ng-container>\r\n    </div>\r\n    <div nz-col nzSpan=\"24\" *ngIf=\"customerType == 2\"\r\n        style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n        <span>\r\n            {{'Accumulated points' | translate}} : <b>{{point_validity ? point_validity : 0 }}</b>\r\n        </span>\r\n        <span>\r\n            {{'Plus' | translate}} : <b>{{total_earning_points}}</b>\r\n        </span>\r\n    </div>\r\n    <div *ngIf=\"customerType == 3\" style=\"display: flex; justify-content: space-between;\">\r\n        <app-search-customer [id_customer]=\"customerID\"\r\n            (closeAndReceiveCustomer)=\"changeCustomer($event)\"></app-search-customer>\r\n        <i (click)=\"openCustomerInfo()\"\r\n            [ngClass]=\"customerID !='id_retail' ? 'active' : 'deactive'\"\r\n            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n    </div>\r\n</div>\r\n\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCustomer\" [showDrawerAddCustomer]=\"showDrawerAddCustomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\">\r\n</app-add-customer>\r\n<!-- --------------------customer info---------------------- -->\r\n<app-customer-profile *ngIf=\"showDrawerCustomerInfo\" [showDrawerCustomerInfo]=\"showDrawerCustomerInfo\"\r\n    (closeInfoCustomer)=\"closeCustomerInfo($event)\" [id]=\"customerID\">\r\n</app-customer-profile>\r\n\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n    [retail_name]=\"invoices.getRetailName()\" [retail_phone]=\"invoices.getRetailPhone()\"\r\n    [retail_address]=\"invoices.getRetailAddress()\" (closeAddCustomer)=\"saveRetailInfo($event)\"></app-retail-info>","import { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { AddCustomerModule } from './../../advange/booking/components/add-customer/add-customer.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Customer1Component } from './customer1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CustomerProfileModule } from '../customer-profile/customer-profile.module';\r\nimport { RetailInfoComponent } from '../retail-info/retail-info.component';\r\nimport { SearchModule } from 'src/app/cafe/components/search/search.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Customer1Component, RetailInfoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    AddCustomerModule,\r\n    CustomerProfileModule,\r\n    KeyboardModule,\r\n    ScrollingModule,\r\n    ReactiveFormsModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    Customer1Component\r\n  ]\r\n})\r\nexport class Customer1Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAuth } from 'ionic-vhframeworks';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\n\r\n@Component({\r\n  selector: 'app-info-bill1',\r\n  templateUrl: './info-bill1.component.html',\r\n  styleUrls: ['./info-bill1.component.scss']\r\n})\r\nexport class InfoBill1Component implements OnInit {\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices;\r\n  // ID nhân viên đang order\r\n  @Input() employeeID: string;\r\n  // thông tin bàn đang order\r\n  @Input() tableInfo: any = {};\r\n  // cập nhật hóa đơn khi có sự thay đổi\r\n  @Output() updateInvoice: EventEmitter<any> = new EventEmitter()\r\n\r\n  employeeList: any[] = []\r\n  constructor(\r\n    public vhAuth: VhAuth\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initData()\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  initData() {\r\n    // nhân viên\r\n    this.employeeList = this.vhAuth.getlocalEmployees();\r\n  }\r\n\r\n  changeEmployee(ev) {\r\n    this.invoices.setIdEmployee(ev)\r\n    this.updateInvoice.emit({ id_employee: ev })\r\n  }\r\n}\r\n","<div class=\"info-bill\">\r\n    <div class=\"select\">\r\n        <div class=\" select-title\">\r\n            {{'Invoice code' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            {{invoices.getBillCode()}}\r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\"select-title\">\r\n            {{'Salesman' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            <nz-select nzBorderless nzShowSearch nzPlaceHolder=\"{{'Select employee' | translate}}\"\r\n                [(ngModel)]=\"employeeID\" (ngModelChange)=\"changeEmployee($event)\">\r\n                <nz-option *ngFor=\"let item of employeeList; trackBy:myTrackByFunction\" [nzValue]=\"item._id\"\r\n                    [nzLabel]=\"item.name\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\"select-title\">\r\n            {{'Sales date' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            {{invoices.getDate() | date : 'dd/MM/yyyy HH:mm'}}\r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\" select-title\">\r\n            {{'Table' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            {{tableInfo}}\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { InfoBill1Component } from './info-bill1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    InfoBill1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    InfoBill1Component\r\n  ]\r\n})\r\nexport class InfoBill1Module { }\r\n","import { VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Component, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-payment-button1',\r\n  templateUrl: './payment-button1.component.html',\r\n  styleUrls: ['./payment-button1.component.scss']\r\n})\r\nexport class PaymentButton1Component {\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F1\", \"F2\", \"Delete\"].includes(event.key)) {\r\n      switch (event.key) {\r\n        case \"F1\": document.getElementById(\"order-and-print\").click(); break;\r\n        case \"F2\": document.getElementById(\"order\").click(); break;\r\n        case \"Delete\": document.getElementById(\"delete-invoice\").click(); break;\r\n      }\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices;\r\n  // biểu hiện trang thái - 1/ đang cập nhật hóa đơn - 2/ đang xóa hóa đơn\r\n  @Input() statusInvoice: any = {};\r\n  @Input() stamp: any; // thông tin tem in truyền từ component card\r\n  // tiến hành thanh toán \r\n  @Output() payment: EventEmitter<\"print\" | \"notPrint\"> = new EventEmitter();\r\n  // tiến hành xóa hóa đơn\r\n  @Output() deleteInvoice: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() testPrint: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() printAllLabel: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() printKitchenAll: EventEmitter<boolean> = new EventEmitter();\r\n\r\n  checkPrinter: boolean = false;\r\n  checkPrinterKitchen: boolean = false;\r\n  /** thuộc tính máy in */\r\n  printer: any;\r\n  colSpan = '12';\r\n  openBillStatus: boolean = false;\r\n\r\n\r\n\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth: VhAuth,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnChanges(): void {\r\n    // kiểm tra máy in\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : null\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable\r\n    }\r\n    let printer_kitchen = this.vhQueryCafe.getLocalPrintPage('page_desktop_kitchen')\r\n    this.checkPrinterKitchen =  printer_kitchen ? printer_kitchen.print_sizes[printer_kitchen.print_sizes.findIndex(e => e._id == printer_kitchen.print_size_default)].enable : null\r\n    if (this.checkPrinterKitchen && this.stamp) this.colSpan = '24'\r\n    if (!this.checkPrinterKitchen && !this.stamp) this.colSpan = '24';\r\n    if ((!this.checkPrinterKitchen && this.stamp) || (this.checkPrinterKitchen && !this.stamp)) this.colSpan = '12' \r\n  }\r\n\r\n  saveInvoice(print: \"print\" | \"notPrint\" = \"notPrint\") {\r\n    this.payment.emit(print)\r\n  }\r\n\r\n  delete() {\r\n    this.deleteInvoice.emit(true)\r\n  }\r\n\r\n  handlePrintAllLabel() {\r\n    this.printAllLabel.emit(true)\r\n    setTimeout(() => {\r\n      this.printAllLabel.emit(false)\r\n    }, 1000);\r\n  }\r\n\r\n  handleCancel() {\r\n    this.openBillStatus = false\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div nz-row>\r\n    <div style=\"padding: 8px 0\" class=\"payment-btn\" nz-col nzSpan=\"12\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button class=\"order\" (click)=\"testPrint.emit(true)\">\r\n            {{\"Print out for customer\" | translate}}\r\n        </button> \r\n    </div>\r\n    <div *ngIf=\"stamp\" style=\"padding: 8px 0\" class=\"payment-btn\" nz-col nzSpan=\"12\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button class=\"order\"\r\n            (click)=\"handlePrintAllLabel()\">\r\n            {{'Print all labels' | translate}}\r\n        </button>\r\n    </div>\r\n    <div *ngIf=\"checkPrinterKitchen\" class=\"payment-btn\" style=\"margin-top: 8px;\"  nz-col nzSpan=\"12\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button id=\"order\" class=\"order\"\r\n            (click)=\"printKitchenAll.emit(true)\">\r\n            {{'Print all dishes to kitchen' | translate}}\r\n        </button>\r\n    </div>\r\n    <div style=\"padding: 8px 0\" class=\"payment-btn\" nz-col nzSpan=\"12\">\r\n        <button nz-button [nzLoading]=\"statusInvoice.deleting\" id=\"delete-invoice\" class=\"delete\" nz-popconfirm\r\n            nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"delete()\" nzPopconfirmPlacement=\"top\">\r\n            {{\"Delete\" | translate}} (DEL)\r\n        </button>\r\n    </div>\r\n    <div class=\"payment-btn\" style=\"margin-top: 8px;\" nz-col [nzSpan]=\"colSpan\">\r\n        <!-- CÓ bật xác nhận thanh toán -->\r\n        <!-- <button *ngIf=\"vhAuth.localStorageGET('show_confirm_pay')\" \r\n            [disabled]=\"!invoices.getInvoiceDetail().length\"\r\n            [nzLoading]=\"statusInvoice.updating\" \r\n            id=\"order-and-print\" class=\"order-and-print\" nz-button nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n            nzPopconfirmTitle=\"{{'Pay & Print' | translate}}?\"\r\n            (nzOnConfirm)=\"saveInvoice('print')\">\r\n            {{'Pay & Print' | translate}} (F1)\r\n        </button> -->\r\n        <!-- KHÔNG bật xác nhận thanh toán -->\r\n        <button nz-button id=\"order-and-print\" class=\"order-and-print\"\r\n            [disabled]=\"!invoices.getInvoiceDetail().length\" \r\n            (click)=\"updateServiceTime(); openBillStatus = true\"\r\n            [nzLoading]=\"statusInvoice.updating\">\r\n            {{'Pay & Print' | translate}} (F1)\r\n        </button>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------- MODAL HIỂN THỊ THÔNG TIN THANH TOÁN ----------------------------------------------- -->\r\n<nz-modal \r\n    [nzMaskClosable]=\"false\" \r\n    [nzFooter]=\"modalFooterPrintKitchen\"\r\n    [(nzVisible)]=\"openBillStatus\"\r\n    (nzOnCancel)=\"handleCancel()\" \r\n    (nzOnOk)=\"saveInvoice()\"\r\n    [nzTitle]=\"'Payment information' | translate\" >\r\n    <ng-container *nzModalContent>\r\n        <app-bill1 \r\n            [invoices]=\"invoices\" \r\n            [debt]=\"debt\" \r\n            [tax]=\"invoices.getTax()\"\r\n            [customer_class]=\"customer_class\"\r\n            [paymentType]=\"invoices.getPaymentType() == 3 ? [invoices.getPaymentType(), invoices.getIdWallet()] : [invoices.getPaymentType()]\"\r\n            [isPreventEdit]=\"true\">\r\n        </app-bill1>\r\n    </ng-container>\r\n    <ng-template #modalFooterPrintKitchen>\r\n        <!-- <button nz-button class=\"nz-hover-border\" id=\"order-complete\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white); width: 100%; height: 44px; font-size: 0.9rem;\"\r\n            [nzLoading]=\"statusInvoice['payment']\" class=\"nz-hover-border-green\" \r\n            (click)=\"saveInvoice()\">\r\n            {{'Complete' | translate}} (Enter)</button> -->\r\n\r\n        <!-- CÓ bật xác nhận thanh toán -->\r\n        <button *ngIf=\"vhAuth.localStorageGET('show_confirm_pay')\" \r\n            [disabled]=\"!invoices.getInvoiceDetail().length\"\r\n            [nzLoading]=\"statusInvoice['payment']\"\r\n            id=\"order-and-print\" class=\"order-and-print\" nz-button nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n            nzPopconfirmTitle=\"{{'Complete' | translate}}?\"\r\n            (nzOnConfirm)=\"saveInvoice('print')\">\r\n            {{'Complete' | translate}}\r\n        </button>\r\n        <!-- KHÔNG bật xác nhận thanh toán -->\r\n        <button *ngIf=\"!vhAuth.localStorageGET('show_confirm_pay')\" \r\n            [disabled]=\"!invoices.getInvoiceDetail().length\" \r\n            (click)=\"saveInvoice('print')\"\r\n            [nzLoading]=\"statusInvoice['payment']\"\r\n            nz-button id=\"order-and-print\" class=\"order-and-print\">\r\n            {{'Complete' | translate}}\r\n        </button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PaymentButton1Component } from './payment-button1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Bill1Module } from '../bill1/bill1.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PaymentButton1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    Bill1Module,\r\n  ],\r\n  exports: [\r\n    PaymentButton1Component\r\n  ]\r\n})\r\nexport class PaymentButton1Module { }\r\n","import { AfterViewInit, Component, Input, NgZone, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-product-wishlist1',\r\n  templateUrl: './product-wishlist1.component.html',\r\n  styleUrls: ['./product-wishlist1.component.scss']\r\n})\r\nexport class ProductWishlist1Component implements OnInit {\r\n  // các chương trình khuyến mãi hiện có\r\n   \r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output('productChoice') productChoice: EventEmitter<any> = new EventEmitter()\r\n  indexPage: number = 1;\r\n  wishList: any[] = []\r\n  choiceFood: any = {};\r\n  showOptions: boolean = false\r\n  id_branch: string = this.vhQueryCafe.getDefaultBranch()._id\r\n  auto_hidden_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_hidden_lot\r\n  auto_select_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  @Input() default_price_type: any;\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    let dataProd: any[] = this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(product => product.selling && !product.delete_hidden).slice(0,12).map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, item.units.find(u => u.default).ratio)\r\n      return { ...item, ...unit }\r\n    })\r\n\r\n    this.wishList = dataProd\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  changeSub(value) {\r\n    let subChoice: any = this.choiceFood.subs.find(item => item._id == value)\r\n    if (subChoice) {\r\n      this.choiceFood['id_subproduct'] = value\r\n      this.choiceFood['price'] = subChoice.price\r\n      this.choiceFood['price_origin'] = subChoice.price_origin\r\n    }\r\n  }\r\n\r\n  /** Chọn sản phẩm \r\n   * @param value dữ liệu sản phẩm được chọn\r\n  */\r\n  selectFoods(value) {\r\n    this.choiceFood = {\r\n      toppings: value.toppings, quantity: 1, note: \"\", price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, name: value.name, ptype: value.type, properties: value.properties, _id: value._id,\r\n      price: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, ratio: 1, units: value.units\r\n    }\r\n    if (value.lot_number) this.choiceFood['lot_number'] = value.lot_number;\r\n    if (value.lots) this.choiceFood['lots'] = value.lots;\r\n    if (value.id_lotproduct) this.choiceFood['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) this.choiceFood.id_subproduct = value.id_subproduct\r\n    // Lưu trữ các properties đã chon\r\n    if (this.choiceFood.properties) {\r\n      // sao chép mảng giá trị chọn\r\n      this.choiceFood.properties.forEach(element => {\r\n        element.active = true;\r\n        element.selectedValue = element.value[0]\r\n      });\r\n    }\r\n    // Kiểm tra topping\r\n    if (this.choiceFood.toppings) {\r\n      for (let topping of this.choiceFood.toppings) {\r\n        let data = this.vhQueryCafe.getlocalProduct(topping.id_product)\r\n        topping.quantity = 0\r\n        topping.name = data.name\r\n        topping.price_origin = this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price \r\n        topping.price = this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price \r\n        topping.ratio = 1\r\n        topping.ptype = 4\r\n        topping._id = topping.id_product\r\n      }\r\n    }\r\n    if (this.choiceFood.type == 3 && this.choiceFood.lots) {\r\n      this.choiceFood.lots = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots, 'date_exp')\r\n      if (this.auto_hidden_lot) this.choiceFood.lots = this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime())\r\n      // if (this.auto_select_lot && this.choiceFood.lots.length) {\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime()), 'date_exp')\r\n\r\n        if (min_date_exp.length) {\r\n          this.choiceFood['id_lotproduct'] = min_date_exp[0]._id;\r\n          this.choiceFood['lot_number'] = min_date_exp[0].lot_number;\r\n        }\r\n      // }\r\n    } \r\n    if (this.choiceFood) {\r\n      this.showOptions = true;\r\n    }\r\n    console.log(this.choiceFood);\r\n    \r\n  }\r\n\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    if(this.choiceFood.toppings) this.choiceFood.toppings = this.choiceFood.toppings.filter(item => item.quantity)\r\n    if (this.choiceFood.quantity) {\r\n       \r\n      this.productChoice.emit(this.choiceFood)\r\n    }\r\n    console.log(this.choiceFood);\r\n    \r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n  }\r\n  changeLot(e) {\r\n    this.choiceFood.lot_number = this.choiceFood.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n}\r\n","<div class=\"wish-list\">\r\n    <div class=\"wish-list-header\">\r\n        <div class=\"wish-list-header-title\">{{'Dishes/beverage' | translate}}</div>\r\n        <div class=\"wish-list-header-page\">\r\n            <nz-pagination [(nzPageIndex)]=\"indexPage\" [nzPageSize]=\"5\" [nzTotal]=\"wishList.length\" nzSimple>\r\n            </nz-pagination>\r\n        </div>\r\n    </div>\r\n    <div class=\"wish-list-area\">\r\n        <div class=\"wish-list-area-item\"\r\n            *ngFor=\"let prod of wishList | slice:5 * (indexPage - 1):5 * (indexPage - 1) + 5; trackBy: myTrackByFunction\">\r\n            <nz-card class=\"wish-list-area-item-card\" nzHoverable (click)=\"selectFoods(prod)\">\r\n                <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\"  style=\"width: 130px; height: 130px; object-fit: contain\"/>\r\n                <div class=\"wish-list-area-item-card-title\">{{prod.name}}</div>\r\n                <div class=\"item-code\">{{prod.item_code}}</div>\r\n                <!-- <div class=\"wish-list-area-item-card-title\" *ngIf=\"default_price_type == 1 || !prod.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(prod.price)}}</div>\r\n                <div class=\"wish-list-area-item-card-title\" *ngIf=\"default_price_type == 2 && prod.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(prod.price2)}}</div> -->\r\n            </nz-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- ------------select food---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceFood.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseFood()\" nzWidth=\"40vw\">\r\n    <ng-container *nzModalContent>\r\n        <div class=\"ant-table-body\" style=\" max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n            <div *ngIf=\"choiceFood.manysize\" nz-row class=\"option-modal\">\r\n\r\n                <div nz-col nzSpan=\"24\" class=\"items-food\">\r\n                    <div nz-row style=\"width: 100%;\">\r\n                        <div class=\"align-center\" nz-col nzSpan=\"7\">\r\n                            {{vhAlgorithm.vhcurrencyunit(choiceFood.price)}}\r\n                            <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                                style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n                        </div>\r\n\r\n                        <div nz-col nzSpan=\"4\">\r\n                            <nz-select style=\"width: 90%;\" [(ngModel)]=\"choiceFood.ratio\"\r\n                                (ngModelChange)=\"changeUnit($event,choiceFood)\">\r\n                                <nz-option *ngFor=\"let i of choiceFood.units\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\">\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col\r\n                            nzSpan=\"6\">\r\n                            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity <= 0\"\r\n                                (click)=\"choiceFood.quantity = choiceFood.quantity - 1\"\r\n                                [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 0}\">\r\n                                <i nz-icon nzType=\"minus\"></i>\r\n                            </button>\r\n                            <div class=\"align-center text-align-center\">\r\n                                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                    [(ngModel)]=\"choiceFood.quantity\">\r\n                                </nz-input-number>\r\n                            </div>\r\n                            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity > 9999999998\"\r\n                                (click)=\"choiceFood.quantity = choiceFood.quantity + 1\"\r\n                                [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n                                <i nz-icon nzType=\"plus\"></i>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n                            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n                        </div>\r\n                        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                            <nz-radio-group [(ngModel)]=\"choiceFood.id_subproduct\" (ngModelChange)=\"changeSub($event)\">\r\n                                <label nz-radio\r\n                                    *ngFor=\"let sub of choiceFood.subs ? choiceFood.subs : []; trackBy:myTrackByFunction\"\r\n                                    [nzValue]=\"sub._id\">\r\n                                    {{sub.name}} - {{vhAlgorithm.vhcurrencyunit(sub.price)}}\r\n                                    <s *ngIf=\"sub.price < sub.price_origin\">{{vhAlgorithm.vhcurrencyunit(sub.price_origin)\r\n                                        }}</s>\r\n                                </label>\r\n                            </nz-radio-group>\r\n                        </div>\r\n                        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                            <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\"\r\n                                [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                                placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"!choiceFood.subs.length\">{{\"Not property yet\" | translate}}</div>\r\n            </div>\r\n            <div *ngIf=\"!choiceFood.manysize\" nz-row class=\"option-modal\">\r\n                <div nz-row style=\"width: 100%;\">\r\n                    <div class=\"align-center\" nz-col nzSpan=\"7\">\r\n                        {{vhAlgorithm.vhcurrencyunit(choiceFood.price)}}\r\n                        <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n                    </div>\r\n                    <div style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"10\">\r\n                        <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity <= 0\"\r\n                            (click)=\"choiceFood.quantity = choiceFood.quantity - 1\"\r\n                            [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 0}\">\r\n                            <i nz-icon nzType=\"minus\"></i>\r\n                        </button>\r\n                        <div class=\"align-center text-align-center\">\r\n                            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                [(ngModel)]=\"choiceFood.quantity\">\r\n                            </nz-input-number>\r\n                        </div>\r\n                        <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity > 9999999998\"\r\n                            (click)=\"choiceFood.quantity = choiceFood.quantity + 1\"\r\n                            [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n                            <i nz-icon nzType=\"plus\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <!-- <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                        <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                            [(ngModel)]=\"choiceFood.quantity\">\r\n                        </nz-input-number>\r\n                    </div> -->\r\n                    <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n                        {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n                    </div>\r\n                    <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                        <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\"\r\n                            [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                            placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- Thuoc tinh -->\r\n            <div *ngIf=\"choiceFood.properties && choiceFood.properties.length\" nz-row class=\"option-modal\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n                    {{'Properties' | translate}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                    <nz-collapse nzGhost>\r\n                        <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n                            [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n                            <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                                <label nz-radio *ngFor=\"let value of properties.value\"\r\n                                    [nzValue]=\"value\">{{value}}</label>\r\n                            </nz-radio-group>\r\n                        </nz-collapse-panel>\r\n                    </nz-collapse>\r\n                </div>\r\n            </div>\r\n            <!-- Mon phu -->\r\n            <div *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\" nz-row class=\"option-modal\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n                    {{'Side dishes' | translate}}\r\n                </div>\r\n                <div nz-row class=\"option-modal\">\r\n\r\n                    <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n                        <div nz-row style=\"width: 100%;\">\r\n                            <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                                {{item.name |translate}} <br>\r\n                                <!-- {{vhAlgorithm.vhcurrencyunit(item.price)}} -->\r\n                                <input [ngClass]=\"'topping-' + item._id\" maxlength=\"15\"\r\n                                    [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\" nz-input\r\n                                    placeholder=\"{{'Price' | translate}}\" />\r\n                            </div>\r\n                            <div class=\"align-end text-align-center price-edit\"\r\n                                style=\"display: flex;justify-content: space-evenly;align-items: flex-end;\" nz-col\r\n                                nzSpan=\"10\">\r\n                                <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                                    (click)=\"item.quantity = item.quantity - 1\"\r\n                                    [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 1}\">\r\n                                    <i nz-icon nzType=\"minus\"></i>\r\n                                </button>\r\n                                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0\" [nzStep]=\"1\"\r\n                                    [(ngModel)]=\"item.quantity\">\r\n                                </nz-input-number>\r\n                                <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                                    (click)=\"item.quantity = item.quantity + 1\"\r\n                                    [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                                    <i nz-icon nzType=\"plus\"></i>\r\n                                </button>\r\n                            </div>\r\n                            <div class=\" text-align-right\"\r\n                                style=\"display: flex;align-items: flex-end;justify-content: flex-end;\" nz-col\r\n                                nzSpan=\"7\">\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n                            </div>\r\n\r\n                            <!-- <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                                {{item.name |translate}} <br>\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price)}} <s *ngIf=\"item.price_origin > item.price\"\r\n                                    style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(item.price_origin)}}</s>\r\n                            </div>\r\n                            <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                    [(ngModel)]=\"item.quantity\">\r\n                                </nz-input-number>\r\n                            </div>\r\n                            <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n                            </div> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- chọn lô - hsd -->\r\n            <div *ngIf=\"choiceFood.lots\">\r\n                Chọn lô, hạn sử dụng của nguyên liệu\r\n                <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n                    style=\"width:100%;padding: 8px 0;\">\r\n                    <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n                        <div nz-col nzSpan=\"24\">\r\n                            <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                                <div nz-row>\r\n                                    <div nz-col nzSpan=\"6\">\r\n                                        {{item.lot_number}}\r\n                                    </div>\r\n\r\n                                    <div nz-col nzSpan=\"6\">\r\n                                        NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                                    </div>\r\n                                    <div nz-col nzSpan=\"6\">\r\n                                        HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                                    </div>\r\n                                    <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                                        {{'Stock' | translate}}:\r\n                                        <span\r\n                                            style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                                            | number : '1.0-2'}}</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </label>\r\n                        </div>\r\n\r\n                    </div>\r\n                </nz-radio-group>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n\r\n    <ng-template #modalFooterSelectFood>\r\n        <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">\r\n            {{\"Cancel\" | translate}}\r\n        </button>\r\n        <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseFood()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ProductWishlist1Component } from './product-wishlist1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductWishlist1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    ProductWishlist1Component\r\n  ]\r\n})\r\nexport class ProductWishlist1Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-retail-info',\r\n  templateUrl: './retail-info.component.html',\r\n  styleUrls: ['./retail-info.component.scss']\r\n})\r\nexport class RetailInfoComponent implements OnInit {\r\n  @Input(\"showDrawerAddRetail\") showDrawerAddRetail: boolean = false;\r\n  @Input(\"retail_name\") retail_name: string = '';\r\n  @Input(\"retail_phone\") retail_phone: string = '';\r\n  @Input(\"retail_address\") retail_address: string = '';\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n\r\n  constructor() { }\r\n  ngOnInit(): void {\r\n    this.initaddRetailForm()\r\n  }\r\n  addRetailForm: FormGroup;\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? this.addRetailForm.value : false);\r\n  }\r\n  initaddRetailForm() {\r\n    this.addRetailForm = new FormGroup({\r\n      retail_name: new FormControl(this.retail_name, Validators.compose([Validators.required])),\r\n      retail_phone: new FormControl(this.retail_phone, Validators.compose([Validators.required, Validators.minLength(6)])),\r\n      retail_address: new FormControl(this.retail_address),\r\n    });\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer retail\" | translate}}'\r\n    [nzVisible]=\"showDrawerAddRetail\" [nzFooter]=\"footerAddRetail\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"addRetailForm\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_name\" nz-input\r\n                                placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n                            <ng-template #combineTplName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Retail name is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                        <nz-input-group>\r\n                            <input class=\"phone\" formControlName=\"retail_phone\" type=\"tel\" nz-input\r\n                                placeholder=\"{{'Enter customer phone' | translate}}\" minlength=\"6\" required />\r\n                            <ng-template #combineTplPhone let-control>\r\n                                <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Address' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_address\" nz-input\r\n                                placeholder=\"{{'Enter address' | translate}}\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddRetail>\r\n        <div class=\"footerAddRetail\" style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n            <button [disabled]=\"addRetailForm.invalid\" [ngStyle]=\"{opacity: addRetailForm.invalid ? 0.5 : 1}\" nz-button\r\n                (click)=\"close(true)\">{{\"Add\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, OnInit, Input, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search-combo',\r\n  templateUrl: './search-combo.component.html',\r\n  styleUrls: ['./search-combo.component.scss'],\r\n})\r\nexport class SearchComboComponent implements OnInit {\r\n  @Input('showDrawerCombosList') showDrawerCombosList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output('closeSearchCombosList') closeSearchCombosList: EventEmitter<any> =\r\n    new EventEmitter();\r\n  public combosList: any[] = [];\r\n  choiceCombos: any = {};\r\n  public searchList: any[] = [];\r\n  id_branch = this.vhQueryCafe.getDefaultBranch()._id;\r\n\r\n  auto_hidden_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_hidden_lot;\r\n  auto_select_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_select_lot;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth : VhAuth\r\n  ) {}\r\n  ngOnInit(): void {\r\n    let dispatcher_done =\r\n      !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable;\r\n    this.combosList = this.vhQueryCafe\r\n      .getlocalDetailProducts(5)\r\n      .filter((item) => !item.delete_hidden)\r\n      .map((e) => {\r\n        this.handleLotsOfCombo(e.combos.filter((lot) => lot.lots));\r\n        return {\r\n          ...e,\r\n          dispatcher_done: dispatcher_done,\r\n          ...e.units[0],\r\n          combos: e.combos.map((pro) => {\r\n            return {\r\n              ...pro,\r\n              unit: this.getUnit(pro.units, pro.ratio),\r\n              ptype: pro.type,\r\n            };\r\n          }),\r\n        };\r\n      });\r\n    this.searchList = [...this.combosList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById('inputSearchCombos').focus();\r\n  }\r\n\r\n  handleLotsOfCombo(combos) {\r\n    combos = this.vhAlgorithm.sortDatebyASC(combos, 'date_exp');\r\n    for (let i of combos) {\r\n      if (i.lots.length) {\r\n        if (this.auto_hidden_lot)\r\n          i.lots = i.lots.filter(\r\n            (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n          );\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(i.lots, 'date_exp');\r\n        // if (this.auto_select_lot)\r\n        i['id_lotproduct'] = min_date_exp[0]._id;\r\n      }\r\n    }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchCombosList.emit(false);\r\n  }\r\n\r\n  tempVal: string = '';\r\n  /** Tìm kiếm combo\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchCombos(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.combosList, [\r\n        'name',\r\n      ]);\r\n    else this.searchList = this.combosList;\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  /**\r\n   * Chọn combo để xử lý\r\n   * @param value dữ liệu combo được chọn\r\n   */\r\n  selectCombos(value) {\r\n    this.choiceCombos = {\r\n      ...value,\r\n      quantity: 1,\r\n      note: '',\r\n      price_origin: value.price,\r\n      price: value.price,\r\n      ptype: 5,\r\n    };\r\n\r\n    if (this.choiceCombos) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n          '.price-' + value._id\r\n        );\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  editPrice: any = {};\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue();\r\n    this.choiceCombos.price = price ? parseFloat(price) : 0;\r\n    this.choiceCombos.quantity =\r\n      this.choiceCombos.quantity > 0 ? this.choiceCombos.quantity : 1;\r\n  }\r\n  chooseCombos() {\r\n    this.showOptions = false;\r\n    if (this.choiceCombos['quantity']) {\r\n      this.choiceCombos['combos'] = this.choiceCombos['combos'].map((item) => {\r\n        return {\r\n          ...item,\r\n          id_category: this.vhQueryCafe.getlocalProduct(item.id_product)\r\n            .id_category,\r\n        };\r\n      });\r\n\r\n      this.closeSearchCombosList.emit(this.choiceCombos);\r\n    }\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  changeLot(e, item) {\r\n    item.lot_number = item.lots.find((find) => find._id == e).lot_number;\r\n  }\r\n\r\n  getUnit(units, ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n\r\n  /** Tăng số lượng sản phẩm */\r\n  increaseQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity + 1;\r\n  }\r\n  /** Giảm số lượng sản phẩm */\r\n  reduceQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity - 1;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerCombosList\" (nzOnClose)=\"goBack()\"\r\n  nzTitle=\"{{'Search for combos' | translate}}\">\r\n  <div *nzDrawerContent id=\"search-combos-popup\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\" class=\"search\">\r\n        <input id=\"inputSearchCombos\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n          (ngModelChange)=\"searchCombos($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          placeholder=\"{{ 'Search for side dishes name, barcode' | translate}}\" />\r\n      </div>\r\n    </div>\r\n    <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n          <nz-list nzItemLayout=\"horizontal\">\r\n            <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"combos-item\"\r\n              (click)=\"selectCombos(item)\">\r\n              <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                <nz-list-item-meta-title>\r\n                  <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                    {{item.name}}\r\n                  </span>\r\n                </nz-list-item-meta-title>\r\n                <nz-list-item-meta-description>\r\n                  <span *ngFor=\"let combo of item.combos\"\r\n                    style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                    {{combo.quantity}}x {{combo.name}},\r\n                  </span>\r\n                </nz-list-item-meta-description>\r\n              </nz-list-item-meta>\r\n            </nz-list-item>\r\n\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n        <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n        </nz-list-empty>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select combos---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceCombos.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseCombos()\">\r\n  <ng-container *nzModalContent>\r\n    <div *ngIf=\"!choiceCombos.manysize\" nz-row class=\"option-modal\">\r\n      <div nz-row style=\"width: 100%;\">\r\n        <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n          <input [ngClass]=\"'price-' + choiceCombos._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceCombos)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n            [value]=\"vhAlgorithm.vhcurrencyunit(choiceCombos.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n          <s *ngIf=\"choiceCombos.price_origin > choiceCombos.price\"\r\n            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceCombos.price_origin)}}</s>\r\n        </div>\r\n        <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n          style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceCombos.quantity <= 1\"\r\n            (click)=\"reduceQuantity(choiceCombos)\"\r\n            [ngClass]=\"{'btn-activate': choiceCombos.quantity > 0, 'btn-disabled': choiceCombos.quantity <= 1}\">\r\n            <i nz-icon nzType=\"minus\"></i>\r\n          </button>\r\n          <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceCombos)\"\r\n            [(ngModel)]=\"choiceCombos.quantity\">\r\n          </nz-input-number>\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceCombos.quantity > 9999999998\"\r\n            (click)=\"increaseQuantity(choiceCombos)\"\r\n            [ngClass]=\"{'btn-activate': choiceCombos.quantity <= 9999999998, 'btn-disabled': choiceCombos.quantity > 9999999998}\">\r\n            <i nz-icon nzType=\"plus\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n          {{vhAlgorithm.vhcurrencyunit(choiceCombos.price * choiceCombos.quantity)}}\r\n        </div>\r\n        <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n          <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceCombos.note\" [ngModelOptions]=\"{standalone: true}\"\r\n            nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n        </div>\r\n      </div>\r\n      <ng-container *ngFor=\"let combo of choiceCombos.combos\">\r\n        <!-- chọn lô - hsd -->\r\n      <div *ngIf=\"combo.lots\">\r\n        <b>{{'Select lot and expiry date for combo components' | translate}}</b><br>\r\n        <span>{{combo.name}} ({{combo.unit}})</span>\r\n        <nz-radio-group [(ngModel)]=\"combo.id_lotproduct\" (ngModelChange)=\"changeLot($event, combo)\"\r\n          style=\"width:100%;padding: 8px 0;\">\r\n          <div nz-row *ngFor=\"let lot of combo.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n              <label class=\"radio-purchase\" nz-radio [nzValue]=\"lot._id\" style=\"width:100%;\">\r\n                <div nz-row>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    {{lot.lot_number}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    NSX: {{lot.date_mfg | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    HSD: {{lot.date_exp | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                    {{'Stock' | translate}}:\r\n                    <span style=\" color: var(--ion-color-vh-orange)\">{{lot.quantity_branch[id_branch]/combo.ratio\r\n                      | number : '1.0-2'}}</span>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </nz-radio-group>\r\n      </div>\r\n    </ng-container>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterSelectFood>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseCombos()\">{{\"Add\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchComboComponent } from './search-combo.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchComboComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchComboComponent\r\n  ]\r\n})\r\nexport class SearchComboModule { }","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe ,VhAuth} from 'ionic-vhframeworks';\r\n@Component({\r\n  selector: 'app-search-product',\r\n  templateUrl: './search-product.component.html',\r\n  styleUrls: ['./search-product.component.scss'],\r\n})\r\nexport class SearchProductComponent implements OnInit {\r\n  @Input('showDrawerProductList') showDrawerProductList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output('closeSearchProductList') closeSearchProductList: EventEmitter<any> =\r\n    new EventEmitter();\r\n  /** Danh sách sản phẩm */\r\n  public foodList: any[] = this.vhQueryCafe\r\n    .getlocalDetailProducts()\r\n    .filter((item) => item.type == 1 || item.type == 3)\r\n    .filter((item) => !item.delete_hidden || item.manysize)\r\n    .map((e) => {\r\n      return { ...e, ...e.units[e.units.findIndex(ele => ele.default)], ptype: e.type };\r\n    });\r\n  /** Danh sách sản phẩm đã tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Sản phẩm được chọn */\r\n  public choiceFood: any = {};\r\n  /** Danh sách menu */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }];\r\n\r\n  indexTab: number = 0;\r\n  showOptions: boolean = false;\r\n  tempVal: string = '';\r\n  id_branch: string = this.vhQueryCafe.getDefaultBranch()._id;\r\n  auto_hidden_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_hidden_lot;\r\n  auto_select_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_select_lot;\r\n  @Input() default_price_type: number;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n        public vhAuth : VhAuth\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.getMenu();\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById('inputSearchDishes').focus();\r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n  goBack() {\r\n    this.closeSearchProductList.emit(false);\r\n  }\r\n\r\n  getMenu() {\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1 || item.type == 3) \r\n    \r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1 || item.type == 3) \r\n    for( let cate of this.list_menu){\r\n      if(this.foodList.find(e => e.id_category == cate._id)) cate.valid = true;\r\n      else cate.valid = false;\r\n    }\r\n    this.list_menu = this.vhAlgorithm.sortVietnamesebyASC(this.list_menu.filter(e => e.valid),'name') \r\n    this.list_menu.forEach(item => this.listTabs.push(item));\r\n    this.searchList = [...this.foodList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  /**\r\n   * Tìm kiếm sản phẩm\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchFood(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.foodList, [\r\n        'name',\r\n        'barcode',\r\n        'item_code'\r\n      ]);\r\n    else this.searchList = [...this.foodList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n\r\n  chooseProduct(item) {\r\n    this.closeSearchProductList.emit(item);\r\n  }\r\n\r\n  changeSub(value) {\r\n    let subChoice: any = this.choiceFood.subs.find((item) => item._id == value);\r\n    if (subChoice) {\r\n      this.choiceFood['id_subproduct'] = value;\r\n      this.choiceFood['price'] = subChoice.price;\r\n      this.choiceFood['price_origin'] = subChoice.price_origin;\r\n    }\r\n  }\r\n  /**\r\n   * Chọn sản phẩm để xử lý\r\n   * @param value dữ liệu sản phẩm được chọn\r\n   */\r\n  selectFoods(value) {\r\n    console.log(value);\r\n    \r\n    let dispatcher_done =\r\n      !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable;\r\n    this.choiceFood = {\r\n      dispatcher_done: dispatcher_done,\r\n      toppings: JSON.parse(JSON.stringify(value.toppings || [])),\r\n      quantity: 1,\r\n      note: '',\r\n      price_origin:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      name: value.name,\r\n      ptype: value.type,\r\n      properties: value.properties,\r\n      _id: value._id,\r\n      price:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      ratio: 1,\r\n      units: value.units,\r\n    };\r\n    if (value.lot_number) this.choiceFood['lot_number'] = value.lot_number;\r\n    if (value.lots) this.choiceFood['lots'] = value.lots;\r\n    if (value.id_lotproduct)\r\n      this.choiceFood['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct)\r\n      this.choiceFood.id_subproduct = value.id_subproduct;\r\n    // Lưu trữ các properties đã chon\r\n    if (this.choiceFood.properties) {\r\n      // sao chép mảng giá trị chọn\r\n      this.choiceFood.properties.forEach((element) => {\r\n        element.active = true;\r\n        element.selectedValue = element.value[0];\r\n      });\r\n    }\r\n    // Kiểm tra topping\r\n    if (this.choiceFood.toppings) {\r\n      for (let topping of this.choiceFood.toppings) {\r\n        let data = this.vhQueryCafe.getlocalProduct(topping.id_product);\r\n        console.log(data);\r\n        \r\n        topping.quantity = topping.quantity;\r\n        topping.name = data.name;\r\n        topping.price_origin =\r\n          this.default_price_type == 1\r\n            ? topping.units[0].price\r\n            : topping.units[0].price2\r\n            ? topping.units[0].price2\r\n            : topping.units[0].price;\r\n        topping.price = \r\n        this.default_price_type == 1\r\n        ? topping.units[0].price\r\n        : topping.units[0].price2\r\n        ? topping.units[0].price2\r\n        : topping.units[0].price;\r\n        topping.ratio = 1;\r\n        topping.ptype = 4;\r\n        topping._id = topping.id_product;\r\n      }\r\n    }\r\n    if (this.choiceFood.type == 3 && this.choiceFood.lots) {\r\n      this.choiceFood.lots = this.vhAlgorithm.sortDatebyASC(\r\n        this.choiceFood.lots,\r\n        'date_exp'\r\n      );\r\n      if (this.auto_hidden_lot)\r\n        this.choiceFood.lots = this.choiceFood.lots.filter(\r\n          (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n        );\r\n\r\n      let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n        this.choiceFood.lots.filter(\r\n          (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n        ),\r\n        'date_exp'\r\n      );\r\n\r\n      if (min_date_exp.length) {\r\n        this.choiceFood['id_lotproduct'] = min_date_exp[0]._id;\r\n        this.choiceFood['lot_number'] = min_date_exp[0].lot_number;\r\n      }\r\n    }\r\n\r\n    if (this.choiceFood) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n          '.price-' + value._id\r\n        );\r\n        // if (this.choiceFood.toppings) {\r\n        //   this.choiceFood.toppings.forEach(topping => {\r\n        //     this.editPrice['topping-' + topping._id] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping._id)\r\n        //   });\r\n        // }\r\n      }, 200);\r\n    }\r\n  }\r\n  editPrice: any = {};\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    if (!item.ptype) {\r\n      let price = this.editPrice['price-' + item._id].getRawValue();\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity =\r\n        this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1;\r\n    } else {\r\n      let price = this.editPrice['topping-' + item._id].getRawValue();\r\n      let index = this.choiceFood.toppings.findIndex(\r\n        (element) => element._id == item._id\r\n      );\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity =\r\n          this.choiceFood.toppings[index].quantity > 0\r\n            ? this.choiceFood.toppings[index].quantity\r\n            : 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    // if (this.choiceFood.toppings)\r\n    //   this.choiceFood.toppings = this.choiceFood.toppings.filter(\r\n    //     (item) => item.quantity\r\n    //   );\r\n    if (this.choiceFood.quantity) {\r\n      this.closeSearchProductList.emit(this.choiceFood);\r\n    }\r\n    console.log(this.choiceFood);\r\n    \r\n  }\r\n  /** Chọn danh mục\r\n   * @param event index danh mục được chọn\r\n   */\r\n  changeTypeGood(event) {\r\n    this.indexTab = event;\r\n    let products = this.vhQueryCafe\r\n      .getlocalDetailProducts()\r\n      .filter((item) => item.type == 1 || item.type == 3)\r\n      .filter((item) => !item.delete_hidden)\r\n      .map((item) => {\r\n        let unit = this.vhQueryCafe.getUnit_byRatio(\r\n          item.units,\r\n          item.units.find((u) => u.default).ratio\r\n        );\r\n        return { ...item, ...unit };\r\n      });\r\n    if (event == 0) {\r\n      this.foodList = products.filter((item) => !item.delete_hidden);\r\n    } else {\r\n      this.foodList = products.filter(\r\n        (item) => item.id_category == this.listTabs[event]._id\r\n      );\r\n    }\r\n    this.searchFood(this.tempVal);\r\n  }\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price);\r\n      }\r\n    } else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price2);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price2);\r\n      }\r\n    }\r\n  }\r\n  changeLot(e) {\r\n    this.choiceFood.lot_number = this.choiceFood.lots.find(\r\n      (item) => item._id == e\r\n    ).lot_number;\r\n  }\r\n\r\n  /** Tăng số lượng sản phẩm */\r\n  increaseQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity + 1;\r\n  }\r\n  /** Giảm số lượng sản phẩm */\r\n  reduceQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity - 1;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerProductList\" (nzOnClose)=\"goBack()\"\r\n  nzTitle=\"{{'Search dishes/ beverage' | translate}}\">\r\n  <div *nzDrawerContent id=\"search-product-popup\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\" class=\"search\">\r\n        <input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\" (ngModelChange)=\"searchFood($event)\"\r\n          [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          placeholder=\"{{ 'Search for product name, barcode, item code' | translate}}\" />\r\n      </div>\r\n    </div>\r\n    <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n          <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n        </nz-tabset>\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n          <nz-list nzItemLayout=\"horizontal\">\r\n            <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"product-item\"\r\n              (click)=\"selectFoods(item)\">\r\n              <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                <nz-list-item-meta-title>\r\n                  <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                    {{item.name}}\r\n                  </span>\r\n                  <div *ngIf=\"item.item_code\">{{'Item code' | translate}}:\r\n                    <span style=\"color: var(--ion-color-vh-green)\">{{item.item_code}}</span>\r\n                  </div>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\"\r\n                    *ngIf=\"default_price_type == 1 || !item.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(item.price)}}</div>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\"\r\n                    *ngIf=\"default_price_type == 2 && item.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(item.price2)}}</div>\r\n                  <span *ngIf=\"item.type== 3\" style=\"font-size: 0.75rem;display: block;\">\r\n                    {{'Stock'|translate}}:\r\n                    <span style=\"color: var(--ion-color-vh-orange)\">\r\n                      {{item.quantity_branch[id_branch]}}\r\n                      {{item.unit}}</span>\r\n                  </span>\r\n                </nz-list-item-meta-title>\r\n              </nz-list-item-meta>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n            </nz-list-empty>\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-drawer>\r\n\r\n\r\n<!-- ------------select food---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceFood.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseFood()\" nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body\" style=\" max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <div *ngIf=\"choiceFood\" nz-row class=\"option-modal\">\r\n        <div nz-row style=\"width: 100%;\">\r\n          <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n            <input [ngClass]=\"'price-' + choiceFood._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceFood)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n            <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n              style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n          </div>\r\n\r\n          <div nz-col nzSpan=\"4\">\r\n            <nz-select style=\"width: 90%;\" [(ngModel)]=\"choiceFood.ratio\" (ngModelChange)=\"changeUnit($event,choiceFood)\">\r\n              <nz-option *ngFor=\"let i of choiceFood.units\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\"></nz-option>\r\n            </nz-select>\r\n          </div>\r\n          <div class=\"text-align-center price-edit\" nz-col nzSpan=\"6\"\r\n            style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity <= 1\"\r\n              (click)=\"reduceQuantity(choiceFood)\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 1}\">\r\n              <i nz-icon nzType=\"minus\"></i>\r\n            </button>\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceFood)\"\r\n              [(ngModel)]=\"choiceFood.quantity\">\r\n            </nz-input-number>\r\n            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity > 9999999998\"\r\n              (click)=\"increaseQuantity(choiceFood)\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n              <i nz-icon nzType=\"plus\"></i>\r\n            </button>\r\n          </div>\r\n          <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n            <nz-radio-group [(ngModel)]=\"choiceFood.id_subproduct\" (ngModelChange)=\"changeSub($event)\">\r\n              <label nz-radio *ngFor=\"let sub of choiceFood.subs ? choiceFood.subs : []; trackBy:myTrackByFunction\"\r\n                [nzValue]=\"sub._id\">\r\n                {{sub.name}} - {{vhAlgorithm.vhcurrencyunit(sub.price)}}\r\n                <s *ngIf=\"sub.price < sub.price_origin\">{{vhAlgorithm.vhcurrencyunit(sub.price_origin) }}</s>\r\n              </label>\r\n            </nz-radio-group>\r\n          </div>\r\n          <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n            <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\" [ngModelOptions]=\"{standalone: true}\"\r\n              nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Thuoc tinh -->\r\n      <div *ngIf=\"choiceFood.properties && choiceFood.properties.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Properties' | translate}}\r\n        </div>\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n          <nz-collapse nzGhost>\r\n            <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n              [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n              <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n              </nz-radio-group>\r\n            </nz-collapse-panel>\r\n          </nz-collapse>\r\n        </div>\r\n      </div>\r\n      <!-- Mon phu -->\r\n      <div *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Side dishes' | translate}}\r\n        </div>\r\n        <div nz-row class=\"option-modal\">\r\n          <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n            <div nz-row style=\"width: 100%;\">\r\n              <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                {{item.name |translate}} <br>\r\n                <!-- {{vhAlgorithm.vhcurrencyunit(item.price)}} -->\r\n                <input [ngClass]=\"'topping-' + item._id\" maxlength=\"15\" [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\"\r\n                  (blur)=\"updatePrice(item)\" nz-input placeholder=\"{{'Price' | translate}}\"   />\r\n              </div>\r\n              <div class=\"align-end text-align-center price-edit\"\r\n                style=\"display: flex;justify-content: space-evenly;align-items: flex-end;\" nz-col nzSpan=\"10\">\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                  (click)=\"item.quantity = item.quantity - 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 0}\">\r\n                  <i nz-icon nzType=\"minus\"></i>\r\n                </button>\r\n                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\">\r\n                </nz-input-number>\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                  (click)=\"item.quantity = item.quantity + 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                  <i nz-icon nzType=\"plus\"></i>\r\n                </button>\r\n              </div>\r\n              <div class=\" text-align-right\" style=\"display: flex;align-items: flex-end;justify-content: flex-end;\"\r\n                nz-col nzSpan=\"7\">\r\n                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- chọn lô - hsd -->\r\n      <div *ngIf=\"choiceFood.lots\">\r\n        Chọn lô, hạn sử dụng của nguyên liệu\r\n        <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n          style=\"width:100%;padding: 8px 0;\">\r\n          <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n              <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                <div nz-row>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    {{item.lot_number}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                    {{'Stock' | translate}}:\r\n                    <span style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                      | number : '1.0-2'}}</span>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </nz-radio-group>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterSelectFood>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">\r\n      {{\"Cancel\" | translate}}\r\n    </button>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseFood()\">{{\"Add\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchProductComponent } from './search-product.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchProductComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchProductComponent\r\n  ]\r\n})\r\nexport class SearchProductModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-search-service',\r\n  templateUrl: './search-service.component.html',\r\n  styleUrls: ['./search-service.component.scss'],\r\n})\r\nexport class SearchServiceComponent implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input('promotions') promotions: any[] = [];\r\n  @Input('showDrawerServiceList') showDrawerServiceList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output('closeSearchServiceList') closeSearchServiceList: EventEmitter<any> = new EventEmitter();\r\n  /**Danh sách dịch vụ */\r\n  public serviceList: any[] = this.vhQueryCafe\r\n    .getlocalDetailProducts(VhType.SERVICE_SERVICETIME)\r\n    .filter((item) => !item.delete_hidden)\r\n    .map((e) => {\r\n      return { ...e, ...e.units[0] };\r\n    });\r\n  /**Dịch vụ được chọn */\r\n  choiceService: any = {};\r\n  /** Danh sách dịch vụ đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Danh mục dịch vụ */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }];\r\n  indexTab: number = 0;\r\n  @Input() default_price_type: number;\r\n\r\n  public VhType = VhType;\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth : VhAuth\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys(VhType.SERVICE);\r\n    this.list_menu.forEach((item) => this.listTabs.push(item));\r\n    this.searchList = [...this.serviceList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById('inputSearchService').focus();\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchServiceList.emit(false);\r\n  }\r\n  tempVal: string = '';\r\n  /**\r\n   * Tìm kiếm dịch vụ\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchService(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.serviceList, [\r\n        'name',\r\n      ]);\r\n    else this.searchList = this.serviceList;\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  /**\r\n   * Chọn dịch vụ để xử lý\r\n   * @param value dữ liệu dịch vụ được chọn\r\n   */\r\n  selectService(value) {\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n    this.choiceService = {\r\n      dispatcher_done: dispatcher_done,\r\n      ...value,\r\n      quantity: 1,\r\n      note: '',\r\n      price_origin:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      price:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      ptype: value.type,\r\n    };\r\n\r\n    if (this.choiceService) {\r\n      if (value.type !== VhType.SERVICETIME) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral('.price-' + value._id);\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.closeSearchServiceList.emit(this.choiceService);\r\n      }\r\n    }\r\n  }\r\n\r\n  editPrice: any = {};\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue();\r\n    this.choiceService.price = price ? parseFloat(price) : 0;\r\n    this.choiceService.quantity =\r\n      this.choiceService.quantity > 0 ? this.choiceService.quantity : 1;\r\n  }\r\n  chooseService() {\r\n    this.showOptions = false;\r\n    if (this.choiceService['quantity']) {\r\n      this.closeSearchServiceList.emit(this.choiceService);\r\n    }\r\n  }\r\n\r\n  changeTypeGood(event) {\r\n    this.indexTab = event;\r\n    let products = this.vhQueryCafe\r\n      .getlocalDetailProducts(VhType.SERVICE_SERVICETIME)\r\n      .filter((item) => !item.delete_hidden)\r\n      .map((e) => {\r\n        return { ...e, ...e.units[0] };\r\n      });\r\n    if (event == 0) {\r\n      this.serviceList = products;\r\n    } else {\r\n      this.serviceList = products.filter(\r\n        (item) => item.id_category == this.listTabs[event]._id\r\n      );\r\n    }\r\n    this.searchService(this.tempVal);\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  /** Tăng số lượng sản phẩm */\r\n  increaseQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity + 1;\r\n  }\r\n  /** Giảm số lượng sản phẩm */\r\n  reduceQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity - 1;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerServiceList\" (nzOnClose)=\"goBack()\"\r\n  [nzTitle]=\"'Search for service' | translate\">\r\n  <div *nzDrawerContent id=\"search-service-popup\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\" class=\"search\">\r\n        <input id=\"inputSearchService\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n          (ngModelChange)=\"searchService($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          [placeholder]=\"'Search for service name, barcode' | translate\" />\r\n      </div>\r\n    </div>\r\n    <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n          <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n        </nz-tabset>\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n          <nz-list nzItemLayout=\"horizontal\">\r\n            <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"service-item\"\r\n              (click)=\"selectService(item)\">\r\n              <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                <nz-list-item-meta-title>\r\n                  <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                    {{item.name}}\r\n                  </span>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\" *ngIf=\"default_price_type == 1 || !item.price2\">\r\n                    <ng-container *ngIf=\"item.type === VhType.SERVICETIME\">{{vhAlgorithm.vhcurrencyunit(item.price)}} / {{item.units[0].unit | translate}}</ng-container>\r\n                    <ng-container *ngIf=\"item.type !== VhType.SERVICETIME\">{{vhAlgorithm.vhcurrencyunit(item.price)}}</ng-container>\r\n                  </div>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\" *ngIf=\"default_price_type == 2 && item.price2\">\r\n                    <ng-container *ngIf=\"item.type === VhType.SERVICETIME\">{{vhAlgorithm.vhcurrencyunit(item.price2)}} / {{item.units[0].unit | translate}}</ng-container>\r\n                    <ng-container *ngIf=\"item.type !== VhType.SERVICETIME\">{{vhAlgorithm.vhcurrencyunit(item.price2)}}</ng-container>\r\n                  </div>\r\n                </nz-list-item-meta-title>\r\n              </nz-list-item-meta>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n            </nz-list-empty>\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select service---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceService.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseService()\">\r\n  <ng-container *nzModalContent>\r\n    <div *ngIf=\"!choiceService.manysize\" nz-row class=\"option-modal\">\r\n      <div nz-row style=\"width: 100%;\">\r\n        <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n          <input [ngClass]=\"'price-' + choiceService._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceService)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n            [value]=\"vhAlgorithm.vhcurrencyunit(choiceService.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n          <s *ngIf=\"choiceService.price_origin > choiceService.price\"\r\n            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceService.price_origin)}}</s>\r\n        </div>\r\n        <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n          style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceService.quantity <= 1\"\r\n            (click)=\"reduceQuantity(choiceService)\"\r\n            [ngClass]=\"{'btn-activate': choiceService.quantity > 0, 'btn-disabled': choiceService.quantity <= 1}\">\r\n            <i nz-icon nzType=\"minus\"></i>\r\n          </button>\r\n          <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceService)\"\r\n            [(ngModel)]=\"choiceService.quantity\">\r\n          </nz-input-number>\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceService.quantity > 9999999998\"\r\n            (click)=\"increaseQuantity(choiceService)\"\r\n            [ngClass]=\"{'btn-activate': choiceService.quantity <= 9999999998, 'btn-disabled': choiceService.quantity > 9999999998}\">\r\n            <i nz-icon nzType=\"plus\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n          {{vhAlgorithm.vhcurrencyunit(choiceService.price * choiceService.quantity)}}\r\n        </div>\r\n        <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n          <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceService.note\" [ngModelOptions]=\"{standalone: true}\"\r\n            nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterSelectFood>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseService()\">{{\"Add\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchServiceComponent } from './search-service.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchServiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchServiceComponent\r\n  ]\r\n})\r\nexport class SearchServiceModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search-topping',\r\n  templateUrl: './search-topping.component.html',\r\n  styleUrls: ['./search-topping.component.scss'],\r\n})\r\nexport class SearchToppingComponent implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input('promotions') promotions: any[] = [];\r\n  @Input('showDrawerSideDishesList') showDrawerSideDishesList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output('closeSearchSideDishesList')\r\n  closeSearchSideDishesList: EventEmitter<any> = new EventEmitter();\r\n  /**Danh sách topping */\r\n  public sideDishesList: any[] = this.vhQueryCafe\r\n    .getlocalProducts()\r\n    .filter((item) => !item.delete_hidden && item.type == 4)\r\n    .map((e) => {\r\n      return { ...e, ...e.units[0] };\r\n    });\r\n  /**Topping được chọn để xử lý */\r\n  choiceSideDishes: any = {};\r\n  /**Danh sách topping đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  @Input() default_price_type: number;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth : VhAuth\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.searchList = [...this.sideDishesList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById('inputSearchSideDishes').focus();\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchSideDishesList.emit(false);\r\n  }\r\n  tempVal: string = '';\r\n  /**\r\n   * Tìm kiếm topping\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchSideDishes(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(\r\n        tempVal,\r\n        this.sideDishesList,\r\n        ['name']\r\n      );\r\n    else this.searchList = this.sideDishesList;\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Chọn topping để xử lý\r\n   * @param value dữ liệu topping được chọn\r\n   */\r\n  selectSideDishes(value) {\r\n    let dispatcher_done =\r\n      !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable;\r\n    this.choiceSideDishes = {\r\n      dispatcher_done: dispatcher_done,\r\n      ...value,\r\n      quantity: 1,\r\n      note: '',\r\n      price_origin:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      price:\r\n        this.default_price_type == 1\r\n          ? value.price\r\n          : value.price2\r\n          ? value.price2\r\n          : value.price,\r\n      ptype: 4,\r\n    };\r\n\r\n    if (this.choiceSideDishes) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n          '.price-' + value._id\r\n        );\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  editPrice: any = {};\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue();\r\n    this.choiceSideDishes.price = price ? parseFloat(price) : 0;\r\n    this.choiceSideDishes.quantity =\r\n      this.choiceSideDishes.quantity > 0 ? this.choiceSideDishes.quantity : 1;\r\n  }\r\n  chooseSideDishes() {\r\n    this.showOptions = false;\r\n    if (this.choiceSideDishes['quantity']) {\r\n      this.closeSearchSideDishesList.emit(this.choiceSideDishes);\r\n    }\r\n  }\r\n\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  /** Tăng số lượng sản phẩm */\r\n  increaseQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity + 1;\r\n  }\r\n  /** Giảm số lượng sản phẩm */\r\n  reduceQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity - 1;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerSideDishesList\" (nzOnClose)=\"goBack()\"\r\n  nzTitle=\"{{'Search for side dishes' | translate}}\">\r\n  <div *nzDrawerContent id=\"search-side-dishes-popup\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\" class=\"search\">\r\n        <input id=\"inputSearchSideDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n          (ngModelChange)=\"searchSideDishes($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          placeholder=\"{{ 'Search for side dishes name, barcode' | translate}}\" />\r\n      </div>\r\n    </div>\r\n    <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n          <nz-list nzItemLayout=\"horizontal\">\r\n            <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"side-dishes-item\"\r\n              (click)=\"selectSideDishes(item)\">\r\n              <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                <nz-list-item-meta-title>\r\n                  <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                    {{item.name}}\r\n                  </span>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\"\r\n                    *ngIf=\"default_price_type == 1 || !item.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(item.price)}}</div>\r\n                  <div style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\"\r\n                    *ngIf=\"default_price_type == 2 && item.price2\">\r\n                    {{vhAlgorithm.vhcurrencyunit(item.price2)}}</div>\r\n                </nz-list-item-meta-title>\r\n              </nz-list-item-meta>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n            </nz-list-empty>\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select sideDishes---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceSideDishes.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseSideDishes()\">\r\n  <ng-container *nzModalContent>\r\n    <div *ngIf=\"!choiceSideDishes.manysize\" nz-row class=\"option-modal\">\r\n      <div nz-row style=\"width: 100%;\">\r\n        <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n          <input [ngClass]=\"'price-' + choiceSideDishes._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceSideDishes)\"\r\n            [value]=\"vhAlgorithm.vhcurrencyunit(choiceSideDishes.price)\" nz-input\r\n            placeholder=\"{{'Price' | translate}}\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\" />\r\n          <s *ngIf=\"choiceSideDishes.price_origin > choiceSideDishes.price\"\r\n            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price_origin)}}</s>\r\n        </div>\r\n        <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n          style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceSideDishes.quantity <= 1\"\r\n            (click)=\"reduceQuantity(choiceSideDishes)\"\r\n            [ngClass]=\"{'btn-activate': choiceSideDishes.quantity > 0, 'btn-disabled': choiceSideDishes.quantity <= 1}\">\r\n            <i nz-icon nzType=\"minus\"></i>\r\n          </button>\r\n          <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceSideDishes)\"\r\n            [(ngModel)]=\"choiceSideDishes.quantity\">\r\n          </nz-input-number>\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceSideDishes.quantity > 9999999998\"\r\n            (click)=\"increaseQuantity(choiceSideDishes)\"\r\n            [ngClass]=\"{'btn-activate': choiceSideDishes.quantity <= 9999999998, 'btn-disabled': choiceSideDishes.quantity > 9999999998}\">\r\n            <i nz-icon nzType=\"plus\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n          {{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price * choiceSideDishes.quantity)}}\r\n        </div>\r\n        <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n          <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceSideDishes.note\"\r\n            [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterSelectFood>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseSideDishes()\">{{\"Add\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchToppingComponent } from './search-topping.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchToppingComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchToppingComponent\r\n  ]\r\n})\r\nexport class SearchToppingModule { }\r\n"],"names":["EventEmitter","PrintJs","VhType","i0","ctx_r22","ctx_r33","ctx_r35","ctx_r46","ctx_r37","ctx_r77","ctx_r69","ctx_r99","ctx_r113","ctx_r28","_r27","ctx_r4","ctx_r5","ctx_r6","item_r166","item_r179","ctx_r177","_r172","ctx_r11","item_r200","ctx_r198","properties_r222","item_r230","ctx_r213","_r214","ctx_r15","BillDetail1Component","constructor","vhAlgorithm","vhQueryCafe","vhAuth","lang","vhComponent","platform","nzModalService","productService","getLocalAppSettingNameBranch","display_promotion_selling_price","status","title","value","localStorageGET","warning_lot_expried","dispatchers_enable","open_dialog_print_kitchen_bill_detail","getDefaultBranch","_id","getlocalDispatcherZones","length","find","e","default","getlocalPrinters","management_product_price2","Date","keyEvent","event","includes","key","closeSearchProduct","closeSearchService","closeSearchSideDishes","closeSearchCombos","openSearchService","openSearchProduct","openSearchSideDishes","openSearchCombos","preventDefault","stopPropagation","ngOnInit","console","log","default_price_type","ngOnChanges","printAllLabelEvent","printKitchenAll","invoices","currentValue","getInvoiceDetail","isContainServiceTime","endTime","_a","forEach","item","index","ptype","SERVICETIME","is_paused","newItem","time_end_order","serviceTimePrice","calculateServiceTimePrice","getPriceType","price","total_price","price_origin","Object","setSubTotal","printAllLabel","printAllDishToKitchen","checkPrinterKitchen","enable","detail","dataKitchen","name","quantity","note","max_quantity","ratio","units","properties","toppings","map","combos","printKitchen","push","showPrintKitchenAgain","printLabel","i","updateServiceTimePrice","data","JSON","parse","stringify","filter","topping","list_selected_dishs","arr","element","myTrackByFunction","myTrackByNameFunction","showDrawerProductList","ev","createBillDetail","showDrawerServiceList","showDrawerSideDishesList","showDrawerCombosList","productValue","getCreateItemDetail","addInvoiceDetail","id_product","time_start_order","bill_detail","getCreateItemCleanDetail","createBill_Detail_ptype_5","then","vhbill_detail","choiceFood","updateInvoice","emit","printKitchenOrDispatcher","error","createBill_Detail","show_modal_dispatcher","changeLot","lot_number","lots","handleDispatcher","id_dispatcherzone","dispatcher_done","updateBill_Detail","openPrintKitchen","translate","handlePrint","is","printElectron","printDesktop","handleCancelPrint","html","document","getElementById","innerHTML","electron","ipcRenderer","send","deviceName","printer_kitchens","id_printer_kitchen","printer_name","on","alertMessageDesktop","printable","type","scanStyles","style","changeQuantityPrintKitchen","max","current_value","parseFloat","updateNote","saveEdit","showDrawerEdit","findIndex","updateBill_Detail_btype_5","bool","res","editFood","setTimeout","editPrice","vhnumeral","updatePrice","getRawValue","removeFood","food","checkLocalMyPermissionName","deleting","subComboName","deleteBill_Detail_ptype_5","removeInvoiceDetail","deleteBill_Detail","showToast","getSubCombo","subName","getUnit","getUnit_byRatio","unit","searchLot","searchList","changeAlias","list_search_lot","getLotNumber","lot","openModalChooseLot","show_modal_select_lots","handleChooseLot","lot_select","id_lotproduct","getTime","date_exp","confirm","nzTitle","nzOnOk","nzOnCancel","handleCancelChooseLot","handleOpenEditUsedTime","tempStartTime","tempEndTime","isShowModalEditUsedTime","handleUpdateUsedTime","currentTime","pauseTime","isPause","undefined","selectors","hostBindings","ctx","_r9","_r13","_r17","SalesA4Component","SalesA5Component","SalesK80Col4Component","SalesK80Col3Component","SalesK57Col3Component","VhOrderInvoices","ctx_r9","ctx_r0","data_r29","ctx_r27","data_r58","ctx_r57","Cart1Component","router","languageService","cdRef","mess","plaform","vhQuery","vhEinvoice","billService","updating","cqt_invoice_auto_sign","cqt_submit_invoice_immediately","dataTrans","getCurrentNavigation","extras","state","dataRestore","initInvoice","connectDisplayLEDScreens","ngOnDestroy","closeSyncOpeningBill","disconnectDisplayLEDScreens","ngAfterViewChecked","detectChanges","alertErr","err","goBack","reset","isExit","navigate","renderNameFood","id_prod","id_subProd","getlocalProduct","subFood","subs","setIdTable","setIdEmployee","getUser","setIdArea","tax","getlocalTaxs","setTax","id_bill","Promise","all","getBill","getBill_details_byId_bill","showLoading","getDocsByFields","id_branch","$eq","getEarningPointsBills","getEarningPointsProducts","bill","billDetail","loading","label","earning_point_bills","earning_points_products","stamp","list_earning_point_bills","list_earning_points_products","alertMessage","sortDatebyDESC","getClassAndProgram","debt","getIdPartner","getlocalCustomer","observableCheckBill","catch","finally","hideLoading","getIdTable","tableInfo","getlocalArea","getIdArea","getlocalTable","printer","getLocalPrintPage","print_sizes","print_size_default","checkPrinter","printer_kitchen","observableSyncOpeningBill","subscribe","rsp","vcode","nzOkText","nzCancelText","statusInvoice","isPromotion","deletePromotions","updateBill","getID","getCreateUpdateInvoice","id","getEarningBill","program_bill","getSubTotal","bill_total_minimum","subTotal","include_promotion_product","getSubTotalNotPromotion","include_discount","getDiscount","getDiscountBill","include_paid_points","getDiscountPoint","include_fee","getFee","include_tax","getTax","exchange","money","points","id_promotion","reduce","prev","next","getSubTotalNotPromotionOFProduct","products_of_program_earnig_product","id_subproduct","getEarningProduct","products","program_product","customer","customer_class","getlocalCustomerClasss","id_customer_class","id_earning_points_bill","id_earning_points_product","getTotalEarningPoint","earning_point","getTotalEarningPointProduct","product","promotion","deleteProcess","deleteBill_Billdetail","updateTable","deleteInvoice","createProcess","updateAllServiceTimeToPause","updateBill_Billdetail","getCreateUpdateInvoiceDetail","saveInvoice","print","getUsePoint","earned_points","updateCustomer_byEarnedPoints","setEarningPointBill","invoiceTemp","invoice","handleMinvoice","success","getBillCode","handlePrintInvoice","renderPrintPage","setBillCode","bill_code","showModal","modal","onWillDismiss","handlePrintTest","updateServiceTime","checkMyPermission","temp","nzDuration","nzContent","nzIconType","handleEmit_printKitchenAll","checkDeactivate","currentRoute","currentState","nextState","getBillType","navigateByUrl","url","getBill_Detail_ByID_Bill","bill_details","destroyBillDetails_withPromotions","setBillHavePromotion","resolve","product_gift_type7","bill_details_pmtype_7","handleAddGiftType7","showProductGiftType7","gotten_gift_type7","products_gift","choose","addBill_detail_promotion","getPromotions","bill_details_type_6","bill_details_others","changeBillDetails_withPromotions","getDate","bill_details_display","bill_details_pmtype_0to6","handleChooseLotForPromotion","sortNumberbyASC","isGotPromotion","handlePromotionType7","getEarningpointPromotion","findLastIndex","total_bill_value","getTotalATax","min_date_exp","sortDatebyASC","pmtype","earning_points_product","checkDisableChooseProductGift","promotions_maximum","handleOk","showModalChangePriceType","changePriceType","handleCancel","price_update","getlocalDetailProduct","top","price2","setPriceType","updateServiceTimePriceInvoiceDetail","reject","currentBranch","getlocalBranch","einvoices","cqt_status","invoiceSeries","changeBill_byLocal_toInvoice_byMinvoice","saveInvoice_Sign_byMinvoice","taxcode","token","code","saveInvoice_noSign_byMinvoice","decls","vars","consts","template"],"sourceRoot":"webpack:///"}