{"version":3,"file":"src_app_cafe_desktop_cafe-fnb_cafe-fnb-main_cafe-fnb-main_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/cafe-fnb-main.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/cafe-fnb-main.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/cafe-fnb-main.module.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/account-information/account-information.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/account-information/account-information.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/add-customer/add-customer.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/add-customer/add-customer.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/bill-item/bill-item.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/bill-item/bill-item.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/booking-item/booking-item.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/booking-item/booking-item.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/choose-customer/choose-customer.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/choose-customer/choose-customer.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print-kitchen-electron/config-print-kitchen-electron.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print-kitchen-electron/config-print-kitchen-electron.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print-kitchen/config-print-kitchen.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print-kitchen/config-print-kitchen.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print/config-print.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-print/config-print.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-sales/config-sales.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/config-sales/config-sales.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/food-detail/food-detail.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/food-detail/food-detail.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/info-payment/info-payment.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/info-payment/info-payment.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/bill-option/bill-option.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/bill-option/bill-option.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/cart-option/cart-option.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/cart-option/cart-option.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/change-bill-type/change-bill-type.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/change-bill-type/change-bill-type.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/change-price-type/change-price-type.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/change-price-type/change-price-type.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/choose-food/choose-food.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/choose-food/choose-food.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/edit-food/edit-food.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/edit-food/edit-food.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/info-customer/info-customer.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/info-customer/info-customer.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-add-booking/modal-add-booking.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-add-booking/modal-add-booking.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-add-customer/modal-add-customer.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-add-customer/modal-add-customer.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-discount/modal-discount.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-discount/modal-discount.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-edit-used-time/modal-edit-used-time.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-edit-used-time/modal-edit-used-time.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-fee/modal-fee.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-fee/modal-fee.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-payment/modal-payment.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-payment/modal-payment.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-select-label-print/modal-select-label-print.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/modal-select-label-print/modal-select-label-print.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/other-discount/other-discount.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/other-discount/other-discount.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/product-gift-type7/product-gift-type7.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/product-gift-type7/product-gift-type7.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/product-gift/product-gift.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/product-gift/product-gift.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/select-lot/select-lot.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/select-lot/select-lot.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/separate-table/separate-table.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/modal/separate-table/separate-table.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/print-one-col/print-one-col.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/components/print-one-col/print-one-col.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/cart-detail/cart-detail.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/cart-detail/cart-detail.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/choose-table/choose-table.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/choose-table/choose-table.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/list-invoice/detail/detail.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/list-invoice/detail/detail.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/list-invoice/list-invoice.component.ts","./src/app/cafe/desktop/cafe-fnb/cafe-fnb-main/pages/list-invoice/list-invoice.component.html","./src/app/cafe/desktop/cafe-fnb/cafe-fnb.ts","./src/app/cafe/services/area.service.ts","./src/app/cafe/services/customer.service.ts","./src/app/cafe/services/date.service.ts","./src/app/cafe/services/employee.service.ts","./src/app/cafe/services/theme.service.ts","./src/app/cafe/services/user.service.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, ElementRef } from '@angular/core';\r\nimport { CafeFnbUI } from '../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { CafeFnbSharedService } from '../cafe-fnb-shared.service';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\n\r\n@Component({\r\n  selector: 'app-cafe-fnb-main',\r\n  templateUrl: './cafe-fnb-main.component.html',\r\n  styleUrls: [\r\n    './cafe-fnb-main.component.scss',\r\n    './cafe-fnb-main-custom.component.scss',\r\n  ],\r\n})\r\nexport class CafeFnbMainComponent extends CafeFnbUI {\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n    private element: ElementRef,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  currentTab = 1;\r\n\r\n  listArea = [];\r\n\r\n  ngOnInit(): void {\r\n    this.listArea = this.areaService.listArea.filter(area => area.name !== 'Take away');\r\n    this.onInit();\r\n    this.adjustScale();\r\n    window.addEventListener('resize', this.adjustScale.bind(this));\r\n    this.getALlBills();\r\n\r\n    // Tạo hàm callback để đồng bộ giữa các thiết bị\r\n    this.vhQueryCafe.observableSyncBillType(this.id_branch, 5).subscribe((listbill_bybilltype: any[]) => {\r\n      if (this.isLoadedAllBill) {\r\n        const listIdTableActive = listbill_bybilltype\r\n          .filter(item => item.id_table !== 'go_home' && item.id_area === this.selectedAreaID)\r\n          .map(item => item.id_table);\r\n        // Cập nhật lại danh sách bill\r\n        this.listAllBills = listbill_bybilltype.map((item) => ({\r\n          ...item,\r\n          areaName: this.vhQueryCafe.getlocalArea(item.id_area)?.name || 'Unknown',\r\n          tableName: this.vhQueryCafe.getlocalTable(item.id_table)?.name || 'Unknown',\r\n          table: this.vhQueryCafe.getlocalTable(item.id_table) || 'Unknown',\r\n        }));\r\n\r\n        switch (this.id_selected) {\r\n          case 'all':\r\n            this.listBills = this.listAllBills;\r\n            break;\r\n          case 'go_home':\r\n            this.listBills = this.listAllBills.filter((bill) => bill.id_table === 'go_home');\r\n            break;\r\n          case 'table':\r\n            this.listBills = this.listAllBills.filter((bill) => bill.id_table !== 'go_home');\r\n            break;\r\n          default:\r\n            this.listBills = this.listAllBills.filter((bill) => bill.id_area === this.id_selected);\r\n            break;\r\n        }\r\n        // Cập nhật lại trạng thái của bàn\r\n        this.listTables.forEach((item: any) => {\r\n          if (listIdTableActive.includes(item._id)) {\r\n            item.status = true;\r\n          }\r\n          else {\r\n            item.status = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onDestroy();\r\n\r\n    window.removeEventListener('resize', this.adjustScale.bind(this));\r\n    if (this.observerScale) {\r\n      this.observerScale.disconnect();\r\n    }\r\n\r\n    this.listAllBills = [];\r\n    this.listBills = [];\r\n    this.vhQueryCafe.closeSyncBillType();\r\n  }\r\n\r\n  isLoadedAllBill = false;\r\n\r\n  getALlBills() {\r\n    const listTables = this.vhQueryCafe.getlocalTables();\r\n    const activeTableIds = listTables.filter(table => table.status && table._id !== 'go_home').map(table => table._id);\r\n    const branchId = this.vhQueryCafe.getDefaultBranch()._id;\r\n\r\n    const promises = [];\r\n\r\n    if (activeTableIds.length > 0) {\r\n      promises.push(\r\n        this.vhQueryCafe.getBills_byFields({\r\n          id_table: { $in: activeTableIds },\r\n          bill_type: { $eq: 5 },\r\n          id_branch: { $eq: branchId }\r\n        }) as Promise<any[]>\r\n      );\r\n    } else {\r\n      promises.push(Promise.resolve([]));\r\n    }\r\n\r\n    promises.push(\r\n      this.vhQueryCafe.getBills_byFields({\r\n        id_table: { $eq: 'go_home' },\r\n        bill_type: { $eq: 5 },\r\n        id_branch: { $eq: branchId }\r\n      }) as Promise<any[]>\r\n    );\r\n\r\n    Promise.all(promises)\r\n      .then(([billsFromTables, billsGoHome]) => {\r\n        const allBills = [...billsGoHome, ...billsFromTables];\r\n        const enrichedBills = allBills.map((item) => ({\r\n          ...item,\r\n          areaName: this.vhQueryCafe.getlocalArea(item.id_area)?.name || 'Unknown',\r\n          tableName: this.vhQueryCafe.getlocalTable(item.id_table)?.name || 'Unknown',\r\n          table: this.vhQueryCafe.getlocalTable(item.id_table) || 'Unknown',\r\n        }));\r\n\r\n        this.billsGoHome = [...billsGoHome];\r\n        this.listAllBills = [...enrichedBills];\r\n        this.listBills = [...enrichedBills];\r\n\r\n        this.isLoadedAllBill = true;\r\n      });\r\n  }\r\n\r\n  /**\r\n  * Tìm kiếm bill mang về\r\n  * @param value giá trị tìm kiếm\r\n  */\r\n  searchBillGoHome(value: string) {\r\n    this.listBills = this.billService.searchBillGoHome(value, this.billsGoHome);\r\n  }\r\n\r\n\r\n  get countBillTable(): string {\r\n    return this.listAllBills.filter(bill => bill.id_table !== 'go_home').length.toString();\r\n  }\r\n\r\n  get countBillGoHome(): string {\r\n    return this.listAllBills.filter(bill => bill.id_table === 'go_home').length.toString();\r\n  }\r\n\r\n  getNumberTableByArea(id_area) {\r\n    return this.listAllBills.filter((bill) => bill.id_area === id_area).length;\r\n  }\r\n\r\n  /**\r\n   * thiết lập giao diện gọi món\r\n   * @param type 1 | 2 | 3\r\n   */\r\n  public updateInterface(type, permission) {\r\n    if (this.vhAuth.checkMyPermission(permission)) {\r\n      Promise.all([this.vhComponent.showLoading(this.languageService.translate(\"Changing interface...\"), \"current-loading\", null, null, false),\r\n      this.vhAuth.updateMyPermission({ default_display_page: permission }),\r\n      ])\r\n        .then(() => {\r\n          this.vhComponent.hideLoading(0);\r\n          setTimeout(() => {\r\n            this.router.navigate(['/cafe/' + type]);\r\n          }, 200);\r\n\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  observerScale = new ResizeObserver(() => {\r\n    this.adjustScale();\r\n  });\r\n\r\n  // Hàm thay đổi zoom để full screen\r\n  adjustScale() {\r\n    const container = this.element.nativeElement.children[0];\r\n    if (!container) return;\r\n    const viewportHeight = window.innerHeight;\r\n    const containerHeight = container.offsetHeight;\r\n    const scaleY = viewportHeight / containerHeight;\r\n    container.style.zoom = scaleY;\r\n    if (container) {\r\n      this.observerScale.observe(container);\r\n    }\r\n  }\r\n\r\n  id_selected = 'all';\r\n\r\n  handleGetAllBill() {\r\n    if (this.id_selected !== 'all') {\r\n      this.listBills = this.listAllBills;\r\n      this.id_selected = 'all';\r\n    }\r\n  }\r\n\r\n  handleGetBillByArea(id_area) {\r\n    if (this.id_selected !== id_area) {\r\n      this.listBills = this.listAllBills.filter((bill) => bill.id_area === id_area);\r\n      this.id_selected = id_area;\r\n    }\r\n  }\r\n\r\n  handleGetBillTable() {\r\n    if (this.id_selected !== 'table') {\r\n      this.listBills = this.listAllBills.filter((bill) => bill.id_table !== 'go_home');\r\n      this.id_selected = 'table';\r\n    }\r\n  }\r\n\r\n  handleGetBillGoHome() {\r\n    if (this.id_selected !== 'go_home') {\r\n      this.listBills = this.listAllBills.filter((bill) => bill.id_table === 'go_home');\r\n      this.id_selected = 'go_home';\r\n    }\r\n  }\r\n\r\n  gotoChoosetable() {\r\n    this.router.navigate(['/cafe/cafe-fnb/choose-table'], { state: { action: 'create-bill' } });\r\n  }\r\n\r\n  createBillGoHome() {\r\n    this.selectedAreaID = 'go_home';\r\n    this.selectedTableID = 'go_home';\r\n    this.indexTab = undefined;\r\n    this.filterType = 1;\r\n    this.billService.createBill(this.selectedAreaID, this.selectedTableID, this.searchValueAreaGoHome, this.indexTabArea, this.filterType);\r\n  }\r\n\r\n  createBillOnTable(table: any) {\r\n    if (!table.status) {\r\n      this.selectedTableID = table._id;\r\n      this.billService.createBill(this.selectedAreaID, this.selectedTableID, this.searchValueAreaGoHome, this.indexTabArea, this.filterType);\r\n    }\r\n    else {\r\n      const bill = this.listAllBills.find((bill) => bill.id_table === table._id);\r\n      if (bill) {\r\n        this.selectedBill = new VhOrderInvoices(bill, [], this.vhQueryCafe);\r\n        this.selectedTableID = table._id;\r\n        this.areaChanged(table.id_area);\r\n        this.debt = bill.id_customer == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(bill.id_customer);\r\n        let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n        if (bill.bill_type == 5) {\r\n          this.router.navigate(['/cafe/cafe-fnb/detail'], { state: { id_table: this.selectedTableID, id_bill: bill._id, dataRestore } });\r\n        }\r\n      }\r\n      else {\r\n        this.vhQueryCafe.updateTable(table._id, { status: false });\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"comp-67e5f60e9b9d51850ab2e609\">\r\n  <ewa-block-blank style=\"--width: 100%\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"block\">\r\n    <div class=\"grid-67e5f60e9b9d51850ab2e609\">\r\n      <div class=\"comp-67e5fdbdf2f740b98879bf95\">\r\n        <ewa-frame-blank style=\"--background-color: var(--ion-color-vh-green)\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"header\">\r\n          <div class=\"grid-67e5fdbdf2f740b98879bf95\">\r\n            <div class=\"comp-67e5fdbeb911f3370ea8bf1c\">\r\n              <ewa-image [image_url]=\"'assets/img/logo_'+themeService.getThemeValue()+'.png'\" style=\"--width: 77px; --height: 32px\" _id=\"67e5fdbeb911f3370ea8bf1c\" _name=\"logo\"\r\n                [ewaStyle]=\"{ 'image__boundary--img': {'background-color': '#ffffff'} }\">\r\n              </ewa-image>\r\n            </div>\r\n\r\n            <!-- Danh sách tab -->\r\n            <div class=\"comp-67e5fdbef052729d893c5b11\">\r\n              <ewa-frame-blank style=\"--width: 47.8248%; --min-height: 36px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tab-wrapper\">\r\n                <div class=\"grid-67e5fdbef052729d893c5b11\">\r\n                  <!-- Tất cả đơn -->\r\n                  <div class=\"comp-67e5fdbfd34905f6386a9fac\">\r\n                    <ewa-frame-blank\r\n                      style=\"--width: 100%; --min-height: 36px;--cursor: pointer\"\r\n                      [style.--background-color]=\"currentTab === 1 ? '#f4f5f5' : 'var(--ion-color-vh-green-dark)'\"\r\n                      (click)=\"currentTab = 1\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tat-ca-don\"\r\n                    >\r\n                      <div class=\"grid-67e5fdbfd34905f6386a9fac\">\r\n                        <div class=\"comp-67e5fdc00138ac6c4f895ad4\">\r\n                          <ewa-text\r\n                          style=\"--cursor: pointer\"\r\n                          [style.--color-content]=\"currentTab === 1 ? '#2a323c' : '#ffffff'\"\r\n                          [text_content]=\"('All bills' | translate) + ' (' + listAllBills.length +  ')'\"\r\n                          _id=\"67e5fdc00138ac6c4f895ad4\" _name=\"txt\"\r\n                        >\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Sơ đồ bàn -->\r\n                  <div class=\"comp-67e5fdbf3d812e395a5dbaba\">\r\n                    <ewa-frame-blank\r\n                      style=\"--width: 100%; --min-height: 36px;--cursor: pointer\"\r\n                      [style.--background-color]=\"currentTab === 2 ? '#f4f5f5' : 'var(--ion-color-vh-green-dark)'\"\r\n                      (click)=\"currentTab = 2; areaChanged(this.listArea[0]._id)\"\r\n                      _id=\"67e5fdbdf2f740b98879bf95\" _name=\"so-do-ban\"\r\n                    >\r\n                      <div class=\"grid-67e5fdbf3d812e395a5dbaba\">\r\n                        <div class=\"comp-67e5fdbf459dadd4e3e76060\">\r\n                          <ewa-text\r\n                            style=\"--cursor: pointer\"\r\n                            [style.--color-content]=\"currentTab === 2 ? '#2a323c' : '#ffffff'\"\r\n                            [text_content]=\"'Table layout' | translate\"\r\n                            _id=\"67e5fdbf459dadd4e3e76060\" _name=\"txt\"\r\n                          >\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Đặt bàn -->\r\n                  <div class=\"comp-67e5fdbfec1aaa028a0a81a9\">\r\n                    <ewa-frame-blank\r\n                      style=\"--width: 100%; --min-height: 36px;--cursor: pointer\"\r\n                      [style.--background-color]=\"currentTab === 3 ? '#f4f5f5' : 'var(--ion-color-vh-green-dark)'\"\r\n                      (click)=\"currentTab = 3; bookingGetData()\"\r\n                      _id=\"67e5fdbdf2f740b98879bf95\" _name=\"dat-ban\"\r\n                    >\r\n                      <div class=\"grid-67e5fdbfec1aaa028a0a81a9\">\r\n                        <div class=\"comp-67e5fdc066e7b5efbd093629\">\r\n                          <ewa-text\r\n                            style=\"--cursor: pointer;\"\r\n                            [style.--color-content]=\"currentTab === 3 ? '#2a323c' : '#ffffff'\"\r\n                            [text_content]=\"'Booking' | translate\"\r\n                            _id=\"67e5fdc066e7b5efbd093629\" _name=\"txt\"\r\n                          >\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n\r\n\r\n            <!-- Cấu hình bên phải -->\r\n            <div class=\"comp-67f4f3b90dd91b09230c35f7\">\r\n              <!-- Hóa đơn hôm nay -->\r\n              <div class=\"comp-67e5fdbfec1aaa028a0a81a9\">\r\n                <ewa-frame-blank\r\n                  style=\"--width: 185px; --min-height: 36px;--cursor: pointer; --background-color: var(--ion-color-vh-green); --color-content: #ffffff\"\r\n                  (click)=\"gotoListInvoice()\"\r\n                  _id=\"67e5fdbdf2f740b98879bf95\" _name=\"dat-ban\"\r\n                >\r\n                  <div class=\"grid-67e5fdbfec1aaa028a0a81a9\">\r\n                    <div class=\"comp-67e5fdc066e7b5efbd093629\">\r\n                      <ewa-text style=\"--cursor: pointer\" [text_content]=\"'Invoices today' | translate\" _id=\"67e5fdc066e7b5efbd093629\" _name=\"txt\">\r\n                      </ewa-text>\r\n                    </div>\r\n                  </div>\r\n                </ewa-frame-blank>\r\n              </div>\r\n              <!-- Avatar hiển thị dropdown menu -->\r\n              <ewa-image\r\n                style=\"--cursor: pointer\"\r\n                nz-dropdown [nzDropdownMenu]=\"menu\" nzTrigger=\"click\"\r\n                [image_url]=\"user.img ? user.img : './assets/img/avatar-shop.png'\"\r\n                [image_error]=\"'./assets/img/avatar-shop.png'\"\r\n                [nzPlacement]=\"'bottomRight'\"\r\n                _id=\"67f4f3b90dd91b09230c35f7\" _name=\"user-avatar\"\r\n              >\r\n              </ewa-image>\r\n              <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n                <ul nz-menu nzSelectable>\r\n                    <li nz-menu-item style=\"color: var(--ion-color-vh-green);\" > <i nz-icon nzType=\"dollar\"  nzTheme=\"outline\"></i> {{'Sales'| translate}}</li>\r\n                    <li nz-menu-item (click)=\"updateInterface('dashboard','admin_display_page')\"\r\n                        [nzDisabled]=\"!vhAuth.checkMyPermission('admin_display_page')\"> <i nz-icon nzType=\"home\"\r\n                            nzTheme=\"outline\"></i> {{'Administrator'| translate}}</li>\r\n                    <li nz-submenu [nzTitle]=\"titleTplDispatcher\">\r\n                        <ng-template #titleTplDispatcher><i nz-icon nzType=\"swap\" nzTheme=\"outline\"></i><span\r\n                                style=\"margin-left: 1px;\"> {{'Dispatcher' | translate}}</span>\r\n                        </ng-template>\r\n                        <ul>\r\n                            <li nz-menu-item *ngFor=\"let item of kitchens\"   (click)=\"gotoDispatcher(item)\">\r\n                                <span >{{item.name}}</span>\r\n                            </li>\r\n                            <li nz-menu-item *ngIf=\"!kitchens.length\">\r\n                                <span >{{\"You haven't created a dispatch area yet\" | translate}}</span>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <li nz-submenu [nzTitle]=\"titleTplSalesVoucher\">\r\n                        <ng-template #titleTplSalesVoucher><i nz-icon nzType=\"dollar\" nzTheme=\"outline\"></i><span style=\"margin-left: 1px;\"> {{'Sell voucher/card' | translate}}</span></ng-template>\r\n                        <ul>\r\n                            <li nz-menu-item (click)=\"gotoSalesVoucher()\">\r\n                                <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Sell voucher' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoSalesPrepaidCard()\">\r\n                                <i nz-icon nzType=\"credit-card\" nzTheme=\"outline\"></i> {{'Sell prepaid card' | translate}}\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <li nz-submenu [nzTitle]=\"titleTpl\">\r\n                        <ng-template #titleTpl><i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i><span style=\"margin-left: 1px;\"> {{'Exchange voucher/card' | translate}}</span></ng-template>\r\n                        <ul>\r\n                            <li nz-menu-item (click)=\"gotoChangeVoucher()\">\r\n                                <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Exchange voucher for goods' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoPrepaidCard()\">\r\n                                <i nz-icon nzType=\"credit-card\" nzTheme=\"outline\"></i> {{'Exchange prepaid card for goods' | translate}}\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <li nz-submenu [nzTitle]=\"titleTplWebAPp\">\r\n                        <ng-template #titleTplWebAPp><span nz-icon nzType=\"global\" nzTheme=\"outline\"></span><span style=\"margin-left: 1px;\">{{'Order from web/app' | translate}}</span></ng-template>\r\n                        <ul>\r\n                            <li nz-menu-item (click)=\"gotoSalesOrder()\">\r\n                                <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Orders' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoSalesOrderVoucher()\">\r\n                                <i nz-icon nzType=\"credit-card\" nzTheme=\"outline\"></i> {{'Voucher purchase order' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoExchangeOrderVoucher()\">\r\n                                <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Voucher exchange order for goods' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoSalesOrderPrepaidCard()\">\r\n                                <i nz-icon nzType=\"credit-card\" nzTheme=\"outline\"></i> {{'Prepaid card purchase order' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"gotoExchangeOrderCard()\">\r\n                                <i nz-icon nzType=\"credit-card\" nzTheme=\"outline\"></i> {{'Prepaid card exchange order for goods' | translate}}\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <li (click)=\"modalAccountInfo =true\" nz-menu-item><i nz-icon nzType=\"user\"\r\n                            nzTheme=\"outline\"></i> {{'Account information' | translate}}\r\n                    </li>\r\n                    <li *ngIf=\"branchList.length > 1\" (click)=\"change_branch()\" nz-menu-item><i nz-icon\r\n                            nzType=\"branches\" nzTheme=\"outline\"></i> {{'Change branch' | translate}}</li>\r\n                    <li (click)=\"show_modal_choose_interface= true\" nz-menu-item><i nz-icon nzType=\"retweet\"\r\n                            nzTheme=\"outline\"></i> {{'Change sales interface' | translate}}\r\n                    </li>\r\n                    <li nz-submenu [nzTitle]=\"titleTplSetting\">\r\n                        <ng-template #titleTplSetting><span nz-icon nzType=\"setting\" nzTheme=\"outline\"></span><span style=\"margin-left: 1px;\">{{'Sales page settings' | translate}}</span></ng-template>\r\n                        <ul style=\"min-width: 125px;\">\r\n                            <li nz-menu-item (click)=\"showConfigSales = true\">\r\n                                <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i> {{'Display sales page' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"showConfigPrint = true\">\r\n                                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i> {{'Sales print page' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item  (click)=\"checkPlatformShowPrintKitchen()\">\r\n                                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i> {{'Kitchen print page' | translate}}\r\n                            </li>\r\n                            <li nz-menu-item (click)=\"showConfig = true\">\r\n                                <i nz-icon nzType=\"setting\" nzTheme=\"outline\"></i> {{'Others'| translate}}\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <li (click)=\"userService.logout()\" nz-menu-item><i nz-icon nzType=\"logout\" nzTheme=\"outline\"></i> {{'Log out' | translate}}\r\n                    </li>\r\n                </ul>\r\n            </nz-dropdown-menu>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n\r\n\r\n      <!-- ------------------------------------------------------------ PHẦN BODY ------------------------------------------------------------ -->\r\n\r\n      <div class=\"comp-67e5fe09c5ab62004b13c63f\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"body\">\r\n          <div class=\"grid-67e5fe09c5ab62004b13c63f\">\r\n\r\n            <!-- ----------------------------------------------------------- PHẦN Ở GIỮA ----------------------------------------------------------- -->\r\n\r\n            <div class=\"comp-67e5fe7f86cde058d8e8a1e6\">\r\n              <ewa-frame-blank style=\"--width: 83.3089%; --min-height: 732px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-main\">\r\n                <div class=\"grid-67e5fe7f86cde058d8e8a1e6\">\r\n                  <!-- Tất cả đơn -->\r\n                  <div *ngIf=\"currentTab === 1\" class=\"comp-67e618933c3f3b1c675e48eb\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 716px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-tat-ca-don\">\r\n                      <i *ngIf=\"!isLoadedAllBill\" style=\"position: absolute;top: 45%;left: 50%;font-size: 2rem;\" nz-icon nzType=\"loading\" nzTheme=\"outline\"></i>\r\n                      <div *ngIf=\"listBills.length > 0 && isLoadedAllBill\" class=\"grid-67e618933c3f3b1c675e48eb\">\r\n                        <div *ngFor=\"let bill of listBills; trackBy: myTrackByFunction\" class=\"comp-67e618bd80e02e0236ef3195\">\r\n                            <app-bill-item [bill]=\"bill\"></app-bill-item>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Sơ đồ bàn -->\r\n                  <div *ngIf=\"currentTab === 2\" class=\"comp-67e62a220db5c9bbadae6b4f\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 716px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-so-do-ban\">\r\n                      <div class=\"grid-67e62a220db5c9bbadae6b4f\">\r\n                        <div *ngFor=\"let item of listTables\" class=\"comp-67e6485eb2fb5b6663093764\">\r\n                          <ewa-frame-blank\r\n                            [style.--background-color]=\"item.status ? 'var(--ion-color-vh-green-dark)' : '#f4f5f5'\"\r\n                            (click)=\"createBillOnTable(item)\"\r\n                            style=\"--width: 100%; --min-height: 125px; --cursor: pointer; --border-radius: 4px; --border: 1px solid var(--ion-color-vh-green-dark)\" _id=\"67e5fdbdf2f740b98879bf95\"\r\n                          >\r\n                            <div class=\"grid-67e6485eb2fb5b6663093764\">\r\n                              <div class=\"comp-67e6485f5d38d596b15d140c\">\r\n                                <ewa-text\r\n                                  [style.--color-content]=\"item.status ? '#ffffff' : '#3b4661'\"\r\n                                  style=\"--cursor: pointer\"\r\n                                  [text_content]=\"item.name\"\r\n                                  _id=\"67e6485f5d38d596b15d140c\" _name=\"txt-ten-ban\"\r\n                                >\r\n                                </ewa-text>\r\n                              </div>\r\n                              <div class=\"comp-67e6485fa5d1cd296750c6c1\">\r\n                                <ewa-shape _id=\"67e6485fa5d1cd296750c6c1\" _name=\"line\">\r\n                                </ewa-shape>\r\n                              </div>\r\n                              <div class=\"comp-67e6485ff5a1fba9268d22f0\">\r\n                                <ewa-text\r\n                                  [style.--color-content]=\"item.status ? '#ffffff' : '#3b4661'\"\r\n                                  style=\"--cursor: pointer\"\r\n                                  [text_content]=\"(item.status ? 'Occupied' : 'Available') | translate\"\r\n                                  _id=\"67e6485ff5a1fba9268d22f0\" _name=\"trang-thai\"\r\n                                >\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Đặt bàn -->\r\n                  <div *ngIf=\"currentTab === 3\" class=\"comp-67e65de754e06d31e3c654b9\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 716px; --background-color: #ffffff;\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-dat-ban\"\r\n                      [style.--width]=\"'100%'\">\r\n                      <div class=\"grid-67e65de754e06d31e3c654b9\">\r\n                        <div class=\"comp-67e65de80f95df39bed37510\"\r\n                          *ngFor=\"let bookingBillItem of bookingListBillsShow\">\r\n                          <app-booking-item\r\n                            [bookingBillItem]=\"bookingBillItem\">\r\n                          </app-booking-item>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n\r\n\r\n\r\n            <!-- ---------------------------------------------------------- PHẦN BÊN PHẢI ---------------------------------------------------------- -->\r\n\r\n            <div class=\"comp-67e5fe877cd3af859fa44e2b\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-right\">\r\n                <div class=\"grid-67e5fe877cd3af859fa44e2b\">\r\n                  <!-- TẤT CẢ ĐƠN -->\r\n                  <div *ngIf=\"currentTab === 1\" class=\"comp-67e61a566e0b7a90a3989d7f\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-tat-ca-don\">\r\n                      <div class=\"grid-67e61a566e0b7a90a3989d7f\">\r\n                        <div class=\"comp-67e61bcab542897d3a408edc\">\r\n                          <ewa-button\r\n                            [btn_content]=\"'Create table order' | translate\"\r\n                            style=\"--background-color: var(--ion-color-vh-green)\"\r\n                            (click)=\"gotoChoosetable()\"\r\n                            _id=\"67e61bcab542897d3a408edc\" _name=\"btn-tao-don-an-tai-ban\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67e61be426dd82413e98566b\">\r\n                          <ewa-button\r\n                            style=\"--background-color: #ff5900\"\r\n                            [btn_content]=\"'Create takeaway order' | translate\"\r\n                            (click)=\"createBillGoHome()\"\r\n                            _id=\"67e61bcab542897d3a408edc\" _name=\"btn-tao-don-mang-di\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67e62411853cb9a037406231\">\r\n                          <ewa-frame-blank style=\"--width: 96.3636%; --min-height: 596px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"filter-wrapper\">\r\n                            <div class=\"grid-67e62411853cb9a037406231\">\r\n                              <div class=\"comp-67e627d8d098c60cdab10fa6\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tat-ca-don\">\r\n                                  <div class=\"grid-67e627d8d098c60cdab10fa6\">\r\n                                    <div class=\"comp-67e627d9feb38a60dee22dac\">\r\n                                      <ewa-button\r\n                                        [style.--background-color]=\"id_selected === 'all' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                        [style.--color-content]=\"id_selected === 'all' ? '#ffffff' : '#000000'\"\r\n                                        style=\"--width: 100%; --height: 69px; --border: 1px solid var(--ion-color-vh-green); --border-radius: 4px\"\r\n                                        [show_icon]=\"false\"\r\n                                        (click)=\"handleGetAllBill()\"\r\n                                        [btn_content]=\"'All bills' | translate\"\r\n                                        _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-tat-ca-don\"\r\n                                      >\r\n                                      </ewa-button>\r\n                                    </div>\r\n                                    <div class=\"comp-67e627d9704c390688a0157b\">\r\n                                      <ewa-text\r\n                                        style=\"--width: 93.75%\"\r\n                                        [style.--color-content]=\"id_selected === 'all' ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                        (click)=\"handleGetAllBill()\"\r\n                                        [text_content]=\"listAllBills.length.toString()\"\r\n                                        _id=\"67e627d9704c390688a0157b\" _name=\"txt-tat-ca-don-count\"\r\n                                      >\r\n                                      </ewa-text>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n                              <div class=\"comp-67e6280e5b862840f714f6a4\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"taiban-mangdi-wrapper\">\r\n                                  <div class=\"grid-67e6280e5b862840f714f6a4\">\r\n                                    <div class=\"comp-67e6280efdf3edabafc2e1ff\">\r\n                                      <!-- Nút đơn tại bàn -->\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent;\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-tai-ban\">\r\n                                        <div class=\"grid-67e6280efdf3edabafc2e1ff\">\r\n                                          <div class=\"comp-67e6280f319e0b944fe3cb32\">\r\n                                            <ewa-button\r\n                                              [style.--background-color]=\"id_selected === 'table' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                              [style.--color-content]=\"id_selected === 'table' ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                              [style.--color-icon]=\"id_selected === 'table' ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                              (click)=\"handleGetBillTable()\"\r\n                                              style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                              [btn_content]=\"'Dine-in order' | translate\"\r\n                                              _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn\"\r\n                                            >\r\n                                            </ewa-button>\r\n                                          </div>\r\n                                          <div class=\"comp-67e6280f0a8d5b8b56930533\">\r\n                                            <ewa-text\r\n                                              style=\"--width: 87.5%\"\r\n                                              [style.--color-content]=\"id_selected === 'table' ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                              (click)=\"handleGetBillTable()\"\r\n                                              [text_content]=\"countBillTable\"\r\n                                              _id=\"67e627d9704c390688a0157b\" _name=\"txt-count\"\r\n                                            >\r\n                                            </ewa-text>\r\n                                          </div>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n                                    <div class=\"comp-67e6280f523ebb780cf1917c\">\r\n                                      <!-- Nút đơn mang đi -->\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent;\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-mang-di\">\r\n                                        <div class=\"grid-67e6280f523ebb780cf1917c\">\r\n                                          <div class=\"comp-67e62810b39cb5b2a43e8365\">\r\n                                            <ewa-button\r\n                                              [style.--background-color]=\"id_selected === 'go_home' ? '#fc6a56' : '#ffffff'\"\r\n                                              [style.--color-content]=\"id_selected === 'go_home' ? '#ffffff' : '#fc6a56'\"\r\n                                              [style.--color-icon]=\"id_selected === 'go_home' ? '#ffffff' : '#fc6a56'\"\r\n                                              (click)=\"handleGetBillGoHome()\"\r\n                                              style=\"--border-radius: 4px; --border: 1px solid #fc6a56\"\r\n                                              [btn_content]=\"'Takeaway order' | translate\"\r\n                                              _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn\"\r\n                                            >\r\n                                            </ewa-button>\r\n                                          </div>\r\n                                          <div class=\"comp-67e62810890fa575389d3940\">\r\n                                            <ewa-text\r\n                                              style=\"--width: 85.3659%\"\r\n                                              [style.--color-content]=\"id_selected === 'go_home' ? '#ffffff' : '#fc6a56'\"\r\n                                              (click)=\"handleGetBillGoHome()\"\r\n                                              [text_content]=\"countBillGoHome\"\r\n                                              _id=\"67e627d9704c390688a0157b\" _name=\"txt-count\"\r\n                                            >\r\n                                            </ewa-text>\r\n                                          </div>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n                              <div class=\"comp-67e62412441c3b71717e7a1b\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 477px; --background-color: transparent;\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"khu-vuc-wrapper\">\r\n                                  <div class=\"grid-67e62412441c3b71717e7a1b\">\r\n                                    <div *ngIf=\"id_selected !== 'go_home'\" class=\"comp-67e624131d9446dcb00ce07e\">\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 477px; --background-color: transparent;\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n                                        <div class=\"grid-67e624131d9446dcb00ce07e\">\r\n                                          <div *ngFor=\"let area of listArea\" class=\"comp-67e6275b08d7264ae14c3458\">\r\n                                            <ewa-frame-blank\r\n                                              [style.--background-color]=\"id_selected === area._id ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                              style=\"--border: 1px solid var(--ion-color-vh-green); --border-radius: 4px\"\r\n                                              _id=\"67e6275b08d7264ae14c3458\" _name=\"khu-vuc\"\r\n                                            >\r\n                                              <div class=\"grid-67e6275b08d7264ae14c3458\">\r\n                                                <div class=\"comp-67e6275cf6f46abb7458e575\">\r\n                                                  <ewa-button\r\n                                                    style=\"--border-radius: 4px\"\r\n                                                    [style.--background-color]=\"id_selected === area._id ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                                    [style.--color-content]=\"id_selected === area._id ? '#ffffff' : '#000000'\"\r\n                                                    [show_icon]=\"false\"\r\n                                                    [btn_content]=\"area.name\"\r\n                                                    (click)=\"handleGetBillByArea(area._id)\"\r\n                                                    _id=\"67e6280f319e0b944fe3cb32\" _name=\"txt-ten-khu-vuc\"\r\n                                                  >\r\n                                                  </ewa-button>\r\n                                                </div>\r\n                                                <div (click)=\"handleGetBillByArea(area._id)\" class=\"comp-67e6275c7c8c727008d04089\">\r\n                                                  <ewa-text\r\n                                                    style=\"--width: 93.75%\"\r\n                                                    [style.--color-content]=\"id_selected === area._id ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                                    [text_content]=\"getNumberTableByArea(area._id).toString()\"\r\n                                                    _id=\"67e627d9704c390688a0157b\" _name=\"txt-count-khu-vuc\"\r\n                                                  >\r\n                                                  </ewa-text>\r\n                                                </div>\r\n                                              </div>\r\n                                            </ewa-frame-blank>\r\n                                          </div>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n                                    <div *ngIf=\"id_selected === 'go_home'\" class=\"comp-67e624132ba0fda179ab64a7\">\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 477px; --background-color: transparent;\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n                                        <div class=\"grid-67e624132ba0fda179ab64a7\">\r\n                                          <div class=\"comp-67e6241526d769bd0cdf1ae0\">\r\n                                            <ewa-input-group\r\n                                              [(ngModel)]=\"searchValueAreaGoHome\"\r\n                                              (ngModelChange)=\"searchBillGoHome($event)\"\r\n                                              [placeholder]=\"'Search for takeaway bills' | translate\"\r\n                                              _id=\"67e6241526d769bd0cdf1ae0\" _name=\"input-tim-kiem\"\r\n                                            >\r\n                                            </ewa-input-group>\r\n                                          </div>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n\r\n                  <!-- SƠ ĐỒ BÀN -->\r\n                  <div *ngIf=\"currentTab === 2\" class=\"comp-67e65f827c86f2105eaeea2c\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-so-do-ban\">\r\n                      <div class=\"grid-67e65f827c86f2105eaeea2c\">\r\n                        <div class=\"comp-67e65fe8b639fc82491455ea\">\r\n                          <ewa-frame-blank style=\"--width: 97.2727%; --min-height: 716px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"danh-sach-khu-vuc\">\r\n                            <div class=\"grid-67e65fe8b639fc82491455ea\">\r\n                              <div *ngFor=\"let area of listArea\" class=\"comp-67e6600f6e71883d18e9c51d\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"khu-vuc\">\r\n                                  <div class=\"grid-67e6600f6e71883d18e9c51d\">\r\n                                    <div class=\"comp-67e6600f6c99cca93607bbd2\">\r\n                                      <ewa-button\r\n                                        [style.--background-color]=\"selectedAreaID === area._id ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                        [style.--color-content]=\"selectedAreaID === area._id ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                        [style.--color-icon]=\"selectedAreaID === area._id ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                                        style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                        [ewaStyle]=\"{\r\n                                          'button': {\r\n                                            'justify-content': 'flex-start',\r\n                                            'flex-direction': 'row-reverse',\r\n                                            'padding-left': '8px',\r\n                                            'padding-right': '8px',\r\n                                            'gap': '4px'\r\n                                          }\r\n                                        }\"\r\n                                        [icon_name]=\"'location_on'\"\r\n                                        (click)=\"areaChanged(area._id)\"\r\n                                        [btn_content]=\"area.name\"\r\n                                        _id=\"67e6280f319e0b944fe3cb32\" _name=\"txt-ten-khu-vuc\"\r\n                                        >\r\n                                      </ewa-button>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n\r\n                  <!-- ĐẶT BÀN -->\r\n                  <div *ngIf=\"currentTab === 3\" class=\"comp-67e6611628a4146893444568\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-dat-ban\">\r\n                      <div class=\"grid-67e6611628a4146893444568\">\r\n                        <!-- Tạo đơn đặt bàn -->\r\n                        <div class=\"comp-67e661172e26610139aead6b\">\r\n                          <ewa-button\r\n                            _id=\"67e61bcab542897d3a408edc\" _name=\"btn-tao-don-dat-ban\"\r\n                            [btn_content]=\"'Add booking' | translate\"\r\n                            style=\"--background-color: var(--ion-color-vh-orange)\"\r\n                            (click)=\"modalAddBookingType = 'add'; bookingChooseTableType = 'add'; bookingResetAddModal(); isShowModalBookingAdd = true\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n\r\n                        <div class=\"comp-67e66117c654fcf22ef97584\">\r\n                          <ewa-frame-blank style=\"--width: 97.2727%; --min-height: 596px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"filter-wrapper\">\r\n                            <div class=\"grid-67e66117c654fcf22ef97584\">\r\n\r\n                              <!-- Tất cả đơn đặt bàn -->\r\n                              <div class=\"comp-67e661180a89e91550be09d2\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tat-ca-don-dat-ban\">\r\n                                  <div class=\"grid-67e661180a89e91550be09d2\">\r\n                                    <div class=\"comp-67e66119170d7db39f898443\">\r\n                                      <ewa-button\r\n                                        _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-tat-ca-don-dat-ban\"\r\n                                        [show_icon]=\"false\"\r\n                                        (click)=\"selectedFilterDate = 'all'; bookingGetDataByDate()\"\r\n                                        [btn_content]=\"'All table reservations' | translate\"\r\n                                        style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                        [style.--background-color]=\"selectedFilterDate === 'all' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'all' ? '#ffffff' : '#000000'\">\r\n                                      </ewa-button>\r\n                                    </div>\r\n                                    <div class=\"comp-67e66119835878055f24d4dc\">\r\n                                      <ewa-text _id=\"67e627d9704c390688a0157b\" _name=\"txt-tat-ca-don-dat-ban-count\"\r\n                                        [text_content]=\"bookingCountBill['all'] !== undefined ? bookingCountBill['all'].toString() : ''\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'all' ? '#ffffff' : 'var(--ion-color-vh-green)'\">\r\n                                      </ewa-text>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n\r\n                              <!-- Sắp đến -->\r\n                              <div class=\"comp-67e661eb92d9828774a0a29e\">\r\n                                <ewa-frame-blank style=\"--width: 94.3925%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"sap-den\">\r\n                                  <div class=\"grid-67e661eb92d9828774a0a29e\">\r\n                                    <div class=\"comp-67e661ebd8c88a8bbe31ab04\">\r\n                                      <ewa-button _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-sap-den\"\r\n                                        [btn_content]=\"'Upcoming' | translate\"\r\n                                        [show_icon]=\"false\"\r\n                                        style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                        (click)=\"selectedFilterDate = 'upcoming'; bookingGetDataByDate(daysList[0].date, daysList[0].date, 'upcoming')\"\r\n                                        [style.--background-color]=\"selectedFilterDate === 'upcoming' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'upcoming' ? '#ffffff' : '#000000'\">\r\n                                      </ewa-button>\r\n                                    </div>\r\n                                    <div class=\"comp-67e661ecf0701d8bb91d47cf\">\r\n                                      <ewa-text _id=\"67e627d9704c390688a0157b\" _name=\"txt-sap-den-count\"\r\n                                        [text_content]=\"bookingCountBill['upcoming']\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'upcoming' ? '#ffffff' : 'var(--ion-color-vh-green)'\">\r\n                                      </ewa-text>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n\r\n                              <!-- Quá giờ -->\r\n                              <div class=\"comp-67e66267806495441802b4c1\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"qua-gio\">\r\n                                  <div class=\"grid-67e66267806495441802b4c1\">\r\n                                    <div class=\"comp-67e662671e130c4050507ae4\">\r\n                                      <ewa-button _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-qua-gio\"\r\n                                        [btn_content]=\"'Overdue' | translate\"\r\n                                        [show_icon]=\"false\"\r\n                                        style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                        (click)=\"selectedFilterDate = 'overdue'; bookingGetDataByDate(daysList[0].date, daysList[0].date, 'overdue')\"\r\n                                        [style.--background-color]=\"selectedFilterDate === 'overdue' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'overdue' ? '#ffffff' : '#000000'\">\r\n                                      </ewa-button>\r\n                                    </div>\r\n                                    <div class=\"comp-67e66267108995216616e00e\">\r\n                                      <ewa-text _id=\"67e627d9704c390688a0157b\" _name=\"txt-qua-gio-count\"\r\n                                        [text_content]=\"bookingCountBill['overdue']\"\r\n                                        [style.--color-content]=\"selectedFilterDate === 'overdue' ? '#ffffff' : 'var(--ion-color-vh-green)'\">\r\n                                      </ewa-text>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n                              <!-- Danh sách ngày -->\r\n                              <div class=\"comp-67e6611876d76d743ad760f3\">\r\n                                <ewa-frame-blank style=\"--width: 100%; --min-height: 477px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"danh-sach-ngay\">\r\n                                  <div class=\"grid-67e6611876d76d743ad760f3\"\r\n                                    style=\"display: flex; flex-direction: column; gap: 8px;\">\r\n                                    <div class=\"comp-67e6631f4330298139c56217\"\r\n                                      *ngFor=\"let day of daysList; index as index\">\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"ngay\">\r\n                                        <div class=\"grid-67e6631f4330298139c56217\">\r\n                                          <div class=\"comp-67e66320537348e29bbb99da\">\r\n                                            <ewa-button\r\n                                              _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-ngay\"\r\n                                              style=\"--border: 1px solid var(--ion-color-vh-green); --border-radius: 4px\"\r\n                                              [show_icon]=\"false\"\r\n                                              [btn_content]=\"(day?.dayOfWeek | translate) + ' - ' + (day.date | date : 'dd/MM/yyyy')\"\r\n                                              (click)=\"selectedFilterDate = day?.dayOfWeek; bookingGetDataByDate(day.date, day.date, day?.dayOfWeek)\"\r\n                                              [style.--background-color]=\"selectedFilterDate === day?.dayOfWeek ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                              [style.--color-content]=\"selectedFilterDate === day?.dayOfWeek ? '#ffffff' : '#000000'\">\r\n                                            </ewa-button>\r\n                                          </div>\r\n                                          <div class=\"comp-67e66320c3e45f587367d486\">\r\n                                            <ewa-text _id=\"67e627d9704c390688a0157b\" _name=\"txt-ngay-count\"\r\n                                              [text_content]=\"bookingCountBill[day?.dayOfWeek] + ''\"\r\n                                              [style.--color-content]=\"selectedFilterDate === day?.dayOfWeek ? '#ffffff' : 'var(--ion-color-vh-green)'\">\r\n                                            </ewa-text>\r\n                                          </div>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n\r\n                                    <!-- Tuỳ chỉnh -->\r\n                                    <div class=\"comp-67e6631f4330298139c56217\">\r\n                                      <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"ngay\">\r\n                                        <div class=\"grid-67e6631f4330298139c56217\">\r\n                                          <div class=\"comp-67e66320537348e29bbb99da\">\r\n                                            <ewa-button\r\n                                              _id=\"67e6280f319e0b944fe3cb32\" _name=\"btn-ngay\"\r\n                                              [show_icon]=\"false\"\r\n                                              [btn_content]=\"'Custom' | translate\"\r\n                                              (click)=\"selectedFilterDate = 'custom'\"\r\n                                              style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                                              [style.--background-color]=\"selectedFilterDate === 'custom' ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                                              [style.--color-content]=\"selectedFilterDate === 'custom' ? '#ffffff' : '#000000'\">\r\n                                            </ewa-button>\r\n                                          </div>\r\n                                          <div class=\"comp-67e66320c3e45f587367d486\">\r\n                                            <ewa-text _id=\"67e627d9704c390688a0157b\" _name=\"txt-ngay-count\"\r\n                                              [text_content]=\"bookingCountBill['custom']\"\r\n                                              [style.--color-content]=\"selectedFilterDate === 'custom' ? '#ffffff' : 'var(--ion-color-vh-green)'\">\r\n                                            </ewa-text>\r\n                                          </div>\r\n                                          <!-- Chọn range ngày để filter -->\r\n                                          <nz-range-picker *ngIf=\"selectedFilterDate === 'custom'\"\r\n                                            [(ngModel)]=\"bookingFilterDate\"\r\n                                            (ngModelChange)=\"bookingChangeFilterDate($event)\"\r\n                                            style=\"grid-area: 2/1/2/3; margin-top: 12px\">\r\n                                          </nz-range-picker>\r\n                                        </div>\r\n                                      </ewa-frame-blank>\r\n                                    </div>\r\n                                  </div>\r\n                                </ewa-frame-blank>\r\n                              </div>\r\n\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </ewa-block-blank>\r\n</div>\r\n\r\n\r\n<!-- -------------------------------------------------- modal chọn giao diện bán hàng -------------------------------------------------- -->\r\n<nz-modal\r\n  [nzStyle]=\"{ top: '45%', transform: 'translateY(-50%)' }\" [nzBodyStyle]=\"{'max-height': '70vh'}\" nzWidth=\"60vw\"\r\n  [(nzVisible)]=\"show_modal_choose_interface\"\r\n  (nzOnOk)=\"userService.updateSalesInterface(default_selling_page)\"\r\n  (nzOnCancel)=\"show_modal_choose_interface = false\"\r\n  [nzTitle]=\"'Sales interface' | translate\"\r\n  [nzCancelText]=\"'Cancel' | translate\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row class=\"center-all-content\" style=\"justify-content: start !important;\">\r\n      <div *ngFor=\"let template of themeService.cafeTemplates\" nz-col nzSpan=\"12\" class=\"bottom-right\">\r\n        <div class=\"thumbnail\" (click)=\"default_selling_page = template.url\" [class.active]=\" default_selling_page == template.url\">\r\n          <img [src]=\"template.image\" style=\"width: 100%;\" />\r\n        </div>\r\n        <div style=\"text-align: center;\">\r\n          {{template.name | translate}} <i *ngIf=\"default_selling_page == template.url\" style=\"color: var(--ion-color-vh-green);\" nz-icon nzType=\"check-circle\" nzTheme=\"fill\"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------- MODAL / Cài đặt trang bán hàng -> Khác -------------------------------------------------- -->\r\n<nz-modal\r\n  nzCentered\r\n  nzWidth=\"50vw\"\r\n  [(nzVisible)]=\"showConfig\"\r\n  (nzOnCancel)=\"showConfig = false\"\r\n  [nzTitle]=\"'Other settings' | translate\">\r\n  <ng-container *nzModalContent>\r\n    <div style=\"display:flex; flex-direction:column; gap:20px;\">\r\n      <!-- Ngôn ngữ -->\r\n      <div>\r\n        <div>\r\n          <span style=\"font-weight:600\">{{'Language' | translate}}</span>\r\n          <nz-select style=\"width: 100%;\"\r\n            [(ngModel)]=\"languageService.selectedLanguage\"\r\n            (ngModelChange)=\"languageService.changeLanguage($event)\"\r\n            [nzCustomTemplate]=\"defaultTemplate\">\r\n            <nz-option *ngFor=\"let item of languageService.supportedLanguages\" nzCustomContent\r\n              [nzLabel]=\"item.name | translate\"\r\n              [nzValue]=\"item.value\">\r\n              <img style=\"width: 24px;\" [src]=\"item.img\" /> {{item.name}}\r\n            </nz-option>\r\n          </nz-select>\r\n          <ng-template #defaultTemplate let-selected>\r\n            <img style=\"width: 24px;\" src=\"assets/icon/settings/language/{{selected.nzValue}}.svg\" /> {{selected.nzLabel}}\r\n          </ng-template>\r\n        </div>\r\n      </div>\r\n      <!-- Màu sắc -->\r\n      <div>\r\n        <span style=\"font-weight:600\"> {{'Color' | translate}}</span>\r\n        <div class='color-picker'>\r\n          <div *ngFor=\"let color of themeService.themeList\"\r\n            class=\"color\"\r\n            [ngClass]=\"color.theme\"\r\n            (click)=\"themeService.changeColor(color.theme, $event)\"\r\n            [style.background-color]=\"color.color\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-container *nzModalFooter>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal hiễn thị cấu hình in -->\r\n<app-config-print [showConfigPrint]=\"showConfigPrint\" (hide)=\"showConfigPrint = false\">\r\n</app-config-print>\r\n\r\n<!-- modal hiễn thị cấu hình in bếp -->\r\n<app-config-print-kitchen  [showConfigPrint]=\"showConfigPrintKitchen\" (hide)=\"showConfigPrintKitchen = false\"></app-config-print-kitchen>\r\n\r\n<!-- modal hiễn thị cấu hình in bếp cho app-->\r\n<app-config-print-kitchen-electron  [showConfigPrint]=\"showConfigPrintKitchenElectron\" (hide)=\"showConfigPrintKitchenElectron = false\"></app-config-print-kitchen-electron>\r\n<!-- modal hiễn thị cấu hình bán hàng -->\r\n<app-config-sales [showConfigSales]=\"showConfigSales\" (hide)=\"showConfigSales = false\">\r\n</app-config-sales>\r\n<!-- modal thông tin tài khoản -->\r\n<app-account-information *ngIf=\"modalAccountInfo\" [modalAccountInfo]=\"modalAccountInfo\"\r\n    (closeAccount)=\"closeAccountInfo($event)\"></app-account-information>\r\n\r\n\r\n\r\n\r\n <!-- --------------------------------------------- MODAL THANH TOÁN ---------------------------------------------- -->\r\n<app-modal-payment\r\n*ngIf=\"isShowModalPay\"\r\n(onClose)=\"isShowModalPay = false;\"\r\n(onSave)=\"saveInvoice()\"\r\n></app-modal-payment>\r\n\r\n<!-- --------------------------------------------- MODAL THÊM KHÁCH HÀNG MỚI ---------------------------------------------- -->\r\n<app-modal-add-customer\r\n*ngIf=\"showDrawerAddCustomer\"\r\n(onClose)=\"showDrawerAddCustomer = false\"\r\n></app-modal-add-customer>\r\n\r\n<!-- --------------------------------------------- MODAL TÁCH ĐƠN ---------------------------------------------- -->\r\n<app-separate-table\r\n[prevPage]=\"'cafe-fnb'\"\r\n*ngIf=\"showModalSeparateTable\"\r\n(onClose)=\"showModalSeparateTable = false\"\r\n></app-separate-table>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------ MODAL TẠO ĐƠN ĐẶT BÀN ------------------------------------------------------ -->\r\n<app-modal-add-booking\r\n  *ngIf=\"isShowModalBookingAdd\"\r\n  (onCancel)=\"isShowModalBookingAdd = false\">\r\n</app-modal-add-booking>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------- BOOKING - CHỌN BÀN -------------------------------------------------------- -->\r\n<div class=\"custom-dialog\"\r\n  *ngIf=\"isShowModalBookingChooseTable\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"isShowModalBookingChooseTable = false\"></div>\r\n  <div class=\"custom-dialog__content\"\r\n    style=\"width: 100%\">\r\n    <app-choose-table\r\n      [type]=\"'modal'\"\r\n      (onChooseTable)=\"bookingOnOkChooseTable($event)\"\r\n      (onBackChooseTable)=\"isShowModalBookingChooseTable = false\">\r\n    </app-choose-table>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------ BOOKING - CHỌN MÓN ĂN ------------------------------------------------------ -->\r\n<div class=\"custom-dialog\"\r\n  *ngIf=\"isShowModalBookingChooseFood\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"bookingOnCancelChooseFood()\"></div>\r\n  <div class=\"custom-dialog__content\"\r\n    style=\"width: 100%\">\r\n    <app-cart-detail\r\n      [type]=\"'booking'\"\r\n      (bookingOnOk)=\"bookingOnOkChooseFood($event)\"\r\n      (bookingOnCancel)=\"bookingOnCancelChooseFood()\">\r\n    </app-cart-detail>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------------- MODAL IN BẾP Ở BOOKING ------------------------------------------------------ -->\r\n<nz-modal\r\n  *ngIf=\"bookingPrintKitchen.status\"\r\n  (nzOnCancel)=\"handleCancelPrint()\"\r\n  (nzOnOk)=\"bookingHandlePrint()\"\r\n  [(nzVisible)]=\"bookingPrintKitchen.status\"\r\n  [nzTitle]=\"'Print kitchen' | translate\"\r\n  [nzMaskClosable]=\"false\"\r\n  nzWidth=\"300\"\r\n  [nzFooter]=\"modalFooterPrintKitchen\">\r\n  <ng-container *nzModalContent>\r\n    <div id=\"print-kitchen\">\r\n      <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size}\">\r\n        {{bookingPrintKitchen.title | translate}}</div>\r\n      <div>\r\n        <span [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">{{'Table' | translate}}: </span>\r\n        <span><b [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">{{bookingPrintKitchen.table_name.length > 50 ? (bookingPrintKitchen.table_name.substring(0,49) + '...') : bookingPrintKitchen.table_name}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex; align-items: center;justify-content: space-between; border-bottom: 1px solid gray;\">\r\n        <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of bookingPrintKitchen.value\">\r\n        <div style=\"display: flex; align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n            {{item.name}} ({{productService.getUnit(item.units,item.ratio)}})\r\n          </div>\r\n          <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div style=\"word-break: break-word;\"\r\n            [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\"\r\n            [innerHTML]=\"item.subComboName\"></div>\r\n        </div>\r\n        <div style=\"display: flex; align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}} ({{productService.getUnit(sideDishes.units,sideDishes.ratio)}})\r\n          </div>\r\n          <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex; align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" + properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div [ngStyle]=\"{'font-family': bookingPrinterKitchen.font_family, 'font-size.pt': bookingPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"bookingHandlePrint()\">{{'Print' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CafeFnbMainComponent } from './cafe-fnb-main.component';\r\nimport { EwaComponentsModule } from 'ewa-components-angular';\r\nimport { ConfigSalesComponent } from './components/config-sales/config-sales.component';\r\nimport { ConfigPrintComponent } from './components/config-print/config-print.component';\r\nimport { ConfigPrintKitchenComponent } from './components/config-print-kitchen/config-print-kitchen.component';\r\nimport { ConfigPrintKitchenElectronComponent } from './components/config-print-kitchen-electron/config-print-kitchen-electron.component';\r\nimport { AccountInformationComponent } from './components/account-information/account-information.component';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { KeyboardModule } from 'src/app/sales/keyboard/keyboard.module';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TimeAgoPipeModule } from 'src/app/cafe/pipes/time-ago.pipe';\r\n\r\nimport { CartDetailComponent } from './pages/cart-detail/cart-detail.component';\r\nimport { ChooseTableComponent } from './pages/choose-table/choose-table.component';\r\nimport { ListInvoiceComponent } from './pages/list-invoice/list-invoice.component';\r\nimport { ListInvoiceDetailComponent } from './pages/list-invoice/detail/detail.component';\r\n\r\nimport { BillOptionComponent } from './components/modal/bill-option/bill-option.component';\r\nimport { BillItemComponent } from './components/bill-item/bill-item.component';\r\nimport { ChooseFoodComponent } from './components/modal/choose-food/choose-food.component';\r\nimport { FoodDetailComponent } from './components/food-detail/food-detail.component';\r\nimport { PrintOneColComponent } from './components/print-one-col/print-one-col.component';\r\nimport { ChooseCustomerComponent } from './components/choose-customer/choose-customer.component';\r\nimport { AddCustomerComponent } from './components/add-customer/add-customer.component';\r\nimport { EditFoodComponent } from './components/modal/edit-food/edit-food.component';\r\nimport { ModalDiscountComponent } from './components/modal/modal-discount/modal-discount.component';\r\nimport { ModalFeeComponent } from './components/modal/modal-fee/modal-fee.component';\r\nimport { ModalPaymentComponent } from './components/modal/modal-payment/modal-payment.component';\r\nimport { ChangePriceTypeComponent } from './components/modal/change-price-type/change-price-type.component';\r\nimport { OtherDiscountComponent } from './components/modal/other-discount/other-discount.component';\r\nimport { ProductGiftType7Component } from './components/modal/product-gift-type7/product-gift-type7.component';\r\nimport { ProductGiftComponent } from './components/modal/product-gift/product-gift.component';\r\nimport { SelectLotComponent } from './components/modal/select-lot/select-lot.component';\r\nimport { InfoPaymentComponent } from './components/info-payment/info-payment.component';\r\nimport { BookingItemComponent } from './components/booking-item/booking-item.component';\r\nimport { ModalAddBookingComponent } from './components/modal/modal-add-booking/modal-add-booking.component';\r\nimport { ModalAddCustomerComponent } from './components/modal/modal-add-customer/modal-add-customer.component';\r\nimport { InfoCustomerComponent } from './components/modal/info-customer/info-customer.component';\r\nimport { SeparateTableComponent } from './components/modal/separate-table/separate-table.component';\r\nimport { CartOptionComponent } from './components/modal/cart-option/cart-option.component';\r\nimport { ModalSelectLabelPrintComponent } from './components/modal/modal-select-label-print/modal-select-label-print.component';\r\nimport { ChangeBillTypeComponent } from './components/modal/change-bill-type/change-bill-type.component';\r\nimport { ModalEditUsedTimeComponent } from './components/modal/modal-edit-used-time/modal-edit-used-time.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CafeFnbMainComponent,\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: CartDetailComponent,\r\n  },\r\n  {\r\n    path: 'choose-table',\r\n    component: ChooseTableComponent,\r\n  },\r\n  {\r\n    path: 'list-invoice',\r\n    component: ListInvoiceComponent,\r\n  },\r\n  {\r\n    path: 'list-invoice/detail',\r\n    component: ListInvoiceDetailComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CafeFnbMainComponent,\r\n    ConfigSalesComponent,\r\n    ConfigPrintComponent,\r\n    ConfigPrintKitchenComponent,\r\n    ConfigPrintKitchenElectronComponent,\r\n    AccountInformationComponent,\r\n    BillOptionComponent,\r\n    BillItemComponent,\r\n    CartDetailComponent,\r\n    ChooseFoodComponent,\r\n    FoodDetailComponent,\r\n    PrintOneColComponent,\r\n    ChooseCustomerComponent,\r\n    AddCustomerComponent,\r\n    EditFoodComponent,\r\n    ModalDiscountComponent,\r\n    ModalFeeComponent,\r\n    ModalPaymentComponent,\r\n    ChangePriceTypeComponent,\r\n    OtherDiscountComponent,\r\n    ProductGiftType7Component,\r\n    ProductGiftComponent,\r\n    SelectLotComponent,\r\n    InfoPaymentComponent,\r\n    ChooseTableComponent,\r\n    BookingItemComponent,\r\n    ModalAddCustomerComponent,\r\n    ModalAddBookingComponent,\r\n    InfoCustomerComponent,\r\n    SeparateTableComponent,\r\n    CartOptionComponent,\r\n    ModalSelectLabelPrintComponent,\r\n    ChangeBillTypeComponent,\r\n    ListInvoiceComponent,\r\n    ListInvoiceDetailComponent,\r\n    ModalEditUsedTimeComponent,\r\n  ],\r\n  imports: [\r\n    EwaComponentsModule,\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    KeyboardModule,\r\n    NgZorroAntModule,\r\n    TimeAgoPipeModule,\r\n  ],\r\n})\r\nexport class CafeFnbMainModule { }\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhAlgorithm, VhAuth, VhImage } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\n\r\n\r\n@Component({\r\n  selector: 'app-account-information',\r\n  templateUrl: './account-information.component.html',\r\n  styleUrls: ['./account-information.component.scss']\r\n})\r\nexport class AccountInformationComponent {\r\n  @Input() modalAccountInfo: boolean = false\r\n  @Output() closeAccount = new EventEmitter<any>()\r\n  detailEmployee: FormGroup;\r\n  employee: any;\r\n  constructor(\r\n    public languageService: LanguageService,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService,\r\n  ) {\r\n    this.employee = this.vhAuth.getlocalEmployee(this.vhAuth.getUser()._id);\r\n    this.countryCode = this.employee.countryCode ?? this.fncService.defaultCountryCode;\r\n    this.callingCode = this.fncService.getCallingCodeFromCountryCode(this.countryCode) ?? this.fncService.defaultCallingCode;\r\n    this.formattedPhone = this.fncService.getFormattedPhoneNumber(this.employee.phone, this.countryCode as CountryCode);\r\n\r\n    this.detailEmployee = new FormGroup({\r\n      img: new FormControl(this.employee.img),\r\n      name: new FormControl(this.employee.name, Validators.compose([Validators.required, Validators.compose([Validators.minLength(6)])])),\r\n      email: new FormControl(this.employee.email, Validators.email),\r\n      password: new FormControl(this.employee.password, Validators.compose([Validators.minLength(5), Validators.required])),\r\n      phone: new FormControl(this.formattedPhone, [Validators.required, this.fncService.phoneValidator(() => this.countryCode)]),\r\n      gender: new FormControl(this.employee.gender),\r\n      address: new FormControl(this.employee.address),\r\n      dateofbirth: new FormControl(this.employee.dateofbirth),\r\n      datework: new FormControl(this.employee.datework),\r\n      contract: new FormControl(this.employee.contract),\r\n    });\r\n  }\r\n\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 256, 256, \"employees\", this.detailEmployee.value[\"img\"] || null).then(\r\n      photoURL => {\r\n        this.detailEmployee.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), 'success-toast');\r\n        this.updateEmployee(this.detailEmployee);\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), 'alert-toast');\r\n      }\r\n    );\r\n  }\r\n\r\n  closeModal() {\r\n    this.closeAccount.emit(false)\r\n  }\r\n\r\n  /**Cập nhật thông tin thay đổi */\r\n  updateEmployee(formValue) {\r\n    if (formValue.valid) {\r\n      let value = { ...formValue.value };\r\n      if(value.phone) {\r\n        value.countryCode = this.countryCode;\r\n        value.phone = this.fncService.getNationalPhoneNumber(value.phone, this.countryCode);\r\n        value.phoneNumber = this.fncService.getInternationalPhoneNumber(value.phone, this.countryCode);\r\n      }\r\n      this.vhAuth.updateEmployee(this.employee._id, value).catch(err => { console.error(err) })\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /** Mã quốc gia */\r\n  countryCode: string = this.fncService.defaultCountryCode;\r\n  /** Calling code */\r\n  callingCode: string = this.fncService.defaultCallingCode;\r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n}\r\n","<nz-modal nzWidth=\"60vw\" [(nzVisible)]=\"modalAccountInfo\" nzTitle=\"{{'Account information' | translate}}\"\r\n    [nzFooter]=\"null\" (nzOnOk)=\"closeModal()\" (nzOnCancel)=\"closeModal()\">\r\n    <ng-container *nzModalContent>\r\n        <div>\r\n            <form id=\"layout-employee-form\" class=\"ant-table-body\" nz-form [formGroup]=\"detailEmployee\">\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <div class=\"bg-img center-all-content\" (click)=\"getFile()\">\r\n                            <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n                                (change)=\"onUpload($event)\" />\r\n                            <img [ngStyle]=\"{width: detailEmployee.value.img ? '100%' : '60px'}\"\r\n                                onerror=\"this.src='./assets/icon/management/image_default.svg'\"\r\n                                [src]=\"detailEmployee.value.img\" />\r\n                        </div>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Employee name'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"updateEmployee(detailEmployee)\" formControlName=\"name\" nz-input\r\n                                        placeholder=\"{{'Enter employee name' | translate}}\" minlength=\"5\" required />\r\n                                    <ng-template #combineTplName let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Employee name is required'\r\n                                            | translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Email' | translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input readonly type=\"email\" formControlName=\"email\" nz-input\r\n                                        placeholder=\"{{'Enter email' | translate}}\" required />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Password' | translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input readonly formControlName=\"password\" type=\"password\" nz-input\r\n                                        placeholder=\"{{'Enter password' | translate}}\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <div class=\"calling-code\">\r\n                                      <span>+{{callingCode}}</span>\r\n                                      <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n                                    </div>\r\n                                    <input formControlName=\"phone\" readonly\r\n                                      [placeholder]=\"'Enter phone number' | translate\" type=\"tel\" nz-input required />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n                        <nz-date-picker (blur)=\"updateEmployee(detailEmployee)\" formControlName=\"dateofbirth\"\r\n                            nzPlaceHolder=\"{{'Select date' | translate}}\">\r\n                        </nz-date-picker>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b class='label'>{{'Address'|translate}}</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"updateEmployee(detailEmployee)\" formControlName=\"address\" nz-input\r\n                                        placeholder=\"{{'Enter address' | translate}}\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" *ngIf=\"employee.owner =='boss'\">\r\n                        <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n                        <nz-select style=\"border: none !important;\" nzShowSearch\r\n                            (ngModelChange)=\"updateEmployee(detailEmployee)\"\r\n                            nzPlaceHolder=\"{{'Select gender' | translate}}\" formControlName=\"gender\">\r\n                            <nz-option nzLabel=\"{{'Female' | translate}}\" nzValue=\"Female\"></nz-option>\r\n                            <nz-option nzLabel=\"{{'Male' | translate}}\" nzValue=\"Male\"></nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"12\">\r\n                                <div><b class='label'>{{'Starting date'|translate}}</b></div>\r\n                                <nz-date-picker style=\"width: 95%;\" (ngModelChange)=\"updateEmployee(detailEmployee)\"\r\n                                    formControlName=\"datework\">\r\n                                </nz-date-picker>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"12\">\r\n                                <div><b class='label'>{{'Contract' | translate}}</b></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control>\r\n                                        <nz-input-group>\r\n                                            <input style=\"width: 95%;\" (blur)=\"updateEmployee(detailEmployee)\"\r\n                                                formControlName=\"contract\" nz-input\r\n                                                placeholder=\"{{'Enter contract' | translate}}\" />\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { Component, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\n\r\n@Component({\r\n  selector: 'app-add-customer',\r\n  templateUrl: './add-customer.component.html',\r\n  styleUrls: [\r\n    './add-customer.component.scss',\r\n    './add-customer-custom.component.scss'\r\n  ]\r\n})\r\nexport class AddCustomerComponent extends CafeFnbUI {\r\n  @Output('backClick') backClick = new EventEmitter();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.customerType === 1) {\r\n      this.initAddRetailForm();\r\n      this.setRetailFormValues();\r\n    }\r\n    else {\r\n      this.initAddCustomerForm();\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      this.phone = this.vhAlgorithm.vhphoneNumber(\".phone input\");\r\n    }, 1000);\r\n  }\r\n\r\n  addRetailCustomer() {\r\n    let customer: any = { ...this.addRetailForm.value };\r\n\r\n    this.selectedBill.setRetailName(customer.retail_name);\r\n    this.selectedBill.setRetailPhone(customer.retail_phone);\r\n    this.selectedBill.setRetailAddress(customer.retail_address);\r\n\r\n    this.updateInvoice({ id_customer: 'id_retail' })\r\n  }\r\n\r\n  setRetailFormValues(): void {\r\n    if (!this.selectedBill || !this.addRetailForm) return;\r\n\r\n    this.addRetailForm.patchValue({\r\n      retail_name: this.selectedBill.getRetailName(),\r\n      retail_phone: this.selectedBill.getRetailPhone(),\r\n      retail_address: this.selectedBill.getRetailAddress(),\r\n    });\r\n  }\r\n\r\n  inputStyle = {\r\n    'border-top-width': '1px',\r\n    'border-left-width': '1px',\r\n    'border-bottom-width': '1px',\r\n    'border-right-width': '1px',\r\n    'border-color': '#c6c8d0',\r\n    'border-style': 'solid',\r\n    'border-top-left-radius': '5px',\r\n    'border-top-right-radius': '5px',\r\n    'border-bottom-right-radius': '5px',\r\n    'border-bottom-left-radius': '5px',\r\n  };\r\n\r\n  get _inputStyle() {\r\n    return JSON.parse(JSON.stringify(this.inputStyle))\r\n  }\r\n}\r\n","<!-- FORM THÊM KHÁCH HÀNG THÀNH VIÊN -->\r\n<ewa-frame-blank *ngIf=\"customerType === 2\" style=\"--width: 100%; --min-height: 710px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame add customer\">\r\n  <div style=\"display: flex; flex-direction: column; justify-content: space-between; height: 710px;\">\r\n    <div [formGroup]=\"addCustomerForm\" class=\"grid-67ea074d7bad2cf4395c312e\">\r\n      <div class=\"comp-67ea074e8963e3dee8e1c000\">\r\n        <ewa-text style=\"--color-content: var(--ion-color-vh-green);\" [text_content]=\"'Add customer' | translate\" _id=\"67ea074e8963e3dee8e1c000\" _name=\"Title\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Tên -->\r\n      <div class=\"comp-67ea074e6e5d1e2c44457f52\">\r\n        <ewa-input-group\r\n          [leftContent]=\"('Customer name' | translate) + '*'\"\r\n          [placeholder]=\"'Enter customer name' | translate\"\r\n          [ewaStyle]=\"{'input-group': _inputStyle}\"\r\n          formControlName=\"name\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input name\"\r\n        >\r\n        </ewa-input-group>\r\n        <ng-container *ngIf=\"addCustomerForm?.get('name')?.hasError('required') && addCustomerForm?.get('name')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'Customer name is required' | translate}}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <!-- Số điện thoại -->\r\n      <div class=\"comp-67ea074fe7daedb2606d5dd4\">\r\n        <div (click)=\"openSearchCountryCode('addCustomerForm')\" class=\"calling-code\">\r\n          <span>+{{callingCode}}</span>\r\n          <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n        </div>\r\n        <ewa-input-group\r\n          [leftContent]=\"('Phone number' | translate) + '*'\"\r\n          class=\"phone\"\r\n          formControlName=\"phone\"\r\n          (input)=\"formatPhoneNumber($event, 'addCustomerForm', 'phone')\"\r\n          [value]=\"formattedPhone\"\r\n          [placeholder]=\"'Enter customer phone' | translate\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input phone number\"\r\n          [ewaStyle]=\"{\r\n            'input-group': _inputStyle,\r\n            'input-group__input': {'padding-left': '50px'},\r\n            'input-group__addon-left': {'flex': '4.6 1 0%'},\r\n            'input-group__label': {'margin-left': '53px'}\r\n          }\">\r\n        </ewa-input-group>\r\n        <ng-container *ngIf=\"addCustomerForm?.get('phone')?.hasError('minlength') && addCustomerForm?.get('phone')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'At least 6 characters' | translate}}\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"addCustomerForm?.get('phone')?.hasError('required') && addCustomerForm?.get('phone')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'Phone number is required' | translate}}\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"addCustomerForm?.get('phone')?.hasError('invalidPhone') && addCustomerForm?.get('phone')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'_Invalid phone number' | translate}}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <!-- Email -->\r\n      <div class=\"comp-67ea074f7c43eeac7fd2888b\">\r\n        <ewa-input-group\r\n          [leftContent]=\"('Email' | translate)\"\r\n          [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '4.6 1 0%'}}\"\r\n          formControlName=\"email\"\r\n          [placeholder]=\"'Enter customer mail' | translate\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input email\"\r\n        >\r\n        </ewa-input-group>\r\n        <ng-container *ngIf=\"addCustomerForm?.get('email')?.hasError('email') && addCustomerForm?.get('email')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'Email is not correct' | translate}}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <!-- Loại khách hàng -->\r\n      <div class=\"comp-67ea0750c326e99d275264c8\" style=\"grid-area: 4/1/auto/span 2; margin-left: 0;\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame gender\">\r\n          <div class=\"grid-67ea0750c326e99d275264c8\">\r\n            <div class=\"comp-67ea0751c057611041db62c5\">\r\n              <ewa-input-group _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input gender\"\r\n                [leftContent]=\"('Customer type' | translate)\"\r\n                [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '2 1 0%'}}\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <div class=\"comp-67ea075161bea6597000d8db\" style=\"margin-left: 12%; z-index: 22;\">\r\n              <ewa-select _id=\"67ea075161bea6597000d8db\" _name=\"Select customer type\"\r\n                style=\"--width: 99.2%; --height: 40px; --border-color-select: #000000; --border-style-select: solid; --border-width-select: 1px;\"\r\n                [ewaStyle]=\"{'list-select': {'width': '88%'}}\"\r\n                [placeholder]=\"'Select customer type' | translate\"\r\n                [data_select]=\"[{value: false, label: 'Individual' | translate, isSelect: true}, {value: true, label: 'Business/Business household' | translate}]\"\r\n                (selectionChanged)=\"changeBusiness($event)\">\r\n              </ewa-select>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <!-- Mã số thuế -->\r\n      <div class=\"comp-67ea074f86fb7aad88f392a7\" style=\"grid-area: 5/1/5/4;\"\r\n        *ngIf=\"addCustomerForm.value.isBusiness\">\r\n        <ewa-input-group\r\n          [leftContent]=\"('Tax code' | translate) + '*'\"\r\n          [placeholder]=\"'Enter tax code' | translate\"\r\n          [ewaStyle]=\"{'input-group': _inputStyle}\"\r\n          formControlName=\"taxcode\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input tax code\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Ngày sinh -->\r\n      <div class=\"comp-67ea074f86fb7aad88f392a7\"\r\n        *ngIf=\"!addCustomerForm.value.isBusiness\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame date\">\r\n          <div class=\"grid-67ea074f86fb7aad88f392a7\">\r\n            <div class=\"comp-67ea075162482d3587b796dc\">\r\n              <ewa-input-group [leftContent]=\"('Date of birth' | translate)\" [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '4.6 1 0%'}}\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input date\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <div class=\"comp-67ea075141cb6eb7b315b649\">\r\n              <ewa-frame-blank style=\"--width: 98%; --min-height: 40px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame date picker\">\r\n                <div class=\"grid-67ea075141cb6eb7b315b649\">\r\n                  <input\r\n                    type=\"date\" formControlName=\"datebirth\"\r\n                    style=\"width:100%; margin-top:8px; height:28px; border-radius:8px; border:none; outline:none; padding:12px; font-size: 14px;\"\r\n                  />\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <!-- Giới tính -->\r\n      <div class=\"comp-67ea0750c326e99d275264c8\"\r\n        *ngIf=\"!addCustomerForm.value.isBusiness\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame gender\">\r\n          <div class=\"grid-67ea0750c326e99d275264c8\">\r\n            <div class=\"comp-67ea0751c057611041db62c5\">\r\n              <ewa-input-group [leftContent]=\"('Gender' | translate)\" [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '4.6 1 0%'}}\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input gender\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <div class=\"comp-67ea075161bea6597000d8db\">\r\n              <ewa-select\r\n                [(ngModel)]=\"selectedValue\" formControlName=\"gender\"\r\n                _id=\"67ea075161bea6597000d8db\" _name=\"Select gender\"\r\n                style=\"--height: 40px; --border-color-select: #000000; --border-style-select: solid; --border-width-select: 1px\"\r\n                [placeholder]=\"'Select gender' | translate\"\r\n              >\r\n                <ewa-option [label]=\"'Female' | translate\" [value]=\"'Female'\"></ewa-option>\r\n                <ewa-option [label]=\"'Male' | translate\" [value]=\"'Male'\"></ewa-option>\r\n              </ewa-select>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <!-- Quốc gia -->\r\n      <div class=\"comp-67ea074fb74b7521811c6322\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('Country' | translate)\" formControlName=\"country\" [placeholder]=\"'Enter country' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input quốc gia\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Tỉnh -->\r\n      <div class=\"comp-680206ffcbddc6eb8d290b38\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('Province' | translate)\" formControlName=\"province\" [placeholder]=\"'Enter province' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input tỉnh\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Quận -->\r\n      <div class=\"comp-680206e000a565f178c76905\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('District' | translate)\" formControlName=\"district\" [placeholder]=\"'Enter district' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input quận huyện\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Địa chỉ -->\r\n      <div class=\"comp-67ea075037b14083410e9953\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('Address' | translate)\" formControlName=\"address\" [placeholder]=\"'Enter address' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input address\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Ghi chú -->\r\n      <div class=\"comp-67ea0750608ef1f1a3752da1\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('Note' | translate)\" formControlName=\"note\" [placeholder]=\"'Enter note' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input note\">\r\n        </ewa-input-group>\r\n      </div>\r\n      <!-- Cho phép nợ -->\r\n      <div style=\"padding-top: 18px; grid-area: 11 / 1/ auto / span 2; padding-left: 4px;\">\r\n        <div></div>\r\n        <label nz-checkbox formControlName=\"debt_enable\">{{'Debit permission' | translate}}</label>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-container\">\r\n      <div class=\"comp-67ea074e2a3d864da9341c91\">\r\n        <ewa-button\r\n          (click)=\"backClick.emit()\"\r\n          [btn_content]=\"'Cancel' | translate\"\r\n          style=\"--color-content: var(--ion-color-vh-green); --border: 1px solid var(--ion-color-vh-green);\"\r\n          _id=\"67e77a32f01a6c3882f0b8ad\" _name=\"Button back\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n      <div class=\"comp-67ea074e9e72b8fd23e16527\">\r\n        <ewa-button\r\n          [style.--opacity]=\"addCustomerForm.invalid ? 0.5 : 1\"\r\n          [btn_content]=\"'Add' | translate\"\r\n          [disabled]=\"addCustomerForm.invalid\"\r\n          style=\"--background-color: var(--ion-color-vh-green)\"\r\n          (click)=\"addCustomer(); backClick.emit()\"\r\n          _id=\"67e77a335442d5134616c9e9\" _name=\"Button add customer\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ewa-frame-blank>\r\n\r\n\r\n\r\n<!-- FORM THÊM KHÁCH LẺ -->\r\n<ewa-frame-blank *ngIf=\"customerType === 1\" style=\"--width: 100%; --min-height: 710px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame add customer\">\r\n  <div style=\"display: flex; flex-direction: column; justify-content: space-between; height: 710px;\">\r\n    <div [formGroup]=\"addRetailForm\" class=\"grid-67ea074d7bad2cf4395c312e\">\r\n      <div class=\"comp-67ea074e8963e3dee8e1c000\">\r\n        <ewa-text style=\"--color-content: var(--ion-color-vh-green);\" [text_content]=\"'Add customer retail' | translate\" _id=\"67ea074e8963e3dee8e1c000\" _name=\"Title\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Tên -->\r\n      <div class=\"comp-67ea074e6e5d1e2c44457f52\">\r\n        <ewa-input-group\r\n          [leftContent]=\"('Customer name' | translate) + '*'\"\r\n          [ewaStyle]=\"{'input-group': _inputStyle}\"\r\n          [placeholder]=\"'Enter customer name' | translate\"\r\n          formControlName=\"retail_name\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input name\"\r\n        >\r\n        </ewa-input-group>\r\n        <ng-container *ngIf=\"addRetailForm?.get('retail_name')?.hasError('required') && addRetailForm?.get('retail_name')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'Customer name is required' | translate}}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <!-- Số điện thoại -->\r\n      <div style=\"margin-left: 0%;margin-top: 7.1411px;display: block;grid-area: 3 / 1 / auto / span 2;\">\r\n        <ewa-input-group\r\n          [leftContent]=\"('Phone number' | translate) + '*'\"\r\n          class=\"phone\"\r\n          formControlName=\"retail_phone\"\r\n          style=\"--width: 100%\"\r\n          [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '2 1 0%'}}\"\r\n          [placeholder]=\"'Enter customer phone' | translate\"\r\n          _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input phone number\"\r\n        >\r\n        </ewa-input-group>\r\n        <ng-container *ngIf=\"addRetailForm?.get('retail_phone')?.hasError('minlength') && addRetailForm?.get('retail_phone')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'At least 6 characters' | translate}}\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"addRetailForm?.get('retail_phone')?.hasError('required') && addRetailForm?.get('retail_phone')?.dirty\">\r\n          <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px; padding-left: 4px\">\r\n            {{'Phone number is required' | translate}}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <!-- Địa chỉ -->\r\n      <div class=\"comp-67ea075037b14083410e9953\">\r\n        <ewa-input-group [ewaStyle]=\"{'input-group': _inputStyle}\" [leftContent]=\"('Address' | translate)\" formControlName=\"retail_address\" [placeholder]=\"'Enter address' | translate\" _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input address\">\r\n        </ewa-input-group>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-container\">\r\n      <div class=\"comp-67ea074e2a3d864da9341c91\">\r\n        <ewa-button\r\n          (click)=\"backClick.emit()\"\r\n          [btn_content]=\"'Cancel' | translate\"\r\n          style=\"--color-content: var(--ion-color-vh-green); --border: 1px solid var(--ion-color-vh-green);\"\r\n          _id=\"67e77a32f01a6c3882f0b8ad\" _name=\"Button back\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n      <div class=\"comp-67ea074e9e72b8fd23e16527\">\r\n        <ewa-button\r\n          [style.--opacity]=\"addRetailForm.invalid ? 0.5 : 1\"\r\n          [btn_content]=\"'Add' | translate\"\r\n          [disabled]=\"addRetailForm.invalid\"\r\n          style=\"--background-color: var(--ion-color-vh-green)\"\r\n          (click)=\"addRetailCustomer();backClick.emit()\"\r\n          _id=\"67e77a335442d5134616c9e9\" _name=\"Button add customer\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ewa-frame-blank>\r\n","import { Component, Input, ChangeDetectorRef, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-bill-item',\r\n  templateUrl: './bill-item.component.html',\r\n  styleUrls: ['./bill-item.component.scss']\r\n})\r\nexport class BillItemComponent extends CafeFnbUI {\r\n  @Input('bill') bill;\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.frameStyle = {\r\n      'border-top-width': '4px',\r\n      'border-left-width': '0px',\r\n      'border-bottom-width': '0px',\r\n      'border-right-width': '0px',\r\n      'border-color': this.bill?.id_table === 'go_home' ? '#ff5900' : 'var(--ion-color-vh-green)',\r\n      'border-style': 'solid',\r\n    };\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['bill']) {\r\n      this.frameStyle = {\r\n        'border-top-width': '4px',\r\n        'border-left-width': '0px',\r\n        'border-bottom-width': '0px',\r\n        'border-right-width': '0px',\r\n        'border-color': this.bill?.id_table === 'go_home' ? '#ff5900' : 'var(--ion-color-vh-green)',\r\n        'border-style': 'solid',\r\n      };\r\n    }\r\n  }\r\n\r\n  dropdownVisibilityMap = new Map<string, boolean>();\r\n\r\n  toggleDropdown(id: string): void {\r\n    const current = this.dropdownVisibilityMap.get(id) ?? false;\r\n\r\n    // Hide all dropdowns first\r\n    for (let key of this.dropdownVisibilityMap.keys()) {\r\n      this.dropdownVisibilityMap.set(key, false);\r\n    }\r\n\r\n    // Toggle current one\r\n    this.dropdownVisibilityMap.set(id, !current);\r\n  }\r\n\r\n  onDropdownVisibilityChange(visible: boolean, id: string): void {\r\n    this.dropdownVisibilityMap.set(id, visible);\r\n  }\r\n\r\n  closeDropdown(billId: string) {\r\n    this.dropdownVisibilityMap.set(billId, false);\r\n  }\r\n\r\n  gotoCartDetail() {\r\n    this.selectedBill = new VhOrderInvoices(this.bill, [], this.vhQueryCafe);\r\n    this.selectedTableID = this.bill.id_table;\r\n    this.areaChanged(this.bill.id_area);\r\n    this.debt = this.bill.id_customer == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.bill.id_customer);\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n    if (this.bill.bill_type == 5) {\r\n      this.router.navigate(['/cafe/cafe-fnb/detail'], { state: { id_table: this.selectedTableID, id_bill: this.bill._id, dataRestore } });\r\n    }\r\n  }\r\n\r\n  handlePayment() {\r\n    this.selectedBill = new VhOrderInvoices(this.bill, [], this.vhQueryCafe);\r\n    this.selectedTableID = this.bill.id_table;\r\n    this.areaChanged(this.bill.id_area);\r\n    this.debt = this.bill.id_customer == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.bill.id_customer);\r\n    this.initBillToPayment(this.bill).then(() => {\r\n      this.isShowModalPay = true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Hàm cập nhật thông tin hóa đơn sau khi chuyển bàn\r\n   * @param bill\r\n   * @returns\r\n   */\r\n  initBillToPayment(bill) {\r\n    return Promise.all([\r\n      this.vhQueryCafe.getBill(bill._id),\r\n      this.vhQueryCafe.getBill_details_byId_bill(bill._id),\r\n      this.vhComponent.showLoading(''),\r\n      this.vhQuery.getDocsByFields('barcode_designs ', {\r\n        id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n        default: { $eq: true },\r\n      }),\r\n      this.vhQueryCafe.getEarningPointsBills(),\r\n      this.vhQueryCafe.getEarningPointsProducts(),\r\n    ])\r\n      .then(\r\n        ([\r\n          bill,\r\n          billDetail,\r\n          loading,\r\n          label,\r\n          earning_point_bills,\r\n          earning_points_products,\r\n        ]) => {\r\n          if (label['length'] && label[0].status) this.stamp = label[0];\r\n          this.list_earning_point_bills = earning_point_bills;\r\n          this.list_earning_points_products = earning_points_products;\r\n\r\n          if (!bill) {\r\n            this.vhComponent.alertMessage('', '', this.languageService.translate('The invoice is not existed'), 'OK').then(() => this.goBack());\r\n            return;\r\n          }\r\n          // Khởi tạo đối tượng hóa đơn\r\n          this.selectedBill = new VhOrderInvoices(\r\n            bill,\r\n            this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n            this.vhQueryCafe,\r\n            this.platform\r\n          );\r\n          this.initCustomer();\r\n\r\n          this.getClassAndProgram();\r\n          // kiểm tra cho phép nợ\r\n          this.debt = this.selectedBill.getIdPartner() == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner());\r\n          this.default_price_type = this.selectedBill.getPriceType() ? this.selectedBill.getPriceType() : 1;\r\n\r\n          this.selectedBill.setIdTable(bill['id_table']);\r\n          this.selectedBill.setIdEmployee(this.vhAuth.getUser()._id);\r\n          this.selectedBill.setIdArea(bill['id_area']);\r\n\r\n          // lấy thuế\r\n          let tax: any = this.vhQueryCafe.getlocalTaxs().find((tax) => tax.status && tax.default);\r\n          if (tax) this.selectedBill.setTax(parseFloat(tax.value));\r\n\r\n          // lấy thông tin bàn\r\n          if (this.selectedBill.getIdTable() == \"go_home\") {\r\n            this.tableInfo = this.languageService.translate(\"Take away\");\r\n          }\r\n          else {\r\n            this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n          }\r\n\r\n          // Xử lý dịch vụ thời gian\r\n          if(this.selectedBill.getInvoiceDetail().length && this.productService.isContainServiceTime(this.selectedBill)) {\r\n            this.endTime = new Date();\r\n            // set lại price\r\n            this.selectedBill.getInvoiceDetail()?.forEach((item, index) => {\r\n              if (item.ptype === VhType.SERVICETIME && !item.is_paused) {\r\n                const newItem = { ...item, time_end_order: this.endTime };\r\n                const serviceTimePrice: any = this.productService.calculateServiceTimePrice(newItem, this.endTime, this.selectedBill.getPriceType());\r\n                newItem.price = serviceTimePrice.total_price;\r\n                newItem.price_origin = serviceTimePrice.total_price;\r\n                this.selectedBill.getInvoiceDetail()[index] = {...newItem};\r\n              }\r\n            });\r\n            // Tính lại total cho bill\r\n            this.selectedBill.setSubTotal();\r\n          }\r\n        }\r\n      )\r\n      .catch((err) => {\r\n        console.error(err);\r\n        this.vhComponent.alertMessageDesktop('error', this.languageService.translate('Connect error'));\r\n      })\r\n      .finally(() => {\r\n        this.vhComponent.hideLoading(0);\r\n      });\r\n  }\r\n\r\n  frameStyle: any = {};\r\n\r\n  frameStyleKhuVuc: any = {\r\n    'border-top-width': '0px',\r\n    'border-left-width': '0px',\r\n    'border-bottom-width': '1px',\r\n    'border-right-width': '0px',\r\n    'border-color': '#f4f6f8',\r\n    'border-style': 'solid',\r\n  };\r\n\r\n  get _frameStyle() {\r\n    return JSON.parse(JSON.stringify(this.frameStyle));\r\n  }\r\n}\r\n","<div style=\"border: 1px solid var(--ion-color-vh-green-dark); border-radius: 4px; border-top-width: 0px\">\r\n  <ewa-frame-blank\r\n    [ewaStyle]=\"{'frame-blank': _frameStyle}\"\r\n    style=\"--width: 100%; --min-height: 142px; --background-color: #ffffff; --border-radius: 4px\"\r\n    _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bill\" (click)=\"gotoCartDetail()\"\r\n  >\r\n    <div class=\"grid-67e618bd80e02e0236ef3195\">\r\n      <div class=\"comp-67e618be036093c8e0f61e17\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 32px; --background-color: #f4f6f8; --border-radius: 4px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"top\">\r\n          <div class=\"grid-67e618be036093c8e0f61e17\">\r\n            <div class=\"comp-67e618bf63aecf3bd4a227f8\">\r\n              <ewa-frame-blank style=\"--width: 28px; --min-height: 28px; --background-color: #f4f6f8;\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"icon-wrapper\">\r\n                <div class=\"grid-67e618bf63aecf3bd4a227f8\">\r\n                  <div class=\"comp-67e618c28813329044d8ed22\">\r\n                    <ewa-shape [style.--background-color]=\"bill.id_table === 'go_home' ? '#ff5900' : 'var(--ion-color-vh-green)'\" _id=\"67e618c28813329044d8ed22\" _name=\"shape\">\r\n                    </ewa-shape>\r\n                  </div>\r\n                  <div class=\"comp-67e618c26b8caa03762f94e4\">\r\n                    <ewa-icon *ngIf=\"bill.id_table !== 'go_home'\" _id=\"67e618c26b8caa03762f94e4\" _name=\"icon\">\r\n                    </ewa-icon>\r\n                    <ewa-icon *ngIf=\"bill.id_table === 'go_home'\" _id=\"67f73c4ca5fc21d2f396818d\" _name=\"icon\">\r\n                    </ewa-icon>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div class=\"comp-67e618bf338642e538f605df\">\r\n              <ewa-text style=\"--width: 100%\" [text_content]=\"bill.id_table === 'go_home' ? 'Mang về' : bill.areaName\" _id=\"67e618bf338642e538f605df\" _name=\"txt-khu-vuc\">\r\n              </ewa-text>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <div class=\"comp-67e618be7dad8eb576e81408\">\r\n        <ewa-frame-blank\r\n          [ewaStyle]=\"{'frame-blank': frameStyleKhuVuc}\"\r\n          style=\"--width: 100%; --min-height: 36px; --cursor: pointer; --background-color: transparent\"\r\n          _id=\"67e5fdbdf2f740b98879bf95\" _name=\"khu-vuc\"\r\n        >\r\n          <div class=\"grid-67e618be7dad8eb576e81408\">\r\n            <div class=\"comp-67e618c0d30c893f4efe661f\">\r\n              <ewa-text style=\"--cursor: pointer\" [text_content]=\"bill.id_table === 'go_home' ? bill.bill_code : bill.tableName\" _id=\"67e618c0d30c893f4efe661f\" _name=\"txt-ban\">\r\n              </ewa-text>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <div class=\"comp-67e618be3d2a342d37aa842f\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 36px; --cursor: pointer; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"thoigian-tien\">\r\n          <div class=\"grid-67e618be3d2a342d37aa842f\">\r\n            <div class=\"comp-67e618c16f8a529e597c0c3a\">\r\n              <ewa-icon _id=\"67e618c16f8a529e597c0c3a\" _name=\"icon-thoi-gian\">\r\n              </ewa-icon>\r\n            </div>\r\n            <div class=\"comp-67e618c0120183314f4974f2\">\r\n              <ewa-text style=\"--cursor: pointer\" [text_content]=\"bill.date | timeAgo\" _id=\"67e618c0120183314f4974f2\" _name=\"txt-thoi-gian\">\r\n              </ewa-text>\r\n            </div>\r\n            <div class=\"comp-67e618c111c697ed5791244f\">\r\n              <ewa-icon _id=\"67e618c111c697ed5791244f\" _name=\"icon-tien\">\r\n              </ewa-icon>\r\n            </div>\r\n            <div class=\"comp-67e618c16130f8a45c77b6fe\">\r\n              <ewa-text style=\"--width: 331.579%; --cursor: pointer\" [text_content]=\"vhAlgorithm.vhcurrencyunit_symbol(bill.payment)\" _id=\"67e618c0120183314f4974f2\" _name=\"txt-tien\">\r\n              </ewa-text>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <div class=\"comp-67e618bfc4d9506437ce99b4\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 36px; --background-color: #f4f6f8; --border-radius: 0px 0px 4px 4px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bottom\">\r\n          <div class=\"grid-67e618bfc4d9506437ce99b4\">\r\n            <div class=\"comp-67f72a40f44ca3950ac12d21\">\r\n              <ewa-button\r\n                nz-dropdown\r\n                [nzDropdownMenu]=\"menuMore\"\r\n                [nzTrigger]=\"'manual'\"\r\n                [nzVisible]=\"dropdownVisibilityMap.get(bill._id) || false\"\r\n                (nzVisibleChange)=\"onDropdownVisibilityChange($event, bill._id)\"\r\n                (click)=\"toggleDropdown(bill._id)\"\r\n                _id=\"67f72a40f44ca3950ac12d21\"\r\n                style=\"--height: 36px; --color-icon: var(--ion-color-vh-green);\"\r\n                [ewaStyle]=\"{ 'button': { 'border-color': 'var(--ion-color-vh-green)' } }\"\r\n                _name=\"btn-more\">\r\n              </ewa-button>\r\n\r\n              <nz-dropdown-menu #menuMore=\"nzDropdownMenu\">\r\n                <app-bill-option [bill]=\"bill\" (closeDropdown)=\"closeDropdown(bill._id)\"></app-bill-option>\r\n              </nz-dropdown-menu>\r\n            </div>\r\n            <div class=\"comp-67e618c243026c4b66a26fb7\">\r\n              <ewa-button [btn_content]=\"'Pay' | translate\" style=\"--height: 36px;--color-content: var(--ion-color-vh-green)\" (click)=\"handlePayment()\" _id=\"67e618c243026c4b66a26fb7\" _name=\"btn-thanh-toan\">\r\n              </ewa-button>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </ewa-frame-blank>\r\n</div>\r\n","import { Component,ChangeDetectorRef, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\n\r\n@Component({\r\n  selector: 'app-booking-item',\r\n  templateUrl: './booking-item.component.html',\r\n  styleUrls: [\r\n    './booking-item.component.scss',\r\n    './booking-item-custom.component.scss'\r\n  ]\r\n})\r\nexport class BookingItemComponent extends CafeFnbUI {\r\n\r\n  @Input() bookingBillItem: any;\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n\r\n\r\n  dropdownVisibilityMap = new Map<string, boolean>();\r\n\r\n\r\n  \r\n  toggleDropdown(id: string): void {\r\n    const current = this.dropdownVisibilityMap.get(id) ?? false;\r\n    for (let key of this.dropdownVisibilityMap.keys()) {\r\n      this.dropdownVisibilityMap.set(key, false);\r\n    }\r\n    this.dropdownVisibilityMap.set(id, !current);\r\n  }\r\n\r\n\r\n\r\n  onDropdownVisibilityChange(visible: boolean, id: string): void {\r\n    this.dropdownVisibilityMap.set(id, visible);\r\n  }\r\n\r\n\r\n\r\n  goToOrder() {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.billService.getBillDetailsByIdBill(this.bookingBillItem._id).then((invoiceDetail: any) => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.bookingBillObject = {\r\n          ...this.bookingBillItem,\r\n          invoiceDetail: invoiceDetail,\r\n        };\r\n        this.mapBookingData();\r\n        this.bookingGoToOrder(this.bookingBillItem._id, this.bookingBillItem.id_table);\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<ewa-frame-blank _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bill\"\r\n  style=\"--width: 100%; --min-height: 139px; --background-color: #ffffff; --border-radius: 4px; --border: 1px solid var(--ion-color-vh-green-dark)\"\r\n  (click)=\"goToBookingDetail(bookingBillItem)\">\r\n  <div class=\"grid-67e65de80f95df39bed37510\">\r\n    <div class=\"comp-67e65de8baf4649d50dad811\">\r\n      <ewa-frame-blank style=\"--width: 100%; --min-height: 32px; --background-color: #f4f6f8; --border-radius: 4px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"top\">\r\n        <div class=\"grid-67e65de8baf4649d50dad811\">\r\n          <div class=\"comp-67e65de97ac9d38b936bb242\">\r\n            <ewa-text _id=\"67e65de97ac9d38b936bb242\" _name=\"txt-khu-vuc\"\r\n              [text_content]=\"bookingBillItem.id_customer === 'id_retail'\r\n                              ? bookingBillItem.retail_name ? bookingBillItem.retail_name + ' - ' + bookingBillItem.retail_phone : ('Retail customer' | translate)\r\n                              : vhQueryCafe.getlocalCustomer(bookingBillItem.id_customer).name + ' - ' + vhQueryCafe.getlocalCustomer(bookingBillItem.id_customer).phone\r\n              \"\r\n              [style.--color-content]=\"bookingListIdBillsOverdue.includes(bookingBillItem._id) ? 'var(--ion-color-vh-red)' : '#000000'\">\r\n            </ewa-text>\r\n          </div>\r\n        </div>\r\n      </ewa-frame-blank>\r\n    </div>\r\n    <div class=\"comp-67e65de825c71098e7260241\">\r\n      <ewa-frame-blank style=\"--width: 100%; --min-height: 70px; --cursor: pointer; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"main\">\r\n        <div class=\"grid-67e65de825c71098e7260241\">\r\n          <div class=\"comp-67e65de936e94eb26d937618\">\r\n            <ewa-frame-blank _id=\"67e65de936e94eb26d937618\" _name=\"ten-ban\">\r\n              <div class=\"grid-67e65de936e94eb26d937618\">\r\n                <div class=\"comp-67e65deb48f8275dc3fedafa\">\r\n                  <ewa-text _id=\"67e65deb48f8275dc3fedafa\" _name=\"txt-ten-ban\"\r\n                    [text_content]=\"this.vhQueryCafe.getlocalTable(bookingBillItem.id_table).name\">\r\n                  </ewa-text>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-67e65dea95eaec234e235423\">\r\n            <ewa-frame-blank style=\"--width: 225%; --min-height: 33px; --height: 33px; --cursor: pointer; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"thoigian-tongtien\">\r\n              <div class=\"grid-67e65dea95eaec234e235423\">\r\n                <div class=\"comp-67e65decb6becfbb2d6cc1f7\">\r\n                  <ewa-icon _id=\"67e65decb6becfbb2d6cc1f7\" _name=\"icon-thoi-gian\"\r\n                    [style.--color]=\"bookingListIdBillsOverdue.includes(bookingBillItem._id) ? 'var(--ion-color-vh-red)' : '#c5ced6'\"\r\n                    [style.--font-size]=\"'18px'\">\r\n                  </ewa-icon>\r\n                </div>\r\n                <div class=\"comp-67e65decf895ce7c62b39910\">\r\n                  <ewa-text _id=\"67e65de97ac9d38b936bb242\" _name=\"txt-thoi-gian\"\r\n                    [text_content]=\"bookingBillItem.date | date : 'HH:mm dd/MM/yyyy'\"\r\n                    style=\"--width: 100%\">\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- <div class=\"comp-67e65dec9f53e34cf8d35a29\">\r\n                  <ewa-frame-blank _id=\"67e65dec9f53e34cf8d35a29\" _name=\"khach-wrapper\">\r\n                    <div class=\"grid-67e65dec9f53e34cf8d35a29\">\r\n                      <div class=\"comp-67e65ded8c8e52c0c4567db2\">\r\n                        <ewa-icon _id=\"67e65ded8c8e52c0c4567db2\" _name=\"icon\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                      <div class=\"comp-67e65ded697e21be66a12c81\">\r\n                        <ewa-text _id=\"67e65ded697e21be66a12c81\" _name=\"txt-so-luong\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div> -->\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-67e65dea3c1c965f11626938\">\r\n            <ewa-frame-blank _id=\"67e65dea3c1c965f11626938\" _name=\"tong-tien\">\r\n              <div class=\"grid-67e65dea3c1c965f11626938\">\r\n                <div class=\"comp-67e65debb0fde608fc0e947a\">\r\n                  <ewa-icon _id=\"67e65debb0fde608fc0e947a\" _name=\"icon-tien\"\r\n                    [style.--font-size]=\"'18px'\">\r\n                  </ewa-icon>\r\n                </div>\r\n                <div class=\"comp-67e65dec15ef0bf72842428c\">\r\n                  <ewa-text _id=\"67e65de97ac9d38b936bb242\" _name=\"txt-tien\"\r\n                    [text_content]=\"vhAlgorithm.vhcurrencyunit_symbol(bookingBillItem.total*(1+bookingBillItem.tax/100))\"\r\n                    style=\"--width: 100%\">\r\n                  </ewa-text>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-frame-blank>\r\n    </div>\r\n    <div class=\"comp-67e65de9264faed3f838c50e\">\r\n      <ewa-frame-blank style=\"--width: 100%; --min-height: 36px; --background-color: #f4f6f8; --border-radius: 0px 0px 4px 4px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bottom\">\r\n        <div class=\"grid-67e65de9264faed3f838c50e\">\r\n          <div class=\"comp-67f72a40f44ca3950ac12d21\">\r\n            <ewa-button _id=\"67f72a40f44ca3950ac12d21\" _name=\"btn-more\"\r\n              nz-dropdown\r\n              [nzDropdownMenu]=\"bookingItemMenu\"\r\n              [nzTrigger]=\"'manual'\"\r\n              [nzVisible]=\"dropdownVisibilityMap.get(bookingBillItem._id) || false\"\r\n              style=\"--color-icon: var(--ion-color-vh-green)\"\r\n              [ewaStyle]=\"{ 'button': { 'border-color': 'var(--ion-color-vh-green)' } }\"\r\n              (nzVisibleChange)=\"onDropdownVisibilityChange($event, bookingBillItem._id)\"\r\n              (click)=\"toggleDropdown(bookingBillItem._id)\">\r\n            </ewa-button>\r\n\r\n            <nz-dropdown-menu #bookingItemMenu=\"nzDropdownMenu\">\r\n              <div class=\"comp-67e65ded8b0ab2762582588c\">\r\n                <ewa-block-hover style=\"--width: 151px; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px; --border: 1px solid var(--ion-color-vh-green-dark)\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"dat-ban-options\"\r\n                  [style.--min-height]=\"checkPrinterKitchen.enable ? '120px' : '90px'\">\r\n                  <div class=\"grid-67e65ded8b0ab2762582588c\">\r\n                    <div class=\"comp-67e668eeda801cdf06ebaa6d\">\r\n                      <ewa-frame-blank _id=\"67e668eeda801cdf06ebaa6d\" _name=\"wrapper\"\r\n                        [style.--min-height]=\"checkPrinterKitchen.enable ? '120px' : '90px'\">\r\n                        <div class=\"grid-67e668eeda801cdf06ebaa6d\">\r\n                          <!-- Chuyển bàn -->\r\n                          <div class=\"comp-67e668f0db94e94749cb586b\">\r\n                            <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"chuyen-ban\">\r\n                              <div class=\"grid-67e668f0db94e94749cb586b\">\r\n                                <div class=\"comp-67e668f1e96680d7f03d8cf5\">\r\n                                  <ewa-image [image_url]=\"'https://www.svgrepo.com/download/3265/select.svg'\" _id=\"67e668f1e96680d7f03d8cf5\" _name=\"icon-chuyen-ban\"\r\n                                    (click)=\"bookingBillObject = bookingBillItem; toggleDropdown(bookingBillItem._id); bookingChooseTableType = 'change'; isShowModalBookingChooseTable = true\">\r\n                                  </ewa-image>\r\n                                </div>\r\n                                <div class=\"comp-67e668f154a41d34d1462aff\">\r\n                                  <ewa-button _id=\"67e668f154a41d34d1462aff\" _name=\"btn-chuyen-ban\"\r\n                                    (click)=\"bookingBillObject = bookingBillItem; toggleDropdown(bookingBillItem._id); bookingChooseTableType = 'change'; isShowModalBookingChooseTable = true\"\r\n                                    [btn_content]=\"'Switch table' | translate\">\r\n                                  </ewa-button>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                          <!-- Chọn món -->\r\n                          <div class=\"comp-67e668ef70c205f83540dce5\">\r\n                            <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"chon-mon\">\r\n                              <div class=\"grid-67e668ef70c205f83540dce5\">\r\n                                <div class=\"comp-67e668f0c8ec21b1379809a7\">\r\n                                  <ewa-image [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/4509750.png'\" _id=\"67e668f1e96680d7f03d8cf5\" _name=\"icon-chon-mon\"\r\n                                    (click)=\"bookingBillObject = bookingBillItem; toggleDropdown(bookingBillItem._id); bookingOnOpenChooseFoodFromDropDown()\">\r\n                                  </ewa-image>\r\n                                </div>\r\n                                <div class=\"comp-67e668f0b988d89a6efd6eca\">\r\n                                  <ewa-button _id=\"67e668f154a41d34d1462aff\" _name=\"btn-chon-mon\"\r\n                                    (click)=\"bookingBillObject = bookingBillItem; toggleDropdown(bookingBillItem._id); bookingOnOpenChooseFoodFromDropDown()\"\r\n                                    [btn_content]=\"'Select dishes' | translate\">\r\n                                  </ewa-button>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                          <!-- In -->\r\n                          <div class=\"comp-67e66fa9227b8fb05bbdd042\"\r\n                            *ngIf=\"checkPrinterKitchen.enable\">\r\n                            <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"in\">\r\n                              <div class=\"grid-67e66fa9227b8fb05bbdd042\">\r\n                                <div class=\"comp-67e66faa3f9648314bd82922\">\r\n                                  <ewa-image [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/92204.png'\" _id=\"67e668f1e96680d7f03d8cf5\" _name=\"icon-in\"\r\n                                    (click)=\"toggleDropdown(bookingBillItem._id); onBookingPrintKitchen(bookingBillItem._id, bookingBillItem.id_table)\">\r\n                                  </ewa-image>\r\n                                </div>\r\n                                <div class=\"comp-67e66faa3f0e56fa6209f720\">\r\n                                  <ewa-button _id=\"67e668f154a41d34d1462aff\" _name=\"btn-in\"\r\n                                    (click)=\"toggleDropdown(bookingBillItem._id); onBookingPrintKitchen(bookingBillItem._id, bookingBillItem.id_table)\"\r\n                                    [btn_content]=\"'Print to kitchen/bar' | translate\">\r\n                                  </ewa-button>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                          <!-- Huỷ đặt bàn -->\r\n                          <div class=\"comp-67e668efe46116e71da7f8c7\">\r\n                            <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"huy-dat-ban\">\r\n                              <div class=\"grid-67e668efe46116e71da7f8c7\">\r\n                                <div class=\"comp-67e668f195b9c948ad1aa25d\">\r\n                                  <ewa-image [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/6861362.png'\" _id=\"67e668f1e96680d7f03d8cf5\" _name=\"icon-huy-dat-ban\"\r\n                                    (click)=\"toggleDropdown(bookingBillItem._id); bookingDeleteBill(bookingBillItem._id, bookingBillItem.bill_code)\">\r\n                                  </ewa-image>\r\n                                </div>\r\n                                <div class=\"comp-67e668f07ff712391e85d8a3\">\r\n                                  <ewa-button _id=\"67e668f154a41d34d1462aff\" _name=\"btn-huy-dat-ban\"\r\n                                    style=\"--color-content: #c82b34\"\r\n                                    (click)=\"toggleDropdown(bookingBillItem._id); bookingDeleteBill(bookingBillItem._id, bookingBillItem.bill_code)\"\r\n                                    [btn_content]=\"'Cancel table booking' | translate\">\r\n                                  </ewa-button>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                        </div>\r\n                      </ewa-frame-blank>\r\n                    </div>\r\n                  </div>\r\n                </ewa-block-hover>\r\n              </div>\r\n            </nz-dropdown-menu>\r\n          </div>\r\n\r\n          <div class=\"comp-67e65deb325f99bda997c2c2\">\r\n            <ewa-button style=\"--color-content: var(--ion-color-vh-green)\" [btn_content]=\"'Go to order' | translate\" _id=\"67e65deb325f99bda997c2c2\" _name=\"btn-chuyen-qua-goi-mon\"\r\n              (click)=\"goToOrder()\">\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-frame-blank>\r\n    </div>\r\n  </div>\r\n</ewa-frame-blank>\r\n","import { Component, Output, EventEmitter, ChangeDetectorRef, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\n\r\n@Component({\r\n  selector: 'app-choose-customer',\r\n  templateUrl: './choose-customer.component.html',\r\n  styleUrls: ['./choose-customer.component.scss']\r\n})\r\nexport class ChooseCustomerComponent extends CafeFnbUI {\r\n\r\n  /** Ở trang booking hay cart-detail để hiển thị các component phù hợp */\r\n  @Input() type : 'booking' | 'cart-detail' = 'cart-detail';\r\n\r\n  @Output('backClick') backClick = new EventEmitter();\r\n  @Output('addClick') addClick = new EventEmitter();\r\n\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n  \r\n  \r\n\r\n  searchValue = '';\r\n\r\n  showInfoCustomer = false;\r\n\r\n  customerProfile = {};\r\n}\r\n","<ewa-frame-blank\r\n  style=\"--width: 100%; --min-height: 710px;\"\r\n  [style.--background-color]=\"customerType === 1 ? '#f4f5f5' : '#ffffff'\"\r\n  _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame customer\"\r\n>\r\n  <div class=\"grid-67e77a31b207998c1906b225\">\r\n    <!-- Loại khách hàng -->\r\n    <div style=\"grid-area: 1/1/1/3; grid-template-columns: repeat(3, 1fr); display: grid; width: 100%; gap: 4px;\">\r\n      <!-- Khách lẻ -->\r\n      <div class=\"comp-67e77a321b74c802e041513d\"\r\n        style=\"grid-area: 1\">\r\n        <ewa-button _id=\"67fde4e5697059e9b6159d22\" _name=\"Button khách lẻ\"\r\n          [btn_content]=\"'Retail' | translate\"\r\n          (click)=\"customerType = 1; changeCustomerType(1)\"\r\n          [style.--color-content]=\"customerType === 1 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--color-icon]=\"customerType === 1 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--background-color]=\"customerType === 1 ? 'var(--ion-color-vh-green-dark)' : '#ffffff'\">\r\n        </ewa-button>\r\n      </div>\r\n      <!-- Thành viên -->\r\n      <div class=\"comp-67fde4e5697059e9b6159d22\"\r\n        style=\"grid-area: 1\">\r\n        <ewa-button _id=\"67fde4e5697059e9b6159d22\" _name=\"Button thành viên\"\r\n          [btn_content]=\"'Member' | translate\"\r\n          (click)=\"customerType = 2; changeCustomerType(2)\"\r\n          [style.--color-content]=\"customerType === 2 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--color-icon]=\"customerType === 2 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--background-color]=\"customerType === 2 ? 'var(--ion-color-vh-green-dark)' : '#ffffff'\">\r\n        </ewa-button>\r\n      </div>\r\n      <!-- Tìm khách hàng -->\r\n      <div class=\"comp-67fde4e5697059e9b6159d22\"\r\n        style=\"grid-area: 1\">\r\n        <ewa-button _id=\"67fde4e5697059e9b6159d22\" _name=\"Button thành viên\"\r\n          (click)=\"customerType = 3; changeCustomerType(3)\"\r\n          [style.--color-content]=\"customerType === 3 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--color-icon]=\"customerType === 3 ? '#ffffff': 'var(--ion-color-vh-green-dark)'\"\r\n          [style.--background-color]=\"customerType === 3 ? 'var(--ion-color-vh-green-dark)' : '#ffffff'\"\r\n          [btn_content]=\"'Search customer' | translate\">\r\n        </ewa-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"comp-67e77a32da611e2a3f4979a0\">\r\n      <ewa-frame-blank style=\"--width: 100%; --min-height: 583px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame list customer\">\r\n        <div *ngIf=\"customerType === 2 || customerType === 3\" class=\"grid-67e77a32da611e2a3f4979a0\">\r\n          <div class=\"comp-67fe0dccdfeed11e5a23a1e1\">\r\n            <ewa-input-group _id=\"67fe0dccdfeed11e5a23a1e1\" _name=\"input-search-customer\"\r\n              #search\r\n              [(ngModel)]=\"searchValue\"\r\n              (valueChange)=\"searchCustomer($event)\"\r\n              (rightContentClick)=\"searchValue = ''; searchCustomer('')\"\r\n              [placeholder]=\"'Search for customer name, phone number' | translate\"\r\n              [rightContent]=\"'Delete' | translate\"\r\n              (keydown)=\"onKeyDown($event, search.value, customerType)\"\r\n              [ewaStyle]=\"{\r\n                'input-group__label': {'margin-left': '12px'}\r\n              }\">\r\n            </ewa-input-group>\r\n          </div>\r\n          <div class=\"customer-list-container\">\r\n            <div *ngFor=\"let item of customerList; let i = index\" class=\"comp-67e77a332ff43037e4e9c92c\">\r\n              <ewa-frame-blank\r\n                [style.--background-color]=\"\r\n                  item._id === selectedBill.getIdPartner()\r\n                    ? 'var(--ion-color-vh-green)'\r\n                    : (i % 2 === 0 ? '#e9eaed' : '#f3f4f5')\r\n                \"\r\n                style=\"--width: 100%; --min-height: 51px;\"\r\n                _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Customer item\"\r\n              >\r\n                <div class=\"grid-67e77a332ff43037e4e9c92c\">\r\n                  <div class=\"comp-67e77a34c587b88661b491be\">\r\n                    <ewa-text\r\n                      [text_content]=\"item.name\"\r\n                      [style.--color-content]=\"item._id === selectedBill.getIdPartner() ? '#ffffff': 'var(--ion-color-vh-green)'\"\r\n                      _id=\"67e77a34c587b88661b491be\" _name=\"Name customer\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <div class=\"comp-67e77a347830908dfc4668f2\">\r\n                    <ewa-text\r\n                      [style.--color-content]=\"item._id === selectedBill.getIdPartner() ? '#ffffff': 'var(--ion-color-vh-green)'\"\r\n                      style=\"--width: 85.6164%\"\r\n                      [text_content]=\"item.phone\"\r\n                      _id=\"67e77a34c587b88661b491be\" _name=\"Phone customer\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <div class=\"comp-67e77a3454e95c8743f08b0a\">\r\n                    <ewa-button [btn_content]=\"'View' | translate\" (click)=\"customerProfile = item; showInfoCustomer = true\" _id=\"67e77a3454e95c8743f08b0a\" _name=\"Button see\">\r\n                    </ewa-button>\r\n                  </div>\r\n                  <div class=\"comp-67e77a35a0d3814e3548767b\">\r\n                    <ewa-button style=\"--width: 92.8571%\" [btn_content]=\"'Select' | translate\" (click)=\"selectedBill.getIdPartner() !== item._id && changeCustomer(item._id, type === 'booking')\" _id=\"67e77a3454e95c8743f08b0a\" _name=\"Button choose\">\r\n                    </ewa-button>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ewa-frame-blank>\r\n    </div>\r\n    <div class=\"comp-67e77a32f01a6c3882f0b8ad\">\r\n      <ewa-button style=\"--color-content: var(--ion-color-vh-green); --border: 1px solid var(--ion-color-vh-green);\" [btn_content]=\"'Exit' | translate\" (click)=\"backClick.emit(); this.blurCustomer();\" _id=\"67e77a32f01a6c3882f0b8ad\" _name=\"Button exit\">\r\n      </ewa-button>\r\n    </div>\r\n    <div class=\"comp-67e77a335442d5134616c9e9\">\r\n      <ewa-button style=\"--background-color: var(--ion-color-vh-green)\" [btn_content]=\"'Add new customer' | translate\" (click)=\"addClick.emit()\" _id=\"67e77a335442d5134616c9e9\" _name=\"Button add new customer\">\r\n      </ewa-button>\r\n    </div>\r\n  </div>\r\n</ewa-frame-blank>\r\n\r\n<!-- --------------------------------------------- MODAL THÔNG TIN KHÁCH HÀNG ---------------------------------------------- -->\r\n<app-info-customer\r\n  *ngIf=\"showInfoCustomer\"\r\n  (onClose)=\"showInfoCustomer = false\"\r\n  [customerProfile]=\"customerProfile\"\r\n></app-info-customer>\r\n","\r\nimport { TestKitchentComponent } from 'src/app/cafe/components/print/test/test-kitchent/test-kitchent.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-config-print-kitchen-electron',\r\n  templateUrl: './config-print-kitchen-electron.component.html',\r\n  styleUrls: ['./config-print-kitchen-electron.component.scss']\r\n})\r\nexport class ConfigPrintKitchenElectronComponent implements OnInit {\r\n\r\n  @Input() showConfigPrint = false;\r\n  @Output() hide = new EventEmitter<boolean>()\r\n  print_page: any = {}\r\n  item: any = {}\r\n  form_data : FormGroup ;\r\n\r\n  list_font = [\r\n    {\r\n      value: 'sans-serif',\r\n      name: \"Arial\"\r\n    },\r\n    {\r\n      value: 'serif',\r\n      name: \"Times New Roman\"\r\n    },\r\n    {\r\n      value: 'monospace',\r\n      name: \"Courier New\"\r\n    },\r\n    {\r\n      value: 'system-ui',\r\n      name: 'System-ui',\r\n    }\r\n  ]\r\n  list_font_size = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\r\n  list_driver_printer: any = []\r\n  list_number_print = [1, 2, 3, 4, 5]\r\n  printers : any[]= this.vhQueryCafe.getlocalPrinters()\r\n  showAddPrinter = false;\r\n  showEditPrinter = false\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    public platform: Platform\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.print_page = this.vhQueryCafe.getLocalPrintPage(\"page_desktop_kitchen\")\r\n    this.item = this.print_page ? this.print_page.print_sizes[this.print_page.print_sizes.findIndex(e => e._id == this.print_page.print_size_default)] : null\r\n    if (this.platform.is(\"electron\")) this.getPrint();\r\n    this.getPrinter()\r\n  }\r\n  getPrinter() {\r\n    this.printers = this.vhQueryCafe.getlocalPrinters()\r\n    console.log(this.printers);\r\n\r\n  }\r\n\r\n  checktype(value) {\r\n    if (typeof (value) != 'undefined') return true\r\n    if (typeof (value) == 'undefined') return false\r\n  }\r\n\r\n  updatePrintPageType(value) {\r\n    this.item = this.print_page.print_sizes[this.print_page.print_sizes.findIndex(e => e._id == value)]\r\n    this.updatePrint()\r\n  }\r\n\r\n  openModalAddPrint() {\r\n    this.showAddPrinter = true;\r\n    this.form_data  =  new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      printer_name: new FormControl(''),\r\n      _id: new FormControl('')\r\n    }) \r\n  }\r\n  addPrinter() {\r\n     \r\n    this.vhQueryCafe.addPrinter({...this.form_data.value, default : this.printers.length ? false : true}).then((printer) => {\r\n      console.log('addPrinter', printer);\r\n      this.showAddPrinter = false;\r\n      if(!this.vhQueryCafe.getLocalPrintPage(\"page_desktop_kitchen\")) this.addPrintPage()\r\n    }, error => {\r\n      console.log('error', error);\r\n    })\r\n  }\r\n\r\n  openEdit(item) {\r\n    this.showEditPrinter = true;\r\n    this.form_data  =  new FormGroup({\r\n      name: new FormControl(item.name),\r\n      printer_name: new FormControl(item.printer_name),\r\n      _id: new FormControl(item._id)\r\n    }) \r\n  }\r\n  updatePrinter() {\r\n    this.vhQueryCafe.updatePrinter(this.form_data.value._id, this.form_data.value)\r\n      .then((bool) => {\r\n        console.log('updatePrinter', bool);\r\n        this.showEditPrinter = false;\r\n        this.printers[this.printers.findIndex(e => e._id == this.form_data.value._id)] = this.form_data.value\r\n      }, error => {\r\n        console.log('error', error);\r\n        this.showEditPrinter = false;\r\n      })\r\n  }\r\n  deletePrint(item) {\r\n    if(item.default){\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Bạn không thể xóa máy in mặc định\"))\r\n    }\r\n    else\r\n    this.vhQueryCafe.deletePrinter(item._id)\r\n      .then((bool) => {\r\n        console.log('deletePrinter', bool);\r\n      })\r\n  }\r\n  addPrintPage() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.addPrintPage('page_desktop_kitchen', { ...this.sales })\r\n        .then((printer: any) => {\r\n          console.log('addPrintPage',printer);\r\n\r\n          this.print_page = printer\r\n          this.item = printer.print_sizes[0]\r\n          setTimeout(() => {\r\n            this.vhComponent.hideLoading(0)\r\n          }, 500);\r\n        }).catch(err => console.error(err))\r\n      if (this.platform.is(\"electron\")) this.getPrint();\r\n    })\r\n\r\n  }\r\n\r\n  setDefault(item) {\r\n    let index = this.printers.findIndex(item => item.default)\r\n    if (index != -1) {\r\n      this.printers[index].default = false;\r\n      item.default = true; item.status = true;\r\n      Promise.all([this.vhQueryCafe.updatePrinter(item._id, item), this.vhQueryCafe.updatePrinter(this.printers[index]._id, this.printers[index])])\r\n        .then(res => {\r\n          this.getPrinter()\r\n          this.vhComponent.showToast(1500, this.languageService.translate(\"Printer\") + \" \" + item.name + \" \" + this.languageService.translate(\"has been set default successfully\"), \"success-toast\")\r\n        })\r\n    } else {\r\n      item.default = true; item.status = true;\r\n      this.vhQueryCafe.updateTax(item._id, item)\r\n    }\r\n  }\r\n  // dữ liệu dùng để thêm máy in\r\n  sales = {\r\n    print_size_default: \"print_size_k57_3c\",\r\n    print_page_type: 'page_desktop_kitchen',\r\n    print_sizes: [\r\n      {\r\n        _id: 'print_size_k57_3c',\r\n        name: 'K57 - 3 cột',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        copies: 1,\r\n        printer_name: '',\r\n        header_hidden: false,\r\n        table_name_hidden: false,\r\n      }]\r\n  }\r\n\r\n  getPrint() {\r\n    electron.ipcRenderer.send(\"allPrint\");\r\n    electron.ipcRenderer.on(\"printName\", (event, data) => {\r\n      this.list_driver_printer = data\r\n    });\r\n  }\r\n  updatePrint() {\r\n    let value = { ...this.print_page }\r\n    delete value._id;\r\n    this.vhQueryCafe.updatePrintPage(this.print_page._id, value);\r\n  }\r\n  printTemp() {\r\n\r\n    this.vhComponent.showModal(this.renderPrintSalesPage(), { printer: this.item }, false, false, `modal-print-${this.item['_id']}`)\r\n  }\r\n\r\n  private renderPrintSalesPage() {\r\n    return TestKitchentComponent\r\n  }\r\n\r\n}\r\n","<!-- ---------------------modal cấu hình máy in------------------- -->\r\n<nz-modal nzWidth=\"50vw\" [(nzVisible)]=\"showConfigPrint\" (nzOnCancel)=\"hide.emit(true)\" nzCentered\r\n    [nzTitle]=\"'Configure kitchen print page' | translate\">\r\n\r\n    <ng-container *nzModalContent>\r\n        <!-- <div nz-row>\r\n            <div nz-col nzSpan=\"12\">\r\n                <h4>Danh sách máy in bếp</h4>\r\n                <div style=\"height: 400px\" class=\"center-all-content\" *ngIf=\"!printer\">\r\n                    <button class=\"btn-add\" (click)=\"addPrinter()\" nz-button> <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>{{'Add printer' |\r\n                        translate}}</button>\r\n        \r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <h4>Cấu hình máy in</h4>\r\n            </div>\r\n        </div> -->\r\n        <nz-tabset>\r\n            <nz-tab nzTitle=\"Danh sách máy in bếp\">\r\n                <div *ngIf=\"printers.length\">\r\n                    <nz-list style=\"height: 400px\"  >\r\n                        <nz-list-item style=\"cursor: pointer;\" *ngFor=\"let data of printers\" >\r\n                            <ng-container>\r\n                                <nz-list-item-meta-title style=\"width:95%; overflow: hidden;\" >\r\n                                    <b>{{data.name }}</b>\r\n                                    <div class=\"quantity\">\r\n                                        {{'Printer' | translate}}: <span>{{data.printer_name}}</span>\r\n                                    </div>\r\n                                    <div nz-col nzSpan=\"24\">\r\n                                        <label nz-radio (ngModelChange)=\"setDefault(data)\" [(ngModel)]=\"data.default\">{{'Set default' |\r\n                        translate}}</label>\r\n                                    </div>\r\n                                </nz-list-item-meta-title>\r\n                                <ul nz-list-item-actions>\r\n                                    <nz-list-item-action>\r\n                                        <i class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                                            (click)=\"openEdit(data)\"></i>\r\n                                    </nz-list-item-action>\r\n                                    <nz-list-item-action>\r\n                                        <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                                        nz-popconfirm\r\n                                        nzPopconfirmTitle=\"{{'Confirm delete this kitchen printer?' | translate}}\"\r\n                                        (nzOnConfirm)=\"deletePrint(data)\" \r\n                                        nzPopconfirmPlacement=\"topLeft\"></i>\r\n                                    </nz-list-item-action>\r\n                                </ul>\r\n                            </ng-container>\r\n                        </nz-list-item>\r\n                      \r\n                    </nz-list>\r\n                </div>\r\n                <div style=\"height: 400px\" class=\"center-all-content\" *ngIf=\"!printers.length\">\r\n                    {{'No data' |   translate}}\r\n                </div>\r\n            </nz-tab>\r\n            <nz-tab nzTitle=\"Cấu hình máy in\">\r\n                <nz-list style=\"height: 400px;\" *ngIf=\"print_page\">\r\n\r\n                    <nz-list-item class=\"no-border\">\r\n                        <span> {{'Allows print'| translate}}</span>\r\n                        <nz-switch [(ngModel)]=\"item.enable\" (click)=\"$event.stopPropagation()\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item class=\"no-border\">\r\n                        <span> {{'Font style'| translate}}</span>\r\n                        <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_family\" (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_font\" [nzValue]=\"item.value\"\r\n                                [nzLabel]=\"item.name\"></nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item>\r\n                        <span> {{'Font size'| translate}}</span>\r\n                        <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_size\" (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_font_size\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item *ngIf=\"checktype(item.header_hidden)\" class=\"no-border\">\r\n                        <span> {{'Hide title' | translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.header_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item *ngIf=\"checktype(item.table_name_hidden)\" class=\"no-border\">\r\n                        <span> {{'Hide table name' | translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.table_name_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                </nz-list>\r\n            </nz-tab>\r\n        </nz-tabset>\r\n\r\n\r\n    </ng-container>\r\n    <ng-container *nzModalFooter>\r\n        <div class=\"between-all-content\">\r\n            <button class=\"btn-add\" (click)=\"openModalAddPrint()\" nz-button> <i nz-icon nzType=\"plus\"\r\n                nzTheme=\"outline\"></i>{{'Thêm máy in điều phối' |\r\n            translate}}</button>\r\n            <button class=\"btn-print center-all-content\" (click)=\"printTemp()\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"font-size: 0.9rem; margin-right: 4px;\" src=\"assets/icon/management/printer.svg\">\r\n                </ion-icon>\r\n                {{'Print a draft'|translate}}\r\n            </button>\r\n        </div>\r\n    </ng-container>\r\n\r\n</nz-modal>\r\n<nz-modal [(nzVisible)]=\"showAddPrinter\" *ngIf=\"showAddPrinter\" (nzOnCancel)=\"showAddPrinter = false\" nzCentered (nzOnOk)=\"addPrinter()\"\r\n    [nzTitle]=\"'Add dispatch printer' | translate\" [nzOkDisabled]=\"form_data.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form [formGroup]=\"form_data\">\r\n            <div>{{'Printer name' | translate}}*</div>\r\n            <nz-form-item>\r\n                <nz-form-control>\r\n                    <nz-input-group>\r\n                        <input nz-input placeholder=\"{{'Enter printer name' | translate}}\"\r\n                            formControlName=\"name\" />\r\n                    </nz-input-group>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <div> {{'Select printer'| translate}}</div>\r\n            <nz-form-item>\r\n                <nz-select style=\"width: 330px;\" formControlName=\"printer_name\" (ngModelChange)=\"updatePrint()\">\r\n                    <nz-option *ngFor=\"let item of list_driver_printer\" [nzValue]=\"item.name\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </nz-form-item>\r\n        </form>\r\n       \r\n    </ng-container>\r\n</nz-modal>\r\n<nz-modal [(nzVisible)]=\"showEditPrinter\"  *ngIf=\"showEditPrinter\" (nzOnCancel)=\"showEditPrinter = false\" nzCentered (nzOnOk)=\"updatePrinter()\"\r\n    [nzTitle]=\"'Update dispatch printer' | translate\"  [nzOkDisabled]=\"form_data.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form [formGroup]=\"form_data\">\r\n            <div>{{'Printer name' | translate}}*</div>\r\n            <nz-form-item>\r\n                <nz-form-control>\r\n                    <nz-input-group>\r\n                        <input nz-input placeholder=\"{{'Enter printer name' | translate}}\"\r\n                            formControlName=\"name\" />\r\n                    </nz-input-group>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <div> {{'Select printer'| translate}}</div>\r\n            <nz-form-item>\r\n                <nz-select style=\"width: 330px;\" formControlName=\"printer_name\" (ngModelChange)=\"updatePrint()\">\r\n                    <nz-option *ngFor=\"let item of list_driver_printer\" [nzValue]=\"item.name\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </nz-form-item>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>","\r\nimport { TestKitchentComponent } from 'src/app/cafe/components/print/test/test-kitchent/test-kitchent.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { PrintTestA4Component } from 'src/app/cafe/components/print/test/A4/print-test-a4/print-test-a4.component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-config-print-kitchen',\r\n  templateUrl: './config-print-kitchen.component.html',\r\n  styleUrls: ['./config-print-kitchen.component.scss']\r\n})\r\nexport class ConfigPrintKitchenComponent implements OnInit {\r\n\r\n  @Input() showConfigPrint = false;\r\n  @Output() hide = new EventEmitter<boolean>()\r\n  printer: any = {}\r\n  item: any = {}\r\n  observablePrinter: any;\r\n\r\n  list_font = [\r\n    {\r\n      value: 'sans-serif',\r\n      name: \"Arial\"\r\n    },\r\n    {\r\n      value: 'serif',\r\n      name: \"Times New Roman\"\r\n    },\r\n    {\r\n      value: 'monospace',\r\n      name: \"Courier New\"\r\n    },\r\n    {\r\n      value: 'system-ui',\r\n      name: 'System-ui',\r\n    }\r\n  ]\r\n  list_font_size = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\r\n  list_printer: any = []\r\n  list_number_print  = [1,2,3,4,5]\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    public platform: Platform\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.printer = this.vhQueryCafe.getLocalPrintPage(\"page_desktop_kitchen\")\r\n    this.item = this.printer ? this.printer.print_sizes[this.printer.print_sizes.findIndex(e => e._id == this.printer.print_size_default)] : null\r\n    if (this.platform.is(\"electron\")) this.getPrint();\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  checktype(value) {\r\n    if (typeof (value) != 'undefined') return true\r\n    if (typeof (value) == 'undefined') return false\r\n  }\r\n\r\n  updatePrintPageType(value) {\r\n    this.item =  this.printer.print_sizes[this.printer.print_sizes.findIndex(e => e._id == value)]\r\n    this.updatePrint()\r\n  }\r\n  addPrinter() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.addPrintPage('page_desktop_kitchen',{...this.sales} )\r\n      .then((printer:any) => {\r\n        this.printer = printer\r\n        this.item = printer.print_sizes[0]\r\n        setTimeout(() => {\r\n          this.vhComponent.hideLoading(0)\r\n        }, 500);\r\n      }).catch(err => console.error(err))\r\n      if (this.platform.is(\"electron\")) this.getPrint();\r\n    })\r\n\r\n  }\r\n\r\n  // dữ liệu dùng để thêm máy in\r\n  sales = {\r\n    print_size_default: \"print_size_k57_3c\",\r\n    print_page_type: 'page_desktop_kitchen',\r\n    print_sizes: [\r\n      {\r\n        _id: 'print_size_k57_3c',\r\n        name: 'K57 - 3 cột',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        copies: 1,\r\n        printer_name: '',\r\n        header_hidden: false,\r\n        table_name_hidden: false,\r\n      }]\r\n  }\r\n\r\n  getPrint() {\r\n    electron.ipcRenderer.send(\"allPrint\");\r\n    electron.ipcRenderer.on(\"printName\", (event, data) => {\r\n      this.list_printer = data\r\n    });\r\n  }\r\n  updatePrint() {\r\n    let value = { ...this.printer }\r\n    delete value._id;\r\n    this.vhQueryCafe.updatePrintPage(this.printer._id, value);\r\n  }\r\n  printTemp() {\r\n    this.vhComponent.showModal(this.renderPrintSalesPage(), { printer: this.item }, false, false, `modal-print-${this.item['_id']}`)\r\n  }\r\n\r\n  private renderPrintSalesPage() {\r\n    return TestKitchentComponent\r\n  }\r\n\r\n}\r\n","<!-- ---------------------modal cấu hình máy in------------------- -->\r\n<nz-modal nzWidth=\"50vw\" [(nzVisible)]=\"showConfigPrint\" (nzOnCancel)=\"hide.emit(true)\" nzCentered [nzTitle]=\"'Configure kitchen print page' | translate\">\r\n    <ng-container *nzModalContent>\r\n        <nz-list style=\"height: 400px;\"  *ngIf=\"printer\">\r\n            <nz-list-item class=\"no-border\" *ngIf=\"platform.is('electron')\">\r\n                <span> {{'Select printer'| translate}}</span>\r\n                <nz-select style=\"width: 330px;\" [(ngModel)]=\"item.printer_name\"\r\n                    (ngModelChange)=\"updatePrint()\">\r\n                    <nz-option *ngFor=\"let item of list_printer\" [nzValue]=\"item.name\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </nz-list-item>\r\n            <nz-list-item class=\"no-border\">\r\n                <span> {{'Allows print'| translate}}</span>\r\n                <nz-switch [(ngModel)]=\"item.enable\" (click)=\"$event.stopPropagation()\" (ngModelChange)=\"updatePrint()\">\r\n                </nz-switch>\r\n            </nz-list-item> \r\n            <nz-list-item class=\"no-border\">\r\n                <span> {{'Font style'| translate}}</span>\r\n                <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_family\" (ngModelChange)=\"updatePrint()\">\r\n                    <nz-option  *ngFor=\"let item of list_font\" [nzValue]=\"item.value\" [nzLabel]=\"item.name\"></nz-option>\r\n                  </nz-select>\r\n            </nz-list-item>\r\n            <nz-list-item>\r\n                <span> {{'Font size'| translate}}</span>\r\n                <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_size\" (ngModelChange)=\"updatePrint()\">\r\n                    <nz-option *ngFor=\"let item of list_font_size\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </nz-list-item> \r\n            <nz-list-item  *ngIf=\"checktype(item.header_hidden)\"class=\"no-border\">\r\n                <span> {{'Hide title' | translate}}</span>\r\n                <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.header_hidden\"\r\n                    (ngModelChange)=\"updatePrint()\">\r\n                </nz-switch>\r\n            </nz-list-item>\r\n            <nz-list-item  *ngIf=\"checktype(item.table_name_hidden)\"class=\"no-border\">\r\n                <span> {{'Hide table name' | translate}}</span>\r\n                <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.table_name_hidden\"\r\n                    (ngModelChange)=\"updatePrint()\">\r\n                </nz-switch>\r\n            </nz-list-item>\r\n        </nz-list>\r\n        <div style=\"height: 400px\" class=\"center-all-content\" *ngIf=\"!printer\">\r\n            <button class=\"btn-add\" (click)=\"addPrinter()\" nz-button> <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>{{'Add printer' |\r\n                translate}}</button>\r\n\r\n        </div>\r\n    </ng-container>\r\n    <ng-container *nzModalFooter>\r\n        <div class=\"right-all-content\">\r\n            <button class=\"btn-print center-all-content\" (click)=\"printTemp()\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"font-size: 0.9rem; margin-right: 4px;\" src=\"assets/icon/management/printer.svg\">\r\n                </ion-icon>\r\n                {{'Print a draft'|translate}}\r\n            </button>\r\n        </div>\r\n    </ng-container>\r\n\r\n</nz-modal>","import { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { PrintTestK80Component } from 'src/app/cafe/components/print/test/K80/print-test-k80/print-test-k80.component';\r\nimport { PrintTestK57Component } from 'src/app/cafe/components/print/test/K57/print-test-k57/print-test-k57.component';\r\n\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { PrintTestA4Component } from 'src/app/cafe/components/print/test/A4/print-test-a4/print-test-a4.component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { TestKitchentComponent } from 'src/app/cafe/components/print/test/test-kitchent/test-kitchent.component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { SalesK57Col3Component } from 'src/app/cafe/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { SalesK80Col3Component } from 'src/app/cafe/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK80Col4Component } from 'src/app/cafe/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesA5Component } from 'src/app/cafe/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesA4Component } from 'src/app/cafe/components/print/sales/sales-a4/sales-a4.component';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-config-print',\r\n  templateUrl: './config-print.component.html',\r\n  styleUrls: ['./config-print.component.scss']\r\n})\r\nexport class ConfigPrintComponent implements OnInit {\r\n\r\n  @Input() showConfigPrint = false;\r\n  @Output() hide = new EventEmitter<boolean>()\r\n  printer: any = {}\r\n  item: any = {}\r\n  observablePrinter: any;\r\n\r\n  list_font = [\r\n    {\r\n      value: 'sans-serif',\r\n      name: \"Arial\"\r\n    },\r\n    {\r\n      value: 'serif',\r\n      name: \"Times New Roman\"\r\n    },\r\n    {\r\n      value: 'monospace',\r\n      name: \"Courier New\"\r\n    },\r\n    {\r\n      value: 'system-ui',\r\n      name: 'System-ui',\r\n    }\r\n  ]\r\n  list_font_size = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\r\n  list_printer: any = []\r\n  list_number_print  = [1,2,3,4,5]\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    public platform: Platform\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.printer = this.vhQueryCafe.getLocalPrintPage(\"page_desktop_sales\")\r\n    this.item = this.printer ? this.printer.print_sizes[this.printer.print_sizes.findIndex(e => e._id == this.printer.print_size_default)] : null\r\n    if (this.platform.is(\"electron\")) this.getPrint();\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  checktype(value) {\r\n    if (typeof (value) != 'undefined') return true\r\n    if (typeof (value) == 'undefined') return false\r\n  }\r\n\r\n  updatePrintPageType(value) {\r\n    this.item =  this.printer.print_sizes[this.printer.print_sizes.findIndex(e => e._id == value)]\r\n    this.updatePrint()\r\n  }\r\n  addPrinter() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.addPrintPage('page_desktop_sales',{...this.sales} )\r\n      .then((printer:any) => {\r\n        this.printer = printer\r\n        this.item = printer.print_sizes[0]\r\n        setTimeout(() => {\r\n          this.vhComponent.hideLoading(0)\r\n        }, 500);\r\n      }).catch(err => console.error(err))\r\n      if (this.platform.is(\"electron\")) this.getPrint();\r\n    })\r\n\r\n  }\r\n\r\n  // dữ liệu dùng để thêm máy in\r\n  sales = {\r\n    print_size_default: \"print_size_a4\",\r\n    print_page_type: 'page_desktop_sales',\r\n    print_sizes: [\r\n      {\r\n        _id: 'print_size_a4',\r\n        name: 'A4',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        notice: '',\r\n        copies: 1,\r\n        left: 0,\r\n        right: 0,\r\n        printer_name: '',\r\n        customer_name_hidden: false,\r\n        customer_address_hidden: false,\r\n        customer_phone_hidden: false,\r\n        employee_name_hidden: false,\r\n        bill_code_hidden: false,\r\n        barcode_hidden: false,\r\n        logo_hidden: false,\r\n        date_hidden: false,\r\n        name_store_hidden: false,\r\n        address_hidden: false,\r\n        name_branch_hidden: false,\r\n        phone_number_hidden: false,\r\n        discount_hidden: false,\r\n        discount_bill_hidden: false,\r\n        payment_points_hidden: false,\r\n        payment_coupon_hidden: false,\r\n        tax_hidden: false,\r\n        fee_hidden: false,\r\n        debt_hidden: false,\r\n        cash_hidden: false,\r\n        note_hidden: false,\r\n        signature_buyer_hidden: false,\r\n        signature_shipper_hidden: false,\r\n        signature_creator_hidden: false,\r\n        signature_accountancy_hidden: false\r\n\r\n      },\r\n      {\r\n        _id: 'print_size_a5',\r\n        name: 'A5',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        notice: '',\r\n        copies: 1,\r\n        left: 0,\r\n        right: 0,\r\n        printer_name: '',\r\n        customer_name_hidden: false,\r\n        customer_address_hidden: false,\r\n        customer_phone_hidden: false,\r\n        employee_name_hidden: false,\r\n        bill_code_hidden: false,\r\n        barcode_hidden: false,\r\n        logo_hidden: false,\r\n        date_hidden: false,\r\n        name_store_hidden: false,\r\n        address_hidden: false,\r\n        name_branch_hidden: false,\r\n        phone_number_hidden: false,\r\n        discount_hidden: false,\r\n        discount_bill_hidden: false,\r\n        payment_points_hidden: false,\r\n        payment_coupon_hidden: false,\r\n        tax_hidden: false,\r\n        fee_hidden: false,\r\n        debt_hidden: false,\r\n        cash_hidden: false,\r\n        note_hidden: false,\r\n        signature_buyer_hidden: false,\r\n        signature_shipper_hidden: false,\r\n        signature_creator_hidden: false,\r\n        signature_accountancy_hidden: false\r\n      },\r\n      {\r\n        _id: 'print_size_k80_4c',\r\n        name: 'K80 - 4 cột',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        header: this.languageService.translate(\"Welcome to the Restaurant\"),\r\n        footer: this.languageService.translate(\"Goodbye, see you again!\"),\r\n        notice: '',\r\n        copies: 1,\r\n        left: 0,\r\n        right: 0,\r\n        printer_name: '',\r\n        customer_name_hidden: false,\r\n        customer_address_hidden: false,\r\n        customer_phone_hidden: false,\r\n        header_hidden: false,\r\n        footer_hidden: false,\r\n        employee_name_hidden: false,\r\n        bill_code_hidden: false,\r\n        barcode_hidden: false,\r\n        logo_hidden: false,\r\n        date_hidden: false,\r\n        name_store_hidden: false,\r\n        address_hidden: false,\r\n        name_branch_hidden: false,\r\n        phone_number_hidden: false,\r\n        discount_hidden: false,\r\n        discount_bill_hidden: false,\r\n        payment_points_hidden: false,\r\n        payment_coupon_hidden: false,\r\n        tax_hidden: false,\r\n        fee_hidden: false,\r\n        debt_hidden: false,\r\n        cash_hidden: false,\r\n        note_hidden: false,\r\n      },\r\n      {\r\n        _id: 'print_size_k80_3c',\r\n        name: 'K80 - 3 cột',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        header: this.languageService.translate(\"Welcome to the Restaurant\"),\r\n        footer: this.languageService.translate(\"Goodbye, see you again!\"),\r\n        notice: '',\r\n        copies: 1,\r\n        left: 0,\r\n        right: 0,\r\n        printer_name: '',\r\n        customer_name_hidden: false,\r\n        customer_address_hidden: false,\r\n        customer_phone_hidden: false,\r\n        header_hidden: false,\r\n        footer_hidden: false,\r\n        employee_name_hidden: false,\r\n        bill_code_hidden: false,\r\n        barcode_hidden: false,\r\n        logo_hidden: false,\r\n        date_hidden: false,\r\n        name_store_hidden: false,\r\n        address_hidden: false,\r\n        name_branch_hidden: false,\r\n        phone_number_hidden: false,\r\n        discount_hidden: false,\r\n        discount_bill_hidden: false,\r\n        payment_points_hidden: false,\r\n        payment_coupon_hidden: false,\r\n        tax_hidden: false,\r\n        fee_hidden: false,\r\n        debt_hidden: false,\r\n        cash_hidden: false,\r\n        note_hidden: false,\r\n      },\r\n      {\r\n        _id: 'print_size_k57_3c',\r\n        name: 'K57 - 3 cột',\r\n        font_size: 16,\r\n        font_family: 'sans-serif',\r\n        enable: true,\r\n        header: this.languageService.translate(\"Welcome to the Restaurant\"),\r\n        footer: this.languageService.translate(\"Goodbye, see you again!\"),\r\n        notice: '',\r\n        copies: 1,\r\n        left: 0,\r\n        right: 0,\r\n        printer_name: '',\r\n        customer_name_hidden: false,\r\n        customer_address_hidden: false,\r\n        customer_phone_hidden: false,\r\n        header_hidden: false,\r\n        footer_hidden: false,\r\n        employee_name_hidden: false,\r\n        bill_code_hidden: false,\r\n        barcode_hidden: false,\r\n        logo_hidden: false,\r\n        date_hidden: false,\r\n        name_store_hidden: false,\r\n        address_hidden: false,\r\n        name_branch_hidden: false,\r\n        phone_number_hidden: false,\r\n        discount_hidden: false,\r\n        discount_bill_hidden: false,\r\n        payment_points_hidden: false,\r\n        payment_coupon_hidden: false,\r\n        tax_hidden: false,\r\n        fee_hidden: false,\r\n        debt_hidden: false,\r\n        cash_hidden: false,\r\n        note_hidden: false,\r\n      }]\r\n  }\r\n\r\n  getPrint() {\r\n    electron.ipcRenderer.send(\"allPrint\");\r\n    electron.ipcRenderer.on(\"printName\", (event, data) => {\r\n      this.list_printer = data\r\n    });\r\n  }\r\n  updatePrint() {\r\n    let value = { ...this.printer }\r\n    delete value._id;\r\n    this.vhQueryCafe.updatePrintPage(this.printer._id, value);\r\n  }\r\n  printTemp() {\r\n    let invoice = new VhOrderInvoices(this.tempBillCustomerReturn,this.bill_details_CustomerReturn,this.vhQueryCafe);\r\n    this.vhComponent.showModal(this.renderPrintSalesPage(this.item._id), { printer: this.item, invoice: invoice }, false, false, `modal-print-${this.item['_id']}`)\r\n  }\r\n\r\n  private renderPrintSalesPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n\r\n  /** --------- dữ liệu mẫu --------- */\r\n  // khách trả hàng -- bán hàng - bảo hành sửa chữa\r\n  tempBillCustomerReturn: any = {\r\n    title: \"Invoice\",\r\n    bill_code: \"A35DE4F\",\r\n    bill_type: 1,\r\n    date: new Date().toISOString(),\r\n    id_customer: 'id_retail',\r\n    id_employee: this.vhAuth.getUser()._id,\r\n    fee: 0,\r\n    payment_type: 1,\r\n    discount: 200000,\r\n    note: \"Đây là hoá đơn in thử...\",\r\n    qty_total: 3,\r\n    root_total: 11129000,\r\n    tax: 0,\r\n    tax_value: 0,\r\n    total: 10929000,\r\n    payment: 10929000,\r\n    id_table: \"go_home\"\r\n\r\n  }\r\n\r\n  bill_details_CustomerReturn = [\r\n    {\r\n      name: \"Rau má sữa dừa (lớn)\",\r\n      unit: \"ly\",\r\n      price: 20000,\r\n      price_origin: 22000,\r\n      quantity: 1,\r\n    },\r\n    {\r\n      name: \"Bánh tráng trộn\",\r\n      unit: \"bịch\",\r\n      price: 20000,\r\n      quantity: 1,\r\n    },\r\n    {\r\n      name: \"Cafe sữa\",\r\n      unit: \"ly\",\r\n      price: 25000,\r\n      quantity: 1,\r\n    }\r\n  ]\r\n\r\n\r\n}\r\n","<!-- ---------------------modal cấu hình máy in------------------- -->\r\n<nz-modal nzCentered nzWidth=\"40vw\" [(nzVisible)]=\"showConfigPrint\" (nzOnCancel)=\"hide.emit(true)\"\r\n    [nzTitle]=\"'Sales print page settings' | translate\">\r\n    <ng-container *nzModalContent>\r\n        <nz-tabset *ngIf=\"printer\">\r\n            <nz-tab nzTitle=\"{{'Functions' | translate}}\">\r\n\r\n                <nz-list  nzSize=\"default\" style=\"height: 400px;overflow-y: auto;\" class=\"hideScrollbar\">\r\n                    <nz-list-item *ngIf=\"platform.is('electron')\">\r\n                        <span> {{'Select printer'| translate}}</span>\r\n                        <nz-select style=\"width: 250px;\" [(ngModel)]=\"item.printer_name\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_printer\" [nzValue]=\"item.name\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item>\r\n                        <span> {{'Allows print'| translate}}</span>\r\n                        <nz-switch [(ngModel)]=\"item.enable\" (click)=\"$event.stopPropagation()\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item>\r\n                        <span> {{'Print size'| translate}}</span>\r\n                        <nz-select style=\"width: 120px;\" [(ngModel)]=\"printer.print_size_default \" (ngModelChange)=\"updatePrintPageType($event)\">\r\n                            <nz-option *ngFor=\"let item of printer.print_sizes\" [nzValue]=\"item._id\" nzLabel=\"{{item.name | translate}}\"></nz-option>\r\n                            \r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item>\r\n                        <span> {{'Font style'| translate}}</span>\r\n                        <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_family\" (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_font\" [nzValue]=\"item.value\" [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item>\r\n                        <span> {{'Font size'| translate}}</span>\r\n                        <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.font_size\" (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_font_size\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item   *ngIf=\"platform.is('electron')\">\r\n                        <span> {{'Number of copies'| translate}}</span>\r\n                        <nz-select style=\"width: 200px;\" [(ngModel)]=\"item.copies\" (ngModelChange)=\"updatePrint()\">\r\n                            <nz-option *ngFor=\"let item of list_number_print\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-list-item>\r\n                    <nz-list-item  >\r\n                        <span> {{'Align left' | translate}}</span>\r\n                        <nz-input-number style=\"text-align:end;\" [nzMin]=\"0\" [(ngModel)]=\"item.left\" (ngModelChange)=\"updatePrint()\"\r\n                             ></nz-input-number>\r\n                    </nz-list-item>\r\n                    <nz-list-item  >\r\n                        <span> {{'Align right' | translate}}</span>\r\n                        <nz-input-number style=\"text-align:end;\"  [nzMin]=\"0\" [(ngModel)]=\"item.right\" (ngModelChange)=\"updatePrint()\"\r\n                             ></nz-input-number>\r\n                    </nz-list-item>\r\n                    <nz-list-item class=\"no-border\">\r\n                        <span> {{'Notice'| translate}}</span>\r\n                        <textarea rows=\"2\" [(ngModel)]=\"item.notice\" (blur)=\"updatePrint()\" nz-input></textarea>\r\n                    </nz-list-item>\r\n                </nz-list>\r\n            </nz-tab>\r\n            <nz-tab nzTitle=\"{{'Invoice information' | translate}}\">\r\n                \r\n                <nz-list style=\"height: 400px;overflow-y: auto;\" class=\"hideScrollbar\">\r\n                    <nz-list-item  *ngIf=\"checktype(item.header)\"class=\"no-border\">\r\n                        <span> {{'Header'| translate}}</span>\r\n                        <textarea rows=\"1\" [(ngModel)]=\"item.header\" (ngModelChange)=\"updatePrint()\"\r\n                            nz-input></textarea>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.footer)\"class=\"no-border\">\r\n                        <span> {{'Footer'| translate}}</span>\r\n                        <textarea rows=\"1\" [(ngModel)]=\"item.footer\" (ngModelChange)=\"updatePrint()\"\r\n                            nz-input></textarea>\r\n                    </nz-list-item>\r\n                    \r\n                    <nz-list-item  *ngIf=\"checktype(item.discount_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide discount'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.discount_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.discount_bill_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide discount'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.discount_bill_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.payment_points_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide payment by point'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.payment_points_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.payment_coupon_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide payment by coupon'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.payment_coupon_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.fee_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide fee'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.fee_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.tax_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide tax'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.tax_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.debt_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide debt'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.debt_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.note_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide note'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.note_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.cash_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide customer money'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.cash_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_buyer_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide buyer signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                        [(ngModel)]=\"item.signature_buyer_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item> \r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_store_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide store signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                        [(ngModel)]=\"item.signature_store_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item> \r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_treasurer_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide treasurer signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_treasurer_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_receiver_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide recipient signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_receiver_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_shipper_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide delivery person signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_shipper_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_creator_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide voucher creator signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_creator_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_stocker_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide employee signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_stocker_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.signature_accountancy_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide chief accountant signature'| translate}}</span>\r\n                        <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\"\r\n                            [(ngModel)]=\"item.signature_accountancy_hidden\" (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.header_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide header content when printing'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.header_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.footer_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide footer content when printing'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.footer_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.logo_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide store logo'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.logo_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.name_store_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide store name'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.name_store_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.address_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide store address' | translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.address_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.name_branch_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide branch name'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.name_branch_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.phone_number_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide store phone number'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.phone_number_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.bill_code_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide invoice code'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.bill_code_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.barcode_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide invoice code barcode'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.barcode_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.qr_ibanking)\"class=\"no-border\">\r\n                        <span> {{'Hide QR code for bank transfer'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.qr_ibanking\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.date_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide order creation time'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.date_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.employee_name_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide employee name'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.employee_name_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.customer_name_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide customer name'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.customer_name_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.customer_address_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide customer address'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.customer_address_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.customer_phone_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide customer phone number'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.customer_phone_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.supplier_name_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide supplier name'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.supplier_name_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.supplier_address_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide supplier address'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.supplier_address_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n                    <nz-list-item  *ngIf=\"checktype(item.supplier_phone_hidden)\"class=\"no-border\">\r\n                        <span> {{'Hide supplier phone number'| translate}}</span>\r\n                        <nz-switch (click)=\"$event.stopPropagation()\" [(ngModel)]=\"item.supplier_phone_hidden\"\r\n                            (ngModelChange)=\"updatePrint()\">\r\n                        </nz-switch>\r\n                    </nz-list-item>\r\n\r\n                </nz-list>\r\n            </nz-tab>\r\n        </nz-tabset>\r\n        <div style=\"height: 400px\" class=\"center-all-content\" *ngIf=\"!printer\">\r\n            <button class=\"btn-add\" (click)=\"addPrinter()\" nz-button> <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>{{'Add printer' |\r\n                translate}}</button>\r\n\r\n        </div>\r\n    </ng-container>\r\n    <ng-container *nzModalFooter>\r\n        <div class=\"right-all-content\">\r\n            <!-- <button *ngIf=\"printer\" class=\"btn-delete center-all-content\" nz-button\r\n                nzType=\"default\" nz-popconfirm\r\n                nzPopconfirmTitle=\"{{'Are you sure to delete this printer?'| translate}}\"\r\n                nzPopconfirmPlacement=\"top\"\r\n                (nzOnConfirm)=\"deletePrinter()\"\r\n                 >\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                {{'Delete'|translate}}\r\n            </button> -->\r\n            <button class=\"btn-print center-all-content\" (click)=\"printTemp()\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"font-size: 0.9rem; margin-right: 4px;\" src=\"assets/icon/management/printer.svg\">\r\n                </ion-icon>\r\n                {{'Print a draft'|translate}}\r\n            </button>\r\n        </div>\r\n    </ng-container>\r\n\r\n</nz-modal>","import { VhAuth } from 'ionic-vhframeworks';\r\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-config-sales',\r\n  templateUrl: './config-sales.component.html',\r\n  styleUrls: ['./config-sales.component.scss']\r\n})\r\nexport class ConfigSalesComponent implements OnInit {\r\n  best_selling: any = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  show_confirm_pay : any = this.vhAuth.localStorageGET(\"show_confirm_pay\");\r\n  @Input() showConfigSales = false;\r\n  @Output() hide = new EventEmitter<boolean>()\r\n  constructor(\r\n    private vhAuth:VhAuth\r\n  ) {  \r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  updateSetting(title: string, event) { \r\n    this.vhAuth.localStorageSET(title,event)\r\n  }\r\n\r\n\r\n}\r\n","<!-- ---------------------modal cấu hình máy in------------------- -->\r\n<nz-modal nzWidth=\"50vw\" [(nzVisible)]=\"showConfigSales\" (nzOnCancel)=\"hide.emit(true)\"\r\n    [nzTitle]=\"'Display settings' | translate\">\r\n    <ng-container *nzModalContent>\r\n        <nz-list  style=\"height: 145px;\">\r\n            <!-- <nz-list-item class=\"no-border\">\r\n                <span> {{'Show virtual keyboard'| translate}}</span>\r\n                <nz-switch mode=\"ios\"  [(ngModel)]=\"keyboard\"\r\n                    (ngModelChange)=\"updateSetting('show_keyboard',$event)\">\r\n                </nz-switch>\r\n            </nz-list-item> -->\r\n            <nz-list-item class=\"no-border\">\r\n                <span> {{'Show favorite dishes'| translate}}</span>\r\n                <nz-switch mode=\"ios\"  [(ngModel)]=\"best_selling\"\r\n                    (ngModelChange)=\"updateSetting('show_best_selling',$event)\">\r\n                </nz-switch>\r\n            </nz-list-item>\r\n            <nz-list-item class=\"no-border\">\r\n                <span> {{'Show payment confirmation' | translate}}</span>\r\n                <nz-switch mode=\"ios\" (click)=\"$event.stopPropagation()\" [(ngModel)]=\"show_confirm_pay\" (ngModelChange)=\"updateSetting('show_confirm_pay',$event)\">\r\n                </nz-switch>\r\n            </nz-list-item>\r\n        </nz-list>\r\n    </ng-container>\r\n    <ng-container *nzModalFooter>\r\n\r\n    </ng-container>\r\n\r\n</nz-modal>","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { NzPopconfirmDirective } from 'ng-zorro-antd/popconfirm';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-food-detail',\r\n  templateUrl: './food-detail.component.html',\r\n  styleUrls: ['./food-detail.component.scss']\r\n})\r\nexport class FoodDetailComponent extends CafeFnbUI {\r\n  @Input('food') food;\r\n  @Input('foodIndex') foodIndex;\r\n  @Input('selectedInvoiceDetailIndex') selectedInvoiceDetailIndex;\r\n  /** Ở trang booking hay cart-detail để hiển thị các component phù hợp */\r\n  @Input() type: 'booking' | 'cart-detail' = 'cart-detail';\r\n\r\n  @Output() selectFood = new EventEmitter();\r\n  @Output() openPrintKitchen = new EventEmitter();\r\n  @Output() printLabel = new EventEmitter();\r\n  @Output() quantityChange = new EventEmitter<any>();\r\n\r\n  public VhType = VhType;\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void { }\r\n\r\n  onSelect(foodIndex, event: Event) {\r\n    event.stopPropagation();\r\n    this.selectFood.emit(foodIndex);\r\n  }\r\n\r\n  handleOpenPrintKitchen(food) {\r\n    this.openPrintKitchen.emit(food);\r\n  }\r\n\r\n  handlePrintLabel(item, i) {\r\n    this.printLabel.emit({ item, i });\r\n  }\r\n\r\n  formatCombos(combos: any[]): string {\r\n    if (!combos || combos.length === 0) return '';\r\n\r\n    return combos\r\n      .map((combo, i) => {\r\n        const unit = this.productService.getUnit(combo.units, combo.ratio);\r\n        const text = `${combo.quantity}x ${combo.name} (${unit})`;\r\n        return i === combos.length - 1 ? text : text + ' ,';\r\n      })\r\n      .join(' ');\r\n  }\r\n\r\n  showConfirm(popconfirm: NzPopconfirmDirective): void {\r\n    if (popconfirm) {\r\n      popconfirm.show();\r\n    }\r\n  }\r\n\r\n  // private debounceQuantityChangeTimer: any = null;\r\n\r\n  /**\r\n   * Cập nhật bill khi tăng số lượng món ăn\r\n  */\r\n  updatePriceFoodAfterUpdateQuantity() {\r\n    // Run UI update instantly\r\n    this.food.price = parseFloat(this.food.price);\r\n\r\n    const index = this.selectedBill.getInvoiceDetail().findIndex(item => item._id == this.food._id);\r\n    this.selectedBill.getInvoiceDetail()[index] = { ...this.food };\r\n    this.selectedBill.setSubTotal();\r\n\r\n    this.quantityChange.emit(this.food);\r\n  }\r\n\r\n  handleDeletePromotions() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      return this.deletePromotions();\r\n    }).finally(() => {\r\n      this.vhComponent.hideLoading(0);\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"comp-67fc7c53888105edb17ea675\">\r\n  <ewa-frame-blank\r\n    (click)=\"onSelect(foodIndex,$event)\"\r\n    [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n    [style.--border]=\"selectedInvoiceDetailIndex === foodIndex ? 'none' : '1px solid #c6c8d0'\"\r\n    _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Food item\"\r\n    style=\"--width: 100%; --min-height: 100%; --background-color: #ffffff\"\r\n    class=\"no-border-top\">\r\n    <div style=\"padding-bottom: 8px\" class=\"grid-67fc7c53888105edb17ea675\">\r\n       <!-- Nếu có chương trình khuyến mãi -->\r\n      <ng-container *ngIf=\"food.id_promotion; else elseTemplate\">\r\n        <div class=\"comp-67fe0f96e0c588f5f98a8c9f\">\r\n          <ewa-icon\r\n            (click)=\"$event.stopPropagation()\"\r\n            [style.--color]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n            nzType=\"text\" nz-popconfirm nzPopconfirmPlacement=\"bottomCenter\" nz-button\r\n            [nzPopconfirmTitle]=\"'Cancel promotion?' | translate\"\r\n            [nzLoading]=\"food.deleting\"\r\n            (nzOnConfirm)=\"handleDeletePromotions()\" _id=\"67fe0f96e0c588f5f98a8c9f\" _name=\"icon-delete\">\r\n          </ewa-icon>\r\n        </div>\r\n        <div class=\"comp-67fe0e767121298fd35307c0\">\r\n          <ewa-button\r\n            [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n            [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n            [style.--color-icon]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n            style=\"--letter-spacing-content: 0px; --padding: 0\"\r\n            _id=\"67fe0e767121298fd35307c0\" _name=\"Giảm giá\"\r\n            [btn_content]=\"food.name\"\r\n            [show_icon]=\"food.pmtype === 6\"\r\n            (clickIcon)=\"$event.stopPropagation(); food.pmtype === 6 ? showProductGift = true : showProductGiftType7 = true\"\r\n          >\r\n          </ewa-button>\r\n        </div>\r\n\r\n        <div class=\"comp-67fc7c540dc37f57a501579d\">\r\n          <ng-container *ngIf=\"food.pmtype != 6\">\r\n            <div style=\"display: flex; flex-direction: column; gap: 4px\" *ngFor=\"let data of food.products\">\r\n              <ewa-frame-blank\r\n                [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                style=\"--width: 100%;--min-height: 100%;--background-color: #ffffff\"\r\n                _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame food info\"\r\n              >\r\n                <div class=\"grid-67fc7c540dc37f57a501579d\">\r\n                  <div class=\"comp-67fc838abb31540163a47075\">\r\n                    <ewa-text _id=\"67fc838abb31540163a47075\" _name=\"Food name\"\r\n                      [text_content]=\"data.name\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      style=\"--width: fit-content\">\r\n                    </ewa-text>\r\n                    <!-- Máy in -->\r\n                    <div *ngIf=\"checkPrinterKitchen.enable\" class=\"comp-67fcb51ec3a6c97e0da653ff\">\r\n                      <ewa-icon\r\n                        style=\"width: fit-content; display: block; --width: 14px; --height: 14px;\"\r\n                        (click)=\"$event.stopPropagation(); showPrintKitchenAgain = true; handleOpenPrintKitchen(data)\"\r\n                        [nzTooltipTitle]=\"'Print kitchen' | translate\"\r\n                        _id=\"67fcb51ec3a6c97e0da653ff\" _name=\"in bep\"\r\n                        nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottomCenter\"\r\n                      >\r\n                      </ewa-icon>\r\n                    </div>\r\n                    <div *ngIf=\"stamp\" class=\"comp-67fcb59b73af55c4feb0b8a4\">\r\n                      <ewa-icon\r\n                        style=\"width: fit-content; display: block; --width: 14px; --height: 14px;\"\r\n                        (click)=\"$event.stopPropagation(); handlePrintLabel(data,foodIndex)\"\r\n                        [nzTooltipTitle]=\"'Label printing' | translate\" nz-tooltip nzTooltipPlacement=\"bottomCenter\"\r\n                        _id=\"67fcb59b73af55c4feb0b8a4\" _name=\"in tem\"\r\n                      >\r\n                      </ewa-icon>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"comp-67fc7c55b6a65923cfdc97d4\">\r\n                    <!-- Số lượng -->\r\n                    <ewa-text\r\n                      style=\"--width: 100%\"\r\n                      [text_content]=\"data.quantity | number:'1.0-2'\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      _id=\"67fc838abb31540163a47075\" _name=\"Quantity\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <!-- Thành tiền -->\r\n                  <div class=\"comp-67fc7c56bdfb01adc33b64cd\">\r\n                    <ewa-text\r\n                      style=\"--width: 93.75%; --text-align-content: right\"\r\n                      [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price * data.quantity)\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      _id=\"67fc838abb31540163a47075\" _name=\"Food price\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <!-- Giá -->\r\n                  <div class=\"comp-67fc838ec18c75567dc01863\">\r\n                    <ewa-text\r\n                      [text_content]=\"('Price' | translate) + ': ' + vhAlgorithm.vhcurrencyunit(data.price)\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      _id=\"67fc838ec18c75567dc01863\" _name=\"Original price\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <!-- Giá khuyến mãi -->\r\n                  <div *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\" class=\"comp-67fc84168bcb4142b049e520\">\r\n                    <ewa-text\r\n                      style=\"--width: 93.75%; --text-align-content: right\"\r\n                      [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price_origin)\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      [ewaStyle]=\"{'text__wrapper': {'color': selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000', 'text-decoration': 'line-through'}}\"\r\n                      _id=\"67fc838abb31540163a47075\" _name=\"price discount\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <!-- Lô -->\r\n                  <div *ngIf=\"data.id_lotproduct\" class=\"comp-67fc85ab0d7052b74c6737b0\">\r\n                    <ewa-text\r\n                      style=\"--cursor: pointer; --width: 100%; width: fit-content; display: block\"\r\n                      [text_content]=\"productService.getLotNumber(data.lots, data.id_lotproduct)\"\r\n                      (click)=\"openModalChooseLot(data)\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-primary)'\"\r\n                      _id=\"67fc85ab0d7052b74c6737b0\" _name=\"Tên lô\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <div *ngIf=\"data.combos\" class=\"comp-67fc87b5bdf820c496739397\">\r\n                    <!-- Combo -->\r\n                    <ewa-text\r\n                      [text_content]=\"'+ ' + formatCombos(data.combos)\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      _id=\"67fc87b5bdf820c496739397\" _name=\"Combo\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                  <!-- Topping -->\r\n                  <div style=\"display: flex; flex-direction: column; gap: 4px\" class=\"comp-67fc849ee6c70b4399d6741e\">\r\n                    <div *ngFor=\"let sideDishes of data.toppings ? data.toppings : [];\">\r\n                      <ewa-frame-blank *ngIf=\"sideDishes?.quantity > 0\" style=\"--width: 98%;--min-height: 15px;--background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame-topping\"\r\n                        [style.--min-height]=\"'15px'\">\r\n                        <div class=\"grid-67fc849ee6c70b4399d6741e\">\r\n                          <div class=\"comp-67fc882e09affb915414b73a\">\r\n                            <ewa-text\r\n                              [text_content]=\"'+ ' + sideDishes.name\"\r\n                              [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                              _id=\"67fc882e09affb915414b73a\" _name=\"Topping name\"\r\n                            >\r\n                            </ewa-text>\r\n                          </div>\r\n                          <div class=\"comp-67fc88e46b4608d84e140de2\">\r\n                            <ewa-text\r\n                              [text_content]=\"sideDishes.quantity| number:'1.0-2'\"\r\n                              style=\"--width: 81.3559%\"\r\n                              [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                              _id=\"67fc882e09affb915414b73a\" _name=\"quantity topping\"\r\n                              [ewaStyle]=\"{\r\n                                'text__wrapper': {'justify-content': 'flex-start'},\r\n                                'text__content': {'text-align': 'left'}\r\n                              }\"\r\n                            >\r\n                            </ewa-text>\r\n                          </div>\r\n                        </div>\r\n                      </ewa-frame-blank>\r\n                    </div>\r\n                  </div>\r\n                  <!-- Thuộc tính -->\r\n                  <div style=\"display: flex; flex-direction: column; gap: 4px\" class=\"comp-67fc891cf2e697b07cb932b1\">\r\n                    <div *ngFor=\"let properties of data.properties ? data.properties : [];\">\r\n                      <ewa-text\r\n                        [text_content]=\"'+ ' + properties.name + ' - ' + properties.selectedValue\"\r\n                        style=\"--width: 98%\"\r\n                        [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                        _id=\"67fc882e09affb915414b73a\" _name=\"Thuộc tính\"\r\n                      >\r\n                      </ewa-text>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </ng-container>\r\n          <!-- Danh sách sản phẩm tặng được chọn -->\r\n          <div style=\"display: flex; flex-direction: column; gap: 4px\" *ngFor=\"let data of food.products_gift\">\r\n            <ng-container *ngIf=\"data.choose\">\r\n              <ewa-frame-blank\r\n                [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                style=\"--width: 100%;--min-height: 100%;--background-color: #ffffff\"\r\n                _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame food info\"\r\n              >\r\n              <div class=\"grid-67fc7c540dc37f57a501579d\">\r\n                <!-- Tên và icon máy in -->\r\n                <div class=\"comp-67fc838abb31540163a47075\">\r\n                  <ewa-text _id=\"67fc838abb31540163a47075\" _name=\"Food name\"\r\n                    [text_content]=\"data.name + ' (Quà tặng)'\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    style=\"--width: fit-content\">\r\n                  </ewa-text>\r\n                  <!-- Máy in -->\r\n                  <div *ngIf=\"checkPrinterKitchen.enable\" class=\"comp-67fcb51ec3a6c97e0da653ff\">\r\n                    <ewa-icon\r\n                      style=\"width: fit-content; display: block; --width: 14px; --height: 14px;\"\r\n                      (click)=\"$event.stopPropagation(); showPrintKitchenAgain = true; handleOpenPrintKitchen(data)\"\r\n                      [nzTooltipTitle]=\"'Print kitchen' | translate\"\r\n                      _id=\"67fcb51ec3a6c97e0da653ff\" _name=\"in bep\"\r\n                      nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottomCenter\"\r\n                    >\r\n                    </ewa-icon>\r\n                  </div>\r\n                  <div *ngIf=\"stamp\" class=\"comp-67fcb59b73af55c4feb0b8a4\">\r\n                    <ewa-icon\r\n                      style=\"width: fit-content; display: block; --width: 14px; --height: 14px;\"\r\n                      (click)=\"$event.stopPropagation(); handlePrintLabel(data,foodIndex)\"\r\n                      [nzTooltipTitle]=\"'Label printing' | translate\" nz-tooltip nzTooltipPlacement=\"bottomCenter\"\r\n                      _id=\"67fcb59b73af55c4feb0b8a4\" _name=\"in tem\"\r\n                    >\r\n                    </ewa-icon>\r\n                  </div>\r\n                </div>\r\n                <div class=\"comp-67fc7c55b6a65923cfdc97d4\">\r\n                  <!-- Số lượng -->\r\n                  <ewa-text\r\n                    style=\"--width: 66.1871%\"\r\n                    [text_content]=\"data.quantity | number:'1.0-2'\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    _id=\"67fc838abb31540163a47075\" _name=\"Quantity\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- Thành tiền -->\r\n                <div class=\"comp-67fc7c56bdfb01adc33b64cd\">\r\n                  <ewa-text\r\n                    style=\"--width: 93.75%; --text-align-content: right\"\r\n                    [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price * data.quantity)\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    _id=\"67fc838abb31540163a47075\" _name=\"Food price\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- Giá -->\r\n                <div class=\"comp-67fc838ec18c75567dc01863\">\r\n                  <ewa-text\r\n                    [text_content]=\"('Price' | translate) + ': ' + vhAlgorithm.vhcurrencyunit(data.price)\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    _id=\"67fc838ec18c75567dc01863\" _name=\"Original price\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- Giá khuyến mãi -->\r\n                <div *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\" class=\"comp-67fc84168bcb4142b049e520\">\r\n                  <ewa-text\r\n                    style=\"--width: 93.75%; --text-align-content: right\"\r\n                    [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price_origin)\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    [ewaStyle]=\"{'text__wrapper': {'color': selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000', 'text-decoration': 'line-through'}}\"\r\n                    _id=\"67fc838abb31540163a47075\" _name=\"price discount\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- Lô -->\r\n                <div *ngIf=\"data.id_lotproduct\" class=\"comp-67fc85ab0d7052b74c6737b0\">\r\n                  <ewa-text\r\n                    style=\"--cursor: pointer; --width: 100%; width: fit-content; display: block\"\r\n                    [text_content]=\"productService.getLotNumber(data.lots, data.id_lotproduct)\"\r\n                    (click)=\"openModalChooseLot(data)\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-primary)'\"\r\n                    _id=\"67fc85ab0d7052b74c6737b0\" _name=\"Tên lô\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <div *ngIf=\"data.combos\" class=\"comp-67fc87b5bdf820c496739397\">\r\n                  <!-- Combo -->\r\n                  <ewa-text\r\n                    [text_content]=\"'+ ' + formatCombos(data.combos)\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    _id=\"67fc87b5bdf820c496739397\" _name=\"Combo\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n                <!-- Topping -->\r\n                <div style=\"display: flex; flex-direction: column; gap: 4px\" *ngIf=\"data.toppings && data.toppings.length\" class=\"comp-67fc849ee6c70b4399d6741e\">\r\n                  <div *ngFor=\"let sideDishes of data.toppings ? data.toppings : [];\">\r\n                    <ewa-frame-blank *ngIf=\"sideDishes?.quantity > 0\" style=\"--width: 98%;--min-height: 15px;--background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame-topping\"\r\n                      [style.--min-height]=\"'15px'\">\r\n                      <div class=\"grid-67fc849ee6c70b4399d6741e\">\r\n                        <div class=\"comp-67fc882e09affb915414b73a\">\r\n                          <ewa-text\r\n                            [text_content]=\"'+ ' + sideDishes.name\"\r\n                            [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                            _id=\"67fc882e09affb915414b73a\" _name=\"Topping name\"\r\n                          >\r\n                          </ewa-text>\r\n                        </div>\r\n                        <div class=\"comp-67fc88e46b4608d84e140de2\">\r\n                          <ewa-text\r\n                            [text_content]=\"sideDishes.quantity| number:'1.0-2'\"\r\n                            style=\"--width: 81.3559%\"\r\n                            [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                            _id=\"67fc882e09affb915414b73a\" _name=\"quantity topping\"\r\n                            [ewaStyle]=\"{\r\n                              'text__wrapper': {'justify-content': 'flex-start'},\r\n                              'text__content': {'text-align': 'left'}\r\n                            }\"\r\n                          >\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n                <!-- Thuộc tính -->\r\n                <div style=\"display: flex; flex-direction: column; gap: 4px\" class=\"comp-67fc891cf2e697b07cb932b1\">\r\n                  <div *ngFor=\"let properties of data.properties ? data.properties : [];\">\r\n                    <ewa-text\r\n                      style=\"--width: 98%\"\r\n                      [text_content]=\"'+ ' + properties.name + ' - ' + properties.selectedValue\"\r\n                      [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                      _id=\"67fc882e09affb915414b73a\" _name=\"Thuộc tính\"\r\n                    >\r\n                    </ewa-text>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              </ewa-frame-blank>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <!-- Không có chương trình khuyến mãi -->\r\n      <ng-template #elseTemplate>\r\n        <div class=\"comp-67fc7c540dc37f57a501579d\">\r\n          <ewa-frame-blank\r\n            [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n            style=\"--width: 100%;--min-height: 100%;--background-color: #ffffff\"\r\n            _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame food info\"\r\n          >\r\n            <div class=\"grid-67fc7c540dc37f57a501579d\">\r\n              <div class=\"comp-67fc838abb31540163a47075\">\r\n                <!-- Icon đồng hồ (dùng cho Dịch vụ thời gian) -->\r\n                <div class=\"comp-67fcb51ec3a6c97e0da693ff\"\r\n                  *ngIf=\"food.ptype === VhType.SERVICETIME\">\r\n                  <ewa-icon _id=\"67fcb51ec3a6c97e0da693ff\" _name=\"icon-dong-ho\"\r\n                    style=\"width: fit-content; display: block; --width: 16px; --height: 16px; --font-size: 18px; margin-top: -2px\"\r\n                    [style.--color]=\"food.is_paused ? 'var(--ion-color-vh-orange)' : selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                    [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\">\r\n                  </ewa-icon>\r\n                </div>\r\n                <ewa-text _id=\"67fc838abb31540163a47075\" _name=\"Food name\"\r\n                  [text_content]=\"food.name\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  style=\"--width: fit-content\">\r\n                </ewa-text>\r\n                <!-- Icon i (dùng cho Dịch vụ thời gian) -->\r\n                <div class=\"comp-67fcb51ec3a6c97e0da658ff\"\r\n                  *ngIf=\"food.ptype === VhType.SERVICETIME\">\r\n                  <ewa-icon _id=\"67fcb51ec3a6c97e0da658ff\" _name=\"icon-info\"\r\n                    style=\"width: fit-content; display: block; --width: 14px; --height: 14px;\"\r\n                    [nzTooltipTitle]=\"'The price will be calculated at the time the order is updated' | translate\" nz-tooltip nzTooltipPlacement=\"bottomCenter\"\r\n                    [style.--color]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                    [style.--background-color]=\"selectedInvoiceDetailIndex === foodIndex ? 'var(--ion-color-vh-green)' : '#ffffff'\">\r\n                  </ewa-icon>\r\n                </div>\r\n                <!-- Máy in -->\r\n                <div *ngIf=\"checkPrinterKitchen.enable\" class=\"comp-67fcb51ec3a6c97e0da653ff\">\r\n                  <ewa-icon\r\n                    style=\"width: fit-content; display: block; --width: 14px; --height: 14px;--color: var(--ion-color-vh-green)\"\r\n                    (click)=\"$event.stopPropagation(); showPrintKitchenAgain = true; handleOpenPrintKitchen(food)\"\r\n                    [nzTooltipTitle]=\"'Print kitchen' | translate\"\r\n                    _id=\"67fcb51ec3a6c97e0da653ff\" _name=\"in bep\"\r\n                    nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottomCenter\"\r\n                  >\r\n                  </ewa-icon>\r\n                </div>\r\n                <div *ngIf=\"stamp\" class=\"comp-67fcb59b73af55c4feb0b8a4\">\r\n                  <ewa-icon\r\n                    style=\"width: fit-content; display: block; --width: 14px; --height: 14px; --color: #000000\"\r\n                    (click)=\"$event.stopPropagation(); handlePrintLabel(food,foodIndex)\"\r\n                    [nzTooltipTitle]=\"'Label printing' | translate\" nz-tooltip nzTooltipPlacement=\"bottomCenter\"\r\n                    _id=\"67fcb51ec3a6c97e0da653ff\" _name=\"in tem\"\r\n                  >\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n              <div class=\"comp-67fc7c55b6a65923cfdc97d4\"\r\n                *ngIf=\"food.ptype !== VhType.SERVICETIME\">\r\n                <!-- Số lượng -->\r\n                <ewa-text\r\n                  style=\"--width: 66.1871%\"\r\n                  [text_content]=\"food.quantity | number:'1.0-2'\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  _id=\"67fc838abb31540163a47075\" _name=\"Quantity\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Lô -->\r\n              <div *ngIf=\"food.id_lotproduct\" class=\"comp-67fc85ab0d7052b74c6737b0\">\r\n                <ewa-text\r\n                  style=\"--cursor: pointer; --width: 100%; width: fit-content; display: block\"\r\n                  [text_content]=\"productService.getLotNumber(food.lots, food.id_lotproduct)\"\r\n                  (click)=\"openModalChooseLot(food)\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-primary)'\"\r\n                  _id=\"67fc85ab0d7052b74c6737b0\" _name=\"Tên lô\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Thành tiền -->\r\n              <div class=\"comp-67fc7c56bdfb01adc33b64cd\">\r\n                <ewa-text\r\n                  style=\"--width: 93.75%; --text-align-content: right\"\r\n                  [text_content]=\"vhAlgorithm.vhcurrencyunit(food.price * food.quantity)\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  _id=\"67fc838abb31540163a47075\" _name=\"Food price\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Giá -->\r\n              <div class=\"comp-67fc838ec18c75567dc01863\"\r\n                *ngIf=\"food.ptype !== VhType.SERVICETIME\">\r\n                <ewa-text\r\n                  [text_content]=\"('Price' | translate) + ': ' + vhAlgorithm.vhcurrencyunit(food.price)\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  _id=\"67fc838ec18c75567dc01863\" _name=\"Original price\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Giá khuyến mãi -->\r\n              <div *ngIf=\"food.price < food.price_origin && display_promotion_selling_price\" class=\"comp-67fc84168bcb4142b049e520\">\r\n                <ewa-text\r\n                  style=\"--width: 93.75%; --text-align-content: right\"\r\n                  [text_content]=\"vhAlgorithm.vhcurrencyunit(food.price_origin)\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  [ewaStyle]=\"{'text__wrapper': {'color': selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000', 'text-decoration': 'line-through'}}\"\r\n                  _id=\"67fc838abb31540163a47075\" _name=\"price discount\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Combo -->\r\n              <div *ngIf=\"food.combos\" class=\"comp-67fc87b5bdf820c496739397\">\r\n                <ewa-text\r\n                  [text_content]=\"'+ ' +  formatCombos(food.combos)\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                  _id=\"67fc87b5bdf820c496739397\" _name=\"Combo\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Topping -->\r\n              <div style=\"display: flex; flex-direction: column; gap: 4px\" *ngIf=\"food.toppings && food.toppings.length\" class=\"comp-67fc849ee6c70b4399d6741e\">\r\n                <div *ngFor=\"let sideDishes of food.toppings ? food.toppings : [];\">\r\n                  <ewa-frame-blank *ngIf=\"sideDishes?.quantity > 0\" style=\"--width: 98%;--min-height: 15px;--background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame-topping\"\r\n                    [style.--min-height]=\"'15px'\">\r\n                    <div class=\"grid-67fc849ee6c70b4399d6741e\">\r\n                      <div class=\"comp-67fc882e09affb915414b73a\">\r\n                        <ewa-text\r\n                          [text_content]=\"'+ ' + sideDishes.name\"\r\n                          [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                          _id=\"67fc882e09affb915414b73a\" _name=\"Topping name\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67fc88e46b4608d84e140de2\">\r\n                        <ewa-text\r\n                          [text_content]=\"sideDishes.quantity| number:'1.0-2'\"\r\n                          style=\"--width: 81.3559%\"\r\n                          [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                          _id=\"67fc882e09affb915414b73a\" _name=\"quantity topping\"\r\n                          [ewaStyle]=\"{\r\n                            'text__wrapper': {'justify-content': 'flex-start'},\r\n                            'text__content': {'text-align': 'left'}\r\n                          }\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67fc8a2da52ef2f087cad8a9\">\r\n                        <ewa-text\r\n                          style=\"--width: 100%; --text-align-content: right\"\r\n                          [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)\"\r\n                          _id=\"67fc882e09affb915414b73a\" _name=\"total price topping\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"sideDishes.price < sideDishes.price_origin\" class=\"comp-67fdcbbebde3cbbc619e5734\">\r\n                        <ewa-text\r\n                          [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                          [ewaStyle]=\"{'text__wrapper': {'color': selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'}}\"\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)\" _id=\"67fdcbbebde3cbbc619e5734\"\r\n                          _name=\"price discount\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n              <!-- Thuộc tính -->\r\n              <div style=\"display: flex; flex-direction: column; gap: 4px\" class=\"comp-67fc891cf2e697b07cb932b1\">\r\n                <div *ngFor=\"let properties of food.properties ? food.properties : [];\">\r\n                  <ewa-text\r\n                    style=\"--width: 98%\"\r\n                    [text_content]=\"'+ ' +  properties.name + ' - ' + properties.selectedValue\"\r\n                    [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\"\r\n                    _id=\"67fc882e09affb915414b73a\" _name=\"Thuộc tính\"\r\n                  >\r\n                  </ewa-text>\r\n                </div>\r\n              </div>\r\n              <!-- Thời gian -->\r\n              <div class=\"comp-67fc838ec18c75567dc01863-time\"\r\n                *ngIf=\"food.ptype === VhType.SERVICETIME && type !== 'booking'\">\r\n                <ewa-text _id=\"67fc838ec18c75567dc01863\" _name=\"time-start-order\"\r\n                  *ngIf=\"food.time_start_order\"\r\n                  [text_content]=\"('Started at' | translate) + ': ' + (food.time_start_order | date : 'HH:mm:ss dd/MM/yyyy')\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\">\r\n                </ewa-text>\r\n                <ewa-text _id=\"67fc838ec18c75567dc01863\" _name=\"time-end-order\"\r\n                  *ngIf=\"food.time_end_order\"\r\n                  [text_content]=\"('Estimated until' | translate) + ': ' + (food.time_end_order | date : 'HH:mm:ss dd/MM/yyyy')\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : 'var(--ion-color-vh-orange)'\">\r\n                </ewa-text>\r\n                <ewa-text _id=\"67fc838ec18c75567dc01863\" _name=\"time-end-order\"\r\n                  *ngIf=\"productService.generateTimeUseString(food.time_start_order, food.time_end_order) as usedTime\"\r\n                  [text_content]=\"('Used' | translate) + ': ' + usedTime\"\r\n                  [style.--color-content]=\"selectedInvoiceDetailIndex === foodIndex ? '#ffffff' : '#000000'\">\r\n                </ewa-text>\r\n              </div>\r\n            </div>\r\n          </ewa-frame-blank>\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"selectedInvoiceDetailIndex === foodIndex\">\r\n          <!-- Nút giảm số lượng -->\r\n          <div *ngIf=\"food.ptype !== VhType.SERVICETIME\" class=\"comp-67fc7c541f9adb8807ba4cbc\">\r\n            <ewa-button\r\n              [disabled]=\"food.quantity <= 1\"\r\n              [icon_name]=\"'remove'\"\r\n              (click)=\"reduceQuantity(food); updatePriceFoodAfterUpdateQuantity()\"\r\n              _id=\"67fc7c541f9adb8807ba4cbc\" _name=\"Button decrease\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n\r\n          <!-- Nút tăng số lượng -->\r\n          <div *ngIf=\"food.ptype !== VhType.SERVICETIME\" class=\"comp-67fc7c54812d88a5ff7c485f\">\r\n            <ewa-button\r\n              style=\"--width: 98.7013%\"\r\n              [disabled]=\"food.quantity > 9999999998\"\r\n              [icon_name]=\"'add'\"\r\n              style=\"--font-size-icon: 24px; --color-icon: #61687e\"\r\n              (click)=\"increaseQuantity(food); updatePriceFoodAfterUpdateQuantity()\"\r\n              _id=\"67fc7c541f9adb8807ba4cbc\" _name=\"Button increase\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n\r\n          <!-- Nút sửa -->\r\n          <div *ngIf=\"food.ptype !== VhType.SERVICETIME || (food.ptype === VhType.SERVICETIME && type !== 'booking')\" class=\"comp-67fc7c5580b95aec6a7bba3c\"\r\n            [ngStyle]=\"{\r\n              'grid-area': type !== 'booking' && food.ptype === VhType.SERVICETIME ? '3 / 1 / 3 / 3' : '3 / 3'\r\n            }\">\r\n            <ewa-button\r\n              style=\"--width: 96.8153%; --color-content: #61687e; --text-transform-content: none\"\r\n              [btn_content]=\"'Edit' | translate\"\r\n              (click)=\"editFood(food)\"\r\n              style=\"--font-size-icon: 24px; --color-icon: #61687e\"\r\n              _id=\"67fc7c5580b95aec6a7bba3c\" _name=\"Button edit\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n\r\n          <!-- Nút xóa -->\r\n          <div class=\"comp-67fc7c55f908b1ce378bce0e\"\r\n            [ngStyle]=\"{\r\n              'grid-area': (type === 'booking' && food.ptype === VhType.SERVICETIME) ? '3 / 1 / 3 / 5' : food.ptype === VhType.SERVICETIME ? '3 / 3 / 3 / 5' : '3 / 4'\r\n            }\">\r\n            <ewa-button\r\n              nz-button nzType=\"text\" nzPopconfirmPlacement=\"bottom\"\r\n              nzPopconfirmTitle=\"{{'Delete' | translate}}?\"\r\n              (nzOnConfirm)=\"removeFood(food)\"\r\n              [nzLoading]=\"!food._id || food.deleting\"\r\n              nz-popconfirm #popconfirmRef=\"nzPopconfirm\"\r\n              (click)=\"$event.stopPropagation(); showConfirm(popconfirmRef)\"\r\n              [btn_content]=\"'Delete' | translate\"\r\n              style=\"--color-content: #bf0711; --text-transform-content: none\"\r\n              [style.--width]=\"type === 'booking' ? '98.5%' : '95%'\"\r\n              _id=\"67fc7c5580b95aec6a7bba3c\" _name=\"Button delete\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </ng-container>\r\n\r\n      </ng-template>\r\n    </div>\r\n  </ewa-frame-blank>\r\n</div>\r\n","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-info-payment',\r\n  templateUrl: './info-payment.component.html',\r\n  styleUrls: ['./info-payment.component.scss']\r\n})\r\nexport class InfoPaymentComponent extends CafeFnbUI {\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"comp-67eb4fbcf2f1d61cc86a9afd\">\r\n  <ewa-block-hover style=\"--width: 417px; --min-height: 100%; --background-color: #ffffff; --border-radius: 5px; --border: 1px solid #c6c8d0\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"thong-tin-don-hang\">\r\n    <div style=\"padding-bottom: 25px;\" class=\"grid-67eb4fbcf2f1d61cc86a9afd\">\r\n       <!-- Cộng tiền -->\r\n      <div class=\"comp-67eb51e1dc2276dad232219c\">\r\n        <ewa-text [text_content]=\"('SubTotal' | translate) + ' (' + getTotalFood() +')'\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div class=\"comp-67eb51eb3d32face589b24a1\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getSubTotal())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n       <!-- Giảm giá -->\r\n      <div *ngIf=\"vhAuth.localStorageGET('show_discount')\" class=\"comp-67eb54714aa0206bb0dd8227\">\r\n        <ewa-text [text_content]=\"'Discount value' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"vhAuth.localStorageGET('show_discount')\" class=\"comp-67eb54768050f68f50ca9316\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscount())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Chiết khấu -->\r\n      <div *ngIf=\"selectedBill.getDiscountBill()\" class=\"comp-67eb548e2af38edfa411c541\">\r\n        <ewa-text [text_content]=\"'Discount' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"selectedBill.getDiscountBill()\" class=\"comp-67eb547d99eb0fd0750c4071\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountBill())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Phí -->\r\n      <div class=\"comp-67eb5493d7849f9d768615d9\">\r\n        <ewa-text [text_content]=\"'Fee' | translate\" _id=\"67eb51e1dc2276dad232219c\" _name=\"Phi dich vu title\">\r\n        </ewa-text>\r\n      </div>\r\n      <div class=\"comp-67eb5484b01d770ed158d65f\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getFee())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Thuế -->\r\n      <div *ngIf=\"vhAuth.localStorageGET('show_tax')\" class=\"comp-67eb54973eea3cdf2e9746f6\">\r\n        <ewa-text [text_content]=\"'Tax' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"vhAuth.localStorageGET('show_tax')\" class=\"comp-67eb54881e5ad3a0bd7e10b0\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getTaxValue())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n       <!-- Thanh toán điểm -->\r\n      <div *ngIf=\"selectedBill.getDiscountPoint()\" class=\"comp-68022164414ddc74275ef521\">\r\n        <ewa-text [text_content]=\"'Point payment' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"selectedBill.getDiscountPoint()\" class=\"comp-68022169a297aae18307a00a\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountPoint())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n       <!-- Điểm tích lũy cộng thêm -->\r\n      <div *ngIf=\"customerType == 2\" style=\"margin-left: 19px;margin-top: 22px;display: block;grid-area: 7 / 1;\">\r\n        <ewa-text [text_content]=\"'Additional accumulated points' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"customerType == 2\" style=\"margin-left: 0.5px;margin-top: 22px;display: block;grid-area: 7 / 2;\">\r\n        <ewa-text [text_content]=\"getTotalEarningPoint().toString()\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n      <!-- Thanh toán phiếu -->\r\n      <div *ngIf=\"selectedBill.getDiscountCoupon()\" class=\"comp-680222b2b780ad6d694da64e\">\r\n        <ewa-text [text_content]=\"'Coupon payment' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n        </ewa-text>\r\n      </div>\r\n      <div *ngIf=\"selectedBill.getDiscountCoupon()\" class=\"comp-680222ea67dbc6cfe59fe4c5\">\r\n        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountCoupon())\" _id=\"67eb51eb3d32face589b24a1\">\r\n        </ewa-text>\r\n      </div>\r\n    </div>\r\n  </ewa-block-hover>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-bill-option',\r\n  templateUrl: './bill-option.component.html',\r\n  styleUrls: ['./bill-option.component.scss'],\r\n})\r\nexport class BillOptionComponent extends CafeFnbUI {\r\n  @Input('bill') bill;\r\n\r\n  @Output() closeDropdown = new EventEmitter<void>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  handleDeleteBill() {\r\n    // tiến hành xóa\r\n    this.nzModalService.confirm({\r\n      nzTitle: `${this.languageService.translate('Are you sure to cancel this invoice')}?`,\r\n      nzCancelText: this.languageService.translate(\"Cancel\"),\r\n      nzOkText: \"Ok\",\r\n      nzOnOk: () => {\r\n        this.vhComponent.showLoading('').then(() => {\r\n          this.deleteProcess()\r\n            .then((id) => console.log('delete invoice: ', id))\r\n            .catch((err) => {\r\n              console.error(err);\r\n              this.vhComponent.showToast(\r\n                2000,\r\n                this.languageService.translate('Delete fail'),\r\n                'alert-toast'\r\n              );\r\n            })\r\n            .finally(() => {\r\n              this.vhComponent.alertMessageDesktop(\r\n                'success',\r\n                this.languageService.translate('Invoice deleted successfully')\r\n              );\r\n              this.vhComponent.hideLoading(0);\r\n            });\r\n        });\r\n      },\r\n      nzOnCancel: () => { },\r\n    });\r\n  }\r\n\r\n  deleteProcess() {\r\n    if (this.bill.id_table == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.bill._id),\r\n      ]);\r\n    } else {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.bill._id),\r\n        this.vhQueryCafe.updateTable(this.bill.id_table, {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n\r\n  gotoChoosetable() {\r\n    this.router.navigate(['/cafe/cafe-fnb/choose-table'], { state: { action: 'switch-table', id_table: this.bill.id_table } });\r\n  }\r\n\r\n  async openModalSeparateTable() {\r\n    this.closeDropdown.emit(); // đóng dropdown menu ở bill item\r\n    // Nếu đơn có khuyến mãi thì xóa khuyến mãi mới tách đơn\r\n    if (this.bill.is_promotion) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Đơn này đang có khuyến mãi. Bạn có muốn hủy khuyến mãi để tách đơn không')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.initBillToSeparate(this.bill).then(() => {\r\n            this.destroyBillDetails_withPromotions().then(() => {\r\n              this.vhQueryCafe\r\n                .updateBill_Billdetail(\r\n                  this.selectedBill.getID(),\r\n                  this.selectedBill.getCreateUpdateInvoice(5),\r\n                  this.selectedBill.getCreateUpdateInvoiceDetail()\r\n                )\r\n                .then(() => {\r\n                  this.getBill_Detail_ByID_Bill();\r\n                })\r\n                .catch((err) => console.error(err))\r\n                .finally(() => {\r\n                  this.vhComponent.hideLoading(0);\r\n                  this.showModalSeparateTable = true;\r\n                });\r\n            });\r\n          });\r\n        },\r\n        nzOnCancel: () => { },\r\n      });\r\n    }\r\n    else {\r\n      this.initBillToSeparate(this.bill).then(() => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.showModalSeparateTable = true;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"comp-67e6060c257ee816c6528296\">\r\n  <ewa-block-hover style=\"--width: 151px; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px; --border: 1px solid var(--ion-color-vh-green-dark)\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"modal-bill-option\">\r\n    <div class=\"grid-67e6060c257ee816c6528296\">\r\n      <div class=\"comp-67e615d4bdf1a50eb384ac90\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 100%; --background-color: transparent; --border-radius: 4px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"wrapper\">\r\n          <div class=\"grid-67e615d4bdf1a50eb384ac90\">\r\n            <div *ngIf=\"bill.id_table !== 'go_home'\" class=\"comp-67e615d5ad2d464af83c4299\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"chuyen-ban\">\r\n                <div class=\"grid-67e615d5ad2d464af83c4299\">\r\n                  <div class=\"comp-67e615d6adfdfb8eadcd521d\">\r\n                    <ewa-image\r\n                      [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/switch.png'\"\r\n                      _id=\"67e615d6adfdfb8eadcd521d\" _name=\"icon-chuyen-ban\"\r\n                    >\r\n                    </ewa-image>\r\n                  </div>\r\n                  <div class=\"comp-67e615d6521808a4fb29f740\">\r\n                    <ewa-button (click)=\"gotoChoosetable()\" [btn_content]=\"'Switch table' | translate\" _id=\"67e615d6521808a4fb29f740\" _name=\"btn-chuyen-ban\">\r\n                    </ewa-button>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div *ngIf=\"bill.id_table !== 'go_home'\" class=\"comp-67e615d5a6df1be693c03523\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tach-ban\">\r\n                <div class=\"grid-67e615d5a6df1be693c03523\">\r\n                  <div class=\"comp-67e615d69855e815cd940a75\">\r\n                    <ewa-image\r\n                      [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/separate%20(1).png'\"\r\n                      _id=\"67e615d6adfdfb8eadcd521d\" _name=\"icon-tach-ban\"\r\n                    >\r\n                    </ewa-image>\r\n                  </div>\r\n                  <div class=\"comp-67e615d59caf1557bf2b0cab\">\r\n                    <ewa-button\r\n                      (click)=\"openModalSeparateTable()\"\r\n                      [btn_content]=\"'Separate table' | translate\"\r\n                      _id=\"67e615d6521808a4fb29f740\" _name=\"btn-tach-ban\"\r\n                    >\r\n                    </ewa-button>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div class=\"comp-67e615d5ba31e54d556d62ce\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 30px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"xoa-don\">\r\n                <div class=\"grid-67e615d5ba31e54d556d62ce\">\r\n                  <div class=\"comp-67e615d7983c7a06fe5a3b59\">\r\n                    <ewa-image\r\n                      [image_url]=\"'https://115.78.228.208:20350/autowebapp/67e5f5f16ec30c5a13210486/images/design/objects/1345874%20(1).png'\"\r\n                      _id=\"67e615d6adfdfb8eadcd521d\" _name=\"icon-xoa-don\"\r\n                    >\r\n                    </ewa-image>\r\n                  </div>\r\n                  <div class=\"comp-67e615d63bc888876171f4d6\">\r\n                    <ewa-button\r\n                      (click)=\"handleDeleteBill()\"\r\n                      [btn_content]=\"'Xóa đơn'\"\r\n                      style=\"--color-content: #c82b34\"\r\n                      [btn_content]=\"'Delete bill' | translate\"\r\n                      _id=\"67e615d6521808a4fb29f740\" _name=\"btn-xoa-don\"\r\n                    >\r\n                    </ewa-button>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </ewa-block-hover>\r\n</div>\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Output, ViewChild } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { EmployeeService } from 'src/app/cafe/services/employee.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-cart-option',\r\n  templateUrl: './cart-option.component.html',\r\n  styleUrls: ['./cart-option.component.scss']\r\n})\r\nexport class CartOptionComponent extends CafeFnbUI {\r\n  @ViewChild('selectEmployee', { read: ElementRef }) selectRef!: ElementRef;\r\n  private titleSub!: Subscription;\r\n  @Output() closeDropdown = new EventEmitter<void>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n    public employeeService: EmployeeService,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // Hủy bỏ subscription khi component bị huỷ\r\n    if (this.titleSub) {\r\n      this.titleSub.unsubscribe();\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Gọi hàm để bắt đầu theo dõi thay đổi trong DOM\r\n    this.observeTextChanges();\r\n  }\r\n\r\n  private observeTextChanges() {\r\n    const hostEl: HTMLElement = this.selectRef.nativeElement;\r\n\r\n    // Tạo một MutationObserver để theo dõi sự thay đổi trong DOM của phần tử chứa\r\n    const mutationObserver = new MutationObserver(() => {\r\n      // Cập nhật title cho phần tử chứa văn bản được chọn\r\n      this.updateTitleForElement('.select__text');\r\n\r\n      // Cập nhật title cho tất cả các mục trong dropdown nếu chúng có mặt hoặc được thêm mới\r\n      const optionTextEls = hostEl.querySelectorAll('.list-select--item__text');\r\n      optionTextEls.forEach((el: HTMLElement) => this.updateTitleForElement(el));\r\n    });\r\n\r\n    // Theo dõi sự thay đổi trong DOM của selectEmployee, bao gồm việc thêm hoặc xoá các phần tử con\r\n    mutationObserver.observe(hostEl, {\r\n      childList: true,  // Theo dõi việc thêm/xoá các phần tử con\r\n      subtree: true,    // Theo dõi tất cả các phần tử con bên trong (bao gồm các mục trong dropdown)\r\n      characterData: true, // Theo dõi sự thay đổi trong dữ liệu văn bản của các phần tử\r\n    });\r\n\r\n    // Cập nhật title cho phần tử chứa văn bản được chọn ngay lập tức\r\n    this.updateTitleForElement('.select__text');\r\n  }\r\n\r\n  // Hàm giúp cập nhật title cho phần tử\r\n  private updateTitleForElement(selector: string | HTMLElement) {\r\n    // Lấy phần tử từ selector hoặc từ trực tiếp phần tử HTMLElement\r\n    const element = typeof selector === 'string' ?\r\n      this.selectRef.nativeElement.querySelector(selector) :\r\n      selector;\r\n    // Nếu phần tử tồn tại và có nội dung văn bản, thì cập nhật title cho nó\r\n    if (element && element.textContent) {\r\n      const text = element.textContent.trim(); // Lấy văn bản đã cắt bỏ khoảng trắng thừa\r\n      element.setAttribute('title', text); // Cập nhật thuộc tính title\r\n    }\r\n  }\r\n\r\n  handleDeleteBill() {\r\n    // tiến hành xóa\r\n    this.nzModalService.confirm({\r\n      nzTitle: `${this.languageService.translate('Are you sure to cancel this invoice')}?`,\r\n      nzCancelText: this.languageService.translate(\"Cancel\"),\r\n      nzOkText: \"Ok\",\r\n      nzOnOk: () => {\r\n        this.vhComponent.showLoading('').then(() => {\r\n          this.deleteProcess()\r\n            .then((id) => console.log('delete invoice: ', id))\r\n            .catch((err) => {\r\n              console.error(err);\r\n              this.vhComponent.showToast(\r\n                2000,\r\n                this.languageService.translate('Delete fail'),\r\n                'alert-toast'\r\n              );\r\n            })\r\n            .finally(() => {\r\n              this.vhQueryCafe.closeSyncOpeningBill();\r\n              this.vhComponent.alertMessageDesktop(\r\n                'success',\r\n                this.languageService.translate('Invoice deleted successfully')\r\n              );\r\n              this.vhComponent.hideLoading(0);\r\n            });\r\n        });\r\n      },\r\n      nzOnCancel: () => { },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Mở modal tách bàn khi đang ở trang chi tiết đơn\r\n   */\r\n  async openModalSeparateTable() {\r\n    // Nếu đơn có khuyến mãi thì xóa khuyến mãi mới tách đơn\r\n    if (this.selectedBill.isPromotion()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Đơn này đang có khuyến mãi. Bạn có muốn hủy khuyến mãi để tách đơn không')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.vhComponent.showLoading('').then(() => {\r\n            this.destroyBillDetails_withPromotions().then(() => {\r\n              this.vhQueryCafe\r\n                .updateBill_Billdetail(\r\n                  this.selectedBill.getID(),\r\n                  this.selectedBill.getCreateUpdateInvoice(5),\r\n                  this.selectedBill.getCreateUpdateInvoiceDetail()\r\n                )\r\n                .then(() => {\r\n                  this.getBill_Detail_ByID_Bill();\r\n                })\r\n                .catch((err) => console.error(err))\r\n                .finally(() => {\r\n                  this.vhComponent.hideLoading(0);\r\n                  this.showModalSeparateTable = true;\r\n                  this.closeDropdown.emit();\r\n                });\r\n            });\r\n          });\r\n        },\r\n        nzOnCancel: () => { },\r\n      });\r\n    }\r\n    else {\r\n      this.showModalSeparateTable = true;\r\n    }\r\n  }\r\n}\r\n","<div class=\"comp-680b56f2b0f09c63dbbdca08\">\r\n  <ewa-frame-blank _id=\"680b56f2b0f09c63dbbdca08\" style=\"--min-height: 100%;--border: 1px solid #e2e6ea\">\r\n    <div class=\"grid-680b56f2b0f09c63dbbdca08\"\r\n      style=\"display: flex; flex-direction: column;\">\r\n\r\n      <!-- In lại tem -->\r\n      <div class=\"comp-680b57d7f27cc69528eb35c6\">\r\n        <ewa-button\r\n          _id=\"680b57d7f27cc69528eb35c6\" _name=\"in-lai-tem\"\r\n          [style.--cursor]=\"!stamp || !selectedBill.getInvoiceDetail().length ? 'not-allowed' : 'pointer'\"\r\n          [disabled]=\"!stamp || !selectedBill.getInvoiceDetail().length\"\r\n          (click)=\"openModalSelectLabelPrint()\"\r\n          [btn_content]=\"'Reprint label' | translate\"\r\n          [icon_name]=\"'receipt'\">\r\n        </ewa-button>\r\n      </div>\r\n\r\n      <!-- Thay đổi bàn -->\r\n      <div *ngIf=\"selectedBill.getIdTable() !== 'go_home'\" class=\"comp-680b57d7f27cc69528eb35c6\">\r\n        <ewa-button (click)=\"showModalChooseTableToSwitch = true; closeDropdown.emit()\" _id=\"680b57d7f27cc69528eb35c6\" _name=\"Thay đổi bàn\"\r\n          [btn_content]=\"'Change table' | translate\">\r\n        </ewa-button>\r\n      </div>\r\n\r\n      <!-- Tách đơn -->\r\n      <div *ngIf=\"selectedBill.getIdTable() !== 'go_home'\" class=\"comp-680b5776b82f390677e95f37\">\r\n        <ewa-button (click)=\"openModalSeparateTable()\" _id=\"680b5776b82f390677e95f37\" _name=\"Tách đơn\"\r\n        [btn_content]=\"'Separate bill' | translate\">\r\n        </ewa-button>\r\n      </div>\r\n\r\n      <!-- Huỷ đơn -->\r\n      <div class=\"comp-680b573ec15e14f3711f00c7\">\r\n        <ewa-button (click)=\"handleDeleteBill()\" _id=\"680b573ec15e14f3711f00c7\" _name=\"Hủy đơn\"\r\n          [btn_content]=\"'Cancel bill' | translate\">\r\n        </ewa-button>\r\n      </div>\r\n\r\n\r\n      <div class=\"comp-680b584c522400ffec50e1f6\">\r\n        <ewa-frame-blank _id=\"680b56f2b0f09c63dbbdca08\"\r\n          style=\"--width: 298px; --min-height: 71px; --background-color: #f3f4f5; --border-radius: 0 0 5px 5px;\"\r\n          [ewaStyle]=\"{\r\n            'frame-blank': { 'border': '1px solid #e2e6ea' }\r\n          }\">\r\n          <div class=\"grid-680b584c522400ffec50e1f6\">\r\n            <!-- Tên đơn label -->\r\n            <div class=\"comp-680b588693e36ee72e6835aa\">\r\n              <ewa-text _id=\"680b588693e36ee72e6835aa\" _name=\"Tên đơn\"\r\n                [text_content]=\"'Bill name' | translate\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Tên đơn -->\r\n            <div class=\"comp-680b58bc9c9f0037072b81d3\">\r\n              <ewa-text _id=\"680b588693e36ee72e6835aa\" _name=\"Tên đơn value\"\r\n                style=\"--text-align-content: right\"\r\n                [text_content]=\"selectedBill.getBillCode()\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Người tạo đơn label -->\r\n            <div class=\"comp-680b58a7926cddbf43993fe7\">\r\n              <ewa-text _id=\"680b588693e36ee72e6835aa\" _name=\"Người tạo đơn\"\r\n                [text_content]=\"'Bill creator' | translate\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Người tạo đơn value -->\r\n            <div class=\"comp-680b58ba4bcd46a6753fc5c0\">\r\n              <ewa-select\r\n                #selectEmployee\r\n                _id=\"67ea075161bea6597000d8db\" _name=\"Select employee\"\r\n                class=\"select\"\r\n                [ewaStyle]=\"\r\n                {\r\n                  'select__text': {\r\n                    'white-space': 'nowrap',\r\n                    'overflow': 'hidden',\r\n                    'text-overflow': 'ellipsis'\r\n                  },\r\n                  'list-select--item__text': {\r\n                    'white-space': 'nowrap',\r\n                    'overflow': 'hidden',\r\n                    'text-overflow': 'ellipsis'\r\n                  }\r\n                }\"\r\n                [ngModel]=\"selectedBill.getIdEmployee()\"\r\n                style=\"--background-color-select-item-active: var(--ion-color-vh-green)\"\r\n                (ngModelChange)=\"changeEmployee($event)\"\r\n                [placeholder]=\"'Select employee' | translate\">\r\n                <ewa-option *ngFor=\"let item of employeeService.listEmployee; trackBy:myTrackByFunction\" [label]=\"item.name\" [value]=\"item._id\"></ewa-option>\r\n              </ewa-select>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </ewa-frame-blank>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-change-bill-type',\r\n  templateUrl: './change-bill-type.component.html',\r\n  styleUrls: ['./change-bill-type.component.scss']\r\n})\r\nexport class ChangeBillTypeComponent extends CafeFnbUI {\r\n  @Output() closeDropdown = new EventEmitter<void>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  changeTypeBill(type) {\r\n    if (type === 'go_home' && this.selectedBill.getIdTable() !== 'go_home') {\r\n      this.vhQueryCafe.updateTable(this.selectedBill.getIdTable(), { status: false });\r\n      this.selectedBill.setIdTable('go_home');\r\n      this.selectedBill.setIdArea('go_home');\r\n      this.tableInfo = this.languageService.translate(\"Take away\");\r\n      this.updateServiceTime();\r\n      this.updateInvoice(true);\r\n      this.closeDropdown.emit();\r\n    }\r\n    else if (type === '' && this.selectedBill.getIdTable() === 'go_home') {\r\n      this.selectedBill.setIdTable('');\r\n      this.tableInfo = ``;\r\n      this.updateServiceTime();\r\n      this.closeDropdown.emit();\r\n    }\r\n  }\r\n}\r\n","<div class=\"comp-680b12ff92f889ec1d7aeb79\">\r\n  <ewa-block-hover style=\"--width: 155px; --min-height: 85px; --background-color: #ffffff;--border: 1px solid #c6c8d0\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"chuyen-loai-don\">\r\n    <div class=\"grid-680b12ff92f889ec1d7aeb79\">\r\n      <div class=\"comp-680b1446cc2609ae4f0aa9f2\">\r\n        <ewa-button\r\n          [btn_content]=\"'Dine-in order' | translate\"\r\n          [icon_name]=\"'room_service'\"\r\n          style=\"--color-icon: var(--ion-color-vh-green)\"\r\n          (click)=\"changeTypeBill('')\"\r\n          _id=\"680b148fdc29d81fa4726f48\" _name=\"btn-an-tai-ban\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n      <div class=\"comp-680b148fdc29d81fa4726f48\">\r\n        <ewa-button\r\n          [btn_content]=\"'Takeaway order' | translate\"\r\n          [icon_name]=\"'work'\"\r\n          style=\"--color-icon: #ff5900\"\r\n          (click)=\"changeTypeBill('go_home')\"\r\n          _id=\"680b148fdc29d81fa4726f48\" _name=\"btn-mang-di\"\r\n        >\r\n        </ewa-button>\r\n      </div>\r\n    </div>\r\n  </ewa-block-hover>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-change-price-type',\r\n  templateUrl: './change-price-type.component.html',\r\n  styleUrls: ['./change-price-type.component.scss']\r\n})\r\nexport class ChangePriceTypeComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67e618c301f826c932c6f2db\">\r\n      <ewa-block-hover style=\"--width: 100%; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px\" _id=\"67e5f60e9b9d51850ab2e609\">\r\n        <div class=\"grid-67e618c301f826c932c6f2db\">\r\n          <div class=\"comp-67e76613f24992f83d6550f1\">\r\n            <ewa-frame-blank _id=\"67e76613f24992f83d6550f1\" _name=\"wrapper\">\r\n              <div class=\"grid-67e76613f24992f83d6550f1\">\r\n                <div class=\"comp-67e7666f1e58b39798e4d8ee\">\r\n                  <ewa-frame-blank _id=\"67e7666f1e58b39798e4d8ee\" _name=\"header\">\r\n                    <div class=\"grid-67e7666f1e58b39798e4d8ee\">\r\n                      <div class=\"comp-67e76670c6c3f00f9b5a5f56\">\r\n                        <ewa-text [text_content]=\"'Choose selling price' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"title\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e7667044587fc691f851be\">\r\n                        <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"close-icon\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e7683a079acc8344d60d49\">\r\n                  <ewa-frame-blank _id=\"67e7683a079acc8344d60d49\" _name=\"main\">\r\n                    <div class=\"grid-67e7683a079acc8344d60d49\">\r\n                      <div class=\"comp-67eb917e708f00f0b3139dbb\">\r\n                        <ewa-radio-button\r\n                          style=\"--width: 100%; --background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                          [(ngModel)]=\"default_price_type\"\r\n                          _id=\"67f9d7c3b3f0205187b51cb5\"\r\n                        >\r\n                          <ewa-option [label]=\"('Selling price' | translate) + '1'\" [value]=\"1\"></ewa-option>\r\n                          <ewa-option [label]=\"('Selling price' | translate) + '2'\" [value]=\"2\"></ewa-option>\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e766e2c68baeb37f60a663\">\r\n                  <ewa-frame-blank _id=\"67e766e2c68baeb37f60a663\" _name=\"bottom\">\r\n                    <div class=\"grid-67e766e2c68baeb37f60a663\">\r\n                      <div class=\"comp-67e766e273c6f421a5caa29c\">\r\n                        <ewa-button style=\"--width: 189px;--border: 1px solid var(--ion-color-vh-green); --color-content: var(--ion-color-vh-green);--background-color: transparent;\" [btn_content]=\"'Cancel' | translate\" (click)=\"onClose.emit();\" _id=\"67e766e273c6f421a5caa29c\" _name=\"btn-huy\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67e766e3f5f968cab2e3e608\">\r\n                        <ewa-button style=\"--width: 189px;--background-color: var(--ion-color-vh-green);\" [btn_content]=\"'OK'\" (click)=\"onSave.emit();\" _id=\"67e766e3f5f968cab2e3e608\" _name=\"btn-dong-y\">\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { ChangeDetectorRef, Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-choose-food',\r\n  templateUrl: './choose-food.component.html',\r\n  styleUrls: ['./choose-food.component.scss']\r\n})\r\nexport class ChooseFoodComponent extends CafeFnbUI {\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() closeSearchProduct = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  chooseFood() {\r\n    // Nếu là dạng có lô mà chưa chọn lô\r\n    if(this.choiceFoodSearch.lots && !this.choiceFoodSearch.id_lotproduct) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('Please select lot!'));\r\n      return;\r\n    }\r\n    this.showOptions = false;\r\n    // if (this.choiceFoodSearch.toppings)\r\n    //   this.choiceFoodSearch.toppings = this.choiceFoodSearch.toppings.filter(\r\n    //     (item) => item.quantity\r\n    //   );\r\n    if (this.choiceFoodSearch.quantity) {\r\n      if (this.choiceFoodSearch['combos']) {\r\n        this.choiceFoodSearch['combos'] = this.choiceFoodSearch['combos'].map((item) => {\r\n          return {\r\n            ...item,\r\n            id_category: this.vhQueryCafe.getlocalProduct(item.id_product)\r\n              .id_category,\r\n          };\r\n        });\r\n      }\r\n      this.closeSearchProduct.emit(this.choiceFoodSearch);\r\n    }\r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev[0]);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price);\r\n      }\r\n    } else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev[0]);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price2);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price2);\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit()\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb64dc6937d216018aa84b\">\r\n      <ewa-block-hover style=\"--width: 715px; --min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"tuy-chon-mon-an\">\r\n        <div *ngIf=\"choiceFoodSearch\" class=\"grid-67eb64dc6937d216018aa84b\">\r\n          <div class=\"comp-67eb6510ab2ec99566e7608a\">\r\n            <ewa-frame-blank style=\"--width: 715px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\">\r\n              <div class=\"grid-67eb6510ab2ec99566e7608a\">\r\n                <div class=\"comp-67eb6510fecc6e52ecf154a4\">\r\n                  <ewa-text style=\"--width: 547px\" [text_content]=\"choiceFoodSearch?.name\" _id=\"67e76670c6c3f00f9b5a5f56\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-67eb65104534ceaa5ddd4c89\">\r\n                  <ewa-icon (click)=\"showOptions = false\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"main-content\">\r\n            <!-- Dạng combo -->\r\n            <ng-container *ngIf=\"choiceFoodSearch.type === 5\">\r\n              <div class=\"comp-67eb6a885cc320c2614cd9a3\">\r\n                <!-- Giá -->\r\n                <ewa-input-group\r\n                  [ngClass]=\"'price-' + choiceFoodSearch._id\"\r\n                  [placeholder]=\"'Price' | translate\"\r\n                  [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n                  [value]=\"vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price)\"\r\n                  (blur)=\"updatePriceSearch(choiceFoodSearch)\"\r\n                  _id=\"67eb6a885cc320c2614cd9a3\" _name=\"gia-tien-unit\"\r\n                >\r\n                </ewa-input-group>\r\n                <s *ngIf=\"choiceFoodSearch.price_origin > choiceFoodSearch.price\"\r\n                  style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price_origin)}}</s>\r\n              </div>\r\n              <div class=\"comp-67eb6b0abb788597635ee8a8\">\r\n                <!-- Số lượng -->\r\n                <ewa-input-number\r\n                  [min]=\"1\"\r\n                  [max]=\"9999999998\"\r\n                  [(ngModel)]=\"choiceFoodSearch.quantity\"\r\n                  (blur)=\"updatePriceSearch(choiceFoodSearch)\"\r\n                  _id=\"67eb6b0abb788597635ee8a8\" _name=\"input-quantity-unit\"\r\n                >\r\n                </ewa-input-number>\r\n              </div>\r\n              <div class=\"comp-67eb6f65cc490742253ccf9c\">\r\n                 <!-- Thành tiền -->\r\n                <ewa-text\r\n                  [text_content]=\"vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price * choiceFoodSearch.quantity)\"\r\n                  _id=\"67eb6f65cc490742253ccf9c\" _name=\"price-unit\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Ghi chú label -->\r\n              <div class=\"comp-67eb6e342ba16e3ab3ed03e5\">\r\n                <ewa-text _id=\"67eb6e342ba16e3ab3ed03e5\" _name=\"ghi-chu-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb6e84d5881459080db451\">\r\n                <!-- Ghi chú -->\r\n                <ewa-input-group\r\n                  [placeholder]=\"'Enter note' | translate\"\r\n                  [(ngModel)]=\"choiceFoodSearch.note\"\r\n                  (rightContentClick)=\"choiceFoodSearch.note = ''\"\r\n                  _id=\"67eb6e84d5881459080db451\" _name=\"input-ghi-chu\"\r\n                >\r\n                </ewa-input-group>\r\n              </div>\r\n               <!-- Danh sách lô trong combo -->\r\n              <ng-container *ngFor=\"let combo of choiceFoodSearch.combos\">\r\n                <ng-container *ngIf=\"combo.lots\">\r\n                  <div class=\"comp-67f9d5a46183f4eac7976998\">\r\n                    <ewa-text [text_content]=\"'Select lot and expiry date for combo components' | translate\" _id=\"67f9d5a46183f4eac7976998\" _name=\"chon-lo-label\">\r\n                    </ewa-text>\r\n                    <!-- Tên và Đơn vị -->\r\n                   <span>{{combo.name}} ({{combo.unit}})</span>\r\n                  </div>\r\n                  <div class=\"comp-67f9d78680eba9a6921288a3\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                    <!-- Danh sách lô để chọn -->\r\n                    <div *ngFor=\"let lot of combo.lots\">\r\n                      <ewa-frame-blank style=\"--width: 657px; --min-height: 35px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-lo\">\r\n                        <div class=\"grid-67f9d78680eba9a6921288a3\">\r\n                          <div class=\"comp-67f9d7c3b3f0205187b51cb5\">\r\n                            <ewa-radio-button\r\n                              [(ngModel)]=\"combo.id_lotproduct\"\r\n                              (ngModelChange)=\"changeLot($event, combo)\"\r\n                              style=\"--background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                              [data_list]=\"[{label: lot.lot_number, value: lot._id, isSelect: combo.id_lotproduct === lot._id}]\"\r\n                              _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-lo\"\r\n                            >\r\n                            </ewa-radio-button>\r\n                          </div>\r\n                          <div class=\"comp-67f9d871d54a66e6a463ebb0\">\r\n                            <ewa-text [text_content]=\"'NSX: ' + (lot.date_mfg | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ngay-san-xuat\">\r\n                            </ewa-text>\r\n                          </div>\r\n                          <div class=\"comp-67f9d89cd81dc74e054f8138\">\r\n                            <ewa-text [text_content]=\"'HSD: ' + (lot.date_exp | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"han-su-dung\">\r\n                            </ewa-text>\r\n                          </div>\r\n                          <div class=\"comp-67f9d8a4f78541ec21fca9e1\">\r\n                            <ewa-text style=\"--text-align-content: right\" [text_content]=\"'Stock ' + (lot.quantity_branch[id_branch] / combo.ratio | number:'1.0-2') | translate\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ton-kho\">\r\n                            </ewa-text>\r\n                          </div>\r\n                        </div>\r\n                      </ewa-frame-blank>\r\n                    </div>\r\n                  </div>\r\n                </ng-container>\r\n              </ng-container>\r\n            </ng-container>\r\n            <!-- Các dạng còn lại -->\r\n            <ng-container *ngIf=\"choiceFoodSearch.type !== 5\">\r\n              <div class=\"comp-67eb6a885cc320c2614cd9a3\">\r\n                <!-- Giá -->\r\n                <ewa-input-group\r\n                  [ngClass]=\"'price-' + choiceFoodSearch._id\"\r\n                  [placeholder]=\"'Price' | translate\"\r\n                  [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n                  [value]=\"vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price)\"\r\n                  (blur)=\"updatePriceSearch(choiceFoodSearch)\"\r\n                  _id=\"67eb6a885cc320c2614cd9a3\" _name=\"gia-tien-unit\"\r\n                >\r\n                </ewa-input-group>\r\n                <s *ngIf=\"choiceFoodSearch.price_origin > choiceFoodSearch.price\"\r\n                  style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price_origin)}}</s>\r\n              </div>\r\n              <div class=\"comp-67eb6aca44d2b1e66147d5df\">\r\n                <!-- Chọn đơn vị -->\r\n                <ewa-select\r\n                  [(ngModel)]=\"choiceFoodSearch.ratio\"\r\n                  style=\"--color-text: #64748b\"\r\n                  (ngModelChange)=\"changeUnit($event,choiceFoodSearch)\"\r\n                  _id=\"67eb6aca44d2b1e66147d5df\" _name=\"select-unit\"\r\n                >\r\n                  <ewa-option *ngFor=\"let i of choiceFoodSearch.units\" [label]=\"i.unit\" [value]=\"i.ratio\"></ewa-option>\r\n                </ewa-select>\r\n              </div>\r\n              <div class=\"comp-67eb6b0abb788597635ee8a8\">\r\n                <!-- Số lượng -->\r\n                <ewa-input-number\r\n                  [min]=\"1\"\r\n                  [max]=\"9999999998\"\r\n                  [(ngModel)]=\"choiceFoodSearch.quantity\"\r\n                  (blur)=\"updatePriceSearch(choiceFoodSearch)\"\r\n                  _id=\"67eb6b0abb788597635ee8a8\" _name=\"input-quantity-unit\"\r\n                >\r\n                </ewa-input-number>\r\n              </div>\r\n              <div class=\"comp-67eb6f65cc490742253ccf9c\">\r\n                 <!-- Thành tiền -->\r\n                <ewa-text\r\n                  [text_content]=\"vhAlgorithm.vhcurrencyunit(choiceFoodSearch.price * choiceFoodSearch.quantity)\"\r\n                  _id=\"67eb6f65cc490742253ccf9c\" _name=\"price-unit\"\r\n                >\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb6e342ba16e3ab3ed03e5\">\r\n                <ewa-text [text_content]=\"'Note' | translate\" _id=\"67eb6e342ba16e3ab3ed03e5\" _name=\"ghi-chu-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb6e84d5881459080db451\">\r\n                <!-- Ghi chú -->\r\n                <ewa-input-group\r\n                  [placeholder]=\"'Enter note' | translate\"\r\n                  [rightContent]=\"'Delete' | translate\"\r\n                  (rightContentClick)=\"choiceFoodSearch.note = ''\"\r\n                  [(ngModel)]=\"choiceFoodSearch.note\"\r\n                  _id=\"67eb6e84d5881459080db451\" _name=\"input-ghi-chu\"\r\n                >\r\n                </ewa-input-group>\r\n              </div>\r\n            </ng-container>\r\n            <!-- Thuộc tính -->\r\n            <ng-container *ngIf=\"choiceFoodSearch.properties && choiceFoodSearch.properties.length\">\r\n              <div class=\"comp-67eb6fee50eaede1dc97ef47\">\r\n                <ewa-text [text_content]=\"'Properties' | translate\" _id=\"67eb6fee50eaede1dc97ef47\" _name=\"thuoc-tinh-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb917efb1808b709f291aa\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <div *ngFor=\"let properties of choiceFoodSearch.properties; let i = index\">\r\n                  <ewa-frame-blank style=\"--width: 639px; --min-height: 55px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-thuoc-tinh\">\r\n                    <div class=\"grid-67eb917efb1808b709f291aa\">\r\n                      <div class=\"comp-67eb917eaf2e697540920c90\">\r\n                        <ewa-text [text_content]=\"properties.name\" _id=\"67eb917eaf2e697540920c90\" _name=\"ten-thuoc-tinh\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67eb917e708f00f0b3139dbb\">\r\n                        <ewa-radio-button\r\n                          style=\"--width: 639px; --background-color-button-checked: var(--ion-color-vh-green); --border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                          [(ngModel)]=\"properties.selectedValue\"\r\n                          _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-thuoc-tinh\"\r\n                        >\r\n                          <ewa-option *ngFor=\"let value of properties.value\" [label]=\"value\" [value]=\"value\"></ewa-option>\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n            <!-- Topping -->\r\n             <ng-container *ngIf=\"choiceFoodSearch.toppings && choiceFoodSearch.toppings.length\">\r\n              <div class=\"comp-67eb8fc8a53461b67460bdf5\">\r\n                <ewa-text [text_content]=\"'Side dishes' | translate\" _id=\"67eb8fc8a53461b67460bdf5\" _name=\"mon-phu-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb91c98c34692f69baaa45\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <div *ngFor=\"let item of choiceFoodSearch.toppings\">\r\n                  <ewa-frame-blank style=\"--width: 639px; --min-height: 55px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-topping\">\r\n                    <div class=\"grid-67eb91c98c34692f69baaa45\">\r\n                      <div class=\"comp-67eb91c9bd4200115b5d019a\">\r\n                        <ewa-text [text_content]=\"item.name |translate\" _id=\"67eb917eaf2e697540920c90\" _name=\"ten-mon-phu\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67eb920a67d372d0115610fc\">\r\n                        <ewa-input-group\r\n                          [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\" (blur)=\"updatePriceSearch(item)\"\r\n                          [placeholder]=\"'Price' | translate\"\r\n                          [ngClass]=\"'topping-' + item._id\" _id=\"67eb920a67d372d0115610fc\" _name=\"input-price-topping\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                      <div class=\"comp-67eb922576d2e746664d96be\">\r\n                        <ewa-input-number\r\n                          [min]=\"0\"\r\n                          [max]=\"9999999998\"\r\n                          [(ngModel)]=\"item.quantity\"\r\n                          _id=\"67eb6b0abb788597635ee8a8\" _name=\"input-quantity-topping\"\r\n                        >\r\n                        </ewa-input-number>\r\n                      </div>\r\n                      <div class=\"comp-67eb922e71653eeb3369e4f5\">\r\n                        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(item.price * item.quantity)\" _id=\"67eb922e71653eeb3369e4f5\" _name=\"tong-tien-topping\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n            <!-- Chọn Lô -->\r\n            <ng-container *ngIf=\"choiceFoodSearch.lots\">\r\n              <div class=\"comp-67f9d5a46183f4eac7976998\">\r\n                <ewa-text [text_content]=\"'Select lot' | translate\" _id=\"67f9d5a46183f4eac7976998\" _name=\"chon-lo-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67f9d78680eba9a6921288a3\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <!-- Danh sách lô để chọn -->\r\n                <div *ngFor=\"let item of choiceFoodSearch.lots\">\r\n                  <ewa-frame-blank style=\"--width: 657px; --min-height: 35px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-lo\">\r\n                    <div class=\"grid-67f9d78680eba9a6921288a3\">\r\n                      <div class=\"comp-67f9d7c3b3f0205187b51cb5\">\r\n                        <ewa-radio-button\r\n                          [(ngModel)]=\"choiceFoodSearch.id_lotproduct\"\r\n                          style=\"--background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                          (ngModelChange)=\"changeLotSearch($event)\"\r\n                          [data_list]=\"[{label: item.lot_number, value: item._id, isSelect: choiceFoodSearch.id_lotproduct === item._id}]\"\r\n                          _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-lo\"\r\n                        >\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                      <div class=\"comp-67f9d871d54a66e6a463ebb0\">\r\n                        <ewa-text [text_content]=\"'NSX: ' + (item.date_mfg | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ngay-san-xuat\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67f9d89cd81dc74e054f8138\">\r\n                        <ewa-text [text_content]=\"'HSD: ' + (item.date_exp | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"han-su-dung\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67f9d8a4f78541ec21fca9e1\">\r\n                        <ewa-text style=\"--text-align-content: right\" [text_content]=\"'Stock ' + (item.quantity_branch[id_branch] / choiceFoodSearch.ratio | number:'1.0-2') | translate\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ton-kho\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n          <div *ngIf=\"!choiceFoodSearch.manysize || choiceFoodSearch.subs.length\" class=\"comp-67eb95a49efecd8df6921afe\">\r\n            <ewa-button\r\n              style=\"--width: 358px; --height: 56px; --border-radius: 0; --border: 1px solid var(--ion-color-vh-green); --background-color: transparent; --color-content: var(--ion-color-vh-green)\"\r\n              (click)=\"showOptions = false\"\r\n              [btn_content]=\"'Cancel' | translate\"\r\n              _id=\"67e766e273c6f421a5caa29c\" _name=\"Button huy\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n          <div *ngIf=\"!choiceFoodSearch.manysize || choiceFoodSearch.subs.length\" class=\"comp-67eb957ed138d61bc1bd9326\">\r\n            <ewa-button\r\n              style=\"--width: 358px; --height: 56px; --border-radius: 0; --background-color: var(--ion-color-vh-green);\"\r\n              [disabled]=\"isAddingFood\"\r\n              [style.--opacity]=\"isAddingFood ? '0.5' : '1'\"\r\n              (click)=\"chooseFood()\"\r\n              [btn_content]=\"'Add' | translate\"\r\n              _id=\"67e766e3f5f968cab2e3e608\" _name=\"Button them\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-edit-food',\r\n  templateUrl: './edit-food.component.html',\r\n  styleUrls: ['./edit-food.component.scss']\r\n})\r\nexport class EditFoodComponent extends CafeFnbUI {\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService,vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n    //Add 'implements OnInit' to the class.\r\n    console.log(this.choiceFood)\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit(); saveEdit()\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb64dc6937d216018aa84b\">\r\n      <ewa-block-hover style=\"--width: 715px; --min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"tuy-chon-mon-an\">\r\n        <div *ngIf=\"choiceFood\" class=\"grid-67eb64dc6937d216018aa84b\">\r\n          <div class=\"comp-67eb6510ab2ec99566e7608a\">\r\n            <ewa-frame-blank style=\"--width: 715px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\">\r\n              <div class=\"grid-67eb6510ab2ec99566e7608a\">\r\n                <div class=\"comp-67eb6510fecc6e52ecf154a4\">\r\n                  <ewa-text style=\"--width: 547px\" [text_content]=\"choiceFood?.name\" _id=\"67e76670c6c3f00f9b5a5f56\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-67eb65104534ceaa5ddd4c89\">\r\n                  <ewa-icon (click)=\"showDrawerEdit = false; saveEdit()\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n\r\n          <!-- KHÔNG pahỉ Dịch vụ thời gian -->\r\n          <div class=\"main-content\"\r\n            *ngIf=\"choiceFood?.ptype !== VhType.SERVICETIME\">\r\n            <div class=\"comp-67eb6a885cc320c2614cd9a3\">\r\n              <!-- Giá -->\r\n              <ewa-input-group\r\n                [ngClass]=\"'price-' + choiceFood.id_product\"\r\n                [placeholder]=\"'Price' | translate\"\r\n                [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n                [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\"\r\n                (blur)=\"updatePrice(choiceFood)\"\r\n                _id=\"67eb6a885cc320c2614cd9a3\" _name=\"gia-tien-unit\"\r\n              >\r\n              </ewa-input-group>\r\n              <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n            </div>\r\n\r\n            <!-- Số lượng -->\r\n            <div class=\"comp-67eb6b0abb788597635ee8a8\">\r\n              <ewa-input-number\r\n                [min]=\"1\"\r\n                [max]=\"9999999998\"\r\n                [(ngModel)]=\"choiceFood.quantity\"\r\n                (blur)=\"updatePrice(choiceFood)\"\r\n                _id=\"67eb6b0abb788597635ee8a8\" _name=\"input-quantity-unit\"\r\n              >\r\n              </ewa-input-number>\r\n            </div>\r\n\r\n            <!-- Thành tiền -->\r\n            <div class=\"comp-67eb6f65cc490742253ccf9c\">\r\n              <ewa-text\r\n                [text_content]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)\"\r\n                _id=\"67eb6f65cc490742253ccf9c\" _name=\"price-unit\"\r\n              >\r\n              </ewa-text>\r\n            </div>\r\n\r\n            <!-- Ghi chú label -->\r\n            <div class=\"comp-67eb6e342ba16e3ab3ed03e5\">\r\n              <ewa-text [text_content]=\"'Note' | translate\" _id=\"67eb6e342ba16e3ab3ed03e5\" _name=\"ghi-chu-label\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Ghi chú -->\r\n            <div class=\"comp-67eb6e84d5881459080db451\">\r\n              <ewa-input-group\r\n                [placeholder]=\"'Enter note' | translate\"\r\n                [rightContent]=\"'Delete' | translate\"\r\n                [(ngModel)]=\"choiceFood.note\"\r\n                (rightContentClick)=\"choiceFood.note = ''\"\r\n                _id=\"67eb6e84d5881459080db451\" _name=\"input-ghi-chu\"\r\n              >\r\n              </ewa-input-group>\r\n            </div>\r\n\r\n             <!-- Thuộc tính -->\r\n             <ng-container *ngIf=\"choiceFood.properties && choiceFood.properties.length\">\r\n              <div class=\"comp-67eb6fee50eaede1dc97ef47\">\r\n                <ewa-text [text_content]=\"'Properties' | translate\" _id=\"67eb6fee50eaede1dc97ef47\" _name=\"thuoc-tinh-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb917efb1808b709f291aa\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <div *ngFor=\"let properties of choiceFood.properties; let i = index\">\r\n                  <ewa-frame-blank style=\"--width: 639px; --min-height: 55px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-thuoc-tinh\">\r\n                    <div class=\"grid-67eb917efb1808b709f291aa\">\r\n                      <div class=\"comp-67eb917eaf2e697540920c90\">\r\n                        <ewa-text [text_content]=\"properties.name\" _id=\"67eb917eaf2e697540920c90\" _name=\"ten-thuoc-tinh\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67eb917e708f00f0b3139dbb\">\r\n                        <ewa-radio-button\r\n                          style=\"--width: 639px; --background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                          [(ngModel)]=\"properties.selectedValue\"\r\n                          _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-thuoc-tinh\"\r\n                        >\r\n                          <ewa-option *ngFor=\"let value of properties.value\" [label]=\"value\" [value]=\"value\"></ewa-option>\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Topping -->\r\n             <ng-container *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\">\r\n              <div class=\"comp-67eb8fc8a53461b67460bdf5\">\r\n                <ewa-text [text_content]=\"'Side dishes' | translate\" _id=\"67eb8fc8a53461b67460bdf5\" _name=\"mon-phu-label\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-67eb91c98c34692f69baaa45\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <div *ngFor=\"let item of choiceFood.toppings\">\r\n                  <ewa-frame-blank style=\"--width: 639px; --min-height: 55px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-topping\">\r\n                    <div class=\"grid-67eb91c98c34692f69baaa45\">\r\n                      <div class=\"comp-67eb91c9bd4200115b5d019a\">\r\n                        <ewa-text [text_content]=\"item.name |translate\" _id=\"67eb917eaf2e697540920c90\" _name=\"ten-mon-phu\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67eb920a67d372d0115610fc\">\r\n                        <ewa-input-group\r\n                          [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\" (blur)=\"updatePrice(item)\"\r\n                          [placeholder]=\"'Price' | translate\"\r\n                          [ngClass]=\"'topping-' + item.id_product\" _id=\"67eb920a67d372d0115610fc\" _name=\"input-price-topping\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                      <div class=\"comp-67eb922576d2e746664d96be\">\r\n                        <ewa-input-number\r\n                          [min]=\"0\"\r\n                          [max]=\"9999999998\"\r\n                          [(ngModel)]=\"item.quantity\"\r\n                          _id=\"67eb6b0abb788597635ee8a8\" _name=\"input-quantity-topping\"\r\n                        >\r\n                        </ewa-input-number>\r\n                      </div>\r\n                      <div class=\"comp-67eb922e71653eeb3369e4f5\">\r\n                        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(item.price * item.quantity)\" _id=\"67eb922e71653eeb3369e4f5\" _name=\"tong-tien-topping\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Danh sách lô trong combo -->\r\n            <ng-container *ngFor=\"let combo of choiceFood.combos\">\r\n              <ng-container *ngIf=\"combo.lots\">\r\n                <div class=\"comp-67f9d5a46183f4eac7976998\">\r\n                  <ewa-text [text_content]=\"'Select lot and expiry date for combo components' | translate\" _id=\"67f9d5a46183f4eac7976998\" _name=\"chon-lo-label\">\r\n                  </ewa-text>\r\n                  <span>{{combo.name}} ({{productService.getUnit(combo.units, combo.ratio)}})</span>\r\n                </div>\r\n                 <!-- Tên và Đơn vị -->\r\n                <div class=\"comp-67f9d78680eba9a6921288a3\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                  <!-- Danh sách lô để chọn -->\r\n                  <div *ngFor=\"let lot of combo.lots\">\r\n                    <ewa-frame-blank style=\"--width: 657px; --min-height: 35px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-lo\">\r\n                      <div class=\"grid-67f9d78680eba9a6921288a3\">\r\n                        <div class=\"comp-67f9d7c3b3f0205187b51cb5\">\r\n                          <ewa-radio-button\r\n                            [(ngModel)]=\"combo.id_lotproduct\"\r\n                            style=\"--background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                            (ngModelChange)=\"changeLot($event, combo)\"\r\n                            [data_list]=\"[{label: lot.lot_number, value: lot._id, isSelect: combo.id_lotproduct === lot._id}]\"\r\n                            _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-lo\"\r\n                          >\r\n                          </ewa-radio-button>\r\n                        </div>\r\n                        <div class=\"comp-67f9d871d54a66e6a463ebb0\">\r\n                          <ewa-text [text_content]=\"'NSX: ' + (lot.date_mfg | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ngay-san-xuat\">\r\n                          </ewa-text>\r\n                        </div>\r\n                        <div class=\"comp-67f9d89cd81dc74e054f8138\">\r\n                          <ewa-text [text_content]=\"'HSD: ' + (lot.date_exp | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"han-su-dung\">\r\n                          </ewa-text>\r\n                        </div>\r\n                        <div class=\"comp-67f9d8a4f78541ec21fca9e1\">\r\n                          <ewa-text style=\"--text-align-content: right\" [text_content]=\"'Stock ' + (lot.quantity_branch[id_branch] / combo.ratio | number:'1.0-2') | translate\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ton-kho\">\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n\r\n          </div>\r\n\r\n          <!-- -------------------------------------------------------- DỊCH VỤ THỜI GIAN -------------------------------------------------------- -->\r\n          <div *ngIf=\"choiceFood?.ptype === VhType.SERVICETIME\" class=\"main-content\" style=\"padding-bottom: 0;\">\r\n            <div class=\"comp-681b454d489d1c540c429015\" style=\"margin-left: 2.7972%; margin-top: 16px; grid-area: 3 / 1 / auto / span 4; display: block;\"\r\n              *ngIf=\"choiceFood?.serviceTimePrice as serviceTimePrice\">\r\n              <ewa-frame-blank style=\"--width: 97.1223%; --min-height: 149px; --background-color: #f3f7f6\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"dich-vu-thoi-gian\">\r\n                <div class=\"grid-681b454d489d1c540c429015\">\r\n                  <!-- Header -->\r\n                  <div class=\"comp-681b46123d73a5d3433c4a78\">\r\n                    <ewa-frame-blank style=\"--width: 97.0948%; --min-height: 19px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tieu-de\">\r\n                      <div class=\"grid-681b46123d73a5d3433c4a78\">\r\n                        <!-- Thời gian sử dụng -->\r\n                        <div class=\"comp-681b4658759d15fe0cccae6c\">\r\n                          <ewa-text _id=\"681b4658759d15fe0cccae6c\" _name=\"header-text\"\r\n                            [text_content]=\"'Used time' | translate\">\r\n                          </ewa-text>\r\n                        </div>\r\n                        <!-- Tạm tính -->\r\n                        <div class=\"comp-681b46955f7a31a21e424496\">\r\n                          <ewa-text _id=\"681b46955f7a31a21e424496\" _name=\"header-text-right\"\r\n                            [text_content]=\"'Drafted' | translate\">\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Body -->\r\n                  <div class=\"comp-681b48dded9ce211f582e908\">\r\n                    <!-- Danh sách -->\r\n                    <ewa-frame-blank style=\"--width: 97.0948%; --min-height: 37px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"list\">\r\n                      <div class=\"grid-681b48dded9ce211f582e908\">\r\n\r\n                        <!-- First time -->\r\n                        <div class=\"comp-681c04a2ba579ed596a4e0e8\"\r\n                          *ngIf=\"choiceFood.units[0].is_first_time\">\r\n                          <ewa-frame-blank style=\"--width: 100%; --min-height: 37px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"first-time\">\r\n                            <div class=\"grid-681c04a2ba579ed596a4e0e8\">\r\n                              <!-- Từ - Đến -->\r\n                              <div class=\"comp-681c04a31e95d897648b26b1\">\r\n                                <ewa-text _id=\"681c04a31e95d897648b26b1\" _name=\"normal-text\"\r\n                                  text_content=\"{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Khung thời gian đầu tiên x unit đầu -->\r\n                              <div class=\"comp-681c04a37d86dc9b94800654\">\r\n                                <ewa-text _id=\"681c04a37d86dc9b94800654\" _name=\"italic-text\"\r\n                                  text_content=\"{{'First time block' | translate}} - {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'first' | translate}}\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thành tiền -->\r\n                              <div class=\"comp-681c04a38b819040950a2708\">\r\n                                <ewa-text _id=\"681c04a38b819040950a2708\" _name=\"normal-text-right\"\r\n                                  [text_content]=\"vhAlgorithm.vhcurrencyunit(serviceTimePrice?.first_time?.price)\">\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n\r\n                        <!-- Special time -->\r\n                        <div class=\"comp-681c04a2ba579ed596a4e0e8\"\r\n                          *ngIf=\"choiceFood.units[0].is_special_times && serviceTimePrice?.special_times?.length\">\r\n                          <ewa-frame-blank style=\"--width: 100%; --min-height: 37px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"first-time\"\r\n                            *ngFor=\"let specialTime of serviceTimePrice?.special_times\"\r\n                            [style.--min-height]=\"'22px'\">\r\n                            <div class=\"grid-681c04a2ba579ed596a4e0e8\">\r\n                              <!-- Từ - Đến -->\r\n                              <div class=\"comp-681c04a31e95d897648b26b1\">\r\n                                <ewa-text _id=\"681c04a31e95d897648b26b1\" _name=\"normal-text\"\r\n                                  [style.--width]=\"'120%'\"\r\n                                  text_content=\"{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, choiceFood.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}})\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thành tiền -->\r\n                              <div class=\"comp-681c04a38b819040950a2708\">\r\n                                <ewa-text _id=\"681c04a38b819040950a2708\" _name=\"normal-text-right\"\r\n                                  [text_content]=\"vhAlgorithm.vhcurrencyunit(specialTime.total_price)\">\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                          <!-- Thời gian đặc biệt -->\r\n                          <div class=\"comp-681c04a37d86dc9b94800654\" style=\"margin-top: 0px;\">\r\n                            <ewa-text _id=\"681c04a37d86dc9b94800654\" _name=\"italic-text\"\r\n                              [text_content]=\"'Special time' | translate\">\r\n                            </ewa-text>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <!-- Merge block -->\r\n                        <div class=\"comp-681c04a2ba579ed596a4e0e8\"\r\n                          *ngIf=\"choiceFood.units[0].is_merge_block\">\r\n                          <ewa-frame-blank style=\"--width: 100%; --min-height: 37px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"first-time\">\r\n                            <div class=\"grid-681c04a2ba579ed596a4e0e8\">\r\n                              <!-- x block =  -->\r\n                              <div class=\"comp-681c04a31e95d897648b26b1\">\r\n                                <ewa-text _id=\"681c04a31e95d897648b26b1\" _name=\"normal-text\"\r\n                                  text_content=\"{{serviceTimePrice?.merge_block?.count}} block = {{serviceTimePrice?.merge_block?.duration}} {{choiceFood.units[0].unit | translate}} (1 block = {{serviceTimePrice?.merge_block?.time_per_block}} {{choiceFood.units[0].unit | translate}})\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Gộp block -->\r\n                              <div class=\"comp-681c04a37d86dc9b94800654\">\r\n                                <ewa-text _id=\"681c04a37d86dc9b94800654\" _name=\"italic-text\"\r\n                                  text_content=\"{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(serviceTimePrice?.merge_block?.price)}} / 1 block\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thành tiền -->\r\n                              <div class=\"comp-681c04a38b819040950a2708\">\r\n                                <ewa-text _id=\"681c04a38b819040950a2708\" _name=\"normal-text-right\"\r\n                                  [text_content]=\"vhAlgorithm.vhcurrencyunit(serviceTimePrice?.merge_block?.total_price)\">\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n\r\n                        <!-- Normal time -->\r\n                        <div *ngIf=\"serviceTimePrice?.time_used\" class=\"comp-681c04a2ba579ed596a4e0e8\">\r\n                          <ewa-frame-blank style=\"--width: 100%; --min-height: 37px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"first-time\">\r\n                            <div class=\"grid-681c04a2ba579ed596a4e0e8\">\r\n                              <!-- x unit Khác -->\r\n                              <div class=\"comp-681c04a31e95d897648b26b1\">\r\n                                <ewa-text _id=\"681c04a31e95d897648b26b1\" _name=\"normal-text\"\r\n                                  text_content=\"{{productService.generateTimeFromValue(serviceTimePrice?.time_used, serviceTimePrice?.unit)}} {{'Others' | translate}}\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thời gian nhỏ hơn ... -->\r\n                              <div class=\"comp-681c04a37d86dc9b94800654\">\r\n                                <ewa-text _id=\"681c04a37d86dc9b94800654\" _name=\"italic-text\"\r\n                                  text_content=\"*{{'Time less than' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thành tiền -->\r\n                              <div class=\"comp-681c04a38b819040950a2708\">\r\n                                <ewa-text _id=\"681c04a38b819040950a2708\" _name=\"normal-text-right\"\r\n                                  [text_content]=\"vhAlgorithm.vhcurrencyunit(serviceTimePrice?.price)\">\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n\r\n                        <!-- Tổng -->\r\n                        <div class=\"comp-681b46123d73a5d3433c4a78\" style=\"margin-top: 0px; margin-left: 0px;\">\r\n                          <ewa-frame-blank style=\"--width: 100%; --min-height: 19px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"tieu-de\"\r\n                            [style.--width]=\"'100%'\">\r\n                            <div class=\"grid-681b46123d73a5d3433c4a78\">\r\n                              <!-- Từ - đến -->\r\n                              <div class=\"comp-681b4658759d15fe0cccae6c\">\r\n                                <ewa-text _id=\"681b4658759d15fe0cccae6c\" _name=\"header-text\"\r\n                                  text_content=\"{{'From' | translate}} {{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} {{'to' | translate}} {{choiceFood?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\">\r\n                                </ewa-text>\r\n                                <ewa-text _id=\"681b4658759d15fe0cccae6c\" _name=\"header-text\"\r\n                                  text_content=\"({{productService.generateTimeUseString(choiceFood.time_start_order, choiceFood?.time_end_order)}})\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <!-- Thành tiền -->\r\n                              <div class=\"comp-681b46955f7a31a21e424496\">\r\n                                <ewa-text _id=\"681b46955f7a31a21e424496\" _name=\"header-text-right\"\r\n                                  text_content=\"{{'Total_amount' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(serviceTimePrice?.total_price)}}\">\r\n                                </ewa-text>\r\n                              </div>\r\n                            </div>\r\n                          </ewa-frame-blank>\r\n                        </div>\r\n\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <!-- Footer -->\r\n                  <div class=\"comp-681b48567e3ffdf97363a8b8\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 40px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"footer\">\r\n                      <div class=\"grid-681b48567e3ffdf97363a8b8\">\r\n                        <div class=\"comp-681b488760e873ca0edc04d9\">\r\n                          <ewa-text style=\"--color-content: var(--ion-color-vh-green-dark);\" _id=\"681b488760e873ca0edc04d9\" _name=\"chinh-sua-thoi-gian-su-dung\"\r\n                            [text_content]=\"'Edit used time' | translate\"\r\n                            (click)=\"handleOpenEditUsedTime()\">\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n\r\n            <!-- Ghi chú -->\r\n            <div style=\"grid-area: 4 / 1 / auto / span 4;\">\r\n              <!-- Ghi chú label -->\r\n              <div class=\"comp-67eb6e342ba16e3ab3ed03e5\">\r\n                <ewa-text _id=\"67eb6e342ba16e3ab3ed03e5\" _name=\"ghi-chu-label\"\r\n                  [text_content]=\"'Note' | translate\">\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Ghi chú -->\r\n              <div class=\"comp-67eb6e84d5881459080db451\">\r\n                <ewa-input-group _id=\"67eb6e84d5881459080db451\" _name=\"input-ghi-chu\"\r\n                  [placeholder]=\"'Enter note' | translate\"\r\n                  [rightContent]=\"'Delete' | translate\"\r\n                  [(ngModel)]=\"choiceFood.note\"\r\n                  (rightContentClick)=\"choiceFood.note = ''\"\r\n                  [style.--width]=\"'97.1223%'\">\r\n                </ewa-input-group>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Tạm ngừng tính giờ / Tiếp tục tính giờ -->\r\n            <div class=\"comp-681c0e2ab18ff29de91588fb\" style=\"z-index: 10; margin-top: 16.3993px; margin-left: 0%; display: block; grid-area: 13 / 1 / auto / span 4;\"\r\n              *ngIf=\"choiceFood?.ptype === VhType.SERVICETIME\">\r\n              <ewa-button _id=\"681c0e2ab18ff29de91588fb\" _name=\"btn-tam-ngung-tinh-gio\"\r\n                [btn_content]=\"(choiceFood?.is_paused ? 'Continue timing' : 'Pause timing') | translate\"\r\n                (click)=\"pauseTime(!choiceFood?.is_paused)\"\r\n                style=\"--background-color: var(--ion-color-vh-green)\"\r\n                [style.--height]=\"'44px'\">\r\n              </ewa-button>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-info-customer',\r\n  templateUrl: './info-customer.component.html',\r\n  styleUrls: ['./info-customer.component.scss']\r\n})\r\nexport class InfoCustomerComponent extends CafeFnbUI {\r\n  @Input(\"customerProfile\") customerProfile;\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void { }\r\n\r\n  isValidDateString(dateStr: string): boolean {\r\n    const parsedDate = new Date(dateStr);\r\n    return !isNaN(parsedDate.getTime());\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb4fbcf2f1d61cc86a9afd\">\r\n      <ewa-block-hover style=\"--width: 417px; --min-height: 100%; --background-color: #ffffff; --border-radius: 5px\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"thong-tin-don-hang\">\r\n        <div style=\"margin-top: 8px\">\r\n          <h3 style=\"text-align: center; font-size: 16px\">{{'Customer information' | translate}}</h3>\r\n        </div>\r\n        <div style=\"padding-bottom: 25px;\" class=\"grid-67eb4fbcf2f1d61cc86a9afd\">\r\n           <!-- Tên khách hàng -->\r\n          <div class=\"comp-67eb51e1dc2276dad232219c\">\r\n            <ewa-text [text_content]=\"'Customer name' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.name\" class=\"comp-67eb51eb3d32face589b24a1\">\r\n            <ewa-text [text_content]=\"customerProfile.name\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n           <!-- Số điện thoại -->\r\n          <div class=\"comp-67eb54714aa0206bb0dd8227\">\r\n            <ewa-text [text_content]=\"'Phone number' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.phone\" class=\"comp-67eb54768050f68f50ca9316\">\r\n            <ewa-text [text_content]=\"customerProfile.phone\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Email -->\r\n          <div class=\"comp-67eb548e2af38edfa411c541\">\r\n            <ewa-text [text_content]=\"'Email' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.email\" class=\"comp-67eb547d99eb0fd0750c4071\">\r\n            <ewa-text [text_content]=\"customerProfile.email\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n\r\n          <!-- Mã số thuế -->\r\n          <ng-container *ngIf=\"customerProfile.isBusiness\">\r\n            <div class=\"comp-67eb5493d7849f9d768615d9\">\r\n              <ewa-text [text_content]=\"'Tax code' | translate\" _id=\"67eb51e1dc2276dad232219c\" _name=\"ma-so-thue\">\r\n              </ewa-text>\r\n            </div>\r\n            <div class=\"comp-67eb5484b01d770ed158d65f\">\r\n              <ewa-text [text_content]=\"customerProfile.taxcode\" _id=\"67eb51eb3d32face589b24a1\">\r\n              </ewa-text>\r\n            </div>\r\n          </ng-container>\r\n    \r\n          <ng-container *ngIf=\"!customerProfile.isBusiness\">\r\n            <!-- Giới tính -->\r\n            <div class=\"comp-67eb5493d7849f9d768615d9\">\r\n              <ewa-text [text_content]=\"'Gender' | translate\" _id=\"67eb51e1dc2276dad232219c\" _name=\"Phi dich vu title\">\r\n              </ewa-text>\r\n            </div>\r\n            <div *ngIf=\"customerProfile.gender\" class=\"comp-67eb5484b01d770ed158d65f\">\r\n              <ewa-text [text_content]=\"customerProfile.gender | translate\" _id=\"67eb51eb3d32face589b24a1\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Ngày sinh -->\r\n            <div class=\"comp-67eb54973eea3cdf2e9746f6\">\r\n              <ewa-text [text_content]=\"'Date of birth' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n              </ewa-text>\r\n            </div>\r\n            <div *ngIf=\"customerProfile.datebirth && isValidDateString(customerProfile.datebirth)\" class=\"comp-67eb54881e5ad3a0bd7e10b0\">\r\n              <ewa-text [text_content]=\"customerProfile.datebirth | date : 'dd/MM/yyyy'\" _id=\"67eb51eb3d32face589b24a1\">\r\n              </ewa-text>\r\n            </div>\r\n          </ng-container>\r\n\r\n           <!-- Địa chỉ -->\r\n          <div class=\"comp-68022164414ddc74275ef521\">\r\n            <ewa-text [text_content]=\"'Address' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.address\" class=\"comp-68022169a297aae18307a00a\">\r\n            <ewa-text [text_content]=\"customerProfile.address\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Quốc gia -->\r\n          <div class=\"comp-680222b2b780ad6d694da64e\">\r\n            <ewa-text [text_content]=\"'Country' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.country\" class=\"comp-680222ea67dbc6cfe59fe4c5\">\r\n            <ewa-text [text_content]=\"customerProfile.country\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Tỉnh -->\r\n          <div style=\"margin-left: 19px;margin-top: 22px;display: block;grid-area: 8 / 1;\">\r\n            <ewa-text [text_content]=\"'Province' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.province\" style=\"margin-left: 0.5px;margin-top: 22px;display: block;grid-area: 8 / 2;\">\r\n            <ewa-text [text_content]=\"customerProfile.province\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Quận -->\r\n          <div style=\"margin-left: 19px;margin-top: 22px;display: block;grid-area: 9 / 1;\">\r\n            <ewa-text [text_content]=\"'District' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.district\" style=\"margin-left: 0.5px;margin-top: 22px;display: block;grid-area: 9 / 2;\">\r\n            <ewa-text [text_content]=\"customerProfile.district\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Ghi chú -->\r\n          <div style=\"margin-left: 19px;margin-top: 22px;display: block;grid-area: 10 / 1;\">\r\n            <ewa-text [text_content]=\"'Note' | translate\" _id=\"67eb51e1dc2276dad232219c\">\r\n            </ewa-text>\r\n          </div>\r\n          <div *ngIf=\"customerProfile.note\" style=\"margin-left: 0.5px;margin-top: 22px;display: block;grid-area: 10 / 2;\">\r\n            <ewa-text [text_content]=\"customerProfile.note\" _id=\"67eb51eb3d32face589b24a1\">\r\n            </ewa-text>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-modal-add-booking',\r\n  templateUrl: './modal-add-booking.component.html',\r\n  styleUrls: [\r\n    './modal-add-booking.component.scss',\r\n    './modal-add-booking-custom.component.scss',\r\n  ]\r\n})\r\nexport class ModalAddBookingComponent extends CafeFnbUI {\r\n  \r\n  @Output() onCancel = new EventEmitter<any>();\r\n\r\n  /** Biến tạm lưu bookingBillObject để so sánh khi cancel */\r\n  bookingBillObjectTemp: any;\r\n\r\n\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.bookingBillObjectTemp = JSON.parse(JSON.stringify(this.bookingBillObject));\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Huỷ đơn -> Đóng modal\r\n   */\r\n  cancel() {\r\n    if(this.modalAddBookingType === 'edit') {\r\n      if (this.bookingBillObject.id_customer === 'id_retail') {\r\n        this.bookingBillObject.retail_name = this.bookingSelectedCustomerProfile.name;\r\n        this.bookingBillObject.retail_phone = this.bookingSelectedCustomerProfile.phone;\r\n        this.bookingBillObject.retail_address = this.bookingSelectedCustomerProfile.address;\r\n      }\r\n      // Kiểm tra xem có thay đổi gì hay không\r\n      // nếu không đổi thì cứ cancel\r\n      if (JSON.stringify(this.bookingBillObject) === JSON.stringify(this.bookingBillObjectTemp)) {\r\n        this.onCancel.emit();\r\n        return;\r\n      }\r\n\r\n      this.vhComponent.alertConfirm(\r\n        this.languageService.translate('Confirm'), \r\n        '', \r\n        `${this.languageService.translate('Do you want to exit without saving your changes?')}`,\r\n        this.languageService.translate('Exit without saving'), \r\n        this.languageService.translate('Cancel'),\r\n        true\r\n      ).then(() => {\r\n        this.onCancel.emit();\r\n      }, (cancel) => {\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.alertConfirm(\r\n        this.languageService.translate('Confirm'), \r\n        '', \r\n        this.languageService.translate('Are you sure to cancel the sales invoice') + '?',\r\n        'OK', \r\n        this.languageService.translate('Cancel'),\r\n        true\r\n      ).then(() => {\r\n        this.onCancel.emit();\r\n      }, () => { });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi Tìm khách hàng\r\n   */\r\n  onKeyDownBooking(event: KeyboardEvent) {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    const inputValue = inputElement.value;\r\n    this.onKeyDown(event, inputValue, this.bookingCustomerType, true);\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"cancel()\"></div>\r\n  <div class=\"custom-dialog__content\">\r\n\r\n    <div class=\"comp-67e61809a669907b3bfa1ae7\" style=\"margin-top: 0px; margin-left: 0px;\">\r\n      <ewa-block-hover style=\"--width: 710px; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"them-dat-ban\">\r\n        <div class=\"grid-67e61809a669907b3bfa1ae7\">\r\n          <div class=\"comp-67e677fe0150860de2ed9c6f\">\r\n            <ewa-frame-blank style=\"--width: 100%; --min-height: 470px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"wrapper\">\r\n              <div class=\"grid-67e677fe0150860de2ed9c6f\">\r\n\r\n                <!-- Header -->\r\n                <div class=\"comp-67e6782c997c504bc89a5057\">\r\n                  <ewa-frame-blank style=\"--width: 100%; --min-height: 48px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"header\">\r\n                    <div class=\"grid-67e6782c997c504bc89a5057\">\r\n                      <!-- Tiêu đề -->\r\n                      <div class=\"comp-67e6784c550cd97d9996ac7a\">\r\n                        <ewa-text style=\"--width: 98.8604%\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"title\"\r\n                          [text_content]=\"(modalAddBookingType === 'add' ? 'Add booking' : 'Edit booking') | translate\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <!-- Nút tắt -->\r\n                      <div class=\"comp-67e678d7b71f6ef027a65f04\"\r\n                        (click)=\"cancel()\">\r\n                        <ewa-icon _id=\"67e7667044587fc691f851be\" _name=\"close-icon\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n\r\n                <!-- Form -->\r\n                <div class=\"comp-67e67931dd82fe1f0b1c9906\">\r\n                  <ewa-frame-blank style=\"--width: 96.5015%; --min-height: 334px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"form\">\r\n                    <div class=\"grid-67e67931dd82fe1f0b1c9906\">\r\n\r\n                      <!-- Thời gian nhận bàn -->\r\n                      <div class=\"comp-67e67a597c75cf2c12a6f8a6\">\r\n                        <ewa-frame-blank style=\"--width: 120.846%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-thoi-gian-nhan-ban\">\r\n                          <div class=\"grid-67e67a597c75cf2c12a6f8a6\">\r\n                            <div class=\"comp-67e67a59b2bc11405ee0165d\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-thoi-gian-nhan-ban\"\r\n                                [text_content]=\"'Time to receive table' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e67a59ab2dc8daa4885537\">\r\n                              <nz-date-picker\r\n                                [(ngModel)]=\"bookingBillObject.date\"\r\n                                [nzDisabledDate]=\"bookingDisabledDateBeforeNow\"\r\n                                [nzDisabledTime]=\"bookingDisabledTimeBeforeNow\"\r\n                                [nzShowTime]=\"{ nzFormat: 'HH:mm' }\"\r\n                                nzFormat='dd/MM/YYYY HH:mm'\r\n                                [nzDisabled]=\"modalAddBookingType === 'edit'\"\r\n                                style=\"width: 100%; height: 36px;\">\r\n                              </nz-date-picker>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Thông tin khách hàng -->\r\n                      <div class=\"comp-67e74cd1838d4f7db2b32611\">\r\n                        <ewa-frame-blank style=\"--width: 170.576%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-thong-tin-khach-hang\">\r\n                          <div class=\"grid-67e74cd1838d4f7db2b32611\">\r\n                            <div class=\"comp-67e74cd1b4e30afba834760f\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-thong-tin-khach-hang\"\r\n                                [text_content]=\"'Customer Information' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e74cd19343296c93477c77\">\r\n                              <ewa-frame-blank style=\"--width: 100%; --min-height: 36px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"wrapper\">\r\n                                <div class=\"grid-67e74cd19343296c93477c77\">\r\n                                  <div class=\"comp-67e74d0396487d0843a1e013\">\r\n                                    <ewa-radio-button _id=\"67e74d0396487d0843a1e013\" _name=\"rdo-loai-khach\"\r\n                                      [(ngModel)]=\"bookingCustomerType\"\r\n                                      style=\"--background-color-item-checked: var(--ion-color-vh-green);--border-color-item-checked: var(--ion-color-vh-green);\"\r\n                                      (ngModelChange)=\"bookingChangeCustomerType($event)\"\r\n                                      [ewaStyle]=\"{\r\n                                        'radio-button--checked': {'padding-left': '2px', 'padding-right': '2px'},\r\n                                        'radio-button--unchecked': {'padding-left': '2px', 'padding-right': '2px'}\r\n                                      }\">\r\n                                      <ewa-option [label]=\"'Retail customer' | translate\" [value]=\"1\"></ewa-option>\r\n                                      <ewa-option [label]=\"'Member' | translate\" [value]=\"2\"></ewa-option>\r\n                                      <ewa-option [label]=\"'Search customer' | translate\" [value]=\"3\"></ewa-option>\r\n                                    </ewa-radio-button>\r\n                                  </div>\r\n                                </div>\r\n                              </ewa-frame-blank>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Chọn bàn -->\r\n                      <div class=\"comp-67e67af88674935a38e9e92d\">\r\n                        <ewa-frame-blank style=\"--width: 120.846%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-chon-ban\">\r\n                          <div class=\"grid-67e67af88674935a38e9e92d\">\r\n                            <div class=\"comp-67e67af90a4ca3f929818596\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-chon-ban\"\r\n                                [text_content]=\"('Select table' | translate) + ' (*)'\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e67b580c4901406afad5e5\"\r\n                              (click)=\"isShowModalBookingChooseTable = true\"\r\n                              style=\"cursor: pointer;\">\r\n                              <ewa-input-group _id=\"67e67b580c4901406afad5e5\" _name=\"input-chon-ban\"\r\n                                [disabled]=\"true\"\r\n                                [(ngModel)]=\"bookingSelectedTableInfo\"\r\n                                style=\"pointer-events: none;\"\r\n                                [placeholder]=\"'No table selected' | translate\">\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Đặt trước món -->\r\n                      <div class=\"comp-67e7492e188c41e51a698989\">\r\n                        <ewa-frame-blank style=\"--width: 80.5639%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-dat-truoc-mon\">\r\n                          <div class=\"grid-67e7492e188c41e51a698989\">\r\n                            <div class=\"comp-67e7492e911901d293f61eca\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-dat-truoc-mon\"\r\n                                [text_content]=\"'Pre-order dishes' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e7492e3f4564d1a95b3ac5\"\r\n                              (click)=\"bookingOnOpenChooseFood()\"\r\n                              style=\"cursor: pointer;\">\r\n                              <ewa-input-group _id=\"67e7492e3f4564d1a95b3ac5\" _name=\"input-dat-truoc-mon\"\r\n                                [disabled]=\"true\"\r\n                                [value]=\"bookingBillObject.invoiceDetail?.length ? bookingBillObject.invoiceDetail?.length + ' ' + ('item' | translate) : ''\"\r\n                                [placeholder]=\"'Pre-order dishes' | translate\"\r\n                                style=\"pointer-events: none;\">\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Tổng tiền -->\r\n                      <div class=\"comp-67e74bdefeb5ae7f0f33c75d\">\r\n                        <ewa-frame-blank style=\"--width: 60.423%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-tong-tien\">\r\n                          <div class=\"grid-67e74bdefeb5ae7f0f33c75d\">\r\n                            <div class=\"comp-67e74bde516e2e56c1286117\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-tong-tien\"\r\n                                [text_content]=\"'total amount' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e74bde2fe5b235bc8d0d5b\"\r\n                              style=\"cursor: not-allowed;\">\r\n                              <ewa-input-group _id=\"67e74bde2fe5b235bc8d0d5b\" _name=\"input-tong-tien\"\r\n                                [disabled]=\"true\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit_symbol(\r\n                                  bookingBillObject.invoiceDetail?.length\r\n                                  ? (bookingBillObject?.total * (1 + bookingBillObject?.tax / 100))\r\n                                  : 0\r\n                                )\"\r\n                                style=\"pointer-events: none; cursor: pointer;\">\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Ghi chú -->\r\n                      <div class=\"comp-67e74a1c36c11181ad6ec3d6\">\r\n                        <ewa-frame-blank style=\"--width: 48.3384%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-ghi-chu\">\r\n                          <div class=\"grid-67e74a1c36c11181ad6ec3d6\">\r\n                            <div class=\"comp-67e74a1c8e91083b3175696a\">\r\n                              <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-ghi-chu\"\r\n                                [text_content]=\"'Note' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67e74a1c8f151f2d8d5e7574\">\r\n                              <ewa-input-group _id=\"67e74a1c8f151f2d8d5e7574\" _name=\"input-ghi-chu\"\r\n                                [(ngModel)]=\"bookingBillObject.note\"\r\n                                [placeholder]=\"'Note' | translate\">\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Khách hàng wrapper -->\r\n                      <div class=\"comp-6807208892f2154731636975\">\r\n                        <ewa-frame-blank style=\"--width: 99.0684%; --min-height: 264px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"khach-hang-wrapper\">\r\n                          <div class=\"grid-6807208892f2154731636975 khach-hang-wrapper\">\r\n                            <!-- Chọn khách hàng -->\r\n                            <div class=\"comp-680720bd4274c014a9e9c9ee\"\r\n                              *ngIf=\"bookingCustomerType === 2 || bookingCustomerType === 3\"\r\n                              style=\"margin-bottom: 16px;\">\r\n                              <ewa-frame-blank style=\"--width: 100%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-chon-khach-hang\">\r\n                                <div class=\"grid-680720bd4274c014a9e9c9ee\">\r\n                                  <div class=\"comp-680720bd9b8b507a9822d41f\">\r\n                                    <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-chon-khach-hang\"\r\n                                      [text_content]=\"('Select customer' | translate) + ' (*)'\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-680720be0af4a5a0cae0cbe1 select-chon-khach-hang\">\r\n                                    <ewa-select _id=\"680720be0af4a5a0cae0cbe1\" _name=\"select-chon-khach-hang\"\r\n                                      [ngModel]=\"bookingBillObject.id_customer\"\r\n                                      (ngModelChange)=\"bookingChangeCustomer($event)\"\r\n                                      (keydown)=\"onKeyDownBooking($event)\"\r\n                                      [data_select]=\"bookingTriggerSelectSearchCustomerChange\"\r\n                                      [placeholder]=\"'Select customer' | translate\">\r\n                                      <ewa-option *ngFor=\"let item of customerList\"\r\n                                        [value]=\"item._id\"\r\n                                        [label]=\"item.name + ' - ' + item.phone\">\r\n                                      </ewa-option>\r\n                                    </ewa-select>\r\n                                  </div>\r\n                                </div>\r\n                              </ewa-frame-blank>\r\n                            </div>\r\n\r\n                            <!-- Tên khách hàng -->\r\n                            <div class=\"comp-680720d79092a03c84669a7a\"\r\n                              style=\"margin-top: 0;\">\r\n                              <ewa-frame-blank style=\"--width: 100%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-ten-khach-hang\">\r\n                                <div class=\"grid-680720d79092a03c84669a7a\">\r\n                                  <div class=\"comp-680720d80fb5c04a9914bbef\">\r\n                                    <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-ten-khach-hang\"\r\n                                      [text_content]=\"'Customer name' | translate\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-680720d8aae447e9e93e74ee\"\r\n                                    [style.cursor]=\"bookingCustomerType === 2 ? 'not-allowed' : ''\">\r\n                                    <ewa-input-group _id=\"680720d8aae447e9e93e74ee\" _name=\"input-ten-khach-hang\"\r\n                                      [disabled]=\"bookingCustomerType === 2\"\r\n                                      [(ngModel)]=\"bookingSelectedCustomerProfile.name\"\r\n                                      [style.pointer-events]=\"bookingCustomerType === 2 ? 'none' : ''\"\r\n                                      [placeholder]=\"'Customer name' | translate\">\r\n                                    </ewa-input-group>\r\n                                  </div>\r\n                                </div>\r\n                              </ewa-frame-blank>\r\n                            </div>\r\n\r\n                            <!-- Số điện thoại -->\r\n                            <div class=\"comp-68072100fb347725d0ea9473\">\r\n                              <ewa-frame-blank style=\"--width: 100%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-so-dien-thoai\">\r\n                                <div class=\"grid-68072100fb347725d0ea9473\">\r\n                                  <div class=\"comp-68072101908dc8bab12b20a6\">\r\n                                    <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-so-dien-thoai\"\r\n                                      [text_content]=\"'Phone number' | translate\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-68072101489f87002ba49768\"\r\n                                    [style.cursor]=\"bookingCustomerType === 2 ? 'not-allowed' : ''\">\r\n                                    <ewa-input-group _id=\"68072101489f87002ba49768\" _name=\"input-so-dien-thoai\"\r\n                                      [disabled]=\"bookingCustomerType === 2\"\r\n                                      [(ngModel)]=\"bookingSelectedCustomerProfile.phone\"\r\n                                      [style.pointer-events]=\"bookingCustomerType === 2 ? 'none' : ''\"\r\n                                      [placeholder]=\"'Phone number' | translate\">\r\n                                    </ewa-input-group>\r\n                                  </div>\r\n                                </div>\r\n                              </ewa-frame-blank>\r\n                            </div>\r\n\r\n                            <!-- Địa chỉ -->\r\n                            <div class=\"comp-680720f8c658056a1bd53aec\">\r\n                              <ewa-frame-blank style=\"--width: 100%; --min-height: 54px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-dia-chi\">\r\n                                <div class=\"grid-680720f8c658056a1bd53aec\">\r\n                                  <div class=\"comp-680720f93d2a0a7e35681844\">\r\n                                    <ewa-text _id=\"67e67a59b2bc11405ee0165d\" _name=\"lbl-dia-chi\"\r\n                                      [text_content]=\"'Address' | translate\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-680720f90b32a6a30d23002f\"\r\n                                    [style.cursor]=\"bookingCustomerType === 2 ? 'not-allowed' : ''\">\r\n                                    <ewa-input-group _id=\"680720f90b32a6a30d23002f\" _name=\"input-dia-chi\"\r\n                                      [disabled]=\"bookingCustomerType === 2\"\r\n                                      [(ngModel)]=\"bookingSelectedCustomerProfile.address\"\r\n                                      [style.cursor]=\"bookingCustomerType === 2 ? 'not-allowed' : ''\"\r\n                                      [style.pointer-events]=\"bookingCustomerType === 2 ? 'none' : ''\"\r\n                                      [placeholder]=\"'Address' | translate\">\r\n                                    </ewa-input-group>\r\n                                  </div>\r\n                                </div>\r\n                              </ewa-frame-blank>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n                <!-- Danh sách nút -->\r\n                <!-- ADD -->\r\n                <div class=\"comp-67e6794bc534722dbd3411c6\"\r\n                  *ngIf=\"modalAddBookingType === 'add'\">\r\n                  <ewa-frame-blank style=\"--width: 100%; --min-height: 42px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bottom\">\r\n                    <div class=\"grid-67e6794bc534722dbd3411c6\"\r\n                      style=\"grid-template-columns: repeat(3, 1fr);\">\r\n                      <!-- Nút Huỷ đơn -->\r\n                      <div class=\"comp-67e755591dbb0846d53ac311\">\r\n                        <ewa-button _id=\"67e755591dbb0846d53ac311\" _name=\"btn-huy-don\"\r\n                          (click)=\"cancel()\"\r\n                          [btn_content]=\"'Cancel table booking' | translate\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <!-- Nút Xác nhận và In -->\r\n                      <div class=\"comp-67e755c0d9c4437a17afb31c\">\r\n                        <ewa-button _id=\"67e755c0d9c4437a17afb31c\" _name=\"btn-xac-nhan-va-in\"\r\n                          (click)=\"bookingOnAdd(true)\"\r\n                          [disabled]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail')\"\r\n                          [style.--cursor]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail') ? 'not-allowed' : 'pointer'\"\r\n                          [style.--width]=\"'100%'\"\r\n                          style=\"--background-color: var(--ion-color-vh-green-lighter)\"\r\n                          [btn_content]=\"'Submit and print' | translate\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <!-- Nút Xác nhận -->\r\n                      <div class=\"comp-67e75621b233542a76406cc5\">\r\n                        <ewa-button _id=\"67e75621b233542a76406cc5\" _name=\"btn-xac-nhan\"\r\n                          (click)=\"bookingOnAdd()\"\r\n                          [disabled]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail')\"\r\n                          [style.--cursor]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail') ? 'not-allowed' : 'pointer'\"\r\n                          [style.--width]=\"'100%'\"\r\n                          style=\"--background-color: var(--ion-color-vh-green)\"\r\n                          [btn_content]=\"'Submit' | translate\">\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <!-- EDIT -->\r\n                <div class=\"comp-67e6794bc534722dbd3411c6\"\r\n                  *ngIf=\"modalAddBookingType === 'edit'\">\r\n                  <ewa-frame-blank style=\"--width: 100%; --min-height: 42px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"bottom\">\r\n                    <div class=\"grid-67e6794bc534722dbd3411c6\"\r\n                      style=\"grid-template-columns: repeat(4, 1fr);\">\r\n                      <!-- Nút Xoá đơn -->\r\n                      <div class=\"comp-67e755591dbb0846d53ac311\">\r\n                        <ewa-button _id=\"67e755591dbb0846d53ac311\" _name=\"btn-huy-don\"\r\n                          [btn_content]=\"'Delete' | translate\"\r\n                          (click)=\"bookingDeleteBill(bookingBillObject._id, bookingBillObject.bill_code)\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <!-- Nút Lưu và In -->\r\n                      <div class=\"comp-67e755c0d9c4437a17afb31c\">\r\n                        <ewa-button _id=\"67e755c0d9c4437a17afb31c\" _name=\"btn-xac-nhan-va-in\"\r\n                          (click)=\"bookingUpdateBill(bookingBillObject._id, true)\"\r\n                          [disabled]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail')\"\r\n                          [style.--cursor]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail') ? 'not-allowed' : 'pointer'\"\r\n                          [btn_content]=\"'Save and print' | translate\"\r\n                          style=\"--background-color: var(--ion-color-vh-green-lighter)\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <!-- Nút Lưu -->\r\n                      <div class=\"comp-67e75621b233542a76406cc5\">\r\n                        <ewa-button _id=\"67e75621b233542a76406cc5\" _name=\"btn-xac-nhan\"\r\n                          (click)=\"bookingUpdateBill(bookingBillObject._id)\"\r\n                          [disabled]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail')\"\r\n                          [style.--cursor]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail') ? 'not-allowed' : 'pointer'\"\r\n                          [btn_content]=\"'Save' | translate\"\r\n                          style=\"--background-color: var(--ion-color-vh-green-dark)\"\r\n                          [style.--width]=\"'100%'\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <!-- Nút Chuyển qua gọi món -->\r\n                      <div class=\"comp-67e75621b233542a76406cc5\"\r\n                        style=\"grid-area: 1/4\">\r\n                        <ewa-button _id=\"67e75621b233542a76406cc5\" _name=\"btn-xac-nhan\"\r\n                          (click)=\"bookingGoToOrder(bookingBillObject._id, bookingBillObject.id_table)\"\r\n                          [disabled]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail')\"\r\n                          [style.--cursor]=\"!bookingBillObject.id_table || !bookingBillObject.date || (bookingCustomerType === 2 && bookingBillObject.id_customer === 'id_retail') ? 'not-allowed' : 'pointer'\"\r\n                          [btn_content]=\"'Go to order' | translate\"\r\n                          [style.--width]=\"'100%'\"\r\n                          [style.--background-color]=\"'var(--ion-color-primary)'\">\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\n\r\n@Component({\r\n  selector: 'app-modal-add-customer',\r\n  templateUrl: './modal-add-customer.component.html',\r\n  styleUrls: ['./modal-add-customer.component.scss']\r\n})\r\nexport class ModalAddCustomerComponent extends CafeFnbUI {\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.customerType === 1) {\r\n      this.initAddRetailForm();\r\n      this.setRetailFormValues();\r\n    }\r\n    else {\r\n      setTimeout(() => {\r\n        this.initAddCustomerForm();\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // setTimeout(() => {\r\n    //   this.phone = this.vhAlgorithm.vhphoneNumber(\".phone input\");\r\n    // }, 1000);\r\n  }\r\n\r\n  addRetailCustomer() {\r\n    let customer: any = { ...this.addRetailForm.value };\r\n\r\n    this.selectedBill.setRetailName(customer.retail_name);\r\n    this.selectedBill.setRetailPhone(customer.retail_phone);\r\n    this.selectedBill.setRetailAddress(customer.retail_address);\r\n\r\n    this.updateInvoice({ id_customer: 'id_retail' });\r\n  }\r\n\r\n  inputStyle = {\r\n    'border-top-width': '1px',\r\n    'border-left-width': '1px',\r\n    'border-bottom-width': '1px',\r\n    'border-right-width': '1px',\r\n    'border-color': '#c6c8d0',\r\n    'border-style': 'solid',\r\n    'border-top-left-radius': '5px',\r\n    'border-top-right-radius': '5px',\r\n    'border-bottom-right-radius': '5px',\r\n    'border-bottom-left-radius': '5px',\r\n  };\r\n\r\n  get _inputStyle() {\r\n    return JSON.parse(JSON.stringify(this.inputStyle))\r\n  }\r\n\r\n  setRetailFormValues(): void {\r\n    if (!this.selectedBill || !this.addRetailForm) return;\r\n\r\n    this.addRetailForm.patchValue({\r\n      retail_name: this.selectedBill.getRetailName(),\r\n      retail_phone: this.selectedBill.getRetailPhone(),\r\n      retail_address: this.selectedBill.getRetailAddress(),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n    * Mở modal chọn mã quốc gia\r\n    */\r\n  openSearchCountryCode(formName: 'addCustomerForm') {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this[formName].value.phone, this.countryCode as CountryCode);\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   * @param formName tên của from cần dùng\r\n   * @param fieldName tên của field chứa số điẹn thoại\r\n   */\r\n  formatPhoneNumber(event: Event, formName: 'addCustomerForm', fieldName: string): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this[formName].get(fieldName)?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb4177fcfe86b24508016e\">\r\n      <ewa-block-hover style=\"--width: 777px; --min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\"\r\n        _name=\"them-khach-hang\">\r\n        <div class=\"grid-67eb4177fcfe86b24508016e\">\r\n          <div class=\"comp-67eb42e9d0b33317298d8f08\">\r\n            <ewa-frame-blank style=\"--width: 777px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n              <div class=\"grid-67eb42e9d0b33317298d8f08\">\r\n                <div class=\"comp-67eb42e9f844531bf28af8d7\">\r\n                  <ewa-text style=\"--width: 390px\" [text_content]=\"'Add customer' | translate\"\r\n                    _id=\"67e76670c6c3f00f9b5a5f56\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-67eb42e9ebfc4e14d4838ace\">\r\n                  <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <!-- FORM THÊM KHÁCH THÀNH VIÊN -->\r\n          <ng-container *ngIf=\"customerType === 2 && addCustomerForm\" [formGroup]=\"addCustomerForm\">\r\n            <!-- Tên -->\r\n            <div class=\"comp-67eb4382a6a84dd2b1774f77\">\r\n              <ewa-input-group\r\n                [leftContent]=\"('Customer name' | translate) + '*'\"\r\n                style=\"--width:738px; --height: 44px\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                [placeholder]=\"'Enter customer name' | translate\" formControlName=\"name\" _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input name\">\r\n              </ewa-input-group>\r\n              <ng-container\r\n                *ngIf=\"addCustomerForm?.get('name')?.hasError('required') && addCustomerForm?.get('name')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'Customer name is required' | translate}}\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n            <!-- Số điện thoại -->\r\n            <div class=\"comp-67eb43b135d13f272959d5cb\">\r\n              <div (click)=\"openSearchCountryCode('addCustomerForm')\" class=\"calling-code\">\r\n                <span>+{{callingCode}}</span>\r\n                <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n              </div>\r\n              <ewa-input-group\r\n                class=\"phone\"\r\n                style=\"--width:367px; --height: 44px\"\r\n                [leftContent]=\"('Phone number' | translate) + '*'\"\r\n                formControlName=\"phone\"\r\n                (input)=\"formatPhoneNumber($event, 'addCustomerForm', 'phone')\"\r\n                [value]=\"formattedPhone\"\r\n                [placeholder]=\"'Enter customer phone' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input phone number\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '7.5 1 0%'},\r\n                  'input-group__input': {'padding-left': '50px'},\r\n                  'input-group__label': {'margin-left': '53px', 'width' : '75%'}\r\n                }\"\r\n                [placeholder]=\"'Enter customer phone' | translate\">\r\n              </ewa-input-group>\r\n              <ng-container\r\n                *ngIf=\"addCustomerForm?.get('phone')?.hasError('minlength') && addCustomerForm?.get('phone')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'At least 6 characters' | translate}}\r\n                </div>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"addCustomerForm?.get('phone')?.hasError('required') && addCustomerForm?.get('phone')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'Phone number is required' | translate}}\r\n                </div>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"addCustomerForm?.get('phone')?.hasError('invalidPhone') && addCustomerForm?.get('phone')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'_Invalid phone number' | translate}}\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n            <!-- Email -->\r\n            <div class=\"comp-67eb43d03337c520b3f4ef4c\">\r\n              <ewa-input-group\r\n                style=\"--width: 367px; --height: 44px\"\r\n                [leftContent]=\"('Email' | translate)\"\r\n                [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '7.5 1 0%'}}\"\r\n                formControlName=\"email\"\r\n                [placeholder]=\"'Enter customer mail' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input email\">\r\n              </ewa-input-group>\r\n              <ng-container\r\n                *ngIf=\"addCustomerForm?.get('email')?.hasError('email') && addCustomerForm?.get('email')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'Email is not correct' | translate}}\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n            <!-- Loại khách hàng -->\r\n            <div style=\"grid-area: 4/1/auto/span 2; margin-left: 20px;margin-top: 6px;\">\r\n              <ewa-frame-blank style=\"--width: 738px; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame gender\">\r\n                <div class=\"grid-67eb487a6eb6dc6e73a9d1e0\">\r\n                  <div class=\"comp-67eb487be6c9e058e274fea4\">\r\n                    <ewa-input-group _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input gender\"\r\n                      [leftContent]=\"('Customer type' | translate)\"\r\n                      style=\"--width: 738px; --height: 44px\"\r\n                      [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '3 1 0%'}}\">\r\n                    </ewa-input-group>\r\n                  </div>\r\n                  <div class=\"comp-67eb487bfecb6a6816b11735\" style=\"margin-left: 120px; z-index: 22;\">\r\n                    <ewa-select class=\"select\" _id=\"67ea075161bea6597000d8db\" _name=\"Select customer type\"\r\n                      style=\"--width: 99%;--height: 36px; --border-color-select: #000000; --border-style-select: solid; --border-width-select: 1px; --width-select: 80%\"\r\n                      [ewaStyle]=\"{'list-select': {'width': '88%'}}\"\r\n                      [placeholder]=\"'Select customer type' | translate\"\r\n                      [data_select]=\"[{value: false, label: 'Individual' | translate, isSelect: !addCustomerForm.value.isBusiness}, {value: true, label: 'Business/Business household' | translate, isSelect: addCustomerForm.value.isBusiness}]\"\r\n                      (selectionChanged)=\"changeBusiness($event)\">\r\n                    </ewa-select>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <!-- Mã số thuế -->\r\n            <div style=\"grid-area: 5/1/5/4; margin-left: 20px;margin-top: 6px;\"\r\n              *ngIf=\"addCustomerForm.value.isBusiness\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Tax code' | translate) + '*'\"\r\n                [placeholder]=\"'Enter tax code' | translate\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"taxcode\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input tax code\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Ngày sinh -->\r\n            <div *ngIf=\"!addCustomerForm.value.isBusiness\" class=\"comp-67eb45b73204ad3ed512734b\">\r\n              <ewa-frame-blank style=\"--width: 367px; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n                <div class=\"grid-67eb45b73204ad3ed512734b\">\r\n                  <div class=\"comp-67eb45b7324590621b537de6\">\r\n                    <ewa-input-group\r\n                      style=\"--width: 367px; --height: 44px\"\r\n                      [leftContent]=\"('Date of birth' | translate)\"\r\n                      [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '7.5 1 0%'}}\"\r\n                      _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input date\"\r\n                    >\r\n                    </ewa-input-group>\r\n                  </div>\r\n                  <div class=\"comp-67eb45b7fe1091745d468def\">\r\n                    <ewa-frame-blank style=\"--width: 240px; --min-height: 36px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n                      <div class=\"grid-67eb45b7fe1091745d468def\">\r\n                        <input type=\"date\" formControlName=\"datebirth\"\r\n                          style=\"width:100%; margin-top:5px; height:28px; border-radius:8px; border:none; outline:none; padding:12px; font-size: 14px;\" />\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <!-- Giới tính -->\r\n            <div *ngIf=\"!addCustomerForm.value.isBusiness\" class=\"comp-67eb487a6eb6dc6e73a9d1e0\">\r\n              <ewa-frame-blank style=\"--width: 367px; --min-height: 44px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\">\r\n                <div class=\"grid-67eb487a6eb6dc6e73a9d1e0\">\r\n                  <div class=\"comp-67eb487be6c9e058e274fea4\">\r\n                    <ewa-input-group\r\n                      [leftContent]=\"('Gender' | translate)\"\r\n                      style=\"--width:367px; --height: 44px\"\r\n                      [ewaStyle]=\"{'input-group': _inputStyle, 'input-group__addon-left': {'flex': '7.5 1 0%'}}\"\r\n                      _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input gender\"\r\n                    >\r\n                    </ewa-input-group>\r\n                  </div>\r\n                  <div class=\"comp-67eb487bfecb6a6816b11735\">\r\n                    <ewa-select class=\"select\" [(ngModel)]=\"selectedValue\" formControlName=\"gender\"\r\n                      _id=\"67ea075161bea6597000d8db\" _name=\"Select gender\" [placeholder]=\"'Select gender' | translate\">\r\n                      <ewa-option [label]=\"'Female' | translate\" [value]=\"'Female'\"></ewa-option>\r\n                      <ewa-option [label]=\"'Male' | translate\" [value]=\"'Male'\"></ewa-option>\r\n                    </ewa-select>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <!-- Quốc gia -->\r\n            <div class=\"comp-67eb49aa737b9b86737458b3\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Country' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"country\"\r\n                [placeholder]=\"'Enter country' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input quốc gia\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Tỉnh -->\r\n            <div class=\"comp-67eb4acaff144b30625afc18\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Province' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"province\"\r\n                [placeholder]=\"'Enter province' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input tỉnh\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Quận -->\r\n            <div class=\"comp-67eb4b35a06382f56235b2df\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('District' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"district\"\r\n                [placeholder]=\"'Enter district' | translate\" _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input quận huyện\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Địa chỉ -->\r\n            <div class=\"comp-67eb4ba036c66c7569968f05\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Address' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"address\"\r\n                [placeholder]=\"'Enter address' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input address\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Ghi chú -->\r\n            <div style=\"margin-left: 20px;margin-top: 6px;grid-area: 8 / 1 / auto / span 2;display: block;\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Note' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"note\"\r\n                [placeholder]=\"'Enter note' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input note\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <!-- Cho phép nợ -->\r\n            <div style=\"padding-top: 22px; grid-area: 11 / 1/ auto / span 2; padding-left: 20px;\">\r\n              <div></div>\r\n              <label nz-checkbox formControlName=\"debt_enable\">{{'Debit permission' |\r\n                translate}}</label>\r\n            </div>\r\n            <div class=\"comp-67eb43376a4e32f6c45b17b7\">\r\n              <ewa-button style=\"--width: 777px; --height: 47px; --background-color: var(--ion-color-vh-green-dark)\"\r\n                [style.--opacity]=\"addCustomerForm.invalid ? 0.5 : 1\" [btn_content]=\"'Add' | translate\"\r\n                [disabled]=\"addCustomerForm.invalid\" (click)=\"addCustomer();onClose.emit()\"\r\n                _id=\"67e77a335442d5134616c9e9\" _name=\"Button add customer\">\r\n              </ewa-button>\r\n            </div>\r\n          </ng-container>\r\n\r\n\r\n\r\n\r\n          <!-- FORM THÊM KHÁCH LẺ -->\r\n          <ng-container *ngIf=\"customerType === 1 && addRetailForm\" [formGroup]=\"addRetailForm\">\r\n            <!-- Tên -->\r\n            <div class=\"comp-67eb4382a6a84dd2b1774f77\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Customer name' | translate) + '*'\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                [placeholder]=\"'Enter customer name' | translate\"\r\n                formControlName=\"retail_name\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input name\">\r\n              </ewa-input-group>\r\n              <ng-container\r\n                *ngIf=\"addRetailForm?.get('retail_name')?.hasError('required') && addRetailForm?.get('retail_name')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'Customer name is required' | translate}}\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n            <!-- Số điện thoại -->\r\n            <div class=\"comp-67eb43b135d13f272959d5cb\">\r\n              <ewa-input-group\r\n                class=\"phone\"\r\n                [leftContent]=\"('Phone number' | translate) + '*'\"\r\n                style=\"--width:738px; --height: 44px\"\r\n                formControlName=\"retail_phone\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                [placeholder]=\"'Enter customer phone' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\" _name=\"Input phone number\">\r\n              </ewa-input-group>\r\n              <ng-container\r\n                *ngIf=\"addRetailForm?.get('retail_phone')?.hasError('minlength') && addRetailForm?.get('retail_phone')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'At least 6 characters' | translate}}\r\n                </div>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"addRetailForm?.get('retail_phone')?.hasError('required') && addRetailForm?.get('retail_phone')?.dirty\">\r\n                <div style=\"font-size: 12px; color: #ff0000; padding-top: 2px;padding-left: 20px\">\r\n                  {{'Phone number is required' | translate}}\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n            <!-- Địa chỉ -->\r\n            <div class=\"comp-67eb4ba036c66c7569968f05\">\r\n              <ewa-input-group\r\n                style=\"--width:738px; --height: 44px\"\r\n                [leftContent]=\"('Address' | translate)\"\r\n                [ewaStyle]=\"{\r\n                  'input-group': _inputStyle,\r\n                  'input-group__addon-left': {'flex': '3 1 0%'}\r\n                }\"\r\n                formControlName=\"retail_address\"\r\n                [placeholder]=\"'Enter address' | translate\"\r\n                _id=\"67ea074e6e5d1e2c44457f52\"\r\n                _name=\"Input address\">\r\n              </ewa-input-group>\r\n            </div>\r\n            <div class=\"comp-67eb43376a4e32f6c45b17b7\">\r\n              <ewa-button style=\"--width: 777px; --height: 47px; --background-color: var(--ion-color-vh-green-dark)\"\r\n                [style.--opacity]=\"addRetailForm.invalid ? 0.5 : 1\" [btn_content]=\"'Add' | translate\"\r\n                [disabled]=\"addRetailForm.invalid\" (click)=\"addRetailCustomer();onClose.emit()\"\r\n                _id=\"67e77a335442d5134616c9e9\" _name=\"Button add customer\">\r\n              </ewa-button>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-modal-discount',\r\n  templateUrl: './modal-discount.component.html',\r\n  styleUrls: ['./modal-discount.component.scss']\r\n})\r\nexport class ModalDiscountComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  /** Danh sách loại giảm giá */\r\n  listOptionDiscount = [\r\n    { label: '%', value: 'percent', isSelect: true },\r\n    { label: this.languageService.translate('Value'), value: 'number', isSelect: false },\r\n  ];\r\n  /** Loại giảm giá đang chọn */\r\n  selectedDiscountType: 'percent' | 'number' = 'percent';\r\n  /** Biến tạm để lưu % giảm giá */\r\n  tempPercentDiscount: number;\r\n  /** Biến tạm để lưu Giá trị giảm giá */\r\n  tempDiscount: number;\r\n\r\n  ngOnInit(): void {\r\n    // Khi mở modal thì lấy lại dữ liệu % và giá trị giảm giá\r\n    this.tempPercentDiscount = this.percent_discount;\r\n    this.tempDiscount = this.selectedBill.getDiscount();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if (document.querySelector(\".discount-price\")) this.moneyEdit['discount-price'] = this.vhAlgorithm.vhnumeral(\".discount-price input\");\r\n  }\r\n\r\n  /**\r\n   * Khi reset giá trị Giảm giá\r\n   */\r\n  resetDiscount() {\r\n    this.tempPercentDiscount = 0;\r\n    this.tempDiscount = 0;\r\n  }\r\n\r\n  /**\r\n   * Khi thay đổi % giảm giá.\r\n   *\r\n   * Đảm bảo giá trị nhập vào không quá 100 và là số thực.\r\n   *\r\n   * @param event giá trị nhập vào\r\n   */\r\n  onPercentDiscountPriceChange(event: any) {\r\n    // Chỉ cho phép nhập số và dấu chấm\r\n    let value = event.replace(/[^0-9.]/g, '');\r\n    // Chỉ cho phép nhập một dấu chấm\r\n    const decimalIndex = value.indexOf('.');\r\n    if (decimalIndex !== -1) {\r\n      value = value.slice(0, decimalIndex + 1) + value.slice(decimalIndex + 1).replace(/\\./g, '');\r\n    }\r\n    // Khi chỉ nhập dấu chấm thì tự động thêm số 0 trước\r\n    if (value === '.') {\r\n      value = '0.';\r\n    }\r\n    // Giới hạn giá trị nhập vào không quá 100\r\n    let parsedValue = parseFloat(value);\r\n    if (!isNaN(parsedValue) && parsedValue > 100) {\r\n      parsedValue = 100;\r\n      value = '100';\r\n    }\r\n    this.tempPercentDiscount = value;\r\n    // Update input\r\n    const inputElement = document.querySelector('.percent-discount-price input') as HTMLInputElement;\r\n    if (inputElement) {\r\n      inputElement.value = value;\r\n    }\r\n\r\n    this.tempDiscount = this.selectedBill.getSubTotal() * (parsedValue / 100);\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Cập nhật lại tempPercentDiscount sau khi thay đổi tempDiscount\r\n   */\r\n  updateTempDiscountPercent() {\r\n    let discount: any = this.moneyEdit['discount-price'].getRawValue();\r\n    this.tempDiscount = (discount > 0 && discount < this.selectedBill.getSubTotal() ? parseFloat(discount) : 0);\r\n    const discountPercent = (this.tempDiscount / this.selectedBill.getSubTotal()) * 100;\r\n    this.tempPercentDiscount = discountPercent;\r\n  }\r\n\r\n  updateDiscountPercent() {\r\n    this.selectedBill.setPercentDiscountBill(this.tempPercentDiscount);\r\n    this.editPercentDiscount(this.tempPercentDiscount);\r\n  }\r\n\r\n  /**Cập nhật giảm giá */\r\n  updateDiscount() {\r\n    let discount: any = this.moneyEdit['discount-price'].getRawValue();\r\n    this.selectedBill.setDiscount(discount ? parseFloat(discount) : 0);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n    this.percent_discount = discount / this.selectedBill.getSubTotal() * 100;\r\n  }\r\n\r\n  handleClickSaveDiscount() {\r\n    this.updateServiceTime();\r\n    this.updateDiscountPercent();\r\n    this.updateDiscount();\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67e618c301f826c932c6f2db\">\r\n      <ewa-block-hover style=\"--width: 100%; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"giam-gia\">\r\n        <div class=\"grid-67e618c301f826c932c6f2db\">\r\n          <div class=\"comp-67e76613f24992f83d6550f1\">\r\n            <ewa-frame-blank _id=\"67e76613f24992f83d6550f1\" _name=\"wrapper\">\r\n              <div class=\"grid-67e76613f24992f83d6550f1\">\r\n                <div class=\"comp-67e7666f1e58b39798e4d8ee\">\r\n                  <ewa-frame-blank _id=\"67e7666f1e58b39798e4d8ee\" _name=\"header\">\r\n                    <div class=\"grid-67e7666f1e58b39798e4d8ee\">\r\n                      <div class=\"comp-67e76670c6c3f00f9b5a5f56\">\r\n                        <ewa-text [text_content]=\"'Discount value' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"title\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e7667044587fc691f851be\">\r\n                        <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"close-icon\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e7683a079acc8344d60d49\">\r\n                  <ewa-frame-blank _id=\"67e7683a079acc8344d60d49\" _name=\"main\">\r\n                    <div class=\"grid-67e7683a079acc8344d60d49\">\r\n                      <div class=\"comp-67e7686645a2ebf2f11a3da4\">\r\n                        <!-- % -->\r\n                        <ewa-input-group _id=\"67e7686645a2ebf2f11a3da4\" _name=\"input-discount\"\r\n                          [style.display]=\"selectedDiscountType === 'percent' ? 'block' : 'none'\"\r\n                          class=\"percent-discount-price\"\r\n                          [value]=\"tempPercentDiscount | number:'1.0-2'\"\r\n                          (valueChange)=\"onPercentDiscountPriceChange($event)\"\r\n                        >\r\n                        </ewa-input-group>\r\n                        <!-- Giá trị -->\r\n                        <ewa-input-group _id=\"67e7686645a2ebf2f11a3da4\" _name=\"input-discount\"\r\n                          [style.display]=\"selectedDiscountType !== 'percent' ? 'block' : 'none'\"\r\n                          class=\"discount-price\"\r\n                          [value]=\"vhAlgorithm.vhcurrencyunit(tempDiscount)\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                      <div class=\"comp-67e769140f440bb5b95ef44d\">\r\n                        <ewa-radio-button _id=\"67e769140f440bb5b95ef44d\" _name=\"radio-unit\"\r\n                          [data_list]=\"listOptionDiscount\"\r\n                          (radioChange)=\"selectedDiscountType = $event; updateTempDiscountPercent()\"\r\n                          [ewaStyle]=\"{ 'radio-button--checked': { 'border-color': 'var(--ion-color-vh-green)' } }\"\r\n                          style=\"--background-color-item-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\">\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e766e2c68baeb37f60a663\">\r\n                  <ewa-frame-blank _id=\"67e766e2c68baeb37f60a663\" _name=\"bottom\">\r\n                    <div class=\"grid-67e766e2c68baeb37f60a663\">\r\n                      <div class=\"comp-67e766e273c6f421a5caa29c\">\r\n                        <ewa-button\r\n                          style=\"--width: 189px;--border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\"\r\n                          [btn_content]=\"'Cancel' | translate\"\r\n                          (click)=\"onClose.emit();\"\r\n                          _id=\"67e766e273c6f421a5caa29c\" _name=\"btn-huy\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67e766e3f5f968cab2e3e608\">\r\n                        <ewa-button\r\n                          style=\"--width: 189px;--background-color: var(--ion-color-vh-green);\"\r\n                          [btn_content]=\"'OK' | translate\"\r\n                          (click)=\"handleClickSaveDiscount();onClose.emit();\"\r\n                          _id=\"67e766e3f5f968cab2e3e608\" _name=\"btn-dong-y\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\n\r\n@Component({\r\n  selector: 'app-modal-edit-used-time',\r\n  templateUrl: './modal-edit-used-time.component.html',\r\n  styleUrls: ['./modal-edit-used-time.component.scss']\r\n})\r\nexport class ModalEditUsedTimeComponent extends CafeFnbUI {\r\n  \r\n  @Output() onCancel = new EventEmitter<any>();\r\n  @Output() onOk = new EventEmitter<any>();\r\n\r\n\r\n\r\n  cancel() {\r\n    this.onCancel.emit();\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"cancel()\"></div>\r\n  <div class=\"custom-dialog__content\">\r\n\r\n    <div class=\"comp-681c068cbd68a4971b61a13e\" style=\"margin-top: 0px; margin-left: 0px;\">\r\n      <ewa-block-hover _id=\"681c068cbd68a4971b61a13e\" _name=\"dieu-chinh-thoi-gian-su-dung\">\r\n        <div class=\"grid-681c068cbd68a4971b61a13e\">\r\n          <div class=\"comp-681c06bb02bf11240518a937\">\r\n            <ewa-frame-blank _id=\"681c06bb02bf11240518a937\" _name=\"wrapper\">\r\n              <div class=\"grid-681c06bb02bf11240518a937\">\r\n                <!-- Header -->\r\n                <div class=\"comp-681c06bc9edc6d8dedaf97f8\">\r\n                  <ewa-frame-blank _id=\"681c06bc9edc6d8dedaf97f8\" _name=\"header\">\r\n                    <div class=\"grid-681c06bc9edc6d8dedaf97f8\">\r\n                      <div class=\"comp-681c06bc4d73cddb088a0bd1\">\r\n                        <ewa-text _id=\"681c06bc4d73cddb088a0bd1\" _name=\"title\"\r\n                          [text_content]=\"'Edit used time' | translate\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-681c06bd88bb54f96e06057e\">\r\n                        <ewa-icon _id=\"681c06bd88bb54f96e06057e\" _name=\"close-icon\"\r\n                          (click)=\"cancel()\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n                <!-- Body -->\r\n                <div class=\"comp-681c06bcf0ad12c97acf3587\">\r\n                  <ewa-frame-blank _id=\"681c06bcf0ad12c97acf3587\" _name=\"form\">\r\n                    <div class=\"grid-681c06bcf0ad12c97acf3587\">\r\n                      <!-- Thời gian bắt đầu -->\r\n                      <div class=\"comp-681c06bd8c51c3f44ef475ce\">\r\n                        <ewa-frame-blank _id=\"681c06bd8c51c3f44ef475ce\" _name=\"frame-thoi-gian-bat-dau\">\r\n                          <div class=\"grid-681c06bd8c51c3f44ef475ce\">\r\n                            <div class=\"comp-681c06be498f222c5e9d8461\">\r\n                              <ewa-text _id=\"681c06be498f222c5e9d8461\" _name=\"lbl-thoi-gian-bat-dau\"\r\n                                [text_content]=\"'_Started at' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-681c06be839e9fcdd2d186b2\">\r\n                              <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n                                nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n                                nzShowTime\r\n                                [nzAllowClear]=\"false\"\r\n                                [nzPlaceHolder]=\"'Select datetime' | translate\"\r\n                                style=\"width: 100%;\">\r\n                              </nz-date-picker>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n\r\n                      <!-- Thời gian kết thúc -->\r\n                      <div class=\"comp-681c06bd5901a6c974f1ae97\">\r\n                        <ewa-frame-blank _id=\"681c06bd5901a6c974f1ae97\" _name=\"frame-thoi-gian-ket-thuc\">\r\n                          <div class=\"grid-681c06bd5901a6c974f1ae97\">\r\n                            <div class=\"comp-681c06be7f2208ebb7bc1893\">\r\n                              <ewa-text _id=\"681c06be7f2208ebb7bc1893\" _name=\"lbl-thoi-gian-ket-thuc\"\r\n                                [text_content]=\"'Ended at' | translate\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-681c06be1320363b702e9213\">\r\n                              <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n                                nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n                                nzShowTime\r\n                                nzAllowClear\r\n                                [nzPlaceHolder]=\"'Select datetime' | translate\"\r\n                                style=\"width: 100%;\">\r\n                              </nz-date-picker>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n                <!-- Lưu ý -->\r\n                <div class=\"comp-681c088b79872c69aa0ced4b\">\r\n                  <ewa-frame-blank _id=\"681c088b79872c69aa0ced4b\" _name=\"luu-y\">\r\n                    <div class=\"grid-681c088b79872c69aa0ced4b\" style=\"display: flex; flex-direction: column;\">\r\n                      <div class=\"comp-681c088cfc3052d74d492bb2\">\r\n                        <ewa-text _id=\"681c088cfc3052d74d492bb2\" _name=\"italic-text\"\r\n                          text_content=\"*{{'_Note' | translate}}:\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-681c088b280d958b6207eb12\">\r\n                        <ewa-text _id=\"681c088b280d958b6207eb12\" _name=\"italic-text\"\r\n                          [text_content]=\"'-' + ('The start time must be less than or equal to the current time.' | translate)\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-681c088b280d958b6207eb12\">\r\n                        <ewa-text _id=\"681c088b280d958b6207eb12\" _name=\"italic-text\"\r\n                          [text_content]=\"'-' + ('The end time must be greater than the start time.' | translate)\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n                <!-- Button xác nhận -->\r\n                <div class=\"comp-681c06bc6d51f7dbeb40189b\">\r\n                  <ewa-frame-blank _id=\"681c06bc6d51f7dbeb40189b\" _name=\"footer\">\r\n                    <div class=\"grid-681c06bc6d51f7dbeb40189b\">\r\n                      <div class=\"comp-681c06bdbedf1cda1ed0bb0d\">\r\n                        <ewa-button style=\"--background-color: var(--ion-color-vh-green);\" _id=\"681c06bdbedf1cda1ed0bb0d\" _name=\"btn-xac-nhan\"\r\n                          [btn_content]=\"'Confirm' | translate\"\r\n                          (click)=\"handleUpdateUsedTime()\">\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-modal-fee',\r\n  templateUrl: './modal-fee.component.html',\r\n  styleUrls: ['./modal-fee.component.scss']\r\n})\r\nexport class ModalFeeComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if (document.querySelector(\".fee\")) this.moneyEdit['fee'] = this.vhAlgorithm.vhnumeral(\".fee input\");\r\n    if (document.querySelector(\".tax\")) this.moneyEdit['tax'] = this.vhAlgorithm.vhnumeral(\".tax input\");\r\n  }\r\n\r\n\r\n  /** Danh sách loại giảm giá */\r\n  listOptionFee = [\r\n    { label: this.languageService.translate('Fee'), value: 'fee', isSelect: true },\r\n    { label: this.languageService.translate('Tax'), value: 'tax', isSelect: true },\r\n  ];\r\n\r\n  tempPercentFee = 0;\r\n  tempFee = 0;\r\n  tempPercentTax: number = 0;\r\n  tempTax = 0;\r\n\r\n  ngOnInit(): void {\r\n    this.tempFee = this.selectedBill.getFee();\r\n    this.tempPercentFee = isNaN((this.tempFee / this.selectedBill.getSubTotal()) * 100) ? 0 : (this.tempFee / this.selectedBill.getSubTotal()) * 100;\r\n    this.tempPercentTax = this.selectedBill.getTax();\r\n    this.tempTax = this.selectedBill.getTotal() * (this.tempPercentTax / 100);\r\n  }\r\n\r\n\r\n  updateTempTaxPercent(event) {\r\n    this.tempPercentTax = event[0];\r\n    this.tempTax = this.selectedBill.getTotal() * (this.tempPercentTax / 100);\r\n  }\r\n\r\n  onChangeTempFee(event) {\r\n    let value = event.replace(/[^0-9.]/g, '') as string;\r\n    this.tempFee = parseFloat(value);\r\n    const feePercent = (this.tempFee / this.selectedBill.getSubTotal()) * 100;\r\n    this.tempPercentFee = feePercent;\r\n  }\r\n\r\n  onChangeTempPercentFee(event) {\r\n    this.tempPercentFee = event;\r\n    this.tempFee = this.selectedBill.getSubTotal() * (this.tempPercentFee / 100);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  handleSelect(event) {\r\n    this.listOptionFee[0].isSelect = false;\r\n    this.listOptionFee[1].isSelect = false;\r\n\r\n    event.forEach((selectItem) => {\r\n      if (selectItem.value === 'fee') {\r\n        this.listOptionFee[0].isSelect = true;\r\n      } else if (selectItem.value === 'tax') {\r\n        this.listOptionFee[1].isSelect = true;\r\n      }\r\n    });\r\n\r\n    if (!this.listOptionFee[0].isSelect) {\r\n      this.tempFee = 0;\r\n      this.tempPercentFee = 0;\r\n    }\r\n\r\n    if (!this.listOptionFee[1].isSelect) {\r\n      this.tempTax = 0;\r\n      this.tempPercentTax = 0;\r\n    }\r\n  }\r\n\r\n  handleSave() {\r\n    this.updateServiceTime();\r\n    if (this.selectedBill.getFee() !== this.tempFee) {\r\n      this.updateFee();\r\n    }\r\n    if (this.selectedBill.getTax() !== this.tempPercentTax) {\r\n      this.updateTax();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cập nhật phí\r\n  */\r\n  updateFee() {\r\n    this.selectedBill.setFee(this.tempFee);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n  }\r\n\r\n  /**\r\n  * Cập nhật thuế\r\n  */\r\n  updateTax() {\r\n    this.selectedBill.setTax(this.tempPercentTax);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n  }\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67e62a288106777e03ec2aa3\">\r\n      <ewa-block-hover style=\"--width: 100%; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"thue-phi\">\r\n        <div class=\"grid-67e62a288106777e03ec2aa3\">\r\n          <div class=\"comp-67e76d75ded6802c42b68ec8\">\r\n            <ewa-frame-blank _id=\"67e76d75ded6802c42b68ec8\" _name=\"wrapper\">\r\n              <div class=\"grid-67e76d75ded6802c42b68ec8\">\r\n                <div class=\"comp-67e76d76a3ee5e9dea9dcad6\">\r\n                  <ewa-frame-blank style=\"--width: 464px; --min-height: 48px\" _id=\"67e7666f1e58b39798e4d8ee\" _name=\"header\">\r\n                    <div class=\"grid-67e76d76a3ee5e9dea9dcad6\">\r\n                      <div class=\"comp-67e76d771379881cc68cf118\">\r\n                        <ewa-text style=\"--width: 464px;\" [text_content]=\"'Tax and fee details of the bill' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"title\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e76d77d604dfc6c98a1dae\">\r\n                        <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"close-icon\">\r\n                        </ewa-icon>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e76d76a4b49f0c76f9ec50\">\r\n                  <ewa-frame-blank _id=\"67e76d76a4b49f0c76f9ec50\" _name=\"main\">\r\n                    <div class=\"grid-67e76d76a4b49f0c76f9ec50\">\r\n                      <div class=\"comp-67e76e071b8591d9087579c9\">\r\n                        <ewa-text [text_content]=\"('Percent' | translate) + ' (%)'\" _id=\"67e76e071b8591d9087579c9\" _name=\"lbl-phan-tram\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e76e24cc0f9e175ef196ba\">\r\n                        <ewa-text [text_content]=\"'Value' | translate\" _id=\"67e76e24cc0f9e175ef196ba\" _name=\"lbl-gia-tri\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e76e31294fa6dce723efe8\">\r\n                        <ewa-checkbox\r\n                          style=\"--border-color-button-checked: var(--ion-color-vh-green);--background-color-button-checked: var(--ion-color-vh-green);\"\r\n                          (valueChange)=\"handleSelect($event)\"\r\n                          [data_list]=\"listOptionFee\"\r\n                          _id=\"67e76e31294fa6dce723efe8\" _name=\"chk-phi-thue\"\r\n                        >\r\n                        </ewa-checkbox>\r\n                      </div>\r\n                      <!-- Phí phần trăm -->\r\n                      <div class=\"comp-67e76e901bd8c23f4d323025\">\r\n                        <ewa-input-number\r\n                          *ngIf=\"listOptionFee[0].isSelect\"\r\n                          [value]=\"tempPercentFee\"\r\n                          (valueChange)=\"onChangeTempPercentFee($event)\"\r\n                          _id=\"67e76e901bd8c23f4d323025\" _name=\"input-phi-phan-tram\"\r\n                        >\r\n                        </ewa-input-number>\r\n                        <ewa-input-group\r\n                          *ngIf=\"!listOptionFee[0].isSelect\"\r\n                          style=\"--width: 60px\"\r\n                          [disabled]=\"!listOptionFee[0].isSelect\"\r\n                          [value]=\"tempPercentFee\"\r\n                          _id=\"67e76d78ca72ac21c57af294\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                      <!-- Select Thuế -->\r\n                      <div class=\"comp-67ff241e7d9f199ec9c9f551\">\r\n                        <ewa-select\r\n                          *ngIf=\"billService.listTax.length && listOptionFee[1].isSelect\"\r\n                          style=\"--color-text: #64748b\"\r\n                          [(ngModel)]=\"tempPercentTax\"\r\n                          (ngModelChange)=\"updateTempTaxPercent($event)\"\r\n                          _id=\"67ff241e7d9f199ec9c9f551\" _name=\"Select thue\"\r\n                        >\r\n                            <ewa-option\r\n                              *ngFor=\"let item of billService.listTax;\"\r\n                              [label]=\"vhAlgorithm.vhpercent(item.value/100)\"\r\n                              [value]=\"item.value\"\r\n                            ></ewa-option>\r\n                        </ewa-select>\r\n                        <span *ngIf=\"!billService.listTax.length || !listOptionFee[1].isSelect\">0.00%</span>\r\n                      </div>\r\n                      <!-- Phí giá trị -->\r\n                      <div class=\"comp-67e76d78ca72ac21c57af294\">\r\n                        <ewa-input-group\r\n                          [disabled]=\"!listOptionFee[0].isSelect\"\r\n                          class=\"fee\"\r\n                          [value]=\"vhAlgorithm.vhcurrencyunit(tempFee)\"\r\n                          (valueChange)=\"onChangeTempFee($event)\"\r\n                          _id=\"67e76d78ca72ac21c57af294\" _name=\"input-phi-value\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                       <!-- Thuế giá trị -->\r\n                      <div class=\"comp-67e76ffab7b8d729b6727fa9\">\r\n                        <ewa-input-group\r\n                          class=\"tax\"\r\n                          [disabled]=\"true\"\r\n                          [value]=\"vhAlgorithm.vhcurrencyunit(tempTax)\"\r\n                          _id=\"67e76ffab7b8d729b6727fa9\" _name=\"input-thue-value\"\r\n                        >\r\n                        </ewa-input-group>\r\n                      </div>\r\n                      <div class=\"comp-67e7714ea2e50e9efc5d14f6\">\r\n                        <ewa-text [text_content]=\"'Total taxes and fees' | translate\" _id=\"67e7714ea2e50e9efc5d14f6\" _name=\"lbl-tong\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67e77176f8559cf854ca504e\">\r\n                        <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(tempTax + tempFee)\" _id=\"67e77176f8559cf854ca504e\" _name=\"txt-tong\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67e76d768299280e57bfccdf\">\r\n                  <ewa-frame-blank style=\"--width: 464px; --min-height: 42px\" _id=\"67e766e2c68baeb37f60a663\" _name=\"bottom\">\r\n                    <div class=\"grid-67e76d768299280e57bfccdf\">\r\n                      <div class=\"comp-67e76d77df6294059f307fe0\">\r\n                        <ewa-button\r\n                          style=\"--width: 232px; --height: 42px; --border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\"\r\n                          [btn_content]=\"'Cancel' | translate\"\r\n                          (click)=\"onClose.emit();\"\r\n                          _id=\"67e766e273c6f421a5caa29c\" _name=\"btn-huy\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67e76d77cf26ae9fd4ddc04a\">\r\n                        <ewa-button\r\n                          style=\"--width: 232px; --height: 42px; --background-color: var(--ion-color-vh-green);\"\r\n                          [btn_content]=\"'OK'\"\r\n                          (click)=\"handleSave();onClose.emit()\"\r\n                          _id=\"67e766e3f5f968cab2e3e608\" _name=\"btn-dong-y\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, HostListener, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { NzPopconfirmDirective } from 'ng-zorro-antd/popconfirm';\r\n\r\n\r\ninterface Denomination {\r\n  value: number;\r\n  label: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-modal-payment',\r\n  templateUrl: './modal-payment.component.html',\r\n  styleUrls: ['./modal-payment.component.scss']\r\n})\r\nexport class ModalPaymentComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    public cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  listWallet = [];\r\n  denominations: Denomination[] = [\r\n    { value: 100000, label: '100,000₫' },\r\n    { value: 50000, label: '50,000₫' },\r\n    { value: 10000, label: '10,000₫' },\r\n    { value: 5000, label: '5,000₫' },\r\n  ];\r\n  suggestedDenominations: number[] = [];\r\n\r\n  ngOnInit(): void {\r\n    this.listWallet = this.vhQueryCafe.getlocalWallets()\r\n      .filter(wallet => wallet._id != 'id_cash' &&\r\n        wallet.id_branch == this.vhQueryCafe.getDefaultBranch()._id\r\n      ).map(wallet => {\r\n        return { label: wallet.name, value: wallet._id, isLeaf: true };\r\n      });\r\n\r\n    if (this.selectedBill.getIdWallet()) {\r\n      this.current_id_wallet = this.selectedBill.getIdWallet();\r\n    }\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n    this.handleGetNewDenominations();\r\n    if (this.customerType === 2) {\r\n      this.customerSearchList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if (document.querySelector(\".customerPay\")) this.moneyEdit['cash'] = this.vhAlgorithm.vhnumeral(\".customerPay input\");\r\n    if (document.querySelector(\".payment-price\")) this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price input\");\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onClose.emit();\r\n  }\r\n\r\n  listPaymentMethod = [\r\n    { value: 1, name: this.languageService.translate(\"Cash\"), image: './assets/img/tienmat.png' },\r\n    { value: 3, name: this.languageService.translate(\"Bank transfer\"), image: './assets/img/chuyenkhoan.png' },\r\n    { value: 2, name: this.languageService.translate(\"Debit\"), image: './assets/img/congno.png' },\r\n  ];\r\n\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F1\"].includes(event.key)) {\r\n      switch (event.key) {\r\n        case \"F1\": document.getElementById(\"btn-payment\").click(); break;\r\n      }\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n\r\n  showConfirm(popconfirm: NzPopconfirmDirective): void {\r\n    if (popconfirm) {\r\n      popconfirm.show();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Khi thay đổi phương thức thanh toán\r\n   * @param event value của cascader được chọn. Ví dụ: nếu không có children thí là [1] hoặc [2], nếu có children thì là [3, id_wallet]\r\n   */\r\n  onChangePaymentType(event) {\r\n    this.setPaymentType(event);\r\n  }\r\n\r\n  /**\r\n   * Cập nhật payment_type cho bill\r\n   * @param type 1-cash-Tiền mặt, 2-debit-Công nợ, 3-account-Tài khoản\r\n   * @param id_wallet id của Tài khoản\r\n   * @example this.setPaymentType(1);\r\n   */\r\n  setPaymentType(type: 1 | 2 | 3) {\r\n    this.selectedBill.setPaymentType(type);\r\n\r\n    switch (type) {\r\n      case 1: {\r\n        this.selectedBill.setIdWallet('id_cash');\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        this.invoice_cash = this.selectedBill.getCash().toString();\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.selectedBill.setIdWallet(\"\");\r\n        this.selectedBill.setCash(0);\r\n        this.selectedBill.setPayment(0);\r\n        this.invoice_cash = '0';\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        break;\r\n      }\r\n      case 3: {\r\n        this.selectedBill.setIdWallet(this.listWallet[0].value);\r\n        this.current_id_wallet = this.listWallet[0].value;\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        this.invoice_cash = this.selectedBill.getCash().toString();\r\n        break;\r\n      }\r\n    };\r\n    this.updateInvoice(true);\r\n  }\r\n\r\n  current_id_wallet;\r\n\r\n  changeIdWallet(ev) {\r\n    this.current_id_wallet = ev[0];\r\n    this.selectedBill.setIdWallet(this.current_id_wallet);\r\n\r\n  }\r\n\r\n  private generateSuggestedDenominations(total: number): number[] {\r\n    const denominationValues = this.denominations.map(d => d.value);\r\n    const subsetSums = this.getAllSubsetSums(denominationValues);\r\n    const paymentAmounts = subsetSums.map(sum => total + sum);\r\n    paymentAmounts.push(total); // Include the exact total\r\n    const uniqueAmounts = Array.from(new Set(paymentAmounts))\r\n      .filter(amount => amount >= total)\r\n      .sort((a, b) => a - b);\r\n    return uniqueAmounts;\r\n  }\r\n\r\n\r\n\r\n  private getAllSubsetSums(denominations: number[]): number[] {\r\n    const sums = new Set<number>();\r\n    const n = denominations.length;\r\n    for (let i = 1; i < (1 << n); i++) { // Start from 1 to exclude empty subset\r\n      let sum = 0;\r\n      for (let j = 0; j < n; j++) {\r\n        if (i & (1 << j)) {\r\n          sum += denominations[j];\r\n        }\r\n      }\r\n      sums.add(sum);\r\n    }\r\n    return Array.from(sums);\r\n  }\r\n\r\n  /**\r\n   * Khi chọn Tiền mặt trong Danh sách tiền mặt gợi ý\r\n   * @param amount Số tiền chọn\r\n   */\r\n  selectCash(amount) {\r\n    if (this.selectedBill.getCash() !== amount) {\r\n      this.invoice_cash = amount;\r\n      this.selectedBill.setCash(parseFloat(amount));\r\n      this.vhQueryCafe.updateBill(this.selectedBill.getID(), { cash: parseFloat(this.moneyEdit['cash'].getRawValue()) })\r\n        .then((bool) => {\r\n          // console.log('updateBill', bool);\r\n        }, error => {\r\n          this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"An error while updating bill\"));\r\n        });\r\n    }\r\n  }\r\n\r\n  onDropdownVisibleChange(visible: boolean): void {\r\n    if (visible) {\r\n      if (this.customerType === 3) {\r\n        this.customerList = this.customerSearchList = [];\r\n      }\r\n      else if (this.customerType === 2) {\r\n        this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n        this.customerSearchList = this.customerList;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleGetNewDenominations() {\r\n    this.suggestedDenominations = this.generateSuggestedDenominations(this.selectedBill.getTotalATax()).slice(0, 12);\r\n  }\r\n\r\n  getCustomerValue(): string {\r\n    if (this.customerType !== 1 && this.selectedBill.getIdPartner() === 'id_retail') {\r\n      return '';\r\n    }\r\n    else if (this.customerType === 3) {\r\n      return '';\r\n    }\r\n    else if (this.selectedBill.getIdPartner() === 'id_retail') {\r\n      return this.getRetailName();\r\n    }\r\n    else {\r\n      return this.getMemberName();\r\n    }\r\n  }\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67ea4a0e72cb0781dba12f59\">\r\n      <ewa-block-hover style=\"--width: 918px; --min-height: 527px; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"thanh-toan\">\r\n        <div class=\"grid-67ea4a0e72cb0781dba12f59\">\r\n          <div class=\"comp-67ea4ea9b09003fdc0e131db\">\r\n            <ewa-text [text_content]=\"('_Paybill' | translate) + ' - ' + tableInfo\" _id=\"67ea4ea9b09003fdc0e131db\" _name=\"Title thanh toán\">\r\n            </ewa-text>\r\n          </div>\r\n          <div class=\"comp-67ea4eedc045cfdc37ec91ab\">\r\n            <ewa-icon style=\"--color: var(--ion-color-vh-green)\" _id=\"67ea4eedc045cfdc37ec91ab\" (click)=\"onClose.emit();\" _name=\"Button close\">\r\n            </ewa-icon>\r\n          </div>\r\n          <div class=\"comp-67ea4f344e13d7430324ed4e\">\r\n            <ewa-frame-blank style=\"--width: 918px;--min-height: 430px;--background-color: #f2f2f2\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Một khung trống\">\r\n              <div class=\"grid-67ea4f344e13d7430324ed4e\">\r\n                <div class=\"comp-67ea4fcfefce548c9086f01a\">\r\n                  <ewa-frame-blank style=\"--width: 265px;--min-height: 120px;--background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Một khung trống\">\r\n                    <div class=\"grid-67ea4fcfefce548c9086f01a\">\r\n                      <div class=\"comp-67ea520878d251eeb44f2138\">\r\n                        <ewa-input-group _id=\"67ea520878d251eeb44f2138\" _name=\"Input search customer\"\r\n                          [disabled]=\"customerType === 1\"\r\n                          [ewaStyle]=\"{'input-group__label' : {'margin-left': '12px'}}\"\r\n                          [value]=\"getCustomerValue()\"\r\n                          (valueChange)=\"searchCustomer($event); cdRef.detectChanges()\"\r\n                          (nzVisibleChange)=\"onDropdownVisibleChange($event)\"\r\n                          nz-dropdown\r\n                          [nzDropdownMenu]=\"menuChooseCustomer\"\r\n                          [nzTrigger]=\"customerType !== 1 ? 'click' : null\"\r\n                          #search\r\n                          (keydown)=\"onKeyDown($event, search.value, customerType)\">\r\n                        </ewa-input-group>\r\n                        <nz-dropdown-menu [hidden]=\"customerType === 1\" #menuChooseCustomer=\"nzDropdownMenu\">\r\n                          <ul class=\"customer-list\" nz-menu nzSelectable style=\"max-height: 300px; overflow-y: auto;\">\r\n                            <li nz-menu-item *ngIf=\"customerList.length === 0\" style=\"pointer-events: none; opacity: 0.6; text-align: center\">\r\n                              {{'No data!' | translate}}\r\n                            </li>\r\n                            <ng-container *ngIf=\"customerList.length > 0\">\r\n                              <li nz-menu-item\r\n                                [class.active]=\"selectedBill.getIdPartner() === item._id\"\r\n                                (click)=\"changeCustomer(item._id); handleGetNewDenominations()\"\r\n                                *ngFor=\"let item of customerList;\">\r\n                                {{ item.name }} - {{ item.phone }}\r\n                              </li>\r\n                            </ng-container>\r\n                          </ul>\r\n                        </nz-dropdown-menu>\r\n                      </div>\r\n                      <div style=\"padding: 8px 6.5px\" class=\"comp-67ea525d1986f118d9c9c45a\">\r\n                        <!-- Chọn kiểu khách hàng -->\r\n                        <nz-radio-group nzName=\"radiogroup\"\r\n                          [(ngModel)]=\"customerType\"\r\n                          (ngModelChange)=\"changeCustomerType($event)\">\r\n                          <label nz-radio [nzValue]=\"1\">{{'Retail customer' | translate}}</label>\r\n                          <label nz-radio [nzValue]=\"2\">{{'Member' | translate}}</label>\r\n                          <label nz-radio [nzValue]=\"3\">{{'Search customer' | translate}}</label>\r\n                        </nz-radio-group>\r\n                        <!-- Nút thêm khách hàng -->\r\n                        <ewa-button\r\n                          [btn_content]=\"'Add customer' | translate\"\r\n                          style=\"--width: 100%; margin-top: 2px; --color-icon: var(--ion-color-vh-green)\"\r\n                          (click)=\"showDrawerAddCustomer = true\"\r\n                          _id=\"67ea525d1986f118d9c9c45a\" _name=\"Button add customer\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67ea503e1a4f9300a77bf782\">\r\n                  <ewa-frame-blank style=\"--width: 265px;--min-height: 246px;--background-color: #ffffff; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame method payment\">\r\n                    <div class=\"grid-67ea503e1a4f9300a77bf782\">\r\n                      <div *ngFor=\"let item of listPaymentMethod\" class=\"comp-67ea546d15c6cfea44bb6934\">\r\n                        <ewa-frame-blank\r\n                          (click)=\"onChangePaymentType(item.value)\"\r\n                          [style.--border]=\"selectedBill.getPaymentType() === item.value ? '1px solid var(--ion-color-vh-green)' : '1px solid #c4cdd5'\"\r\n                          style=\"--width: 124px;--min-height: 65px;--background-color: #ffffff; --border-radius: 5px\"\r\n                          _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame method\"\r\n                        >\r\n                          <div class=\"grid-67ea546d15c6cfea44bb6934\">\r\n                            <div class=\"comp-67ea5774a2a31f941fbae3e9\">\r\n                              <ewa-image [image_url]=\"item.image\" _id=\"67ea5774a2a31f941fbae3e9\" _name=\"Image method\">\r\n                              </ewa-image>\r\n                            </div>\r\n                            <div *ngIf=\"selectedBill.getPaymentType() === item.value\" class=\"comp-67ea5640a751eb65991126b7\">\r\n                              <ewa-icon style=\"--background-color: var(--ion-color-vh-green)\" _id=\"67ea5640a751eb65991126b7\" _name=\"Icon check\">\r\n                              </ewa-icon>\r\n                            </div>\r\n                            <div class=\"comp-67ea57ae2a791d425fa557c6\">\r\n                              <ewa-text [text_content]=\"item.name\" _id=\"67ea57ae2a791d425fa557c6\" _name=\"Method name\">\r\n                              </ewa-text>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67ea505ed058023fa59e97f2\">\r\n                  <ewa-frame-blank style=\"--width: 328px;--min-height: 415px;--background-color: #ffffff; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame info payment\">\r\n                    <div class=\"grid-67ea505ed058023fa59e97f2\">\r\n                      <div class=\"comp-67ea593a95d977dd5bf23100\">\r\n                        <!-- Cộng tiền -->\r\n                        <ewa-frame-blank style=\"--width: 312px;--min-height: 40px;--background-color: #f4f6f8; --border-radius: 5px; --border: 1px solid #c4cdd5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame total amount\">\r\n                          <div class=\"grid-67ea593a95d977dd5bf23100\">\r\n                            <div class=\"comp-67ea5c8ca9ec1f0110a2c2b2\">\r\n                              <ewa-text\r\n                                [text_content]=\"('SubTotal' | translate) + ' (' + getTotalFood() +')'\"\r\n                                style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Total amount\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67ea5cb9ff80f4113815c826\">\r\n                              <ewa-text\r\n                                [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getSubTotal())\"\r\n                                style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Total amount value\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                      <!-- Tổng -->\r\n                      <div class=\"comp-67ea5d370d0a93df27c6b5fe\">\r\n                        <ewa-frame-blank\r\n                          style=\"--width: 312px;--min-height: 40px;--background-color: var(--ion-color-vh-green-lighter); --border-radius: 5px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                          _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame can thanh toan\"\r\n                        >\r\n                          <div class=\"grid-67ea5d370d0a93df27c6b5fe\">\r\n                            <div class=\"comp-67ea5d37f77d1b32ec066852\">\r\n                              <ewa-text\r\n                                [text_content]=\"'Need to pay' | translate\"\r\n                                style=\"--width: 120px; --color-content: #212b35; --font-size-content: 14px\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Can thanh toan\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67ea5d37f44a2f772d08896b\">\r\n                              <ewa-text\r\n                                [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getTotalATax())\"\r\n                                style=\"--width: 161px; --color-content: #000000; --font-size-content: 14px;--font-weight-content: 700; --text-align-content: right\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Can thanh toan value\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                      <!-- Chọn tài khoản thanh toán -->\r\n                      <div style=\"grid-area: 3 / 1 / auto / span 2; padding: 0 10px; display: flex; justify-content: space-between;\" *ngIf=\"selectedBill.getPaymentType() === 3\">\r\n                        <div style=\"margin-top: 10px\">\r\n                          <ewa-text\r\n                            style=\"--width: 100%; --color-content: #3b4661; --font-size-content: 14px\"\r\n                            [text_content]=\"'Select account' | translate\"\r\n                            _id=\"67e618c0120183314f4974f2\" _name=\"Hình thức thanh toán\"\r\n                          >\r\n                          </ewa-text>\r\n                        </div>\r\n                        <ewa-select\r\n                          *ngIf=\"listWallet.length\"\r\n                          style=\"--width: 100%\"\r\n                          [(ngModel)]=\"current_id_wallet\"\r\n                          (ngModelChange)=\"changeIdWallet($event)\"\r\n                          [placeholder]=\"'Select account' | translate\"\r\n                          _id=\"67ff241e7d9f199ec9c9f551\" _name=\"Select thue\"\r\n                        >\r\n                            <ewa-option\r\n                              *ngFor=\"let item of listWallet\"\r\n                              [label]=\"item.label\"\r\n                              [value]=\"item.value\"\r\n                            ></ewa-option>\r\n                        </ewa-select>\r\n                      </div>\r\n                      <!-- Giảm giá -->\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_discount')\" class=\"comp-67ea642f64630189e5378624\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Discount value' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Discount\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_discount')\" class=\"comp-67ea6433cdae15f67e492f18\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscount())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Discount value\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                       <!-- Chiết khấu -->\r\n                      <div *ngIf=\"selectedBill.getDiscountBill()\" class=\"comp-67ea6487ad5241b17b7f6be3\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Discount' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Chiet khau\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"selectedBill.getDiscountBill()\" class=\"comp-67ea64a06c00e269e9d4252e\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountBill())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Chiet khau value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <!-- Thanh toán phiếu -->\r\n                      <div *ngIf=\"selectedBill.getDiscountCoupon()\" class=\"comp-67ea64b4d62fd5daeac2a257\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Coupon payment' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Thanh toan phieu\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"selectedBill.getDiscountCoupon()\" class=\"comp-67ea64d2131228366faf17f4\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountCoupon())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Thanh toan phieu value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                       <!-- Thanh toán điểm -->\r\n                      <div *ngIf=\"selectedBill.getDiscountPoint()\" class=\"comp-67ea661d2a30377a4dfba2c4\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Point payment' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Thanh toan diem\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"selectedBill.getDiscountPoint()\" class=\"comp-67ea664482d5a851e1d4b2a9\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountPoint())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Thanh toan diem value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <!-- Phí -->\r\n                      <div class=\"comp-67ea6684ee984eb98444da89\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Fee' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Phi\"\r\n                          >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67ea6697b9182b77c9965502\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getFee())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Phi value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <!-- Thuế -->\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_tax')\" class=\"comp-67ea66b18539c0ee28b5ef72\">\r\n                        <ewa-frame-blank style=\"--width: 312px;--min-height: 20px;--background-color: #ffffff; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame thue\">\r\n                          <div class=\"grid-67ea66b18539c0ee28b5ef72\">\r\n                            <div class=\"comp-67ea66b278a88e03663faf20\">\r\n                              <ewa-text\r\n                                style=\"--width: 59px;--color-content: #3b4661; --font-size-content: 14px\"\r\n                                [text_content]=\"'Tax' | translate\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Thue\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67ea66b22c2fac0568698f64\">\r\n                              <ewa-text\r\n                                [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getTaxValue())\"\r\n                                style=\"--width: 138px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Thue value\">\r\n                              </ewa-text>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                      <!-- Thanh toán -->\r\n                      <div style=\"margin-left: 8px;margin-top: 10.9602px;grid-area: 10 / 1 / auto / span 2;\">\r\n                        <ewa-frame-blank style=\"--width: 312px;--min-height: 35px;--background-color: #ffffff; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame khach tra\">\r\n                          <div class=\"grid-67ea5d961aaf0bd2af6996f7\">\r\n                            <div class=\"comp-67ea5d967acbcd58e9e8ea28\">\r\n                              <ewa-text\r\n                                [text_content]=\"'Pay' | translate\"\r\n                                style=\"--width: 99px;--color-content: #3b4661; --font-size-content: 14px\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Khach tra\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67ea5dc656b72fcfeab0f7fd\">\r\n                              <ewa-input-group\r\n                                style=\"--height: 35px; --color: var(--ion-color-vh-green)\"\r\n                                [ewaStyle]=\"{'input-group__right-content': {'color': 'var(--ion-color-vh-green)'}}\"\r\n                                [disabled]=\"!debt || selectedBill.getPaymentType() == 2\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getPayment())\"\r\n                                _id=\"67ea5dc656b72fcfeab0f7fd\" _name=\"Input thanh toán\"\r\n                                class=\"payment-price\" id=\"payment-price\" (blur)=\"updatePayment();\"\r\n                              >\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                      <!-- Nợ lại -->\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_rest')\" style=\"margin-left: 8px;margin-top: 9px;display: block;grid-area: 11 / 1;\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Rest' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Tien thua\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_rest')\" style=\"margin-left: 155px;margin-top: 9px;grid-area: 11/ 1 / auto / span 2;\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit_symbol(selectedBill.getTotalATax() - selectedBill.getPayment())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Tien thua value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <!-- Tiền khách đưa -->\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_cash')\" class=\"comp-67ea5d961aaf0bd2af6996f7\">\r\n                        <ewa-frame-blank style=\"--width: 312px;--min-height: 35px;--background-color: #ffffff; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame khach tra\">\r\n                          <div class=\"grid-67ea5d961aaf0bd2af6996f7\">\r\n                            <div class=\"comp-67ea5d967acbcd58e9e8ea28\">\r\n                              <ewa-text\r\n                                [text_content]=\"'cash' | translate\"\r\n                                style=\"--width: 99px;--color-content: #3b4661; --font-size-content: 14px\"\r\n                                _id=\"67e618c0120183314f4974f2\" _name=\"Khach tra\"\r\n                              >\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-67ea5dc656b72fcfeab0f7fd\">\r\n                              <ewa-input-group\r\n                                style=\"--height: 35px; --color: var(--ion-color-vh-green)\"\r\n                                [ewaStyle]=\"{'input-group__right-content': {'color': 'var(--ion-color-vh-green)'}}\"\r\n                                [disabled]=\"selectedBill.getPaymentType() == 2\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(invoice_cash)\"\r\n                                _id=\"67ea5dc656b72fcfeab0f7fd\" _name=\"Input khach tra\"\r\n                                class=\"customerPay\" (blur)=\"updateCash()\"\r\n                              >\r\n                              </ewa-input-group>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                      <!-- Tiền thối lại -->\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_cash')\" class=\"comp-67ea6a1acca223394ffadf91\">\r\n                        <ewa-text\r\n                          [text_content]=\"'Change' | translate\"\r\n                          style=\"--width: 120px; --color-content: #3b4661; --font-size-content: 14px\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Tien thua\"\r\n                        >\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div *ngIf=\"vhAuth.localStorageGET('show_cash')\" class=\"comp-67ea6a2dfed6f07abd6c85c4\">\r\n                        <ewa-text\r\n                          [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getExcessCash())\"\r\n                          style=\"--width: 161px; --color-content: #3b4661; --font-size-content: 14px; --text-align-content: right\"\r\n                          _id=\"67e618c0120183314f4974f2\" _name=\"Tien thua value\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"comp-67ea50c1af3babd0001fe454\">\r\n                  <ewa-frame-blank style=\"--width: 274px;--min-height: 397px;--background-color: #f2f2f2; --border-radius: 5px\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame select amount\">\r\n                    <div *ngIf=\"selectedBill.getPaymentType() !== 2\" class=\"grid-67ea50c1af3babd0001fe454\">\r\n                      <div *ngFor=\"let amount of suggestedDenominations\" class=\"comp-67ea50f392b75a9dff4ff42b\">\r\n                        <ewa-button\r\n                          style=\"--width: 100px; --height: 35px; --border-radius: 5px; --color-content: #000000\"\r\n                          [btn_content]=\"vhAlgorithm.vhcurrencyunit(amount)\"\r\n                          [style.--background-color]=\"amount === selectedBill.getCash() ? 'var(--ion-color-vh-green-light)' : '#ffffff'\"\r\n                          (click)=\"selectCash(amount)\"\r\n                          _id=\"67e627d9feb38a60dee22dac\" _name=\"Amount select\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div *ngIf=\"vhAuth.localStorageGET('show_confirm_pay')\" class=\"comp-67ea4f40711565c56a05f540\">\r\n            <ewa-button\r\n              style=\"--width: 918px; --background-color: var(--ion-color-vh-green)\"\r\n              id=\"btn-payment\"\r\n              (click)=\"$event.stopPropagation();showConfirm(popconfirmRef)\"\r\n              nz-button nzType=\"text\" nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n              [disabled]=\"!selectedBill.getInvoiceDetail().length\"\r\n              nzPopconfirmTitle=\"{{'Pay & Print' | translate}}?\"\r\n              (nzOnConfirm)=\"onSave.emit()\"\r\n              [btn_content]=\"('Confirm payment' | translate)\"\r\n              _id=\"67ea4f40711565c56a05f540\" _name=\"Button payment\"\r\n              #popconfirmRef=\"nzPopconfirm\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n          <div *ngIf=\"!vhAuth.localStorageGET('show_confirm_pay')\" class=\"comp-67ea4f40711565c56a05f540\">\r\n            <ewa-button\r\n              style=\"--width: 918px; --background-color: var(--ion-color-vh-green)\"\r\n              id=\"btn-payment\"\r\n              (click)=\"onSave.emit()\"\r\n              [disabled]=\"!selectedBill.getInvoiceDetail().length\"\r\n              [btn_content]=\"('Confirm payment' | translate)\"\r\n              _id=\"67ea4f40711565c56a05f540\" _name=\"Button payment\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\n\r\n@Component({\r\n  selector: 'app-modal-select-label-print',\r\n  templateUrl: './modal-select-label-print.component.html',\r\n  styleUrls: ['./modal-select-label-print.component.scss']\r\n})\r\nexport class ModalSelectLabelPrintComponent extends CafeFnbUI {\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  listLabelPrint = []; // Danh sách món ăn có thể in tem\r\n  listLabelCanPrint = []; // Danh sách món ăn được chọn để in tem\r\n\r\n  ngOnInit(): void {\r\n    this.selectedBill.getInvoiceDetail().forEach((element, index) => {\r\n      if ([1, 4, 5].includes(element.ptype))\r\n        this.listLabelPrint.push({ ...element, index: index });\r\n    });\r\n  }\r\n\r\n  checkAllLabel(ev: any) {\r\n    if (ev.length) {\r\n      this.listLabelCanPrint = this.listLabelPrint.map(item => ({\r\n        ...item,\r\n        quantity: 0\r\n      }));\r\n    } else {\r\n      this.listLabelCanPrint = [];\r\n    }\r\n  }\r\n\r\n  selectFoodToPrint(ev, item) {\r\n    if (ev.length) {\r\n      const newItem = { ...item, quantity: 0 };\r\n      this.listLabelCanPrint.push(newItem);\r\n    }\r\n    else {\r\n      this.listLabelCanPrint = this.listLabelCanPrint.filter(i => i._id !== item._id);\r\n    }\r\n  }\r\n\r\n  isLabelSelected(itemId: string): boolean {\r\n    return this.listLabelCanPrint.some(label => label._id === itemId);\r\n  }\r\n\r\n  getQuantityFromListLabelCanPrint(id: string): number {\r\n    const found = this.listLabelCanPrint.find(item => item._id === id);\r\n    return found?.quantity ?? 0;\r\n  }\r\n\r\n  updateQuantityInListLabelCanPrint(id: string, quantity: number): void {\r\n    const found = this.listLabelCanPrint.find(item => item._id === id);\r\n    if (found) {\r\n      found.quantity = quantity;\r\n    }\r\n  }\r\n\r\n  checkCanClickToPrint(): boolean {\r\n    return this.listLabelCanPrint.some(item => item.quantity > 0);\r\n  }\r\n\r\n  handlePrintLabel() {\r\n    const itemsToPrint = this.listLabelCanPrint.filter(item => item.quantity > 0);\r\n    this.list_selected_dishs = itemsToPrint;\r\n  }\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit()\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-680f3e2053c4b4df25b9c681\">\r\n      <ewa-block-hover style=\"--width: 780px;--min-height: 100%; --background-color: #ffffff;\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"in-lai-tem\">\r\n        <div class=\"grid-680f3e2053c4b4df25b9c681\">\r\n          <div class=\"comp-680f3e99a8c2184584fa9134\">\r\n            <ewa-frame-blank style=\"--width: 780px; --min-height: 48px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"header\">\r\n              <div class=\"grid-680f3e99a8c2184584fa9134\">\r\n                <div class=\"comp-680f3e9a3c6b1678bcdded19\">\r\n                  <ewa-icon _id=\"67e7667044587fc691f851be\" _name=\"close-icon\"\r\n                    (click)=\"onClose.emit()\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-680f3e63feb221089c45c6b0\">\r\n            <ewa-frame-blank style=\"--width: 780px; --min-height: 300px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"body\">\r\n              <div class=\"grid-680f3e63feb221089c45c6b0\">\r\n                <div class=\"comp-680f3e63fd4007a73811e8ab\">\r\n                  <ewa-frame-blank style=\"--width: 97.1129%; --min-height: 40px; --background-color: transparent\" _id=\"680f40219ae52ee5dc9eac04\" _name=\"main-header\">\r\n                    <div class=\"grid-680f3e63fd4007a73811e8ab\">\r\n                      <div class=\"comp-680f3f0f91267fd28fa259e3\">\r\n                        <ewa-checkbox\r\n                          [data_list]=\"[{label: 'In tem' | translate, value: 'all', isSelect: listLabelCanPrint.length === listLabelPrint.length}]\"\r\n                          (valueChange)=\"checkAllLabel($event)\"\r\n                          _id=\"680f3f0f91267fd28fa259e3\" _name=\"chk-in-tem\"\r\n                        >\r\n                        </ewa-checkbox>\r\n                      </div>\r\n                      <div class=\"comp-680f3e63d8158fcab0fe0e81\">\r\n                        <ewa-text [text_content]=\"listLabelPrint.length + ' ' + ('item' | translate)\" _id=\"680f3e63d8158fcab0fe0e81\" _name=\"so-luong-mat-hang\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div *ngIf=\"listLabelPrint.length > 0\" class=\"comp-680f4006738fd6e28d538970\">\r\n                  <ewa-frame-blank style=\"--width: 97.2973%; --min-height: 220px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"main-list\">\r\n                    <div class=\"grid-680f4006738fd6e28d538970\">\r\n                      <div *ngFor=\"let item of listLabelPrint\" class=\"comp-680f40219ae52ee5dc9eac04\">\r\n                        <ewa-frame-blank _id=\"680f40219ae52ee5dc9eac04\" _name=\"item\">\r\n                          <div class=\"grid-680f40219ae52ee5dc9eac04\">\r\n                            <div class=\"comp-680f4022e2d4aed662a93080\">\r\n                              <ewa-checkbox\r\n                                [data_list]=\"[{label: item.name, value: item._id, isSelect: isLabelSelected(item._id)}]\"\r\n                                style=\"--border-color-button-checked: var(--ion-color-vh-green);--background-color-button-checked: var(--ion-color-vh-green);\"\r\n                                (valueChange)=\"selectFoodToPrint($event, item)\"\r\n                                _id=\"680f4022e2d4aed662a93080\" _name=\"chk-mon-an\"\r\n                              >\r\n                              </ewa-checkbox>\r\n                            </div>\r\n                            <div class=\"comp-680f409b488ddde70e30af93\">\r\n                              <ewa-input-number\r\n                                [min]=\"0\"\r\n                                [max]=\"item.quantity\"\r\n                                [disabled]=\"!isLabelSelected(item._id)\"\r\n                                [ngModel]=\"getQuantityFromListLabelCanPrint(item._id)\"\r\n                                (ngModelChange)=\"updateQuantityInListLabelCanPrint(item._id, $event)\"\r\n                                _id=\"680f409b488ddde70e30af93\" _name=\"input-so-luong\"\r\n                              >\r\n                              </ewa-input-number>\r\n                            </div>\r\n                            <div class=\"comp-680f418aa333fd07f11a5e4f\">\r\n                              <ewa-text [text_content]=\"('Price' | translate) + ': ' + vhAlgorithm.vhcurrencyunit(item.price)\" _id=\"680f418aa333fd07f11a5e4f\" _name=\"gia\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-680f402278ff511b39c1d897\">\r\n                              <ewa-text [text_content]=\"('Đơn vị tính' | translate) + ': ' + productService.getUnit(item.units,item.ratio)\" _id=\"680f402278ff511b39c1d897\" _name=\"don-vi-tinh\">\r\n                              </ewa-text>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-680f3e78c1a077c00dc6a3b6\">\r\n            <ewa-button\r\n              style=\"--width: 780px\"\r\n              [disabled]=\"!checkCanClickToPrint()\"\r\n              [style.--opacity]=\"!checkCanClickToPrint() ? '0.5' : 1\"\r\n              [style.--cursor]=\"!checkCanClickToPrint() ? 'not-allowed' : 'pointer'\"\r\n              style=\"--background-color: var(--ion-color-vh-green);\"\r\n              (click)=\"handlePrintLabel()\"\r\n              _id=\"680f3e78c1a077c00dc6a3b6\" _name=\"btn-xac-nhan-in-lai\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-other-discount',\r\n  templateUrl: './other-discount.component.html',\r\n  styleUrls: ['./other-discount.component.scss']\r\n})\r\nexport class OtherDiscountComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  coupon = '';\r\n\r\n  ngOnInit(): void {\r\n    this.value_discount_point = this.selectedBill.getUsePoint();\r\n  }\r\n\r\n  get max_point_usable() {\r\n    return Math.min(this.point_validity, ((this.selectedBill.getTotal() * this.customer_class.payment.points) / this.customer_class.payment.money) + this.value_discount_point);\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"updateServiceTime(); onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67e65a542802c48fdf431e8c\">\r\n      <ewa-block-hover style=\"--width: 650px; --min-height: 100%; --background-color: #ffffff; --border-radius: 4px\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"them-thanh-toan-khac\">\r\n        <div class=\"grid-67e65a542802c48fdf431e8c\">\r\n          <div class=\"comp-6800759e0530910013286a40\">\r\n            <ewa-frame-blank style=\"--width: 650px; --min-height: 48px\" _id=\"67e7666f1e58b39798e4d8ee\" _name=\"header\">\r\n              <div class=\"grid-6800759e0530910013286a40\">\r\n                <div class=\"comp-6800759e4bbaf97f98c69528\">\r\n                  <ewa-text style=\"--width: 362px;\" [text_content]=\"'Other payment' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"title\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-6800759eb1de0913c18304b5\">\r\n                  <ewa-icon (click)=\"updateServiceTime(); onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"close-icon\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <!-- Tiêu đề -->\r\n          <div class=\"comp-68007b5ebadf1b96b97e0fe3\">\r\n            <ewa-text [text_content]=\"'Coupon' | translate\" _id=\"68007b5ebadf1b96b97e0fe3\" _name=\"coupon title\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Nhập mã coupon -->\r\n          <div class=\"comp-68007c3acc2ed2e33cc96c12\">\r\n            <ewa-input-group\r\n              id=\"coupon\"\r\n              [(ngModel)]=\"coupon\"\r\n              [placeholder]=\"'Enter code' | translate\"\r\n              _id=\"68007c3acc2ed2e33cc96c12\" _name=\"input-coupon\"\r\n            >\r\n            </ewa-input-group>\r\n          </div>\r\n          <!-- Nút thêm -->\r\n          <div class=\"comp-68007c724cfe9f8a1a7f4199\">\r\n            <ewa-button\r\n              (click)=\"getDiscountOfCoupon(coupon)\"\r\n              [btn_content]=\"'Confirm' | translate\"\r\n              style=\"--height: 33px; --background-color: var(--ion-color-vh-green);\"\r\n              _id=\"68007c724cfe9f8a1a7f4199\" _name=\"btn-add-coupon\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n          <!-- Giá trị -->\r\n          <div class=\"comp-68007cd39a96c6ec69e97afd\">\r\n            <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountCoupon())\" _id=\"68007cd39a96c6ec69e97afd\" _name=\"price-coupon\">\r\n            </ewa-text>\r\n          </div>\r\n          <!-- Danh sách coupon -->\r\n          <div class=\"comp-68007da38a149759f35edf86\">\r\n            <ewa-frame-blank _id=\"68007da38a149759f35edf86\" _name=\"list-coupon\">\r\n              <div class=\"grid-68007da38a149759f35edf86\">\r\n                <div *ngFor=\"let item of product_codes\" class=\"comp-68007e18f9a983ffcfda1b33\">\r\n                  <ewa-button [btn_content]=\"item.code\" (clickIcon)=\"onCloseProductCode(item)\" _id=\"68007e18f9a983ffcfda1b33\" _name=\"coupon-item\">\r\n                  </ewa-button>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <!-- Điểm -->\r\n          <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <!-- Điểm tích lũy -->\r\n            <div class=\"comp-6800804c92857c5036b2ed81\">\r\n              <ewa-text [text_content]=\"'Accumulated points' | translate\" _id=\"6800804c92857c5036b2ed81\" _name=\"diem-tich-luy\">\r\n              </ewa-text>\r\n            </div>\r\n            <!-- Nhập điểm -->\r\n            <div class=\"comp-680080eda8fad373bbc98f4d\">\r\n              <ewa-input-number\r\n                [value]=\"value_discount_point\"\r\n                (valueChange)=\"calculatePoint2Money($event)\"\r\n                [min]=\"0\"\r\n                [max]=\"max_point_usable\"\r\n                _id=\"680080eda8fad373bbc98f4d\" _name=\"input-diem-tich-luy\"\r\n              >\r\n              </ewa-input-number>\r\n            </div>\r\n            <!-- Giá trị -->\r\n            <div class=\"comp-6800811e32f83b115673b170\">\r\n              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountPoint())\" _id=\"6800811e32f83b115673b170\" _name=\"price-diem-tich-luy\">\r\n              </ewa-text>\r\n            </div>\r\n             <!-- Tỷ lệ quy đổi điểm -->\r\n            <div class=\"comp-680081557d2eec60715fa414\">\r\n              <ewa-text\r\n                [text_content]=\"('Conversion rate' | translate) + ': ' + customer_class.payment.points + ' Điểm = ' + vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)\"\r\n                _id=\"680081557d2eec60715fa414\" _name=\"ti-le-quy-doi\"\r\n              >\r\n              </ewa-text>\r\n            </div>\r\n            <div class=\"comp-680081aa904bceff50921c1f\">\r\n              <ewa-text\r\n                [text_content]=\"('Current accumulated points' | translate) + ': ' + point_validity\"\r\n                _id=\"680081aa904bceff50921c1f\" _name=\"diem-tich-luy-hien-tai\"\r\n              >\r\n              </ewa-text>\r\n            </div>\r\n            <div class=\"comp-68007d5d7d82e5fb330a8aaa\">\r\n              <ewa-text [text_content]=\"'Total discount' | translate\" _id=\"68007d5d7d82e5fb330a8aaa\" _name=\"tong-giam\">\r\n              </ewa-text>\r\n            </div>\r\n            <div class=\"comp-68007d7a7b73c1457f1d42cd\">\r\n              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getDiscountOther())\" _id=\"68007d7a7b73c1457f1d42cd\" _name=\"price-tong-giam\">\r\n              </ewa-text>\r\n            </div>\r\n          </ng-container>\r\n          <div class=\"comp-68007d096fb301b583e8576e\">\r\n            <ewa-button\r\n              [btn_content]=\"'Cancel' | translate\"\r\n              style=\"--width: 325px; --height: 37px;--border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\"\r\n              (click)=\"updateServiceTime(); onClose.emit();\"\r\n              _id=\"67e766e273c6f421a5caa29c\" _name=\"Button huy\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n          <div class=\"comp-68007d09d269c6371ef9e6b9\">\r\n            <ewa-button\r\n              [btn_content]=\"'OK' | translate\"\r\n              style=\"--width: 325px; --height: 37px; --background-color: var(--ion-color-vh-green);\"\r\n              (click)=\"updateServiceTime(); onSave.emit();\"\r\n              _id=\"67e766e3f5f968cab2e3e608\" _name=\"Button ok\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-product-gift-type7',\r\n  templateUrl: './product-gift-type7.component.html',\r\n  styleUrls: ['./product-gift-type7.component.scss']\r\n})\r\nexport class ProductGiftType7Component extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.product_gift_type7)\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-6800d4a0715149588530471a\">\r\n      <ewa-block-hover style=\"--min-height: 100%\" _id=\"6800d4a0715149588530471a\" _name=\"chon-qua-tang\">\r\n        <div class=\"grid-6800d4a0715149588530471a\">\r\n          <div class=\"comp-6801abbe752ddb13ba806922\">\r\n            <ewa-frame-blank style=\"--width: 896px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\">\r\n              <div class=\"grid-6801abbe752ddb13ba806922\">\r\n                <div class=\"comp-6801abbec1cd2787ae4859c9\">\r\n                  <ewa-text style=\"--width: 547px\" [text_content]=\"'Select gift' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"chon-qua-tang\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-6801abbea5f26fd5d5f83f4c\">\r\n                  <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div style=\"grid-area: 2 / 1 / auto / span 2;\"  *ngFor=\"let item of product_gift_type7\">\r\n            <div class=\"main-content\" *ngIf=\"item.products_gift\">\r\n              <!-- Tên chương trình và Số lượng quà tặng được chọn -->\r\n              <div class=\"comp-6801abd80b04d7421f59030a\">\r\n                <ewa-text [text_content]=\"item.name\" _id=\"6801abd80b04d7421f59030a\" _name=\"Tên quà tặng\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-6801ad2f2f7523772dc4792f\">\r\n                <ewa-text [text_content]=\"('_Selected gift quantity' | translate) + ': ' + item.promotions_maximum\" _id=\"6801ad2f2f7523772dc4792f\" _name=\"Số lượng quà được chọn\">\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Danh sách sản phẩm tặng -->\r\n              <div class=\"comp-6800d58c619e193342b75692\">\r\n                <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6800d58c619e193342b75692\" _name=\"Danh sách quà tặng\">\r\n                  <div class=\"grid-6800d58c619e193342b75692\">\r\n                    <ng-container *ngFor=\"let data of item.products_gift\">\r\n                      <div style=\"border-bottom: 1px solid #dadfe4; padding: 8px 0\" class=\"comp-6801b0931d42408804a293aa\">\r\n                        <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6801b0931d42408804a293aa\" _name=\"gift-item\">\r\n                          <div class=\"grid-6801b0931d42408804a293aa\">\r\n                            <!-- Tên -->\r\n                            <div class=\"comp-6801b0b3608bbed878850593\">\r\n                              <ewa-text [text_content]=\"data.name\" _id=\"6801b0b3608bbed878850593\" _name=\"ten-mon-an\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <!-- Lô -->\r\n                            <ng-container *ngIf=\"data.lots\">\r\n                              <div class=\"comp-6801b2de196cedc4273fca34\">\r\n                                <ewa-text [text_content]=\"('Lot number' | translate) + ':'\" _id=\"6801b2de196cedc4273fca34\" _name=\"so-lo\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <div class=\"comp-6801b29d2cb45e6d2bbba38b\">\r\n                                <!-- <ewa-select [placeholder]=\"'Select product batch' | translate\" [(ngModel)]=\"data.id_lotproduct\" _id=\"6801b29d2cb45e6d2bbba38b\" _name=\"Select lo\">\r\n                                  <ewa-option\r\n                                    *ngFor=\"let element of data.lots\"\r\n                                    [label]=\"element.lot_number + ' - HSD: ' + (element.date_exp | date : 'dd/MM/yyyy')\"\r\n                                    [value]=\"element._id\">\r\n                                  </ewa-option>\r\n                                </ewa-select> -->\r\n                                <nz-select [nzDropdownStyle]=\"{ 'z-index': 9999 }\" nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                  [(ngModel)]=\"data.id_lotproduct\">\r\n                                  <nz-option *ngFor=\"let element of data.lots\"\r\n                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                    [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                              </div>\r\n                            </ng-container>\r\n                             <!-- Đơn vị -->\r\n                            <div class=\"comp-6801b0cba191285b758a6485\">\r\n                              <ewa-text [text_content]=\"productService.getUnit(data.units, data.ratio)\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                              </ewa-text>\r\n                            </div>\r\n                             <!-- Số lượng -->\r\n                            <div class=\"comp-6801b0fec537a839e2bdd423\">\r\n                              <ewa-input-number [(ngModel)]=\"data.quantity\" [min]=\"0\" [max]=\"data.quantity\" _id=\"6801b0fec537a839e2bdd423\" _name=\"input-so-luong\">\r\n                              </ewa-input-number>\r\n                            </div>\r\n                            <!-- Giá -->\r\n                            <div class=\"comp-6801b10fb7ee669a9be3bb98\">\r\n                              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price)\" _id=\"6801b10fb7ee669a9be3bb98\" _name=\"price\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-6801b224e61887d80c4421f1\">\r\n                              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price_origin)\" _id=\"6801b224e61887d80c4421f1\" _name=\"price_origin\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <!-- Chọn -->\r\n                            <div class=\"comp-6801b152295dac16ef449140\">\r\n                              <ewa-switch\r\n                                [(ngModel)]=\"data.choose\" [disabled]=\"checkDisableChooseProductGift(item) && !data.choose\"\r\n                                _id=\"6801b152295dac16ef449140\" _name=\"choose-gift\"\r\n                              >\r\n                              </ewa-switch>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                        <!-- Combo -->\r\n                        <ng-container *ngIf=\"data.ptype == 5\">\r\n                           <!-- Danh sách combo -->\r\n                          <div *ngFor=\"let combo of data.combos\" class=\"comp-6801b0931d42408804a293aa\">\r\n                            <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6801b0931d42408804a293aa\" _name=\"gift-item\">\r\n                              <div class=\"grid-6801b0931d42408804a293aa\">\r\n                                 <!-- Tên combo -->\r\n                                <div class=\"comp-6801b0b3608bbed878850593\">\r\n                                  <ewa-text [text_content]=\"'- ' + combo.name\" _id=\"6801b0b3608bbed878850593\" _name=\"ten-mon-an\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Lô -->\r\n                                <ng-container *ngIf=\"combo.lots\">\r\n                                  <div class=\"comp-6801b2de196cedc4273fca34\">\r\n                                    <ewa-text [text_content]=\"('Lot number' | translate) + ':'\" _id=\"6801b2de196cedc4273fca34\" _name=\"so-lo\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-6801b29d2cb45e6d2bbba38b\">\r\n                                    <!-- <ewa-select [placeholder]=\"'Select product batch' | translate\" [(ngModel)]=\"combo.id_lotproduct\" _id=\"6801b29d2cb45e6d2bbba38b\" _name=\"Select lo\">\r\n                                      <ewa-option\r\n                                        *ngFor=\"let element of combo.lots\"\r\n                                        [label]=\"element.lot_number + ' - HSD: ' + (element.date_exp | date : 'dd/MM/yyyy')\"\r\n                                        [value]=\"element._id\">\r\n                                      </ewa-option>\r\n                                    </ewa-select> -->\r\n                                    <nz-select [nzDropdownStyle]=\"{ 'z-index': 9999 }\" nzShowSearch [nzPlaceHolder]=\"'Select product batch' | translate\"\r\n                                      [(ngModel)]=\"combo.id_lotproduct\">\r\n                                      <nz-option *ngFor=\"let element of combo.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date : 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                    </nz-select>\r\n                                  </div>\r\n                                </ng-container>\r\n                                 <!-- Đơn vị -->\r\n                                <div class=\"comp-6801b0cba191285b758a6485\">\r\n                                  <ewa-text [text_content]=\"productService.getUnit(combo.units, combo.ratio)\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Số lượng -->\r\n                                <div class=\"comp-6801b0fec537a839e2bdd423\">\r\n                                  <ewa-text [text_content]=\"combo.quantity\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Giá -->\r\n                                <div class=\"comp-6801b10fb7ee669a9be3bb98\">\r\n                                  <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(combo.price)\" _id=\"6801b10fb7ee669a9be3bb98\" _name=\"price\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                        </ng-container>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </ewa-frame-blank>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"comp-6801adee6287dcc85e609087\">\r\n            <ewa-frame-blank style=\"--width: 896px; --min-height: 42px\" _id=\"67e766e2c68baeb37f60a663\" _name=\"bottom\">\r\n              <div class=\"grid-6801adee6287dcc85e609087\">\r\n                <div class=\"comp-6801adefeac37983aadfb18c\">\r\n                  <ewa-button style=\"--width: 448px; --height: 42px; --border-radius: 0; --border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\" (click)=\"onClose.emit();\" _id=\"67e766e273c6f421a5caa29c\" _name=\"btn-huy\">\r\n                  </ewa-button>\r\n                </div>\r\n                <div class=\"comp-6801adef0d07d3cafcbaf858\">\r\n                  <ewa-button style=\"--width: 448px; --height: 42px; --border-radius: 0; --background-color: var(--ion-color-vh-green);\" (click)=\"onSave.emit();\" _id=\"67e766e3f5f968cab2e3e608\" _name=\"btn-dong-y\">\r\n                  </ewa-button>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-product-gift',\r\n  templateUrl: './product-gift.component.html',\r\n  styleUrls: ['./product-gift.component.scss']\r\n})\r\nexport class ProductGiftComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  generateListProduct(item: any): string {\r\n    return item.products.map((data: any) => {\r\n      const unit = data.unit ? data.unit : this.productService.getUnit(data.units, data.ratio);\r\n      return `${data.name}(${unit}) x${data.quantity}`;\r\n    }).join('<br>');\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit();\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-6800d4a0715149588530471a\">\r\n      <ewa-block-hover style=\"--width: 896px;--min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"chon-qua-tang\">\r\n        <div class=\"grid-6800d4a0715149588530471a\">\r\n          <div class=\"comp-6801abbe752ddb13ba806922\">\r\n            <ewa-frame-blank style=\"--width: 896px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\">\r\n              <div class=\"grid-6801abbe752ddb13ba806922\">\r\n                <div class=\"comp-6801abbec1cd2787ae4859c9\">\r\n                  <ewa-text style=\"--width: 547px\" [text_content]=\"'Select gift' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\" _name=\"chon-qua-tang\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-6801abbea5f26fd5d5f83f4c\">\r\n                  <ewa-icon (click)=\"onClose.emit();\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div style=\"grid-area: 2 / 1 / auto / span 2;\"  *ngFor=\"let item of selectedBill.getInvoiceDetail()\">\r\n            <div class=\"main-content\" *ngIf=\"item.pmtype == 6\">\r\n              <!-- Tên chương trình và Số lượng quà tặng được chọn -->\r\n              <div class=\"comp-6801abd80b04d7421f59030a\">\r\n                <ewa-text [text_content]=\"item.name\" _id=\"6801abd80b04d7421f59030a\" _name=\"Tên quà tặng\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-6801ad2f2f7523772dc4792f\">\r\n                <ewa-text [text_content]=\"('_Selected gift quantity' | translate) + ': ' + item.promotions_maximum\" _id=\"6801ad2f2f7523772dc4792f\" _name=\"Số lượng quà được chọn\">\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Danh sách sản phẩm đã mua để được tặng -->\r\n              <div class=\"comp-6801ac4f01328e86e985ce90\">\r\n                <ewa-text [text_content]=\"('List of purchased products' | translate) + ':'\" _id=\"6801ac4f01328e86e985ce90\" _name=\"Danh sách sản phẩm mua\">\r\n                </ewa-text>\r\n              </div>\r\n              <div class=\"comp-6801ac7c815bdd5f9ed15972\">\r\n                <ewa-text\r\n                  [text_content]=\"generateListProduct(item)\"\r\n                  _id=\"6801ac7c815bdd5f9ed15972\"\r\n                  _name=\"Danh sách món ăn\">\r\n                </ewa-text>\r\n              </div>\r\n              <!-- Tiêu đề danh sách sản phẩm tặng -->\r\n              <div class=\"comp-6801accf9761a54c97e168d7\">\r\n                <ewa-text [text_content]=\"('List of gifted products' | translate) + ':'\" _id=\"6801accf9761a54c97e168d7\" _name=\"Danh sách sản phẩm tặng\">\r\n                </ewa-text>\r\n              </div>\r\n               <!-- Danh sách sản phẩm tặng -->\r\n              <div class=\"comp-6800d58c619e193342b75692\">\r\n                <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6800d58c619e193342b75692\" _name=\"Danh sách quà tặng\">\r\n                  <div class=\"grid-6800d58c619e193342b75692\">\r\n                    <ng-container *ngFor=\"let data of item.products_gift\">\r\n                      <div style=\"border-bottom: 1px solid #dadfe4; padding: 8px 0\" class=\"comp-6801b0931d42408804a293aa\">\r\n                        <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6801b0931d42408804a293aa\" _name=\"gift-item\">\r\n                          <div class=\"grid-6801b0931d42408804a293aa\">\r\n                            <!-- Tên -->\r\n                            <div class=\"comp-6801b0b3608bbed878850593\">\r\n                              <ewa-text [text_content]=\"data.name\" _id=\"6801b0b3608bbed878850593\" _name=\"ten-mon-an\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <!-- Lô -->\r\n                            <ng-container *ngIf=\"data.lots\">\r\n                              <div class=\"comp-6801b2de196cedc4273fca34\">\r\n                                <ewa-text [text_content]=\"('Lot number' | translate) + ':'\" _id=\"6801b2de196cedc4273fca34\" _name=\"so-lo\">\r\n                                </ewa-text>\r\n                              </div>\r\n                              <div class=\"comp-6801b29d2cb45e6d2bbba38b\">\r\n                                <!-- <ewa-select [placeholder]=\"'Select product batch' | translate\" [(ngModel)]=\"data.id_lotproduct\" _id=\"6801b29d2cb45e6d2bbba38b\" _name=\"Select lo\">\r\n                                  <ewa-option\r\n                                    *ngFor=\"let element of data.lots\"\r\n                                    [label]=\"element.lot_number + ' - HSD: ' + (element.date_exp | date : 'dd/MM/yyyy')\"\r\n                                    [value]=\"element._id\">\r\n                                  </ewa-option>\r\n                                </ewa-select> -->\r\n                                <nz-select [nzDropdownStyle]=\"{ 'z-index': 9999 }\" nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                  [(ngModel)]=\"data.id_lotproduct\">\r\n                                  <nz-option *ngFor=\"let element of data.lots\"\r\n                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                    [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                              </div>\r\n                            </ng-container>\r\n                             <!-- Đơn vị -->\r\n                            <div class=\"comp-6801b0cba191285b758a6485\">\r\n                              <ewa-text [text_content]=\"productService.getUnit(data.units, data.ratio)\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                              </ewa-text>\r\n                            </div>\r\n                             <!-- Số lượng -->\r\n                            <div class=\"comp-6801b0fec537a839e2bdd423\">\r\n                              <ewa-input-number [(ngModel)]=\"data.quantity\" [min]=\"0\" [max]=\"data.quantity\" _id=\"6801b0fec537a839e2bdd423\" _name=\"input-so-luong\">\r\n                              </ewa-input-number>\r\n                            </div>\r\n                            <!-- Giá -->\r\n                            <div class=\"comp-6801b10fb7ee669a9be3bb98\">\r\n                              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price)\" _id=\"6801b10fb7ee669a9be3bb98\" _name=\"price\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <div class=\"comp-6801b224e61887d80c4421f1\">\r\n                              <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(data.price_origin)\" _id=\"6801b224e61887d80c4421f1\" _name=\"price_origin\">\r\n                              </ewa-text>\r\n                            </div>\r\n                            <!-- Chọn -->\r\n                            <div class=\"comp-6801b152295dac16ef449140\">\r\n                              <ewa-switch\r\n                                [(ngModel)]=\"data.choose\" [disabled]=\"checkDisableChooseProductGift(item) && !data.choose\"\r\n                                _id=\"6801b152295dac16ef449140\" _name=\"choose-gift\"\r\n                              >\r\n                              </ewa-switch>\r\n                            </div>\r\n                          </div>\r\n                        </ewa-frame-blank>\r\n                        <!-- Combo -->\r\n                        <ng-container *ngIf=\"data.ptype == 5\">\r\n                           <!-- Danh sách combo -->\r\n                          <div *ngFor=\"let combo of data.combos\" class=\"comp-6801b0931d42408804a293aa\">\r\n                            <ewa-frame-blank style=\"--min-height: 100%\" _id=\"6801b0931d42408804a293aa\" _name=\"gift-item\">\r\n                              <div class=\"grid-6801b0931d42408804a293aa\">\r\n                                 <!-- Tên combo -->\r\n                                <div class=\"comp-6801b0b3608bbed878850593\">\r\n                                  <ewa-text [text_content]=\"'- ' + combo.name\" _id=\"6801b0b3608bbed878850593\" _name=\"ten-mon-an\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Lô -->\r\n                                <ng-container *ngIf=\"combo.lots\">\r\n                                  <div class=\"comp-6801b2de196cedc4273fca34\">\r\n                                    <ewa-text [text_content]=\"('Lot number' | translate) + ':'\" _id=\"6801b2de196cedc4273fca34\" _name=\"so-lo\">\r\n                                    </ewa-text>\r\n                                  </div>\r\n                                  <div class=\"comp-6801b29d2cb45e6d2bbba38b\">\r\n                                    <!-- <ewa-select [placeholder]=\"'Select product batch' | translate\" [(ngModel)]=\"combo.id_lotproduct\" _id=\"6801b29d2cb45e6d2bbba38b\" _name=\"Select lo\">\r\n                                      <ewa-option\r\n                                        *ngFor=\"let element of combo.lots\"\r\n                                        [label]=\"element.lot_number + ' - HSD: ' + (element.date_exp | date : 'dd/MM/yyyy')\"\r\n                                        [value]=\"element._id\">\r\n                                      </ewa-option>\r\n                                    </ewa-select> -->\r\n                                    <nz-select [nzDropdownStyle]=\"{ 'z-index': 9999 }\" nzShowSearch [nzPlaceHolder]=\"'Select product batch' | translate\"\r\n                                      [(ngModel)]=\"combo.id_lotproduct\">\r\n                                      <nz-option *ngFor=\"let element of combo.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date : 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                    </nz-select>\r\n                                  </div>\r\n                                </ng-container>\r\n                                 <!-- Đơn vị -->\r\n                                <div class=\"comp-6801b0cba191285b758a6485\">\r\n                                  <ewa-text [text_content]=\"productService.getUnit(combo.units, combo.ratio)\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Số lượng -->\r\n                                <div class=\"comp-6801b0fec537a839e2bdd423\">\r\n                                  <ewa-text [text_content]=\"combo.quantity\" _id=\"6801b0cba191285b758a6485\" _name=\"don-vi\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                                <!-- Giá -->\r\n                                <div class=\"comp-6801b10fb7ee669a9be3bb98\">\r\n                                  <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(combo.price)\" _id=\"6801b10fb7ee669a9be3bb98\" _name=\"price\">\r\n                                  </ewa-text>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                        </ng-container>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </ewa-frame-blank>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"comp-6801adee6287dcc85e609087\">\r\n            <ewa-frame-blank style=\"--width: 896px; --min-height: 42px\" _id=\"67e766e2c68baeb37f60a663\" _name=\"bottom\">\r\n              <div class=\"grid-6801adee6287dcc85e609087\">\r\n                <div class=\"comp-6801adefeac37983aadfb18c\">\r\n                  <ewa-button style=\"--width: 448px; --height: 42px; --border-radius: 0; --border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\" (click)=\"onClose.emit();\" _id=\"67e766e273c6f421a5caa29c\" _name=\"btn-huy\">\r\n                  </ewa-button>\r\n                </div>\r\n                <div class=\"comp-6801adef0d07d3cafcbaf858\">\r\n                  <ewa-button style=\"--width: 448px; --height: 42px; --border-radius: 0; --background-color: var(--ion-color-vh-green);\" (click)=\"onSave.emit();\" _id=\"67e766e3f5f968cab2e3e608\" _name=\"btn-dong-y\">\r\n                  </ewa-button>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-select-lot',\r\n  templateUrl: './select-lot.component.html',\r\n  styleUrls: ['./select-lot.component.scss']\r\n})\r\nexport class SelectLotComponent extends CafeFnbUI {\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit()\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb64dc6937d216018aa84b\">\r\n      <ewa-block-hover style=\"--width: 715px; --min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"tuy-chon-mon-an\">\r\n        <div *ngIf=\"choiceFood\" class=\"grid-67eb64dc6937d216018aa84b\">\r\n          <div class=\"comp-67eb6510ab2ec99566e7608a\">\r\n            <ewa-frame-blank style=\"--width: 715px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\">\r\n              <div class=\"grid-67eb6510ab2ec99566e7608a\">\r\n                <div class=\"comp-67eb6510fecc6e52ecf154a4\">\r\n                  <ewa-text style=\"--width: 547px\" [text_content]=\"'Select lot number' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-67eb65104534ceaa5ddd4c89\">\r\n                  <ewa-icon (click)=\"onClose.emit()\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"main-content\">\r\n            <!-- Chọn Lô -->\r\n            <ng-container *ngIf=\"choiceFood.lots\">\r\n              <div class=\"comp-67f9d5a46183f4eac7976998\">\r\n                <!-- Tìm kiếm lô -->\r\n                <ewa-input-group\r\n                  style=\"--width: 100%\"\r\n                  [placeholder]=\"'Find lot number' | translate\"\r\n                  (valueChange)=\"searchLot($event)\"\r\n                  _id=\"68007c3acc2ed2e33cc96c12\" _name=\"input-coupon\"\r\n                >\r\n                </ewa-input-group>\r\n              </div>\r\n              <div class=\"comp-67f9d78680eba9a6921288a3\" style=\"display: flex; flex-direction: column; gap: 8px\">\r\n                <!-- Danh sách lô để chọn -->\r\n                <div *ngFor=\"let item of choiceFood.lots\">\r\n                  <ewa-frame-blank style=\"--width: 657px; --min-height: 35px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-lo\">\r\n                    <div class=\"grid-67f9d78680eba9a6921288a3\">\r\n                      <div class=\"comp-67f9d7c3b3f0205187b51cb5\">\r\n                        <ewa-radio-button\r\n                          [(ngModel)]=\"choiceFood.id_lotproduct\"\r\n                          style=\"--background-color-button-checked: var(--ion-color-vh-green);--border-color-button-checked: var(--ion-color-vh-green);--border-color-button-unchecked: var(--ion-color-vh-green);\"\r\n                          [data_list]=\"[{label: item.lot_number, value: item._id, isSelect: choiceFood.id_lotproduct === item._id}]\"\r\n                          _id=\"67f9d7c3b3f0205187b51cb5\" _name=\"option-lo\"\r\n                        >\r\n                        </ewa-radio-button>\r\n                      </div>\r\n                      <div class=\"comp-67f9d871d54a66e6a463ebb0\">\r\n                        <ewa-text [text_content]=\"'NSX: ' + (item.date_mfg | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ngay-san-xuat\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67f9d89cd81dc74e054f8138\">\r\n                        <ewa-text [text_content]=\"'HSD: ' + (item.date_exp | date : 'dd/MM/yyyy')\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"han-su-dung\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-67f9d8a4f78541ec21fca9e1\">\r\n                        <ewa-text style=\"--text-align-content: right\" [text_content]=\"'Stock ' + (item.quantity_branch[id_branch] / choiceFood.ratio | number:'1.0-2') | translate\" _id=\"67f9d871d54a66e6a463ebb0\" _name=\"ton-kho\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n            <!-- Không có dữ liệu -->\r\n            <div *ngIf=\"!choiceFood.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n          </div>\r\n          <div class=\"comp-67eb95a49efecd8df6921afe\">\r\n            <ewa-button style=\"--width: 358px; --height: 56px; --border-radius: 0; --border: 1px solid var(--ion-color-vh-green); --background-color: transparent;--color-content: var(--ion-color-vh-green)\" (click)=\"onClose.emit();\" [btn_content]=\"'Cancel' | translate\" _id=\"67e766e273c6f421a5caa29c\" _name=\"Button huy\">\r\n            </ewa-button>\r\n          </div>\r\n          <div class=\"comp-67eb957ed138d61bc1bd9326\">\r\n            <ewa-button style=\"--width: 358px; --height: 56px; --border-radius: 0; --background-color: var(--ion-color-vh-green);\" (click)=\"onSave.emit()\" [btn_content]=\"'Add' | translate\" _id=\"67e766e3f5f968cab2e3e608\" _name=\"Button them\">\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { CafeFnbUI } from '../../../../cafe-fnb';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from '../../../../cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\n\r\n@Component({\r\n  selector: 'app-separate-table',\r\n  templateUrl: './separate-table.component.html',\r\n  styleUrls: ['./separate-table.component.scss']\r\n})\r\nexport class SeparateTableComponent extends CafeFnbUI {\r\n  @Input('prevPage') prevPage: string;\r\n\r\n  @Output() onClose = new EventEmitter<any>();\r\n  @Output() onSave = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n  }\r\n\r\n  foodToSeparate = []; // danh sách những món ăn để tách sang bàn khác\r\n  listFoodChecked = [];\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSeparateQuantityChange(item: any, enteredQuantity: number) {\r\n    const index = this.foodToSeparate.findIndex(i =>\r\n      i._id === item._id &&\r\n      JSON.stringify(i.toppings || []) === JSON.stringify(item.toppings || []) // match toppings if needed\r\n    );\r\n\r\n    // Remove if 0\r\n    if (enteredQuantity <= 0) {\r\n      if (index > -1) this.foodToSeparate.splice(index, 1);\r\n      return;\r\n    }\r\n\r\n    const itemClone = { ...item, quantity: enteredQuantity };\r\n\r\n    if (index > -1) {\r\n      this.foodToSeparate[index].quantity = enteredQuantity;\r\n    } else {\r\n      this.foodToSeparate.push(itemClone);\r\n    }\r\n  }\r\n\r\n  // Helper to get remaining quantity\r\n  getRemainingQuantity(item: any): number {\r\n    const match = this.foodToSeparate.find(i =>\r\n      i._id === item._id &&\r\n      JSON.stringify(i.toppings || []) === JSON.stringify(item.toppings || [])\r\n    );\r\n    return item.quantity - (match?.quantity || 0);\r\n  }\r\n\r\n  getSeparateQuantity(item: any): number {\r\n    const match = this.foodToSeparate.find(i =>\r\n      i._id === item._id &&\r\n      JSON.stringify(i.toppings || []) === JSON.stringify(item.toppings || [])\r\n    );\r\n    return match?.quantity || 0;\r\n  }\r\n\r\n  onSelectFood(event, item) {\r\n    const hasToppings = item.toppings && item.toppings.length > 0;\r\n\r\n    if (event.length > 0) {\r\n      this.listFoodChecked.push(item._id);\r\n\r\n      // 👉 Handle topping case: add full quantity to foodToSeparate\r\n      const index = this.foodToSeparate.findIndex(i =>\r\n        i._id === item._id &&\r\n        JSON.stringify(i.toppings || []) === JSON.stringify(item.toppings || [])\r\n      );\r\n\r\n      if (hasToppings) {\r\n        const fullItem = { ...item, quantity: item.quantity };\r\n\r\n        if (index > -1) {\r\n          this.foodToSeparate[index].quantity = item.quantity;\r\n        } else {\r\n          this.foodToSeparate.push(fullItem);\r\n        }\r\n      } else {\r\n        // Clean up foodToSeparate for non-topping items (if already present)\r\n        this.foodToSeparate = this.foodToSeparate.filter((food) =>\r\n          this.listFoodChecked.includes(food._id)\r\n        );\r\n      }\r\n    } else {\r\n      this.listFoodChecked = this.listFoodChecked.filter((idFood) => idFood !== item._id);\r\n      this.foodToSeparate = this.foodToSeparate.filter((food) =>\r\n        this.listFoodChecked.includes(food._id)\r\n      );\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////////////////////// Lấy tên các thông tin món ăn //////////////////////////////////////////////////////////////////////////\r\n  getNameImgFood(id_prod: string, id_subProd: string) {\r\n    let food = this.vhQueryCafe.getlocalProduct(id_prod);\r\n    let subFood = food.subs ? food.subs.find(item => item._id == id_subProd) : null;\r\n    return { name: `${food ? food.name : ''} ${subFood ? '(' + this.languageService.translate(subFood.name) + ')' : ''}`, img: food.img };\r\n  }\r\n  getNameFood(id_prod: string, id_subProd: string) {\r\n    let food = this.vhQueryCafe.getlocalProduct(id_prod);\r\n    let subFood: any;\r\n    if (id_subProd) subFood = food.subs.find(item => item._id == id_subProd);\r\n    return `${food ? food.name : ''} ${subFood ? '(' + subFood.name + ')' : ''}`;\r\n  }\r\n  getKindTopping(toppings: any[]): string {\r\n    let nameTopping: string = \"\";\r\n    toppings.forEach(topping => nameTopping += `${nameTopping.length ? \", \" : \"\"}${topping.quantity} ${this.getNameFood(topping.id_product, topping.id_subproduct)}`);\r\n    return nameTopping;\r\n  }\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\";\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity} ${item.name}`;\r\n      else subName += `${item.quantity} ${item.name}`;\r\n    });\r\n    return subName;\r\n  }\r\n\r\n  handleSeparate() {\r\n    const allEmpty = this.selectedBill.getInvoiceDetail().every(billItem => {\r\n      const remaining = this.getRemainingQuantity(billItem);\r\n      return remaining === 0;\r\n    });\r\n\r\n    this.foodToSeparate = this.foodToSeparate.filter((food) => food.quantity > 0);\r\n\r\n    if (allEmpty) {\r\n      this.vhComponent.showToast(2000, this.languageService.translate(\"Can not separate all dishes\"), \"alert-toast\");\r\n      return;\r\n    }\r\n\r\n    if (this.selectedBill.getIdTable() === '') {\r\n      this.vhComponent.showToast(2000, this.languageService.translate(\"No table selected\"), \"alert-toast\");\r\n      return;\r\n    }\r\n\r\n    this.router.navigate(['/cafe/cafe-fnb/choose-table'], { state: { action: 'separate-table', id_table: this.selectedBill.getIdTable(), foodToSeparate: this.foodToSeparate, prevPage: this.prevPage } });\r\n    this.onClose.emit();\r\n  }\r\n}\r\n","<div class=\"custom-dialog\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"onClose.emit()\"></div>\r\n\r\n  <div class=\"custom-dialog__content\">\r\n    <div class=\"comp-67eb64dc6937d216018aa84b\">\r\n      <ewa-block-hover style=\"--width: 780px; --min-height: 100%; --background-color: #ffffff\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"tach-don\">\r\n        <div class=\"grid-6806f076e757b7d86c2e4089\">\r\n          <div class=\"comp-6806f1635836d48af7aac205\">\r\n            <ewa-frame-blank style=\"--width: 780px; --min-height: 54px; --background-color: #dfe4e8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Header\">\r\n              <div class=\"grid-6806f1635836d48af7aac205\">\r\n                <div class=\"comp-6806f1634e91bb1b7202bab3\">\r\n                  <ewa-text style=\"--width: 390px\" [text_content]=\"'Separate table' | translate\" _id=\"67e76670c6c3f00f9b5a5f56\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-6806f1634e2a3b78506ee5ae\">\r\n                  <ewa-icon (click)=\"onClose.emit()\" _id=\"67e7667044587fc691f851be\" _name=\"Button Close\">\r\n                  </ewa-icon>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-6806f189f3bf5d4700fb3e9c\">\r\n            <ewa-frame-blank style=\"--width: 780px; --min-height: 400px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-table-food\">\r\n              <div class=\"grid-6806f189f3bf5d4700fb3e9c\">\r\n                <div class=\"comp-6806f1f03b5359139c358f85\">\r\n                  <ewa-frame-blank style=\"--width: 740px; --min-height: 40px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"header-table\">\r\n                    <div class=\"grid-6806f1f03b5359139c358f85\">\r\n                      <div class=\"comp-6806f25ea30bc1a9b5e2f630\">\r\n                        <ewa-text _id=\"6806f25ea30bc1a9b5e2f630\" _name=\"ten-mon\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-6806f275ec9fd97e829866cb\">\r\n                        <ewa-text _id=\"6806f275ec9fd97e829866cb\" _name=\"so-luong-con-lai\">\r\n                        </ewa-text>\r\n                      </div>\r\n                      <div class=\"comp-6806f28e6bee5910fc9793f8\">\r\n                        <ewa-text _id=\"6806f28e6bee5910fc9793f8\" _name=\"so-luong-tach\">\r\n                        </ewa-text>\r\n                      </div>\r\n                    </div>\r\n                  </ewa-frame-blank>\r\n                </div>\r\n                <div class=\"container\">\r\n                  <div *ngFor=\"let item of selectedBill.getInvoiceDetail(); index as i; trackBy:myTrackByFunction\" class=\"comp-6806f325aa2d8f619f32814b\">\r\n                    <ewa-frame-blank style=\"--width: 780px; --min-height: 62px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"item-food\">\r\n                      <div class=\"grid-6806f325aa2d8f619f32814b\">\r\n                        <div class=\"comp-6806f508dcf4f905a41eca6a\">\r\n                          <ewa-checkbox\r\n                            style=\"--border-color-button-checked: var(--ion-color-vh-green);--background-color-button-checked: var(--ion-color-vh-green);\"\r\n                            [data_list]=\"[{label: item.name, value: item._id, isSelect: listFoodChecked.includes(item._id)}]\"\r\n                            (valueChange)=\"onSelectFood($event, item)\"\r\n                            _id=\"6806f508dcf4f905a41eca6a\" _name=\"chk-mon-an\"\r\n                          >\r\n                          </ewa-checkbox>\r\n                        </div>\r\n                        <div class=\"comp-6806f4a8ce1d06b6886b4751\">\r\n                          <ewa-text [text_content]=\"getRemainingQuantity(item) | number:'1.0-2'\" _id=\"6806f4a8ce1d06b6886b4751\" _name=\"so-luong-con-lai\">\r\n                          </ewa-text>\r\n                        </div>\r\n                        <div class=\"comp-6806f534306fe2177603a17f\">\r\n                          <ewa-input-number\r\n                            *ngIf=\"!item.toppings || item.toppings.length === 0\"\r\n                            [disabled]=\"!listFoodChecked.includes(item._id)\"\r\n                            [ngModel]=\"getSeparateQuantity(item)\"\r\n                            (ngModelChange)=\"onSeparateQuantityChange(item, $event)\"\r\n                            [style.--background-color-decrement]=\"!listFoodChecked.includes(item._id) ? '#dfe4e8' : '#c82b34'\"\r\n                            [style.--background-color-increment]=\"!listFoodChecked.includes(item._id) ? '#dfe4e8' : '#00b14f'\"\r\n                            [max]=\"item.quantity\"\r\n                            [min]=\"0\"\r\n                            _id=\"6806f534306fe2177603a17f\"\r\n                            _name=\"input-quantity\">\r\n                          </ewa-input-number>\r\n                          <div style=\"margin-left: 10px\" *ngIf=\"item.toppings && item.toppings.length\">\r\n                            <ewa-text [text_content]=\"getSeparateQuantity(item) | number:'1.0-2'\" _id=\"6806f4a8ce1d06b6886b4751\">\r\n                            </ewa-text>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"item.combos || item.toppings\" class=\"comp-68099c1fa350214ede0edf96\">\r\n                          <ewa-text *ngIf=\"item.combos && item.combos.length\" [text_content]=\"getSubCombo(item.combos)\" _id=\"68099c1fa350214ede0edf96\" _name=\"Original price\">\r\n                          </ewa-text>\r\n                          <ewa-text *ngIf=\"item.toppings && item.toppings.length\" [text_content]=\"getKindTopping(item.toppings)\" _id=\"68099c1fa350214ede0edf96\" _name=\"Original price\">\r\n                          </ewa-text>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n          <div class=\"comp-6806f1af0cb52bf0dc7ece53\">\r\n            <ewa-button\r\n              [disabled]=\"foodToSeparate.length === 0\"\r\n              [style.--opacity]=\"foodToSeparate.length === 0 ? '0.5' : '1'\"\r\n              [style.--cursor]=\"foodToSeparate.length === 0 ? 'not-allowed' : 'pointer'\"\r\n              style=\"--background-color: var(--ion-color-vh-green);\"\r\n              (click)=\"handleSeparate()\"\r\n              _id=\"6806f1af0cb52bf0dc7ece53\" _name=\"btn-dong-y\"\r\n            >\r\n            </ewa-button>\r\n          </div>\r\n        </div>\r\n      </ewa-block-hover>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef, Input, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\ndeclare var electron: any;\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'app-print-one-col',\r\n  templateUrl: './print-one-col.component.html',\r\n  styleUrls: ['./print-one-col.component.scss']\r\n})\r\nexport class PrintOneColComponent {\r\n  \r\n  /** Mảng object sẽ in */\r\n  @Input() list_dishs: any[];\r\n  @Input() stamp: any;\r\n  @Input() number = 1;\r\n  @Input() tableInfo;\r\n  @Input() totalNumber;\r\n\r\n  ratio: number = 3;\r\n  root: any;\r\n  data_show : any[] = [];\r\n\r\n\r\n\r\n  constructor(\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private platform: Platform,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnChanges({ list_dishs }: SimpleChanges): void {\r\n    if (list_dishs && list_dishs.currentValue) {\r\n      this.data_show = []\r\n      this.onChangeData()\r\n      setTimeout(() => {\r\n        this.printBrowser();\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính tổng tiền của sản phẩm. Nếu có topping thì tính cả topping\r\n   * @param data sản phẩm cần tính tiền\r\n   * @returns tổng tiền của sản phẩm \r\n   */\r\n  getPrice(data) {\r\n    let total = data.price * data.quantity;\r\n    if(data.toppings) {\r\n      total += data.toppings.reduce((sum, topping) => sum + topping.price * topping.quantity, 0);\r\n    }\r\n    return total;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Gọi khi thay đổi dữ liệu list_dishs truyền vào, để cập nhật lại data_show\r\n   */\r\n  onChangeData() {\r\n    for (let i of this.list_dishs) { \r\n      for(let j = 0; j < i.quantity; j++) {\r\n        const item = {\r\n          ...i,\r\n          price: this.getPrice(i),\r\n        };\r\n        // Nếu là combo thì lấy tên combo\r\n        if (i.ptype === 5) item.subComboName = this.getComboName(i);\r\n        this.data_show.push(item);\r\n      }\r\n    } \r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên combo\r\n   * @param product sản phẩm cần lấy tên combo \r\n   * @returns tên combo, nếu không có thì trả về chuỗi rỗng\r\n   */\r\n  getComboName(product): string {\r\n    if(!product.combos) return '';\r\n\r\n    let comboName = [];\r\n    for (let combo of product.combos) {\r\n      let cb = `${combo.quantity}x ${combo.name} (${this.getUnit(combo.units, combo.ratio)})`;\r\n      if (combo.lots && combo.id_lotproduct) {\r\n        cb += ` (${this.getLotNumber(combo.lots, combo.id_lotproduct)})`;\r\n      }\r\n      comboName.push(cb);\r\n    }\r\n    return comboName.join(', ');\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên đơn vị theo tỷ lệ\r\n   * @param units mảng đơn vị của sản phẩm\r\n   * @param ratio tỷ lệ cần lấy\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n\r\n  /**\r\n   * Lấy tên lô theo id_lot được chọn\r\n   * @param lots mảng lô của sản phẩm\r\n   * @param _id id lô cần lấy\r\n   * @returns tên lô\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number;\r\n  }\r\n\r\n\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron();\r\n    else this.printBrowser();\r\n  }\r\n\r\n\r\n\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', this.lang.translate('Printing failed'), 3000);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 6) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<nz-layout>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -3 : stamp.height*1.375 -2 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex;\"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    \r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\"\r\n                        class=\"border-top\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                                 this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.time.text_align,\r\n                                 'font-weight': stamp.property.time.font_weight,\r\n                                 'font-style': stamp.property.time.font_style  ,\r\n                                 'text-decoration': stamp.property.time.text_decoration ,\r\n                                 'height.mm': stamp.property.time.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.time.width*1.375,\r\n                                 'top.px': stamp.property.time.y,\r\n                                 'left.px':stamp.property.time.x,\r\n                                 'display':stamp.property.time.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.time.font_size}\">\r\n                                 {{item.time_start_order | date:'HH:mm'}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}} <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                                 {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.notice.text_align,\r\n                                 'font-weight': stamp.property.notice.font_weight,\r\n                                 'font-style': stamp.property.notice.font_style  ,\r\n                                 'text-decoration': stamp.property.notice.text_decoration ,\r\n                                 'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.notice.width*1.375,\r\n                                 'top.px': stamp.property.notice.y,\r\n                                 'left.px':stamp.property.notice.x,\r\n                                 'display':stamp.property.notice.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.notice.font_size}\">\r\n                            **{{stamp.property.notice.value}}\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                            {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.number.text_align,\r\n                                 'font-weight': stamp.property.number.font_weight,\r\n                                 'font-style': stamp.property.number.font_style  ,\r\n                                 'text-decoration': stamp.property.number.text_decoration ,\r\n                                 'height.mm': stamp.property.number.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.number.width*1.375,\r\n                                 'top.px': stamp.property.number.y,\r\n                                 'left.px':stamp.property.number.x,\r\n                                 'display':stamp.property.number.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.number.font_size}\">\r\n                                 {{item.index+1}}/{{totalNumber}}\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"height: 100%;margin-top: -1.5mm;display: none;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex; \"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\"\r\n                    class=\"border-top\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                             this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.time.text_align,\r\n                             'font-weight': stamp.property.time.font_weight,\r\n                             'font-style': stamp.property.time.font_style  ,\r\n                             'text-decoration': stamp.property.time.text_decoration ,\r\n                             'height.mm': stamp.property.time.height*1.375-1 ,\r\n                             'width.mm': stamp.property.time.width*1.375,\r\n                             'top.px': stamp.property.time.y,\r\n                             'left.px':stamp.property.time.x,\r\n                             'display':stamp.property.time.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.time.font_size}\">\r\n                             {{item.time_start_order | date:'HH:mm'}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}} <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                             {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.notice.text_align,\r\n                             'font-weight': stamp.property.notice.font_weight,\r\n                             'font-style': stamp.property.notice.font_style  ,\r\n                             'text-decoration': stamp.property.notice.text_decoration ,\r\n                             'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                             'width.mm': stamp.property.notice.width*1.375,\r\n                             'top.px': stamp.property.notice.y,\r\n                             'left.px':stamp.property.notice.x,\r\n                             'display':stamp.property.notice.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.notice.font_size}\">\r\n                        **{{stamp.property.notice.value}}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                        {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.number.text_align,\r\n                             'font-weight': stamp.property.number.font_weight,\r\n                             'font-style': stamp.property.number.font_style  ,\r\n                             'text-decoration': stamp.property.number.text_decoration ,\r\n                             'height.mm': stamp.property.number.height*1.375-1 ,\r\n                             'width.mm': stamp.property.number.width*1.375,\r\n                             'top.px': stamp.property.number.y,\r\n                             'left.px':stamp.property.number.x,\r\n                             'display':stamp.property.number.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.number.font_size}\">\r\n                             {{item.index+1}}/{{totalNumber}}\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Input, Output } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbUI } from 'src/app/cafe/desktop/cafe-fnb/cafe-fnb';\r\nimport { CafeFnbSharedService } from 'src/app/cafe/desktop/cafe-fnb/cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { Observable } from 'rxjs';\r\nimport printJS from 'print-js';\r\nimport { EmployeeService } from 'src/app/cafe/services/employee.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\ndeclare var electron: any;\r\n\r\n@Component({\r\n  selector: 'app-cart-detail',\r\n  templateUrl: './cart-detail.component.html',\r\n  styleUrls: [\r\n    './cart-detail.component.scss',\r\n    './cart-detail-custom.component.scss',\r\n  ]\r\n})\r\nexport class CartDetailComponent extends CafeFnbUI {\r\n\r\n  /** Ở trang booking hay cart-detail để hiển thị các component phù hợp */\r\n  @Input() type: 'booking' | 'cart-detail' = 'cart-detail';\r\n\r\n  @Output() bookingOnCancel = new EventEmitter<any>();\r\n  @Output() bookingOnOk = new EventEmitter<any>();\r\n  \r\n  public VhType = VhType;\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public employeeService: EmployeeService,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n    public element: ElementRef,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n    if (this.router.getCurrentNavigation()) {\r\n      let dataTrans: any = this.router.getCurrentNavigation().extras.state;\r\n      if (dataTrans.dataRestore) this.dataRestore = dataTrans.dataRestore;\r\n      if (!this.selectedBill || this.selectedBill === null) {\r\n        this.selectedBill = new VhOrderInvoices();\r\n      }\r\n      this.initInvoice2(dataTrans);\r\n    }\r\n    else {\r\n      this.isLoadedInvoice2 = true;\r\n    }\r\n  }\r\n\r\n  currentAction = 'chooseFood';\r\n\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    const hasInvoiceDetails = this.selectedBill.getInvoiceDetail().length > 0;\r\n    const hasIdTable = !!this.selectedBill.getIdTable();\r\n    const canShowModalPay = hasInvoiceDetails && hasIdTable;\r\n\r\n    if ([\"F1\", \"F2\", \"F3\", \"F4\", \"Delete\", \"Escape\"].includes(event.key)) {\r\n      switch (event.key) {\r\n        case \"F1\":\r\n          if (canShowModalPay) {\r\n            this.isShowModalPay = true;\r\n          }\r\n          break;\r\n        case \"F2\":\r\n          if (this.stamp && hasInvoiceDetails) {\r\n            this.printAllLabel();\r\n          }\r\n          break;\r\n        case \"F3\":\r\n          if (hasInvoiceDetails) {\r\n            this.handlePrintTest();\r\n          }\r\n          break;\r\n        case \"F4\":\r\n          if (this.checkPrinterKitchen && hasInvoiceDetails) {\r\n            this.handleEmit_printKitchenAll(true);\r\n          }\r\n          break;\r\n        case \"Delete\":\r\n          this.handleDeleteBill();\r\n          break;\r\n        case \"Escape\":\r\n          if (hasInvoiceDetails) {\r\n            this.goBack();\r\n          } else {\r\n            this.deleteInvoice(true);\r\n          }\r\n          break;\r\n      }\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n\r\n  handleDeleteBill() {\r\n    // tiến hành xóa\r\n    this.nzModalService.confirm({\r\n      nzTitle: `${this.languageService.translate('Are you sure to cancel this invoice')}?`,\r\n      nzCancelText: this.languageService.translate(\"Cancel\"),\r\n      nzOkText: \"Ok\",\r\n      nzOnOk: () => {\r\n        this.vhComponent.showLoading('').then(() => {\r\n          this.deleteProcess()\r\n            .then((id) => console.log('delete invoice: ', id))\r\n            .catch((err) => {\r\n              console.error(err);\r\n              this.vhComponent.showToast(\r\n                2000,\r\n                this.languageService.translate('Delete fail'),\r\n                'alert-toast'\r\n              );\r\n            })\r\n            .finally(() => {\r\n              this.vhQueryCafe.closeSyncOpeningBill();\r\n              this.vhComponent.alertMessageDesktop(\r\n                'success',\r\n                this.languageService.translate('Invoice deleted successfully')\r\n              );\r\n              this.vhComponent.hideLoading(0);\r\n            });\r\n        });\r\n      },\r\n      nzOnCancel: () => { },\r\n    });\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.openSearchProduct([1, 3]);\r\n    this.adjustScale();\r\n    window.addEventListener('resize', this.adjustScale.bind(this));\r\n    if (this.platform.is('electron')) {\r\n      this.vhQueryCafe.connectDisplayLEDScreens();\r\n    }\r\n    this.list_selected_dishs = null;\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    if (this.type !== 'booking') this.vhQueryCafe.closeSyncOpeningBill();\r\n    if (this.platform.is('electron')) {\r\n      this.vhQueryCafe.disconnectDisplayLEDScreens();\r\n    }\r\n  }\r\n\r\n\r\n  openSearchProduct(types: number[]) {\r\n    this.showDrawerProductList = true;\r\n    this.getMenu(types);\r\n  }\r\n\r\n\r\n\r\n  closeSearchProduct(ev) {\r\n    if (ev) this.createBillDetail(ev);\r\n    else this.showDrawerProductList = false;\r\n    this.indexTab = 0;\r\n  }\r\n\r\n\r\n  chooseProduct(item) {\r\n    this.closeSearchProduct(item);\r\n  }\r\n\r\n\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    if (this.choiceFoodSearch.toppings)\r\n      this.choiceFoodSearch.toppings = this.choiceFoodSearch.toppings.filter(\r\n        (item) => item.quantity\r\n      );\r\n    if (this.choiceFoodSearch.quantity) {\r\n      if (this.choiceFoodSearch['combos']) {\r\n        this.choiceFoodSearch['combos'] = this.choiceFoodSearch['combos'].map((item) => {\r\n          return {\r\n            ...item,\r\n            id_category: this.vhQueryCafe.getlocalProduct(item.id_product)\r\n              .id_category,\r\n          };\r\n        });\r\n      }\r\n      this.closeSearchProduct(this.choiceFoodSearch);\r\n    }\r\n  }\r\n\r\n\r\n  printer_kitchens = this.vhQueryCafe.getlocalPrinters();\r\n\r\n  id_printer_kitchen = this.vhQueryCafe.getlocalPrinters().length ? this.vhQueryCafe.getlocalPrinters().find(e => e.default)._id : '';\r\n\r\n  printKitchenAll = false; // biến nhận giá trị output printKitchenAll từ component payment-button1\r\n\r\n  /** Mở trang in */\r\n  handlePrintInvoice() {\r\n    if (this.printer)\r\n      this.vhQueryCafe.getBill(this.selectedBill.getID()).then((res: any) => {\r\n        this.selectedBill.setBillCode(res.bill_code);\r\n        this.vhComponent\r\n          .showModal(\r\n            this.printService.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.selectedBill },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          ).then((modal) => {\r\n            modal.onWillDismiss().then(() => {\r\n              this.goBack();\r\n            });\r\n          });\r\n      });\r\n\r\n    else this.goBack();\r\n  }\r\n\r\n  goBack() {\r\n    // ĐÓng các modal có thể đang mở\r\n    this.isShowModalEditUsedTime = false;\r\n    this.showDrawerEdit = false;\r\n    if (this.showModalChooseTableToSwitch) {\r\n      this.showModalChooseTableToSwitch = false;\r\n    }\r\n    else {\r\n      this.isExit = true;\r\n      if (\r\n        this.dataRestore['searchValueToday'] &&\r\n        this.dataRestore['filterTypeToday']\r\n      ) {\r\n        delete this.dataRestore['searchValueToday'];\r\n        delete this.dataRestore['filterTypeToday'];\r\n      }\r\n      this.router.navigate(['/cafe/cafe-fnb'], { state: this.dataRestore });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Mở trang in thử*/\r\n  handlePrintTest() {\r\n    if (this.checkPrinter) {\r\n      if (this.vhAuth.checkMyPermission('sales_enable_print_out_for_customer')) {\r\n        this.updateServiceTime();\r\n        this.vhComponent\r\n          .showModal(\r\n            this.printService.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.selectedBill, temp: true },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          )\r\n          .then((modal) => {\r\n            modal.onWillDismiss().then(() => { });\r\n          });\r\n      }\r\n      else\r\n        this.nzMessageService.error(\r\n          this.languageService.translate('You do not have this rights'),\r\n          { nzDuration: 5000 }\r\n        );\r\n    }\r\n    else {\r\n      this.printService.printerNotEnableNotification();\r\n    }\r\n  }\r\n\r\n  checkDeactivate(\r\n    currentRoute: ActivatedRouteSnapshot,\r\n    currentState: RouterStateSnapshot,\r\n    nextState?: RouterStateSnapshot\r\n  ):\r\n    | Observable<boolean | UrlTree>\r\n    | Promise<boolean | UrlTree>\r\n    | boolean\r\n    | UrlTree {\r\n    if (!this.isExit) {\r\n      if (this.selectedBill.getInvoiceDetail().length) {\r\n        Promise.all([\r\n          this.vhComponent.showLoading('', 'transparent-loading'),\r\n          this.vhQueryCafe.updateBill(\r\n            this.selectedBill.getID(),\r\n            this.selectedBill.getCreateUpdateInvoice(this.selectedBill.getBillType())\r\n          ),\r\n        ]).then(() => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.isExit = true;\r\n          this.router.navigateByUrl(nextState.url);\r\n        });\r\n      } else {\r\n        this.statusInvoice.deleting = true;\r\n        // tiến hành xóa\r\n        Promise.all([\r\n          this.vhComponent.showLoading('', 'transparent-loading'),\r\n          this.deleteProcess(),\r\n        ])\r\n          .then((id) => {\r\n            this.isExit = true;\r\n            this.router.navigateByUrl(nextState.url);\r\n          })\r\n          .catch((err) => {\r\n            console.error(err);\r\n            this.vhComponent.showToast(\r\n              2000,\r\n              this.languageService.translate('Delete fail'),\r\n              'alert-toast'\r\n            );\r\n          })\r\n          .finally(() => {\r\n            this.vhComponent.hideLoading(0);\r\n            this.statusInvoice.deleting = false;\r\n          });\r\n      }\r\n    }\r\n    return this.isExit;\r\n  }\r\n\r\n\r\n\r\n  handleOk() {\r\n    this.showModalChangePriceType = false;\r\n    this.changePriceType(this.default_price_type);\r\n  }\r\n\r\n\r\n\r\n  handleCancel() {\r\n    this.showModalChangePriceType = false;\r\n  }\r\n\r\n\r\n  /**xử lý điều phối */\r\n  handleDispatcher() {\r\n    this.choiceFood.id_dispatcherzone = this.id_dispatcherzone;\r\n    this.choiceFood.dispatcher_done = false;\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_dispatcherzone: this.id_dispatcherzone, dispatcher_done: false });\r\n    this.show_modal_dispatcher = false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * In bếp\r\n   */\r\n  openPrintKitchen(detail, i) {\r\n    // Bật in bếp\r\n    if (this.checkPrinterKitchen.enable) {\r\n      if(detail.ptype == VhType.SERVICETIME && !detail.is_paused) {\r\n        this.productService.updateServiceTimePrice(detail, this.selectedBill.getPriceType());\r\n        this.selectedBill.getInvoiceDetail()[i] = detail;\r\n        this.selectedBill.setSubTotal();\r\n      }\r\n      let dataKitchen: any = {\r\n        name: detail.name,\r\n        quantity: +detail.quantity,\r\n        note: detail.note,\r\n        max_quantity: +detail.quantity,\r\n        ptype: detail.ptype,\r\n        ratio: detail.ratio,\r\n        units: detail.units,\r\n      };\r\n      if (detail.properties) dataKitchen['properties'] = detail.properties;\r\n      if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity }; });\r\n      if (detail.combos) dataKitchen['combos'] = detail.combos;\r\n      this.printKitchen['value'].push(dataKitchen);\r\n      this.printKitchen = { ...this.printKitchen, title: 'In lại' };\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleEmit_printKitchenAll(ev) {\r\n    this.updateServiceTime();\r\n    this.printKitchenAll = ev;\r\n    if (ev) this.printAllDishToKitchen();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * In tất cả món xuống bếp\r\n   */\r\n  printAllDishToKitchen() {\r\n    if (this.checkPrinterKitchen.enable) {\r\n      for (let detail of this.selectedBill.getInvoiceDetail()) {\r\n        let dataKitchen: any = {\r\n          name: detail.name,\r\n          quantity: +detail.quantity,\r\n          note: detail.note,\r\n          max_quantity: +detail.quantity,\r\n          ptype: detail.ptype,\r\n          ratio: detail.ratio,\r\n          units: detail.units,\r\n        };\r\n        if (detail.properties) dataKitchen['properties'] = detail.properties;\r\n        if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity }; });\r\n        if (detail.combos) dataKitchen['combos'] = detail.combos;\r\n        this.printKitchen['value'].push(dataKitchen);\r\n      }\r\n      this.printKitchen = { ...this.printKitchen, title: 'Add dishes' };\r\n      this.showPrintKitchenAgain = true;\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  /**In bếp */\r\n  handlePrint(value) {\r\n    if (this.platform.is(\"electron\")) this.printElectron(value);\r\n    else this.printDesktop(value);\r\n  }\r\n\r\n\r\n\r\n  handleCancelPrint(value?) {\r\n    this.printKitchen['value'] = [];\r\n    if (value) this.showPrintKitchenAgain = false;\r\n    else this.printKitchen['status'] = false;\r\n  }\r\n\r\n\r\n\r\n  printElectron(value) {\r\n    let html = value ? document.getElementById(\"print-kitchen-again\").innerHTML : document.getElementById(\"print-kitchen\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.printer_kitchens.find(e => e._id == this.id_printer_kitchen).printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (data) this.handleCancelPrint(value);\r\n      else this.vhComponent.alertMessageDesktop('warning', this.languageService.translate('Printing failed'), 3000);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**In bằng desktop */\r\n  printDesktop(value) {\r\n    printJS({\r\n      printable: value ? \"print-kitchen-again\" : \"print-kitchen\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      style:\r\n        'html { font-size: 14pt;}' +\r\n        '.print-kitchen .font-bold {font-size:1.8rem; font-weight:bold}' +\r\n        '.print-kitchen b {font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-font{font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-value-name { width : 70% ; font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value-quantity { width : 30% ; font-size: 14pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-value-name-note {font-style: italic; font-size: 10pt}' +\r\n        '.print-kitchen .print-kitchen-combo { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-combo-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-properties-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties-quantity { width : 30% ; font-size: 12pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-topping { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-topping-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-topping-quantity { width : 30% ; font-size: 12pt ; text-align:center}'\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /* ---------------------------------------------------------- PAYMENT BUTTON 1 ---------------------------------------------------------- */\r\n\r\n  observerScale = new ResizeObserver(() => {\r\n    this.adjustScale();\r\n  });\r\n\r\n  // Hàm thay đổi zoom để full screen\r\n  adjustScale() {\r\n    const container = this.element.nativeElement.children[0];\r\n    if (!container) return;\r\n    const viewportHeight = window.innerHeight;\r\n    const containerHeight = container.offsetHeight;\r\n    const scaleY = viewportHeight / containerHeight;\r\n    container.style.zoom = scaleY;\r\n    if (container) {\r\n      this.observerScale.observe(container);\r\n    }\r\n  }\r\n\r\n  selectedInvoiceDetailIndex: number | null = null;\r\n\r\n  onSelect(index: number) {\r\n    this.selectedInvoiceDetailIndex = index;\r\n  }\r\n\r\n  isShowNoteBill = false;\r\n\r\n  /**\r\n   * Cập nhật ghi chú\r\n   */\r\n  updateNoteBill() {\r\n    this.selectedBill.setNote(this.invoice_note);\r\n    this.updateInvoice(true);\r\n  }\r\n\r\n  showModalDiscount = false;\r\n  showModalFee = false;\r\n  showPaymentInfo = false;\r\n  showDropdownMore = false;\r\n\r\n  onDropdownMoreChange(visible) {\r\n    this.showDropdownMore = visible;\r\n  }\r\n\r\n  showChangeBillType = false;\r\n\r\n  onDropdownChangeBill(visible) {\r\n    this.showChangeBillType = visible;\r\n  }\r\n\r\n  /**\r\n   * Xử lí chuyển bàn\r\n   */\r\n  handleSwitchTable(toTable) {\r\n    // Xử lí chuyển bàn\r\n    if (this.selectedBill.getIdTable() !== '') {\r\n      const fromTable = this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable());\r\n      if (fromTable._id !== toTable._id) {\r\n        this.switchTable(fromTable, toTable);\r\n        this.selectedBill.setIdTable(toTable._id);\r\n        this.selectedBill.setIdArea(toTable.id_area);\r\n        this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n      }\r\n    }\r\n    // Xử lý chọn bàn khi chuyển đơn từ mang về sang tại bàn\r\n    else {\r\n      if (!toTable.status) {\r\n        this.selectedBill.setIdTable(toTable._id);\r\n        this.selectedBill.setIdArea(toTable.id_area);\r\n        this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n        this.vhQueryCafe.updateTable(this.selectedBill.getIdTable(), { status: true });\r\n        this.updateInvoice(true);\r\n        this.showModalChooseTableToSwitch = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"comp-67e6505d363550f4268d9ec7\">\r\n  <ewa-block-blank style=\"--width: 100%; --min-height: 768px; --background-color: #f4f5f5\" _id=\"67e5f60e9b9d51850ab2e609\" _name=\"Block add food\">\r\n    <div *ngIf=\"isLoadedInvoice2 && selectedBill !== null\" class=\"grid-67e6505d363550f4268d9ec7\">\r\n      <div class=\"comp-67e666d35802194c3add43fd\">\r\n        <ewa-frame-blank style=\"--width: 75.8974%; --min-height: 768px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame left\">\r\n          <div class=\"grid-67e666d35802194c3add43fd\">\r\n            <div class=\"comp-67e666d46c54c2ea8ca843eb\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 53px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame search\">\r\n                <div class=\"grid-67e666d46c54c2ea8ca843eb\">\r\n                  <div class=\"comp-67e671d1f68384a090b2d83f\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 53px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame add customer\">\r\n                      <div class=\"grid-67e671d1f68384a090b2d83f\">\r\n                        <div class=\"comp-67e6727e844b0825cb9c23b3\">\r\n                          <ewa-input-group\r\n                            [disabled]=\"true\"\r\n                            [value]=\"selectedBill.getIdPartner() === 'id_retail' ? getRetailName() : getMemberName()\"\r\n                            style=\"--color-icon-right: var(--ion-color-vh-green)\"\r\n                            (rightContentClick)=\"currentAction = 'chooseCustomer'\"\r\n                            _id=\"67e6727e844b0825cb9c23b3\" _name=\"Input name customer\"\r\n                          >\r\n                          </ewa-input-group>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <div class=\"comp-67e6720c1ef955752fe19f33\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 53px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame search food\">\r\n                      <div class=\"grid-67e6720c1ef955752fe19f33\">\r\n                        <div class=\"comp-67e674c36025baab45b695eb\">\r\n                          <ewa-input-group\r\n                            [placeholder]=\"'Search for name, barcode, item code' | translate\"\r\n                            [(ngModel)]=\"tempVal\"\r\n                            (ngModelChange)=\"searchFood($event)\"\r\n                            (rightContentClick)=\"tempVal = ''; searchFood('')\"\r\n                            _id=\"67e674c36025baab45b695eb\" _name=\"Input search food\"\r\n                          >\r\n                          </ewa-input-group>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div *ngIf=\"currentAction === 'chooseFood'\" class=\"comp-67e77a15eec0a71f15831a45\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 710px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame food\">\r\n                <div class=\"grid-67e77a15eec0a71f15831a45\">\r\n                  <div class=\"comp-67e77a169ebd2cdea8cd55dd\">\r\n                    <ewa-frame-blank style=\"--width: 22.824%; --min-height: 713px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame button category\">\r\n                      <div class=\"grid-67e77a169ebd2cdea8cd55dd\">\r\n                        <div class=\"comp-67e77a162417f52b247922a2\">\r\n                          <!-- Món ăn/Đồ uống -->\r\n                          <ewa-button\r\n                            [style.--background-color]=\"tempSearchType.includes(VhType.DISHES) || tempSearchType.includes(VhType.INGREDIENT) ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                            [style.--color-content]=\"tempSearchType.includes(VhType.DISHES) || tempSearchType.includes(VhType.INGREDIENT) ? '#ffffff' : '#131313'\"\r\n                            (click)=\"openSearchProduct([1, 3])\"\r\n                            [btn_content]=\"'Dishes/beverage' | translate\"\r\n                            _id=\"67e77a162417f52b247922a2\" _name=\"Button food category\"\r\n                            style=\"--letter-spacing-content: 0px;\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67e77a162417f52b247922a2\">\r\n                          <!-- Dịch vụ -->\r\n                          <ewa-button\r\n                            [style.--background-color]=\"(tempSearchType.includes(VhType.SERVICE) || tempSearchType.includes(VhType.SERVICETIME)) ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                            [style.--color-content]=\"(tempSearchType.includes(VhType.SERVICE) || tempSearchType.includes(VhType.SERVICETIME)) ? '#ffffff' : '#131313'\"\r\n                            (click)=\"openSearchProduct([2, 6])\"\r\n                            [btn_content]=\"'Service' | translate\"\r\n                            _id=\"67e77a162417f52b247922a2\" _name=\"Button food category\"\r\n                            style=\"--letter-spacing-content: 0px;\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67e77a162417f52b247922a2\">\r\n                          <!-- Món phụ -->\r\n                          <ewa-button\r\n                            [style.--background-color]=\"tempSearchType.includes(VhType.TOPPING) ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                            [style.--color-content]=\"tempSearchType.includes(VhType.TOPPING) ? '#ffffff' : '#131313'\"\r\n                            (click)=\"openSearchProduct([VhType.TOPPING])\"\r\n                            [btn_content]=\"'Side dishes' | translate\"\r\n                            _id=\"67e77a162417f52b247922a2\" _name=\"Button food category\"\r\n                            style=\"--letter-spacing-content: 0px;\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67e77a162417f52b247922a2\">\r\n                          <!-- Combo -->\r\n                          <ewa-button\r\n                            [style.--background-color]=\"tempSearchType.includes(VhType.COMBO) ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                            [style.--color-content]=\"tempSearchType.includes(VhType.COMBO) ? '#ffffff' : '#131313'\"\r\n                            (click)=\"openSearchProduct([VhType.COMBO])\"\r\n                            [btn_content]=\"'Combos' | translate\"\r\n                            _id=\"67e77a162417f52b247922a2\" _name=\"Button food category\"\r\n                            style=\"--letter-spacing-content: 0px;\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <div class=\"comp-67e77a1682700c260ce46fd6\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 710px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame food category\">\r\n                      <div>\r\n                        <nz-tabset [ngStyle]=\"{ padding: '0 16px' }\" (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n                          <nz-tab *ngFor=\"let tab of listTabs\" [nzTitle]=\"tab.name | translate\"></nz-tab>\r\n                        </nz-tabset>\r\n                        <div *ngIf=\"searchList && searchList.length > 0\" class=\"grid-67e77a1682700c260ce46fd6\">\r\n                          <div *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"comp-67e77a16df43daea41c15560\">\r\n                            <ewa-frame-blank (click)=\"selectFoods(item)\" style=\"--width: 100%; --min-height: 185px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Food item\">\r\n                              <div class=\"grid-67e77a16df43daea41c15560\">\r\n                                <div class=\"comp-67e77a17f0aee8dd7ec4bcc5\">\r\n                                  <ewa-image [image_url]=\"item.img ? item.img : 'assets/icon/management/noimage.svg'\" [image_error]=\"'assets/icon/management/noimage.svg'\" _id=\"67e77a17f0aee8dd7ec4bcc5\" _name=\"Food image\">\r\n                                  </ewa-image>\r\n                                </div>\r\n                                <div class=\"comp-67e77a17da6183515f0cf50e\">\r\n                                  <ewa-button style=\"--background-color: rgba(0, 0, 0, 0.7)\" [btn_content]=\"item.name\" _id=\"67e77a17da6183515f0cf50e\" _name=\"Food name\">\r\n                                  </ewa-button>\r\n                                </div>\r\n                                <div class=\"comp-67e77a1701348a61fece6af6\">\r\n                                  <!-- Giá bán 1 -->\r\n                                  <ng-container *ngIf=\"default_price_type == 1 || !item.price2\">\r\n                                    <ewa-button _id=\"67e77a1701348a61fece6af6\" _name=\"Food price\"\r\n                                      *ngIf=\"item.type !== VhType.SERVICETIME\"\r\n                                      style=\"--background-color: var(--ion-color-vh-green); --letter-spacing-content: 0px\"\r\n                                      [btn_content]=\"vhAlgorithm.vhcurrencyunit(item.price)\">\r\n                                    </ewa-button>\r\n                                    <ewa-button _id=\"67e77a1701348a61fece6af6\" _name=\"Food price\"\r\n                                      *ngIf=\"item.type === VhType.SERVICETIME\"\r\n                                      style=\"--background-color: var(--ion-color-vh-green); --letter-spacing-content: 0px\"\r\n                                      btn_content=\"{{vhAlgorithm.vhcurrencyunit(item.price)}} / {{item.units[0].unit | translate}}\">\r\n                                    </ewa-button>\r\n                                  </ng-container>\r\n                                  <!-- Giá bán 2 -->\r\n                                  <ng-container *ngIf=\"default_price_type == 2 && item.price2\">\r\n                                    <ewa-button _id=\"67e77a1701348a61fece6af6\" _name=\"Food price\"\r\n                                      *ngIf=\"item.type !== VhType.SERVICETIME\"\r\n                                      style=\"--background-color: var(--ion-color-vh-green); --letter-spacing-content: 0px\"\r\n                                      [btn_content]=\"vhAlgorithm.vhcurrencyunit(item.price2)\">\r\n                                    </ewa-button>\r\n                                    <ewa-button _id=\"67e77a1701348a61fece6af6\" _name=\"Food price\"\r\n                                      *ngIf=\"item.type === VhType.SERVICETIME\"\r\n                                      style=\"--background-color: var(--ion-color-vh-green); --letter-spacing-content: 0px\"\r\n                                      btn_content=\"{{vhAlgorithm.vhcurrencyunit(item.price2)}} / {{item.units[0].unit | translate}}\">\r\n                                    </ewa-button>\r\n                                  </ng-container>\r\n                                </div>\r\n                              </div>\r\n                            </ewa-frame-blank>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div *ngIf=\"currentAction === 'chooseCustomer'\" class=\"comp-67e77a31b207998c1906b225\">\r\n              <app-choose-customer\r\n                [type]=\"type\"\r\n                (backClick)=\"currentAction = 'chooseFood'\"\r\n                (addClick)=\"currentAction = 'addCustomer'\"\r\n              >\r\n              </app-choose-customer>\r\n            </div>\r\n            <div *ngIf=\"currentAction === 'addCustomer'\" class=\"comp-67ea074d7bad2cf4395c312e\">\r\n              <app-add-customer\r\n                (backClick)=\"currentAction = 'chooseCustomer'\"\r\n              >\r\n              </app-add-customer>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n      <div class=\"comp-67e65110b59cdde73a92f29b\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 768px; --background-color: #ffffff\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame right\">\r\n          <div class=\"grid-67e65110b59cdde73a92f29b\">\r\n            <div class=\"comp-67e6783cb4ed8b93c9f40613\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 53px; --background-color: #f4f6f8\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame header\"\r\n                [ewaStyle]=\"{\r\n                  'frame-blank': {\r\n                    'border-bottom-width': '1px',\r\n                    'border-color': '#c6c8d0'\r\n                  }\r\n                }\">\r\n                <div class=\"grid-67e6783cb4ed8b93c9f40613\">\r\n                  <div class=\"comp-67e74d468484cb7c640875b5\">\r\n                    <!-- Nút chuyển đơn tại bàn hoặc mang về -->\r\n                    <ewa-button\r\n                      _id=\"67e74d468484cb7c640875b5\" _name=\"Button option\"\r\n                      [icon_name]=\"selectedBill.getIdTable() !== 'go_home' ? 'room_service' : 'work'\"\r\n                      [style.--color-icon]=\"selectedBill.getIdTable() !== 'go_home' ? 'var(--ion-color-vh-green)' : '#ff5900'\"\r\n                      nz-dropdown\r\n                      [nzDropdownMenu]=\"changeBillType\"\r\n                      [nzVisible]=\"showChangeBillType\"\r\n                      (nzVisibleChange)=\"onDropdownChangeBill($event)\"\r\n                      (click)=\"showChangeBillType = !showChangeBillType\"\r\n                      [nzTrigger]=\"'click'\"\r\n                      [nzPlacement]=\"'bottomLeft'\"\r\n                    >\r\n                    </ewa-button>\r\n                    <nz-dropdown-menu #changeBillType=\"nzDropdownMenu\">\r\n                      <app-change-bill-type (closeDropdown)=\"showChangeBillType= false\"></app-change-bill-type>\r\n                    </nz-dropdown-menu>\r\n                  </div>\r\n                  <div class=\"comp-67e74f24dce6593fd48e9adc\">\r\n                    <!-- Nút thay đổi bàn -->\r\n                    <ewa-button\r\n                      [disabled]=\"type !== 'booking' && selectedBill.getIdTable() === 'go_home'\"\r\n                      [style.--cursor]=\"selectedBill.getIdTable() === 'go_home' ? 'auto' : 'pointer'\"\r\n                      style=\"--letter-spacing-content: 0px;\"\r\n                      [show_icon]=\"type !== 'booking' && !(selectedBill.getIdTable() === 'go_home')\"\r\n                      (click)=\"showModalChooseTableToSwitch = true\"\r\n                      [btn_content]=\"tableInfo !== '' ? tableInfo : ('Select a table' | translate)\"\r\n                      _id=\"67e74f24dce6593fd48e9adc\" _name=\"Text table area\"\r\n                    >\r\n                    </ewa-button>\r\n                  </div>\r\n                  <div class=\"comp-67e74f3aaa031a0286b9899b\">\r\n                    <ewa-button\r\n                      nz-dropdown\r\n                      [nzDropdownMenu]=\"menuMore\"\r\n                      [nzVisible]=\"showDropdownMore\"\r\n                      (nzVisibleChange)=\"onDropdownMoreChange($event)\"\r\n                      (click)=\"showDropdownMore = !showDropdownMore\"\r\n                      [nzTrigger]=\"'click'\"\r\n                      style=\"--color-icon: var(--ion-color-vh-green)\"\r\n                      [nzPlacement]=\"'topLeft'\"\r\n                      _id=\"67e74f3aaa031a0286b9899b\" _name=\"Button more\"\r\n                    >\r\n                    </ewa-button>\r\n                    <nz-dropdown-menu #menuMore=\"nzDropdownMenu\">\r\n                      <app-cart-option (closeDropdown)=\"showDropdownMore = false\"></app-cart-option>\r\n                    </nz-dropdown-menu>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div class=\"comp-67ea129e770d69f818498315\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 530px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame list food order\">\r\n                <div *ngIf=\"selectedBill !== null && selectedBill.getInvoiceDetail().length > 0\" class=\"grid-67ea129e770d69f818498315\">\r\n                  <div *ngFor=\"let item of selectedBill.getInvoiceDetail(); index as i; trackBy:myTrackByFunction\">\r\n                    <app-food-detail\r\n                      [food]=\"item\"\r\n                      [(selectedInvoiceDetailIndex)]=\"selectedInvoiceDetailIndex\"\r\n                      [foodIndex]=\"i\"\r\n                      [type]=\"type\"\r\n                      (selectFood)=\"onSelect($event)\"\r\n                      (openPrintKitchen)=\"openPrintKitchen($event, i)\"\r\n                      (printLabel)=\"printSelectedLabel($event)\"\r\n                      (quantityChange)=\"onQuantityChange(item._id, $event)\"\r\n                    ></app-food-detail>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n            <div class=\"comp-67ea12b81b3c9f7e1c9bf318\">\r\n              <ewa-frame-blank style=\"--width: 100%; --min-height: 185px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame payment\">\r\n                <div class=\"grid-67ea12b81b3c9f7e1c9bf318\">\r\n                  <div class=\"comp-67ea148b0bdccf025a80f89c\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 60px; --background-color: #f3f4f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame top\">\r\n                      <div style=\"position: relative\" class=\"grid-67ea148b0bdccf025a80f89c\">\r\n                        <div class=\"comp-67fc79993000a39b785b8ff8\"\r\n                          *ngIf=\"type !== 'booking'\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút khuyến mãi\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'card_giftcard'\"\r\n                            [nzTooltipTitle]=\"'Promotions' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"!this.selectedBill.isPromotion() && getPromotions()\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67ea17032a483763e4a0687d\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút giảm giá\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'new_releases'\"\r\n                            [nzTooltipTitle]=\"'Discount value' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"showModalDiscount = true\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67ea1cc9581826e3763b23cd\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút thuế và phí\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'loyalty'\"\r\n                            [nzTooltipTitle]=\"'Tax and fee' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"showModalFee = true\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67ea1e327628eb6c414273bb\"\r\n                          *ngIf=\"type !== 'booking'\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút ghi chú\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'event_note'\"\r\n                            [nzTooltipTitle]=\"'Note' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"isShowNoteBill = !isShowNoteBill; invoice_note = selectedBill.getNote()\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-68005bd7fcebabf7ea960a06\"\r\n                          *ngIf=\"management_product_price2 && type !== 'booking'\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút chọn giá bán\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'money'\"\r\n                            [nzTooltipTitle]=\"'Choose selling price' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"showModalChangePriceType = true;\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-68005c389c430473707354ae\"\r\n                          *ngIf=\"type !== 'booking'\">\r\n                          <ewa-button _id=\"67fc79993000a39b785b8ff8\" _name=\"Nút thêm thanh toán khác\"\r\n                            style=\"width: fit-content;display: block;--color-icon: var(--ion-color-vh-green)\"\r\n                            [icon_name]=\"'payment'\"\r\n                            [nzTooltipTitle]=\"'Add other payment' | translate\"\r\n                            nz-tooltip nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"\r\n                            (click)=\"openModalOtherDiscount()\">\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div *ngIf=\"isShowNoteBill\" style=\"position: absolute; top: -35px; left: 0; width: 100%\">\r\n                          <ewa-input-group _id=\"67eb6e84d5881459080db451\" _name=\"input-ghi-chu\"\r\n                            (blur)=\"updateNoteBill()\"\r\n                            [(ngModel)]=\"invoice_note\"\r\n                            style=\"--width: 100%\"\r\n                            [placeholder]=\"'Enter note...' | translate\"\r\n                            [rightContent]=\"'Delete' | translate\"\r\n                            (rightContentClick)=\"invoice_note = ''; updateNoteBill()\">\r\n                          </ewa-input-group>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                  <div class=\"comp-67ea1f2d0750376f9e4ef6b9\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 39px; --background-color: #e9eaed\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"Frame total amount\">\r\n                      <div class=\"grid-67ea1f2d0750376f9e4ef6b9\">\r\n                        <div class=\"comp-68005c766d12beee15424876\">\r\n                          <ewa-button\r\n                            style=\"--letter-spacing-content: 0px;\"\r\n                            [show_icon]=\"product_gift_type7.length && !gotten_gift_type7\"\r\n                            [btn_content]=\"'Total' | translate\"\r\n                            (clickIcon)=\"showProductGiftType7 = true\"\r\n                            _id=\"68005c766d12beee15424876\" _name=\"Tổng tiền\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                        <div class=\"comp-67ea1f82b80a455330842980\">\r\n                          <ewa-text [text_content]=\"vhAlgorithm.vhcurrencyunit(selectedBill.getTotalATax())\" _id=\"67ea1f82b80a455330842980\" _name=\"Tổng tiền value\">\r\n                          </ewa-text>\r\n                        </div>\r\n                        <div class=\"comp-67ea1fc2512aa0922486c2db\">\r\n                          <ewa-button\r\n                            nz-button\r\n                            nz-dropdown\r\n                            [nzDropdownMenu]=\"infoPayment\"\r\n                            [nzPlacement]=\"'topLeft'\"\r\n                            style=\"--color-icon: var(--ion-color-vh-green)\"\r\n                            _id=\"67ea1fc2512aa0922486c2db\"\r\n                            _name=\"Button more\"\r\n                          >\r\n                          </ewa-button>\r\n                          <nz-dropdown-menu #infoPayment=\"nzDropdownMenu\">\r\n                            <app-info-payment></app-info-payment>\r\n                          </nz-dropdown-menu>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n\r\n                  <!-- Danh sách nút bên dưới -->\r\n                  <div class=\"bottom-list-buttons\" style=\"display: flex; justify-content: center; align-items: center; grid-area: 3/1/auto/span 5;\">\r\n                    <!-- cart-detail -->\r\n                    <ng-container *ngIf=\"type === 'cart-detail'\">\r\n                      <div class=\"comp-67ea202451fd82088506d6ad\">\r\n                        <ewa-button\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px\"\r\n                          [btn_content]=\"('Back' | translate) + ' (ESC)'\"\r\n                          (click)=\"selectedBill.getInvoiceDetail().length ? goBack() : deleteInvoice(true)\"\r\n                          _id=\"67ea202451fd82088506d6ad\" _name=\"Nút thoát\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67ea3b4a48b38127afc3c508 no-border-right\">\r\n                        <ewa-button\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px; --background-color: #ffffff; --border: 1px solid var(--ion-color-vh-green); --color-content: var(--ion-color-vh-green)\"\r\n                          [disabled]=\"!checkPrinterKitchen || !selectedBill.getInvoiceDetail().length\"\r\n                          (click)=\"handleEmit_printKitchenAll(true)\"\r\n                          [style.--cursor]=\"!checkPrinterKitchen || !selectedBill.getInvoiceDetail().length ? 'not-allowed' : 'pointer'\"\r\n                          [btn_content]=\"('Print all dishes to kitchen' | translate) + ' (F4)'\"\r\n                          _id=\"67ea202451fd82088506d6ad\" _name=\"Nút in tất cả món xuống bếp\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67ea3bc93f32c2b7c10ab348 no-border-right\">\r\n                        <ewa-button\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px; --background-color: #ffffff; --border: 1px solid var(--ion-color-vh-green); --color-content: var(--ion-color-vh-green)\"\r\n                          [style.--cursor]=\"!selectedBill.getInvoiceDetail().length ? 'not-allowed' : 'pointer'\"\r\n                          [disabled]=\"!selectedBill.getInvoiceDetail().length\"\r\n                          (click)=\"handlePrintTest()\"\r\n                          [btn_content]=\"('Print out for customer' | translate) + ' (F3)'\"\r\n                          _id=\"67ea202451fd82088506d6ad\" _name=\"Nút in cho khách xem\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-680059772efe12770038ccd0 no-border-right\">\r\n                        <ewa-button\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px; --background-color: #ffffff; --border: 1px solid var(--ion-color-vh-green); --color-content: var(--ion-color-vh-green)\"\r\n                          [style.--cursor]=\"!stamp || !selectedBill.getInvoiceDetail().length ? 'not-allowed' : 'pointer'\"\r\n                          [disabled]=\"!stamp || !selectedBill.getInvoiceDetail().length\"\r\n                          (click)=\"printAllLabel()\"\r\n                          [btn_content]=\"('Print all labels' | translate) + ' (F2)'\"\r\n                          _id=\"67ea202451fd82088506d6ad\" _name=\"Nút in tất cả tem\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-67ea3e5f4545a3cf0baa3d51\">\r\n                        <ewa-button\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px; --background-color: var(--ion-color-vh-green)\"\r\n                          [style.--cursor]=\"!selectedBill.getInvoiceDetail().length || !selectedBill.getIdTable() ? 'not-allowed' : 'pointer'\"\r\n                          [disabled]=\"!selectedBill.getInvoiceDetail().length || !selectedBill.getIdTable()\"\r\n                          (click)=\"updateServiceTime(); isShowModalPay = true\"\r\n                          [btn_content]=\"('Pay & Print' | translate) + ' (F1)'\"\r\n                          _id=\"67ea202451fd82088506d6ad\" _name=\"Nút thanh toán\"\r\n                        >\r\n                        </ewa-button>\r\n                      </div>\r\n                    </ng-container>\r\n                    <!-- booking -->\r\n                    <ng-container *ngIf=\"type === 'booking'\">\r\n                      <div class=\"comp-67ea202451fd82088506d6ad\">\r\n                        <ewa-button _id=\"67ea202451fd82088506d6ad\" _name=\"Nút thoát\"\r\n                          [btn_content]=\"'Exit' | translate\"\r\n                          style=\"--letter-spacing-content: 0px; --height: 89px;\"\r\n                          (click)=\"bookingOnCancel.emit()\">\r\n                        </ewa-button>\r\n                      </div>\r\n                      <div class=\"comp-680059772efe12770038ccd0\">\r\n                        <ewa-button _id=\"67ea202451fd82088506d6ad\" _name=\"Nút in\"\r\n                          [btn_content]=\"'Save' | translate\"\r\n                          (click)=\"bookingOnOk.emit(selectedBill)\"\r\n                          style=\"--letter-spacing-content: 0px;--height: 89px; --background-color: var(--ion-color-vh-green)\">\r\n                        </ewa-button>\r\n                      </div>\r\n                    </ng-container>\r\n                   </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </ewa-block-blank>\r\n</div>\r\n\r\n<!-- -------------------------------------- MODAL CHỌN MÓN ĂN --------------------------------------- -->\r\n<app-choose-food\r\n  *ngIf=\"showOptions\"\r\n  (onClose)=\"showOptions = false\"\r\n  (closeSearchProduct)=\"closeSearchProduct($event)\"\r\n></app-choose-food>\r\n\r\n<!-- -------------------------------------- MODAL EDIT MÓN ĂN --------------------------------------- -->\r\n<app-edit-food\r\n  *ngIf=\"showDrawerEdit\"\r\n  (onClose)=\"showDrawerEdit = false\"\r\n></app-edit-food>\r\n\r\n<!-- -------------------------------------- MODAL THÊM GIẢM GIÁ --------------------------------------- -->\r\n<app-modal-discount\r\n  *ngIf=\"showModalDiscount\"\r\n  (onClose)=\"showModalDiscount = false\"\r\n></app-modal-discount>\r\n\r\n<!-- -------------------------------------- MODAL THÊM PHÍ --------------------------------------- -->\r\n<app-modal-fee\r\n  *ngIf=\"showModalFee\"\r\n  (onClose)=\"showModalFee = false\"\r\n></app-modal-fee>\r\n\r\n<!-- ------------------------------------------------------- MODAL CHỌN GIÁ BÁN -------------------------------------------------------- -->\r\n<app-change-price-type\r\n  *ngIf=\"showModalChangePriceType\"\r\n  (onClose)=\"handleCancel()\"\r\n  (onSave)=\"handleOk()\"\r\n></app-change-price-type>\r\n\r\n<!-- --------------------------------------------- MODAL THANH TOÁN KHÁCH (ĐIỂM / COUPON) ---------------------------------------------- -->\r\n<app-other-discount\r\n  *ngIf=\"showModalOtherDiscount\"\r\n  (onClose)=\"showModalOtherDiscount = false\"\r\n  (onSave)=\"handleOkOtherDiscount()\"\r\n></app-other-discount>\r\n\r\n<!-- -------------------------------------- MODAL CHỌN SẢN PHẨM TẶNG TYPE 6 (MUA NHIỀU SẢN PHẨM) --------------------------------------- -->\r\n<app-product-gift\r\n  *ngIf=\"showProductGift\"\r\n  (onClose)=\"showProductGift = false\"\r\n  (onSave)=\"showProductGift = false; getEarningpointPromotion()\"\r\n>\r\n</app-product-gift>\r\n\r\n<!-- -------------------------------------- MODAL CHỌN SẢN PHẨM TẶNG TYPE 7 (GIÁ TRỊ HOÁ ĐƠN) --------------------------------------- -->\r\n<app-product-gift-type7\r\n  *ngIf=\"showProductGiftType7\"\r\n  (onClose)=\"showProductGiftType7 = false\"\r\n  (onSave)=\"showProductGiftType7 = false; handleAddGiftType7()\"\r\n>\r\n</app-product-gift-type7>\r\n\r\n<!-- --------------------------------------------- MODAL CHỌN LÔ ---------------------------------------------- -->\r\n<app-select-lot\r\n  *ngIf=\"show_modal_select_lots\"\r\n  (onClose)=\"handleCancelChooseLot()\"\r\n  (onSave)=\"handleChooseLot()\"\r\n></app-select-lot>\r\n\r\n<!-- --------------------------------------------- MODAL THANH TOÁN ---------------------------------------------- -->\r\n<app-modal-payment\r\n  *ngIf=\"isShowModalPay\"\r\n  (onClose)=\"isShowModalPay = false\"\r\n  (onSave)=\"saveInvoice()\"\r\n></app-modal-payment>\r\n\r\n<!-- --------------------------------------------- MODAL THÊM KHÁCH HÀNG MỚI ---------------------------------------------- -->\r\n<app-modal-add-customer\r\n  *ngIf=\"showDrawerAddCustomer\"\r\n  (onClose)=\"showDrawerAddCustomer = false\"\r\n></app-modal-add-customer>\r\n\r\n<!-- ---------------------------------------------CHỌN BÀN ĐỂ CHUYỂN--------------------------------------------- -->\r\n<div class=\"custom-dialog\"\r\n  *ngIf=\"showModalChooseTableToSwitch\">\r\n  <div class=\"custom-dialog__backdrop\" (click)=\"showModalChooseTableToSwitch = false\"></div>\r\n  <div class=\"custom-dialog__content\"\r\n    style=\"width: 100%\">\r\n    <app-choose-table\r\n      [type]=\"'modal'\"\r\n      (onChooseTable)=\"handleSwitchTable($event)\"\r\n      (onBackChooseTable)=\"showModalChooseTableToSwitch = false\">\r\n    </app-choose-table>\r\n  </div>\r\n</div>\r\n\r\n<!-- --------------------------------------------- MODAL TÁCH ĐƠN ---------------------------------------------- -->\r\n<app-separate-table\r\n[prevPage]=\"'cart-detail'\"\r\n*ngIf=\"showModalSeparateTable\"\r\n(onClose)=\"showModalSeparateTable = false\"\r\n></app-separate-table>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------- MODAL CHỌN TEM ĐỂ IN ------------------------------------------------------- -->\r\n<app-modal-select-label-print\r\n  *ngIf=\"isShowModalSelectLabelPrint\"\r\n  (onClose)=\"isShowModalSelectLabelPrint = false\">\r\n</app-modal-select-label-print>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------- MODAL IN TẤT CẢ TEM ------------------------------------------------------- -->\r\n<app-print-one-col\r\n  *ngIf=\"selectedBill !== null\"\r\n  style=\"display: none;\"\r\n  [totalNumber]=\"list_selected_dishs ? list_selected_dishs.length : selectedBill.getInvoiceDetail().length\"\r\n  [list_dishs]=\"list_selected_dishs\"\r\n  [stamp]=\"stamp\"\r\n  [tableInfo]=\"tableInfo\"\r\n></app-print-one-col>\r\n\r\n\r\n\r\n<!-- ---------------------------------------------------------- MODAL IN BẾP ----------------------------------------------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\" *ngIf=\"printKitchen.status\"\r\n  [(nzVisible)]=\"printKitchen.status\" nzTitle=\"{{'Print kitchen' | translate}}\" (nzOnCancel)=\"handleCancelPrint()\"\r\n  (nzOnOk)=\"handlePrint(false)\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}\r\n      </div>\r\n      <div *ngIf=\"!checkPrinterKitchen.table_name_hidden\">\r\n        <span\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}: </span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{productService.getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(false)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!-- ---------------------print chicken lại------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"showPrintKitchenAgain\" nzTitle=\"{{'Print kitchen' | translate}}\"\r\n  (nzOnCancel)=\"showPrintKitchenAgain = false;handleCancelPrint()\" (nzOnOk)=\"handlePrint(true)\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen-again\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}\r\n      </div>\r\n      <div *ngIf=\"!checkPrinterKitchen.table_name_hidden\">\r\n        <span\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}: </span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{ productService.getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(true)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!-- chọn khu vực điều phối  -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterDispatcher\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"show_modal_dispatcher\" nzTitle=\"{{'Dish dispatch' | translate}}\" [nzCloseIcon]=\"null\"\r\n  (nzOnOk)=\"handleDispatcher()\">\r\n  <ng-container *nzModalContent>\r\n    <div>Chọn khu vực điều phối bếp/quầy pha chế</div>\r\n    <nz-select [(ngModel)]=\"id_dispatcherzone\">\r\n      <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of dispatcherzones\"></nz-option>\r\n    </nz-select>\r\n  </ng-container>\r\n  <ng-template #modalFooterDispatcher>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleDispatcher()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------- MODDAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n\r\n<app-modal-edit-used-time\r\n  *ngIf=\"isShowModalEditUsedTime\"\r\n  [data]=\"dataEditUsedTime\"\r\n  (onCancel)=\"isShowModalEditUsedTime = false\"\r\n  (onSave)=\"handleSaveEditUsedTime($event)\">\r\n</app-modal-edit-used-time>\r\n","import { Component, ChangeDetectorRef, ElementRef, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { CafeFnbSharedService } from '../../../cafe-fnb-shared.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { CafeFnbUI } from '../../../cafe-fnb';\r\n\r\nexport interface SeparateTableInfo {\r\n  bill: any,\r\n  billDetail: any[],\r\n  tableInfo: any;\r\n}\r\n@Component({\r\n  selector: 'app-choose-table',\r\n  templateUrl: './choose-table.component.html',\r\n  styleUrls: ['./choose-table.component.scss']\r\n})\r\nexport class ChooseTableComponent extends CafeFnbUI {\r\n\r\n  @Input() type: 'modal' | 'page';\r\n\r\n  @Output() onChooseTable = new EventEmitter<any>();\r\n  @Output() onBackChooseTable = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice,\r\n    public element: ElementRef,\r\n  ) {\r\n    super(\r\n      vhQueryCafe, router, vhAuth, platform, languageService, vhComponent, functionService, cdRef, vhAlgorithm,\r\n      nzModalService, nzMessageService, areaService, themeService, userService, cafeSapoSharedService, billService,\r\n      productService, printService, vhQuery, customerService, vhEinvoice\r\n    );\r\n    if (this.router.getCurrentNavigation()) {\r\n      let dataTrans: any = this.router.getCurrentNavigation().extras.state;\r\n      this.action = dataTrans.action;\r\n      this.id_table = dataTrans.id_table;\r\n      this.foodToSeparate = dataTrans.foodToSeparate;\r\n      this.prevPage = dataTrans.prevPage;\r\n    }\r\n  }\r\n\r\n  listArea = [];\r\n\r\n  action: string;\r\n  id_table: string;\r\n  prevPage: string;\r\n  foodToSeparate: any;\r\n\r\n  ngOnInit(): void {\r\n    this.listArea = this.areaService.listArea.filter(area => area.name !== 'Take away');\r\n    if (this.action === 'separate-table') {\r\n      this.areaChangedForSeperateTable(this.listArea[0]._id);\r\n    }\r\n    else {\r\n      this.areaChanged(this.listArea[0]._id);\r\n    }\r\n    this.adjustScale();\r\n    window.addEventListener('resize', this.adjustScale.bind(this));\r\n  }\r\n\r\n  observerScale = new ResizeObserver(() => {\r\n    this.adjustScale();\r\n  });\r\n\r\n  // Hàm thay đổi zoom để full screen\r\n  adjustScale() {\r\n    const container = this.element.nativeElement.children[0];\r\n    if (!container) return;\r\n    const viewportHeight = window.innerHeight;\r\n    const containerHeight = container.offsetHeight;\r\n    const scaleY = viewportHeight / containerHeight;\r\n    container.style.zoom = scaleY;\r\n    if (container) {\r\n      this.observerScale.observe(container);\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    if (this.type === 'modal') {\r\n      this.onBackChooseTable.emit();\r\n    }\r\n    else {\r\n      if (this.prevPage === 'cart-detail') {\r\n        this.gotoOrder();\r\n      }\r\n      else {\r\n        this.router.navigate(['/cafe/cafe-fnb'], { state: this.dataRestore });\r\n      }\r\n    }\r\n  }\r\n\r\n  async handleChooseTable(table) {\r\n    if (this.type === 'modal') {\r\n      this.onChooseTable.emit(table);\r\n    }\r\n    else {\r\n      switch (this.action) {\r\n        case 'create-bill':\r\n          if (!table.status) {\r\n            this.selectedTableID = table._id;\r\n            this.billService.createBill(this.selectedAreaID, this.selectedTableID, this.searchValueAreaGoHome, this.indexTabArea, this.filterType);\r\n          }\r\n          break;\r\n\r\n        case 'switch-table':\r\n          if (this.id_table) {\r\n            const fromTable = this.vhQueryCafe.getlocalTable(this.id_table);\r\n            if (fromTable._id !== table._id) {\r\n              this.selectedBill = null;\r\n              this.switchTable(fromTable, table);\r\n            }\r\n          }\r\n          break;\r\n\r\n        case 'separate-table':\r\n          if (this.id_table && this.foodToSeparate) {\r\n            const table1 = this.vhQueryCafe.getlocalTable(this.id_table);\r\n            const billTable2 = await this.vhQueryCafe.getBills_byFields({ id_table: { $eq: table._id }, bill_type: { $eq: 5 }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }) as any;\r\n            if (billTable2.length && billTable2[0].is_promotion) {\r\n              this.nzModalService.confirm({\r\n                nzTitle: `${this.languageService.translate('Đơn này đang có khuyến mãi. Bạn có muốn hủy khuyến mãi để tách đơn không')}?`,\r\n                nzCancelText: this.languageService.translate(\"Cancel\"),\r\n                nzOkText: \"Ok\",\r\n                nzOnOk: () => {\r\n                  this.initBillToSeparate(billTable2[0]).then(() => {\r\n                    this.destroyBillDetails_withPromotions().then(() => {\r\n                      this.vhQueryCafe\r\n                        .updateBill_Billdetail(\r\n                          this.selectedBill.getID(),\r\n                          this.selectedBill.getCreateUpdateInvoice(5),\r\n                          this.selectedBill.getCreateUpdateInvoiceDetail()\r\n                        )\r\n                        .then(() => {\r\n                        })\r\n                        .catch((err) => console.error(err))\r\n                        .finally(() => {\r\n                          this.vhComponent.hideLoading(0);\r\n                          this.handleSeparateTable(table1, table);\r\n                        });\r\n                    });\r\n                  });\r\n                },\r\n                nzOnCancel: () => { },\r\n              });\r\n            }\r\n            else {\r\n              this.handleSeparateTable(table1, table);\r\n            }\r\n          }\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSeparateTable(table1, table2) {\r\n    let _TABLE1_BILL: SeparateTableInfo = {\r\n      bill: null,\r\n      billDetail: [],\r\n      tableInfo: null\r\n    };\r\n    let _TABLE2_BILL: SeparateTableInfo = {\r\n      bill: null,\r\n      billDetail: [],\r\n      tableInfo: null\r\n    };\r\n    _TABLE1_BILL['tableInfo'] = table1;\r\n    _TABLE2_BILL['tableInfo'] = table2;\r\n    this.vhComponent.alertConfirm(\r\n      this.languageService.translate(\"Confirm\"),\r\n      \"\",\r\n      this.languageService.translate(\"Separate table\"),\r\n      \"OK\",\r\n      this.languageService.translate(\"Cancel\")\r\n    ).then(() => {\r\n      // Show loading\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n\r\n        // Step 1: Get Data\r\n        this.getData(_TABLE1_BILL, _TABLE2_BILL)\r\n          .then(() => {\r\n            // Step 2: Transmit\r\n            this.transmit(_TABLE1_BILL, _TABLE2_BILL, this.foodToSeparate);\r\n\r\n            // Step 3: Separate\r\n            this.separateTable(_TABLE1_BILL, _TABLE2_BILL);\r\n          })\r\n          .catch((err) => {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.showToast(2000, this.languageService.translate(\"Separate table failed\"), \"alert-toast\");\r\n          });\r\n\r\n      });\r\n    }, () => { });\r\n  }\r\n\r\n  areaChangedForSeperateTable(value) {\r\n    if (value && this.id_table) {\r\n      this.selectedAreaID = value;\r\n      this.listTables = this.vhAlgorithm.sortStringbyASC(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.selectedAreaID && item._id !== this.id_table), \"name\");\r\n    }\r\n  }\r\n\r\n  /**lấy dữ liệu bill/detail\r\n  * @param: dữ liệu 2 bàn cần tách\r\n  */\r\n  async getData(_TABLE1_BILL, _TABLE2_BILL) {\r\n    return Promise.all([\r\n      this.vhQueryCafe.getBills_byFields({ id_table: { $eq: _TABLE1_BILL['tableInfo']._id }, bill_type: { $eq: 5 }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }),\r\n      this.vhQueryCafe.getBills_byFields({ id_table: { $eq: _TABLE2_BILL['tableInfo']._id }, bill_type: { $eq: 5 }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } })\r\n    ]).then(([table1, table2]: any[]) => {\r\n      /** Kiểm tra bill muốn tách có tồn tại không */\r\n      if (!table1.length) {\r\n        this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\").then(() => this.goBackArea());\r\n        return;\r\n      }\r\n\r\n      _TABLE1_BILL['bill'] = table1[0];\r\n      if (table2.length) _TABLE2_BILL['bill'] = table2[0];\r\n      else {\r\n        _TABLE2_BILL['bill'] = { ...table1[0], total: 0, payment: 0, discount: 0, fee: 0, id_table: _TABLE2_BILL['tableInfo']._id, id_area: _TABLE2_BILL['tableInfo'].id_area };\r\n        delete _TABLE2_BILL['bill']['_id'];\r\n      }\r\n\r\n      if (table2.length) { // bàn 2 đã có khách\r\n        return Promise.all([\r\n          this.vhQueryCafe.getBill_details_byId_bill(table1[0]._id), this.vhQueryCafe.getBill_details_byId_bill(table2[0]._id)\r\n        ]).then(([billDetail1, billDetail2]: any[]) => {\r\n          _TABLE1_BILL['billDetail'] = billDetail1;\r\n          _TABLE2_BILL['billDetail'] = billDetail2;\r\n        }).catch(err => console.error(err));\r\n      } else { // bàn 2 là bàn trống\r\n        return this.vhQueryCafe.getBill_details_byId_bill(table1[0]._id).then(billDetail1 => {\r\n          _TABLE1_BILL['billDetail'] = billDetail1;\r\n        }).catch(err => console.error(err));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * Chuyển món tử bàn 1 sang bàn 2\r\n  * @param TABLE1_BILL Bill và bill detail của bàn 1\r\n  * @param TABLE2_BILL Bill và bill detail của bàn 2\r\n  * @param foodToSeparate Danh sách món ăn và số lượng cần chuyển\r\n  */\r\n  transmit(TABLE1_BILL: any, TABLE2_BILL: any, foodToSeparate: any) {\r\n    for (let i in foodToSeparate) {\r\n      let indexTable2 = TABLE2_BILL['billDetail'].findIndex(item => item._id == foodToSeparate[i]._id);\r\n      let indexTable1 = TABLE1_BILL['billDetail'].findIndex(item => item._id == foodToSeparate[i]._id);\r\n      // Nếu món ăn có topping thì chuyển toàn bộ số lượng qua\r\n      if (foodToSeparate[i].toppings && foodToSeparate[i].toppings.length) {\r\n\r\n        // tổng giá toppings\r\n        const toppingTotal: number = foodToSeparate[i].toppings ? foodToSeparate[i].toppings.reduce((sum: number, current: any) => sum + current.price * current.quantity, 0) : 0;\r\n\r\n        TABLE2_BILL['billDetail'].push({ ...foodToSeparate[i] });\r\n\r\n        // tính lại tổng\r\n        TABLE1_BILL['bill'].total -= foodToSeparate[i].price * foodToSeparate[i].quantity + toppingTotal;\r\n        TABLE2_BILL['bill'].total += foodToSeparate[i].price * foodToSeparate[i].quantity + toppingTotal;\r\n\r\n        TABLE1_BILL['billDetail'][indexTable1].quantity = 0;\r\n        // bỏ qua đoạn code dưới\r\n        continue;\r\n      }\r\n      // dành cho món không có topping\r\n      // Nếu món ăn chưa có sẵn trong đơn thì push vào mảng\r\n      else if (indexTable2 == -1) {\r\n        TABLE2_BILL['billDetail'].push({ ...foodToSeparate[i], quantity: foodToSeparate[i].quantity });\r\n      }\r\n      // Nếu món ăn chưa có sẵn trong đơn thì tăng quantity\r\n      else {\r\n        TABLE2_BILL['billDetail'][indexTable2].quantity += foodToSeparate[i].quantity;\r\n      }\r\n\r\n      TABLE1_BILL['bill'].total -= foodToSeparate[i].price * foodToSeparate[i].quantity;\r\n      TABLE2_BILL['bill'].total += foodToSeparate[i].price * foodToSeparate[i].quantity;\r\n\r\n      TABLE1_BILL['billDetail'][indexTable1].quantity -= foodToSeparate[i].quantity;\r\n    }\r\n    // lọc lại các món quantity > 0\r\n    TABLE1_BILL['billDetail'] = TABLE1_BILL['billDetail'].filter(item => item.quantity);\r\n    TABLE2_BILL['billDetail'] = TABLE2_BILL['billDetail'].filter(item => item.quantity);\r\n  }\r\n\r\n  /**Tiến hành tách bàn */\r\n  separateTable(TABLE1_BILL: any, TABLE2_BILL: any) {\r\n    //cập nhật payment\r\n    if (TABLE1_BILL['bill'].payment_type != 2) TABLE1_BILL['bill'].payment = TABLE1_BILL['bill'].total * (1 + TABLE1_BILL['bill'].tax / 100);\r\n    if (TABLE2_BILL['bill'].payment_type != 2) TABLE2_BILL['bill'].payment = TABLE2_BILL['bill'].total * (1 + TABLE2_BILL['bill'].tax / 100);\r\n\r\n    // xử lý bàn 1\r\n    const process1 = () => {\r\n      return new Promise((resolve, rejects) => {\r\n        for (let item of TABLE1_BILL['billDetail']) {\r\n          item.id_bill = TABLE1_BILL['bill']._id;\r\n        }\r\n        this.vhQueryCafe.updateBill_Billdetail(TABLE1_BILL['bill']._id, TABLE1_BILL['bill'], TABLE1_BILL['billDetail']).then(res => resolve(res)).catch(err => rejects(err));\r\n      });\r\n    };\r\n\r\n    // xử lý bàn 2\r\n    const process2 = () => {\r\n      return new Promise((resolve, rejects) => {\r\n        if (TABLE2_BILL['bill']._id) { // bàn đã có khách\r\n          for (let item of TABLE2_BILL['billDetail']) {\r\n            item.id_bill = TABLE2_BILL['bill']._id;\r\n          }\r\n          this.vhQueryCafe.updateBill_Billdetail(TABLE2_BILL['bill']._id, TABLE2_BILL['bill'], TABLE2_BILL['billDetail']).then(res => resolve(res)).catch(err => rejects(err));\r\n        } else { // bàn mới\r\n          for (let item of TABLE2_BILL['billDetail']) {\r\n            delete item.id_bill; delete item._id;\r\n          }\r\n          Promise.all([\r\n            this.vhQueryCafe.createBill_Billdetail(TABLE2_BILL['bill'], TABLE2_BILL['billDetail']),\r\n            this.vhQueryCafe.updateTable(TABLE2_BILL['bill'].id_table, { status: true })\r\n          ]).then(res => resolve(res)).catch(err => rejects(err));\r\n        }\r\n      });\r\n    };\r\n\r\n    Promise.all([process1(), process2()]).then(res => {\r\n      this.vhComponent.showToast(2000, this.languageService.translate(\"Separate table successfully\"), \"success-toast\").then(() => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.goBackArea();\r\n      });\r\n    }).catch(err => {\r\n      console.error(err);\r\n      this.vhComponent.hideLoading(0);\r\n      this.vhComponent.showToast(2000, this.languageService.translate(\"Separate table failed\"), \"alert-toast\");\r\n    });\r\n  }\r\n\r\n  goBackArea() {\r\n    this.router.navigate(['/cafe/cafe-fnb'], { state: this.dataRestore });\r\n  }\r\n}\r\n","<div>\r\n  <div>\r\n    <ewa-frame-blank style=\"--background-color: var(--ion-color-vh-green)\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"header\">\r\n      <div style=\"display: flex; justify-content: space-between;\">\r\n        <div style=\"display: flex; align-items: center; margin-left: 8px\">\r\n          <ewa-image [image_url]=\"'assets/img/logo_'+themeService.getThemeValue()+'.png'\" style=\"--width: 77px; --height: 32px\" _id=\"67e5fdbeb911f3370ea8bf1c\" _name=\"logo\"\r\n                [ewaStyle]=\"{ 'image__boundary--img': {'background-color': '#ffffff'} }\">\r\n          </ewa-image>\r\n        </div>\r\n        <div style=\"margin-right: 8px\">\r\n          <ewa-button [btn_content]=\"'Back' | translate\"\r\n            style=\"--width: 100px; --height: 36px\"\r\n            (click)=\"goBack()\"\r\n            _id=\"67ea202451fd82088506d6ad\" _name=\"Nút thoát\">\r\n          </ewa-button>\r\n        </div>\r\n      </div>\r\n    </ewa-frame-blank>\r\n  </div>\r\n  <div style=\"display: flex; width: 100%\">\r\n    <div style=\"width: 80%\">\r\n      <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #ffffff;\" _id=\"67e5fdbdf2f740b98879bf95\"\r\n        _name=\"frame-so-do-ban\">\r\n        <div class=\"grid-67e62a220db5c9bbadae6b4f\">\r\n          <div *ngFor=\"let item of listTables\" class=\"comp-67e6485eb2fb5b6663093764\">\r\n            <ewa-frame-blank\r\n              (click)=\"handleChooseTable(item)\"\r\n              [style.--background-color]=\"item.status ? 'var(--ion-color-vh-green-dark)' : '#f4f5f5'\"\r\n              style=\"--width: 100%; --min-height: 125px; --border-radius: 4px; --cursor: pointer; --border: 1px solid var(--ion-color-vh-green-dark)\"\r\n              _id=\"67e5fdbdf2f740b98879bf95\"\r\n            >\r\n              <div class=\"grid-67e6485eb2fb5b6663093764\">\r\n                <div class=\"comp-67e6485f5d38d596b15d140c\">\r\n                  <ewa-text style=\"--cursor: pointer\" [style.--color-content]=\"item.status ? '#ffffff' : '#3b4661'\" [text_content]=\"item.name\"\r\n                    _id=\"67e6485f5d38d596b15d140c\" _name=\"txt-ten-ban\">\r\n                  </ewa-text>\r\n                </div>\r\n                <div class=\"comp-67e6485fa5d1cd296750c6c1\">\r\n                  <ewa-shape _id=\"67e6485fa5d1cd296750c6c1\" _name=\"line\">\r\n                  </ewa-shape>\r\n                </div>\r\n                <div class=\"comp-67e6485ff5a1fba9268d22f0\">\r\n                  <ewa-text style=\"--cursor: pointer\" [style.--color-content]=\"item.status ? '#ffffff' : '#3b4661'\"\r\n                    [text_content]=\"item.status ? 'Đang có khách' : 'Bàn trống'\" _id=\"67e6485ff5a1fba9268d22f0\"\r\n                    _name=\"trang-thai\">\r\n                  </ewa-text>\r\n                </div>\r\n              </div>\r\n            </ewa-frame-blank>\r\n          </div>\r\n        </div>\r\n      </ewa-frame-blank>\r\n    </div>\r\n    <div style=\"width: 20%\">\r\n      <div class=\"comp-67e65f827c86f2105eaeea2c\">\r\n        <ewa-frame-blank style=\"--width: 100%; --min-height: 732px; --background-color: #f4f5f5\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"frame-so-do-ban\">\r\n          <div class=\"grid-67e65f827c86f2105eaeea2c\">\r\n            <div class=\"comp-67e65fe8b639fc82491455ea\">\r\n              <ewa-frame-blank  style=\"--width: 97.2727%; --min-height: 716px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"danh-sach-khu-vuc\">\r\n                <div class=\"grid-67e65fe8b639fc82491455ea\">\r\n                  <div *ngFor=\"let area of listArea\" class=\"comp-67e6600f6e71883d18e9c51d\">\r\n                    <ewa-frame-blank style=\"--width: 100%; --min-height: 50px; --background-color: transparent\" _id=\"67e5fdbdf2f740b98879bf95\" _name=\"khu-vuc\">\r\n                      <div class=\"grid-67e6600f6e71883d18e9c51d\">\r\n                        <div class=\"comp-67e6600f6c99cca93607bbd2\">\r\n                          <ewa-button\r\n                            [style.--background-color]=\"selectedAreaID === area._id ? 'var(--ion-color-vh-green)' : '#ffffff'\"\r\n                            [style.--color-content]=\"selectedAreaID === area._id ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                            [style.--color-icon]=\"selectedAreaID === area._id ? '#ffffff' : 'var(--ion-color-vh-green)'\"\r\n                            style=\"--border-radius: 4px; --border: 1px solid var(--ion-color-vh-green)\"\r\n                            [ewaStyle]=\"{\r\n                              'button': {\r\n                                'justify-content': 'flex-start',\r\n                                'flex-direction': 'row-reverse',\r\n                                'padding-left': '8px',\r\n                                'padding-right': '8px',\r\n                                'gap': '4px'\r\n                              }\r\n                            }\"\r\n                            [icon_name]=\"'location_on'\"\r\n                            (click)=\"action === 'separate-table' ? areaChangedForSeperateTable(area._id) : areaChanged(area._id)\"\r\n                            [btn_content]=\"area.name\"\r\n                            _id=\"67e6280f319e0b944fe3cb32\" _name=\"txt-ten-khu-vuc\"\r\n                          >\r\n                          </ewa-button>\r\n                        </div>\r\n                      </div>\r\n                    </ewa-frame-blank>\r\n                  </div>\r\n                </div>\r\n              </ewa-frame-blank>\r\n            </div>\r\n          </div>\r\n        </ewa-frame-blank>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, OnInit, ɵɵtrustConstantResourceUrl } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { SalesA4Component } from 'src/app/cafe/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/cafe/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/cafe/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/cafe/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/cafe/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoice, VhOrderInvoiceDetail, VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-list-invoice-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class ListInvoiceDetailComponent {\r\n\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhOrderInvoices\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  show_discount_product = this.vhAuth.localStorageGET(\"show_discount_product\");\r\n  public VhType = VhType;\r\n  \r\n  \r\n  \r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    public productService: ProductService,\r\n  ) {\r\n    this.getDataInvoice(this.router.getCurrentNavigation().extras.state.id_bill)\r\n    this.init()\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: number) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  init(invoice: VhOrderInvoice = null, invoiceDetail: VhOrderInvoiceDetail[] = null) {\r\n    this.invoice = new VhOrderInvoices(invoice, invoiceDetail,this.vhQueryCafe)\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee()),\r\n        partner: this.vhQueryCafe.getlocalCustomer(this.invoice.getIdPartner()),\r\n        paymentName: this.setPaymentName(this.invoice.getPaymentType()),\r\n        table: this.invoice.getIdArea() == \"go_home\" ? this.languageService.translate(\"Take away\") : `${this.vhQueryCafe.getlocalArea(this.invoice.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.invoice.getIdTable()).name}`\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    console.log(this.invoice.getInvoiceDetail());\r\n\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        console.log(invoiceDetail);\r\n\r\n        let invoiceDetailFresh: VhOrderInvoiceDetail[] =  this.vhAlgorithm.sortDatebyDESC(invoiceDetail, 'time_start_order')\r\n        this.init(invoice, invoiceDetailFresh)\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice.getID()).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack()\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQueryCafe.getlocalWallet(this.invoice.getIdWallet()).name\r\n    }\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/cafe/cafe-fnb/list-invoice'], { state: { dataRestore: this.dataRestore } });\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('sales-invoice-detail-today') && document.querySelector(\".sales-cart-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('sales-invoice-detail-today').clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<nz-layout id=\"sales-invoice-detail-today\">\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"3\" style=\"cursor: pointer;\" class=\"center-all-content\" (click)=\"goBack()\">\r\n                    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"9\" class=\"title\">\r\n                    <b>{{'Sales order' | translate}}: {{invoice.getBillCode()}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content button\">\r\n                    <div>\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                    <div>\r\n                        <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n                            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n                            {{'Delete' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"custom-scroll-bar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice.getInvoiceDetail()\" #rowSelectionTable\r\n                        nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" *ngIf=\"show_discount_product\" nzAlign='right'><b>{{'Discount value' |\r\n                                        translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <ng-container *ngFor=\"let item of rowSelectionTable.data\">\r\n                                <ng-container *ngIf=\"item.id_promotion\">\r\n                                    <tr style=\"cursor: pointer;\">\r\n                                        <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                                    </tr>\r\n                                    <ng-container *ngFor=\"let data of item.products\">\r\n                                        <tr style=\"cursor: pointer;\" >\r\n                                            <td>\r\n                                                {{data.name}} <br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    <div>{{getLotNumber(data.lots, data.id_lotproduct)}}</div> <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\" *ngFor=\"let combo of data.combos\">\r\n                                                        {{combo.quantity}}x {{combo.name}}\r\n                                                        ({{getUnit(combo.units,combo.ratio)}})\r\n                                                        <ng-container *ngIf=\"combo.lots\">\r\n                                                            <div\r\n                                                                style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                        </ng-container>,\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center' *ngIf=\"show_discount_product\"></td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let toping of data.toppings\">\r\n                                            <td>\r\n                                                <span class=\"sub-name\" style=\"padding-left:8px;\">{{toping.name}}</span>\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{toping.quantity| number:'1.0-2'}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(toping.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\">\r\n                                                    {{toping.price_origin > toping.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(toping.price_origin)\r\n                                                    : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(toping.price_origin > toping.price ? ((1 - toping.price/toping.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(toping.quantity *\r\n                                                    toping.price)}}</b>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                    <ng-container *ngFor=\"let data of item.products_gift\">\r\n                                        <tr  >\r\n                                            <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\"\r\n                                                        *ngFor=\"let combo of data.combos\">{{combo.quantity}}x {{combo.name}}\r\n                                                        ({{getUnit(combo.units,combo.ratio)}})\r\n                                                        <ng-container *ngIf=\"combo.lots\">\r\n                                                            <div\r\n                                                                style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                        </ng-container>,\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center' *ngIf=\"show_discount_product\"></td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let toping of data.toppings\">\r\n                                            <td>\r\n                                                <span class=\"sub-name\" style=\"padding-left:8px;\">{{toping.name}}</span>\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{toping.quantity| number:'1.0-2'}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(toping.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\">\r\n                                                    {{toping.price_origin > toping.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(toping.price_origin)\r\n                                                    : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(toping.price_origin > toping.price ? ((1 - toping.price/toping.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(toping.quantity *\r\n                                                    toping.price)}}</b>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                   \r\n                                    \r\n                                </ng-container>\r\n                                <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                                    <td>\r\n                                        {{item.name}}\r\n                                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                            <br><span>Số lô: {{getLotNumber(item.lots, item.id_lotproduct)}}</span>\r\n                                        </ng-container>\r\n                                        <br>\r\n                                        <ng-container *ngIf=\"item.ptype == 5\">\r\n                                            <ng-container *ngIf=\"item.combos\">\r\n                                                <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                                                    {{combo.quantity}}x {{combo.name}}\r\n                                                    ({{getUnit(combo.units,combo.ratio)}})\r\n                                                    <ng-container *ngIf=\"combo.lots\">\r\n                                                        <div\r\n                                                            style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                    </ng-container>,\r\n                                                </span>\r\n                                            </ng-container>\r\n                                        </ng-container>\r\n                                        <ng-container *ngFor=\"let property of item.properties ? item.properties : [];\">\r\n                                            <span class=\"sub-name\">\r\n                                                {{property.name}} - {{property.selectedValue}}</span><br>\r\n                                        </ng-container>\r\n\r\n                                        <!-- Hàng thời gian -->\r\n                                        <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                                            <div class=\"delete-btn\"></div>\r\n                                            <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                                            <p *ngIf=\"item.time_end_order\">\r\n                                                {{'_Ended at' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                                            </p>\r\n                                            <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                                                <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                                            </ng-container>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td>\r\n                                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">({{getUnit(item.units,item.ratio)}})</ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'><ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{item.quantity | number:'1.0-2'}}</ng-container></td>\r\n                                    <td nzAlign='right'>\r\n                                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                            {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                            <del style=\"font-size: 0.7rem;\">\r\n                                                {{item.price_origin > item.price ?\r\n                                                vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                                : ''}}\r\n                                            </del>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center' *ngIf=\"show_discount_product\">{{(item.price_origin > item.price ? ((1 - item.price/item.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr style=\"cursor: pointer;\" *ngFor=\"let data of item.toppings\">\r\n                                    <td>\r\n                                        <span class=\"sub-name\" style=\"padding-left:8px;\">{{data.name}}</span>\r\n                                        \r\n                                    </td>\r\n                                    <td> ({{getUnit(data.units,1)}})</td>\r\n                                    <td nzAlign='center'>{{data.quantity| number:'1.0-2'}}</td>\r\n                                    <td nzAlign='right'>\r\n                                        {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                        <del style=\"font-size: 0.7rem;\">\r\n                                            {{data.price_origin > data.price ?\r\n                                            vhAlgorithm.vhcurrencyunit(data.price_origin)\r\n                                            : ''}}\r\n                                        </del>\r\n                                    </td>\r\n                                    <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(data.price_origin > data.price ? ((1 - data.price/data.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                            data.price)}}</b>\r\n                                    </td>\r\n                                </tr>\r\n                                \r\n\r\n                            </ng-container>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Salesman' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Sales date' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoice.getDate() | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Table' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoiceInfo['table']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n                <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n                </div>\r\n                <!-- <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.getDiscountBill()\">\r\n                    <span>{{'Discount' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}</div>\r\n                </div> -->\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscount())}}</div>\r\n                </div>\r\n                <div class=\"bill-area-item\" *ngIf=\"invoice.getDiscountBill()\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div class=\"bill-area-item-title\">{{'Discount' | translate}}</div>\r\n\r\n                    <div class=\"bill-area-item-value\">\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"invoice.getDiscountPoint()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div>{{'Point payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountPoint())}}</div>\r\n                </div>\r\n                <div *ngIf=\"invoice.getDiscountCoupon()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div>{{'Coupon payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountCoupon())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getFee())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.getTax()/100)}}</div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Pay' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getPayment())}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Rest' | translate}}</span>\r\n                    <div style=\"color: var(--ion-color-vh-red);\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() -\r\n                        invoice.getPayment())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Payment method' | translate}}</span>\r\n                    <div>{{setPaymentName(this.invoice.getPaymentType())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.getNote()}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-list-invoice',\r\n  templateUrl: './list-invoice.component.html',\r\n  styleUrls: ['./list-invoice.component.scss']\r\n})\r\nexport class ListInvoiceComponent implements OnInit {\r\n\r\n  public bills: any[] = [];\r\n  public tempBills: any[] = [];\r\n  private startTime: Date = new Date()\r\n  private endTime: Date = new Date()\r\n  searchValue: string='';\r\n  listFilter: Array<any> = [{ value: 1, name: \"All\" }]\r\n  filterType: number = 1;\r\n  listArea: Array<any> = []\r\n  listTable = this.vhQueryCafe.getlocalTables();\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  searchList: Array<any> = [];\r\n  // bien kiểm tra show bàn phím ảo hay ko\r\n  show_keyboard: boolean = this.vhAuth.localStorageGET(\"show_keyboard\");\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.startTime.setHours(0, 0, 0, 0)\r\n    this.endTime.setHours(23, 59, 59, 59)\r\n    if (this.dataRestore['searchValueToday'] && this.dataRestore['filterTypeToday']) {\r\n      this.searchValue = this.dataRestore['searchValueToday']\r\n      this.filterType = this.dataRestore['filterTypeToday']\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n\r\n  /** Lấy bill mang về */\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQueryCafe.getBills_byFields({ date: { $gte: this.startTime, $lte: this.endTime }, bill_type: { $in: [1, 4] }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }).then((res: any) => {\r\n        this.vhComponent.hideLoading().then(() => {\r\n          this.bills = res.map(item => {\r\n            let areaName = this.languageService.translate(\"Take away\");\r\n            if (item['id_table'] != 'go_home') {\r\n              let table = this.vhQueryCafe.getlocalTable(item['id_table'])\r\n              areaName = `${this.vhQueryCafe.getlocalArea(table['id_area']).name} - ${table.name}`\r\n            }\r\n            return {\r\n              ...item, customerName: this.vhQueryCafe.getlocalCustomer(item.id_customer).name, customerPhone: this.vhQueryCafe.getlocalCustomer(item.id_customer).phone, status: this.getStatusBill(item.bill_type), areaName\r\n              , paymentName: this.renderPayment(item.payment_type, item.id_wallet), employeeName: this.vhAuth.getlocalEmployee(item.id_employee).name\r\n            }\r\n          })\r\n          this.bills.reverse();\r\n          this.listArea = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id || item._id == 'go_home' && item.status);\r\n          this.listArea.forEach((item, index) => { this.listFilter.push({ name: item.name, value: index + 2 }) })\r\n          this.totalValInvoice = this.getTotal()\r\n          this.tempBills = this.bills;\r\n          this.searchList = this.tempBills\r\n          this.sortFilter(this.filterType);\r\n\r\n        })\r\n      })\r\n    })\r\n  }\r\n  renderPayment(payment_type: 1 | 2 | 3, id_wallet: string = null) {\r\n    switch (payment_type) {\r\n      case 1: return this.languageService.translate('Cash')\r\n      case 2: return this.languageService.translate('Debit')\r\n      case 3: return this.vhQueryCafe.getlocalWallet(id_wallet).name\r\n    }\r\n  }\r\n  getStatusBill(bill_type: 1 | 4 | 5) {\r\n    switch (bill_type) {\r\n      case 1: return this.languageService.translate(\"Paid\")\r\n      case 4: return this.languageService.translate(\"Cancelled\")\r\n      default: return this.languageService.translate(\"Not paid yet\")\r\n    }\r\n  }\r\n  tableHeight: any;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-invoice-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-invoice-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  onCurrentPageDataChange(event) { }\r\n\r\n  searchBill(value: string) {\r\n    if (value) {\r\n      if (value.length) {\r\n        let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n        this.bills = this.vhAlgorithm.searchList(val, this.searchList, ['bill_code', 'employeeName', 'customerName', 'customerPhone'])\r\n      } else this.bills = [...this.searchList];\r\n\r\n    }else this.bills = [...this.searchList];\r\n  }\r\n  goBack() {\r\n    if (this.dataRestore['searchValueToday'] && this.dataRestore['filterTypeToday']) {\r\n      delete this.dataRestore['searchValueToday']\r\n      delete this.dataRestore['filterTypeToday']\r\n    }\r\n    this.router.navigate(['/cafe/cafe-fnb'], { state: this.dataRestore })\r\n  }\r\n\r\n  gotoDetail(bill) {\r\n    let dataRestore = { ...this.dataRestore, searchValueToday: this.searchValue, filterTypeToday: this.filterType }\r\n    this.router.navigate(['/cafe/cafe-fnb/list-invoice/detail'], { state: { dataRestore: dataRestore, type: bill.id_table, id_bill: bill._id } })\r\n  }\r\n\r\n  sortFilter(event) {\r\n    if (event == 1){\r\n      this.searchList = this.tempBills\r\n    }\r\n    else {\r\n      if (this.listArea[event - 2]._id == 'go_home') {\r\n        this.searchList = this.tempBills.filter(filter => filter.id_table == 'go_home')\r\n      }else {\r\n        let tableOfArea = this.listTable.filter(item => item.id_area == this.listArea[event - 2]._id)\r\n        this.searchList = this.tempBills.filter(item => {\r\n          let index = tableOfArea.findIndex(data => data._id == item.id_table);\r\n          if (index != -1) return item\r\n        })\r\n      }\r\n    }\r\n    this.totalValInvoice = this.getTotal()\r\n    this.searchBill(this.searchValue)\r\n  }\r\n\r\n  totalValInvoice: any = 0;\r\n  getTotal() {\r\n    return this.bills.reduce((prev: number, next) => prev + next.total * (1 + next.tax / 100), 0)\r\n  }\r\n}\r\n","<nz-layout id=\"sales-invoice-today\">\r\n    <div class=\"sales-invoice-today-header\" nz-row>\r\n        <div nz-col nzSpan=\"2\" class=\"left-all-content\" style=\"cursor: pointer;\" (click)=\"goBack()\">\r\n            <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n            <b>{{'Invoices today' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\" class=\"search-bill\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for invoice code, employee name, customer name, customer phone' | translate}}\"\r\n                    [(appKeyboard)]=\"searchValue\" [isKeyboardDirectiveActive]=\"show_keyboard\"\r\n                    (appKeyboardChange)=\"searchBill($event)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"title center-all-content\">\r\n            <nz-select [(ngModel)]=\"filterType\" (ngModelChange)=\"sortFilter($event)\" nzBorderless>\r\n                <nz-option *ngFor=\"let item of listFilter\" [nzValue]=\"item.value\" [nzLabel]=\"item.name | translate\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n    </div>\r\n    <div nz-row *ngIf=\"!bills.length && !tempBills.length\" style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <p>{{'No invoice today' | translate}}</p>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"tempBills.length\" style=\"margin-top: 16px;\">\r\n        <div class='total-item small-size'>{{'Total' |translate}}<span style=\"color:var(--ion-color-vh-red)\">\r\n                {{bills.length}}\r\n            </span>{{'invoices today' | translate}}\r\n        </div>\r\n        <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"bills\" #tableSales nzShowPagination nzShowSizeChanger\r\n            (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Date' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Invoice code' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Customer' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Method' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Payment method' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Employee' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                    <th nzWidth=\"10%\" nzAlign='center'><b>{{'Status' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <!-- <tr>\r\n                    <td nzAlign='left' style=\"color: var(--ion-color-vh-green);\">{{\"Total\" |translate}}</td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td class=\"money-right\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(totalValInvoice)}}</td>\r\n                </tr> -->\r\n                <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"gotoDetail(invoice)\">\r\n                    <td nzAlign='left'>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                    <td nzAlign='left'>{{invoice.bill_code}}</td>\r\n                    <td nzAlign='left'>{{invoice.customerName |translate}} <br>\r\n                        <span *ngIf=\"invoice.retail_name\">({{invoice.retail_name}} -\r\n                            {{invoice.retail_phone}} <span>{{invoice.retail_address ? '-':''}}</span>\r\n                            {{invoice.retail_address}})</span>\r\n                    </td>\r\n                    <td nzAlign='left'>{{invoice.areaName | translate}}</td>\r\n                    <td nzAlign='left'>{{invoice.paymentName}} <span\r\n                            *ngIf=\"(invoice.total*(1+invoice.tax/100) - invoice.payment ) > 0 && invoice.payment_type !=2\">\r\n                            -\r\n                            {{'Rest'|translate}} <b>{{vhAlgorithm.vhcurrencyunit(invoice.total*(1+invoice.tax/100) -\r\n                                invoice.payment )}}</b>\r\n                        </span></td>\r\n                    <td nzAlign='left'>{{invoice.employeeName}}</td>\r\n                    <td nzAlign='left'>{{invoice.note}}</td>\r\n                    <td nzAlign='left'\r\n                        [ngStyle]=\"{'color': invoice.bill_type == 4 ? 'var(--ion-color-vh-red)': 'var(--ion-color-vh-black)'}\">\r\n                        {{invoice.status}}</td>\r\n                    <td class=\"money-right\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total*(1+invoice.tax/100))}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhAlgorithm, VhAuth, VhEinvoice, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { AreaService } from 'src/app/cafe/services/area.service';\r\nimport { ThemeService } from 'src/app/cafe/services/theme.service';\r\nimport { UserService } from 'src/app/cafe/services/user.service';\r\nimport { CafeFnbSharedService } from './cafe-fnb-shared.service';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { PrintService } from 'src/app/cafe/services/print.service';\r\nimport { CustomerService } from 'src/app/cafe/services/customer.service';\r\nimport { VhBookingInvoices } from '../../interface/vh-booking';\r\nimport printJS from 'print-js';\r\ndeclare var electron: any;\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  template: ''\r\n})\r\nexport abstract class CafeFnbUI {\r\n\r\n  /** Index của tab Area (khu vực) được chọn */\r\n  get indexTabArea() {\r\n    return this.cafeSapoSharedService.indexTabArea;\r\n  }\r\n  /** Index của tab Area (khu vực) được chọn */\r\n  set indexTabArea(value) {\r\n    this.cafeSapoSharedService.indexTabArea = value;\r\n  }\r\n\r\n  /** Giá trị ô input search đơn go_home */\r\n  get searchValueAreaGoHome() {\r\n    return this.cafeSapoSharedService.searchValueAreaGoHome;\r\n  }\r\n  /** Giá trị ô input search đơn go_home */\r\n  set searchValueAreaGoHome(value) {\r\n    this.cafeSapoSharedService.searchValueAreaGoHome = value;\r\n  }\r\n\r\n  /** ID của Area (khu vực) đang được chọn */\r\n  get selectedAreaID() {\r\n    return this.cafeSapoSharedService.selectedAreaID;\r\n  }\r\n  /** ID của Area (khu vực) đang được chọn */\r\n  set selectedAreaID(value) {\r\n    this.cafeSapoSharedService.selectedAreaID = value;\r\n  }\r\n\r\n  /** ID của Bàn đang được chọn */\r\n  get selectedTableID() {\r\n    return this.cafeSapoSharedService.selectedTableID;\r\n  }\r\n  /** ID của Bàn đang được chọn */\r\n  set selectedTableID(value) {\r\n    this.cafeSapoSharedService.selectedTableID = value;\r\n  }\r\n\r\n  /** Hoá đơn đang được chọn */\r\n  get selectedBill() {\r\n    return this.cafeSapoSharedService.selectedBill;\r\n  }\r\n  /** Hoá đơn đang được chọn */\r\n  set selectedBill(value) {\r\n    this.cafeSapoSharedService.selectedBill = value;\r\n  }\r\n\r\n  /** Có hiển thị modal thanh toán hay không */\r\n  get isShowModalPay() {\r\n    return this.cafeSapoSharedService.isShowModalPay;\r\n  }\r\n  /** Có hiển thị modal thanh toán hay không */\r\n  set isShowModalPay(value) {\r\n    this.cafeSapoSharedService.isShowModalPay = value;\r\n  }\r\n\r\n  get showConfigPrintKitchenElectron() {\r\n    return this.cafeSapoSharedService.showConfigPrintKitchenElectron;\r\n  }\r\n  set showConfigPrintKitchenElectron(value) {\r\n    this.cafeSapoSharedService.showConfigPrintKitchenElectron = value;\r\n  }\r\n\r\n  get filterType() {\r\n    return this.cafeSapoSharedService.filterType;\r\n  }\r\n  set filterType(value) {\r\n    this.cafeSapoSharedService.filterType = value;\r\n  }\r\n\r\n  get showConfigPrintKitchen() {\r\n    return this.cafeSapoSharedService.showConfigPrintKitchen;\r\n  }\r\n  set showConfigPrintKitchen(value) {\r\n    this.cafeSapoSharedService.showConfigPrintKitchen = value;\r\n  }\r\n\r\n  /** Thông tin tài khoản employee hiện tại */\r\n  get user() {\r\n    return this.cafeSapoSharedService.user;\r\n  }\r\n  /** Thông tin tài khoản employee hiện tại */\r\n  set user(value) {\r\n    this.cafeSapoSharedService.user = value;\r\n  }\r\n\r\n  get branchList() {\r\n    return this.cafeSapoSharedService.branchList;\r\n  }\r\n  set branchList(value) {\r\n    this.cafeSapoSharedService.branchList = value;\r\n  }\r\n\r\n  get showConfig() {\r\n    return this.cafeSapoSharedService.showConfig;\r\n  }\r\n  set showConfig(value) {\r\n    this.cafeSapoSharedService.showConfig = value;\r\n  }\r\n\r\n  get show_modal_choose_interface() {\r\n    return this.cafeSapoSharedService.show_modal_choose_interface;\r\n  }\r\n  set show_modal_choose_interface(value) {\r\n    this.cafeSapoSharedService.show_modal_choose_interface = value;\r\n  }\r\n\r\n  get modalAccountInfo() {\r\n    return this.cafeSapoSharedService.modalAccountInfo;\r\n  }\r\n  set modalAccountInfo(value) {\r\n    this.cafeSapoSharedService.modalAccountInfo = value;\r\n  }\r\n\r\n  get showConfigSales() {\r\n    return this.cafeSapoSharedService.showConfigSales;\r\n  }\r\n  set showConfigSales(value) {\r\n    this.cafeSapoSharedService.showConfigSales = value;\r\n  }\r\n\r\n  get showConfigPrint() {\r\n    return this.cafeSapoSharedService.showConfigPrint;\r\n  }\r\n  set showConfigPrint(value) {\r\n    this.cafeSapoSharedService.showConfigPrint = value;\r\n  }\r\n\r\n  get kitchens() {\r\n    return this.cafeSapoSharedService.kitchens;\r\n  }\r\n  set kitchens(value) {\r\n    this.cafeSapoSharedService.kitchens = value;\r\n  }\r\n\r\n  get useBranch() {\r\n    return this.cafeSapoSharedService.useBranch;\r\n  }\r\n  set useBranch(value) {\r\n    this.cafeSapoSharedService.useBranch = value;\r\n  }\r\n\r\n  get default_selling_page() {\r\n    return this.cafeSapoSharedService.default_selling_page;\r\n  }\r\n  set default_selling_page(value) {\r\n    this.cafeSapoSharedService.default_selling_page = value;\r\n  }\r\n\r\n  get listFilter() {\r\n    return this.cafeSapoSharedService.listFilter;\r\n  }\r\n  set listFilter(value) {\r\n    this.cafeSapoSharedService.listFilter = value;\r\n  }\r\n\r\n  get area$() {\r\n    return this.cafeSapoSharedService.area$;\r\n  }\r\n  set area$(value) {\r\n    this.cafeSapoSharedService.area$ = value;\r\n  }\r\n\r\n  get observableTables() {\r\n    return this.cafeSapoSharedService.observableTables;\r\n  }\r\n  set observableTables(value) {\r\n    this.cafeSapoSharedService.observableTables = value;\r\n  }\r\n\r\n  get listTables() {\r\n    return this.cafeSapoSharedService.listTables;\r\n  }\r\n  set listTables(value) {\r\n    this.cafeSapoSharedService.listTables = value;\r\n  }\r\n\r\n  get listAllBills() {\r\n    return this.cafeSapoSharedService.listAllBills;\r\n  }\r\n  set listAllBills(value) {\r\n    this.cafeSapoSharedService.listAllBills = value;\r\n  }\r\n\r\n  get listBills() {\r\n    return this.cafeSapoSharedService.listBills;\r\n  }\r\n  set listBills(value) {\r\n    this.cafeSapoSharedService.listBills = value;\r\n  }\r\n\r\n  get checkPrinter() {\r\n    return this.cafeSapoSharedService.checkPrinter;\r\n  }\r\n  set checkPrinter(value) {\r\n    this.cafeSapoSharedService.checkPrinter = value;\r\n  }\r\n\r\n  get checkPrinterKitchen() {\r\n    return this.cafeSapoSharedService.checkPrinterKitchen;\r\n  }\r\n  set checkPrinterKitchen(value) {\r\n    this.cafeSapoSharedService.checkPrinterKitchen = value;\r\n  }\r\n\r\n  get printer() {\r\n    return this.cafeSapoSharedService.printer;\r\n  }\r\n  set printer(value) {\r\n    this.cafeSapoSharedService.printer = value;\r\n  }\r\n\r\n  get error_to_get_bill() {\r\n    return this.cafeSapoSharedService.error_to_get_bill;\r\n  }\r\n  set error_to_get_bill(value) {\r\n    this.cafeSapoSharedService.error_to_get_bill = value;\r\n  }\r\n\r\n  get dataRestore() {\r\n    return this.cafeSapoSharedService.dataRestore;\r\n  }\r\n  set dataRestore(value) {\r\n    this.cafeSapoSharedService.dataRestore = value;\r\n  }\r\n\r\n  get debt() {\r\n    return this.cafeSapoSharedService.debt;\r\n  }\r\n  set debt(value) {\r\n    this.cafeSapoSharedService.debt = value;\r\n  }\r\n\r\n  get branchDefault() {\r\n    return this.cafeSapoSharedService.branchDefault;\r\n  }\r\n  set branchDefault(value) {\r\n    this.cafeSapoSharedService.branchDefault = value;\r\n  }\r\n\r\n  get display_promotion_selling_price() {\r\n    return this.cafeSapoSharedService.display_promotion_selling_price;\r\n  }\r\n  set display_promotion_selling_price(value) {\r\n    this.cafeSapoSharedService.display_promotion_selling_price = value;\r\n  }\r\n\r\n\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    protected router: Router,\r\n    public vhAuth: VhAuth,\r\n    protected platform: Platform,\r\n    protected languageService: LanguageService,\r\n    protected vhComponent: VhComponent,\r\n    protected functionService: FunctionService,\r\n    protected cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    protected nzModalService: NzModalService,\r\n    protected nzMessageService: NzMessageService,\r\n    public areaService: AreaService,\r\n    public themeService: ThemeService,\r\n    public userService: UserService,\r\n    public cafeSapoSharedService: CafeFnbSharedService,\r\n    public billService: BillService,\r\n    public productService: ProductService,\r\n    protected printService: PrintService,\r\n    public vhQuery: VhQuery,\r\n    public customerService: CustomerService,\r\n    protected vhEinvoice: VhEinvoice\r\n  ) { }\r\n\r\n\r\n\r\n  onInit() {\r\n    /** Lấy dữ liệu area */\r\n    this.getAreaData();\r\n\r\n    let splash = document.getElementById(\"lottie-sync\");\r\n    if (splash) splash.remove();\r\n\r\n    this.userService.checkExpireAccount();\r\n    this.checkBranches();\r\n\r\n    if (this.dataRestore) {\r\n      /* Nhận dữ liệu từ router truyền sang */\r\n      this.searchValueAreaGoHome = this.dataRestore.searchValue || '';\r\n      this.filterType = this.dataRestore.filterType || 1;\r\n      this.indexTabArea = this.dataRestore.indexTab;\r\n\r\n      if (this.dataRestore.id_area) {\r\n        this.selectedAreaID = this.dataRestore.id_area;\r\n      }\r\n      else {\r\n        this.selectedAreaID = this.areaService.listArea[0]._id;\r\n      }\r\n    }\r\n\r\n    // xử lý nếu khu vực mang về bị disable\r\n    /** Lấy dữ liệu bill mang về */\r\n    if (this.vhQueryCafe.getlocalArea('go_home').status) {\r\n      this.getBillsGoHome();\r\n    }\r\n    else {\r\n      this.listTables = this.functionService.sortNameIncludeNumber(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.selectedAreaID)).map(item => { return { ...item, selected: false }; });\r\n      if (this.listTables.length) this.getBillByTable(this.listTables[0]);\r\n    }\r\n\r\n    this.user = this.vhAuth.getlocalEmployee(this.vhAuth.getUser()._id);\r\n\r\n    this.initPrinter();\r\n  }\r\n\r\n\r\n\r\n  afterViewChecked() {\r\n    if (document.getElementById(\"order-invoice\") && document.querySelector(\".sales-invoice-header\") && document.querySelector('.ant-tabs-nav')) {\r\n      let height = document.getElementById(\"order-invoice\").clientHeight - document.querySelector(\".sales-invoice-header\").clientHeight -\r\n        document.querySelector(\".sales-invoice-header\").clientHeight - document.querySelector('.ant-tabs-nav').clientHeight - 30 + \"px\";\r\n      if (this.listTables.length > 12) {\r\n        document.getElementById('area-order').style.height = height;\r\n      }\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  onDestroy() {\r\n    /** Hủy bỏ lắng nghe thay đổi area */\r\n    if (this.area$) this.area$.unsubscribe();\r\n    if (this.observableTables) this.observableTables.unsubscribe();\r\n  }\r\n\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n  myTrackByNameFunction(element: any, index: any) {\r\n    return element.name ? element.name : index;\r\n  }\r\n\r\n\r\n  /* --------------------------------------------------------------- KHU VỰC -------------------------------------------------------------- */\r\n\r\n  /**\r\n   * Lắng nghe thay đổi dữ liệu khu vực\r\n   */\r\n  getAreaData() {\r\n    this.area$ = this.vhQueryCafe.getObservableLocalAreas().subscribe(localArea => {\r\n      let takeAway: any = this.vhQueryCafe.getlocalArea('go_home');\r\n      // xử lý khu vực\r\n      if (takeAway) { // nếu khu vực mang về được bật\r\n        if (takeAway.status)\r\n          this.areaService.listArea = [takeAway].concat(\r\n            this.vhQueryCafe.getlocalAreas().filter(item => item.status && item._id != 'go_home' && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id)\r\n          );\r\n        else {\r\n          this.areaService.listArea = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item._id != 'go_home' && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id);\r\n        }\r\n      }\r\n      else { // nếu khu vực mang về không dc bật\r\n        this.areaService.listArea = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item._id != 'go_home' && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id);\r\n      }\r\n\r\n      // set lại area cũ\r\n      this.areaChanged(this.selectedAreaID);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thay đổi khu vực\r\n   */\r\n  areaChanged(value) {\r\n    this.selectedAreaID = value;\r\n    let index = this.areaService.listArea.findIndex(item => item._id == value);\r\n    if (index >= 0) this.indexTabArea = index;\r\n\r\n    if (value != 'go_home') {\r\n      if (!this.observableTables) {\r\n        this.observableTables = this.vhQueryCafe.getObservableLocalTables().subscribe((localTables: any) => {\r\n          this.listTables = this.functionService.sortNameIncludeNumber(localTables.filter(item => item.id_area == this.selectedAreaID)).map(item => { return { ...item, selected: false }; });\r\n        });\r\n      }\r\n      else {\r\n        this.listTables = this.functionService.sortNameIncludeNumber(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.selectedAreaID));\r\n      }\r\n    }\r\n    else {\r\n      this.selectedTableID = 'go_home';\r\n      // this.getBillsGoHome();\r\n      // this.selectedBill = null;\r\n      // this.onChangeInvoiceSelected();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------------------- IN ----------------------------------------------------------------- */\r\n\r\n  checkPlatformShowPrintKitchen() {\r\n    if (this.platform.is('electron')) {\r\n      this.showConfigPrintKitchenElectron = true;\r\n    }\r\n    else {\r\n      this.showConfigPrintKitchen = true;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo các thông số máy in\r\n   */\r\n  initPrinter() {\r\n    // kiểm tra máy in\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales');\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : null;\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable;\r\n    }\r\n    let printer_kitchen = this.vhQueryCafe.getLocalPrintPage('page_desktop_kitchen');\r\n    this.bookingPrinterKitchen = printer_kitchen ? printer_kitchen.print_sizes[printer_kitchen.print_sizes.findIndex(e => e._id == printer_kitchen.print_size_default)] : null;\r\n    this.checkPrinterKitchen = printer_kitchen ? printer_kitchen.print_sizes[printer_kitchen.print_sizes.findIndex((e) => e._id == printer_kitchen.print_size_default)] : { enable: false };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Mở trang in\r\n   */\r\n  handlePrintInvoice() {\r\n    this.vhQueryCafe.getBill(this.selectedBill.getID()).then((res: any) => {\r\n      this.selectedBill.setBillCode(res.bill_code);\r\n      this.vhComponent.showModal(this.printService.renderPrintPage(this.printer['_id']), { printer: this.printer, invoice: this.selectedBill }, false, false, `modal-print-${this.printer['_id']}`).then((modal) => {\r\n        modal.onWillDismiss().then(() => { });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Mở trang Print out for customer\r\n   */\r\n  handlePrintForCustomer() {\r\n    this.printService.handlePrintForCustomer(this.checkPrinter, this.printer, this.selectedBill);\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------------------- NAVIGATE -------------------------------------------------------------- */\r\n\r\n  gotoOrder() {\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n    if (this.selectedBill.getBillType() == 5) {\r\n      this.router.navigate(['/cafe/cafe-fnb/detail'], { state: { id_table: this.selectedTableID, id_bill: this.selectedBill.getID(), dataRestore } });\r\n    }\r\n  }\r\n  gotoBooking() {\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n    if (this.vhAuth.checkMyPermission('sales_enable_booking_table')) {\r\n      this.router.navigate(['/cafe/cafe-fnb/booking'], { state: { dataRestore } });\r\n    }\r\n    else {\r\n      this.nzMessageService.error(this.languageService.translate('You do not have this rights'));\r\n    }\r\n  }\r\n\r\n  /**\r\n  * qua trang tách bàn\r\n  * @example this.gotoSeperateTable()\r\n  */\r\n  gotoSeperateTable() {\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n\r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_separate_table\")) {\r\n      this.router.navigate([\"/cafe/cafe-fnb/seperate-table\"], { state: { dataRestore } });\r\n    } else\r\n      this.nzMessageService.error(this.languageService.translate('You do not have this rights'));\r\n  }\r\n\r\n  gotoSwitchTable() {\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n\r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_switch_table\")) {\r\n      this.router.navigate([\"/cafe/cafe-fnb/switch-table\"], { state: { dataRestore } });\r\n    } else\r\n      this.nzMessageService.error(this.languageService.translate('You do not have this rights'));\r\n  }\r\n\r\n  gotoListInvoice() {\r\n    let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n    if (this.vhAuth.checkMyPermission('sales_enable_view_bill_today')) {\r\n      this.router.navigate(['/cafe/cafe-fnb/list-invoice'], { state: { dataRestore } });\r\n    }\r\n    else {\r\n      this.nzMessageService.error(this.languageService.translate('You do not have this rights'));\r\n    }\r\n  }\r\n  gotoChangeVoucher() {\r\n    this.router.navigateByUrl('/cafe/exchange-voucher');\r\n    this.vhAuth.localStorageSET(\"isFirstTime_sales_desktop\", true);\r\n  }\r\n  gotoPrepaidCard() {\r\n    this.router.navigateByUrl('/cafe/prepaid-card', { state: { url: this.router.url } });\r\n    this.vhAuth.localStorageSET(\"isFirstTime_sales_desktop\", true);\r\n  }\r\n  gotoSalesVoucher() {\r\n    this.router.navigateByUrl('/cafe/sales-voucher');\r\n  }\r\n  gotoSalesPrepaidCard() {\r\n    this.router.navigateByUrl('/cafe/sales-payment-card');\r\n  }\r\n  gotoSalesOrder() {\r\n    this.router.navigateByUrl('/cafe/bill-web-app/sales-order');\r\n  }\r\n  gotoSalesOrderVoucher() {\r\n    this.router.navigateByUrl('/cafe/bill-web-app/sales-order-voucher');\r\n  }\r\n  gotoExchangeOrderVoucher() {\r\n    this.router.navigateByUrl('/cafe/bill-web-app/exchange-order-voucher');\r\n  }\r\n  gotoSalesOrderPrepaidCard() {\r\n    this.router.navigateByUrl('/cafe/bill-web-app/sales-order-payment-card');\r\n  }\r\n  gotoExchangeOrderCard() {\r\n    this.router.navigateByUrl('/cafe/bill-web-app/exchange-order-payment-card');\r\n  }\r\n  gotoDispatcher(item) {\r\n    this.router.navigate(['/cafe/coordination'], { state: item });\r\n  }\r\n\r\n\r\n\r\n  /* ---------------------------------------------------------------- BILL ---------------------------------------------------------------- */\r\n\r\n  /**\r\n   * lấy thông tin bill theo bàn\r\n   * @param table : bàn đã chọn\r\n   */\r\n  getBillByTable(table) {\r\n    this.listTables = this.listTables.map(item => {\r\n      if (item._id == table._id) item.selected = true;\r\n      else item.selected = false;\r\n      return { ...item };\r\n    });\r\n    this.selectedTableID = table._id;\r\n    // get bill lưu tạm của bàn về\r\n    this.vhQueryCafe.getBills_byFields({ id_table: { $eq: table['_id'] }, bill_type: { $eq: 5 }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } })\r\n      .then((bills: VhOrderInvoices) => {\r\n        // lấy bill mới nhất\r\n        bills = this.vhAlgorithm.sortDatebyDESC(bills, 'date');\r\n        if (bills[0]) {\r\n          this.selectedBill = bills[0];\r\n          this.onChangeInvoiceSelected();\r\n          // nếu bàn trắng mà get dc bill thì chuyển lại sang xanh\r\n          if (!table.status) {\r\n            this.vhQueryCafe.updateTable(table._id, { status: true });\r\n          }\r\n        }\r\n        else {\r\n          // nếu bàn đang xanh mà ko có bill thì báo lỗi để user reset hoặc liên hệ CSKH\r\n          if (table.status) {\r\n            this.vhComponent.alertConfirm(\"Lỗi\", \"Lỗi truy vấn hóa đơn\", \"Đã xảy ra lỗi trong quá trình truy vấn hóa đơn, vui lòng thử lại sau!!!\");\r\n            this.error_to_get_bill = true; // gán thành true để ở component app-invoice-detail hiển thị thông báo\r\n            this.vhQueryCafe.updateTable(table._id, {\r\n              status: false,\r\n            }).then(() => {\r\n              this.listTables = this.listTables.map(item => {\r\n                if (item._id == table._id) item.status = false;\r\n                return { ...item };\r\n              });\r\n              this.selectedBill = null;\r\n              this.error_to_get_bill = false;\r\n            });\r\n          }\r\n          else {\r\n            this.selectedBill = null;\r\n            this.onChangeInvoiceSelected();\r\n          }\r\n        }\r\n      }).catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  /* --------------------------------------------------------------- MANG VỀ -------------------------------------------------------------- */\r\n\r\n  /** Danh sách bill mang về dùng để search */\r\n  get billsGoHome() {\r\n    return this.cafeSapoSharedService.billsGoHome;\r\n  }\r\n  /** Danh sách bill mang về dùng để search */\r\n  set billsGoHome(value) {\r\n    this.cafeSapoSharedService.billsGoHome = value;\r\n  }\r\n\r\n  /** Danh sách bill mang về sẽ hiển thị */\r\n  get billsGoHomeShow() {\r\n    return this.cafeSapoSharedService.billsGoHomeShow;\r\n  }\r\n  /** Danh sách bill mang về sẽ hiển thị */\r\n  set billsGoHomeShow(value) {\r\n    this.cafeSapoSharedService.billsGoHomeShow = value;\r\n  }\r\n\r\n\r\n  /**\r\n   * Lấy danh sách bill mang về\r\n   */\r\n  getBillsGoHome() {\r\n    this.billService.getBillsGoHome()\r\n      .then((bills: any) => {\r\n        this.billsGoHome = JSON.parse(JSON.stringify(bills));\r\n        this.billsGoHomeShow = this.billsGoHome;\r\n        this.sortFilter(this.filterType);\r\n      }).catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  sortFilter(filterType: 1 | 2 | 3 | 4) {\r\n    this.billsGoHomeShow = this.billsGoHome;\r\n    switch (filterType) {\r\n      case 1: this.billsGoHomeShow.sort((prev, next) => Date.parse(next.date) - Date.parse(prev.date));; break;\r\n      case 2: this.billsGoHomeShow.sort((prev, next) => Date.parse(prev.date) - Date.parse(next.date));; break;\r\n      case 3: this.billsGoHomeShow.sort((prev, next) => (prev.total * (1 + prev.tax / 100)) - (next.total * (1 + next.tax / 100))); break;\r\n      case 4: this.billsGoHomeShow.sort((prev, next) => (next.total * (1 + next.tax / 100)) - (prev.total * (1 + prev.tax / 100))); break;\r\n    }\r\n    this.searchBillGoHome(this.searchValueAreaGoHome);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm bill mang về\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchBillGoHome(value: string) {\r\n    this.billsGoHomeShow = this.billService.searchBillGoHome(value, this.billsGoHome);\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------------------- CHI NHÁNH ------------------------------------------------------------- */\r\n\r\n  checkBranches() {\r\n    let branches = [...this.vhQueryCafe.getlocalBranchs()];\r\n    let employee = this.vhAuth.getUser();\r\n    // check branch latest\r\n    this.branchDefault = this.vhQueryCafe.getDefaultBranch();\r\n    let thisBranch = this.vhQueryCafe.getlocalBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n    if (this.branchDefault.name != thisBranch.name) {\r\n      this.vhQueryCafe.clearDefaultBranch();\r\n      this.vhQueryCafe.setDefaultBranch(thisBranch._id);\r\n      this.branchDefault = this.vhQueryCafe.getDefaultBranch();\r\n    }\r\n\r\n    if (employee['owner'] == 'boss') {\r\n      this.branchList = branches;\r\n    }\r\n    else {\r\n      this.vhAuth.getPermission(employee['_id']).then(result => {\r\n        branches.forEach(item => {\r\n          if (result[`${item._id}_login_branch`]) this.branchList.push(item);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /* ------------------------------------------------------------ BILL DETAILS ------------------------------------------------------------ */\r\n\r\n  /** Đã load xong bill và bill details hay chưa để hiển thị loading */\r\n  get isLoadedInvoice() {\r\n    return this.cafeSapoSharedService.isLoadedInvoice;\r\n  }\r\n  /** Đã load xong bill và bill details hay chưa để hiển thị loading */\r\n  set isLoadedInvoice(value) {\r\n    this.cafeSapoSharedService.isLoadedInvoice = value;\r\n  }\r\n\r\n  /** Đã load xong bill và bill details hay chưa để hiển thị loading */\r\n  get isLoadedInvoice2() {\r\n    return this.cafeSapoSharedService.isLoadedInvoice;\r\n  }\r\n  /** Đã load xong bill và bill details hay chưa để hiển thị loading */\r\n  set isLoadedInvoice2(value) {\r\n    this.cafeSapoSharedService.isLoadedInvoice = value;\r\n  }\r\n\r\n  // thông tin bàn đang được đặt\r\n  get tableInfo() {\r\n    return this.cafeSapoSharedService.tableInfo;\r\n  }\r\n  // thông tin bàn đang được đặt\r\n  set tableInfo(value) {\r\n    this.cafeSapoSharedService.tableInfo = value;\r\n  }\r\n\r\n  get nzOptions() {\r\n    return this.cafeSapoSharedService.nzOptions;\r\n  }\r\n  set nzOptions(value) {\r\n    this.cafeSapoSharedService.nzOptions = value;\r\n  }\r\n\r\n  get percent_discount() {\r\n    return this.cafeSapoSharedService.percent_discount;\r\n  }\r\n  set percent_discount(value) {\r\n    this.cafeSapoSharedService.percent_discount = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lý khi chọn Bàn\r\n   */\r\n  onChangeInvoiceSelected() {\r\n    this.initInvoice();\r\n    this.getWallets();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo hóa đơn\r\n   */\r\n  initInvoice() {\r\n    if (this.selectedBill) {\r\n      this.selectedBill = new VhOrderInvoices(this.selectedBill, [], this.vhQueryCafe);\r\n      this.selectedBill.setIdTable(this.selectedTableID);\r\n      this.selectedBill.setIdEmployee(this.vhAuth.getUser()._id);\r\n      this.selectedBill.setIdArea(this.selectedAreaID);\r\n\r\n      // lấy thuế\r\n      let tax: any = this.vhQueryCafe.getlocalTaxs().find(tax => tax.status && tax.default);\r\n      if (tax) this.selectedBill.setTax(parseFloat(tax.value));\r\n      if (this.selectedBill.getID()) {\r\n        // bàn đã sinh bill\r\n        Promise.all([\r\n          this.vhQueryCafe.getBill(this.selectedBill.getID()),\r\n          this.vhQueryCafe.getBill_details_byId_bill(this.selectedBill.getID()),\r\n        ]).then(([bill, billDetail]) => {\r\n          if (!bill) {\r\n            this.nzModalService.confirm({\r\n              nzTitle: '<i>' + this.languageService.translate(\"The invoice is not existed\") + '</i>',\r\n              nzIconType: \"info-circle\"\r\n            });\r\n            this.deleteBill();\r\n            // this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\");\r\n            return;\r\n          }\r\n          this.selectedBill = new VhOrderInvoices(bill, this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'), this.vhQueryCafe);\r\n          if (this.selectedBill) {\r\n            this.percent_discount = this.selectedBill.getDiscount() / this.selectedBill.getSubTotal() * 100;\r\n          }\r\n\r\n          // kiểm tra cho phép nợ\r\n          this.debt = this.selectedBill.getIdPartner() == \"id_retail\" ? false : this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner());\r\n          this.isLoadedInvoice = true;\r\n        }).catch(err => {\r\n          console.error(err);\r\n          this.nzMessageService.error(this.languageService.translate(\"Lỗi kết nối\"));\r\n        });\r\n        // lấy thông tin bàn\r\n        if (this.selectedBill.getIdTable() == \"go_home\") {\r\n          this.tableInfo = this.languageService.translate(\"Take away\");\r\n        }\r\n        else {\r\n          this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n        }\r\n        // kiểm tra máy in\r\n        this.initPrinter();\r\n      }\r\n      else { // neu bản chưa co bill\r\n        this.selectedBill = null;\r\n        this.isLoadedInvoice = true;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo đơn hàng\r\n   */\r\n  createBill() {\r\n    this.billService.createBill(this.selectedAreaID, this.selectedTableID, this.searchValueAreaGoHome, this.indexTabArea, this.filterType);\r\n  }\r\n\r\n\r\n\r\n  deleteBill() {\r\n    this.billsGoHomeShow = this.billsGoHome.filter(item => item._id != this.selectedBill.getID());\r\n    this.selectedBill = null;\r\n    this.onChangeInvoiceSelected();\r\n  }\r\n\r\n\r\n\r\n  getWallets() {\r\n    this.nzOptions[2].children = this.vhQueryCafe.getlocalWallets()\r\n      .filter(wallet => wallet._id != 'id_cash' &&\r\n        wallet.id_branch == this.vhQueryCafe.getDefaultBranch()._id\r\n      ).map(wallet => {\r\n        return { label: wallet.name, value: wallet._id, isLeaf: true };\r\n      });\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------- MODAL THÔNG TIN THANH TOÁN ----------------------------------------------------- */\r\n\r\n  get invoice_cash() {\r\n    return this.cafeSapoSharedService.invoice_cash;\r\n  }\r\n  set invoice_cash(value) {\r\n    this.cafeSapoSharedService.invoice_cash = value;\r\n  }\r\n\r\n  get moneyEdit() {\r\n    return this.cafeSapoSharedService.moneyEdit;\r\n  }\r\n  set moneyEdit(value) {\r\n    this.cafeSapoSharedService.moneyEdit = value;\r\n  }\r\n\r\n\r\n  /**\r\n   * Khi mở modal Thanh toán\r\n   */\r\n  openPayModal() {\r\n    this.isShowModalPay = true;\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n    setTimeout(() => {\r\n      this.moneyEdit['cash'] = this.vhAlgorithm.vhnumeral(\".customerPay1\");\r\n    }, 500);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả cash\r\n   * @param value\r\n   */\r\n  checkMaxLengthCash(value: string) {\r\n    if (parseFloat(value) > 999999999999) {\r\n      value = value.slice(0, 12); this.invoice_cash = value;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  updateCash() {\r\n    this.selectedBill.setCash(parseFloat(this.moneyEdit['cash'].getRawValue()));\r\n    this.vhQueryCafe.updateBill(this.selectedBill.getID(), { cash: parseFloat(this.moneyEdit['cash'].getRawValue()) })\r\n      .then((bool) => {\r\n        // console.log('updateBill', bool);\r\n      }, error => {\r\n        this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"An error while updating bill\"));\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n  /** Thanh toán hóa đơn\r\n  * @param print: cho phép in hóa đơn hay k?\r\n  */\r\n  saveInvoice(print: 'print' | 'notPrint') {\r\n    if (!this.vhAuth.checkLocalMyPermissionName('sales_enable_payment')) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('You do not have this rights'));\r\n      return;\r\n    }\r\n    if (this.getTotalEarningPoint() || this.selectedBill.getUsePoint()) {\r\n      let earned_points =\r\n        this.getTotalEarningPoint() - this.selectedBill.getUsePoint();\r\n      this.vhQueryCafe.updateCustomer_byEarnedPoints(\r\n        this.selectedBill.getIdPartner(),\r\n        earned_points\r\n      );\r\n      this.selectedBill.setEarningPointBill(this.getTotalEarningPoint());\r\n    }\r\n    // if (print == \"print\") {\r\n    if (this.checkPrinter) {\r\n      this.statusInvoice['payment'] = true;\r\n      this.vhComponent.showLoading('').then(() => {\r\n        const bill: any = {...this.selectedBill};\r\n        const invoiceTemp = {...bill?.invoice};\r\n        this.createProcess().then(async (res: any) => {\r\n          if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n          this.nzMessageService.success(\r\n            `${this.languageService.translate(\r\n              'Sales invoice'\r\n            )} ${this.selectedBill.getBillCode()} ${this.languageService.translate(\r\n              'has been created successfully'\r\n            )}`\r\n          );\r\n          this.handlePrintInvoice();\r\n          // this.goBack(false)\r\n\r\n          this.statusInvoice['payment'] = false;\r\n          this.isShowModalPay = false;\r\n          this.vhComponent.hideLoading(0);\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      this.statusInvoice['payment'] = true;\r\n      this.vhComponent.showLoading('').then(() => {\r\n        const bill: any = {...this.selectedBill};\r\n        const invoiceTemp = {...bill?.invoice};\r\n        this.createProcess().then(async (res) => {\r\n          if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n          this.nzMessageService.success(\r\n            `${this.languageService.translate(\r\n              'Sales invoice'\r\n            )} ${this.selectedBill.getBillCode()} ${this.languageService.translate(\r\n              'has been created successfully'\r\n            )}`\r\n          );\r\n          this.goBack();\r\n\r\n          this.statusInvoice['payment'] = false;\r\n          this.isShowModalPay = false;\r\n          this.vhComponent.hideLoading(0);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /* ----------------------------------------------------- BILL DETAIL ----------------------------------------------------- */\r\n  get statusInvoice() {\r\n    return this.cafeSapoSharedService.statusInvoice;\r\n  }\r\n  set statusInvoice(value) {\r\n    this.cafeSapoSharedService.statusInvoice = value;\r\n  }\r\n\r\n  get stamp() {\r\n    return this.cafeSapoSharedService.stamp;\r\n  }\r\n  set stamp(value) {\r\n    this.cafeSapoSharedService.stamp = value;\r\n  }\r\n\r\n  get observableSyncOpeningBill() {\r\n    return this.cafeSapoSharedService.observableSyncOpeningBill;\r\n  }\r\n  set observableSyncOpeningBill(value) {\r\n    this.cafeSapoSharedService.observableSyncOpeningBill = value;\r\n  }\r\n\r\n  get list_earning_point_bills() {\r\n    return this.cafeSapoSharedService.list_earning_point_bills;\r\n  }\r\n  set list_earning_point_bills(value) {\r\n    this.cafeSapoSharedService.list_earning_point_bills = value;\r\n  }\r\n\r\n  get list_earning_points_products() {\r\n    return this.cafeSapoSharedService.list_earning_points_products;\r\n  }\r\n  set list_earning_points_products(value) {\r\n    this.cafeSapoSharedService.list_earning_points_products = value;\r\n  }\r\n\r\n  get default_price_type() {\r\n    return this.cafeSapoSharedService.default_price_type;\r\n  }\r\n  set default_price_type(value) {\r\n    this.cafeSapoSharedService.default_price_type = value;\r\n  }\r\n\r\n  get customer_class() {\r\n    return this.cafeSapoSharedService.customer_class;\r\n  }\r\n  set customer_class(value) {\r\n    this.cafeSapoSharedService.customer_class = value;\r\n  }\r\n\r\n  get program_bill() {\r\n    return this.cafeSapoSharedService.program_bill;\r\n  }\r\n  set program_bill(value) {\r\n    this.cafeSapoSharedService.program_bill = value;\r\n  }\r\n\r\n  get program_product() {\r\n    return this.cafeSapoSharedService.program_product;\r\n  }\r\n  set program_product(value) {\r\n    this.cafeSapoSharedService.program_product = value;\r\n  }\r\n\r\n  get earning_point() {\r\n    return this.cafeSapoSharedService.earning_point;\r\n  }\r\n  set earning_point(value) {\r\n    this.cafeSapoSharedService.earning_point = value;\r\n  }\r\n\r\n  get isGotPromotion() {\r\n    return this.cafeSapoSharedService.isGotPromotion;\r\n  }\r\n  set isGotPromotion(value) {\r\n    this.cafeSapoSharedService.isGotPromotion = value;\r\n  }\r\n\r\n  get showProductGift() {\r\n    return this.cafeSapoSharedService.showProductGift;\r\n  }\r\n  set showProductGift(value) {\r\n    this.cafeSapoSharedService.showProductGift = value;\r\n  }\r\n\r\n  get product_gift_type7() {\r\n    return this.cafeSapoSharedService.product_gift_type7;\r\n  }\r\n  set product_gift_type7(value) {\r\n    this.cafeSapoSharedService.product_gift_type7 = value;\r\n  }\r\n\r\n  get showProductGiftType7() {\r\n    return this.cafeSapoSharedService.showProductGiftType7;\r\n  }\r\n  set showProductGiftType7(value) {\r\n    this.cafeSapoSharedService.showProductGiftType7 = value;\r\n  }\r\n\r\n  get gotten_gift_type7() {\r\n    return this.cafeSapoSharedService.gotten_gift_type7;\r\n  }\r\n  set gotten_gift_type7(value) {\r\n    this.cafeSapoSharedService.gotten_gift_type7 = value;\r\n  }\r\n\r\n  get bill_details_pmtype_7() {\r\n    return this.cafeSapoSharedService.bill_details_pmtype_7;\r\n  }\r\n  set bill_details_pmtype_7(value) {\r\n    this.cafeSapoSharedService.bill_details_pmtype_7 = value;\r\n  }\r\n\r\n  get showDrawerProductList() {\r\n    return this.cafeSapoSharedService.showDrawerProductList;\r\n  }\r\n  set showDrawerProductList(value) {\r\n    this.cafeSapoSharedService.showDrawerProductList = value;\r\n  }\r\n\r\n  get showDrawerEdit() {\r\n    return this.cafeSapoSharedService.showDrawerEdit;\r\n  }\r\n  set showDrawerEdit(value) {\r\n    this.cafeSapoSharedService.showDrawerEdit = value;\r\n  }\r\n\r\n  get showPrintKitchenAgain() {\r\n    return this.cafeSapoSharedService.showPrintKitchenAgain;\r\n  }\r\n  set showPrintKitchenAgain(value) {\r\n    this.cafeSapoSharedService.showPrintKitchenAgain = value;\r\n  }\r\n\r\n  get printKitchen() {\r\n    return this.cafeSapoSharedService.printKitchen;\r\n  }\r\n  set printKitchen(value) {\r\n    this.cafeSapoSharedService.printKitchen = value;\r\n  }\r\n\r\n  get wishList() {\r\n    return this.cafeSapoSharedService.wishList;\r\n  }\r\n  set wishList(value) {\r\n    this.cafeSapoSharedService.wishList = value;\r\n  }\r\n\r\n  get productWishList() {\r\n    return this.cafeSapoSharedService.productWishList;\r\n  }\r\n  set productWishList(value) {\r\n    this.cafeSapoSharedService.productWishList = value;\r\n  }\r\n\r\n  get show_modal_select_lots() {\r\n    return this.cafeSapoSharedService.show_modal_select_lots;\r\n  }\r\n  set show_modal_select_lots(value) {\r\n    this.cafeSapoSharedService.show_modal_select_lots = value;\r\n  }\r\n\r\n  get list_search_lot() {\r\n    return this.cafeSapoSharedService.list_search_lot;\r\n  }\r\n  set list_search_lot(value) {\r\n    this.cafeSapoSharedService.list_search_lot = value;\r\n  }\r\n\r\n  get warning_lot_expried() {\r\n    return this.cafeSapoSharedService.warning_lot_expried;\r\n  }\r\n  set warning_lot_expried(value) {\r\n    this.cafeSapoSharedService.warning_lot_expried = value;\r\n  }\r\n\r\n  get dispatchers_enable() {\r\n    return this.cafeSapoSharedService.dispatchers_enable;\r\n  }\r\n  set dispatchers_enable(value) {\r\n    this.cafeSapoSharedService.dispatchers_enable = value;\r\n  }\r\n\r\n  get open_dialog_print_kitchen_bill_detail() {\r\n    return this.cafeSapoSharedService.open_dialog_print_kitchen_bill_detail;\r\n  }\r\n  set open_dialog_print_kitchen_bill_detail(value) {\r\n    this.cafeSapoSharedService.open_dialog_print_kitchen_bill_detail = value;\r\n  }\r\n\r\n  get id_branch() {\r\n    return this.cafeSapoSharedService.id_branch;\r\n  }\r\n  set id_branch(value) {\r\n    this.cafeSapoSharedService.id_branch = value;\r\n  }\r\n\r\n  get show_modal_dispatcher() {\r\n    return this.cafeSapoSharedService.show_modal_dispatcher;\r\n  }\r\n  set show_modal_dispatcher(value) {\r\n    this.cafeSapoSharedService.show_modal_dispatcher = value;\r\n  }\r\n\r\n  get dispatcherzones() {\r\n    return this.cafeSapoSharedService.dispatcherzones;\r\n  }\r\n  set dispatcherzones(value) {\r\n    this.cafeSapoSharedService.dispatcherzones = value;\r\n  }\r\n\r\n  get id_dispatcherzone() {\r\n    return this.cafeSapoSharedService.id_dispatcherzone;\r\n  }\r\n  set id_dispatcherzone(value) {\r\n    this.cafeSapoSharedService.id_dispatcherzone = value;\r\n  }\r\n\r\n  get management_product_price2() {\r\n    return this.cafeSapoSharedService.management_product_price2;\r\n  }\r\n  set management_product_price2(value) {\r\n    this.cafeSapoSharedService.management_product_price2 = value;\r\n  }\r\n\r\n  get editPrice() {\r\n    return this.cafeSapoSharedService.editPrice;\r\n  }\r\n  set editPrice(value) {\r\n    this.cafeSapoSharedService.editPrice = value;\r\n  }\r\n\r\n  get choiceFood() {\r\n    return this.cafeSapoSharedService.choiceFood;\r\n  }\r\n  set choiceFood(value) {\r\n    this.cafeSapoSharedService.choiceFood = value;\r\n  }\r\n\r\n  get customerList() {\r\n    return this.cafeSapoSharedService.customerList;\r\n  }\r\n  set customerList(value) {\r\n    this.cafeSapoSharedService.customerList = value;\r\n  }\r\n\r\n  get customerSearchList() {\r\n    return this.cafeSapoSharedService.customerSearchList;\r\n  }\r\n  set customerSearchList(value) {\r\n    this.cafeSapoSharedService.customerSearchList = value;\r\n  }\r\n\r\n  get customerType() {\r\n    return this.cafeSapoSharedService.customerType;\r\n  }\r\n  set customerType(value) {\r\n    this.cafeSapoSharedService.customerType = value;\r\n  }\r\n\r\n  get customer() {\r\n    return this.cafeSapoSharedService.customer;\r\n  }\r\n  set customer(value) {\r\n    this.cafeSapoSharedService.customer = value;\r\n  }\r\n\r\n  get showDrawerAddCustomer() {\r\n    return this.cafeSapoSharedService.showDrawerAddCustomer;\r\n  }\r\n  set showDrawerAddCustomer(value) {\r\n    this.cafeSapoSharedService.showDrawerAddCustomer = value;\r\n  }\r\n\r\n  get showDrawerCustomerInfo() {\r\n    return this.cafeSapoSharedService.showDrawerCustomerInfo;\r\n  }\r\n  set showDrawerCustomerInfo(value) {\r\n    this.cafeSapoSharedService.showDrawerCustomerInfo = value;\r\n  }\r\n\r\n  get showDrawerAddRetail() {\r\n    return this.cafeSapoSharedService.showDrawerAddRetail;\r\n  }\r\n  set showDrawerAddRetail(value) {\r\n    this.cafeSapoSharedService.showDrawerAddRetail = value;\r\n  }\r\n\r\n  get showModalChangePriceType() {\r\n    return this.cafeSapoSharedService.showModalChangePriceType;\r\n  }\r\n  set showModalChangePriceType(value) {\r\n    this.cafeSapoSharedService.showModalChangePriceType = value;\r\n  }\r\n\r\n  get showModalOtherDiscount() {\r\n    return this.cafeSapoSharedService.showModalOtherDiscount;\r\n  }\r\n  set showModalOtherDiscount(value) {\r\n    this.cafeSapoSharedService.showModalOtherDiscount = value;\r\n  }\r\n\r\n  get showModalSeparateTable() {\r\n    return this.cafeSapoSharedService.showModalSeparateTable;\r\n  }\r\n  set showModalSeparateTable(value) {\r\n    this.cafeSapoSharedService.showModalSeparateTable = value;\r\n  }\r\n\r\n  get showModalChooseTableToSwitch() {\r\n    return this.cafeSapoSharedService.showModalChooseTableToSwitch;\r\n  }\r\n  set showModalChooseTableToSwitch(value) {\r\n    this.cafeSapoSharedService.showModalChooseTableToSwitch = value;\r\n  }\r\n\r\n  get show_box_search() {\r\n    return this.cafeSapoSharedService.show_box_search;\r\n  }\r\n  set show_box_search(value) {\r\n    this.cafeSapoSharedService.show_box_search = value;\r\n  }\r\n\r\n  get point_validity() {\r\n    return this.cafeSapoSharedService.point_validity;\r\n  }\r\n  set point_validity(value) {\r\n    this.cafeSapoSharedService.point_validity = value;\r\n  }\r\n\r\n  get createStatus() {\r\n    return this.cafeSapoSharedService.createStatus;\r\n  }\r\n  set createStatus(value) {\r\n    this.cafeSapoSharedService.createStatus = value;\r\n  }\r\n\r\n  get addCustomerForm() {\r\n    return this.cafeSapoSharedService.addCustomerForm;\r\n  }\r\n  set addCustomerForm(value) {\r\n    this.cafeSapoSharedService.addCustomerForm = value;\r\n  }\r\n\r\n  get addRetailForm() {\r\n    return this.cafeSapoSharedService.addRetailForm;\r\n  }\r\n  set addRetailForm(value) {\r\n    this.cafeSapoSharedService.addRetailForm = value;\r\n  }\r\n\r\n  get selectedValue() {\r\n    return this.cafeSapoSharedService.selectedValue;\r\n  }\r\n  set selectedValue(value) {\r\n    this.cafeSapoSharedService.selectedValue = value;\r\n  }\r\n\r\n  get phone() {\r\n    return this.cafeSapoSharedService.phone;\r\n  }\r\n  set phone(value) {\r\n    this.cafeSapoSharedService.phone = value;\r\n  }\r\n\r\n  get invoice_discount() {\r\n    return this.cafeSapoSharedService.invoice_discount;\r\n  }\r\n  set invoice_discount(value) {\r\n    this.cafeSapoSharedService.invoice_discount = value;\r\n  }\r\n\r\n  get invoice_fee() {\r\n    return this.cafeSapoSharedService.invoice_fee;\r\n  }\r\n  set invoice_fee(value) {\r\n    this.cafeSapoSharedService.invoice_fee = value;\r\n  }\r\n\r\n  get invoice_note() {\r\n    return this.cafeSapoSharedService.invoice_note;\r\n  }\r\n  set invoice_note(value) {\r\n    this.cafeSapoSharedService.invoice_note = value;\r\n  }\r\n\r\n  get invoice_payment() {\r\n    return this.cafeSapoSharedService.invoice_payment;\r\n  }\r\n  set invoice_payment(value) {\r\n    this.cafeSapoSharedService.invoice_payment = value;\r\n  }\r\n\r\n  get value_discount_point() {\r\n    return this.cafeSapoSharedService.value_discount_point;\r\n  }\r\n  set value_discount_point(value) {\r\n    this.cafeSapoSharedService.value_discount_point = value;\r\n  }\r\n\r\n  get product_codes() {\r\n    return this.cafeSapoSharedService.product_codes;\r\n  }\r\n  set product_codes(value) {\r\n    this.cafeSapoSharedService.product_codes = value;\r\n  }\r\n\r\n  get foodList() {\r\n    return this.cafeSapoSharedService.foodList;\r\n  }\r\n  set foodList(value) {\r\n    this.cafeSapoSharedService.foodList = value;\r\n  }\r\n\r\n  get serviceList() {\r\n    return this.cafeSapoSharedService.serviceList;\r\n  }\r\n  set serviceList(value) {\r\n    this.cafeSapoSharedService.serviceList = value;\r\n  }\r\n\r\n  get sideDishesList() {\r\n    return this.cafeSapoSharedService.sideDishesList;\r\n  }\r\n  set sideDishesList(value) {\r\n    this.cafeSapoSharedService.sideDishesList = value;\r\n  }\r\n\r\n  get combosList() {\r\n    return this.cafeSapoSharedService.combosList;\r\n  }\r\n  set combosList(value) {\r\n    this.cafeSapoSharedService.combosList = value;\r\n  }\r\n\r\n  get searchList() {\r\n    return this.cafeSapoSharedService.searchList;\r\n  }\r\n  set searchList(value) {\r\n    this.cafeSapoSharedService.searchList = value;\r\n  }\r\n\r\n  get choiceFoodSearch() {\r\n    return this.cafeSapoSharedService.choiceFoodSearch;\r\n  }\r\n  set choiceFoodSearch(value) {\r\n    this.cafeSapoSharedService.choiceFoodSearch = value;\r\n  }\r\n\r\n  get list_menu() {\r\n    return this.cafeSapoSharedService.list_menu;\r\n  }\r\n  set list_menu(value) {\r\n    this.cafeSapoSharedService.list_menu = value;\r\n  }\r\n\r\n  get listTabs() {\r\n    return this.cafeSapoSharedService.listTabs;\r\n  }\r\n  set listTabs(value) {\r\n    this.cafeSapoSharedService.listTabs = value;\r\n  }\r\n\r\n  get indexTab() {\r\n    return this.cafeSapoSharedService.indexTab;\r\n  }\r\n  set indexTab(value) {\r\n    this.cafeSapoSharedService.indexTab = value;\r\n  }\r\n\r\n  get showOptions() {\r\n    return this.cafeSapoSharedService.showOptions;\r\n  }\r\n  set showOptions(value) {\r\n    this.cafeSapoSharedService.showOptions = value;\r\n  }\r\n\r\n  get isAddingFood() {\r\n    return this.cafeSapoSharedService.isAddingFood;\r\n  }\r\n  set isAddingFood(value) {\r\n    this.cafeSapoSharedService.isAddingFood = value;\r\n  }\r\n\r\n  get tempVal() {\r\n    return this.cafeSapoSharedService.tempVal;\r\n  }\r\n  set tempVal(value) {\r\n    this.cafeSapoSharedService.tempVal = value;\r\n  }\r\n\r\n  get auto_hidden_lot() {\r\n    return this.cafeSapoSharedService.auto_hidden_lot;\r\n  }\r\n  set auto_hidden_lot(value) {\r\n    this.cafeSapoSharedService.auto_hidden_lot = value;\r\n  }\r\n\r\n  get auto_select_lot() {\r\n    return this.cafeSapoSharedService.auto_select_lot;\r\n  }\r\n  set auto_select_lot(value) {\r\n    this.cafeSapoSharedService.auto_select_lot = value;\r\n  }\r\n\r\n  get tempSearchType() {\r\n    return this.cafeSapoSharedService.tempSearchType;\r\n  }\r\n  set tempSearchType(value) {\r\n    this.cafeSapoSharedService.tempSearchType = value;\r\n  }\r\n\r\n  get isExit() {\r\n    return this.cafeSapoSharedService.isExit;\r\n  }\r\n  set isExit(value) {\r\n    this.cafeSapoSharedService.isExit = value;\r\n  }\r\n\r\n  /**\r\n  * Khởi tạo hóa đơn\r\n  * @param dataTrans: dữ liệu state\r\n  */\r\n  initInvoice2(dataTrans) {\r\n    this.isLoadedInvoice2 = false;\r\n\r\n    this.selectedBill.setIdTable(dataTrans['id_table']);\r\n    this.selectedBill.setIdEmployee(this.vhAuth.getUser()._id);\r\n    this.selectedBill.setIdArea(this.dataRestore['id_area']);\r\n\r\n    // lấy thuế\r\n    let tax: any = this.vhQueryCafe.getlocalTaxs().find((tax) => tax.status && tax.default);\r\n    if (tax) this.selectedBill.setTax(parseFloat(tax.value));\r\n    if (dataTrans.id_bill) {\r\n      // bàn đã sinh bill\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(dataTrans.id_bill),\r\n        this.vhQueryCafe.getBill_details_byId_bill(dataTrans.id_bill),\r\n        this.vhComponent.showLoading('', 'transparent-loading', null, 0, false),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", {\r\n          id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n          default: { $eq: true },\r\n        }),\r\n        this.vhQueryCafe.getEarningPointsBills(),\r\n        this.vhQueryCafe.getEarningPointsProducts(),\r\n      ])\r\n        .then(\r\n          ([\r\n            bill,\r\n            billDetail,\r\n            loading,\r\n            label,\r\n            earning_point_bills,\r\n            earning_points_products,\r\n          ]) => {\r\n            if (label['length'] && label[0].status) this.stamp = label[0];\r\n            this.list_earning_point_bills = earning_point_bills;\r\n            this.list_earning_points_products = earning_points_products;\r\n\r\n            if (!bill) {\r\n              this.vhComponent.alertMessage('', '', this.languageService.translate('The invoice is not existed'), 'OK').then(() => this.goBack());\r\n              return;\r\n            }\r\n\r\n            this.selectedBill = new VhOrderInvoices(\r\n              bill,\r\n              this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n              this.vhQueryCafe,\r\n              this.platform\r\n            );\r\n            this.initCustomer();\r\n\r\n            this.getClassAndProgram();\r\n            // kiểm tra cho phép nợ\r\n            this.debt = this.selectedBill.getIdPartner() == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner());\r\n            this.observableCheckBill(bill['_id']);\r\n            this.default_price_type = this.selectedBill.getPriceType() ? this.selectedBill.getPriceType() : 1;\r\n\r\n            // Xử lý dịch vụ thời gian\r\n            if(this.selectedBill.getInvoiceDetail().length && this.productService.isContainServiceTime(this.selectedBill)) {\r\n              this.endTime = new Date();\r\n              // set lại price\r\n              this.selectedBill.getInvoiceDetail()?.forEach((item, index) => {\r\n                if (item.ptype === VhType.SERVICETIME && !item.is_paused) {\r\n                  const newItem = { ...item, time_end_order: this.endTime };\r\n                  const serviceTimePrice: any = this.productService.calculateServiceTimePrice(newItem, this.endTime, this.selectedBill.getPriceType());\r\n                  newItem.price = serviceTimePrice.total_price;\r\n                  newItem.price_origin = serviceTimePrice.total_price;\r\n                  this.selectedBill.getInvoiceDetail()[index] = { ...newItem };\r\n                }\r\n              });\r\n              // Tính lại total cho bill\r\n              this.selectedBill.setSubTotal();\r\n            }\r\n            // Xử lí khi bill có khuyến mãi\r\n            if (bill['is_promotion']) {\r\n              /** Chứa các bill_detail có ptype = 6 */\r\n              let bill_details_type_6;\r\n              /** Chứa các bill_detail có ptype != 6 */\r\n              let bill_details_others;\r\n              // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n              if(this.productService.isContainServiceTime(this.selectedBill)) {\r\n                bill_details_type_6 = this.selectedBill.getInvoiceDetail().filter((item) => item.ptype === 6);\r\n                bill_details_others = this.selectedBill.getInvoiceDetail().filter((item) => item.ptype !== 6);\r\n                this.selectedBill = new VhOrderInvoices(\r\n                  this.selectedBill.getCreateUpdateInvoice(5),\r\n                  bill_details_others,\r\n                  this.vhQueryCafe,\r\n                  this.platform\r\n                );\r\n              }\r\n              return this.vhQueryCafe.changeBillDetails_withPromotions(\r\n                this.selectedBill.getInvoiceDetail(),\r\n                this.selectedBill.getDate()\r\n              )\r\n                .then((bill_details_display: any) => {\r\n                  // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n                  if(this.productService.isContainServiceTime(this.selectedBill)) {\r\n                    bill_details_display.bill_details_pmtype_0to6 = [\r\n                      ...bill_details_type_6,\r\n                      ...bill_details_display.bill_details_pmtype_0to6,\r\n                    ];\r\n                  }\r\n      \r\n                  this.handleChooseLotForPromotion(\r\n                    bill_details_display.bill_details_pmtype_0to6\r\n                  );\r\n                  this.handleChooseLotForPromotion(\r\n                    bill_details_display.bill_details_pmtype_7\r\n                  );\r\n                  this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC(\r\n                    [...bill_details_display.bill_details_pmtype_7],\r\n                    'total_bill_value'\r\n                  );\r\n                  this.selectedBill = new VhOrderInvoices(\r\n                    this.selectedBill.getCreateUpdateInvoice(5),\r\n                    [...bill_details_display.bill_details_pmtype_0to6],\r\n                    this.vhQueryCafe,\r\n                    this.platform\r\n                  );\r\n                  this.handlePromotionType7(this.bill_details_pmtype_7);\r\n                });\r\n            }\r\n            else {\r\n              this.product_gift_type7 = [];\r\n              this.gotten_gift_type7 = false;\r\n            }\r\n          }\r\n        )\r\n        .catch((err) => {\r\n          console.error(err);\r\n          this.vhComponent.alertMessageDesktop('error', this.languageService.translate('Connect error'));\r\n          this.goBack();\r\n        })\r\n        .finally(() => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.isLoadedInvoice2 = true;\r\n        });\r\n    }\r\n    else {\r\n      this.isLoadedInvoice2 = true;\r\n      this.goBack();\r\n    }\r\n    // lấy thông tin bàn\r\n    if (this.selectedBill.getIdTable() == 'go_home') {\r\n      this.tableInfo = this.languageService.translate('Take away');\r\n    }\r\n    else {\r\n      this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n    }\r\n    // kiểm tra máy in\r\n    this.initPrinter();\r\n  }\r\n\r\n\r\n  // sự kiện subscribe bill dc mở ở thiết bị khác\r\n  observableCheckBill(id_bill) {\r\n    this.vhQueryCafe.observableSyncOpeningBill(id_bill, 5).subscribe(\r\n      (rsp: any) => {\r\n        console.log('observableSyncOpeningBill', rsp);\r\n        this.vhQueryCafe.closeSyncOpeningBill();\r\n        if (rsp.vcode === 0) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate('Hóa đơn này đang được cập nhật ở thiết bị khác!'),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 1) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate('Hóa đơn này đã được thanh toán ở thiết bị khác!'),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 2) {\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate('Hóa đơn đã bị xóa!')\r\n          );\r\n          this.goBack();\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**Hàm trở về trang khu vực order\r\n * @param reset: reset quyền truy cập\r\n * @default reset = true\r\n */\r\n  goBack() {\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Tiến hành cập nhặt hóa đơn\r\n   * @param ev: event trả về từ output\r\n   */\r\n  updateInvoice(ev) {\r\n    this.statusInvoice.updating = true;\r\n    // tiến hành cập nhật\r\n    // kiểm tra bill đang có km thì destroy km trước khi luu\r\n    if (this.selectedBill.isPromotion()) {\r\n      this.deletePromotions();\r\n      this.statusInvoice.updating = false;\r\n    } else {\r\n      if (!this.isUpdateToDatabase) return;\r\n      this.vhQueryCafe\r\n        .updateBill(\r\n          this.selectedBill.getID(),\r\n          this.selectedBill.getCreateUpdateInvoice(5)\r\n        )\r\n        .then((id) => {\r\n          console.log('update invoice: ', id);\r\n          this.getClassAndProgram();\r\n        })\r\n        .catch((err) => console.error(err))\r\n        .finally(() => (this.statusInvoice.updating = false));\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   */\r\n  getClassAndProgram() {\r\n    let customer = this.vhQueryCafe.getlocalCustomer(\r\n      this.selectedBill.getIdPartner()\r\n    );\r\n\r\n    this.customer_class = this.vhQueryCafe\r\n      .getlocalCustomerClasss()\r\n      .find((item) => item._id == customer.id_customer_class);\r\n\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_bill\r\n      );\r\n    }\r\n\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_product\r\n      );\r\n    }\r\n\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tổng điểm tích được của Bill và Product\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    return this.billService.getTotalEarningPoint(this.program_product, this.program_bill, this.selectedBill.getSubTotal(), this.selectedBill, this.selectedBill.getInvoiceDetail());\r\n  }\r\n\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7) {\r\n      for (let i in this.product_gift_type7) {\r\n        if (this.product_gift_type7[i].products_gift.filter(e => e.choose).length)\r\n          this.selectedBill.addBill_detail_promotion(this.product_gift_type7[i]);\r\n      }\r\n    }\r\n    this.gotten_gift_type7 = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * hàm lấy quà\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('').then(() => {\r\n      /** Chứa các bill_detail có ptype = 6 */\r\n      let bill_details_type_6;\r\n      /** Chứa các bill_detail có ptype != 6 */\r\n      let bill_details_others;\r\n      // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n      if(this.productService.isContainServiceTime(this.selectedBill)) {\r\n        bill_details_type_6 = this.selectedBill.getInvoiceDetail().filter((item) => item.ptype === VhType.SERVICETIME);\r\n        bill_details_others = this.selectedBill.getInvoiceDetail().filter((item) => item.ptype !== VhType.SERVICETIME);\r\n        this.selectedBill = new VhOrderInvoices(\r\n          this.selectedBill.getCreateUpdateInvoice(5),\r\n          bill_details_others,\r\n          this.vhQueryCafe,\r\n          this.platform\r\n        );\r\n      }\r\n      this.vhQueryCafe\r\n        .changeBillDetails_withPromotions(\r\n          this.selectedBill.getInvoiceDetail(),\r\n          this.selectedBill.getDate()\r\n        )\r\n        .then(\r\n          (bill_details_display: any) => {\r\n            // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n            if(this.productService.isContainServiceTime(this.selectedBill)) {\r\n              bill_details_display.bill_details_pmtype_0to6 = [\r\n                ...bill_details_type_6,\r\n                ...bill_details_display.bill_details_pmtype_0to6,\r\n              ];\r\n            }\r\n\r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_0to6\r\n            );\r\n\r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_7\r\n            );\r\n\r\n            this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC(\r\n              [...bill_details_display.bill_details_pmtype_7],\r\n              'total_bill_value'\r\n            );\r\n\r\n            this.isGotPromotion = true;\r\n            this.selectedBill = new VhOrderInvoices(\r\n              this.selectedBill.getCreateUpdateInvoice(5),\r\n              [...bill_details_display.bill_details_pmtype_0to6],\r\n              this.vhQueryCafe,\r\n              this.platform\r\n            );\r\n\r\n            this.handlePromotionType7(this.bill_details_pmtype_7);\r\n\r\n            this.getEarningpointPromotion().then(() => {\r\n              this.vhQueryCafe.updateBill_Billdetail(\r\n                this.selectedBill.getID(),\r\n                this.selectedBill.getCreateUpdateInvoice(5),\r\n                this.selectedBill.getCreateUpdateInvoiceDetail()\r\n              ).then(() => {\r\n                console.log(\"success\");\r\n              });\r\n            });\r\n          },\r\n          (error) => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(5000, error, 'alert-toast');\r\n            });\r\n          }\r\n        ).finally(() => {\r\n          this.vhComponent.hideLoading(0);\r\n        });\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n  * hàm này để xóa tất cả promotion trong bill và update\r\n  */\r\n  deletePromotions(): Promise<void>  {\r\n    return this.destroyBillDetails_withPromotions().then(() => {\r\n      return this.vhQueryCafe\r\n        .updateBill_Billdetail(\r\n          this.selectedBill.getID(),\r\n          this.selectedBill.getCreateUpdateInvoice(5),\r\n          this.selectedBill.getCreateUpdateInvoiceDetail()\r\n        )\r\n        .then(() => {\r\n          return this.getBill_Detail_ByID_Bill();\r\n        })\r\n        .catch((err) => console.error(err))\r\n    });\r\n  }\r\n\r\n\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length) {\r\n      if (\r\n        bill_details_pmtype_7.findLastIndex(\r\n          (e) => e.total_bill_value <= this.selectedBill.getTotalATax()\r\n        ) != -1\r\n      )\r\n        this.product_gift_type7 = [\r\n          bill_details_pmtype_7[\r\n          bill_details_pmtype_7.findLastIndex(\r\n            (e) => e.total_bill_value <= this.selectedBill.getTotalATax()\r\n          )\r\n          ],\r\n        ];\r\n      else this.product_gift_type7 = [];\r\n    }\r\n    else this.product_gift_type7 = [];\r\n  }\r\n\r\n\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n              product.lots,\r\n              'date_exp'\r\n            );\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach((element) => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n                  element.lots,\r\n                  'date_exp'\r\n                );\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    if (event != null) {\r\n      // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.destroyBillDetails_withPromotions().then(() => {\r\n        if (this.selectedBill.getInvoiceDetail().length) {\r\n          // nếu có  length mơi update\r\n          let bill_details = this.selectedBill.getInvoiceDetail();\r\n          for (let i in bill_details) {\r\n            // Nếu là dịch vụ thời gian\r\n            if (bill_details[i].ptype === VhType.SERVICETIME) {\r\n              this.productService.updateServiceTimePrice(bill_details[i], event);\r\n              delete (bill_details[i] as any).serviceTimePrice;\r\n              // Cập nhật lại sản phẩm trong danh sách hóa đơn\r\n              bill_details[i] = { ...bill_details[i] };\r\n              continue;\r\n            }\r\n            let price_update = 0;\r\n            let product = this.vhQueryCafe.getlocalDetailProduct(\r\n              bill_details[i].id_subproduct\r\n                ? bill_details[i].id_subproduct\r\n                : bill_details[i].id_product\r\n            );\r\n            product = {\r\n              ...product,\r\n              ...this.vhQueryCafe.getUnit_byRatio(\r\n                product.units,\r\n                bill_details[i].ratio\r\n              ),\r\n            };\r\n            if (event == 1) {\r\n              price_update = product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  top.price = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  ).units[0].price;\r\n                }\r\n              }\r\n            } else {\r\n              price_update = product.price2 ? product.price2 : product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  let topping = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  );\r\n                  top.price = topping.units[0].price2\r\n                    ? topping.units[0].price2\r\n                    : topping.units[0].price;\r\n                }\r\n              }\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.selectedBill.setSubTotal();\r\n        }\r\n        this.selectedBill.setPriceType(event);\r\n        this.vhQueryCafe\r\n          .updateBill_Billdetail(\r\n            this.selectedBill.getID(),\r\n            this.selectedBill.getCreateUpdateInvoice(5),\r\n            this.selectedBill.getCreateUpdateInvoiceDetail()\r\n          )\r\n          .then(() => {\r\n            return this.getBill_Detail_ByID_Bill();\r\n          });\r\n      });\r\n    }\r\n    if (!this.gotten_gift_type7)\r\n      this.handlePromotionType7(this.bill_details_pmtype_7);\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n  * hàm này để get SubTotal mới của mảng đã lấy quà\r\n  * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n  */\r\n  getEarningpointPromotion() {\r\n    return new Promise((resolve) => {\r\n      for (let i of this.selectedBill.getInvoiceDetail()) {\r\n        if (i.pmtype) this.selectedBill.setBillHavePromotion(true);\r\n        if (i.products_gift) {\r\n          for (let product of i.products_gift) {\r\n            product.earning_points_product = this.billService.getTotalEarningPointProduct(i, true, this.program_product);\r\n          }\r\n        }\r\n        if (i.products) {\r\n          for (let product of i.products) {\r\n            product.earning_points_product = this.billService.getTotalEarningPointProduct(i, true, this.program_product);\r\n          }\r\n        }\r\n        if (!i.id_promotion) i.earning_points_product = this.billService.getTotalEarningPointProduct(i, null, this.program_product);\r\n      }\r\n      this.selectedBill.setSubTotal();\r\n      resolve(true);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (\r\n      data.products_gift.filter((item) => item.choose).length ==\r\n      data.promotions_maximum\r\n    )\r\n      return true;\r\n    else return false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tiến hành xóa hóa đơn\r\n   */\r\n  deleteProcess() {\r\n    if (this.selectedBill.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.selectedBill.getID()),\r\n      ]);\r\n    } else {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.selectedBill.getID()),\r\n        this.vhQueryCafe.updateTable(this.selectedBill.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Xóa hóa đơn\r\n   * @param ev: event trả về từ output\r\n   */\r\n  deleteInvoice(ev) {\r\n    if (ev) {\r\n      this.vhQueryCafe.closeSyncOpeningBill();\r\n      this.statusInvoice.deleting = true;\r\n      // tiến hành xóa\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.deleteProcess()\r\n          .then((id) => console.log('delete invoice: ', id))\r\n          .catch((err) => {\r\n            console.error(err);\r\n            this.vhComponent.showToast(\r\n              2000,\r\n              this.languageService.translate('Delete fail'),\r\n              'alert-toast'\r\n            );\r\n          })\r\n          .finally(() => {\r\n            this.statusInvoice.deleting = false;\r\n            this.vhComponent.alertMessageDesktop(\r\n              'success',\r\n              this.languageService.translate('Invoice deleted successfully')\r\n            );\r\n            this.vhComponent.hideLoading(0);\r\n            this.goBack();\r\n          });\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Save hóa đơn */\r\n  createProcess() {\r\n    // Nếu có chứa dịch vụ thời gian thì cập nhập is_paused = true\r\n    if(this.productService.isContainServiceTime(this.selectedBill)) {\r\n      this.productService.updateAllServiceTimeToPause(this.selectedBill.getInvoiceDetail());\r\n    }\r\n    if (this.selectedBill.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.selectedBill.getID(),\r\n          this.selectedBill.getCreateUpdateInvoice(1),\r\n          this.selectedBill.getCreateUpdateInvoiceDetail()\r\n        ),\r\n      ]);\r\n    } else {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.selectedBill.getID(),\r\n          this.selectedBill.getCreateUpdateInvoice(1),\r\n          this.selectedBill.getCreateUpdateInvoiceDetail()\r\n        ),\r\n        this.vhQueryCafe.updateTable(this.selectedBill.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n\r\n  destroyBillDetails_withPromotions() {\r\n    this.selectedBill.setBillHavePromotion(false);\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQueryCafe\r\n        .destroyBillDetails_withPromotions(this.selectedBill.getInvoiceDetail())\r\n        .map((item) => {\r\n          return { ...item, _id: item._id ? item._id : true };\r\n        });\r\n\r\n      this.selectedBill = new VhOrderInvoices(\r\n        this.selectedBill.getCreateUpdateInvoice(5),\r\n        bill_details,\r\n        this.vhQueryCafe,\r\n        this.platform\r\n      );\r\n      this.selectedBill.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true);\r\n    });\r\n  }\r\n\r\n\r\n  getBill_Detail_ByID_Bill(): Promise<void> {\r\n    return this.vhQueryCafe.getBill_details_byId_bill(this.selectedBill.getID()).then(\r\n      (bill_details) => {\r\n        console.log('getBill_details_byId_bill', bill_details);\r\n        this.selectedBill = new VhOrderInvoices(\r\n          this.selectedBill.getCreateUpdateInvoice(5),\r\n          bill_details,\r\n          this.vhQueryCafe,\r\n          this.platform\r\n        );\r\n      },\r\n      (error: any) => {\r\n        console.log('error ', error);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**Cập nhật ghi chú món\r\n   * @param item: thông tin bill detail cần cập nhật\r\n  */\r\n  updateNote(item) {\r\n    this.vhQueryCafe.updateBill_Detail(item._id, { note: item.note });\r\n  }\r\n\r\n\r\n\r\n  /**Cập nhật thông tin món ăn */\r\n  saveEdit() {\r\n    // Nếu là Dịch vụ thời gian thiình tính lại tiền\r\n    if(this.choiceFood.ptype === VhType.SERVICETIME) {\r\n      console.log('saveEdit this.choiceFood', this.choiceFood);\r\n      if (!this.choiceFood.is_paused) {\r\n        this.choiceFood.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.selectedBill.getPriceType());\r\n      this.choiceFood.price = serviceTimePrice.total_price;\r\n      this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n      delete this.choiceFood.serviceTimePrice;\r\n    }\r\n\r\n    this.choiceFood.price = parseFloat(this.choiceFood.price);\r\n    this.showDrawerEdit = false;\r\n    let index: number = this.selectedBill.getInvoiceDetail().findIndex(item => item._id == this.choiceFood._id);\r\n\r\n    this.selectedBill.getInvoiceDetail()[index] = { ...this.choiceFood };\r\n    this.selectedBill.setSubTotal();\r\n\r\n    if (!this.isUpdateToDatabase) return;\r\n\r\n    if (this.choiceFood.ptype == VhType.COMBO) {\r\n      this.vhQueryCafe.updateBill_Detail_btype_5(this.choiceFood._id, this.choiceFood)\r\n        .then((bool) => {\r\n          console.log('updateBill_Detail_btype_5', bool);\r\n        }, error => {\r\n          console.log('error', error);\r\n        });\r\n    }\r\n    else {\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, this.choiceFood).then((res) => {\r\n        this.updateInvoice(true);\r\n        delete this.choiceFood;\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Chỉnh sửa sản phẩm\r\n   * @param item thông tin sản phẩm đang được xử lý\r\n   */\r\n  editFood(item: any) {\r\n    this.choiceFood = item;\r\n    this.showDrawerEdit = true;\r\n    // Nếu không phải Dịch vụ thời gian\r\n    if(this.choiceFood.ptype !== VhType.SERVICETIME) {\r\n      // backup\r\n      // cleavejs cho các input\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + item.id_product] = this.vhAlgorithm.vhnumeral('.price-' + item.id_product + ' input');\r\n        if (this.choiceFood.toppings) {\r\n          this.choiceFood.toppings.forEach(topping => {\r\n            this.editPrice['topping-' + topping.id_product] = this.vhAlgorithm.vhnumeral('.topping-' + topping.id_product + ' input');\r\n          });\r\n        }\r\n      }, 200);\r\n    }\r\n    // Nếu là Dịch vụ thời gian\r\n    else {\r\n      this.productService.updateServiceTimePrice(this.choiceFood, this.selectedBill.getPriceType());\r\n      if(!this.choiceFood.is_paused) {\r\n        this.selectedBill.setSubTotal();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Thêm cleavejs chỉnh sửa giá sản phẩm\r\n   * @param item thông tin sản phẩm đang xử lý\r\n  */\r\n  updatePrice(item) {\r\n    // không phải topping\r\n    if (item.ptype !== 4) {\r\n      let price = this.editPrice['price-' + item.id_product].getRawValue();\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity = this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1;\r\n    }\r\n    // là topping\r\n    else {\r\n      let price = this.editPrice['topping-' + item.id_product].getRawValue();\r\n      let index = this.choiceFood.toppings.findIndex(element => element.id_product == item.id_product);\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity = this.choiceFood.toppings[index].quantity > 0 ? this.choiceFood.toppings[index].quantity : 1;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Xóa món ăn\r\n   * @param food: thông tin sản phẩm đang xử lý\r\n  */\r\n  removeFood(food: any) {\r\n    if (this.vhAuth.checkLocalMyPermissionName('sell_enable_cancel_bill_detail')) {\r\n      food.deleting = true;\r\n      // thêm hủy món vô in bếp\r\n      if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n        let dataKitchen: any = { name: food.name, quantity: food.quantity, note: food.note };\r\n        if (food.properties) dataKitchen['properties'] = food.properties;\r\n        if (food.toppings) dataKitchen['toppings'] = food.toppings;\r\n        if (food.combos) dataKitchen['combos'] = food.subComboName;\r\n        this.printKitchen['value'].push(dataKitchen);\r\n        this.printKitchen = { ...this.printKitchen, title: 'Cancel dishes', status: true };\r\n      }\r\n      if (food.ptype == 5) {\r\n        this.vhQueryCafe.deleteBill_Detail_ptype_5(food._id).then(value => {\r\n          console.log(value)\r\n          this.selectedBill.removeInvoiceDetail(food._id);\r\n          this.updateInvoice(true);\r\n        });\r\n      }\r\n      else {\r\n        this.vhQueryCafe.deleteBill_Detail(food._id).then(value => {\r\n          this.selectedBill.removeInvoiceDetail(food._id);\r\n          this.updateInvoice(true);\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(3000, this.languageService.translate(\"You do not have this rights\"), \"alert-toast\")\r\n    };\r\n  }\r\n\r\n\r\n\r\n  getSubCombo(arr: any[]): string {\r\n    return arr\r\n      .map(item => `${item.quantity}x ${item.name} (${this.productService.getUnit(item.units, item.ratio)})`)\r\n      .join(', ');\r\n  }\r\n\r\n\r\n\r\n  searchLot(value) {\r\n    this.choiceFood.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number']);\r\n  }\r\n\r\n\r\n\r\n  openModalChooseLot(data) {\r\n    this.choiceFood = data;\r\n    this.list_search_lot = this.choiceFood.lots;\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Sản phẩm này không có lô khả dụng để bán!\"));\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n\r\n\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.choiceFood.id_lotproduct);\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.choiceFood.lots = this.list_search_lot;\r\n            if (this.isUpdateToDatabase) this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct });\r\n          },\r\n          nzOnCancel: () => {\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.choiceFood.lots = this.list_search_lot;\r\n        if (this.isUpdateToDatabase) this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct });\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.choiceFood.lots = this.list_search_lot;\r\n      if (this.isUpdateToDatabase) this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.choiceFood.lots = this.list_search_lot;\r\n  }\r\n\r\n\r\n  /* ------------------------------------------------------------- INFO BILL 1 ------------------------------------------------------------ */\r\n\r\n  changeEmployee(ev) {\r\n    this.selectedBill.setIdEmployee(ev[0]);\r\n    this.updateInvoice({ id_employee: ev[0] });\r\n  }\r\n\r\n  /* --------------------------------------------------------------- BILL 1 --------------------------------------------------------------- */\r\n\r\n  changePercentDiscount(value) {\r\n    this.percent_discount = value;\r\n    this.selectedBill.setDiscount(this.selectedBill.getSubTotal() * value / 100);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n    this.invoice_discount = (this.selectedBill.getDiscount()).toString();\r\n  }\r\n\r\n\r\n\r\n  /**Cập nhật giảm giá */\r\n  updateDiscount() {\r\n    let discount: any = this.moneyEdit['discount'].getRawValue();\r\n    this.selectedBill.setDiscount(discount ? parseFloat(discount) : 0);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n    this.percent_discount = discount / this.selectedBill.getSubTotal() * 100;\r\n  }\r\n\r\n\r\n\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100) document.getElementById(\"percent-discount-price\")['value'] = 0;\r\n    else this.changePercentDiscount(value);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Cập nhật phí\r\n   */\r\n  updateFee() {\r\n    let fee: any = this.moneyEdit['fee'].getRawValue();\r\n    this.selectedBill.setFee(fee ? parseFloat(fee) : 0);\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Cập nhật thuế\r\n   */\r\n  updateTax(value) {\r\n    this.selectedBill.setTax(parseFloat(value));\r\n    this.updateInvoice(true);\r\n    this.invoice_payment = this.selectedBill.getPayment().toString();\r\n    this.invoice_cash = this.selectedBill.getCash().toString();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Cập nhật Thanh toán\r\n   */\r\n  updatePayment() {\r\n    if (this.debt) {\r\n      let payment: any = this.moneyEdit['payment'].getRawValue();\r\n      let value = payment ? parseFloat(payment) : 0;\r\n\r\n      this.selectedBill.setPayment(value ? (value > this.selectedBill.getTotalATax() || value < 0 ? this.selectedBill.getTotalATax() : value) : 0);\r\n\r\n      document.getElementById(\"payment-price\")['value'] = this.selectedBill.getPayment();\r\n      this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\");\r\n\r\n      this.updateInvoice(true);\r\n      this.invoice_payment = this.selectedBill.getPayment().toString();\r\n      this.invoice_cash = this.selectedBill.getCash().toString();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Cập nhật ghi chú\r\n   */\r\n  updateNoteBill() {\r\n    let note: any = document.getElementById(\"invoice-note\");\r\n    this.selectedBill.setNote(note.value);\r\n    this.updateInvoice(true);\r\n  }\r\n\r\n  /** Thay đổi phương thức thanh toán\r\n   * @param value loại thanh toán\r\n  */\r\n  changePaymentType(value: any) {\r\n    this.selectedBill.setPaymentType(value[0]);\r\n    this.selectedBill.setPayment();\r\n    switch (value[0]) {\r\n      case 1:\r\n        this.selectedBill.setIdWallet(\"id_cash\");\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        this.invoice_cash = this.selectedBill.getCash().toString();\r\n        break;\r\n      case 2:\r\n        this.selectedBill.setIdWallet(\"\");\r\n        this.selectedBill.setCash(0);\r\n        this.invoice_cash = '0';\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        break;\r\n\r\n      case 3:\r\n        this.selectedBill.setIdWallet(value[1]);\r\n        this.invoice_payment = this.selectedBill.getPayment().toString();\r\n        this.invoice_cash = this.selectedBill.getCash().toString();\r\n        break;\r\n    }\r\n\r\n    this.updateInvoice(true);\r\n  }\r\n\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả discount\r\n   * @param value\r\n   */\r\n  checkMaxLengthDiscount(value: string) {\r\n    if (parseFloat(value) > 999999999999) {\r\n      value = value.slice(0, 12); this.invoice_discount = value;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả fee\r\n   * @param value\r\n   */\r\n  checkMaxLengthFee(value: string) {\r\n    if (parseFloat(value) > 999999999999) {\r\n      value = value.slice(0, 12); this.invoice_fee = value;\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả payment\r\n   * @param value\r\n   */\r\n  checkMaxLengthPayment(value: string) {\r\n    if (parseFloat(value) > 999999999999) {\r\n      value = value.slice(0, 12); this.invoice_payment = value;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n    this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.selectedBill.getIdPartner());\r\n    this.product_codes = this.selectedBill.getArrayCouponCodes();\r\n  }\r\n\r\n\r\n\r\n  handleOkOtherDiscount() {\r\n    if (this.selectedBill.getPayment() < this.selectedBill.getDiscountOther()) this.selectedBill.setPayment(0);\r\n    this.selectedBill.setSubTotal();\r\n    this.vhQueryCafe\r\n      .updateBill_Billdetail(\r\n        this.selectedBill.getID(),\r\n        this.selectedBill.getCreateUpdateInvoice(5),\r\n        this.selectedBill.getCreateUpdateInvoiceDetail()\r\n      )\r\n      .then(() => {\r\n        console.log('success');\r\n      });\r\n    this.showModalOtherDiscount = false;\r\n  }\r\n\r\n\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQueryCafe.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"));\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes);\r\n                  this.selectedBill.setArrayCouponCodes(this.product_codes);\r\n                  this.selectedBill.setDiscountCoupon(product_codes.value);\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"));\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000);\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000);\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        });\r\n  }\r\n\r\n\r\n\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.selectedBill.setDiscountCoupon(-item.value);\r\n  }\r\n\r\n\r\n\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n      this.selectedBill.setDiscountPoint((value / this.customer_class.payment.points) * this.customer_class.payment.money);\r\n      this.selectedBill.setUsePoint(value);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"));\r\n    }\r\n  }\r\n\r\n  /* --------------------------------------------------------------- SEARCH --------------------------------------------------------------- */\r\n\r\n  getMenu(types) {\r\n    this.tempSearchType = types;\r\n    if (types.includes(VhType.DISHES) || types.includes(VhType.INGREDIENT)) {\r\n      // 1: món ăn/thức uống; 3: nguyên liệu\r\n      this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == VhType.DISHES || item.type == VhType.INGREDIENT);\r\n      for (let cate of this.list_menu) {\r\n        if (this.foodList.find(e => e.id_category == cate._id)) cate.valid = true;\r\n        else cate.valid = false;\r\n      }\r\n      this.list_menu = this.vhAlgorithm.sortVietnamesebyASC(this.list_menu.filter(e => e.valid), 'name');\r\n      this.listTabs = [{ _id: 'all', name: 'All', type: 1 }];\r\n      this.list_menu.forEach(item => this.listTabs.push(item));\r\n      this.searchList = [...this.foodList];\r\n    }\r\n    else if (types.includes(VhType.SERVICE) && types.includes(VhType.SERVICETIME)) {\r\n      // 2:service\r\n      this.list_menu = this.vhQueryCafe.getlocalCategorys(VhType.SERVICE);\r\n      this.listTabs = [{ _id: 'all', name: 'All', type: 1 }];\r\n      this.list_menu.forEach((item) => this.listTabs.push(item));\r\n      this.searchList = [...this.serviceList];\r\n    }\r\n    else if (types.includes(VhType.TOPPING)) {\r\n      // 4:món phụ(topping)\r\n      this.listTabs = [{ _id: 'all', name: 'All', type: 1 }];\r\n      this.searchList = [...this.sideDishesList];\r\n    }\r\n    else if (types.includes(VhType.COMBO)) {\r\n      // 5:combo\r\n      this.listTabs = [{ _id: 'all', name: 'All', type: 1 }];\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n      this.combosList = this.vhQueryCafe\r\n        .getlocalDetailProducts(VhType.COMBO)\r\n        .filter((item) => !item.delete_hidden)\r\n        .map((e) => {\r\n          this.handleLotsOfCombo(e.combos.filter((lot) => lot.lots));\r\n          return {\r\n            ...e,\r\n            dispatcher_done: dispatcher_done,\r\n            ...e.units[0],\r\n            combos: e.combos.map((pro) => {\r\n              return {\r\n                ...pro,\r\n                unit: this.productService.getUnit(pro.units, pro.ratio),\r\n                ptype: pro.type,\r\n              };\r\n            }),\r\n          };\r\n        });\r\n      this.searchList = [...this.combosList];\r\n    }\r\n\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.searchList,\r\n      'name'\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchFood(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    let list: any[] = [];\r\n    if (this.tempSearchType.includes(VhType.DISHES) || this.tempSearchType.includes(VhType.INGREDIENT)) {\r\n      list = this.foodList;\r\n    }\r\n    else if (this.tempSearchType.includes(VhType.SERVICE) || this.tempSearchType.includes(VhType.SERVICETIME)) {\r\n      list = this.serviceList;\r\n    }\r\n    else if (this.tempSearchType.includes(VhType.TOPPING)) {\r\n      list = this.sideDishesList;\r\n    }\r\n    else if (this.tempSearchType.includes(VhType.COMBO)) {\r\n      list = this.combosList;\r\n    }\r\n\r\n    if (value.length) {\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, list, ['name', 'barcode', 'item_code']);\r\n    }\r\n    else {\r\n      this.searchList = [...list];\r\n    }\r\n\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name');\r\n  }\r\n\r\n\r\n\r\n  changeSub(value) {\r\n    let subChoice: any = this.choiceFoodSearch.subs.find((item) => item._id == value);\r\n    if (subChoice) {\r\n      this.choiceFoodSearch['id_subproduct'] = value;\r\n      this.choiceFoodSearch['price'] = subChoice.price;\r\n      this.choiceFoodSearch['price_origin'] = subChoice.price_origin;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chọn sản phẩm để xử lý\r\n   * @param value dữ liệu sản phẩm được chọn\r\n   */\r\n  selectFoods(value) {\r\n    if (value.type == VhType.SERVICE) {\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n      const price = this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price;\r\n      this.choiceFoodSearch = {\r\n        dispatcher_done: dispatcher_done,\r\n        ...value,\r\n        quantity: 1,\r\n        note: '',\r\n        price_origin: price,\r\n        price: price,\r\n        ptype: VhType.SERVICE,\r\n      };\r\n\r\n      if (this.choiceFoodSearch) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n            '.price-' + value._id\r\n          );\r\n        }, 200);\r\n      }\r\n    }\r\n    else if (value.type == VhType.DISHES || value.type == VhType.INGREDIENT) {\r\n\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n      const price = this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price;\r\n      this.choiceFoodSearch = {\r\n        dispatcher_done: dispatcher_done,\r\n        toppings: JSON.parse(JSON.stringify(value.toppings || [])),\r\n        quantity: 1,\r\n        note: '',\r\n        price_origin: price,\r\n        name: value.name,\r\n        ptype: value.type,\r\n        properties: value.properties,\r\n        _id: value._id,\r\n        price: price,\r\n        ratio: 1,\r\n        units: value.units,\r\n      };\r\n      if (value.lot_number) this.choiceFoodSearch['lot_number'] = value.lot_number;\r\n      if (value.lots) this.choiceFoodSearch['lots'] = value.lots;\r\n      if (value.id_lotproduct)\r\n        this.choiceFoodSearch['id_lotproduct'] = value.id_lotproduct;\r\n      if (value.id_subproduct)\r\n        this.choiceFoodSearch.id_subproduct = value.id_subproduct;\r\n      // Lưu trữ các properties đã chon\r\n      if (this.choiceFoodSearch.properties) {\r\n        // sao chép mảng giá trị chọn\r\n        this.choiceFoodSearch.properties.forEach((element) => {\r\n          element.active = true;\r\n          element.selectedValue = element.value[0];\r\n        });\r\n      }\r\n      // Kiểm tra topping\r\n      if (this.choiceFoodSearch.toppings) {\r\n        for (let topping of this.choiceFoodSearch.toppings) {\r\n          let data = this.vhQueryCafe.getlocalProduct(topping.id_product);\r\n\r\n          topping.quantity = topping.quantity;\r\n          topping.name = data.name;\r\n          topping.price_origin =\r\n            this.default_price_type == 1\r\n              ? topping.units[0].price\r\n              : topping.units[0].price2\r\n                ? topping.units[0].price2\r\n                : topping.units[0].price;\r\n          topping.price =\r\n            this.default_price_type == 1\r\n              ? topping.units[0].price\r\n              : topping.units[0].price2\r\n                ? topping.units[0].price2\r\n                : topping.units[0].price;\r\n          topping.ratio = 1;\r\n          topping.ptype = 4;\r\n          topping._id = topping.id_product;\r\n        }\r\n      }\r\n      if (this.choiceFoodSearch.type == 3 && this.choiceFoodSearch.lots) {\r\n        this.choiceFoodSearch.lots = this.vhAlgorithm.sortDatebyASC(\r\n          this.choiceFoodSearch.lots,\r\n          'date_exp'\r\n        );\r\n        if (this.auto_hidden_lot)\r\n          this.choiceFoodSearch.lots = this.choiceFoodSearch.lots.filter(\r\n            (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n          );\r\n\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n          this.choiceFoodSearch.lots.filter(\r\n            (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n          ),\r\n          'date_exp'\r\n        );\r\n\r\n        if (min_date_exp.length) {\r\n          this.choiceFoodSearch['id_lotproduct'] = min_date_exp[0]._id;\r\n          this.choiceFoodSearch['lot_number'] = min_date_exp[0].lot_number;\r\n        }\r\n      }\r\n\r\n      if (this.choiceFoodSearch) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n            '.price-' + value._id + ' input'\r\n          );\r\n          if (this.choiceFoodSearch.toppings) {\r\n            this.choiceFoodSearch.toppings.forEach(topping => {\r\n              this.editPrice['topping-' + topping._id] = this.vhAlgorithm.vhnumeral('.topping-' + topping._id + ' input');\r\n            });\r\n          }\r\n        }, 200);\r\n      }\r\n    }\r\n    else if (value.type == VhType.TOPPING) {\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n      const price = this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price;\r\n      this.choiceFoodSearch = {\r\n        dispatcher_done: dispatcher_done,\r\n        ...value,\r\n        quantity: 1,\r\n        note: '',\r\n        price_origin: price,\r\n        price: price,\r\n        ptype: VhType.TOPPING,\r\n      };\r\n\r\n      if (this.choiceFoodSearch) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n            '.price-' + value._id + ' input'\r\n          );\r\n        }, 200);\r\n      }\r\n    }\r\n    else if (value.type == VhType.COMBO) {\r\n      this.choiceFoodSearch = {\r\n        ...value,\r\n        quantity: 1,\r\n        note: '',\r\n        price_origin: value.price,\r\n        price: value.price,\r\n        ptype: VhType.COMBO,\r\n      };\r\n\r\n      if (this.choiceFoodSearch) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n            '.price-' + value._id + ' input'\r\n          );\r\n        }, 200);\r\n      }\r\n    }\r\n    else if (value.type == VhType.SERVICETIME) {\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable').dispatchers_enable;\r\n      const price = this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price;\r\n      this.choiceFoodSearch = {\r\n        dispatcher_done: dispatcher_done,\r\n        ...value,\r\n        quantity: 1,\r\n        note: '',\r\n        price_origin: price,\r\n        price: price,\r\n        ptype: VhType.SERVICETIME,\r\n      };\r\n      this.createBillDetail(this.choiceFoodSearch);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Tạo bill detail lên database\r\n   * @param productValue thông tin sản phẩm\r\n  */\r\n  async createBillDetail(productValue: any) {\r\n    if (productValue.quantity) { // nếu SL sản phẩm > 0\r\n      this.isAddingFood = true;\r\n      //tạo detail lưu local\r\n      let detail: any = this.selectedBill.getCreateItemDetail(\r\n        productValue\r\n      );\r\n\r\n      // thêm bill detail đó vào danh sách bill detail\r\n      this.selectedBill.addInvoiceDetail({ ...productValue, id_product: productValue._id, time_start_order: new Date() });\r\n\r\n      if (!this.isUpdateToDatabase) {\r\n        this.isAddingFood = false;\r\n        return;\r\n      };\r\n\r\n      this.vhComponent.showLoading('').then(() => {\r\n        let bill_detail = this.selectedBill.getCreateItemCleanDetail(detail); // dữ liệu detail sạch phù hợp với database\r\n        if (bill_detail.ptype == 5) {\r\n          this.vhQueryCafe.createBill_Detail_ptype_5(bill_detail)\r\n            .then((vhbill_detail) => {\r\n              this.selectedBill.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n              this.choiceFood = this.selectedBill.getInvoiceDetail()[0];\r\n              this.updateInvoice(true);\r\n              this.printKitchenOrDispatcher(detail);\r\n            }, error => {\r\n              console.log('error', error);\r\n            }).finally(() => {\r\n              this.showOptions = false;\r\n              this.isAddingFood = false;\r\n              this.vhComponent.hideLoading(0);\r\n            });\r\n        }\r\n        else {\r\n          this.vhQueryCafe.createBill_Detail(bill_detail)\r\n            .then((vhbill_detail) => {\r\n              this.selectedBill.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n              this.choiceFood = this.selectedBill.getInvoiceDetail()[0];\r\n              this.updateInvoice(true);\r\n              this.printKitchenOrDispatcher(detail);\r\n            }, error => {\r\n              console.log('error', error);\r\n            }).finally(() => {\r\n              this.showOptions = false;\r\n              this.isAddingFood = false;\r\n              this.vhComponent.hideLoading(0);\r\n            });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  printKitchenOrDispatcher(bill_detail) {\r\n    // Bật in bếp\r\n    if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n      let dataKitchen: any = {\r\n        name: bill_detail.name,\r\n        quantity: +bill_detail.quantity,\r\n        note: bill_detail.note,\r\n        ptype: bill_detail.ptype,\r\n        ratio: bill_detail.ratio,\r\n        units: bill_detail.units,\r\n      };\r\n      if (bill_detail.properties) dataKitchen['properties'] = bill_detail.properties;\r\n      if (bill_detail.toppings) dataKitchen['toppings'] = bill_detail.toppings;\r\n      if (bill_detail.combos) dataKitchen['combos'] = bill_detail.combos;\r\n      this.printKitchen['value'].push(dataKitchen);\r\n      this.printKitchen = { ...this.printKitchen, title: 'Add dishes', status: true };\r\n    }\r\n    // nếu chọn là điều phối bằng giao diện\r\n    if (this.dispatchers_enable) {\r\n      // show modal chọn giao diện để điều phối\r\n      this.show_modal_dispatcher = true;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePriceSearch(item) {\r\n    if (item.ptype !== 4) {\r\n      let price = this.editPrice['price-' + item._id].getRawValue();\r\n      this.choiceFoodSearch.price = price ? parseFloat(price) : 0;\r\n      this.choiceFoodSearch.quantity = this.choiceFoodSearch.quantity > 0 ? this.choiceFoodSearch.quantity : 1;\r\n    }\r\n    else {\r\n      let price = this.editPrice['topping-' + item._id].getRawValue();\r\n      let index = this.choiceFoodSearch.toppings.findIndex(\r\n        (element) => element._id == item._id\r\n      );\r\n      if (index != -1) {\r\n        this.choiceFoodSearch.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFoodSearch.toppings[index].quantity = this.choiceFoodSearch.toppings[index].quantity > 0\r\n          ? this.choiceFoodSearch.toppings[index].quantity : 1;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  /** Chọn danh mục\r\n   * @param event index danh mục được chọn\r\n   */\r\n  changeTypeGood(event) {\r\n    this.indexTab = event;\r\n\r\n    if (this.tempSearchType.includes(VhType.DISHES) || this.tempSearchType.includes(VhType.INGREDIENT)) {\r\n      let products = this.vhQueryCafe\r\n        .getlocalDetailProducts()\r\n        .filter((item) => item.type == VhType.DISHES || item.type == VhType.INGREDIENT)\r\n        .filter((item) => !item.delete_hidden)\r\n        .map((item) => {\r\n          let unit = this.vhQueryCafe.getUnit_byRatio(\r\n            item.units,\r\n            item.units.find((u) => u.default).ratio\r\n          );\r\n          return { ...item, ...unit };\r\n        });\r\n      if (event == 0) {\r\n        this.foodList = products.filter((item) => !item.delete_hidden);\r\n      }\r\n      else {\r\n        this.foodList = products.filter(\r\n          (item) => item.id_category == this.listTabs[event]._id\r\n        );\r\n      }\r\n    }\r\n    else if (this.tempSearchType.includes(VhType.SERVICE) || this.tempSearchType.includes(VhType.SERVICETIME)) {\r\n      let products = this.vhQueryCafe\r\n        .getlocalDetailProducts(VhType.SERVICE_SERVICETIME)\r\n        .filter((item) => !item.delete_hidden)\r\n        .map((e) => {\r\n          return { ...e, ...e.units[0] };\r\n        });\r\n      if (event == 0) {\r\n        this.serviceList = products;\r\n      }\r\n      else {\r\n        this.serviceList = products.filter(\r\n          (item) => item.id_category == this.listTabs[event]._id\r\n        );\r\n      }\r\n    }\r\n\r\n    this.searchFood(this.tempVal);\r\n  }\r\n\r\n\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price);\r\n      }\r\n    } else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit;\r\n        item.price = parseFloat(unit.price2);\r\n        item.ratio = parseFloat(unit.ratio);\r\n        item.price_origin = parseFloat(unit.price2);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  changeLotSearch(e) {\r\n    this.choiceFoodSearch.lot_number = this.choiceFoodSearch.lots.find(\r\n      (item) => item._id == e\r\n    ).lot_number;\r\n  }\r\n\r\n\r\n\r\n\r\n  changeLot(e, item) {\r\n    item.lot_number = item.lots.find(find => find._id == e).lot_number;\r\n  }\r\n\r\n\r\n\r\n\r\n  /** Tăng số lượng sản phẩm */\r\n  increaseQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity + 1;\r\n  }\r\n\r\n\r\n\r\n  /** Giảm số lượng sản phẩm */\r\n  reduceQuantity(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity);\r\n    item.quantity = item.quantity - 1;\r\n  }\r\n\r\n\r\n\r\n  /** Debounce cho việc thay đổi số lượng sản phẩm khi cập nhật lên database */\r\n  private debounceQuantityChangeTimer: { [key: string]: any; } = {};\r\n\r\n  /** Cập nhật dữ liệu quantity lên database */\r\n  onQuantityChange(foodId: string, food: any): void {\r\n    // clear debounce hiện tại\r\n    if (this.debounceQuantityChangeTimer[foodId]) {\r\n      clearTimeout(this.debounceQuantityChangeTimer[foodId]);\r\n    }\r\n    // cập nhật lên db\r\n    this.debounceQuantityChangeTimer[foodId] = setTimeout(() => {\r\n      if (food.ptype === 5) {\r\n        this.vhQueryCafe.updateBill_Detail_btype_5(foodId, food)\r\n          .then(bool => console.log('updateBill_Detail_btype_5', bool))\r\n          .catch(error => console.log('error', error));\r\n      } else {\r\n        this.vhQueryCafe.updateBill_Detail(foodId, food)\r\n          .then(() => {\r\n            this.updateInvoice(true);\r\n          });\r\n      }\r\n    }, 300); // đợi 300ms\r\n  }\r\n\r\n\r\n\r\n  handleLotsOfCombo(combos) {\r\n    combos = this.vhAlgorithm.sortDatebyASC(combos, 'date_exp');\r\n    for (let i of combos) {\r\n      if (i.lots.length) {\r\n        if (this.auto_hidden_lot)\r\n          i.lots = i.lots.filter(\r\n            (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n          );\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(i.lots, 'date_exp');\r\n        // if (this.auto_select_lot)\r\n        i['id_lotproduct'] = min_date_exp[0]._id;\r\n      }\r\n    }\r\n  }\r\n\r\n  /* -------------------------------------------------------------- CUSTOMER -------------------------------------------------------------- */\r\n\r\n\r\n  initCustomer() {\r\n    this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    if (this.selectedBill.getIdPartner() == \"id_retail\") {\r\n      this.customerType = 1;\r\n    }\r\n    else {\r\n      this.customerType = 2;\r\n      this.customer = this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner()).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner()).phone;\r\n      setTimeout(() => {\r\n        this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.selectedBill.getIdPartner());\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  changeCustomerType(type) {\r\n    if (type == 1) {\r\n      this.selectedBill.setIdPartner(\"id_retail\");\r\n      this.selectedBill.setTaxBuyerDisplayName('Người mua không lấy hoá đơn');\r\n      this.selectedBill.setTaxBuyerLegalName('');\r\n      this.selectedBill.setTaxBuyerTaxCode('');\r\n      this.selectedBill.setTaxBuyerAddressLine('');\r\n      this.selectedBill.setTaxBuyerEmail('');\r\n      this.updateInvoice({ id_customer: 'id_retail', tax_buyerDisplayName: this.selectedBill.getTaxBuyerDisplayName(), tax_buyerLegalName: this.selectedBill.getTaxBuyerLegalName(), tax_buyerTaxCode: this.selectedBill.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.selectedBill.getTaxBuyerAddressLine(), tax_buyerEmail: this.selectedBill.getTaxBuyerEmail() });\r\n      this.debt = false;\r\n      if (this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill) {\r\n        this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Khách hàng này được chiết khấu theo công thức\") + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill).name);\r\n        this.selectedBill.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.selectedBill.getSubTotal(), 'id_retail').discount);\r\n      }\r\n      this.updateServiceTime();\r\n    }\r\n    else if (type == 2 && this.selectedBill.getRetailName()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.clearRetailCustomer();\r\n          this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n          this.customerSearchList = this.customerList;\r\n          // setTimeout(() => document.getElementById(\"select-customer\").click(), 200);\r\n        },\r\n        nzOnCancel: () => { this.customerType = 1; },\r\n      });\r\n    }\r\n    else if (type === 3) {\r\n      this.customerList = this.customerSearchList = [];\r\n    }\r\n    else {\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      this.customerSearchList = this.customerList;\r\n      // setTimeout(() => document.getElementById(\"select-customer\").click(), 200);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  clearRetailCustomer() {\r\n    this.selectedBill.setRetailName('');\r\n    this.selectedBill.setRetailPhone('');\r\n    this.selectedBill.setRetailAddress('');\r\n  }\r\n\r\n\r\n\r\n  blurCustomer() {\r\n    setTimeout(() => {\r\n      if (this.selectedBill.getIdPartner() == \"id_retail\") this.customerType = 1;\r\n    }, 500);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thay đổi khách hàng\r\n   * @param ev id customer\r\n   * @param preventChangeDiscountBill true nếu không muốn thay đổi discount_bill (dùng cho booking)\r\n   */\r\n  changeCustomer(ev, preventChangeDiscountBill: boolean = false) {\r\n    if (preventChangeDiscountBill) {\r\n      this.selectedBill.setIdPartnerNoUpdateDiscountBill(ev);\r\n    }\r\n    else {\r\n      this.selectedBill.setIdPartner(ev);\r\n    }\r\n    const localCustomer = this.vhQueryCafe.getlocalCustomer(ev);\r\n    this.selectedBill.setTaxBuyerDisplayName(localCustomer?.name || '');\r\n    this.selectedBill.setTaxBuyerLegalName(localCustomer?.name || '');\r\n    this.selectedBill.setTaxBuyerTaxCode(localCustomer?.taxcode || '');\r\n    this.selectedBill.setTaxBuyerAddressLine(localCustomer?.address || '');\r\n    this.selectedBill.setTaxBuyerEmail(localCustomer?.email || '');\r\n\r\n    this.updateInvoice({ id_customer: ev, tax_buyerDisplayName: this.selectedBill.getTaxBuyerDisplayName(), tax_buyerLegalName: this.selectedBill.getTaxBuyerLegalName(), tax_buyerTaxCode: this.selectedBill.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.selectedBill.getTaxBuyerAddressLine(), tax_buyerEmail: this.selectedBill.getTaxBuyerEmail() });\r\n    let debt = this.vhQueryCafe.getlocalCustomer(ev).debt_enable;\r\n    this.debt = debt ? debt : false;\r\n    this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(ev);\r\n\r\n    if (this.selectedBill.getIdPartner() == \"id_retail\") {\r\n      this.customerType = 1;\r\n    } \r\n    else {\r\n      this.customerType = 2;\r\n      this.customer = this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner()).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner()).phone;\r\n      setTimeout(() => {\r\n        this.point_validity = this.vhQueryCafe.getlocalCustomerPoints(this.selectedBill.getIdPartner());\r\n      }, 200);\r\n    }\r\n    this.updateServiceTime();\r\n  }\r\n\r\n\r\n\r\n  // Customer process\r\n  openAddCustomer() {\r\n    if (this.customerType == 1) this.showDrawerAddRetail = true;\r\n    else {\r\n      this.initAddCustomerForm();\r\n      this.showDrawerAddCustomer = true;\r\n      // setTimeout(() => {\r\n      //   this.phone = this.vhAlgorithm.vhphoneNumber(\".phone\");\r\n      // }, 1000);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  closeAddCustomer(ev) {\r\n    if (ev.reload) { // restart customer list\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      this.selectedBill.setIdPartner(ev.value._id);\r\n      this.changeCustomer(ev.value._id);\r\n    }\r\n    this.showDrawerAddCustomer = false;\r\n  }\r\n\r\n\r\n\r\n  searchCustomer(event) {\r\n    if (this.customerType === 3) return;\r\n    this.customerList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(event.toString().toLowerCase()), this.customerSearchList, ['name', 'phone']);\r\n  }\r\n\r\n\r\n\r\n  /** Để kích sự kiện thay đổi cho Tìm khách hàng của booking */\r\n  get bookingTriggerSelectSearchCustomerChange() {\r\n    return this.cafeSapoSharedService.bookingTriggerSelectSearchCustomerChange;\r\n  }\r\n  /** Để kích sự kiện thay đổi cho Tìm khách hàng của booking */\r\n  set bookingTriggerSelectSearchCustomerChange(value) {\r\n    this.cafeSapoSharedService.bookingTriggerSelectSearchCustomerChange = value;\r\n  }\r\n\r\n  /**\r\n   * Khi nhấn Enter ở Tìm kiếm khách hàng trong\r\n   */\r\n  onKeyDown(event: KeyboardEvent, value, customerType: 1 | 2 | 3, isFromBooking?: boolean) {\r\n    if (customerType === 2) return;\r\n    if (event.key === 'Enter') {\r\n      const searchValue = this.vhAlgorithm.changeAlias(value.trim().toLowerCase());\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      if (searchValue.length >= 6) {\r\n        this.vhQueryCafe.searchKeyword_NamePhone('customers', searchValue).then((res: any) => {\r\n          this.customerList = res.map(item => {\r\n            return { ...item, earning_point: item.earning_point ? item.earning_point : 0, display: item.name + ' - ' + item.phone };\r\n          });\r\n\r\n          if (isFromBooking) {\r\n            this.bookingTriggerSelectSearchCustomerChange = [];\r\n            setTimeout(() => {\r\n              this.bookingTriggerSelectSearchCustomerChange = undefined;\r\n            }, 0);\r\n          }\r\n          else {\r\n            setTimeout(() => {\r\n              this.cdRef.detectChanges();\r\n            }, 0);\r\n          }\r\n\r\n          if (this.customerList.length == 0) {\r\n            this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate('No data'));\r\n          }\r\n          if (this.customerList.length == 1) {\r\n            if (isFromBooking) {\r\n              this.bookingChangeCustomer([this.customerList[0]._id]);\r\n            }\r\n            else if (this.selectedBill.getIdPartner() !== this.customerList[0]._id) {\r\n              this.changeCustomer(this.customerList[0]._id, false);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /* ------------------------------------------------------------ ADD CUSTOMER ------------------------------------------------------------ */\r\n\r\n  /** Mã quốc gia */\r\n  get countryCode(): string {\r\n    return this.cafeSapoSharedService.countryCode;\r\n  }\r\n  /** Mã quốc gia */\r\n  set countryCode(value: string) {\r\n    this.cafeSapoSharedService.countryCode = value;\r\n  }\r\n\r\n  /** Calling code */\r\n  get callingCode(): string {\r\n    return this.cafeSapoSharedService.callingCode;\r\n  }\r\n  /** Calling code */\r\n  set callingCode(value: string) {\r\n    this.cafeSapoSharedService.callingCode = value;\r\n  }\r\n\r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  get formattedPhone(): string {\r\n    return this.cafeSapoSharedService.formattedPhone;\r\n  }\r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  set formattedPhone(value: string) {\r\n    this.cafeSapoSharedService.formattedPhone = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Loại khách hàng\r\n   */\r\n  changeBusiness(event) {\r\n    this.addCustomerForm.get('isBusiness').setValue(event?.value, { emitEvent: false });\r\n    // taxcode required khi isBusiness = true\r\n    if (event?.value) {\r\n      this.addCustomerForm.get('taxcode')?.setValidators([Validators.required]);\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    } \r\n    else {\r\n      this.addCustomerForm.get('taxcode')?.clearValidators();\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n    * Mở modal chọn mã quốc gia\r\n    */\r\n  openSearchCountryCode(formName: 'addCustomerForm') {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this[formName].value.phone, this.countryCode as CountryCode);\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   * @param formName tên của from cần dùng\r\n   * @param fieldName tên của field chứa số điẹn thoại\r\n   */\r\n  formatPhoneNumber(event: Event, formName: 'addCustomerForm', fieldName: string): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this[formName].get(fieldName)?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n  closeAccountInfo(event) {\r\n    this.modalAccountInfo = false;\r\n  }\r\n\r\n  close(value?) {\r\n    if (!this.createStatus)\r\n      if (value) this.closeAddCustomer({ reload: true, value: value });\r\n      else this.closeAddCustomer({ reload: false });\r\n  }\r\n\r\n  initAddCustomerForm() {\r\n    this.addCustomerForm = this.customerService.initAddCustomerForm();\r\n  }\r\n\r\n  initAddRetailForm() {\r\n    this.addRetailForm = this.customerService.initAddRetailForm();\r\n  }\r\n\r\n  addCustomer() {\r\n    this.createStatus = true;\r\n    let customer: any = { ...this.addCustomerForm.value };\r\n    const phoneNumberValue = customer.phone;\r\n    customer.countryCode = this.countryCode;\r\n    customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n    customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n\r\n    customer.date = (new Date()).toISOString();\r\n\r\n    if(customer.isBusiness) {\r\n      delete customer.gender;\r\n      delete customer.datebirth;\r\n    }\r\n    else {\r\n      delete customer.taxcode;\r\n    }\r\n\r\n    console.log('customer', customer);\r\n\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.addCustomer(customer)\r\n        .then((res: any) => {\r\n          setTimeout(() => {\r\n            this.createStatus = false;\r\n            this.vhComponent.showToast(1500, `${this.languageService.translate(\"Customer\")} ${customer.name} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n            this.close(res.data);\r\n          }, 500);\r\n        }, error => {\r\n          this.createStatus = false;\r\n          this.vhComponent.showToast(1500, this.languageService.translate(\"An error occurred while adding customer. Please try again\"), \"alert-toast\");\r\n        }).finally(() => {\r\n          this.vhComponent.hideLoading(0);\r\n        });\r\n    });\r\n  }\r\n\r\n  getMemberName() {\r\n    return this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner())?.name || 'Unknown';\r\n  }\r\n\r\n  getRetailName() {\r\n    return this.selectedBill.getRetailName() ? this.selectedBill.getRetailName() : 'Khách lẻ';\r\n  }\r\n\r\n  //////////////////////////////////////////////////////DỊCH CHUYỂN BÀN////////////////////////////////////////////////////////////\r\n  switchTable(fromTable, toTable) {\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Switch table\") + \" ?\", \"OK\", this.languageService.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        // Cả hai bàn đều đã có hóa đơn\r\n        if (toTable.status) {\r\n          // Lấy bill của 2 bàn\r\n          Promise.all([\r\n            this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: fromTable._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }),\r\n            this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: toTable._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }),\r\n          ]).then(([fromBill, toBill]) => {\r\n            /** Kiểm tra bill muốn tách có tồn tại không */\r\n            if (!fromBill['length'] || !toBill['length']) {\r\n              this.vhComponent.hideLoading();\r\n              this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\").then(() => this.goBack());\r\n              return;\r\n            }\r\n\r\n            // Lấy bill detail đơn cũ\r\n            this.vhQueryCafe.getBill_details_byId_bill(fromBill[0]._id).then(billDetail => {\r\n              let process = [];\r\n              // Cộng dồn chi tiết hóa đơn từ bàn cũ sang bàn mới\r\n              for (let i = 0; i < billDetail.length; i++) {\r\n                toBill[0]['total'] += billDetail[i].price * billDetail[i].quantity;\r\n\r\n                if (billDetail[i].toppings) toBill[0]['total'] += billDetail[i].toppings.reduce((sum: number, current: any) => sum + current.price * current.quantity, 0);\r\n                process.push(this.vhQueryCafe.createBill_Detail({ ...billDetail[i], id_bill: toBill[0]['_id'] }));\r\n              }\r\n              // Cập nhật tổng tiền và trạng thái bàn\r\n              process.push(this.vhQueryCafe.updateBill(toBill[0]['_id'], { total: toBill[0].total, payment: toBill[0].payment_type == 2 ? 0 : toBill[0].total * (1 + toBill[0].tax / 100), bill_open_time: new Date() }));\r\n              process.push(this.vhQueryCafe.updateTable(fromTable._id, { status: false }));\r\n\r\n              Promise.all(process).then((res) => {\r\n                // Cập nhật lại selectedBill thành đơn mới\r\n                if (this.selectedBill !== null) {\r\n                  this.updateBillAfterSwitchTable(toBill[0]).then(() => {\r\n                    // Xóa đơn cũ\r\n                    this.vhQueryCafe.deleteBill_Billdetail(fromBill[0]['_id']).then(() => {\r\n                      this.vhComponent.showToast(2000, this.languageService.translate(\"Switch table successfully\"), \"success-toast\").then(() => {\r\n                        this.goBack();\r\n                        this.updateServiceTime();\r\n                      }).finally(() => {\r\n                        this.vhComponent.hideLoading()\r\n                      });\r\n                    });\r\n                  });\r\n                }\r\n                // Nếu không có selectedBill thì chỉ xóa đơn cũ rồi goBack()\r\n                else {\r\n                  // Xóa đơn cũ\r\n                  this.vhQueryCafe.deleteBill_Billdetail(fromBill[0]['_id']).then(() => {\r\n                    this.vhComponent.showToast(2000, this.languageService.translate(\"Switch table successfully\"), \"success-toast\").then(() => {\r\n                      this.goBack();\r\n                    }).finally(() => {\r\n                      this.updateServiceTime();\r\n                      this.vhComponent.hideLoading()\r\n                    });\r\n                  });\r\n                }\r\n              }).catch((err) => this.vhComponent.showToast(2000, \"Switch table failed\", \"alert-toast\"));\r\n            });\r\n          });\r\n        }\r\n        // Trường hợp chuyển sang bàn trống\r\n        else {\r\n          this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: fromTable._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }).then((fromBill) => {\r\n\r\n            if (!fromBill['length']) {\r\n              this.vhComponent.hideLoading();\r\n              this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\").then(() => this.goBack());\r\n              return;\r\n            }\r\n            // Cập nhật lại id_table mới của đơn\r\n            Promise.all([\r\n              this.vhQueryCafe.updateBill(fromBill[0]._id, { id_table: toTable._id, id_area: toTable.id_area, bill_open_time: new Date() }),\r\n              this.vhQueryCafe.updateTable(fromTable._id, { status: false }),\r\n              this.vhQueryCafe.updateTable(toTable._id, { status: true })\r\n            ]).then(() => {\r\n              this.vhComponent.showToast(2000, this.languageService.translate(\"Switch table successfully\"), \"success-toast\").then(() => {\r\n                if (this.selectedBill !== null) {\r\n                  this.updateBillAfterSwitchTable(fromBill[0]).then(() => {\r\n                    this.updateServiceTime();\r\n                  });                \r\n                }\r\n                this.goBack();\r\n              });\r\n            }).catch((err) => this.vhComponent.showToast(2000, \"Switch table failed\", \"alert-toast\")).finally(() => this.vhComponent.hideLoading());\r\n          });\r\n        }\r\n      });\r\n    }, () => { });\r\n  }\r\n\r\n  /**\r\n   * Hàm cập nhật thông tin hóa đơn sau khi chuyển bàn\r\n   * @param bill\r\n   * @returns\r\n   */\r\n  updateBillAfterSwitchTable(bill) {\r\n    return Promise.all([\r\n      this.vhQueryCafe.getBill(bill._id),\r\n      this.vhQueryCafe.getBill_details_byId_bill(bill._id),\r\n      this.vhQuery.getDocsByFields('barcode_designs ', {\r\n        id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n        default: { $eq: true },\r\n      }),\r\n      this.vhQueryCafe.getEarningPointsBills(),\r\n      this.vhQueryCafe.getEarningPointsProducts(),\r\n    ])\r\n      .then(\r\n        ([\r\n          bill,\r\n          billDetail,\r\n          label,\r\n          earning_point_bills,\r\n          earning_points_products,\r\n        ]) => {\r\n          if (label['length'] && label[0].status) this.stamp = label[0];\r\n          this.list_earning_point_bills = earning_point_bills;\r\n          this.list_earning_points_products = earning_points_products;\r\n\r\n          if (!bill) {\r\n            this.vhComponent.alertMessage('', '', this.languageService.translate('The invoice is not existed'), 'OK').then(() => this.goBack());\r\n            return;\r\n          }\r\n          // Khởi tạo đối tượng hóa đơn đã chọn\r\n          this.selectedBill = new VhOrderInvoices(\r\n            bill,\r\n            this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n            this.vhQueryCafe,\r\n            this.platform\r\n          );\r\n          this.initCustomer();\r\n\r\n          this.getClassAndProgram();\r\n          // kiểm tra cho phép nợ\r\n          this.debt = this.selectedBill.getIdPartner() == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.selectedBill.getIdPartner());\r\n          this.vhQueryCafe.closeSyncOpeningBill();\r\n          this.observableCheckBill(bill['_id']);\r\n          this.default_price_type = this.selectedBill.getPriceType() ? this.selectedBill.getPriceType() : 1;\r\n\r\n          this.selectedBill.setIdTable(bill['id_table']);\r\n          this.selectedBill.setIdEmployee(this.vhAuth.getUser()._id);\r\n          this.selectedBill.setIdArea(bill['id_area']);\r\n\r\n          // lấy thuế\r\n          let tax: any = this.vhQueryCafe.getlocalTaxs().find((tax) => tax.status && tax.default);\r\n          if (tax) this.selectedBill.setTax(parseFloat(tax.value));\r\n\r\n          // Cập nhật thông tin hiển thị của bàn\r\n          if (this.selectedBill.getIdTable() == 'go_home') {\r\n            this.tableInfo = this.languageService.translate('Take away');\r\n          }\r\n          else {\r\n            this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n          }\r\n        }\r\n      )\r\n      .catch((err) => {\r\n        console.error(err);\r\n        this.vhComponent.alertMessageDesktop('error', this.languageService.translate('Connect error'));\r\n      })\r\n      .finally(() => {\r\n        this.isLoadedInvoice2 = true;\r\n      });\r\n  }\r\n\r\n  /**\r\n      * Hàm lấy hóa đơn để tách bàn\r\n      * @param bill\r\n      * @returns\r\n      */\r\n  initBillToSeparate(bill) {\r\n    return Promise.all([\r\n      this.vhQueryCafe.getBill(bill._id),\r\n      this.vhQueryCafe.getBill_details_byId_bill(bill._id),\r\n      this.vhComponent.showLoading(''),\r\n    ])\r\n      .then(\r\n        ([\r\n          bill,\r\n          billDetail,\r\n          loading,\r\n        ]) => {\r\n\r\n          if (!bill) {\r\n            this.vhComponent.alertMessage('', '', this.languageService.translate('The invoice is not existed'), 'OK').then(() => this.goBack());\r\n            return;\r\n          }\r\n          // Khởi tạo đối tượng hóa đơn\r\n          this.selectedBill = new VhOrderInvoices(\r\n            bill,\r\n            this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n            this.vhQueryCafe,\r\n            this.platform\r\n          );\r\n        }\r\n      )\r\n      .catch((err) => {\r\n        console.error(err);\r\n        this.vhComponent.alertMessageDesktop('error', this.languageService.translate('Connect error'));\r\n      });\r\n  }\r\n\r\n  /* ------------------------------------------------------------ BOOKING/CART ------------------------------------------------------------ */\r\n  getTotalFood() {\r\n    const invoiceDetail = this.selectedBill.getInvoiceDetail();\r\n    let total = 0;\r\n    for (let item of invoiceDetail) {\r\n      if (item.id_promotion) {\r\n        total += item.products.length;\r\n      }\r\n      else {\r\n        total += 1;\r\n      }\r\n    }\r\n\r\n    return total;\r\n  }\r\n\r\n\r\n\r\n  /* --------------------------------------------------------------- BOOKING -------------------------------------------------------------- */\r\n\r\n  /** Có hiện modal Thêm đặt bàn hay không */\r\n  get isShowModalBookingAdd(): boolean {\r\n    return this.cafeSapoSharedService.isShowModalBookingAdd;\r\n  }\r\n  /** Có hiện modal Thêm đặt bàn hay không */\r\n  set isShowModalBookingAdd(value: boolean) {\r\n    this.cafeSapoSharedService.isShowModalBookingAdd = value;\r\n  }\r\n\r\n  /** Booking object để lưu dữ liệu */\r\n  get bookingBillObject(): any {\r\n    return this.cafeSapoSharedService.bookingBillObject;\r\n  }\r\n  /** Booking object để lưu dữ liệu */\r\n  set bookingBillObject(value: any) {\r\n    this.cafeSapoSharedService.bookingBillObject = value;\r\n  }\r\n\r\n  /** Đơn hàng từ Booking để tạo đơn hàng */\r\n  get bookingBill(): VhBookingInvoices {\r\n    return this.cafeSapoSharedService.bookingBill;\r\n  }\r\n  /** Đơn hàng từ Booking để tạo đơn hàng */\r\n  set bookingBill(value: VhBookingInvoices) {\r\n    this.cafeSapoSharedService.bookingBill = value;\r\n  }\r\n\r\n  /** Thời gian hiện tại */\r\n  get today(): Date {\r\n    return this.cafeSapoSharedService.today;\r\n  }\r\n  /** Thời gian hiện tại */\r\n  set today(value: Date) {\r\n    this.cafeSapoSharedService.today = value;\r\n  }\r\n\r\n  /** Disabled date trước hiện tại */\r\n  get bookingDisabledDateBeforeNow(): (current: Date) => boolean {\r\n    return this.cafeSapoSharedService.bookingDisabledDateBeforeNow;\r\n  }\r\n  /** Disabled date trước hiện tại */\r\n  set bookingDisabledDateBeforeNow(value: (current: Date) => boolean) {\r\n    this.cafeSapoSharedService.bookingDisabledDateBeforeNow = value;\r\n  }\r\n\r\n  /** Disabled time trước hiện tại */\r\n  get bookingDisabledTimeBeforeNow(): (current: Date | null) => { nzDisabledHours: () => number[], nzDisabledMinutes: (hour: number) => number[], nzDisabledSeconds: () => number[]; } {\r\n    return this.cafeSapoSharedService.bookingDisabledTimeBeforeNow;\r\n  }\r\n  /** Disabled time trước hiện tại */\r\n  set bookingDisabledTimeBeforeNow(value: (current: Date | null) => { nzDisabledHours: () => number[], nzDisabledMinutes: (hour: number) => number[], nzDisabledSeconds: () => number[]; }) {\r\n    this.cafeSapoSharedService.bookingDisabledTimeBeforeNow = value;\r\n  }\r\n\r\n  /** Loại khách hàng ở Booking. 1: Khách lẻ, 2: Thành viên */\r\n  get bookingCustomerType(): 1 | 2 | 3 {\r\n    return this.cafeSapoSharedService.bookingCustomerType;\r\n  }\r\n  /** Loại khách hàng ở Booking. 1: Khách lẻ, 2: Thành viên */\r\n  set bookingCustomerType(value: 1 | 2 | 3) {\r\n    this.cafeSapoSharedService.bookingCustomerType = value;\r\n  }\r\n\r\n  /** Profile khách hàng được chọn trong Booking. VD: nguyen van an */\r\n  get bookingSelectedCustomerProfile(): any {\r\n    return this.cafeSapoSharedService.bookingSelectedCustomerProfile;\r\n  }\r\n  /** Profile khách hàng được chọn trong Booking. VD: nguyen van an */\r\n  set bookingSelectedCustomerProfile(value: any) {\r\n    this.cafeSapoSharedService.bookingSelectedCustomerProfile = value;\r\n  }\r\n\r\n  /** Area - Table được chọn trong Booking. VD: Khu vuc 1 - ban a2 */\r\n  get bookingSelectedTableInfo(): string {\r\n    return this.cafeSapoSharedService.bookingSelectedTableInfo;\r\n  }\r\n  /** Area - Table được chọn trong Booking. VD: Khu vuc 1 - ban a2 */\r\n  set bookingSelectedTableInfo(value: string) {\r\n    this.cafeSapoSharedService.bookingSelectedTableInfo = value;\r\n  }\r\n\r\n  /** Có hiện modal Chọn món ăn hay không */\r\n  get isShowModalBookingChooseFood(): boolean {\r\n    return this.cafeSapoSharedService.isShowModalBookingChooseFood;\r\n  }\r\n  /** Có hiện modal Chọn món ăn hay không */\r\n  set isShowModalBookingChooseFood(value: boolean) {\r\n    this.cafeSapoSharedService.isShowModalBookingChooseFood = value;\r\n  }\r\n\r\n  /** Cho phép update lên database không */\r\n  get isUpdateToDatabase(): boolean {\r\n    return this.cafeSapoSharedService.isUpdateToDatabase;\r\n  }\r\n  /** Cho phép update lên database không */\r\n  set isUpdateToDatabase(value: boolean) {\r\n    this.cafeSapoSharedService.isUpdateToDatabase = value;\r\n  }\r\n\r\n  /** Danh sách tất cả bills của tab Booking */\r\n  get bookingListBills(): any {\r\n    return this.cafeSapoSharedService.bookingListBills;\r\n  }\r\n  /** Danh sách tất cả bills của tab Booking */\r\n  set bookingListBills(value: any) {\r\n    this.cafeSapoSharedService.bookingListBills = value;\r\n  }\r\n\r\n  /** Danh sách bills sẽ hiển thị của tab Booking */\r\n  get bookingListBillsShow(): any {\r\n    return this.cafeSapoSharedService.bookingListBillsShow;\r\n  }\r\n  /** Danh sách bills sẽ hiển thị của tab Booking */\r\n  set bookingListBillsShow(value: any) {\r\n    this.cafeSapoSharedService.bookingListBillsShow = value;\r\n  }\r\n\r\n  /** Đã load danh sách Booking chưa */\r\n  get isLoadedBookingListBills(): boolean {\r\n    return this.cafeSapoSharedService.isLoadedBookingListBills;\r\n  }\r\n  /** Đã load danh sách Booking chưa */\r\n  set isLoadedBookingListBills(value: boolean) {\r\n    this.cafeSapoSharedService.isLoadedBookingListBills = value;\r\n  }\r\n\r\n  /** Ngày bắt đầu và kết thúc để filter ở booking */\r\n  get bookingFilterDate(): Date[] {\r\n    return this.cafeSapoSharedService.bookingFilterDate;\r\n  }\r\n  /** Ngày bắt đầu và kết thúc để filter ở booking */\r\n  set bookingFilterDate(value: Date[]) {\r\n    this.cafeSapoSharedService.bookingFilterDate = value;\r\n  }\r\n\r\n  /** Loại hiển thị của modal-add-booking */\r\n  get modalAddBookingType(): 'add' | 'edit' {\r\n    return this.cafeSapoSharedService.modalAddBookingType;\r\n  }\r\n  /** Loại hiển thị của modal-add-booking */\r\n  set modalAddBookingType(value: 'add' | 'edit') {\r\n    this.cafeSapoSharedService.modalAddBookingType = value;\r\n  }\r\n\r\n  /** Có hiện modal Chọn bàn hay không */\r\n  get isShowModalBookingChooseTable(): boolean {\r\n    return this.cafeSapoSharedService.isShowModalBookingChooseTable;\r\n  }\r\n  /** Có hiện modal Chọn bàn hay không */\r\n  set isShowModalBookingChooseTable(value: boolean) {\r\n    this.cafeSapoSharedService.isShowModalBookingChooseTable = value;\r\n  }\r\n\r\n  /** Để xác định phương thức sẽ gọi sau khi choose table */\r\n  get bookingChooseTableType(): 'add' | 'transform-to-order' | 'change' {\r\n    return this.cafeSapoSharedService.bookingChooseTableType;\r\n  }\r\n  /** Để xác định phương thức sẽ gọi sau khi choose table */\r\n  set bookingChooseTableType(value: 'add' | 'transform-to-order' | 'change') {\r\n    this.cafeSapoSharedService.bookingChooseTableType = value;\r\n  }\r\n\r\n  /** Máy in bếp ở booking */\r\n  get bookingPrinterKitchen(): any {\r\n    return this.cafeSapoSharedService.bookingPrinterKitchen;\r\n  }\r\n  /** Máy in bếp ở booking */\r\n  set bookingPrinterKitchen(value: any) {\r\n    this.cafeSapoSharedService.bookingPrinterKitchen = value;\r\n  }\r\n\r\n  /** Để xác định phương thức sẽ gọi sau khi choose table */\r\n  get bookingChooseFoodType(): 'add' | 'change' {\r\n    return this.cafeSapoSharedService.bookingChooseFoodType;\r\n  }\r\n  /** Để xác định phương thức sẽ gọi sau khi choose table */\r\n  set bookingChooseFoodType(value: 'add' | 'change') {\r\n    this.cafeSapoSharedService.bookingChooseFoodType = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi loại khách hàng ở modal add-booking\r\n   */\r\n  bookingChangeCustomerType(type) {\r\n    if (type === 1) {\r\n      this.bookingBillObject.id_customer = 'id_retail';\r\n      this.bookingBillObject.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n      this.bookingBillObject.tax_buyerLegalName = '';\r\n      this.bookingBillObject.tax_buyerTaxCode = '';\r\n      this.bookingBillObject.tax_buyerAddressLine = '';\r\n      this.bookingBillObject.tax_buyerEmail = '';\r\n      this.bookingSelectedCustomerProfile = {};\r\n    }\r\n    else if (type === 2 && this.bookingBillObject.retail_name) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.languageService.translate('Cancel'),\r\n        nzOkText: 'Ok',\r\n        nzOnOk: () => {\r\n          this.bookingClearRetailCustomer();\r\n          this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n        },\r\n        nzOnCancel: () => {\r\n          this.bookingCustomerType = 1;\r\n        },\r\n      });\r\n    }\r\n    else if (type === 3) {\r\n      this.customerList = this.customerSearchList = [];\r\n    }\r\n    else {\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Clear dữ liệu retail customer ở modal add-booking\r\n   */\r\n  bookingClearRetailCustomer() {\r\n    this.bookingBill.setRetailName('');\r\n    this.bookingBill.setRetailPhone('');\r\n    this.bookingBill.setRetailAddress('');\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi chọn khách hàng ở modal add-booking\r\n   * @param id_customers mảng ids của customer được chọn\r\n   */\r\n  bookingChangeCustomer(id_customers: any) {\r\n    if (this.bookingBillObject.id_customer != id_customers[0]) {\r\n      this.bookingBillObject.id_customer = id_customers[0];\r\n      if (this.bookingBillObject.id_customer === 'id_retail') {\r\n        this.bookingCustomerType = 1;\r\n        this.bookingBillObject.tax_buyerDisplayName = 'Người mua không lấy hoá đơn';\r\n        this.bookingBillObject.tax_buyerLegalName = '';\r\n        this.bookingBillObject.tax_buyerTaxCode = '';\r\n        this.bookingBillObject.tax_buyerAddressLine = '';\r\n        this.bookingBillObject.tax_buyerEmail = '';\r\n      }\r\n      else {\r\n        // this.bookingCustomerType = 2;\r\n        this.bookingSelectedCustomerProfile = this.vhQueryCafe.getlocalCustomer(this.bookingBillObject.id_customer);\r\n        this.bookingBillObject.setTaxBuyerDisplayName(this.bookingSelectedCustomerProfile?.name || '');\r\n        this.bookingBillObject.setTaxBuyerLegalName(this.bookingSelectedCustomerProfile?.name || '');\r\n        this.bookingBillObject.setTaxBuyerTaxCode(this.bookingSelectedCustomerProfile?.taxcode || '');\r\n        this.bookingBillObject.setTaxBuyerAddressLine(this.bookingSelectedCustomerProfile?.address || '');\r\n        this.bookingBillObject.setTaxBuyerEmail(this.bookingSelectedCustomerProfile?.email || '');\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi mở modal Chọn món ăn\r\n   * @type add (từ modal thêm booking) hay change (từ icon dropdown)\r\n   */\r\n  bookingOnOpenChooseFood(type?: 'add' | 'change') {\r\n    this.isUpdateToDatabase = false;\r\n    this.mapBookingData();\r\n    this.selectedBill = new VhOrderInvoices(this.bookingBill.getCreateUpdateInvoice(), this.bookingBill.getInvoiceDetail(), this.vhQueryCafe);\r\n    if (this.selectedBill.getIdArea() && this.selectedBill.getIdTable()) {\r\n      this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedBill.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.selectedBill.getIdTable()).name}`;\r\n    }\r\n    else {\r\n      this.tableInfo = this.languageService.translate('No table selected');\r\n    }\r\n    this.bookingChooseFoodType = type ? type : 'add';\r\n    this.isShowModalBookingChooseFood = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi cancel modal Chọn món ăn\r\n   */\r\n  bookingOnCancelChooseFood() {\r\n    this.isUpdateToDatabase = true;\r\n    this.isShowModalBookingChooseFood = false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi ok/save trong modal Chọn món ăn\r\n   */\r\n  bookingOnChooseFood(event: any) {\r\n    this.mapBookingObject(event);\r\n    this.bookingOnCancelChooseFood();\r\n  }\r\n\r\n\r\n\r\n  /** Danh sách 7 ngày từ ngày hôm nay để dùng ở tab Booking */\r\n  get daysList(): any {\r\n    return this.cafeSapoSharedService.daysList;\r\n  }\r\n  /** Danh sách 7 ngày từ ngày hôm nay để dùng ở tab Booking */\r\n  set daysList(value: any) {\r\n    this.cafeSapoSharedService.daysList = value;\r\n  }\r\n\r\n  /** Bộ lọc được chọn ở booking */\r\n  get selectedFilterDate(): any {\r\n    return this.cafeSapoSharedService.selectedFilterDate;\r\n  }\r\n  /** Bộ lọc được chọn ở booking */\r\n  set selectedFilterDate(value: any) {\r\n    this.cafeSapoSharedService.selectedFilterDate = value;\r\n  }\r\n\r\n  /** Đếm số lượng hoá đơn theo key */\r\n  get bookingCountBill(): any {\r\n    return this.cafeSapoSharedService.bookingCountBill;\r\n  }\r\n  /** Đếm số lượng hoá đơn theo key */\r\n  set bookingCountBill(value: any) {\r\n    this.cafeSapoSharedService.bookingCountBill = value;\r\n  }\r\n\r\n  /** Danh sách id của hoá đơn overdue */\r\n  get bookingListIdBillsOverdue(): any {\r\n    return this.cafeSapoSharedService.bookingListIdBillsOverdue;\r\n  }\r\n  /** Danh sách id của hoá đơn overdue */\r\n  set bookingListIdBillsOverdue(value: any) {\r\n    this.cafeSapoSharedService.bookingListIdBillsOverdue = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn Xác nhận hoặc Xác nhậN và in trong mdoal Thêm đặt bàn\r\n   */\r\n  bookingOnAdd(print?: boolean) {\r\n    // map dữ liệu từ bookingBillObject sang bookingBill\r\n    this.mapBookingData();\r\n\r\n    // add vô database\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.createBill_Billdetail(\r\n        this.bookingBill.getCreateUpdateInvoice(17),\r\n        this.bookingBill.getCreateUpdateInvoiceDetail()\r\n      ).then(res => {\r\n        this.isShowModalBookingAdd = false;\r\n        this.vhComponent.showToast(2000,\r\n          `${this.languageService.translate(\"Booking\")} ${this.bookingBill.getBillCode()} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n        );\r\n        this.vhComponent.hideLoading(0);\r\n\r\n        // Xử lý in\r\n        if (!print) {\r\n          // Thêm vào Dánh sách đặt bàn\r\n          const bill = {\r\n            ...res,\r\n            date: new Date(res['date'])\r\n          };\r\n          this.bookingListBills = this.bookingListBills.concat(bill);\r\n          this.bookingListBillsShow = this.bookingListBillsShow.concat(bill);\r\n          this.countBookingBill();\r\n        }\r\n        else if (this.checkPrinter && this.printer) {\r\n          this.vhComponent.showModal(\r\n            this.printService.renderPrintPageBooking(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.bookingBill },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          ).then((modal) => {\r\n            modal.onWillDismiss().then(() => {\r\n              // Thêm vào Dánh sách đặt bàn\r\n              const bill = {\r\n                ...res,\r\n                date: new Date(res['date'])\r\n              };\r\n              this.bookingListBills = this.bookingListBills.concat(bill);\r\n              this.bookingListBillsShow = this.bookingListBillsShow.concat(bill);\r\n              this.countBookingBill();\r\n            });\r\n          });\r\n        }\r\n      }, error => {\r\n        console.log('createBill_Billdetail', error);\r\n        this.vhComponent.hideLoading(0);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Map dữ liệu từ bookingBillObject(any) sang bookingBill(VhBookingInvoices)\r\n   */\r\n  mapBookingData() {\r\n    this.bookingBill = new VhBookingInvoices(this.bookingBillObject, this.bookingBillObject.invoiceDetail);\r\n    this.bookingBill.setIdEmployee(this.vhAuth.getUser()._id);\r\n    this.bookingBill.setIdBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n    if (this.bookingBillObject.id_customer === 'id_retail') {\r\n      this.bookingBill.setRetailName(this.bookingSelectedCustomerProfile.name);\r\n      this.bookingBill.setRetailPhone(this.bookingSelectedCustomerProfile.phone);\r\n      this.bookingBill.setRetailAddress(this.bookingSelectedCustomerProfile.address);\r\n      this.bookingBill.setTaxBuyerDisplayName('');\r\n      this.bookingBill.setTaxBuyerLegalName('');\r\n      this.bookingBill.setTaxBuyerTaxCode('');\r\n      this.bookingBill.setTaxBuyerAddressLine('');\r\n      this.bookingBill.setTaxBuyerEmail('');\r\n    }\r\n    this.bookingBill.setDate(\r\n      this.bookingBillObject.date instanceof Date\r\n        ? this.bookingBillObject.date.toISOString()\r\n        : this.bookingBillObject.date\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Map dữ liệu từ selectedBill(kiểu dữ liệu any) sang bookingObject\r\n   * @param selectedBill cần map\r\n   */\r\n  mapBookingObject(selectedBill: any) {\r\n    if (selectedBill.invoice.id_customer === 'id_retail') {\r\n      this.bookingCustomerType = 1;\r\n      this.bookingBillObject = {\r\n        ...this.bookingBillObject,\r\n        retail_address: selectedBill.invoice.retail_address,\r\n        retail_name: selectedBill.invoice.retail_name,\r\n        retail_phone: selectedBill.invoice.retail_phone,\r\n        tax_buyerDisplayName: 'Người mua không lấy hoá đơn',\r\n        tax_buyerLegalName: '',\r\n        tax_buyerTaxCode: '',\r\n        tax_buyerAddressLine: '',\r\n        tax_buyerEmail: '',\r\n      };\r\n    }\r\n    else {\r\n      this.bookingCustomerType = 2;\r\n      if (this.bookingBillObject.id_customer !== selectedBill.invoice.id_customer) {\r\n        this.bookingChangeCustomer([selectedBill.invoice.id_customer]);\r\n      }\r\n    }\r\n\r\n    this.bookingBillObject = {\r\n      ...this.bookingBillObject,\r\n      invoiceDetail: selectedBill.invoiceDetail,\r\n      discount: selectedBill.invoice.discount,\r\n      discount_bill: selectedBill.invoice.discount_bill,\r\n      earning_points_bill: selectedBill.invoice.earning_points_bill,\r\n      fee: selectedBill.invoice.fee,\r\n      id_customer: selectedBill.invoice.id_customer,\r\n      tax_buyerDisplayName: selectedBill.invoice.tax_buyerDisplayName,\r\n      tax_buyerLegalName: selectedBill.invoice.tax_buyerLegalName,\r\n      tax_buyerTaxCode: selectedBill.invoice.tax_buyerTaxCode,\r\n      tax_buyerAddressLine: selectedBill.invoice.tax_buyerAddressLine,\r\n      tax_buyerEmail: selectedBill.invoice.tax_buyerEmail,\r\n      payment: selectedBill.invoice.payment,\r\n      tax: selectedBill.invoice.tax,\r\n      subTotal: selectedBill.subTotal,\r\n      total: selectedBill.invoice.total,\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy danh sách booking\r\n   */\r\n  bookingGetData(startDate?: Date, endDate?: Date) {\r\n    this.generateNext7Days();\r\n    if (this.isLoadedBookingListBills) return;\r\n    this.bookingGetDataByDate(startDate, endDate);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy danh sách hoá đơn booking theo ngày\r\n   * @param startDate ngày bắt đầu\r\n   * @param endDate ngày kết thúc\r\n   * @param type key để đếm số lượng hoá đơn. VD: overdue, upcoming, Monday, ...\r\n   */\r\n  bookingGetDataByDate(startDate?: Date, endDate?: Date, type?: string) {\r\n    const query: any = {\r\n      bill_type: { $eq: 17 },\r\n      id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n    };\r\n\r\n    if (type === 'overdue') {\r\n      query.date = {\r\n        $lte: new Date(new Date(startDate).setHours(0, 0, 0, 0))\r\n      };\r\n    }\r\n    else if (type === 'upcoming') {\r\n      // 2 giờ sau\r\n      const now = new Date();\r\n      query.date = {\r\n        $gte: new Date(new Date(startDate).setHours(now.getHours(), now.getMinutes(), now.getSeconds())),\r\n        $lte: new Date(new Date(startDate).setHours(now.getHours() + 2, now.getMinutes(), now.getSeconds())),\r\n      };\r\n    }\r\n    else if (startDate && endDate) {\r\n      query.date = {\r\n        $gte: new Date(new Date(startDate).setHours(0, 0, 0, 0)),\r\n        $lte: new Date(new Date(endDate).setHours(23, 59, 59, 999)),\r\n      };\r\n    }\r\n\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQueryCafe.getBills_byFields(\r\n        query,\r\n        {},\r\n        { date: 1 },\r\n        0\r\n      ).then((bills: any[]) => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.bookingListBills = this.bookingListBillsShow = bills;\r\n          this.isLoadedBookingListBills = true;\r\n          // cập nhật số lượng hoá đơn\r\n          if (!startDate && !endDate) {\r\n            this.countBookingBill();\r\n          }\r\n          else if (type === 'overdue') {\r\n            this.bookingCountBill['overdue'] = this.countBillByDate(this.daysList[0].date, 'overdue');\r\n          }\r\n          else if (type === 'upcoming') {\r\n            this.bookingCountBill['upcoming'] = this.countBillByDate(this.daysList[0].date, 'upcoming');\r\n          }\r\n          else if (type === 'custom') {\r\n            this.bookingCountBill['custom'] = this.bookingListBills.length || '0';\r\n          }\r\n        });\r\n      }).catch(err => {\r\n        this.vhComponent.hideLoading(0); console.error(err);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Khi chọn range ngày để filter\r\n   */\r\n  bookingChangeFilterDate(event) {\r\n    if (event[1].getTime() - event[0].getTime() <= 2678400000) {\r\n      this.bookingGetDataByDate(event[0], event[1], 'custom');\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(2000, this.languageService.translate('The time to view no more than 30 days'), 'alert-toast');\r\n      this.bookingFilterDate = [new Date(event[0]), new Date(event[0].getTime() + 2678400000)];\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo danh sách 7 ngày từ hôm nay\r\n   */\r\n  generateNext7Days(): void {\r\n    const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const today = new Date();\r\n\r\n    this.daysList = Array.from({ length: 7 }, (_, i) => {\r\n      const date = new Date(today);\r\n      date.setDate(today.getDate() + i);\r\n\r\n      return {\r\n        dayOfWeek: daysOfWeek[date.getDay()],\r\n        date: date,\r\n        count: 0\r\n      };\r\n    });\r\n    this.daysList[0].dayOfWeek = 'Today';\r\n    this.daysList[1].dayOfWeek = 'Tomorrow';\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Đếm số lượng hóa đơn theo ngày\r\n   * @param date Ngày cần đếm\r\n   * @param type Loại hóa đơn: 'upcoming' - hóa đơn sắp đến trong 2 giờ, 'overdue' - hóa đơn quá giờ, 'all' - tất cả hóa đơn\r\n   */\r\n  countBillByDate(date: Date, type: 'upcoming' | 'overdue' | 'all' = 'all'): number {\r\n    const now = new Date();\r\n    const dateString = date.toISOString().split('T')[0];\r\n    this.bookingListIdBillsOverdue = [];\r\n\r\n    return this.bookingListBills.filter((bill) => {\r\n      const billDate = new Date(bill.date);\r\n      const billDateString = billDate.toISOString().split('T')[0];\r\n      // Lấy danh sách Quá giờ\r\n      const isOverdue = billDate.getTime() < now.getTime() || billDateString < dateString;\r\n      if(isOverdue) {\r\n        this.bookingListIdBillsOverdue.push(bill._id);\r\n      }\r\n\r\n      if (type === 'upcoming') {\r\n        return (\r\n          billDateString === dateString &&\r\n          billDate.getTime() > now.getTime() &&\r\n          billDate.getTime() <= now.getTime() + 2 * 60 * 60 * 1000 // 2 giờ kế\r\n        );\r\n      }\r\n      else if (type === 'overdue') {\r\n        return isOverdue;\r\n      }\r\n      else {\r\n        return billDateString === dateString;\r\n      }\r\n    }).length || '0';\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn vào bill trong danh sách đặt bàn\r\n   */\r\n  goToBookingDetail(bill: any) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.billService.getBillDetailsByIdBill(bill._id).then((invoiceDetail: any) => {\r\n        this.bookingBillObject = {\r\n          ...bill,\r\n          invoiceDetail: invoiceDetail,\r\n        };\r\n        // xử lý dữ liệu khách hàng\r\n        this.bookingCustomerType = this.bookingBillObject.id_customer === 'id_retail' ? 1 : 2;\r\n        this.bookingSelectedTableInfo = `${this.vhQueryCafe.getlocalArea(this.bookingBillObject.id_area).name} - ${this.vhQueryCafe.getlocalTable(this.bookingBillObject.id_table).name}`;\r\n        if (this.bookingBillObject.id_customer === 'id_retail') {\r\n          this.bookingSelectedCustomerProfile = {\r\n            name: this.bookingBillObject.retail_name,\r\n            phone: this.bookingBillObject.retail_phone,\r\n            address: this.bookingBillObject.retail_address,\r\n          };\r\n        }\r\n        else {\r\n          this.bookingSelectedCustomerProfile = this.vhQueryCafe.getlocalCustomer(this.bookingBillObject.id_customer);\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0);\r\n        this.mapBookingData();\r\n        this.selectedBill = new VhOrderInvoices(bill, this.bookingBill.getInvoiceDetail(), this.vhQueryCafe);\r\n        this.modalAddBookingType = 'edit';\r\n        this.isShowModalBookingAdd = true;\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xóa bill trong danh sách đặt bàn\r\n   */\r\n  bookingDeleteBill(_id: string, bill_code: string) {\r\n    // hiển thị thông báo xác nhận\r\n    this.vhComponent.alertConfirm(\r\n      this.languageService.translate('Confirm'),\r\n      '',\r\n      `${this.languageService.translate('Are you sure to delete the booking order?')}`, 'OK', this.languageService.translate('Cancel')\r\n    ).then(() => {\r\n      this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n        // xoá\r\n        this.vhQueryCafe.deleteBill_Billdetail(_id).then(() => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.isShowModalBookingAdd = false;\r\n            this.bookingListBills = this.bookingListBills.filter((item) => item._id != _id);\r\n            this.bookingListBillsShow = this.bookingListBillsShow.filter((item) => item._id != _id);\r\n            this.countBookingBill();\r\n            this.vhComponent.showToast(2000, `${this.languageService.translate('Booking')} ${bill_code} ${this.languageService.translate('has been deleted successfully')}`, 'success-toast');\r\n          });\r\n        });\r\n      });\r\n    }, () => { });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi Lưu / In hoá đơn\r\n   */\r\n  bookingUpdateBill(_id: string, print?: boolean) {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.mapBookingData();\r\n      this.selectedBill = new VhOrderInvoices(this.bookingBill.getCreateUpdateInvoice(), this.bookingBill.getInvoiceDetail(), this.vhQueryCafe);\r\n      // cập nhật lên database\r\n      this.vhQueryCafe.updateBill_Billdetail(\r\n        _id,\r\n        this.bookingBill.getCreateUpdateInvoice(),\r\n        this.bookingBill.getCreateUpdateInvoiceDetail(true)\r\n      ).then(() => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          // không in\r\n          if (!print) {\r\n            // update to list\r\n            this.updateBookingList(_id, this.bookingBill.getCreateUpdateInvoice());\r\n            this.isShowModalBookingAdd = false;\r\n          }\r\n          // có in\r\n          else {\r\n            if (this.checkPrinter && this.printer) {\r\n              this.vhComponent.showModal(\r\n                this.printService.renderPrintPageBooking(this.printer['_id']),\r\n                { printer: this.printer, invoice: this.bookingBill },\r\n                false,\r\n                false,\r\n                `modal-print-${this.printer['_id']}`\r\n              ).then((modal) => {\r\n                modal.onWillDismiss().then(() => {\r\n                  // update to list\r\n                  this.updateBookingList(_id, this.bookingBill.getCreateUpdateInvoice());\r\n                  this.isShowModalBookingAdd = false;\r\n                });\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).catch((err) => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          console.error(err);\r\n          this.vhComponent.showToast(2000, this.languageService.translate('Update failed'), 'alert-toast');\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn Chuyển qua gọi món trong modal add-booking\r\n   * Hiển thị thông báo xác nhận Khi nhấn Chuyển sang gọi món\r\n   */\r\n  bookingGoToOrder(_id: string, id_table: string) {\r\n    this.mapBookingData();\r\n    // hiển thị xác nhận\r\n    this.vhComponent.alertConfirm(\r\n      this.languageService.translate('Confirm'),\r\n      '',\r\n      this.languageService.translate('Go to order') + '?',\r\n      'OK',\r\n      this.languageService.translate('Cancel')\r\n    ).then(() => {\r\n      // Kiểm tra xem bàn có đang trống hay không, có thì mới chuyển, không thì hiển thị thông báo chọn bàn khác\r\n      let table: any = this.vhQueryCafe.getlocalTable(id_table);\r\n      // đã có => hiển thị thông báo chọn bàn khác\r\n      if (table.status) {\r\n        setTimeout(() => {\r\n          this.vhComponent.alertConfirm(\r\n            this.languageService.translate('This table has been ordered'),\r\n            '',\r\n            this.languageService.translate('Switch others') + '?',\r\n            'OK',\r\n            this.languageService.translate('Cancel')\r\n          ).then(() => {\r\n            this.bookingChooseTableType = 'transform-to-order';\r\n            this.isShowModalBookingChooseTable = true;\r\n          }, () => { });\r\n        }, 200);\r\n      }\r\n      // chưa có => chuyển\r\n      else {\r\n        this.transformToOrder(_id, table);\r\n      }\r\n    }, () => { });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thực hiện cập nhật Chuyển sang gọi món lên database\r\n   */\r\n  transformToOrder(_id: string, table) {\r\n    let note: string = this.bookingBill.getNote() ? this.bookingBill.getNote() : `${this.vhQueryCafe.getlocalArea(table['id_area']).name} - ${table.name}`;\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(_id,\r\n          {\r\n            ...this.bookingBill.getCreateUpdateInvoice(),\r\n            id_table: table._id,\r\n            id_area: table.id_area,\r\n            note: note,\r\n            bill_type: 5,\r\n            payment_type: 1,\r\n            id_wallet: 'id_cash',\r\n            payment: this.bookingBill.getTotalATax(),\r\n            date: (new Date).toISOString()\r\n          },\r\n          this.bookingBill.getCreateUpdateInvoiceDetail(true)),\r\n        this.vhQueryCafe.updateTable(table._id, { status: true })\r\n      ]).then(res => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.isShowModalBookingChooseTable = false;\r\n          this.isShowModalBookingAdd = false;\r\n          this.vhComponent.showToast(1500, this.languageService.translate(\"Go to order successfully\"), \"success-toast\");\r\n          this.selectedBill = new VhOrderInvoices(this.bookingBill, [], this.vhQueryCafe);\r\n          this.selectedTableID = this.bookingBill.getIdTable();\r\n          this.areaChanged(this.bookingBill.getIdArea());\r\n          this.debt = this.bookingBill.getIdPartner() == 'id_retail' ? false : this.vhQueryCafe.getlocalCustomer(this.bookingBill.getIdPartner());\r\n          // update to list\r\n          this.bookingListBills = this.bookingListBills.filter((item) => item._id != _id);\r\n          this.bookingListBillsShow = this.bookingListBillsShow.filter((item) => item._id != _id);\r\n          // navigate sang cart-detail\r\n          let dataRestore = { indexTab: this.indexTabArea, searchValue: this.searchValueAreaGoHome, filterType: this.filterType, id_area: this.selectedAreaID };\r\n          this.router.navigate(['/cafe/cafe-fnb/detail'], { state: { id_table: this.selectedTableID, id_bill: this.bookingBill.getID(), dataRestore } });\r\n        });\r\n      }).catch(err => console.error(err));\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Reset dữ liệu của modal add booking\r\n   */\r\n  bookingResetAddModal() {\r\n    this.bookingSelectedTableInfo = '';\r\n    this.bookingBillObject = {\r\n      date: new Date(),\r\n      id_customer: 'id_retail',\r\n      tax_buyerDisplayName: 'Người mua không lấy hoá đơn',\r\n      tax_buyerLegalName: '',\r\n      tax_buyerTaxCode: '',\r\n      tax_buyerAddressLine: '',\r\n      tax_buyerEmail: '',\r\n    };\r\n    this.bookingCustomerType = 1;\r\n    this.bookingSelectedCustomerProfile = {};\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Switch phương thức sẽ gọi sau khi chọn bàn trong modal choose-table\r\n   *\r\n   * Dựa trên biến bookingChooseTableType\r\n   *\r\n   * @param table bàn được chọn\r\n   */\r\n  bookingOnOkChooseTable(table) {\r\n    switch (this.bookingChooseTableType) {\r\n      case 'add':\r\n        this.bookingOnChooseTable(table);\r\n        break;\r\n      case 'transform-to-order':\r\n        this.transformToOrderChangeTable(table);\r\n        break;\r\n      case 'change':\r\n        this.bookingChangeTable(table);\r\n        break;\r\n      default:\r\n        console.log('bookingChooseTableType not found');\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi chọn bàn trong modal add-booking khi add\r\n   */\r\n  bookingOnChooseTable(table: any) {\r\n    this.bookingBillObject.id_table = table._id;\r\n    this.bookingBillObject.id_area = this.selectedAreaID;\r\n    this.bookingSelectedTableInfo = `${this.vhQueryCafe.getlocalArea(this.bookingBillObject.id_area).name} - ${table.name}`;\r\n    this.isShowModalBookingChooseTable = false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi chọn bàn mới để chuyển sang gọi món\r\n   */\r\n  transformToOrderChangeTable(table) {\r\n    if (!table.status) {\r\n      this.transformToOrder(this.bookingBill.getID(), table);\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('This table has been ordered. Please choose another table'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi bàn cho hoá đơn booking\r\n   */\r\n  bookingChangeTable(table: any) {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQueryCafe.updateBill(this.bookingBillObject._id, {\r\n        id_table: table._id,\r\n        id_area: this.selectedAreaID\r\n      }).then(() => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.isShowModalBookingChooseTable = false;\r\n          this.bookingSelectedTableInfo = `${this.vhQueryCafe.getlocalArea(this.selectedAreaID).name} - ${table.name}`;\r\n          // update to list\r\n          this.updateBookingList(this.bookingBillObject._id, {\r\n            id_table: table._id,\r\n            id_area: this.selectedAreaID\r\n          });\r\n          this.vhComponent.showToast(1500, this.languageService.translate('Change table successfully'), 'success-toast');\r\n        });\r\n      }).catch((err) => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.vhComponent.showToast(1500, this.languageService.translate('Change table failed'), 'alert-toast');\r\n          console.log(err);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Switch phương thức sẽ gọi sau khi chọn món ăn trong choose-food (cart-detail)\r\n   */\r\n  bookingOnOkChooseFood(selectedBill) {\r\n    switch (this.bookingChooseFoodType) {\r\n      case 'add':\r\n        this.bookingOnChooseFood(selectedBill);\r\n        break;\r\n      case 'change':\r\n        this.bookingOnUpdateBillDetails(selectedBill);\r\n        break;\r\n      default:\r\n        console.log('bookingChooseFoodType not found');\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn Chọn món ở dropdown trong booking-item\r\n   */\r\n  bookingOnOpenChooseFoodFromDropDown() {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.billService.getBillDetailsByIdBill(this.bookingBillObject._id).then((invoiceDetail: any) => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.bookingBillObject = {\r\n            ...this.bookingBillObject,\r\n            invoiceDetail: invoiceDetail,\r\n          };\r\n          this.bookingOnOpenChooseFood('change');\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Update dữ liệu sau khi nhấn Lưu từ việc nhấn Chọn món ở dropdown trong booking-item\r\n   */\r\n  bookingOnUpdateBillDetails(selectedBill) {\r\n    this.mapBookingObject(selectedBill);\r\n    this.mapBookingData();\r\n\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQueryCafe.updateBill_Billdetail(\r\n        this.bookingBill.getID(),\r\n        this.bookingBill.getCreateUpdateInvoice(),\r\n        this.bookingBill.getCreateUpdateInvoiceDetail(true)\r\n      ).then(() => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          // update to list\r\n          this.updateBookingList(this.bookingBillObject._id, this.bookingBill.getCreateUpdateInvoice());\r\n          this.isShowModalBookingChooseFood = false;\r\n        });\r\n      }).catch((err) => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          console.error(err);\r\n          this.vhComponent.showToast(2000, this.languageService.translate('Update failed'), 'alert-toast');\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Cập nhật dữ liệu của danh sách bookingListBills và bookingListBillsShow\r\n   */\r\n  private updateBookingList(_id: string, updatedData: any): void {\r\n    const updateItem = (item: any) =>\r\n      item._id === _id ? { ...item, ...updatedData } : item;\r\n\r\n    this.bookingListBills = this.bookingListBills.map(updateItem);\r\n    this.bookingListBillsShow = this.bookingListBillsShow.map(updateItem);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Đếm lại số lượng bill ở bộ lọc Tất cả, Sắp đến, Quá giờ, 7 ngày tiếp theo\r\n   */\r\n  countBookingBill() {\r\n    this.daysList.map((day) => {\r\n      this.bookingCountBill[day.dayOfWeek] = this.countBillByDate(day.date);\r\n    });\r\n    this.bookingCountBill['all'] = this.bookingListBills.length;\r\n    this.bookingCountBill['overdue'] = this.countBillByDate(this.daysList[0].date, 'overdue');\r\n    this.bookingCountBill['upcoming'] = this.countBillByDate(this.daysList[0].date, 'upcoming');\r\n  }\r\n\r\n\r\n\r\n  /** Dùng cho In bếp / bar oqr booking. Chứa trạng thái in, danh sách món sẽ in và tên bàn */\r\n  set bookingPrintKitchen(value: any) {\r\n    this.cafeSapoSharedService.bookingPrintKitchen = value;\r\n  }\r\n  /** Dùng cho In bếp / bar oqr booking. Chứa trạng thái in, danh sách món sẽ in và tên bàn */\r\n  get bookingPrintKitchen(): any {\r\n    return this.cafeSapoSharedService.bookingPrintKitchen;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn in bếp / bar\r\n   */\r\n  onBookingPrintKitchen(id_bill, id_table) {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.billService.getBillDetailsByIdBill(id_bill).then((invoiceDetail: any) => {\r\n        this.bookingPrintKitchen['table_name'] = this.vhQueryCafe.getlocalTable(id_table)['name'];\r\n        this.bookingPrintKitchen['value'] = invoiceDetail;\r\n        this.vhComponent.hideLoading(0);\r\n        this.bookingPrintKitchen.status = true;\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  bookingHandlePrint() {\r\n    this.bookingCheckPrintKitchen().then((printer: any) => {\r\n      if (printer.enable) {\r\n        if (this.platform.is(\"electron\")) this.printElectron(printer);\r\n        else this.bookingPrintDesktop();\r\n      }\r\n    }, err => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\");\r\n    });\r\n  }\r\n\r\n\r\n\r\n  printElectron(printer) {\r\n    let html = document.getElementById('print-kitchen').innerHTML;\r\n    electron.ipcRenderer.send('print-start', {\r\n      html: html,\r\n      deviceName: printer.printer_name,\r\n    });\r\n    electron.ipcRenderer.on('print-done', (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', this.languageService.translate('Printing failed'), 3000);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  bookingPrintDesktop() {\r\n    printJS({\r\n      printable: \"print-kitchen\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      style:\r\n        'html { font-size: 14pt;}' +\r\n        '.print-kitchen .font-bold {font-size:1.8rem; font-weight:bold}' +\r\n        '.print-kitchen b {font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-font{font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-value-name { width : 70% ; font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value-quantity { width : 30% ; font-size: 14pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-value-name-note {font-style: italic; font-size: 10pt}' +\r\n        '.print-kitchen .print-kitchen-combo { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-combo-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-properties-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties-quantity { width : 30% ; font-size: 12pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-topping { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-topping-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-topping-quantity { width : 30% ; font-size: 12pt ; text-align:center}'\r\n    });\r\n  }\r\n\r\n\r\n\r\n  handleCancelPrint() {\r\n    this.bookingPrintKitchen.status = false;\r\n  }\r\n\r\n\r\n\r\n  bookingCheckPrintKitchen() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getlocalPrinters().find(item => item.name == \"DESKTOP\");\r\n      if (printer && printer.print_kitchen.enable) resolve(printer.print_kitchen);\r\n      else rejects(\"No\");\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /* --------------------------------------------------------------- IN TEM --------------------------------------------------------------- */\r\n\r\n\r\n\r\n  /** Có hiện modal Chọn tem để in hay không */\r\n  get isShowModalSelectLabelPrint(): boolean {\r\n    return this.cafeSapoSharedService.isShowModalSelectLabelPrint;\r\n  }\r\n  /** Có hiện modal Chọn tem để in hay không */\r\n  set isShowModalSelectLabelPrint(value: boolean) {\r\n    this.cafeSapoSharedService.isShowModalSelectLabelPrint = value;\r\n  }\r\n\r\n  /** Danh sách món ăn cần in tem */\r\n  get list_selected_dishs(): any {\r\n    return this.cafeSapoSharedService.list_selected_dishs;\r\n  }\r\n  /** Danh sách món ăn cần in tem */\r\n  set list_selected_dishs(value: any) {\r\n    this.cafeSapoSharedService.list_selected_dishs = value;\r\n  }\r\n\r\n  get isSetObservableBill(): any {\r\n    return this.cafeSapoSharedService.isSetObservableBill;\r\n  }\r\n  set isSetObservableBill(value: any) {\r\n    this.cafeSapoSharedService.isSetObservableBill = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi in 1 tem\r\n   */\r\n  printSelectedLabel({ item, i }) {\r\n    if(item.ptype == VhType.SERVICETIME && !item.is_paused) {\r\n      this.productService.updateServiceTimePrice(item, this.selectedBill.getPriceType());\r\n      this.selectedBill.getInvoiceDetail()[i] = item;\r\n      this.selectedBill.setSubTotal();\r\n    }\r\n    // lọc bỏ topping số lượng = 0\r\n    const data = JSON.parse(JSON.stringify(item || {}));\r\n    if(item.toppings && item.toppings.length > 0) {\r\n      data.toppings = item.toppings.filter(topping => topping.quantity > 0);\r\n    }\r\n    this.list_selected_dishs = [{ ...data, index: i }];\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi in tất cả tem\r\n   */\r\n  printAllLabel() {\r\n    let arr = [];\r\n    this.selectedBill.getInvoiceDetail().forEach((element, index) => {\r\n      if ([1, 4, 5].includes(element.ptype))\r\n        arr.push({ ...element, index: index });\r\n    });\r\n    this.list_selected_dishs = arr;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi mở modal chọn tem để in\r\n   */\r\n  openModalSelectLabelPrint() {\r\n    // let arr = [];\r\n    // this.selectedBill.getInvoiceDetail().forEach((element, index) => {\r\n    //   if ([1, 4, 5].includes(element.ptype))\r\n    //     arr.push({ ...element, index: index });\r\n    // });\r\n    // this.list_selected_dishs = arr;\r\n    this.isShowModalSelectLabelPrint = true;\r\n  }\r\n\r\n\r\n\r\n  /* ---------------------------------------------------------- DỊCH VỤ THỜI GIAN --------------------------------------------------------- */\r\n\r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  get endTime(): Date {\r\n    return this.cafeSapoSharedService.endTime;\r\n  }\r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  set endTime(value: Date) {\r\n    this.cafeSapoSharedService.endTime = value;\r\n  }\r\n\r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  get isShowModalEditUsedTime(): boolean {\r\n    return this.cafeSapoSharedService.isShowModalEditUsedTime;\r\n  }\r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  set isShowModalEditUsedTime(value: boolean) {\r\n    this.cafeSapoSharedService.isShowModalEditUsedTime = value;\r\n  }\r\n\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  get tempStartTime(): any {\r\n    return this.cafeSapoSharedService.tempStartTime;\r\n  }\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  set tempStartTime(value: any) {\r\n    this.cafeSapoSharedService.tempStartTime = value;\r\n  }\r\n\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  get tempEndTime(): any {\r\n    return this.cafeSapoSharedService.tempEndTime;\r\n  }\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  set tempEndTime(value: any) {\r\n    this.cafeSapoSharedService.tempEndTime = value;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.choiceFood.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.choiceFood.is_paused) {\r\n      this.tempEndTime = this.choiceFood.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.choiceFood.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.choiceFood.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.choiceFood.is_paused = true;\r\n    }\r\n\r\n    this.choiceFood.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_start_order: this.tempStartTime,\r\n      time_end_order: this.tempEndTime ? this.choiceFood.time_end_order : null,\r\n      is_paused: this.choiceFood.is_paused,\r\n    });\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.selectedBill.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.selectedBill.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.choiceFood.time_end_order = new Date();\r\n    this.choiceFood.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.selectedBill.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.selectedBill.setSubTotal();\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_end_order: isPause ? this.choiceFood.time_end_order : undefined, \r\n      is_paused: isPause ,\r\n      price: this.choiceFood.price,\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho selectedBill\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.selectedBill)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.selectedBill.getInvoiceDetail(), this.selectedBill.getPriceType());\r\n    this.selectedBill.setSubTotal();\r\n    console.log(this.selectedBill.getInvoiceDetail());\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------------- HÓA ĐƠN ĐIỆN TỬ ---------------------------------------------------------- */\r\n\r\n  /** Ký tự động ngay khi gửi hóa đơn lên Cơ quan thuế */\r\n  get cqt_invoice_auto_sign(): boolean {\r\n    return this.cafeSapoSharedService.cqt_invoice_auto_sign;\r\n  }\r\n  /** Ký tự động ngay khi gửi hóa đơn lên Cơ quan thuế */\r\n  set cqt_invoice_auto_sign(value: boolean) {\r\n    this.cafeSapoSharedService.cqt_invoice_auto_sign = value;\r\n  }\r\n\r\n  /** Gửi hóa đơn lên Cơ quan thuế ngay khi thanh toán */\r\n  get cqt_submit_invoice_immediately(): boolean {\r\n    return this.cafeSapoSharedService.cqt_submit_invoice_immediately;\r\n  }\r\n  /** Gửi hóa đơn lên Cơ quan thuế ngay khi thanh toán */\r\n  set cqt_submit_invoice_immediately(value: boolean) {\r\n    this.cafeSapoSharedService.cqt_submit_invoice_immediately = value;\r\n  }\r\n\r\n  handleMinvoice(bill) {\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQueryCafe.getlocalBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp đã gửi lên cqt rồi thì khỏi\r\n      if(bill.cqt_status == 2 || bill.cqt_status == 3){\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                     \r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            console.log('error', error)\r\n            resolve(true)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Console log nội dung để dùng khi ở HTML cho tiện\r\n   * @param content nội dung log\r\n   */\r\n  log(content: any) {\r\n    console.log(content);\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * show_product_mutil_line_sales: Hiển thị một sản phẩm trên nhiều dòng\r\n * include_promotion_product: có sản phẩm khuyến mãi hay không\r\n * include_discount: có check giảm giá/ chiết khấu hay không\r\n * include_paid_points: có thanh toán = điểm thưởng hay không\r\n * include_fee: có phí hay không\r\n * include_tax: có thuế hay không\r\n * customer_class: hạng khách hàng\r\n * payment_type: 1-cash, 2-debit, 3-account\r\n *\r\n * chương trình khuyến mãi type = 1 (giảm giá tiền)\r\n *                         type = 2 (giảm giá phần trăm)\r\n *                         type = 3 (sản phẩm đồng giá)\r\n *                         type = 4 (giảm giá tiền khi mua đủ SL sản phẩm)\r\n *                         type = 5 (giảm phần trăm khi mua đủ SL sản phẩm)\r\n *                         type = 6 (tặng quà khi mua nhiều sản phẩm)\r\n *                         type = 7 (tặng quà theo tổng giá trị đơn hàng)\r\n *\r\n *\r\n {\r\n    \"_id\": \"SGgRFZQRScWgnvIcq7pL\",\r\n    \"id_customer\": \"IWg0MLT8dwLA7Mxm6dXb\", // id của khách. Nếu là khách lẻ thì là id_retail, ngược lại là id của khách hàng\r\n    \"partner_name\": \"duong\", // tên khách hàng\r\n    \"payment_points\": 3000000, // số điểm khi quy đổi ra tiền\r\n    \"use_points\": 3000, // số điểm sử dụng\r\n    \"payment_coupons\": 100000, // số tiền thanh toán bằng coupon\r\n    \"tax\": 10, // Thuế (ở dạng %, ví dụ 5 => 5%)\r\n    \"id_employee\": \"hKT6LDT2PAOoLWDuvd8Y8Hsnh3k1\", // id nhân viên\r\n    \"employee_name\": \"56duongsalefrfr\", // tên nhân viên\r\n    \"phone\": \"123123444\" // số điện thoại nhân viên\r\n    \"fee\": 800000, // Phí / Phụ thu\r\n    \"cash\": 25000000, // Tiền khách đưa\r\n    \"payment\": 16170000, // Thanh toán\r\n    \"payment_type\": 1, // 1-cash-Tiền mặt, 2-debit-Công nợ, 3-account-Tài khoản\r\n    \"paymen t_name\": \"Tiền mặt\", // Tên phương thức thanh toán: Tiền mặt, Công nợ, Tài khoản\r\n    \"discount_bill\": 2000000, // chiết khẩu\r\n    \"discount\": 1000000, // giảm giá\r\n    \"price_type\": 1, // giá bán: 1-giá bán lẻ, 2-giá bán buôn/bán sỉ\r\n    \"id_wallet\": \"id_cash\", // id của ví: id_cash-tiền mặt, null-công nợ, CIKwyA68tWfkeatzLsAV-tài khoản\r\n    \"id_branch\": \"hm8lOcYNbxOYdluJgtEj\", // id chi nhánh\r\n    \"date\": \"2025-02-24T06:52:22.413Z\", // ngày tạo hóa đơn\r\n    \"note\": \"ghi chu\", // ghi chú\r\n    \"total\": 14700000, // = subTotal - bill.discount - bill.discount_bill - bill.payment_coupons - bill.payment_points + bill.fee; Tổng = total + (tax / 100 * total)\r\n    \"bill_type\": 5, // 1: đã bán, 5: lưu tạm, 36: lưu tạm online (đặt trên web), 4: không dùng nữa\r\n    \"earning_points_bill\": 0, // tích điểm hoá đơn\r\n    \"sync_code\": \"2NH99NQTLD\",\r\n    \"bill_code\": \"240225D002\",\r\n    \"id_delivery\": \"\",\r\n  }\r\n\r\n */\r\n","import { Injectable } from '@angular/core';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AreaService {\r\n\r\n  /** Danh sách khu vực */\r\n  listArea: any = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n  ) {}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { FunctionService } from './function.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomerService {\r\n\r\n\r\n  constructor(\r\n    private functionService: FunctionService,\r\n  ) {}\r\n\r\n  /**\r\n   * Khởi tạo form thêm khách hàng\r\n   * @returns From thêm khách hàng\r\n   */\r\n  initAddCustomerForm(): FormGroup {\r\n    return new FormGroup({\r\n      img: new FormControl(null),\r\n      name: new FormControl(null, Validators.compose([Validators.required])),\r\n      email: new FormControl(null, Validators.compose([Validators.email])),\r\n      gender: new FormControl(null),\r\n      datebirth: new FormControl(null),\r\n      phone: new FormControl(null, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.functionService.defaultCountryCode),\r\n      ]),\r\n      address: new FormControl(null),\r\n      country: new FormControl(null),\r\n      province: new FormControl(null),\r\n      district: new FormControl(null),\r\n      note: new FormControl(null),\r\n      debt_enable: new FormControl(true),\r\n      type: new FormControl(1),\r\n      time_for_payment: new FormControl(0),\r\n      delete_hidden: new FormControl(false),\r\n      isBusiness: new FormControl(false),\r\n      taxcode: new FormControl(null),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Khởi tạo form thêm khách lẻ\r\n   * @returns From thêm khách lẻ\r\n   */\r\n  initAddRetailForm(): FormGroup {\r\n    return new FormGroup({\r\n      retail_name: new FormControl(null, Validators.compose([Validators.required])),\r\n      retail_phone: new FormControl(null, Validators.compose([Validators.required, Validators.minLength(6)])),\r\n      retail_address: new FormControl(null),\r\n    });\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DateService {\r\n\r\n  constructor(\r\n  ) { }\r\n\r\n\r\n  \r\n  /**\r\n   * Trả về khoảng cách giữa 2 ngày\r\n   * VD: getNumberOfDay(15/02/2022, 10/02/2022) => return 5\r\n   * */\r\n  getNumberOfDay(date1, date2) {\r\n    return (date1.getTime() - date2.getTime()) / (24 * 3600 * 1000);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { VhAuth } from 'ionic-vhframeworks';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EmployeeService {\r\n\r\n  /** Danh sách nhân viên */\r\n  listEmployee: any = this.vhAuth.getlocalEmployees();\r\n\r\n\r\n  constructor(\r\n    private vhAuth: VhAuth,\r\n  ) { }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { VhAuth } from 'ionic-vhframeworks';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ThemeService {\r\n\r\n  /** Danh sách font-size để chọn */\r\n  fontSizeList: number[] = [12, 13, 14, 15, 16, 17, 18, 19, 20];\r\n\r\n  /** Font-size đang được chọn */\r\n  selectedFontSize: number = parseFloat(localStorage.getItem('vh-cafe-system-fontsize')) || 14;\r\n\r\n  /** Danh sách màu để chọn */\r\n  themeList: { theme: string, color: string; }[] = [\r\n    { theme: 'gray-theme', color: '#7F7F7F' },\r\n    { theme: 'orange-theme', color: '#FF7F26' },\r\n    { theme: 'yellow-theme', color: '#f1c40f' },\r\n    { theme: 'green-theme', color: '#23B14D' },\r\n    { theme: 'sky-blue-theme', color: '#00A2E8' },\r\n    { theme: 'blue-theme', color: '#1877F2' },\r\n    { theme: 'dark-blue-theme', color: '#3F47CC' },\r\n    { theme: 'purple-theme', color: '#A349A3' },\r\n    { theme: 'red-theme', color: '#DA2127' },\r\n  ];\r\n\r\n  /** Danh sách giao diện của cửa hàng */\r\n  cafeTemplates: {\r\n    name: string;\r\n    url: string;\r\n    giai_thich: string;\r\n    image: string;\r\n  }[] = [];\r\n\r\n\r\n\r\n  constructor(\r\n    public vhAuth: VhAuth,\r\n    public http: HttpClient,\r\n  ) {\r\n    this.getCafeTemplate()\r\n      .then((templates) => {\r\n        this.cafeTemplates = templates;\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error loading templates:', error);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thiết lập lại font-size hiển thị trên app\r\n   * @param fontSize Font-size cần thay đổi\r\n   */\r\n  changeFontSize(fontSize: number) {\r\n    localStorage.setItem('vh-cafe-system-fontsize', JSON.stringify(fontSize));\r\n    this.selectedFontSize = fontSize;\r\n    document.documentElement.style.fontSize = fontSize + 'px';\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thiết lập lại màu theme hiển thị trên app\r\n   * @param theme Tên theme cần thay đổi\r\n   * @param event\r\n   */\r\n  changeColor(theme, event) {\r\n    this.vhAuth.changeTheme(theme, event);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy main_sector của cửa hàng\r\n   * @returns main_sector của cửa hàng\r\n   */\r\n  getStoreMainSector() {\r\n    return this.vhAuth.getStore().main_sector;\r\n  }\r\n\r\n\r\n\r\n  country_code = 'VN';\r\n  language = 'vi';\r\n\r\n  /**\r\n   * Lấy giao diện theo main_sector của cửa hàng\r\n   * @returns Giao diện của cửa hàng\r\n   */\r\n  getCafeTemplate(): Promise<any[]> {\r\n    return new Promise((resolve, reject) => {\r\n      this.http\r\n        .get<any>(\r\n          `assets/documents/configuration/template/${this.country_code}/${this.getStoreMainSector()}.json`\r\n        )\r\n        .subscribe({\r\n          next: (templates) => {\r\n            if (templates && templates[this.language]) {\r\n              resolve(templates[this.language]);\r\n            } else {\r\n              reject('No templates found for this language');\r\n            }\r\n          },\r\n          error: (error) => {\r\n            reject(error);\r\n          },\r\n        });\r\n    });\r\n  }\r\n\r\n  getThemeValue() {\r\n    return this.vhAuth.getThemeValue() || 'sky-blue-theme';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from '../components/vh-component/vh-component';\r\nimport { LanguageService } from './language.service';\r\nimport { DateService } from './date.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  constructor(\r\n    private vhAuth: VhAuth,\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private dateService: DateService,\r\n    private nzModalService: NzModalService,\r\n  ) {}\r\n\r\n\r\n  \r\n  /**\r\n   * Kiểm tra xem tài khoản đã hết hạn chưa.\r\n   * Nếu > 3 ngày thì check xem còn trong hạn được phép sử dụng hay không, \r\n   * nếu trong hạn thì hiện thông yêu cầu gia hạn, \r\n   * ngược lại thông báo tài khoản đã tạm khóa\r\n   */\r\n  checkExpireAccount() {\r\n    let number = this.dateService.getNumberOfDay(new Date(), new Date(this.vhQueryCafe.getLocalRestrictionMainPackage().expire_date));\r\n\r\n    if (number > 3) { // check hết hạn sau 3 ngày thì hiện thông báo\r\n      // check tiếp  còn trong hạn được phép sử dụng hay ko\r\n      if (number < this.vhQueryCafe.getLocalRestrictionMainPackage().extra_usage_duration) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate('Branch') + ': ' + this.vhQueryCafe.getDefaultBranch().name + ' ' + this.languageService.translate('has expired') + '. ' + this.languageService.translate('Please renew to continue') + '!',\r\n          nzOkText: this.languageService.translate('Pay'),\r\n          nzCancelText: this.languageService.translate('Continue'),\r\n          nzCloseIcon: null,\r\n          nzClosable: false,\r\n          nzOnOk: () => {\r\n            // go to thanh toán\r\n            this.vhQueryCafe.getPayments(\r\n              { id_store: { $eq: this.vhAuth.getUser()._id }, payment_type: { $eq: 5 } },\r\n              {},\r\n              {},\r\n              0\r\n            ).then((payments: any) => {\r\n              if (payments) {\r\n                if (payments.length > 0) {\r\n                  this.router.navigate(['/cafe/payment/detail'],\r\n                    {\r\n                      state: payments\r\n                    });\r\n                } else if (payments == 0) {\r\n                  this.router.navigate(['/cafe/payment']);\r\n                }\r\n              }\r\n            })\r\n          },\r\n          nzOnCancel: () => {\r\n          }\r\n        })\r\n      }\r\n      else {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate('Branch') + ': ' + this.vhQueryCafe.getDefaultBranch().name + ' ' + this.languageService.translate('has expired') + '. ' + this.languageService.translate('Please renew to continue') + '!',\r\n          nzOkText: this.languageService.translate('Pay'),\r\n          nzCancelText: this.languageService.translate('Continue'),\r\n          nzCloseIcon: null,\r\n          nzClosable: false,\r\n          nzOnOk: () => {\r\n            // go to thanh toán\r\n            this.vhQueryCafe.getPayments(\r\n              { id_store: { $eq: this.vhAuth.getUser()._id }, payment_type: { $eq: 5 } },\r\n              {},\r\n              {},\r\n              0\r\n            ).then((payments: any) => {\r\n              if (payments) {\r\n                if (payments.length > 0) {\r\n                  this.router.navigate(['/cafe/payment/detail'],\r\n                    {\r\n                      state: payments\r\n                    });\r\n                } else if (payments == 0) {\r\n                  this.router.navigate(['/cafe/payment']);\r\n                }\r\n              }\r\n            });\r\n          },\r\n          nzOnCancel: () => {\r\n            this.router.navigate(['/login']);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Đăng xuất khỏi app và navigate về trang login\r\n   */\r\n  logout() {\r\n    this.vhAuth.signOut().then(() => {\r\n      this.vhQueryCafe.closeSyncCollections();\r\n      this.router.navigate(['/login']);\r\n    }, error => {\r\n      console.error('error', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chuyển qua Trang quản trị và cập nhật lại default_display_page của user\r\n   * @param type sẽ chuyển qua trang nào. /cafe/${type}\r\n   * @param permission\r\n   * @example this.updateInterface('dashboard', 'admin_display_page');\r\n   */\r\n  updateInterface(type, permission) {\r\n    if (this.vhAuth.checkMyPermission(permission)) {\r\n      Promise.all([\r\n        this.vhComponent.showLoading(this.languageService.translate(\"Changing interface...\"), \"current-loading\", null, null, false),\r\n        this.vhAuth.updateMyPermission({ default_display_page: permission }),\r\n      ]).then(() => {\r\n        this.vhComponent.hideLoading(0);\r\n        setTimeout(() => {\r\n          this.router.navigate(['/cafe/' + type]);\r\n        }, 200);\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thiết lập giao diện trang bán hàng mặc định khi mở app.\r\n   * Lấy từ template trong main_sector. sales-pos, sales-desktop, sales-retail,...\r\n   * @param default_selling_page trang bán hàng mặc định; sales-pos, sales-desktop, sales-retail,...\r\n   */\r\n  updateSalesInterface(default_selling_page) {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      if (this.vhAuth.checkMyPermission('selling_display_page')) {\r\n        this.vhAuth.updateMyPermission({ default_display_page: 'selling_display_page', default_selling_page : default_selling_page })\r\n          .then((bool) => {\r\n            this.vhComponent.hideLoading(0)\r\n              .then(() => {\r\n                this.router.navigate(['/cafe/' + default_selling_page], { state: { isSync: true } });\r\n              });\r\n          });\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"You do not have this rights\"));\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n"],"names":["EventEmitter","CafeFnbUI","i0","BillOptionComponent","constructor","vhQueryCafe","router","vhAuth","platform","languageService","vhComponent","functionService","cdRef","vhAlgorithm","nzModalService","nzMessageService","areaService","themeService","userService","cafeSapoSharedService","billService","productService","printService","vhQuery","customerService","vhEinvoice","ngOnInit","handleDeleteBill","confirm","nzTitle","translate","nzCancelText","nzOkText","nzOnOk","showLoading","then","deleteProcess","id","console","log","catch","err","error","showToast","finally","alertMessageDesktop","hideLoading","nzOnCancel","bill","id_table","Promise","all","deleteBill_Billdetail","_id","updateTable","status","gotoChoosetable","navigate","state","action","openModalSeparateTable","closeDropdown","emit","is_promotion","initBillToSeparate","destroyBillDetails_withPromotions","updateBill_Billdetail","selectedBill","getID","getCreateUpdateInvoice","getCreateUpdateInvoiceDetail","getBill_Detail_ByID_Bill","showModalSeparateTable","selectors","inputs","outputs","features","decls","vars","consts","template","ctx","ElementRef","ctx_r4","item_r8","CartOptionComponent","employeeService","ngOnDestroy","titleSub","unsubscribe","ngAfterViewInit","observeTextChanges","hostEl","selectRef","nativeElement","mutationObserver","MutationObserver","updateTitleForElement","optionTextEls","querySelectorAll","forEach","el","observe","childList","subtree","characterData","selector","element","querySelector","textContent","text","trim","setAttribute","closeSyncOpeningBill","isPromotion","viewQuery","ctx_r6","ctx_r1","area_r5","ChooseTableComponent","ResizeObserver","adjustScale","getCurrentNavigation","dataTrans","extras","foodToSeparate","prevPage","listArea","filter","area","name","areaChangedForSeperateTable","areaChanged","window","addEventListener","bind","container","children","viewportHeight","innerHeight","containerHeight","offsetHeight","scaleY","style","zoom","observerScale","goBack","type","onBackChooseTable","gotoOrder","dataRestore","handleChooseTable","table","onChooseTable","selectedTableID","createBill","selectedAreaID","searchValueAreaGoHome","indexTabArea","filterType","fromTable","getlocalTable","switchTable","table1","billTable2","getBills_byFields","$eq","bill_type","id_branch","getDefaultBranch","length","handleSeparateTable","table2","_TABLE1_BILL","billDetail","tableInfo","_TABLE2_BILL","alertConfirm","getData","transmit","separateTable","value","listTables","sortStringbyASC","getlocalTables","item","id_area","alertMessage","goBackArea","Object","total","payment","discount","fee","getBill_details_byId_bill","billDetail1","billDetail2","TABLE1_BILL","TABLE2_BILL","i","indexTable2","findIndex","indexTable1","toppings","toppingTotal","reduce","sum","current","price","quantity","push","payment_type","tax","process1","resolve","rejects","id_bill","res","process2","createBill_Billdetail","VhOrderInvoices","VhBookingInvoices","printJS","VhType","Validators","isShowModalPay","showConfigPrintKitchenElectron","showConfigPrintKitchen","user","branchList","showConfig","show_modal_choose_interface","modalAccountInfo","showConfigSales","showConfigPrint","kitchens","useBranch","default_selling_page","listFilter","area$","observableTables","listAllBills","listBills","checkPrinter","checkPrinterKitchen","printer","error_to_get_bill","debt","branchDefault","display_promotion_selling_price","onInit","getAreaData","splash","document","getElementById","remove","checkExpireAccount","checkBranches","searchValue","indexTab","getlocalArea","getBillsGoHome","sortNameIncludeNumber","map","selected","getBillByTable","getlocalEmployee","getUser","initPrinter","afterViewChecked","height","clientHeight","detectChanges","onDestroy","myTrackByFunction","index","myTrackByNameFunction","getObservableLocalAreas","subscribe","localArea","takeAway","concat","getlocalAreas","getObservableLocalTables","localTables","checkPlatformShowPrintKitchen","is","getLocalPrintPage","print_sizes","e","print_size_default","enable","printer_kitchen","bookingPrinterKitchen","handlePrintInvoice","getBill","setBillCode","bill_code","showModal","renderPrintPage","invoice","modal","onWillDismiss","handlePrintForCustomer","getBillType","gotoBooking","checkMyPermission","gotoSeperateTable","gotoSwitchTable","gotoListInvoice","gotoChangeVoucher","navigateByUrl","localStorageSET","gotoPrepaidCard","url","gotoSalesVoucher","gotoSalesPrepaidCard","gotoSalesOrder","gotoSalesOrderVoucher","gotoExchangeOrderVoucher","gotoSalesOrderPrepaidCard","gotoExchangeOrderCard","gotoDispatcher","bills","sortDatebyDESC","onChangeInvoiceSelected","billsGoHome","billsGoHomeShow","JSON","parse","stringify","sortFilter","sort","prev","next","Date","date","searchBillGoHome","branches","getlocalBranchs","employee","thisBranch","getlocalBranch","clearDefaultBranch","setDefaultBranch","getPermission","result","isLoadedInvoice","isLoadedInvoice2","nzOptions","percent_discount","initInvoice","getWallets","setIdTable","setIdEmployee","setIdArea","getlocalTaxs","find","default","setTax","parseFloat","nzIconType","deleteBill","getDiscount","getSubTotal","getIdPartner","getlocalCustomer","getIdTable","getIdArea","getlocalWallets","wallet","label","isLeaf","invoice_cash","moneyEdit","openPayModal","getCash","toString","setTimeout","vhnumeral","checkMaxLengthCash","slice","updateCash","setCash","getRawValue","updateBill","cash","bool","saveInvoice","print","checkLocalMyPermissionName","getTotalEarningPoint","getUsePoint","earned_points","updateCustomer_byEarnedPoints","setEarningPointBill","statusInvoice","invoiceTemp","createProcess","cqt_submit_invoice_immediately","handleMinvoice","success","getBillCode","stamp","observableSyncOpeningBill","list_earning_point_bills","list_earning_points_products","default_price_type","customer_class","program_bill","program_product","earning_point","isGotPromotion","showProductGift","product_gift_type7","showProductGiftType7","gotten_gift_type7","bill_details_pmtype_7","showDrawerProductList","showDrawerEdit","showPrintKitchenAgain","printKitchen","wishList","productWishList","show_modal_select_lots","list_search_lot","warning_lot_expried","dispatchers_enable","open_dialog_print_kitchen_bill_detail","show_modal_dispatcher","dispatcherzones","id_dispatcherzone","management_product_price2","editPrice","choiceFood","customerList","customerSearchList","customerType","customer","showDrawerAddCustomer","showDrawerCustomerInfo","showDrawerAddRetail","showModalChangePriceType","showModalOtherDiscount","showModalChooseTableToSwitch","show_box_search","point_validity","createStatus","addCustomerForm","addRetailForm","selectedValue","phone","invoice_discount","invoice_fee","invoice_note","invoice_payment","value_discount_point","product_codes","foodList","serviceList","sideDishesList","combosList","searchList","choiceFoodSearch","list_menu","listTabs","showOptions","isAddingFood","tempVal","auto_hidden_lot","auto_select_lot","tempSearchType","isExit","initInvoice2","getDocsByFields","getEarningPointsBills","getEarningPointsProducts","loading","earning_point_bills","earning_points_products","initCustomer","getClassAndProgram","observableCheckBill","getPriceType","getInvoiceDetail","isContainServiceTime","endTime","_a","ptype","SERVICETIME","is_paused","newItem","time_end_order","serviceTimePrice","calculateServiceTimePrice","total_price","price_origin","setSubTotal","bill_details_type_6","bill_details_others","changeBillDetails_withPromotions","getDate","bill_details_display","bill_details_pmtype_0to6","handleChooseLotForPromotion","sortNumberbyASC","handlePromotionType7","rsp","vcode","updateInvoice","ev","updating","deletePromotions","isUpdateToDatabase","getlocalCustomerClasss","id_customer_class","id_earning_points_bill","id_earning_points_product","handleAddGiftType7","products_gift","choose","addBill_detail_promotion","getPromotions","getEarningpointPromotion","findLastIndex","total_bill_value","getTotalATax","promotion","product","lots","min_date_exp","sortDatebyASC","lot_number","combos","changePriceType","event","bill_details","updateServiceTimePrice","price_update","getlocalDetailProduct","id_subproduct","id_product","getUnit_byRatio","units","ratio","top","getlocalProduct","price2","topping","setPriceType","pmtype","setBillHavePromotion","earning_points_product","getTotalEarningPointProduct","products","id_promotion","checkDisableChooseProductGift","data","promotions_maximum","deleteInvoice","deleting","updateAllServiceTimeToPause","updateNote","updateBill_Detail","note","saveEdit","COMBO","updateBill_Detail_btype_5","editFood","updatePrice","removeFood","food","dataKitchen","properties","subComboName","title","deleteBill_Detail_ptype_5","removeInvoiceDetail","deleteBill_Detail","getSubCombo","arr","getUnit","join","searchLot","changeAlias","openModalChooseLot","handleChooseLot","lot_select","id_lotproduct","getTime","date_exp","handleCancelChooseLot","changeEmployee","id_employee","changePercentDiscount","setDiscount","getPayment","updateDiscount","editPercentDiscount","updateFee","setFee","updateTax","updatePayment","setPayment","updateNoteBill","setNote","changePaymentType","setPaymentType","setIdWallet","checkMaxLengthDiscount","checkMaxLengthFee","checkMaxLengthPayment","openModalOtherDiscount","getlocalCustomerPoints","getArrayCouponCodes","handleOkOtherDiscount","getDiscountOther","getDiscountOfCoupon","code","getCoupon_Code_Name_Release_byCode","date_expire","setArrayCouponCodes","setDiscountCoupon","getElementsByTagName","onCloseProductCode","splice","calculatePoint2Money","setDiscountPoint","points","money","setUsePoint","getMenu","types","includes","DISHES","INGREDIENT","getlocalCategorys","cate","id_category","valid","sortVietnamesebyASC","SERVICE","TOPPING","dispatcher_done","getLocalAppSettingNameBranch","getlocalDetailProducts","delete_hidden","handleLotsOfCombo","lot","pro","unit","searchFood","toLowerCase","list","changeSub","subChoice","subs","selectFoods","active","createBillDetail","productValue","detail","getCreateItemDetail","addInvoiceDetail","time_start_order","bill_detail","getCreateItemCleanDetail","createBill_Detail_ptype_5","vhbill_detail","printKitchenOrDispatcher","createBill_Detail","updatePriceSearch","changeTypeGood","u","SERVICE_SERVICETIME","changeUnit","changeLotSearch","changeLot","increaseQuantity","reduceQuantity","onQuantityChange","foodId","debounceQuantityChangeTimer","clearTimeout","getlocalCustomers","changeCustomerType","setIdPartner","setTaxBuyerDisplayName","setTaxBuyerLegalName","setTaxBuyerTaxCode","setTaxBuyerAddressLine","setTaxBuyerEmail","id_customer","tax_buyerDisplayName","getTaxBuyerDisplayName","tax_buyerLegalName","getTaxBuyerLegalName","tax_buyerTaxCode","getTaxBuyerTaxCode","tax_buyerAddressLine","getTaxBuyerAddressLine","tax_buyerEmail","getTaxBuyerEmail","id_discount_bill","getlocalDiscount_bill","getDiscount_bill_byCustomer","updateServiceTime","getRetailName","clearRetailCustomer","setRetailName","setRetailPhone","setRetailAddress","blurCustomer","changeCustomer","preventChangeDiscountBill","setIdPartnerNoUpdateDiscountBill","localCustomer","taxcode","address","email","debt_enable","openAddCustomer","initAddCustomerForm","closeAddCustomer","reload","searchCustomer","bookingTriggerSelectSearchCustomerChange","onKeyDown","isFromBooking","key","preventDefault","stopPropagation","searchKeyword_NamePhone","display","undefined","bookingChangeCustomer","countryCode","callingCode","formattedPhone","changeBusiness","get","setValue","emitEvent","setValidators","required","_b","updateValueAndValidity","_c","clearValidators","_d","openSearchCountryCode","formName","getFormattedPhoneNumber","formatPhoneNumber","fieldName","input","target","closeAccountInfo","close","initAddRetailForm","addCustomer","phoneNumberValue","getNationalPhoneNumber","phoneNumber","getInternationalPhoneNumber","toISOString","isBusiness","gender","datebirth","getMemberName","toTable","fromBill","toBill","process","bill_open_time","updateBillAfterSwitchTable","getTotalFood","invoiceDetail","isShowModalBookingAdd","bookingBillObject","bookingBill","today","bookingDisabledDateBeforeNow","bookingDisabledTimeBeforeNow","bookingCustomerType","bookingSelectedCustomerProfile","bookingSelectedTableInfo","isShowModalBookingChooseFood","bookingListBills","bookingListBillsShow","isLoadedBookingListBills","bookingFilterDate","modalAddBookingType","isShowModalBookingChooseTable","bookingChooseTableType","bookingChooseFoodType","bookingChangeCustomerType","retail_name","bookingClearRetailCustomer","id_customers","_e","bookingOnOpenChooseFood","mapBookingData","bookingOnCancelChooseFood","bookingOnChooseFood","mapBookingObject","daysList","selectedFilterDate","bookingCountBill","bookingListIdBillsOverdue","bookingOnAdd","countBookingBill","renderPrintPageBooking","setIdBranch","setDate","retail_address","retail_phone","discount_bill","earning_points_bill","subTotal","bookingGetData","startDate","endDate","generateNext7Days","bookingGetDataByDate","query","$lte","setHours","now","$gte","getHours","getMinutes","getSeconds","countBillByDate","bookingChangeFilterDate","daysOfWeek","Array","from","_","dayOfWeek","getDay","count","dateString","split","billDate","billDateString","isOverdue","goToBookingDetail","getBillDetailsByIdBill","bookingDeleteBill","bookingUpdateBill","updateBookingList","bookingGoToOrder","transformToOrder","getNote","id_wallet","bookingResetAddModal","bookingOnOkChooseTable","bookingOnChooseTable","transformToOrderChangeTable","bookingChangeTable","bookingOnOkChooseFood","bookingOnUpdateBillDetails","bookingOnOpenChooseFoodFromDropDown","updatedData","updateItem","day","bookingPrintKitchen","onBookingPrintKitchen","bookingHandlePrint","bookingCheckPrintKitchen","printElectron","bookingPrintDesktop","html","innerHTML","electron","ipcRenderer","send","deviceName","printer_name","on","printable","scanStyles","handleCancelPrint","getlocalPrinters","print_kitchen","isShowModalSelectLabelPrint","list_selected_dishs","isSetObservableBill","printSelectedLabel","printAllLabel","openModalSelectLabelPrint","isShowModalEditUsedTime","tempStartTime","tempEndTime","handleOpenEditUsedTime","handleUpdateUsedTime","currentTime","pauseTime","isPause","updateServiceTimePriceInvoiceDetail","cqt_invoice_auto_sign","reject","currentBranch","einvoices","cqt_status","invoiceSeries","changeBill_byLocal_toInvoice_byMinvoice","saveInvoice_Sign_byMinvoice","token","saveInvoice_noSign_byMinvoice","content","encapsulation"],"sourceRoot":"webpack:///"}