{"version":3,"file":"src_app_cafe_desktop_cafe-pos_components_advange_switch-table_switch-table_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/cafe-pos/components/advange/switch-table/switch-table.component.ts","./src/app/cafe/desktop/cafe-pos/components/advange/switch-table/switch-table.component.html","./src/app/cafe/desktop/cafe-pos/components/advange/switch-table/switch-table.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-switch-table',\r\n  templateUrl: './switch-table.component.html',\r\n  styleUrls: ['./switch-table.component.scss']\r\n})\r\nexport class SwitchTableComponent implements OnInit {\r\n  listTab: Array<any> = [];\r\n  indexTab: number = 0;\r\n  public area: any[] = [] = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item._id != 'go_home' && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id);\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  areaID: any = ''\r\n  public fromToTable: any[] = []\r\n  public table: any[] = []\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private router: Router,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhAuth: VhAuth,\r\n    public vhAlgorithm: VhAlgorithm,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.areaID = this.dataRestore.id_area\r\n    this.area.forEach(item => this.listTab.push(item));\r\n    this.table = this.vhAlgorithm.sortStringbyASC(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.areaID && item.status), \"name\")\r\n    this.indexTab = this.area.findIndex(item => item._id == this.areaID);\r\n  }\r\n\r\n  areaChanged(tab?) {\r\n    if (tab) { this.areaID = this.listTab[tab.index]._id; }\r\n    if (this.fromToTable.length) {\r\n      this.table = this.vhAlgorithm.sortStringbyASC(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.areaID), \"name\")\r\n    } else this.table = this.vhAlgorithm.sortStringbyASC(this.vhQueryCafe.getlocalTables().filter(item => item.id_area == this.areaID && item.status), \"name\")\r\n  }\r\n  renderTitle() {\r\n    if (this.fromToTable[0]) return `${this.fromToTable[0].name} -> ${this.fromToTable[1] ? this.fromToTable[1].name : this.languageService.translate(\"Select a target table\")}`\r\n    else return this.languageService.translate(\"Which table do you want to move?\")\r\n  }\r\n\r\n  chooseTable(item) {\r\n    if (this.fromToTable.length < 3) {\r\n      let index = this.fromToTable.findIndex(table => table._id == item._id)\r\n\r\n      switch (index) {\r\n        case 0: this.fromToTable = []; this.areaChanged(); break\r\n        case 1: this.fromToTable.pop(); this.areaChanged(); break\r\n        default: {\r\n          if (this.fromToTable.length < 2) {\r\n            this.fromToTable.push(item)\r\n            this.areaChanged()\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //////////////////////////////////////////////////////DỊCH CHUYỂN////////////////////////////////////////////////////////////\r\n  switchTable() {\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Switch table\") + \" ?\", \"OK\", this.languageService.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        if (this.fromToTable[1].status) { // TH 2 bàn đã có khách\r\n          Promise.all([\r\n            this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: this.fromToTable[0]._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }),\r\n            this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: this.fromToTable[1]._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }),\r\n          ]).then(([fromBill, toBill]) => {\r\n            /** Kiểm tra bill muốn tách có tồn tại không */\r\n            if (!fromBill['length'] || !toBill['length']) {\r\n              this.vhComponent.hideLoading()\r\n              this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\").then(() => this.goBack())\r\n              return\r\n            }\r\n\r\n            this.vhQueryCafe.getBill_details_byId_bill(fromBill[0]._id).then(billDetail => {\r\n              let process = []\r\n              for (let i = 0; i < billDetail.length; i++) {\r\n                toBill[0]['total'] += billDetail[i].price * billDetail[i].quantity\r\n\r\n                if (billDetail[i].toppings) toBill[0]['total'] += billDetail[i].toppings.reduce((sum: number, current: any) => sum + current.price * current.quantity, 0)\r\n                process.push(this.vhQueryCafe.createBill_Detail({ ...billDetail[i], id_bill: toBill[0]['_id'] }))\r\n              }\r\n              process.push(this.vhQueryCafe.updateBill(toBill[0]['_id'], { total: toBill[0].total, payment: toBill[0].payment_type == 2 ? 0 : toBill[0].total * (1 + toBill[0].tax / 100), bill_open_time: new Date() }))\r\n              process.push(this.vhQueryCafe.deleteBill_Billdetail(fromBill[0]['_id']))\r\n              process.push(this.vhQueryCafe.updateTable(this.fromToTable[0]._id, { status: false }))\r\n              Promise.all(process).then((res) => {\r\n                this.vhComponent.showToast(2000, this.languageService.translate(\"Switch table successfully\"), \"success-toast\").then(() => this.goBack())\r\n              }).catch((err) => this.vhComponent.showToast(2000, \"Switch table failed\", \"alert-toast\")).finally(() => this.vhComponent.hideLoading())\r\n            })\r\n          })\r\n        } else { // TH qua bàn mới\r\n          this.vhQueryCafe.getBills_byFields({ bill_type: { $eq: 5 }, id_table: { $eq: this.fromToTable[0]._id }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }).then((fromBill) => {\r\n\r\n            if (!fromBill['length']) {\r\n              this.vhComponent.hideLoading()\r\n              this.vhComponent.alertMessage(\"\", \"\", this.languageService.translate(\"The invoice is not existed\"), \"OK\").then(() => this.goBack())\r\n              return\r\n            }\r\n\r\n            Promise.all([\r\n              this.vhQueryCafe.updateBill(fromBill[0]._id, { id_table: this.fromToTable[1]._id, id_area: this.fromToTable[1].id_area, bill_open_time: new Date() }),\r\n              this.vhQueryCafe.updateTable(this.fromToTable[0]._id, { status: false }),\r\n              this.vhQueryCafe.updateTable(this.fromToTable[1]._id, { status: true })\r\n            ]).then(() => {\r\n              this.vhComponent.showToast(2000, this.languageService.translate(\"Switch table successfully\"), \"success-toast\").then(() => this.goBack())\r\n            }).catch((err) => this.vhComponent.showToast(2000, \"Switch table failed\", \"alert-toast\")).finally(() => this.vhComponent.hideLoading())\r\n          })\r\n        }\r\n      })\r\n    }, () => { })\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/cafe/cafe-pos'], { state:  {isSync:true} })\r\n  }\r\n  //----------------------------------------------------GIAO DIỆN------------------------------------------------------------//\r\n  checkActive(item) {\r\n    return this.fromToTable.map(table => table._id).includes(item._id)\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById(\"order-invoice\") && document.querySelector(\".sales-invoice-header\") && document.querySelector('.ant-tabs-nav')) {\r\n      let height = document.getElementById(\"order-invoice\").clientHeight - document.querySelector(\".sales-invoice-header\").clientHeight -\r\n        document.querySelector(\".sales-invoice-header\").clientHeight - document.querySelector('.ant-tabs-nav').clientHeight - 20 + \"px\"\r\n      document.getElementById('order-invoice-scroll').style.height = height\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<!-- <div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div> -->\r\n<nz-layout id=\"order-invoice\">\r\n    <div class=\"sales-invoice-header\" [nzGutter]=\"16\" nz-row>\r\n        <div nz-col nzSpan=\"2\" class=\"left-all-content \" style=\"cursor: pointer;\" (click)=\"goBack()\">\r\n            <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"19\" class=\"left-all-content title-header\">\r\n            <b>{{renderTitle()}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"3\" class=\"center-all-content\">\r\n            <button (click)=\"switchTable()\" [disabled]=\"fromToTable.length !=2\" class=\"center-all-content btn-green\" nz-button nzType=\"default\">\r\n                <ion-icon name=\"save-outline\"></ion-icon>\r\n                {{'Save' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div nz-col nzSpan=\"24\">\r\n        <nz-tabset nzSelectedIndex={{indexTab}} (nzSelectChange)=\"areaChanged($event)\">\r\n            <nz-tab *ngFor=\"let tab of listTab\" nzTitle=\"{{ tab.name|translate}}\">\r\n                <div class=\"hideScrollBar\" id=\"order-invoice-scroll\" nz-row nzGutter=\"32\">\r\n                    <div *ngFor=\"let item of table\" nz-col nzSpan=\"4\" class=\"table\">\r\n                        <div class=\"table-item\" [ngClass]=\"{'table-item-active' : checkActive(item)}\">\r\n                            <div (click)=\"chooseTable(item)\" class=\"table-item-name center-all-content hideScrollbar\">{{item.name}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"!table.length\" nz-col class=\"not-found\">{{\"Not found\" | translate}}</div>\r\n                </div>\r\n            </nz-tab>\r\n        </nz-tabset>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SwitchTableComponent } from './switch-table.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: SwitchTableComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [SwitchTableComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class SwitchTableModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}