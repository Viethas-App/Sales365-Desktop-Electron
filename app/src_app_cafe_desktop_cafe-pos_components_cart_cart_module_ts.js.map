{"version":3,"file":"src_app_cafe_desktop_cafe-pos_components_cart_cart_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/cafe-pos/components/cart/add-customer/add-customer.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/add-customer/add-customer.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/add-customer/add-customer.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/bill-detail2/bill-detail2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/bill-detail2/bill-detail2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/bill-detail2/bill-detail2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/bill-detail2/print-one-col/print-one-col.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/bill-detail2/print-one-col/print-one-col.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/bill1/bill1.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/bill1/bill1.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/bill1/bill1.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/cart.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/cart.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/cart.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/customer-profile/customer-profile.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/customer-profile/customer-profile.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/customer-profile/customer-profile.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/info-bill2/info-bill2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/info-bill2/info-bill2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/info-bill2/info-bill2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/payment-button2/payment-button2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/payment-button2/payment-button2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/payment-button2/payment-button2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/retail-info/retail-info.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/retail-info/retail-info.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search-combo2/search-combo2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-combo2/search-combo2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search-combo2/search-combo2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-product2/search-product2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-product2/search-product2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search-product2/search-product2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-service2/search-service2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-service2/search-service2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search-service2/search-service2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-topping2/search-topping2.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search-topping2/search-topping2.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search-topping2/search-topping2.module.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search/search.component.ts","./src/app/cafe/desktop/cafe-pos/components/cart/search/search.component.html","./src/app/cafe/desktop/cafe-pos/components/cart/search/search.module.ts"],"sourcesContent":["import { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\n\r\n@Component({\r\n  selector: 'app-add-customer',\r\n  templateUrl: './add-customer.component.html',\r\n  styleUrls: ['./add-customer.component.scss']\r\n})\r\nexport class AddCustomerComponent implements OnInit {\r\n\r\n  @Input(\"showDrawerAddCustomer\") showDrawerAddCustomer: boolean = false;\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n  createStatus: boolean = false\r\n  addCustomerForm: FormGroup;\r\n  selectedValue: any;\r\n  phone: any;\r\n  isCreateStatus: boolean = false;\r\n\r\n\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private mess:NzMessageService,\r\n    private functionService: FunctionService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.initAddCustomerForm()\r\n  }\r\n  \r\n\r\n\r\n  close(value?) {\r\n    if (!this.createStatus)\r\n      if(this.isCreateStatus) this.closeAddCustomer.emit({reload : true, value: value});\r\n      else this.closeAddCustomer.emit({reload : false});\r\n  }\r\n\r\n\r\n\r\n  /**Khởi tạo form khách hàng */\r\n  initAddCustomerForm() {\r\n    this.addCustomerForm = new FormGroup({\r\n      img: new FormControl(null),\r\n      name: new FormControl(null, Validators.compose([Validators.required])),\r\n      email: new FormControl(null, Validators.compose([Validators.email])),\r\n      gender: new FormControl(null),\r\n      datebirth: new FormControl(null),\r\n      phone: new FormControl(null, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.countryCode),\r\n      ]),\r\n      address: new FormControl(null),\r\n      country: new FormControl(null),\r\n      province: new FormControl(null),\r\n      district: new FormControl(null),\r\n      note: new FormControl(null),\r\n      type: new FormControl(1),\r\n      time_for_payment: new FormControl(0),\r\n      debt_enable: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      isBusiness: new FormControl(false),\r\n      taxcode: new FormControl(null),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /** Tiến hành thêm khách hàng */\r\n  addCustomer() {\r\n    this.createStatus = true\r\n    let customer: any = { ...this.addCustomerForm.value };\r\n\r\n    const phoneNumberValue = customer.phone;\r\n    customer.countryCode = this.countryCode;\r\n    customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n    customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n\r\n    if(customer.isBusiness) {\r\n      delete customer.gender;\r\n      delete customer.datebirth;\r\n    }\r\n    else {\r\n       delete customer.taxcode;\r\n    }\r\n\r\n    customer.date = (new Date()).toISOString();\r\n    this.vhQueryCafe.addCustomer(customer)\r\n      .then((res: any) => {\r\n        if(res.vcode == 0) {\r\n          setTimeout(() => {\r\n            this.createStatus = false;\r\n            this.isCreateStatus = true;\r\n            this.mess.success(`${this.lang.translate(\"Customer\")} ${customer.name} ${this.lang.translate(\"has been added successfully\")}`);\r\n            this.close(res.data);\r\n          }, 500)\r\n        }\r\n        else if(res.vcode == 1) {\r\n          //This phone number is already in use with another customer\r\n          this.createStatus = false;\r\n          this.isExitsPhone = true;\r\n          this.vhComponent.showToast(1500, this.lang.translate(\"This phone number is already in use with another customer\"), 'alert-toast');\r\n        }\r\n      }, error => {\r\n        this.createStatus = false;\r\n        this.vhComponent.showToast(1500, this.lang.translate(\"An error occurred while adding customer. Please try again\"), \"alert-toast\")\r\n      })\r\n  }\r\n\r\n\r\n  \r\n  /**\r\n   * Khi thay đổi Loại khách hàng\r\n   */\r\n  changeBusiness(event) {\r\n    // taxcode required khi isBusiness = true\r\n    if (event) {\r\n      this.addCustomerForm.get('taxcode')?.setValidators([Validators.required]);\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    } \r\n    else {\r\n      this.addCustomerForm.get('taxcode')?.clearValidators();\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Kiểm tra số điện thoại đã tồn tại ha chưa để hiển thị thông báo */\r\n  isExitsPhone: boolean = false;\r\n\r\n  /** Mã quốc gia */\r\n  countryCode: string = this.functionService.defaultCountryCode;\r\n  \r\n  /** Calling code */\r\n  callingCode: string = this.functionService.defaultCallingCode;\r\n  \r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chọn mã quốc gia\r\n   */\r\n  openSearchCountryCode() {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.addCustomerForm.value.phone, this.countryCode as CountryCode);\r\n      this.addCustomerForm.get('phone')?.markAsTouched();\r\n      this.addCustomerForm.get('phone')?.markAsDirty();\r\n      this.addCustomerForm.get('phone')?.updateValueAndValidity();\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   */\r\n  formatPhoneNumber(event: Event): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this.addCustomerForm.get('phone')?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"false\" [nzWidth]=\"400\" nzTitle='{{\"Add customer\" | translate}}'\r\n  [nzVisible]=\"showDrawerAddCustomer\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n  <ng-container *nzDrawerContent>\r\n    <form nz-form [formGroup]=\"addCustomerForm\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer name' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n            <nz-input-group class=\"virtualKeyboard\">\r\n              <input formControlName=\"name\" nz-input placeholder=\"{{'Enter customer name' | translate}}\" required   />\r\n              <ng-template #combineTplName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Customer name is required' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n            <nz-input-group>\r\n              <div (click)=\"openSearchCountryCode()\" class=\"calling-code\">\r\n                <span>+{{callingCode}}</span>\r\n                <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n              </div>\r\n              <input formControlName=\"phone\"\r\n                (input)=\"formatPhoneNumber($event)\"\r\n                [value]=\"formattedPhone\"\r\n                [placeholder]=\"'Enter customer phone' | translate\" type=\"tel\" nz-input required />\r\n              <ng-template #combineTplPhone let-control>\r\n                <ng-container *ngIf=\"control.hasError('invalidPhone')\">{{'_Invalid phone number' | translate}}</ng-container>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' | translate}}</ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n            <div *ngIf=\"isExitsPhone\"\r\n              class=\"ng-tns-c300-27 ant-form-item-explain ant-form-item-explain-error ng-star-inserted\"\r\n              ng-reflect-ng-class=\"ant-form-item-explain,ant-form\">\r\n              <div class=\"ng-tns-c300-27 ng-trigger ng-trigger-helpMotion\">\r\n                {{'Phone number already exists' | translate}}\r\n              </div>\r\n            </div>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Email' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control nzErrorTip=\"{{'Email is not correct' | translate}}\">\r\n            <nz-input-group  class=\"virtualKeyboard\">\r\n              <input type=\"email\" formControlName=\"email\" nz-input\r\n                placeholder=\"{{'Enter customer mail' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n\r\n      <!-- Loại khách hàng -->\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer type' | translate}}</b></div>\r\n        <nz-select nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select customer type' | translate\"\r\n          formControlName=\"isBusiness\"\r\n          (ngModelChange)=\"changeBusiness($event)\">\r\n          <nz-option [nzLabel]=\"'Individual' | translate\" [nzValue]=\"false\"></nz-option>\r\n          <nz-option [nzLabel]=\"'Business/Business household' | translate\" [nzValue]=\"true\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <!-- Mã số thuế -->\r\n      <ng-container *ngIf=\"addCustomerForm.value.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div><b class='label'>{{'Tax code' | translate}}</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"taxcode\">\r\n              <nz-input-group>\r\n                <input formControlName=\"taxcode\" nz-input [placeholder]=\"'Enter tax code' | translate\" />\r\n                <ng-template #taxcode let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Tax code is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <div nz-col nzSpan=\"24\" *ngIf=\"!addCustomerForm.value.isBusiness\">\r\n        <div nz-row [nzGutter]=\"16\">\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n            <nz-select nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select gender' | translate\"\r\n              [(ngModel)]=\"selectedValue\" formControlName=\"gender\">\r\n              <nz-option [nzLabel]=\"'Female'|translate\" nzValue=\"Female\"></nz-option>\r\n              <nz-option [nzLabel]=\"'Male'|translate\" nzValue=\"Male\"></nz-option>\r\n            </nz-select>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n            <nz-date-picker formControlName=\"datebirth\" [nzPlaceHolder]=\"'Select date of birth' | translate\">\r\n            </nz-date-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Address' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group class=\"virtualKeyboard\">\r\n              <input formControlName=\"address\" nz-input placeholder=\"{{'Enter address' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Country' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group class=\"virtualKeyboard\">\r\n              <input formControlName=\"country\" nz-input placeholder=\"{{'Enter country' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Province' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group  class=\"virtualKeyboard\">\r\n              <input formControlName=\"province\" nz-input placeholder=\"{{'Enter province' | translate}}\"/>\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'District' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group class=\"virtualKeyboard\">\r\n              <input formControlName=\"district\" nz-input placeholder=\"{{'Enter district' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\" class=\"virtualKeyboard\">\r\n        <div><b class='label'>{{'Note' | translate}}</b></div>\r\n        <textarea nz-input placeholder=\"{{'Enter note' | translate}}\" [nzAutosize]=\"{ minRows: 3, maxRows: 5 }\"\r\n          formControlName=\"note\"></textarea>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n        <div></div>\r\n        <label nz-checkbox formControlName=\"debt_enable\">{{'Debit permission' | translate}}</label>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #footerAddCustomer>\r\n    <div class=\"footerAddCustomer\" style=\"float: right\">\r\n      <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" |\r\n        translate}}</button>\r\n      <button nz-button (click)=\"addCustomer()\" [disabled]=\"addCustomerForm.invalid\" [nzLoading]=\"createStatus\"\r\n        [ngStyle]=\"{opacity: addCustomerForm.invalid ? 0.5 : 1}\">{{\"Add\" | translate}}</button>\r\n    </div>\r\n  </ng-template>\r\n</nz-drawer>","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddCustomerComponent } from './add-customer.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddCustomerComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    AddCustomerComponent\r\n  ]\r\n})\r\nexport class AddCustomerModule { }\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport PrintJs from 'print-js'\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\ndeclare var electron: any;\r\n\r\n@Component({\r\n  selector: 'app-bill-detail2',\r\n  templateUrl: './bill-detail2.component.html',\r\n  styleUrls: ['./bill-detail2.component.scss']\r\n})\r\nexport class BillDetail2Component implements OnChanges {\r\n\r\n  @Input() printKitchenAll: boolean;\r\n  @Input() stamp: any; // thông tin tem in truyền từ component card\r\n  list_selected_dishs: any; // danh sách món cần in\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices\r\n  // bill detail đã được xử lý ở các trang search truyền vào để thêm database\r\n  @Input() billDetailProcessing: any;\r\n  // cho phép in bếp hay không?\r\n  @Input() checkPrinterKitchen: any\r\n  // thông tin bàn\r\n  @Input() tableInfo: any;\r\n  // cập nhật hóa đơn khi có sự thay đổi\r\n  @Output() updateInvoice: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() deletePromotion: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGift: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGiftType7: EventEmitter<boolean> = new EventEmitter()\r\n  // reset bill detail sau khi được xử lý thành công\r\n  @Output() resetBillDetailProcessing: EventEmitter<boolean> = new EventEmitter()\r\n  @Input() printer: any;\r\n\r\n  /** Có mở modal Chỉnh sửa món ăn hay không */\r\n  showDrawerEdit: boolean = false;\r\n  showPrintKitchenAgain = false;\r\n  typeProduct: 1 | 2 | 4 | 5 = 1;\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  warning_lot_expried: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried;\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price;\r\n  dispatchers_enable: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable;\r\n  open_dialog_print_kitchen_bill_detail: any = this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").open_dialog_print_kitchen_bill_detail;\r\n  public printKitchen: any = {\r\n    status: false,\r\n    title: 'Add dishes',\r\n    value: []\r\n  };\r\n  id_branch = this.vhQueryCafe.getDefaultBranch()._id;\r\n  wishList: boolean = false;\r\n  show_modal_dispatcher: boolean = false;\r\n  dispatcherzones = this.vhQueryCafe.getlocalDispatcherZones();\r\n  id_dispatcherzone = this.vhQueryCafe.getlocalDispatcherZones().length ? this.vhQueryCafe.getlocalDispatcherZones().find(e => e.default)?._id : '';\r\n  printer_kitchens = this.vhQueryCafe.getlocalPrinters();\r\n  id_printer_kitchen = this.vhQueryCafe.getlocalPrinters().length ? this.vhQueryCafe.getlocalPrinters().find(e => e.default)._id : '';\r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  endTime: Date = new Date();\r\n  /** Ký hiệu tiền tệ. Ví dụ 'VND' */\r\n  currencySymbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text;\r\n  public VhType = VhType;\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private lang: LanguageService,\r\n    public platform: Platform,\r\n    private vhComponent: VhComponent,\r\n    private nzModalService: NzModalService,\r\n    public vhAuth: VhAuth,\r\n    public productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnChanges({ billDetailProcessing, printKitchenAll, invoices }: SimpleChanges): void {\r\n    // Nếu thay đổi invoices thì tính lại giá cho các dịch vụ thời gian và total cho bill\r\n    if(invoices && invoices.currentValue) {\r\n      if(this.invoices.getInvoiceDetail().length && this.productService.isContainServiceTime(this.invoices)) {\r\n        this.endTime = new Date();\r\n        // set lại price\r\n        this.invoices.getInvoiceDetail()?.forEach((item, index) => {\r\n          if (item.ptype === VhType.SERVICETIME && !item.is_paused) {\r\n            const newItem = { ...item, time_end_order: this.endTime };\r\n            const serviceTimePrice: any = this.productService.calculateServiceTimePrice(newItem, this.endTime, this.invoices.getPriceType());\r\n            newItem.price = serviceTimePrice.total_price;\r\n            newItem.price_origin = serviceTimePrice.total_price;\r\n            this.invoices.getInvoiceDetail()[index] = {...newItem};\r\n          }\r\n        });\r\n        // Tính lại total cho bill\r\n        this.invoices.setSubTotal();\r\n      }\r\n    }\r\n    if (billDetailProcessing && billDetailProcessing.currentValue != null) {\r\n      this.createBillDetail(billDetailProcessing.currentValue)\r\n      this.resetBillDetailProcessing.emit(null)\r\n    }\r\n    if (printKitchenAll && printKitchenAll.currentValue) {\r\n      this.printAllDishToKitchen();\r\n    }\r\n  }\r\n\r\n  printLabel(item, i) {\r\n    if(item.ptype == VhType.SERVICETIME && !item.is_paused) {\r\n      this.productService.updateServiceTimePrice(item, this.invoices.getPriceType());\r\n      this.invoices.getInvoiceDetail()[i] = item;\r\n      this.invoices.setSubTotal();\r\n    }\r\n    // lọc bỏ topping số lượng = 0\r\n    const data = JSON.parse(JSON.stringify(item || {}));\r\n    if(item.toppings && item.toppings.length > 0) {\r\n      data.toppings = item.toppings.filter(topping => topping.quantity > 0);\r\n    }\r\n    this.list_selected_dishs = [{ ...data, index: i }]\r\n  }\r\n\r\n  printAllLabel() {\r\n    let arr = []\r\n    this.invoices.getInvoiceDetail().forEach((element, index) => {\r\n      if ([1, 4, 5].includes(element.ptype))\r\n        arr.push({ ...element, index: index })\r\n      if (element.pmtype) {\r\n        element.products.forEach((pro, ind) => {\r\n          if ([1, 4, 5].includes(pro.ptype))\r\n            arr.push({ ...pro, index: ind })\r\n        });\r\n      }\r\n    });\r\n    this.list_selected_dishs = arr\r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  myTrackByNameFunction(element: any, index: any) {\r\n    return element.name ? element.name : index\r\n  }\r\n  /** Tạo bill detail lên database */\r\n  createBillDetail(productValue: any) {\r\n    if (productValue.quantity) { // nếu số lượng sản phẩm  > 0\r\n      let name = `${productValue.name}`\r\n      //tạo detail lưu local\r\n      let detail: any = this.invoices.getCreateItemDetail(\r\n        productValue\r\n      )\r\n      // thêm bill detail đó vào danh sách bill detail\r\n      this.invoices.addInvoiceDetail({ ...productValue, id_product: productValue._id, time_start_order: new Date() })\r\n\r\n      let bill_detail = this.invoices.getCreateItemCleanDetail(detail) // dữ liệu detail sạch phù hợp với database\r\n      // console.log(bill_detail);\r\n      if (bill_detail.ptype == 5) {\r\n        this.vhQueryCafe.createBill_Detail_ptype_5(bill_detail)\r\n          .then((vhbill_detail) => {\r\n            this.invoices.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n            this.choiceFood = this.invoices.getInvoiceDetail()[0]\r\n            console.log(vhbill_detail._id);\r\n          }, error => {\r\n            console.log('error', error);\r\n          })\r\n      }\r\n      else {\r\n        this.vhQueryCafe.createBill_Detail(bill_detail)\r\n          .then((vhbill_detail) => {\r\n            this.invoices.getInvoiceDetail()[0]._id = vhbill_detail._id;\r\n            this.choiceFood = this.invoices.getInvoiceDetail()[0]\r\n          }, error => {\r\n            console.log('error', error);\r\n          })\r\n      }\r\n\r\n      // Bật in bếp\r\n      if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n        let dataKitchen: any = { name: name, quantity: +detail.quantity, note: detail.note }\r\n        if (detail.properties) dataKitchen['properties'] = detail.properties\r\n        if (detail.toppings) dataKitchen['toppings'] = detail.toppings\r\n        if (detail.combos) dataKitchen['combos'] = detail.combos\r\n        this.printKitchen['value'].push(dataKitchen)\r\n        this.printKitchen = { ...this.printKitchen, title: 'Add dishes', status: true }\r\n\r\n      }\r\n      // nếu chọn là điều phối bằng giao diện\r\n      if (this.dispatchers_enable) {\r\n        // show modal chọn giao diện để điều phối\r\n        this.show_modal_dispatcher = true;\r\n\r\n      }\r\n      // cập nhật lại thông tin của bill khi có thay đổi\r\n      this.updateInvoice.emit(true)\r\n    }\r\n\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  searchLot(value) {\r\n    this.choiceFood.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.choiceFood = data\r\n    this.list_search_lot = this.choiceFood.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.choiceFood.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.lang.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.choiceFood.lots = this.list_search_lot;\r\n            this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.choiceFood.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.choiceFood.lots = this.list_search_lot;\r\n        this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.choiceFood.lots = this.list_search_lot;\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.choiceFood.lots = this.list_search_lot\r\n  }\r\n  /**In bếp */\r\n  public handlePrint(value?) {\r\n    if (this.platform.is(\"electron\")) this.printElectron(value)\r\n    else this.printDesktop(value)\r\n  }\r\n  handleCancelPrint(value?) {\r\n    this.printKitchen['value'] = []\r\n    if (value) this.showPrintKitchenAgain = false\r\n    else this.printKitchen['status'] = false;\r\n  }\r\n  printElectron(value?) {\r\n    let html = value ? document.getElementById(\"print-kitchen-again\").innerHTML : document.getElementById(\"print-kitchen\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.printer_kitchens.find(e => e._id == this.id_printer_kitchen).printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (data) this.handleCancelPrint(value)\r\n      else this.vhComponent.alertMessageDesktop('warning', this.lang.translate('Printing failed'), 3000)\r\n    });\r\n  }\r\n\r\n  printDesktop(value) {\r\n    PrintJs({\r\n      printable: value ? \"print-kitchen-again\" : \"print-kitchen\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      style:\r\n        'html { font-size: 14pt;}' +\r\n        '.print-kitchen .font-bold {font-size:1.8rem; font-weight:bold}' +\r\n        '.print-kitchen b {font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-font{font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-value-name { width : 70% ; font-size: 14pt}' +\r\n        '.print-kitchen .print-kitchen-value-quantity { width : 30% ; font-size: 14pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-value-name-note {font-style: italic; font-size: 10pt}' +\r\n        '.print-kitchen .print-kitchen-combo { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-combo-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-properties-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-properties-quantity { width : 30% ; font-size: 12pt ; text-align:center}' +\r\n        '.print-kitchen .print-kitchen-topping { display:flex; justity-content:center: align-items:center}' +\r\n        '.print-kitchen .print-kitchen-topping-name { width : 70% ; font-size: 12pt}' +\r\n        '.print-kitchen .print-kitchen-topping-quantity { width : 30% ; font-size: 12pt ; text-align:center}'\r\n    })\r\n  }\r\n\r\n  /**xử lý điều phối */\r\n  handleDispatcher() {\r\n    this.invoices.getInvoiceDetail()[0].id_dispatcherzone = this.id_dispatcherzone;\r\n    this.invoices.getInvoiceDetail()[0].dispatcher_done = false;\r\n    this.vhQueryCafe.updateBill_Detail(this.invoices.getInvoiceDetail()[0]._id, { id_dispatcherzone: this.id_dispatcherzone, dispatcher_done: false })\r\n    this.updateInvoice.emit(true)\r\n    this.show_modal_dispatcher = false\r\n  }\r\n  /**Cập nhật ghi chú món */\r\n  updateNote(item) {\r\n    this.vhQueryCafe.updateBill_Detail(item._id, { note: item.note })\r\n  }\r\n  /**Cập nhật thông tin món ăn */\r\n  saveEdit() {\r\n    if(this.choiceFood.ptype === VhType.SERVICETIME) {\r\n      if (!this.choiceFood.is_paused) {\r\n        this.choiceFood.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n      this.choiceFood.price = serviceTimePrice.total_price;\r\n      this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n      delete this.choiceFood.serviceTimePrice;\r\n    }\r\n\r\n    this.choiceFood.price = parseFloat(this.choiceFood.price)\r\n    this.showDrawerEdit = false;\r\n\r\n    let index: number = this.invoices.getInvoiceDetail().findIndex(item => item._id == this.choiceFood._id);\r\n    this.invoices.getInvoiceDetail()[index] = { ...this.choiceFood }\r\n    this.invoices.setSubTotal()\r\n    // console.log(this.invoices.getCreateItemCleanDetail(this.choiceFood));\r\n\r\n    if (this.choiceFood.ptype == 5) {\r\n      this.vhQueryCafe.updateBill_Detail_btype_5(this.choiceFood._id, { quantity: this.choiceFood.quantity, price: this.choiceFood.price, ratio: this.choiceFood.ratio })\r\n        .then((bool) => {\r\n          console.log('updateBill_Detail_btype_5', bool);\r\n        }, error => {\r\n          console.log('error', error);\r\n        });\r\n    }\r\n    else {\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { quantity: this.choiceFood.quantity, price: this.choiceFood.price, ratio: this.choiceFood.ratio }).then((res) => {\r\n        this.updateInvoice.emit(true);\r\n        delete this.choiceFood;\r\n      });\r\n    }\r\n  }\r\n\r\n  editPrice: any = {}\r\n  choiceFood: any;\r\n  /**\r\n   * Mở modal CHỉnh sửa món ăn\r\n   * @param item \r\n   */\r\n  editFood(item: any) {\r\n    this.choiceFood = item\r\n    this.showDrawerEdit = true;\r\n    this.choiceFood.price = item.price.toString();\r\n\r\n    // Nếu không phải Dịch vụ thời gian\r\n    if(this.choiceFood.ptype !== VhType.SERVICETIME) {\r\n      // backup\r\n      // cleavejs cho các input\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + item.id_product] = this.vhAlgorithm.vhnumeral(\".price-\" + item.id_product)\r\n        // if (this.choiceFood.toppings) {\r\n        //   this.choiceFood.toppings.forEach(topping => {\r\n        //     this.editPrice['topping-' + topping.id_product] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping.id_product)\r\n        //   });\r\n        // }\r\n      }, 200);\r\n      return;\r\n    }\r\n\r\n    // Nếu là Dịch vụ thời gian\r\n    this.productService.updateServiceTimePrice(this.choiceFood, this.invoices.getPriceType());\r\n    if(!this.choiceFood.is_paused) {\r\n      this.invoices.setSubTotal();\r\n    }\r\n\r\n    console.log('editFood this.choiceFood', this.choiceFood);\r\n  }\r\n\r\n\r\n\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity}x ${item.name}${'(' + this.getUnit(item.units, item.ratio) + ')'}`\r\n      else subName += `${item.quantity}x ${item.name}${'(' + this.getUnit(item.units, item.ratio) + ')'}`\r\n    })\r\n    return subName\r\n  }\r\n\r\n  changeQuantityPrintKitchen(value, max, current_value) {\r\n    if (parseFloat(value) < 0.01) current_value.quantity = 0.01;\r\n    if (parseFloat(value) > max) current_value.quantity = max;\r\n  }\r\n\r\n  checkMaxLength(e: string) {\r\n    if (parseFloat(e) > 999999999999) this.choiceFood.price = e.slice(0, 12)\r\n  }\r\n\r\n  changeLot(e, item) {\r\n    item.lot_number = item.lots.find(find => find._id == e).lot_number\r\n  }\r\n\r\n\r\n\r\n  openPrintKitchen(detail, i) {\r\n    // Bật in bếp\r\n    if (this.checkPrinterKitchen.enable) {\r\n      if(detail.ptype == VhType.SERVICETIME && !detail.is_paused) {\r\n        this.productService.updateServiceTimePrice(detail, this.invoices.getPriceType());\r\n        this.invoices.getInvoiceDetail()[i] = detail;\r\n        this.invoices.setSubTotal();\r\n      }\r\n      let dataKitchen: any = {\r\n        name: detail.name,\r\n        quantity: +detail.quantity,\r\n        note: detail.note,\r\n        max_quantity: +detail.quantity,\r\n        ptype: detail.ptype,\r\n        ratio: detail.ratio,\r\n        units: detail.units,\r\n      }\r\n      if (detail.properties) dataKitchen['properties'] = detail.properties\r\n      if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity } })\r\n      if (detail.combos) dataKitchen['combos'] = detail.combos\r\n      this.printKitchen['value'].push(dataKitchen)\r\n      this.printKitchen = { ...this.printKitchen, title:  this.lang.translate('Print kitchen') }\r\n    }\r\n}\r\n\r\n  printAllDishToKitchen() {\r\n    if (this.checkPrinterKitchen.enable) {\r\n      for (let detail of this.invoices.getInvoiceDetail()) {\r\n        let dataKitchen: any = {\r\n          name: detail.name,\r\n          quantity: +detail.quantity,\r\n          note: detail.note,\r\n          max_quantity: +detail.quantity,\r\n          ptype: detail.ptype,\r\n          ratio: detail.ratio,\r\n          units: detail.units,\r\n        }\r\n        if (detail.properties) dataKitchen['properties'] = detail.properties\r\n        if (detail.toppings) dataKitchen['toppings'] = detail.toppings.map(item => { return { ...item, max_quantity: item.quantity } })\r\n        if (detail.combos) dataKitchen['combos'] = detail.combos\r\n        this.printKitchen['value'].push(dataKitchen)\r\n      }\r\n      this.printKitchen = { ...this.printKitchen, title: 'Add dishes' }\r\n      this.showPrintKitchenAgain = true\r\n    }\r\n  }\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    if (item.ptype) {\r\n      let price = this.editPrice['price-' + item.id_product].getRawValue()\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity = this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1;\r\n    } else {\r\n      let price = this.editPrice['topping-' + item.id_product].getRawValue()\r\n      let index = this.choiceFood.toppings.findIndex(element => element.id_product == item.id_product)\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity = this.choiceFood.toppings[index].quantity > 0 ? this.choiceFood.toppings[index].quantity : 1\r\n      }\r\n    }\r\n  }\r\n  /**Xóa món ăn */\r\n  removeFood(food: any) {\r\n    if (this.vhAuth.checkLocalMyPermissionName('sell_enable_cancel_bill_detail')) {\r\n      // thêm hủy món vô in bếp\r\n      if (this.checkPrinterKitchen.enable && !this.dispatchers_enable && this.open_dialog_print_kitchen_bill_detail) {\r\n        let dataKitchen: any = { name: food.name, quantity: food.quantity, note: food.note }\r\n        if (food.properties) dataKitchen['properties'] = food.properties\r\n        if (food.toppings) dataKitchen['toppings'] = food.toppings\r\n        if (food.combos) dataKitchen['combos'] = food.combos\r\n        this.printKitchen['value'].push(dataKitchen)\r\n        this.printKitchen = { ...this.printKitchen, title: 'Cancel dishes', status: true }\r\n      }\r\n      food.deleting = true\r\n      if (food.ptype == 5) {\r\n        this.vhQueryCafe.deleteBill_Detail_ptype_5(food._id).then(value => {\r\n          this.invoices.removeInvoiceDetail(food._id)\r\n          this.updateInvoice.emit(true)\r\n          console.log('deleteBill_Detail_ptype_5', value);\r\n        })\r\n      }\r\n      else {\r\n        this.vhQueryCafe.deleteBill_Detail(food._id).then(value => {\r\n          this.invoices.removeInvoiceDetail(food._id)\r\n          this.updateInvoice.emit(true)\r\n\r\n        })\r\n      }\r\n    }\r\n    else this.vhComponent.showToast(3000, this.lang.translate(\"You do not have this rights\"), \"alert-toast\")\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------- MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------- */\r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  isShowModalEditUsedTime: boolean = false;\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  tempStartTime: any;\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  tempEndTime: any;\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.choiceFood.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.choiceFood.is_paused) {\r\n      this.tempEndTime = this.choiceFood.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.choiceFood.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.choiceFood.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.choiceFood.is_paused = true;\r\n    }\r\n\r\n    this.choiceFood.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_start_order: this.tempStartTime,\r\n      time_end_order: this.tempEndTime ? this.choiceFood.time_end_order : null,\r\n      is_paused: this.choiceFood.is_paused,\r\n    });\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.choiceFood.time_end_order = new Date();\r\n    this.choiceFood.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_end_order: isPause ? this.choiceFood.time_end_order : undefined, \r\n      is_paused: isPause ,\r\n      price: this.choiceFood.price,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"bill-detail\">\r\n  <div class=\"bill-detail-area ant-table-body\">\r\n    <div *ngIf=\"!invoices.getInvoiceDetail().length\" class=\"no-data\">\r\n      <p>{{'Please select a dishes/beverage' | translate}}</p>\r\n    </div>\r\n    <div class=\"bill-detail-area-item\"\r\n      *ngFor=\"let item of invoices.getInvoiceDetail(),index as i; trackBy:myTrackByFunction\">\r\n\r\n      <!-- CÓ Chương trình khuyến mãi -->\r\n      <ng-container *ngIf=\"item.id_promotion; else elseTemplate\">\r\n        <div class=\"bill-detail-area-item-info\">\r\n          <div class=\"delete-btn\">\r\n            <button nzType=\"text\" nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n              [nzLoading]=\"item.deleting\" (nzOnConfirm)=\"deletePromotion.emit(true)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n              nz-button>\r\n              <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"cursor: pointer;\"></i>\r\n            </button>\r\n          </div>\r\n          <div>\r\n            {{item.name}}\r\n            <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\" *ngIf=\"item.pmtype == 6\"\r\n              (click)=\"showProductGift.emit(true)\"></i>\r\n            <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\" *ngIf=\"item.pmtype == 7\"\r\n              (click)=\"showProductGiftType7.emit(true)\"></i>\r\n          </div>\r\n        </div>\r\n        <ng-container *ngIf=\"item.pmtype != 6\">\r\n          <div nz-row *ngFor=\"let data of item.products\"\r\n            style=\"font-size: 0.9rem; padding: 4px 0;\">\r\n\r\n            <!-- Nút xoá -->\r\n            <div nz-col nzSpan=\"2\" class=\"center-col\"></div>\r\n\r\n            <div style=\"align-self: center;\" nz-col nzSpan=\"11\" class=\"center-col\">\r\n\r\n              <!-- Tên -->\r\n              <div>\r\n                {{data.name}} <br>\r\n                <!-- Giá -->\r\n                <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                <!-- Giá bị gạch -->\r\n                <del *ngIf=\"display_promotion_selling_price\" style=\"margin-left:5px; font-size: 0.8rem;\">\r\n                  {{data.price_origin > data.price ?\r\n                  vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                </del>\r\n              </div>\r\n\r\n              <!-- Lô -->\r\n              <ng-container *ngIf=\"data.id_lotproduct\">\r\n                <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\" (click)=\"openModalChooseLot(data)\">\r\n                  {{getLotNumber(data.lots, data.id_lotproduct)}}\r\n                </div>\r\n              </ng-container>\r\n\r\n              <!-- Combo -->\r\n              <div *ngIf=\"data.combos\">\r\n                <span *ngFor=\"let combo of data.combos;index as i\"\r\n                  style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                  {{ i == data.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                  ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                  + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Đơn vị -->\r\n            <div nz-col nzSpan=\"3\">\r\n              <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n              <ng-container *ngIf=\"data.ptype !== VhType.SERVICETIME\">\r\n                {{getUnit(data.units,data.ratio)}}\r\n              </ng-container>\r\n            </div>\r\n\r\n            <!-- Số lượng -->\r\n            <div class=\"align-center text-align-center\" nz-col nzSpan=\"4\">\r\n              <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n              <ng-container *ngIf=\"data.ptype !== VhType.SERVICETIME\">\r\n                x{{data.quantity}}\r\n              </ng-container>\r\n            </div>\r\n\r\n            <!-- Thành tiền -->\r\n            <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n              <p class=\"max-width-two-line\">\r\n                <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n              </p>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"24\">\r\n              <!-- Topping -->\r\n              <div class=\"bill-detail-area-item-side-dishes\"\r\n                *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n                  <div class=\"delete-btn\"></div>\r\n                  <div class=\"item-name\">\r\n                    {{\"+ \" + sideDishes.name}} <br>\r\n                  </div>\r\n                  <div class=\"item-quantity\">x{{sideDishes.quantity}}</div>\r\n                  <div class=\"item-total\">\r\n                    {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                  </div>\r\n                  <div class=\"edit-btn\"></div>\r\n                </ng-container>\r\n              </div>\r\n              <!-- Thuộc tính -->\r\n              <div class=\"bill-detail-area-item-properties\"\r\n                *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                <div class=\"delete-btn\"></div>\r\n                <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n                <div class=\"edit-btn\"></div>\r\n              </div>\r\n              <!-- Hàng thời gian -->\r\n              <div *ngIf=\"data.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                <div class=\"delete-btn\"></div>\r\n                <p *ngIf=\"data.time_start_order\">{{'Started at' | translate}}: {{data.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                <p *ngIf=\"data.time_end_order\"\r\n                  [ngStyle]=\"{'color': data.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n                  {{'Estimated until' | translate}}: {{data.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                </p>\r\n                <ng-container *ngIf=\"productService.generateTimeUseString(data.time_start_order, data.time_end_order) as usedTime\">\r\n                  <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <!-- Danh sách sản phẩm tặng đã chọn -->\r\n        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n          <ng-container *ngIf=\"data.choose\">\r\n            <div nz-col nzSpan=\"2\" class=\"center-col\">\r\n            </div>\r\n            <div style=\"align-self: center;\" nz-col nzSpan=\"11\" class=\"center-col\"\r\n              style=\"font-size: 0.9rem;\">\r\n              <i>{{data.name}} ({{'Gift' | translate}})</i> <br>\r\n              <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n              <del style=\"margin-left:5px;font-size: 0.8rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                {{data.price_origin > data.price ?\r\n                vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n              </del>\r\n              <ng-container *ngIf=\"data.id_lotproduct\">\r\n                <span style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                  (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots,\r\n                  data.id_lotproduct)}}</span>\r\n              </ng-container>\r\n              <div *ngIf=\"data.combos\">\r\n                <span *ngFor=\"let combo of data.combos;index as i\"\r\n                  style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                  {{ i == data.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                  ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                  + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"3\">\r\n              {{getUnit(data.units,data.ratio)}}\r\n            </div>\r\n            <div class=\"align-center text-align-center \" nz-col nzSpan=\"4\">\r\n              <div>x{{data.quantity}}</div>\r\n            </div>\r\n            <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n              <p class=\"max-width-two-line\">\r\n                <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n              </p>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"right-div\">\r\n              <div class=\"bill-detail-area-item-side-dishes\"\r\n                *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n                  <div class=\"delete-btn\"></div>\r\n                  <div class=\"item-name\">\r\n                    {{\"+ \" + sideDishes.name}} <br>\r\n                  </div>\r\n                  <div class=\"item-quantity\">x{{sideDishes.quantity}}</div>\r\n                  <div class=\"item-total\">\r\n                    {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                  </div>\r\n                  <div class=\"edit-btn\"></div>\r\n                </ng-container>\r\n              </div>\r\n              <div class=\"bill-detail-area-item-properties\"\r\n                *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                <div class=\"delete-btn\"></div>\r\n                <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n                <div class=\"edit-btn\"></div>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <!-- KHÔNG CÓ Chương trình khuyến mãi -->\r\n      <ng-template #elseTemplate>\r\n\r\n        <!-- Hàng Tên -->\r\n        <div class=\"bill-detail-area-item-info\">\r\n          <!-- Nút xoá -->\r\n          <div class=\"delete-btn\">\r\n            <button nz-button nzType=\"text\" [nzLoading]=\"!item._id || item.deleting\" nz-popconfirm\r\n              nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"removeFood(item)\"\r\n              nzPopconfirmPlacement=\"right\">\r\n              <i nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"item-name\">\r\n            <!-- Tên -->\r\n            <b>\r\n              {{item.name}}\r\n              <ng-container *ngIf=\"item.ptype == 3\">\r\n                ({{getUnit(item.units,item.ratio)}})\r\n              </ng-container>\r\n            </b>\r\n            <!-- In bếp -->\r\n            <i *ngIf=\"checkPrinterKitchen.enable && !dispatchers_enable\"\r\n              (click)=\"showPrintKitchenAgain = true; openPrintKitchen(item, i)\"\r\n              style=\"color: var(--ion-color-vh-green); margin-right: 8px; cursor: pointer;\" nz-icon nzType=\"printer\"\r\n              nzTheme=\"outline\" nz-tooltip [nzTooltipTitle]=\"'Print kitchen' | translate\"\r\n              nzTooltipColor=\"var(--ion-color-vh-green)\" nzTooltipPlacement=\"bottom\"></i>\r\n            <!-- In tem -->\r\n            <i *ngIf=\"stamp\" (click)=\"printLabel(item, i)\" nz-icon nzType=\"printer\" nzTheme=\"outline\"\r\n              style=\"cursor: pointer;\" nz-tooltip [nzTooltipTitle]=\"'Label printing' | translate\"\r\n              nzTooltipPlacement=\"bottom\"></i> <br>\r\n            <!-- Dịch vụ thời gian không hiện giá -->\r\n            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n              <!-- Giá -->\r\n              {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n              <!-- Giá khuyến mãi -->\r\n              <s *ngIf=\"item.price < item.price_origin && display_promotion_selling_price\">\r\n                {{vhAlgorithm.vhcurrencyunit(item.price_origin)}}\r\n              </s>\r\n            </ng-container>\r\n            <!-- Lô -->\r\n            <ng-container *ngIf=\"item.id_lotproduct\">\r\n              <br><span style=\"color:var(--ion-color-vh-green);cursor: pointer;\" (click)=\"openModalChooseLot(item)\">Số lô: {{getLotNumber(item.lots, item.id_lotproduct)}}</span>\r\n            </ng-container>\r\n          </div>\r\n\r\n          <!-- Số lượng -->\r\n          <div class=\"item-quantity\">\r\n            <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n            <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n              x{{item.quantity | number:'1.0-2'}}\r\n            </ng-container>\r\n          </div>\r\n\r\n          <!-- Thành tiền -->\r\n          <div class=\"item-total\">\r\n            {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n          </div>\r\n\r\n          <!-- Nút edit -->\r\n          <div class=\"edit-btn\">\r\n            <button (click)=\"editFood(item)\" nz-button nzType=\"text\">\r\n              <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Hàng Combo -->\r\n        <div class=\"bill-detail-area-item-combo\">\r\n          <!-- {{item.subComboName}} -->\r\n          <span class=\"sub-name\" *ngFor=\"let combo of item.combos; last as last;\">\r\n            {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n            <ng-container *ngIf=\"combo.lots && combo.id_lotproduct\">\r\n              <b style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</b>\r\n            </ng-container><ng-container *ngIf=\"!last\">,</ng-container>\r\n          </span>\r\n        </div>\r\n\r\n        <!-- Hàng Topping -->\r\n        <div class=\"bill-detail-area-item-side-dishes\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <ng-container *ngIf=\"sideDishes.quantity > 0\">\r\n            <div class=\"delete-btn\"></div>\r\n            <div class=\"item-name\">\r\n              {{\"+ \" + sideDishes.name}} <br>\r\n            </div>\r\n            <div class=\"item-quantity\">x{{sideDishes.quantity}}</div>\r\n            <div class=\"text-end\"> {{sideDishes.price*sideDishes.quantity}}</div>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <!-- Hàng Thuộc tính -->\r\n        <div class=\"bill-detail-area-item-properties\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []; trackBy:myTrackByNameFunction\">\r\n          <div class=\"delete-btn\"></div>\r\n          <div class=\"item-name\">{{\"+ \" + properties.name + \" - \" + properties.selectedValue}}</div>\r\n          <div class=\"edit-btn\"></div>\r\n        </div>\r\n\r\n        <!-- Hàng thời gian -->\r\n        <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n          <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n          <p *ngIf=\"item.time_end_order\"\r\n            [ngStyle]=\"{'color': item.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n            {{'Estimated until' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n          </p>\r\n          <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n            <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <!-- Hàng Ghi chú -->\r\n        <div class=\"bill-detail-area-item-note\">\r\n          <input nz-input [(ngModel)]=\"item.note\" placeholder=\"{{'Note' | translate}}\" nzBorderless\r\n            (blur)=\"updateNote(item)\" />\r\n        </div>\r\n      </ng-template>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"bill-detail-sub-total\">\r\n    <div *ngIf=\"invoices.getInvoiceDetail().length && stamp\">\r\n      <button (click)=\"printAllLabel()\" nz-button nzType=\"default\">{{'Print all labels' | translate}}</button>\r\n    </div>\r\n    <div class=\"bill-detail-sub-total-title\">{{'SubTotal' | translate | uppercase}}</div>\r\n    <div class=\"bill-detail-sub-total-money\"><b>{{vhAlgorithm.vhcurrencyunit_symbol(invoices.getSubTotal())}}</b>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<app-print-one-col style=\"display: none;\" [totalNumber]=\"list_selected_dishs ? list_selected_dishs.length : invoices.getInvoiceDetail().length\"\r\n  [list_dishs]=\"list_selected_dishs\" [stamp]=\"stamp\" [tableInfo]=\"tableInfo\"></app-print-one-col>\r\n\r\n\r\n\r\n<!-- ---------------------print chicken------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\" *ngIf=\"printKitchen.status\"\r\n  [(nzVisible)]=\"printKitchen.status\" nzTitle=\"{{'Print kitchen' | translate}}\" (nzOnCancel)=\"handleCancelPrint()\"\r\n  (nzOnOk)=\"handlePrint()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}</div>\r\n      <div>\r\n        <span *ngIf=\"!checkPrinterKitchen.table_name_hidden\"\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}:</span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n            style=\"word-break: break-all;\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{ getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div style=\"word-break: break-word;\"\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n            style=\"word-break: break-all;\">{{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(false)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ---------------------print chicken lại------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"showPrintKitchenAgain\" nzTitle=\"{{'Print kitchen' | translate}}\"\r\n  (nzOnCancel)=\"showPrintKitchenAgain = false;handleCancelPrint()\" (nzOnOk)=\"handlePrint(true)\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row *ngIf=\"platform.is('electron')\">\r\n      <div nz-col nzSpan=\"12\">\r\n        Chọn máy in điều phối :\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <nz-select [ngModel]=\"id_printer_kitchen\">\r\n          <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of printer_kitchens\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"print-kitchen-again\">\r\n      <div *ngIf=\"!checkPrinterKitchen.header_hidden\"\r\n        [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size}\">\r\n        {{printKitchen.title | translate}}</div>\r\n      <div *ngIf=\"!checkPrinterKitchen.table_name_hidden\">\r\n        <span\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{'Table'\r\n          | translate}}:</span>\r\n        <span><b\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">{{tableInfo.length\r\n            > 50? (tableInfo.substring(0,49) + '...') : tableInfo}}</b></span>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;justify-content: space-between;border-bottom: 1px solid gray;\">\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Dishes name' | translate}}</div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n          {{'Quantity' | translate}}</div>\r\n      </div>\r\n      <div *ngFor=\"let item of printKitchen.value\">\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 4px; font-weight: bold;\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n            style=\"word-break: break-all;\">\r\n            {{item.name}}\r\n            <span *ngIf=\"item.ptype === 3\">\r\n              ({{ getUnit(item.units,item.ratio)}})\r\n            </span>\r\n          </div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{item.quantity}}</div>\r\n        </div>\r\n        <div *ngIf=\"item.combos\" style=\"display: flex; align-items: center;padding: 0 4px 0 8px;\">\r\n          <div style=\"word-break: break-word;\"\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            <span>\r\n              {{getSubCombo(item.combos)}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + sideDishes.name}}</div>\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{sideDishes.quantity}}</div>\r\n        </div>\r\n        <div style=\"display: flex;align-items: center;justify-content: space-between;padding: 0 4px 0 8px;\"\r\n          *ngFor=\"let properties of item.properties ? item.properties : []\">\r\n          <div\r\n            [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\">\r\n            {{\"+ \" + properties.name + \" - \" +\r\n            properties.selectedValue}}\r\n          </div>\r\n        </div>\r\n        <div\r\n          [ngStyle]=\"{'font-family': checkPrinterKitchen.font_family,'font-size.pt': checkPrinterKitchen.font_size*0.625}\"\r\n          style=\"padding: 0 4px 0 8px; font-style: italic; \">{{item.note}}</div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterPrintKitchen>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handlePrint(true)\">{{\"Print\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- chọn khu vực điều phối  -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterDispatcher\" nzWidth=\"300\"\r\n  [(nzVisible)]=\"show_modal_dispatcher\" nzTitle=\"{{'Dish dispatch' | translate}}\" [nzCloseIcon]=\"null\"\r\n  (nzOnOk)=\"handleDispatcher()\" [nzMaskClosable]=\"false\">\r\n  <ng-container *nzModalContent>\r\n    <div>Chọn khu vực điều phối bếp/quầy pha chế</div>\r\n    <nz-select [(ngModel)]=\"id_dispatcherzone\">\r\n      <nz-option [nzValue]=\"item._id\" [nzLabel]=\"item.name\" *ngFor=\"let item of dispatcherzones\"></nz-option>\r\n    </nz-select>\r\n  </ng-container>\r\n  <ng-template #modalFooterDispatcher>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleDispatcher()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------------- MODAL CHỈNH SỬA MÓN ĂN ------------------------------------------------------ -->\r\n<nz-modal\r\n  *ngIf=\"choiceFood\"\r\n  (nzOnCancel)=\"saveEdit()\"\r\n  [(nzVisible)]=\"showDrawerEdit\"\r\n  [nzTitle]=\"choiceFood.name\"\r\n  [nzFooter]=\"null\"\r\n  nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body modal-edit\" style=\"max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <!-- Không phải Dịch vụ thời gian -->\r\n      <ng-container *ngIf=\"choiceFood.ptype !== VhType.SERVICETIME else serviceTimeTemplate\">\r\n        <div nz-row style=\"width: 100%; align-items: center;\">\r\n          <!-- Giá -->\r\n          <div nz-col nzSpan=\"7\">\r\n            <input [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\"\r\n              (blur)=\"updatePrice(choiceFood)\"\r\n              [ngClass]=\"'price-' + choiceFood.id_product\" maxlength=\"15\"\r\n              nz-input [placeholder]=\"'Price' | translate\" />\r\n          </div>\r\n          <!-- Input số lượng -->\r\n          <div class=\"price-edit\" style=\"display: flex; justify-content: space-between; align-items: stretch; gap: 6px; padding: 0 20px;\" nz-col nzSpan=\"10\">\r\n            <!-- Giảm -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity <= 1\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity - 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 1}\">\r\n              <i nz-icon nzType=\"minus\"></i>\r\n            </button>\r\n            <!-- Ô nhập -->\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n              [(ngModel)]=\"choiceFood.quantity\"\r\n              (ngModelChange)=\"updatePrice(choiceFood)\"\r\n              style=\"flex: 1;\">\r\n            </nz-input-number>\r\n            <!-- Tăng -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity > 9999999998\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity + 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n              <i nz-icon nzType=\"plus\"></i>\r\n            </button>\r\n          </div>\r\n          <!-- Thành tiền -->\r\n          <div style=\"text-align: right\" nz-col nzSpan=\"7\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <!-- Combo -->\r\n          <div *ngIf=\"choiceFood.combos\" nz-col nzSpan=\"24\" style=\"font-size: 0.7rem; margin-top: 8px;\">\r\n            {{getSubCombo(choiceFood.combos)}}\r\n          </div>\r\n          <!-- Ghi chú -->\r\n          <div class=\"order-div-note1\" nz-col nzSpan=\"24\" style=\"margin-top: 8px;\">\r\n            <input class=\"order-note\" nzBorderless nz-input\r\n              [(ngModel)]=\"choiceFood.note\"\r\n              [ngModelOptions]=\"{standalone: true}\"\r\n              [placeholder]=\"'Enter note' | translate\" />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thuoc tinh -->\r\n        <div *ngIf=\"choiceFood.properties\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.properties.length\">\r\n            {{'Properties' | translate}}\r\n          </div>\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n            <nz-collapse nzGhost>\r\n              <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n                [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n                <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                  <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n                </nz-radio-group>\r\n              </nz-collapse-panel>\r\n            </nz-collapse>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Mon phu -->\r\n        <div *ngIf=\"choiceFood.toppings\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.toppings.length\">\r\n            {{'Side dishes' | translate}}\r\n          </div>\r\n          <div nz-row class=\"option-modal\">\r\n            <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n              <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                  {{item.name |translate}} <br>\r\n                </div>\r\n                <div class=\"text-align-center price-edit\" style=\"display: flex;justify-content: space-evenly;align-items: end;\" nz-col nzSpan=\"10\">\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                    (click)=\"item.quantity = item.quantity - 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 0}\">\r\n                    <i nz-icon nzType=\"minus\"></i>\r\n                  </button>\r\n                  <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0\" [nzStep]=\"1\"\r\n                    (ngModelChange)=\"updatePrice(choiceFood)\" [(ngModel)]=\"item.quantity\">\r\n                  </nz-input-number>\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                    (click)=\"item.quantity = item.quantity + 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                    <i nz-icon nzType=\"plus\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"align-end text-align-right\" nz-col nzSpan=\"7\">\r\n                  {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Combo -->\r\n        <ng-container *ngFor=\"let combo of choiceFood.combos\">\r\n          <!-- chọn lô - hsd -->\r\n          <div *ngIf=\"combo.lots\">\r\n            <b>{{'Select lot and expiry date for combo components' | translate}}</b><br>\r\n            <span>{{combo.name}} ({{getUnit(combo.units, combo.ratio)}})</span>\r\n            <nz-radio-group [(ngModel)]=\"combo.id_lotproduct\" (ngModelChange)=\"changeLot($event, combo)\"\r\n              style=\"width:100%; padding: 8px 0;\">\r\n              <div nz-row *ngFor=\"let lot of combo.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                  <label class=\"radio-purchase\" nz-radio [nzValue]=\"lot._id\" style=\"width:100%;\">\r\n                    <div nz-row>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        {{lot.lot_number}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        NSX: {{lot.date_mfg | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        HSD: {{lot.date_exp | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                        {{'Stock' | translate}}:\r\n                        <span style=\" color: var(--ion-color-vh-orange)\">{{lot.quantity_branch[id_branch]/combo.ratio | number : '1.0-2'}}</span>\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </nz-radio-group>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <!-- Dịch vụ thời gian -->\r\n      <ng-template #serviceTimeTemplate>\r\n        <!-- Tiêu đề -->\r\n        <div class=\"flex-between\" style=\"margin-bottom: 8px; font-size: 0.95rem;\">\r\n          <b>{{'Used time' | translate}}</b>\r\n          <b>{{'Drafted' | translate}}</b>\r\n        </div>\r\n\r\n        <div>\r\n          <!-- First time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_first_time\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'First time block' | translate}} - {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'first' | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{choiceFood?.serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.first_time?.price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Special time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_special_times && choiceFood?.serviceTimePrice?.special_times?.length\" style=\"margin-bottom: 1rem;\">\r\n            <span>{{'Special time' | translate}}</span>\r\n            <div *ngFor=\"let specialTime of choiceFood?.serviceTimePrice?.special_times\" class=\"flex-between\">\r\n              <p style=\"margin-bottom: 0\">{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, choiceFood.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n              <p style=\"margin-bottom: 0\">{{vhAlgorithm.vhcurrencyunit(specialTime.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Merge block -->\r\n          <div *ngIf=\"choiceFood.units[0].is_merge_block\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.merge_block?.price)}} / 1 block</span>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood?.serviceTimePrice?.merge_block?.count}} block = {{choiceFood?.serviceTimePrice?.merge_block?.duration}} {{choiceFood.units[0].unit | translate}} (1 block = {{choiceFood?.serviceTimePrice?.merge_block?.time_per_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.merge_block?.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Normal time -->\r\n          <div *ngIf=\"choiceFood?.serviceTimePrice?.time_used\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Regular selling time' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood.units[0].price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{productService.generateTimeFromValue(choiceFood?.serviceTimePrice?.time_used, choiceFood?.serviceTimePrice?.unit)}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.price)}}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thành tiền -->\r\n        <div class=\"flex-between\">\r\n          <p>{{'From' | translate}} <b>{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> {{'to' | translate}} <b>{{choiceFood?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> <br> <b>({{productService.generateTimeUseString(choiceFood.time_start_order, choiceFood?.time_end_order)}})</b></p>\r\n          <b style=\"font-size: 1rem;\">{{'Total' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.total_price)}}</b>\r\n        </div>\r\n\r\n        <div class=\"flex-between\" style=\"margin: 16px 0;\">\r\n          <!-- Tạm ngưng / Tiếp tục tính giờ -->\r\n          <i (click)=\"pauseTime(!choiceFood?.is_paused)\" style=\"text-align: right; color: var(--ion-color-vh-orange); cursor: pointer;\">{{(choiceFood?.is_paused ? 'Continue timing' : 'Pause timing') | translate}}</i>\r\n          <hr style=\"background-color: #f0f0f0; flex: auto;\">\r\n          <!-- Chỉnh sửa thời gian sử dụng -->\r\n          <i (click)=\"handleOpenEditUsedTime()\" style=\"text-align: right; color: var(--ion-color-vh-green); cursor: pointer;\">{{'Edit usage time'| translate}}</i>\r\n        </div>\r\n\r\n        <!-- Ghi chú -->\r\n        <div class=\"order-div-note1\" nz-col nzSpan=\"24\">\r\n          <b>{{'Note' | translate}}</b>\r\n          <input class=\"order-note\" nz-input\r\n            [(ngModel)]=\"choiceFood.note\"\r\n            [placeholder]=\"'Enter note' | translate\" />\r\n        </div>\r\n      </ng-template>\r\n\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n<nz-modal\r\n  [(nzVisible)]=\"isShowModalEditUsedTime\"\r\n  (nzOnCancel)=\"isShowModalEditUsedTime = false\"\r\n  (nzOnOk)=\"handleUpdateUsedTime()\"\r\n  [nzTitle]=\"'Edit used time' | translate\"\r\n  [nzFooter]=\"modalFooterEditUsedTime\" >\r\n\r\n  <ng-container *nzModalContent>\r\n    <div nz-row [nzGutter]=\"16\">\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'_Started at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          [nzAllowClear]=\"false\"\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'Ended at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          nzAllowClear\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 32px\">\r\n      <p style=\"margin-bottom: 4px\"><b>*{{'_Note' | translate}}:</b></p>\r\n      <p style=\"margin-bottom: 0px\">{{'The start time must be less than or equal to the current time.' | translate}}</p>\r\n      <p style=\"margin-bottom: 0px\">{{'The end time must be greater than the start time.' | translate}}</p>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterEditUsedTime>\r\n    <button (click)=\"isShowModalEditUsedTime = false\"\r\n      nz-button class=\"nz-hover-border\" nzType=\"default\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\">{{'Cancel' |translate}}</button>\r\n    <button [disabled]=\"!tempStartTime\"\r\n      (click)=\"handleUpdateUsedTime()\"\r\n      nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\">{{'Ok' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n  nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n          (keyup)=\"searchLot(searchValue.value )\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" style=\"width:100%;padding: 8px 0;\">\r\n      <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.lot_number}}\r\n              </div>\r\n\r\n              <div nz-col nzSpan=\"6\">\r\n                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                {{'Stock' | translate}}:\r\n                <span style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                  | number : '1.0-2'}}</span>\r\n              </div>\r\n            </div>\r\n\r\n          </label>\r\n        </div>\r\n\r\n      </div>\r\n    </nz-radio-group>\r\n    <div *ngIf=\"!choiceFood.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice2>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!choiceFood.id_lotproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BillDetail2Component } from './bill-detail2.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { PrintOneColComponent } from './print-one-col/print-one-col.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BillDetail2Component,PrintOneColComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    BillDetail2Component\r\n  ]\r\n})\r\nexport class BillDetail2Module { }\r\n","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Component, Input, SimpleChanges } from '@angular/core';\r\nimport printJS from 'print-js';\r\ndeclare var electron: any;\r\nimport { Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-print-one-col',\r\n  templateUrl: './print-one-col.component.html',\r\n  styleUrls: ['./print-one-col.component.scss']\r\n})\r\nexport class PrintOneColComponent {\r\n  /** Mảng object sẽ in */\r\n  @Input() list_dishs: any[];\r\n  @Input() stamp: any;\r\n  @Input() number = 1;\r\n  @Input() tableInfo;\r\n  @Input() totalNumber;\r\n\r\n  ratio: number = 3;\r\n  root: any;\r\n  data_show : any[] = [];\r\n\r\n\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private platform: Platform,\r\n    private lang: LanguageService,\r\n    public vhQueryCafe: VhQueryCafe,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnChanges({ list_dishs }: SimpleChanges) {\r\n    if (list_dishs && list_dishs.currentValue) {\r\n      this.data_show = [];\r\n      this.onChangeData();\r\n      setTimeout(() => {\r\n        this.printBrowser();\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n\r\n \r\n  /**\r\n   * Tính tổng tiền của sản phẩm. Nếu có topping thì tính cả topping\r\n   * @param data sản phẩm cần tính tiền\r\n   * @returns tổng tiền của sản phẩm \r\n   */\r\n  getPrice(data) {\r\n    let total = data.price * data.quantity;\r\n    if(data.toppings) {\r\n      total += data.toppings.reduce((sum, topping) => sum + topping.price * topping.quantity, 0);\r\n    }\r\n    return total;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Gọi khi thay đổi dữ liệu list_dishs truyền vào, để cập nhật lại data_show\r\n   */\r\n  onChangeData() {\r\n    for (let i of this.list_dishs) { \r\n      for(let j = 0; j < i.quantity; j++) {\r\n        const item = {\r\n          ...i,\r\n          price: this.getPrice(i),\r\n        };\r\n        // Nếu là combo thì lấy tên combo\r\n        if (i.ptype === 5) item.subComboName = this.getComboName(i);\r\n        this.data_show.push(item);\r\n      }\r\n    } \r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên combo\r\n   * @param product sản phẩm cần lấy tên combo \r\n   * @returns tên combo, nếu không có thì trả về chuỗi rỗng\r\n   */\r\n  getComboName(product): string {\r\n    if(!product.combos) return '';\r\n\r\n    let comboName = [];\r\n    for (let combo of product.combos) {\r\n      let cb = `${combo.quantity}x ${combo.name} (${this.getUnit(combo.units, combo.ratio)})`;\r\n      if (combo.lots && combo.id_lotproduct) {\r\n        cb += ` (${this.getLotNumber(combo.lots, combo.id_lotproduct)})`;\r\n      }\r\n      comboName.push(cb);\r\n    }\r\n    return comboName.join(', ');\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên đơn vị theo tỷ lệ\r\n   * @param units mảng đơn vị của sản phẩm\r\n   * @param ratio tỷ lệ cần lấy\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n\r\n  /**\r\n   * Lấy tên lô theo id_lot được chọn\r\n   * @param lots mảng lô của sản phẩm\r\n   * @param _id id lô cần lấy\r\n   * @returns tên lô\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number;\r\n  }\r\n  \r\n\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron();\r\n    else this.printBrowser();\r\n  }\r\n\r\n\r\n\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', this.lang.translate('Printing failed'), 3000);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 6) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<nz-layout>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -3 : stamp.height*1.375 -2 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex;\"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    \r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\"\r\n                        class=\"border-top\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                                 this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.time.text_align,\r\n                                 'font-weight': stamp.property.time.font_weight,\r\n                                 'font-style': stamp.property.time.font_style  ,\r\n                                 'text-decoration': stamp.property.time.text_decoration ,\r\n                                 'height.mm': stamp.property.time.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.time.width*1.375,\r\n                                 'top.px': stamp.property.time.y,\r\n                                 'left.px':stamp.property.time.x,\r\n                                 'display':stamp.property.time.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.time.font_size}\">\r\n                                 {{item.time_start_order | date:'HH:mm'}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}} <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                                 {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.notice.text_align,\r\n                                 'font-weight': stamp.property.notice.font_weight,\r\n                                 'font-style': stamp.property.notice.font_style  ,\r\n                                 'text-decoration': stamp.property.notice.text_decoration ,\r\n                                 'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.notice.width*1.375,\r\n                                 'top.px': stamp.property.notice.y,\r\n                                 'left.px':stamp.property.notice.x,\r\n                                 'display':stamp.property.notice.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.notice.font_size}\">\r\n                            **{{stamp.property.notice.value}}\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                        [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -ratio : stamp.height*1.375 -(ratio-1)}\">\r\n                        <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.header.text_align,\r\n                                 'font-weight': stamp.property.header.font_weight,\r\n                                 'font-style': stamp.property.header.font_style  ,\r\n                                 'text-decoration': stamp.property.header.text_decoration ,\r\n                                 'height.mm': stamp.property.header.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.header.width*1.375-4,\r\n                                 'top.px': stamp.property.header.y,\r\n                                 'left.px':stamp.property.header.x,\r\n                                 'display':stamp.property.header.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.header.font_size}\">\r\n                                 {{this.tableInfo}}\r\n                        </div>\r\n                        <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.name.text_align,\r\n                                 'font-weight': stamp.property.name.font_weight,\r\n                                 'font-style': stamp.property.name.font_style  ,\r\n                                 'text-decoration': stamp.property.name.text_decoration ,\r\n                                 'height.mm': stamp.property.name.height*1.375 -1,\r\n                                 'width.mm': stamp.property.name.width*1.375,\r\n                                 'top.px': stamp.property.name.y,\r\n                                 'left.px':stamp.property.name.x,\r\n                                 'display':stamp.property.name.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.name.font_size}\"\r\n                            >\r\n                            <span>{{item.name}}  <br></span>\r\n                            <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                            <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                            <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                        </div>\r\n                        <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.note.text_align,\r\n                                 'font-weight': stamp.property.note.font_weight,\r\n                                 'font-style': stamp.property.note.font_style  ,\r\n                                 'text-decoration': stamp.property.note.text_decoration ,\r\n                                 'height.mm': stamp.property.note.height*1.375 -1,\r\n                                 'width.mm': stamp.property.note.width*1.375,\r\n                                 'top.px': stamp.property.note.y,\r\n                                 'left.px':stamp.property.note.x,\r\n                                 'display':stamp.property.note.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.note.font_size}\">\r\n                            {{item.note}}\r\n                        </div>\r\n\r\n                        <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.total.text_align,\r\n                                 'font-weight': stamp.property.total.font_weight,\r\n                                 'font-style': stamp.property.total.font_style  ,\r\n                                 'text-decoration': stamp.property.total.text_decoration ,\r\n                                 'height.mm': stamp.property.total.height*1.375 -1,\r\n                                 'width.mm': stamp.property.total.width*1.375,\r\n                                 'top.px': stamp.property.total.y,\r\n                                 'left.px':stamp.property.total.x,\r\n                                 'display':stamp.property.total.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.total.font_size}\">\r\n                                 {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                        </div>\r\n                        <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                                'text-align': stamp.property.number.text_align,\r\n                                 'font-weight': stamp.property.number.font_weight,\r\n                                 'font-style': stamp.property.number.font_style  ,\r\n                                 'text-decoration': stamp.property.number.text_decoration ,\r\n                                 'height.mm': stamp.property.number.height*1.375-1 ,\r\n                                 'width.mm': stamp.property.number.width*1.375,\r\n                                 'top.px': stamp.property.number.y,\r\n                                 'left.px':stamp.property.number.x,\r\n                                 'display':stamp.property.number.status ? 'block' : 'none', \r\n                                 'font-size.px': stamp.property.number.font_size}\">\r\n                                 {{item.index+1}}/{{totalNumber}}\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"height: 100%;margin-top: -1.5mm;display: none;margin-left: 2mm;\" *ngIf=\"stamp\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*1.375*stamp.col,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4 ,'margin-bottom':i == data_show.length -1 ? '0' : ''}\"\r\n                    class=\"stamp mb-6\" style=\"display: flex; \"\r\n                    *ngFor=\"let item of data_show, index as i\">\r\n                    <div *ngIf=\"stamp.template == 1\" style=\"overflow: hidden;position: relative;\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\"\r\n                    class=\"border-top\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{stamp.template == 1 ? vhQueryCafe.getLocalAppSettingNameBranch('store_info').company :\r\n                             this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"time\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.time.text_align,\r\n                             'font-weight': stamp.property.time.font_weight,\r\n                             'font-style': stamp.property.time.font_style  ,\r\n                             'text-decoration': stamp.property.time.text_decoration ,\r\n                             'height.mm': stamp.property.time.height*1.375-1 ,\r\n                             'width.mm': stamp.property.time.width*1.375,\r\n                             'top.px': stamp.property.time.y,\r\n                             'left.px':stamp.property.time.x,\r\n                             'display':stamp.property.time.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.time.font_size}\">\r\n                             {{item.time_start_order | date:'HH:mm'}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}} <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}  </span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\">+ {{i.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                             {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"notice\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.notice.text_align,\r\n                             'font-weight': stamp.property.notice.font_weight,\r\n                             'font-style': stamp.property.notice.font_style  ,\r\n                             'text-decoration': stamp.property.notice.text_decoration ,\r\n                             'height.mm': stamp.property.notice.height*1.375-1 ,\r\n                             'width.mm': stamp.property.notice.width*1.375,\r\n                             'top.px': stamp.property.notice.y,\r\n                             'left.px':stamp.property.notice.x,\r\n                             'display':stamp.property.notice.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.notice.font_size}\">\r\n                        **{{stamp.property.notice.value}}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"stamp.template == 2\" style=\"overflow: hidden;position: relative;\" class=\"border-top\"\r\n                    [ngStyle]=\"{'width.mm': stamp.width*1.375 ,'height.mm': i == data_show.length -1 ?  stamp.height*1.375 -5 : stamp.height*1.375 -4}\">\r\n                    <div id=\"header\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.header.text_align,\r\n                             'font-weight': stamp.property.header.font_weight,\r\n                             'font-style': stamp.property.header.font_style  ,\r\n                             'text-decoration': stamp.property.header.text_decoration ,\r\n                             'height.mm': stamp.property.header.height*1.375-1 ,\r\n                             'width.mm': stamp.property.header.width*1.375-4,\r\n                             'top.px': stamp.property.header.y,\r\n                             'left.px':stamp.property.header.x,\r\n                             'display':stamp.property.header.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.header.font_size}\">\r\n                             {{this.tableInfo}}\r\n                    </div>\r\n                    <div id=\"name\" style=\"position: absolute;overflow: hidden;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.name.text_align,\r\n                             'font-weight': stamp.property.name.font_weight,\r\n                             'font-style': stamp.property.name.font_style  ,\r\n                             'text-decoration': stamp.property.name.text_decoration ,\r\n                             'height.mm': stamp.property.name.height*1.375 -1,\r\n                             'width.mm': stamp.property.name.width*1.375,\r\n                             'top.px': stamp.property.name.y,\r\n                             'left.px':stamp.property.name.x,\r\n                             'display':stamp.property.name.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.name.font_size}\"\r\n                        >\r\n                        <span>{{item.name}}  <br></span>\r\n                        <span style=\"font-size:0.8rem;\" *ngFor=\"let i of item.properties, index as ind\">+ {{i.name}} {{i.selectedValue}}</span><br *ngIf=\"item.properties?.length\">\r\n                        <span  style=\"font-size:0.8rem;\" *ngFor=\"let i of item.toppings, index as ind\"> + {{i.name}} <br></span> \r\n                        <span style=\"font-size:0.8rem;\" *ngIf=\"item.ptype == 5\">{{item.subComboName}}</span>\r\n                    </div>\r\n                    <div id=\"note\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.note.text_align,\r\n                             'font-weight': stamp.property.note.font_weight,\r\n                             'font-style': stamp.property.note.font_style  ,\r\n                             'text-decoration': stamp.property.note.text_decoration ,\r\n                             'height.mm': stamp.property.note.height*1.375 -1,\r\n                             'width.mm': stamp.property.note.width*1.375,\r\n                             'top.px': stamp.property.note.y,\r\n                             'left.px':stamp.property.note.x,\r\n                             'display':stamp.property.note.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.note.font_size}\">\r\n                        {{item.note}}\r\n                    </div>\r\n\r\n                    <div id=\"total\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.total.text_align,\r\n                             'font-weight': stamp.property.total.font_weight,\r\n                             'font-style': stamp.property.total.font_style  ,\r\n                             'text-decoration': stamp.property.total.text_decoration ,\r\n                             'height.mm': stamp.property.total.height*1.375 -1,\r\n                             'width.mm': stamp.property.total.width*1.375,\r\n                             'top.px': stamp.property.total.y,\r\n                             'left.px':stamp.property.total.x,\r\n                             'display':stamp.property.total.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.total.font_size}\">\r\n                             {{vhAlgorithm.vhcurrencyunit_symbol( item.price)}}\r\n                    </div>\r\n                    <div id=\"number\" style=\"position: absolute;\" [ngStyle]=\"{\r\n                            'text-align': stamp.property.number.text_align,\r\n                             'font-weight': stamp.property.number.font_weight,\r\n                             'font-style': stamp.property.number.font_style  ,\r\n                             'text-decoration': stamp.property.number.text_decoration ,\r\n                             'height.mm': stamp.property.number.height*1.375-1 ,\r\n                             'width.mm': stamp.property.number.width*1.375,\r\n                             'top.px': stamp.property.number.y,\r\n                             'left.px':stamp.property.number.x,\r\n                             'display':stamp.property.number.status ? 'block' : 'none', \r\n                             'font-size.px': stamp.property.number.font_size}\">\r\n                             {{item.index+1}}/{{totalNumber}}\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { AfterViewInit, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-bill1',\r\n  templateUrl: './bill1.component.html',\r\n  styleUrls: ['./bill1.component.scss']\r\n})\r\nexport class Bill1Component implements OnInit, AfterViewInit, OnChanges {\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices\r\n  // khách hàng hiện tại có được nợ hay không?\r\n  @Input() debt: boolean = false;\r\n  // giá trị thuế hiện tại\r\n  @Input() tax: number = 0\r\n  @Input()  customer_class: any;\r\n  // phương thức thanh toán hiện tại - cấu trúc dữ liệu tương thích với component đang được sử dụng\r\n  @Input() paymentType: Array<any> = [1]\r\n  @Output() updateInvoice: EventEmitter<boolean> = new EventEmitter()\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ]\r\n  /** Danh sách thuế được tạo và đang được kích hoạt */\r\n  listTax: any[] = this.vhQueryCafe.getlocalTaxs().filter(tax => tax.status);\r\n  moneyEdit: any = {}\r\n  /**biến lưu thông tin bill - discount ,fee, payment, cash, note- dùng để gán giá trị khi dùng bàn phim ảo */\r\n  invoice_discount: string;\r\n  invoice_fee: string;\r\n  invoice_payment: string;\r\n  invoice_cash: string;\r\n  invoice_note: string;\r\n  percent_discount : number = 0;\r\n  is_discount_bill : boolean = false;\r\n  constructor(\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth:VhAuth,\r\n    private vhComponent:VhComponent\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // lấy thông tin tài khoản\r\n    this.getWallets()\r\n     \r\n  }\r\n\r\n  ngOnChanges({ debt }: SimpleChanges) {\r\n    if (debt) {\r\n      if (!debt.currentValue) {\r\n        if (this.paymentType[0] == 2) this.changePaymentType([1])\r\n      }\r\n      this.nzOptions[1].disabled = !debt.currentValue\r\n    }\r\n    this.invoice_discount = this.invoices.getDiscount().toString();\r\n    this.invoice_fee = this.invoices.getFee().toString();\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.invoice_note = this.invoices.getNote();\r\n    this.percent_discount = this.invoices.getSubTotal() ? this.invoices.getDiscount()/this.invoices.getSubTotal()*100 : 0\r\n     \r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if(document.querySelector(\".discount-price\")) this.moneyEdit['discount'] = this.vhAlgorithm.vhnumeral(\".discount-price\")\r\n    if(document.querySelector(\".fee-price\")) this.moneyEdit['fee'] = this.vhAlgorithm.vhnumeral(\".fee-price\")\r\n    if(document.querySelector(\".payment-price\")) this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n    if(document.querySelector(\".customerPay\")) this.moneyEdit['cash'] = this.vhAlgorithm.vhnumeral(\".customerPay\")\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  getWallets() {\r\n    this.nzOptions[2].children = this.vhQueryCafe.getlocalWallets()\r\n      .filter(wallet => wallet._id != 'id_cash' &&\r\n        wallet.id_branch == this.vhQueryCafe.getDefaultBranch()._id\r\n      ).map(wallet => {\r\n        return { label: wallet.name, value: wallet._id, isLeaf: true }\r\n      })\r\n  }\r\n\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.changePercentDiscount(value)\r\n  }\r\n  changePercentDiscount(value){\r\n    this.percent_discount = value\r\n    this.invoices.setDiscount(this.invoices.getSubTotal()*value/100)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.invoice_discount = (this.invoices.getDiscount()).toString();\r\n  }\r\n\r\n  /**Cập nhật giảm giá */\r\n  updateDiscount() {\r\n    let discount: any = this.moneyEdit['discount'].getRawValue()\r\n    this.invoices.setDiscount(discount ? parseFloat(discount) : 0)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n    this.percent_discount = discount/this.invoices.getSubTotal()*100\r\n  }\r\n  /** Cập nhật phí */\r\n  updateFee() {\r\n    let fee: any = this.moneyEdit['fee'].getRawValue()\r\n    this.invoices.setFee(fee ? parseFloat(fee) : 0)\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n  }\r\n  /**Cập nhật thuế */\r\n  updateTax(value) {\r\n    this.invoices.setTax(parseFloat(value))\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n  }\r\n  /**Cập nhật tiền khách trả */\r\n  updatePayment() {\r\n    if (this.debt) {\r\n      let payment: any = this.moneyEdit['payment'].getRawValue()\r\n      let value = payment ? parseFloat(payment) : 0\r\n\r\n      this.invoices.setPayment(value ? (value > this.invoices.getTotalATax() || value < 0 ? this.invoices.getTotalATax() : value) : 0)\r\n\r\n      document.getElementById(\"payment-price\")['value'] = this.invoices.getPayment()\r\n      this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n\r\n      this.updateInvoice.emit(true);\r\n      this.invoice_payment = this.invoices.getPayment().toString();\r\n      this.invoice_cash = this.invoices.getCash().toString();\r\n    }\r\n  }\r\n  /**Cập nhật ghi chú */\r\n  updateNote() {\r\n    let note: any = document.getElementById(\"invoice-note\")\r\n    this.invoices.setNote(note.value)\r\n    this.updateInvoice.emit(true)\r\n  }\r\n\r\n  /**Cập nhật tiền khách trả*/\r\n  updateCash() {\r\n    this.invoices.setCash(parseFloat(this.moneyEdit['cash'].getRawValue()))\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n  }\r\n\r\n  /** Thay đổi phương thức thanh toán \r\n   * @param value loại thanh toán\r\n  */\r\n  changePaymentType(value: any) {\r\n    this.invoices.setPaymentType(value[0])\r\n    this.invoices.setPayment()\r\n    switch (value[0]) {\r\n      case 1:\r\n        this.invoices.setIdWallet(\"id_cash\")\r\n        break\r\n      case 2:\r\n        this.invoices.setIdWallet(\"\");\r\n        this.invoices.setCash(0);\r\n        this.invoice_cash = '0';\r\n        break;\r\n\r\n      case 3:\r\n        this.invoices.setIdWallet(value[1])\r\n        break;\r\n    }\r\n\r\n    this.updateInvoice.emit(true);\r\n    this.invoice_payment = this.invoices.getPayment().toString();\r\n    this.invoice_cash = this.invoices.getCash().toString();\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả discount\r\n   * @param value \r\n   */\r\n  checkMaxLengthDiscount(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_discount = value }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả fee\r\n   * @param value \r\n   */\r\n  checkMaxLengthFee(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_fee = value }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra tối đa 12 ky tự cuả payment\r\n   * @param value \r\n   */\r\n  checkMaxLengthPayment(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_payment = value }\r\n  }\r\n\r\n  /**\r\n     * kiểm tra tối đa 12 ky tự cuả cash\r\n     * @param value \r\n     */\r\n  checkMaxLengthCash(value: string) {\r\n    if (parseFloat(value) > 999999999999) { value = value.slice(0, 12); this.invoice_cash = value }\r\n  }\r\n\r\n  \r\n  showModalOtherDiscount = false\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n    this.point_validity =  this.vhQueryCafe.getlocalCustomerPoints(this.invoices.getIdPartner())\r\n  }\r\n\r\n  handleOkOtherDiscount() {\r\n    if (this.invoices.getPayment() < this.invoices.getDiscountOther()) this.invoices.setPayment(0);\r\n    this.invoices.setArrayCouponCodes(this.product_codes)\r\n    this.showModalOtherDiscount = false;\r\n    // this.updateInvoice.emit(true);\r\n  }\r\n  point_validity  = 0\r\n  value_discount_point: number = 0;\r\n  product_codes: any = [];\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQueryCafe.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoices.setDiscountCoupon(product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoices.setDiscountCoupon(-item.value)\r\n  }\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n      this.invoices.setDiscountPoint((value / this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoices.setUsePoint(value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n}\r\n","<div class=\"bill\">\r\n    <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <span (click)=\"openModalOtherDiscount()\" style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n            <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n            {{'Add other payment' |translate}}\r\n        </span>\r\n    </div>\r\n    <div class=\"bill-area hideScrollbar\">\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"12\">{{'SubTotal' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getSubTotal())}}</div>\r\n        </div>\r\n        <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n            <div class=\"sales-bills-content-discount\"\r\n                style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                <div>\r\n                    <input id=\"percent-discount-price\" style=\"width: 60px;\" #percentDiscount type=\"number\"\r\n                        max=\"100\" min=\"0\" step=\"1\"\r\n                        (blur)=\"invoices.setPercentDiscountBill(percentDiscount.value); editPercentDiscount(percentDiscount.value)\"\r\n                        [value]=\"percent_discount | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                        nz-input />%\r\n                </div>\r\n                <input style=\"width:50%;\" (blur)=\"updateDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getDiscount())\"\r\n                    class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                    nz-input />\r\n            </div>\r\n        </ng-container>\r\n        <div *ngIf=\"invoices.getDiscountBill()\" class=\"sales-bills-content-discount\"\r\n            style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n            <div style=\"width: auto;\">{{'Discount' | translate}}\r\n            </div>\r\n            <span>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountBill())}}</span>\r\n        </div>\r\n        <div *ngIf=\"invoices.getDiscountPoint()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;align-items: center;\" >\r\n            <div>{{'Point payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountPoint())}}</div>\r\n        </div>\r\n        <div *ngIf=\"invoices.getDiscountCoupon()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;align-items: center;\" >\r\n            <div>{{'Coupon payment' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountCoupon())}}</div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n            <div nz-col nzSpan=\"12\">{{'Fee' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice_fee)\" maxlength=\"15\" (blur)=\"updateFee()\"\r\n                    class=\"fee-price\" id=\"fee-price\" nz-input (keyup)=\"invoice_fee = moneyEdit['fee'].getRawValue()\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"bill-area-item\" style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n            <div class=\"bill-area-item-value\">{{'Tax' | translate}}</div>\r\n            <div>\r\n                <nz-select *ngIf=\"listTax.length\" style=\"min-width: 72px;\" [(ngModel)]=\"tax\"\r\n                    (ngModelChange)=\"updateTax($event)\">\r\n                    <nz-option [nzValue]=\"item.value\" nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\"\r\n                        *ngFor=\"let item of listTax; trackBy:myTrackByFunction\">\r\n                    </nz-option>\r\n                </nz-select>\r\n                <span *ngIf=\"!listTax.length\">0.00%</span>\r\n            </div>\r\n            <div class=\"bill-area-item-value\">{{vhAlgorithm.vhcurrencyunit(invoices.getTaxValue())}}</div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\">{{'Total' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getTotalATax())}}</div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\" class=\"payment\">{{'Pay' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getPayment())\" maxlength=\"15\" (blur)=\"updatePayment()\"\r\n                    class=\"payment-price\" id=\"payment-price\" nz-input [disabled]=\"!debt\"\r\n                     />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n            <div nz-col nzSpan=\"12\">{{'Rest' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit_symbol(invoices.getTotalATax() - invoices.getPayment())}}\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"12\">{{'Payment method' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <nz-cascader [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" [(ngModel)]=\"paymentType\"\r\n                    (ngModelChange)=\"changePaymentType($event)\" nzPlaceHolder=\"{{'Payment method' | translate}}\">\r\n                </nz-cascader>\r\n            </div>\r\n        </div>\r\n        <!-- <di class=\"bill-area-item-payment_type\" nz-col nzSpan=\"24\">\r\n            \r\n        </di>v -->\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n            <div nz-col nzSpan=\"12\">{{'cash' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" id=\"cash\">\r\n                <input style=\"text-align: end;\" type=\"text\" #cash maxlength=\"15\" nz-input\r\n                    [disabled]=\"invoices.getPaymentType() == 2\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice_cash)\"\r\n                    class=\"customerPay\" (blur)=\"updateCash()\"\r\n                    (keyup)=\"invoice_cash = moneyEdit['cash'].getRawValue()\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"margin-top: 8px;\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n            <div nz-col nzSpan=\"12\">{{'Change' | translate}}</div>\r\n            <div nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getExcessCash())}}</div>\r\n        </div>\r\n        <div class=\"bill-area-item-note\" nz-col nzSpan=\"24\" id=\"note\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n            <textarea class=\"nz-hover-border\" id=\"invoice-note\" nz-input placeholder=\"{{'Enter note...' | translate}}\"\r\n                [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\" (blur)=\"updateNote()\" #note [value]=\"invoice_note\"\r\n                (keyup)=\"invoice_note = note.value\"></textarea>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal [(nzVisible)]=\"showModalOtherDiscount\" nzTitle=\"{{'Other payment' | translate}}\" nzWidth=\"50vw\"\r\n    (nzOnCancel)=\"showModalOtherDiscount = false\" nzCancelText=\"\" (nzOnOk)=\"handleOkOtherDiscount()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{\"Coupon\" | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n                <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\" style=\"text-align: left;\"\r\n                    (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n                <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                    (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoices.getDiscountCoupon())}}\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\"></div>\r\n            <div nz-col nzSpan=\"18\">\r\n                <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                    (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <div nz-row class=\"center-all-content mt-8\">\r\n                <div nz-col nzSpan=\"6\">\r\n                    {{'Accumulated points' | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                        nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                        (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                    {{vhAlgorithm.vhcurrencyunit(invoices.getDiscountPoint())}}\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"mt-8\">\r\n                <div nz-col nzSpan=\"14\">\r\n                    <label>{{\"Point conversion rate\" | translate}}:\r\n                        {{customer_class.payment.points}} Điểm =\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                    {{'Current accumulated points' | translate}} : {{point_validity }}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div nz-row class=\"mt-8 beetween-all-content\">\r\n            <b>{{'Total discount' | translate}}</b>\r\n            <b>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountOther())}}</b>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Bill1Component } from './bill1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Bill1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    Bill1Component\r\n  ]\r\n})\r\nexport class Bill1Module { }\r\n","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth, VhQuery, VhEinvoice } from 'ionic-vhframeworks';\r\nimport { SalesA4Component } from 'src/app/cafe/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/cafe/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/cafe/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/cafe/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/cafe/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.component.html',\r\n  styleUrls: ['./cart.component.scss'],\r\n})\r\nexport class CartComponent implements OnInit {\r\n  /** Dữ liệu state */\r\n  dataRestore: any;\r\n  /** Đối tượng hóa đơn\r\n   * @description: đối tượng hóa đơn bao gồm cả hóa đơn và chi tiết hóa đơn\r\n   */\r\n  invoices: VhOrderInvoices = new VhOrderInvoices();\r\n  /**món ăn, dịch vụ, combo, topping đang chờ được xử lý */\r\n  billDetailProcessing: any = null;\r\n  /**In bếp được bật hay k? */\r\n  checkPrinterKitchen: any = {};\r\n  /** In hóa đơn được bật hay k? */\r\n  checkPrinter: boolean = false;\r\n  /**cho phép nợ hay không? */\r\n  debt: boolean = false;\r\n  /**thông tin bàn đang được đặt */\r\n  tableInfo: string = '';\r\n  /** trạng thái hóa đơn\r\n   * @description: updating: đang cập nhật / deleting: đang xóa / payment: đang thanh toán\r\n   */\r\n  statusInvoice: any = {\r\n    updating: false,\r\n    deleting: false,\r\n    payment: false,\r\n  };\r\n  stamp: any; // mẫu tem in để in món. lấy từ collection design_barcodes với trường default = true\r\n  printKitchenAll = false; // biến nhận giá trị output printKitchenAll từ component payment-button2\r\n  /** thuộc tính máy in */\r\n  printer: any;\r\n  default_price_type: number = 1;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private router: Router,\r\n    public vhAuth: VhAuth,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private cdRef: ChangeDetectorRef,\r\n    private mess: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private vhQuery: VhQuery,\r\n    private platform: Platform,\r\n    private productService: ProductService,\r\n    private vhEinvoice: VhEinvoice,\r\n    private billService: BillService,\r\n  ) {\r\n    let dataTrans: any = this.router.getCurrentNavigation().extras.state;\r\n    if (dataTrans.dataRestore) this.dataRestore = dataTrans.dataRestore;\r\n    this.initInvoice(dataTrans);\r\n    // console.log(dataTrans);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.platform.is('electron')) {\r\n      // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n      //   .then((led) => {\r\n      // console.log(\"led\", led)\r\n      console.log('connectDisplayLEDScreens');\r\n      this.vhQueryCafe.connectDisplayLEDScreens();\r\n      // })\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.vhQueryCafe.closeSyncOpeningBill();\r\n    // this.observableSyncOpeningBill.unsubscribe();\r\n    if (this.platform.is('electron'))\r\n      this.vhQueryCafe.disconnectDisplayLEDScreens();\r\n  }\r\n  ngAfterViewChecked() {\r\n    document.getElementById('bill-detail-2').style.height =\r\n      document.querySelector('#bill-2').clientHeight -\r\n      document.querySelector('#info-bill-2').clientHeight -\r\n      16 +\r\n      'px';\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**Pop up báo khi phát sinh lỗi\r\n   * @param err: thông tin lỗi\r\n   */\r\n  alertErr(err) {\r\n    this.mess.error(\r\n      this.languageService.translate('Connection error. Please try again')\r\n    );\r\n    this.goBack()\r\n  }\r\n  /**\r\n   * xử lý in toàn bộ món xuống bếp\r\n   * @param ev = true\r\n   * @example this.handleEmit_printKitchenAll(true)\r\n   */\r\n  handleEmit_printKitchenAll(ev) {\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.printKitchenAll = ev;\r\n    setTimeout(() => {\r\n      this.printKitchenAll = false;\r\n    }, 2000);\r\n  }\r\n\r\n  /**\r\n   *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n   * @event : 1 | 2 | null\r\n   * @example this.changePriceType(1)\r\n   */\r\n  changePriceType(event) {\r\n    if (event != null) {\r\n      // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.destroyBillDetails_withPromotions().then(() => {\r\n        if (this.invoices.getInvoiceDetail().length) {\r\n          // nếu có  length mơi update\r\n          let bill_details = this.invoices.getInvoiceDetail();\r\n          for (let i in bill_details) {\r\n            // Nếu là dịch vụ thời gian\r\n            if (bill_details[i].ptype === VhType.SERVICETIME) {\r\n              this.productService.updateServiceTimePrice(bill_details[i], event);\r\n              delete (bill_details[i] as any).serviceTimePrice;\r\n              // Cập nhật lại sản phẩm trong danh sách hóa đơn\r\n              bill_details[i] = { ...bill_details[i] };\r\n              continue;\r\n            }\r\n\r\n            let price_update = 0;\r\n            let product = this.vhQueryCafe.getlocalDetailProduct(\r\n              bill_details[i].id_subproduct\r\n                ? bill_details[i].id_subproduct\r\n                : bill_details[i].id_product\r\n            );\r\n            product = {\r\n              ...product,\r\n              ...this.vhQueryCafe.getUnit_byRatio(\r\n                product.units,\r\n                bill_details[i].ratio\r\n              ),\r\n            };\r\n            // Giá bán 1\r\n            if (event == 1) {\r\n              price_update = product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  top.price = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  ).units[0].price;\r\n                }\r\n              }\r\n            }\r\n            // Giá bán 2\r\n            else {\r\n              price_update = product.price2 ? product.price2 : product.price;\r\n              if (bill_details[i].toppings) {\r\n                for (let top of bill_details[i].toppings) {\r\n                  let topping = this.vhQueryCafe.getlocalProduct(\r\n                    top.id_product\r\n                  );\r\n                  top.price = topping.units[0].price2\r\n                    ? topping.units[0].price2\r\n                    : topping.units[0].price;\r\n                }\r\n              }\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.invoices.setSubTotal();\r\n        }\r\n        this.invoices.setPriceType(event);\r\n        this.vhQueryCafe\r\n          .updateBill_Billdetail(\r\n            this.invoices.getID(),\r\n            this.invoices.getCreateUpdateInvoice(5),\r\n            this.invoices.getCreateUpdateInvoiceDetail()\r\n          )\r\n          .then(() => {\r\n            console.log('success');\r\n            this.getBill_Detail_ByID_Bill();\r\n          });\r\n      });\r\n    }\r\n    if (!this.gotten_gift_type7)\r\n      this.handlePromotionType7(this.bill_details_pmtype_7);\r\n  }\r\n\r\n  /**Hàm trở về trang khu vực order\r\n   * @param reset: reset quyền truy cập\r\n   * @default reset = true\r\n   */\r\n  async goBack(reset: boolean = true) {\r\n    this.isExit = true;\r\n    if (\r\n      this.dataRestore['searchValueToday'] &&\r\n      this.dataRestore['filterTypeToday']\r\n    ) {\r\n      delete this.dataRestore['searchValueToday'];\r\n      delete this.dataRestore['filterTypeToday'];\r\n    }\r\n    this.router.navigate(['/cafe/cafe-pos'], { state: this.dataRestore });\r\n  }\r\n  /**Render food name\r\n   * @param id_prod: id product\r\n   * @param id_subProd: id subproduct\r\n   * @example this.renderNameFood('BIQBFUOYEOWQIDHIUWHD')\r\n   */\r\n  renderNameFood(id_prod: string, id_subProd?: string) {\r\n    let food = this.vhQueryCafe.getlocalProduct(id_prod);\r\n    let subFood: any;\r\n\r\n    if (id_subProd) subFood = food.subs.find((item) => item._id == id_subProd);\r\n    return `${food ? food.name : ''} ${subFood ? '(' + subFood.name + ')' : ''\r\n      }`;\r\n  }\r\n  /**Render các thành phần combo\r\n   * @param arr: mảng combos\r\n   */\r\n  renderSubCombo(arr: any[]) {\r\n    let subName: string = '';\r\n    arr.forEach((item) => {\r\n      if (subName.length) subName += `, ${item.quantity} ${item.name}`;\r\n      else subName += `${item.quantity} ${item.name}`;\r\n    });\r\n    return subName;\r\n  }\r\n  /**Khởi tạo hóa đơn\r\n   * @param dataTrans: dữ liệu state\r\n   */\r\n  initInvoice(dataTrans) {\r\n    this.invoices.setIdTable(dataTrans['id_table']);\r\n    this.invoices.setIdEmployee(this.vhAuth.getUser()._id);\r\n    this.invoices.setIdArea(this.dataRestore['id_area']);\r\n\r\n    // lấy thuế\r\n    let tax: any = this.vhQueryCafe\r\n      .getlocalTaxs()\r\n      .find((tax) => tax.status && tax.default);\r\n    if (tax) this.invoices.setTax(parseFloat(tax.value));\r\n    if (dataTrans.id_bill) { // bàn đã sinh bill\r\n\r\n      // xử lý lấy các dữ liệu cần thiết để bán hàng\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(dataTrans.id_bill),\r\n        this.vhQueryCafe.getBill_details_byId_bill(dataTrans.id_bill),\r\n        this.vhComponent.showLoading('', 'transparent-loading', null, 0, false),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", {\r\n          id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id },\r\n          default: { $eq: true },\r\n        }),\r\n        this.vhQueryCafe.getEarningPointsBills(),\r\n        this.vhQueryCafe.getEarningPointsProducts(),\r\n      ])\r\n        .then(\r\n          ([\r\n            bill,\r\n            billDetail,\r\n            loading,\r\n            label,\r\n            earning_point_bills,\r\n            earning_points_products,\r\n          ]) => {\r\n            if (label['length'] && label[0].status) this.stamp = label[0];\r\n            this.list_earning_point_bills = earning_point_bills;\r\n            this.list_earning_points_products = earning_points_products;\r\n            if (!bill) {\r\n              this.vhComponent\r\n                .alertMessage(\r\n                  '',\r\n                  '',\r\n                  this.languageService.translate('The invoice is not existed'),\r\n                  'OK'\r\n                )\r\n                .then(() => this.goBack(false));\r\n              return;\r\n            }\r\n            this.invoices = new VhOrderInvoices(\r\n              bill,\r\n              this.vhAlgorithm.sortDatebyDESC(billDetail, 'time_start_order'),\r\n              this.vhQueryCafe,\r\n              this.platform\r\n            );\r\n\r\n            // kiểm tra cho phép nợ\r\n            this.getClassAndProgram();\r\n            this.debt =\r\n              this.invoices.getIdPartner() == 'id_retail'\r\n                ? false\r\n                : this.vhQueryCafe.getlocalCustomer(\r\n                  this.invoices.getIdPartner()\r\n                );\r\n            this.observableCheckBill(bill['_id']);\r\n            if (this.vhAuth.checkMyPermission('default_price_type_1'))\r\n              this.default_price_type = 1;\r\n            else if (this.vhAuth.checkMyPermission('default_price_type_2'))\r\n              this.default_price_type = 2;\r\n            this.invoices.setPriceType(this.default_price_type);\r\n          }\r\n        )\r\n        .catch((err) => this.alertErr(err))\r\n        .finally(() => this.vhComponent.hideLoading(0));\r\n    }\r\n    else {\r\n      this.goBack()\r\n    }\r\n    // lấy thông tin bàn\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      this.tableInfo = this.languageService.translate('Take away');\r\n    } else {\r\n      this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.invoices.getIdArea()).name\r\n        } - ${this.vhQueryCafe.getlocalTable(this.invoices.getIdTable()).name}`;\r\n    }\r\n    // kiểm tra máy in và gán thông tin máy in vào biến printer\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales');\r\n    this.printer = printer\r\n      ? printer.print_sizes[\r\n      printer.print_sizes.findIndex(\r\n        (e) => e._id == printer.print_size_default\r\n      )\r\n      ]\r\n      : null;\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable;\r\n    }\r\n    // kiểm tra máy in bếp và gán thông tin máy in vào biến checkPrinterKitchen\r\n    let printer_kitchen = this.vhQueryCafe.getLocalPrintPage(\r\n      'page_desktop_kitchen'\r\n    );\r\n    this.checkPrinterKitchen = printer_kitchen\r\n      ? printer_kitchen.print_sizes[\r\n      printer_kitchen.print_sizes.findIndex(\r\n        (e) => e._id == printer_kitchen.print_size_default\r\n      )\r\n      ]\r\n      : { enable: false };\r\n  }\r\n  // sự kiện subscribe bill dc mở ở thiết bị khác\r\n  observableCheckBill(id_bill) {\r\n    console.log('id_bill', id_bill);\r\n    this.vhQueryCafe.observableSyncOpeningBill(id_bill, 5).subscribe(\r\n      (rsp: any) => {\r\n        console.log('observableSyncOpeningBill', rsp);\r\n        this.vhQueryCafe.closeSyncOpeningBill();\r\n        if (rsp.vcode === 0) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate(\r\n              'Hóa đơn này đang được cập nhật ở thiết bị khác!'\r\n            ),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 1) {\r\n          this.nzModalService.confirm({\r\n            nzTitle: this.languageService.translate(\r\n              'Hóa đơn này đã được thanh toán ở thiết bị khác!'\r\n            ),\r\n            nzOkText: 'Thoát',\r\n            nzOnOk: () => {\r\n              this.goBack();\r\n            },\r\n            nzCancelText: null,\r\n            nzOnCancel: () => {\r\n              this.goBack();\r\n            },\r\n          });\r\n        } else if (rsp.vcode === 2) {\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate('Hóa đơn đã bị xóa!')\r\n          );\r\n          this.goBack();\r\n        }\r\n      },\r\n      (error: any) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n  /**Tiến hành cập nhặt hóa đơn\r\n   *@param ev: event trả về của output\r\n   * @example this.updateInvoice(true)\r\n   */\r\n  updateInvoice(ev) {\r\n    this.statusInvoice.updating = true;\r\n    // tiến hành cập nhật\r\n    // kiểm tra bill đang có km thì destroy km trước khi luu\r\n    if (this.invoices.isPromotion()) {\r\n      this.deletePromotion();\r\n      this.statusInvoice.updating = false;\r\n    } else {\r\n      this.vhQueryCafe\r\n        .updateBill(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(5)\r\n        )\r\n        .then((id) => {\r\n          console.log('update invoice: ', id);\r\n          this.getClassAndProgram();\r\n        })\r\n        .catch((err) => console.error(err))\r\n        .finally(() => (this.statusInvoice.updating = false));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @example this.getEarningBill()\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (\r\n      this.program_bill &&\r\n      this.invoices.getSubTotal() > this.program_bill.bill_total_minimum\r\n    ) {\r\n      let subTotal = this.invoices.getSubTotal();\r\n      if (!this.program_bill.include_promotion_product) {\r\n        // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion();\r\n        if (this.program_bill.include_discount)\r\n          subTotal =\r\n            subTotal -\r\n            this.invoices.getDiscount() -\r\n            this.invoices.getDiscountBill();\r\n\r\n        if (\r\n          this.program_bill.include_paid_points &&\r\n          this.invoices.getDiscountPoint()\r\n        )\r\n          subTotal = subTotal - this.invoices.getDiscountPoint();\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax)\r\n          subTotal += subTotal * (this.invoices.getTax() / 100);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_bill.exchange.money)) /\r\n            this.program_bill.exchange.money) *\r\n          this.program_bill.exchange.points\r\n        );\r\n      } else {\r\n        subTotal = this.invoices.getSubTotal();\r\n        if (this.program_bill.include_discount)\r\n          subTotal =\r\n            subTotal -\r\n            this.invoices.getDiscount() -\r\n            this.invoices.getDiscountBill();\r\n\r\n        if (\r\n          this.program_bill.include_paid_points &&\r\n          this.invoices.getDiscountPoint()\r\n        )\r\n          subTotal = subTotal - this.invoices.getDiscountPoint();\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax)\r\n          subTotal += subTotal * (this.invoices.getTax() / 100);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_bill.exchange.money)) /\r\n            this.program_bill.exchange.money) *\r\n          this.program_bill.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n   * @example this.getSubTotalNotPromotion()\r\n   * @return : number\r\n   */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoices\r\n      .getInvoiceDetail()\r\n      .filter((item) => !item.id_promotion)\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * @param products_of_program_earnig_product : mảng danh sách các sp thuộc ct tích điểm sp\r\n   * @example this.getSubTotalNotPromotionOFProduct()\r\n   * @return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoices\r\n      .getInvoiceDetail()\r\n      .filter(\r\n        (item) =>\r\n          item.price_origin == item.price &&\r\n          products_of_program_earnig_product.find(\r\n            (i) => i == item.id_product || i == item.id_subproduct\r\n          )\r\n      )\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả bill-detail\r\n   * @param products : bill-details\r\n   * @example this.getEarningProduct(bill_details)\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) {\r\n        // tích điểm sp ko có km\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(\r\n          this.program_product.products\r\n        );\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      } else {\r\n        // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = products\r\n          .filter(\r\n            (item) =>\r\n              item.price_origin == item.price &&\r\n              this.program_product.products.find((i) => i == item.id_product)\r\n          )\r\n          .reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n  earning_point: number = 0;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   * @example this.getClassAndProgram()\r\n   */\r\n  getClassAndProgram() {\r\n    let customer = this.vhQueryCafe.getlocalCustomer(\r\n      this.invoices.getIdPartner()\r\n    );\r\n    this.customer_class = this.vhQueryCafe\r\n      .getlocalCustomerClasss()\r\n      .find((item) => item._id == customer.id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_bill\r\n      );\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(\r\n        (item) => item._id == this.customer_class.id_earning_points_product\r\n      );\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n  }\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @example this.getTotalEarningPoint()\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point =\r\n      this.getEarningProduct(this.invoices.getInvoiceDetail()) +\r\n      this.getEarningBill();\r\n    return this.earning_point ? this.earning_point : 0;\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @example this.getTotalEarningPointProduct(product,null)\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) {\r\n        // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find((i) => i == product._id)\r\n          ? product.price\r\n          : 0;\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      } else {\r\n        subTotal = this.program_product.products.find((i) => i == product._id)\r\n          ? product.price\r\n          : 0;\r\n        return (\r\n          ((subTotal - (subTotal % this.program_product.exchange.money)) /\r\n            this.program_product.exchange.money) *\r\n          this.program_product.exchange.points\r\n        );\r\n      }\r\n    } else return 0;\r\n  }\r\n\r\n  /**\r\n   * Xóa hóa đơn trên database, cập nhật lại status bàn nếu có\r\n   * @example this.deleteProcess()\r\n   * @return Promise<unknow>\r\n  */\r\n  deleteProcess() {\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.invoices.getID()),\r\n      ]);\r\n    } else {\r\n      this.vhQueryCafe.closeSyncOpeningBill();\r\n      return Promise.all([\r\n        this.vhQueryCafe.deleteBill_Billdetail(this.invoices.getID()),\r\n        this.vhQueryCafe.updateTable(this.invoices.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n  /**\r\n   * gọi hàm deleteProcess, hiển thị thông báo và quay về trang trước\r\n   *@param ev: event trả về của output\r\n   * @example this.deleteInvoice(true)\r\n   *\r\n   */\r\n  deleteInvoice(ev) {\r\n    if (ev) {\r\n      this.vhQueryCafe.closeSyncOpeningBill();\r\n      this.statusInvoice.deleting = true;\r\n      // tiến hành xóa\r\n      Promise.all([\r\n        this.vhComponent.showLoading('', 'transparent-loading'),\r\n        this.deleteProcess(),\r\n      ])\r\n        .then((id) => console.log('delete invoice: ', id))\r\n        .catch((err) => {\r\n          console.error(err);\r\n          this.mess.error(this.languageService.translate('Delete fail'));\r\n        })\r\n        .finally(() => {\r\n          this.statusInvoice.deleting = false;\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate('Invoice deleted successfully')\r\n          );\r\n          this.goBack();\r\n        });\r\n    }\r\n  }\r\n  /**\r\n   * cập nhật hóa đơn về bill-type 1, update lại status table nếu có\r\n   * @example this.createProcess()\r\n   * @returns Promise<unknown>\r\n   */\r\n  createProcess() {\r\n    this.productService.updateAllServiceTimeToPause(this.invoices.getInvoiceDetail());\r\n    if (this.invoices.getIdTable() == 'go_home') {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(1),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        ),\r\n      ]);\r\n    } else {\r\n      return Promise.all([\r\n        this.vhQueryCafe.updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(1),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        ),\r\n        this.vhQueryCafe.updateTable(this.invoices.getIdTable(), {\r\n          status: false,\r\n        }),\r\n      ]);\r\n    }\r\n  }\r\n  /** bắt sợ kiện nhấn nút Thanh toán hóa đơn, cập nhật lại coupon_code nếu có\r\n   * xử lý in và thoát trang\r\n   * @param print: cho phép in hóa đơn hay k?\r\n   * @example this.saveInvoice('print')\r\n   */\r\n\r\n  saveInvoice(print: 'print' | 'notPrint') {\r\n    if (!this.vhAuth.checkLocalMyPermissionName('sales_enable_payment')) {\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate('You do not have this rights'));\r\n      return\r\n    }\r\n    this.statusInvoice['payment'] = true;\r\n    // tính toán lại trường earning_point_bill trong bill\r\n    if (this.getTotalEarningPoint() || this.invoices.getUsePoint()) {\r\n      let earned_points =\r\n        this.getTotalEarningPoint() - this.invoices.getUsePoint();\r\n      this.vhQueryCafe.updateCustomer_byEarnedPoints(\r\n        this.invoices.getIdPartner(),\r\n        earned_points\r\n      );\r\n      this.invoices.setEarningPointBill(this.getTotalEarningPoint());\r\n    }\r\n    const bill: any = {...this.invoices};\r\n    const invoiceTemp = {...bill?.invoice};\r\n    this.createProcess().then(async (res) => {\r\n      if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n      // update lại coupon_code và lưu vào mảng promise để xử lý đồng bộ\r\n      let promise = new Array();\r\n      for (let i = 0; i < this.invoices.getArrayCouponCodes().length; i++) {\r\n        promise[i] = this.vhQueryCafe.updateCouponCode(\r\n          this.invoices.getArrayCouponCodes()[i]._id,\r\n          {\r\n            status: 4,\r\n            id_bill: this.invoices.getID(),\r\n            date_used: new Date(),\r\n            id_customer_used: this.invoices.getIdPartner(),\r\n          }\r\n        );\r\n      }\r\n      this.vhQuery.asyncPromiseAll(promise).then(\r\n        (array) => {\r\n          this.mess.success(\r\n            `${this.languageService.translate(\r\n              'Sales invoice'\r\n            )} ${this.invoices.getBillCode()} ${this.languageService.translate(\r\n              'has been created successfully'\r\n            )}`\r\n          );\r\n          if (print == 'print' && this.checkPrinter) this.handlePrintInvoice();\r\n          else this.goBack(false);\r\n        },\r\n        (error) => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, 'alert-toast');\r\n          });\r\n        }\r\n      );\r\n\r\n      this.statusInvoice['payment'] = false;\r\n    });\r\n  }\r\n\r\n  ///////////////////////////////////////////////IN HÓA ĐƠN//////////////////////////////////////////////////////////\r\n  /**\r\n   * Lấy các trang in\r\n   * @param type size\r\n   * @example this.renderPrintPage()\r\n   * @returns component in tương ứng\r\n   */\r\n  private renderPrintPage(\r\n    type:\r\n      | 'print_size_a4'\r\n      | 'print_size_a5'\r\n      | 'print_size_k80_4c'\r\n      | 'print_size_k80_3c'\r\n      | 'print_size_k57_3c'\r\n  ) {\r\n    switch (type) {\r\n      case 'print_size_k57_3c':\r\n        return SalesK57Col3Component;\r\n      case 'print_size_k80_3c':\r\n        return SalesK80Col3Component;\r\n      case 'print_size_k80_4c':\r\n        return SalesK80Col4Component;\r\n      case 'print_size_a5':\r\n        return SalesA5Component;\r\n      case 'print_size_a4':\r\n        return SalesA4Component;\r\n      default:\r\n        return SalesA4Component;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  gọi hàm renderPrintPage() và mở modal component trả về tương ứng, xử lý thoát trang khi kết thúc\r\n   * @example this.handlePrintInvoice()\r\n  */\r\n  handlePrintInvoice() {\r\n    if (this.printer)\r\n      this.vhQueryCafe.getBill(this.invoices.getID()).then((res: any) => {\r\n        this.invoices.setBillCode(res.bill_code);\r\n        this.vhComponent\r\n          .showModal(\r\n            this.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.invoices },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          )\r\n          .then((modal) => {\r\n            modal.onWillDismiss().then(() => {\r\n              this.goBack(false);\r\n            });\r\n          });\r\n      });\r\n    else this.goBack(false);\r\n  }\r\n\r\n  /** Mở trang in thử từ sự kiện In cho khách xem\r\n   *  @example this.handlePrintTest()\r\n  */\r\n  handlePrintTest() {\r\n    if (this.checkPrinter) {\r\n      if (this.vhAuth.checkMyPermission('sales_enable_print_out_for_customer')) {\r\n        this.updateServiceTime();\r\n        this.vhComponent\r\n          .showModal(\r\n            this.renderPrintPage(this.printer['_id']),\r\n            { printer: this.printer, invoice: this.invoices, temp: true },\r\n            false,\r\n            false,\r\n            `modal-print-${this.printer['_id']}`\r\n          )\r\n          .then((modal) => {\r\n            modal.onWillDismiss().then(() => { });\r\n          });\r\n      }\r\n      else\r\n        this.mess.error(\r\n          this.languageService.translate('You do not have this rights'),\r\n          { nzDuration: 5000 }\r\n        );\r\n    } else\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate('Function') + '</i>',\r\n        nzContent:\r\n          '<b>' +\r\n          this.languageService.translate('Please open the function in') +\r\n          ' ' +\r\n          '<i>' +\r\n          '\"' +\r\n          this.languageService.translate('Sales page settings') +\r\n          '\"' +\r\n          '</i>' +\r\n          ' ' +\r\n          ' -> ' +\r\n          '<i>' +\r\n          '\"' +\r\n          this.languageService.translate('Print page') +\r\n          '\"' +\r\n          '</i>' +\r\n          '</b>',\r\n        nzIconType: 'info-circle',\r\n        nzCancelText: null,\r\n        nzOnOk: () => { },\r\n      });\r\n  }\r\n\r\n  isExit: boolean = false;\r\n\r\n\r\n  /**\r\n   * hàm hủy lấy khuyến mãi, nhận từ sk hủy khuyến mãi ở bill-detail, gọi hàm destroyBillDetails_withPromotions để xử lý\r\n   *\r\n   * @example this.deletePromotion()\r\n   */\r\n  deletePromotion() {\r\n    this.destroyBillDetails_withPromotions().then(() => {\r\n      this.vhQueryCafe\r\n        .updateBill_Billdetail(\r\n          this.invoices.getID(),\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          this.invoices.getCreateUpdateInvoiceDetail()\r\n        )\r\n        .then(() => {\r\n          console.log('success');\r\n          this.getBill_Detail_ByID_Bill();\r\n        })\r\n        .catch((err) => console.error(err));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * gọi hàm destroyBillDetails_withPromotions từ fw, set lại các biến liên quan đến promotion thành mặc định\r\n   * @example this.destroyBillDetails_withPromotions()\r\n   * @returns Promise<unknown\r\n   */\r\n  destroyBillDetails_withPromotions() {\r\n    this.invoices.setBillHavePromotion(false);\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQueryCafe.destroyBillDetails_withPromotions(\r\n        this.invoices.getInvoiceDetail()\r\n      );\r\n      this.invoices = new VhOrderInvoices(\r\n        this.invoices.getCreateUpdateInvoice(5),\r\n        bill_details,\r\n        this.vhQueryCafe,\r\n        this.platform\r\n      );\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true);\r\n    });\r\n  }\r\n\r\n  isGotPromotion = false;\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  /**\r\n   * hàm này xử lý việc xác nhận chọn các sp trong khuyến mãi type 7\r\n   * @example this.handleAddGiftType7()\r\n   */\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n\r\n      for (let i in this.product_gift_type7) {\r\n        if (this.product_gift_type7[i].products_gift.filter(e => e.choose).length)\r\n          this.invoices.addBill_detail_promotion(this.product_gift_type7[i]);\r\n      }\r\n    this.gotten_gift_type7 = true;\r\n    console.log(this.invoices.getInvoiceDetail());\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút lấy quà ở giao diện, output từ component app-search\r\n   * @example this.getPromotions()\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('').then(() => {\r\n      /** Chứa các bill_detail có ptype = 6 */\r\n      let bill_details_type_6;\r\n      /** Chứa các bill_detail có ptype != 6 */\r\n      let bill_details_others;\r\n      // Nếu có Dịch vụ thời gian thì tách bill_detail có ptype = 6 ra để xử lý riêng, sau khi get xong thì thêm vô lại\r\n      if(this.productService.isContainServiceTime(this.invoices)) {\r\n        bill_details_type_6 = this.invoices.getInvoiceDetail().filter((item) => item.ptype === VhType.SERVICETIME);\r\n        bill_details_others = this.invoices.getInvoiceDetail().filter((item) => item.ptype !== VhType.SERVICETIME);\r\n        this.invoices = new VhOrderInvoices(\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          bill_details_others,\r\n          this.vhQueryCafe,\r\n          this.platform\r\n        );\r\n      }\r\n\r\n      this.vhQueryCafe\r\n        .changeBillDetails_withPromotions(\r\n          this.invoices.getInvoiceDetail(),\r\n          this.invoices.getDate()\r\n        )\r\n        .then(\r\n          (bill_details_display: any) => {\r\n\r\n            // Nếu có Dịch vụ thời gian thì thêm bill_detail có ptype = 6 vào lại\r\n            if(this.productService.isContainServiceTime(this.invoices)) {\r\n              bill_details_display.bill_details_pmtype_0to6 = [\r\n                ...bill_details_type_6,\r\n                ...bill_details_display.bill_details_pmtype_0to6,\r\n              ];\r\n            }\r\n\r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_0to6\r\n            );\r\n            \r\n            this.handleChooseLotForPromotion(\r\n              bill_details_display.bill_details_pmtype_7\r\n            );\r\n\r\n            this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC(\r\n              [...bill_details_display.bill_details_pmtype_7],\r\n              'total_bill_value'\r\n            );\r\n\r\n            this.isGotPromotion = true;\r\n            this.vhComponent.hideLoading(0);\r\n            this.invoices = new VhOrderInvoices(\r\n              this.invoices.getCreateUpdateInvoice(5),\r\n              [...bill_details_display.bill_details_pmtype_0to6],\r\n              this.vhQueryCafe,\r\n              this.platform\r\n            );\r\n\r\n            this.handlePromotionType7(this.bill_details_pmtype_7);\r\n\r\n            this.getEarningpointPromotion().then(() => {\r\n              this.vhQueryCafe.updateBill_Billdetail(\r\n                this.invoices.getID(),\r\n                this.invoices.getCreateUpdateInvoice(5),\r\n                this.invoices.getCreateUpdateInvoiceDetail()\r\n              ).then(() => {\r\n                console.log(\"success\");\r\n              })\r\n            })\r\n\r\n          },\r\n          (error) => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(5000, error, 'alert-toast');\r\n            });\r\n          }\r\n        );\r\n    });\r\n  }\r\n\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length) {\r\n      if (\r\n        bill_details_pmtype_7.findLastIndex(\r\n          (e) => e.total_bill_value <= this.invoices.getTotalATax()\r\n        ) != -1\r\n      )\r\n        this.product_gift_type7 = [\r\n          bill_details_pmtype_7[\r\n          bill_details_pmtype_7.findLastIndex(\r\n            (e) => e.total_bill_value <= this.invoices.getTotalATax()\r\n          )\r\n          ],\r\n        ];\r\n      else this.product_gift_type7 = [];\r\n    } else this.product_gift_type7 = [];\r\n    if (this.product_gift_type7.length) this.showProductGiftType7 = true\r\n\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  }\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n              product.lots,\r\n              'date_exp'\r\n            );\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach((element) => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(\r\n                  element.lots,\r\n                  'date_exp'\r\n                );\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    return new Promise((resolve) => {\r\n      for (let i of this.invoices.getInvoiceDetail()) {\r\n        if (i.pmtype) this.invoices.setBillHavePromotion(true);\r\n        if (i.products_gift) {\r\n          for (let product of i.products_gift) {\r\n            product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n          }\r\n        }\r\n        if (i.products) {\r\n          for (let product of i.products) {\r\n            product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n          }\r\n        }\r\n        if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n      }\r\n      this.invoices.setSubTotal();\r\n      resolve(true);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (\r\n      data.products_gift.filter((item) => item.choose).length ==\r\n      data.promotions_maximum\r\n    )\r\n      return true;\r\n    else return false;\r\n  }\r\n\r\n  getBill_Detail_ByID_Bill() {\r\n    this.vhQueryCafe.getBill_details_byId_bill(this.invoices.getID()).then(\r\n      (bill_details) => {\r\n        console.log('getBill_details_byId_bill', bill_details);\r\n        this.invoices = new VhOrderInvoices(\r\n          this.invoices.getCreateUpdateInvoice(5),\r\n          bill_details,\r\n          this.vhQueryCafe,\r\n          this.platform\r\n        );\r\n      },\r\n      (error: any) => {\r\n        console.log('error ', error);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------------- HÓA ĐƠN ĐIỆN TỬ ---------------------------------------------------------- */\r\n\r\n  cqt_invoice_auto_sign: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_invoice_auto_sign\r\n  cqt_submit_invoice_immediately: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_submit_invoice_immediately\r\n\r\n  handleMinvoice(bill) {\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQueryCafe.getlocalBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp đã gửi lên cqt rồi thì khỏi\r\n      if(bill.cqt_status == 2 || bill.cqt_status == 3){\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                     \r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            console.log('error', error)\r\n            resolve(true)\r\n          })\r\n      }\r\n    })\r\n  }\r\n  \r\n}\r\n","<!-- <div nz-row class=\"row-back small-size\" (click)=\"invoices.getInvoiceDetail().length ? goBack() : deleteInvoice(true)\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div> -->\r\n<nz-layout>\r\n  <nz-content>\r\n    <div nz-row class=\"row\" style=\"background: #f7f7f7\">\r\n      <div nz-col [nzSpan]=\"17\" class=\"col-left\" style=\"padding: 4px\">\r\n        <app-search (billDetail)=\"billDetailProcessing = $event\" [default_price_type]=\"default_price_type\"\r\n          (changePriceType)=\"changePriceType($event)\"\r\n          (goback)=\"invoices.getInvoiceDetail().length ? goBack() : deleteInvoice(true)\"\r\n          (checkPromotion)=\"getPromotions()\"></app-search>\r\n      </div>\r\n      <div nz-col [nzSpan]=\"7\" class=\"col-right\">\r\n        <div class=\"ant-table-body\" id=\"bill-2\">\r\n          <app-info-bill2 id=\"info-bill-2\" style=\"padding: 4px\" [invoices]=\"invoices\"\r\n            [employeeID]=\"invoices.getIdEmployee()\" [tableInfo]=\"tableInfo\" [customerID]=\"invoices.getIdPartner()\"\r\n            (changeDebt)=\"debt = $event\" (updateInvoice)=\"updateInvoice($event)\"\r\n            [total_earning_points]=\"getTotalEarningPoint()\">\r\n          </app-info-bill2>\r\n          <app-bill-detail2 id=\"bill-detail-2\" style=\"padding: 4px; width: calc(100% - 8px);\" \r\n            [printKitchenAll]=\"printKitchenAll\"\r\n            [billDetailProcessing]=\"billDetailProcessing\" [tableInfo]=\"tableInfo\" [invoices]=\"invoices\"\r\n            [checkPrinterKitchen]=\"checkPrinterKitchen\" [printer]=\"printer\" [stamp]=\"stamp\"\r\n            (resetBillDetailProcessing)=\"billDetailProcessing = $event\"\r\n            (showProductGiftType7)=\"showProductGiftType7 = true\" (updateInvoice)=\"updateInvoice($event)\"\r\n            (deletePromotion)=\"deletePromotion()\" (showProductGift)=\"showProductGift = true\">\r\n          </app-bill-detail2>\r\n        </div>\r\n        <app-payment-button2 style=\"padding: 4px\" [invoices]=\"invoices\" [statusInvoice]=\"statusInvoice\" [debt]=\"debt\"\r\n          (payment)=\"saveInvoice($event)\" (deleteInvoice)=\"deleteInvoice($event)\" [customer_class]=\"customer_class\"\r\n          (updateInvoice)=\"updateInvoice($event)\" (testPrint)=\"handlePrintTest()\"\r\n          (printKitchenAll)=\"handleEmit_printKitchenAll($event)\">\r\n        </app-payment-button2>\r\n      </div>\r\n    </div>\r\n  </nz-content>\r\n</nz-layout>\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGift\" [nzTitle]=\"'Chọn quà tặng'\"\r\n  (nzOnCancel)=\"showProductGift = false\" (nzOnOk)=\"showProductGift = false; getEarningpointPromotion()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-table #basicTable [nzData]=\"invoices.getInvoiceDetail()\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n      <thead>\r\n        <tr>\r\n          <th>{{\"Product name\" | translate}}</th>\r\n          <th>{{'Unit' | translate}}</th>\r\n          <th>{{'Quantity' | translate}}</th>\r\n          <th>{{'Unit price' | translate}}</th>\r\n          <th>{{'Functions' | translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let item of basicTable.data\">\r\n          <ng-container *ngIf=\"item.pmtype == 6\">\r\n            <tr>\r\n              <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                item.promotions_maximum }})</td>\r\n            </tr>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                <span *ngFor=\"let data of item.products\">\r\n                  {{data.name}}({{data.unit? data.unit: getUnit(data.units, data.ratio)}}) x{{data.quantity}} <br>\r\n                </span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <b>{{ 'List of gifted products' | translate }} :</b>\r\n              </td>\r\n            </tr>\r\n            <ng-container *ngFor=\"let data of item.products_gift\">\r\n              <tr>\r\n                <td>\r\n                  {{ data.name }}\r\n                  <ng-container *ngIf=\"data.lots\">\r\n                    <br> {{'Lot number' | translate}}:\r\n                    <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                      [(ngModel)]=\"data.id_lotproduct\">\r\n                      <nz-option *ngFor=\"let element of data.lots\"\r\n                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                        [nzValue]=\"element._id\"></nz-option>\r\n                    </nz-select>\r\n                  </ng-container>\r\n                </td>\r\n                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                <td>\r\n                  <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                  </nz-input-number>\r\n                </td>\r\n                <td>\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                  <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                </td>\r\n                <td>\r\n                  <nz-switch [(ngModel)]=\"data.choose\"\r\n                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.ptype == 5\">\r\n                <tr *ngFor=\"let combo of data.combos\">\r\n                  <td>- {{ combo.name }}\r\n                    <ng-container *ngIf=\"combo.lots\">\r\n                      <br> {{'Lot number' | translate}}:\r\n                      <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                        [(ngModel)]=\"combo.id_lotproduct\">\r\n                        <nz-option *ngFor=\"let element of combo.lots\"\r\n                          nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                          [nzValue]=\"element._id\"></nz-option>\r\n                      </nz-select>\r\n                    </ng-container>\r\n                  </td>\r\n\r\n                  <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                  <td>{{ combo.quantity }}</td>\r\n                  <td>\r\n                    {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                  </td>\r\n                  <td>\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </nz-table>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGiftType7\" [nzTitle]=\"'Chọn quà tặng'\"\r\n  (nzOnCancel)=\"showProductGiftType7 = false\" (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n      <thead>\r\n        <tr>\r\n          <th>{{\"Product name\" | translate}}</th>\r\n          <th>{{'Unit' | translate}}</th>\r\n          <th>{{'Quantity' | translate}}</th>\r\n          <th>{{'Unit price' | translate}}</th>\r\n          <th>{{'Functions' | translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let item of basicTable.data\">\r\n          <ng-container *ngIf=\"item.products_gift\">\r\n            <tr>\r\n              <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                item.promotions_maximum }})</td>\r\n            </tr>\r\n            <ng-container *ngFor=\"let data of item.products_gift\">\r\n              <tr>\r\n                <td>\r\n                  {{ data.name }}\r\n                  <ng-container *ngIf=\"data.lots\">\r\n                    <br> {{'Lot number' | translate}}:\r\n                    <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                      [(ngModel)]=\"data.id_lotproduct\">\r\n                      <nz-option *ngFor=\"let element of data.lots\"\r\n                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                        [nzValue]=\"element._id\"></nz-option>\r\n                    </nz-select>\r\n                  </ng-container>\r\n                </td>\r\n\r\n                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                <td>\r\n                  <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                  </nz-input-number>\r\n                </td>\r\n                <td>\r\n                  {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                  <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                </td>\r\n                <td>\r\n                  <nz-switch [(ngModel)]=\"data.choose\"\r\n                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.ptype == 5\">\r\n                <tr *ngFor=\"let combo of data.combos\">\r\n                  <td>- {{ combo.name }}\r\n                    <ng-container *ngIf=\"combo.lots\">\r\n                      <br> {{'Lot number' | translate}}:\r\n                      <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                        [(ngModel)]=\"combo.id_lotproduct\">\r\n                        <nz-option *ngFor=\"let element of combo.lots\"\r\n                          nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                          [nzValue]=\"element._id\"></nz-option>\r\n                      </nz-select>\r\n                    </ng-container>\r\n                  </td>\r\n\r\n                  <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                  <td>{{ combo.quantity }}</td>\r\n                  <td>\r\n                    {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                    <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                  </td>\r\n                  <td>\r\n                    <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </nz-table>\r\n  </ng-container>\r\n</nz-modal>\r\n","import { SearchModule } from './search/search.module';\r\nimport { PaymentButton2Module } from './payment-button2/payment-button2.module';\r\nimport { InfoBill2Module } from './info-bill2/info-bill2.module';\r\nimport { BillDetail2Module } from './bill-detail2/bill-detail2.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from './../../../ng-zorro-ant.module';\r\nimport { ReactiveFormsModule , FormsModule} from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CartComponent } from './cart.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component:  CartComponent,\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [CartComponent, ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    BillDetail2Module,\r\n    SearchModule,\r\n    InfoBill2Module,\r\n    PaymentButton2Module\r\n  ]\r\n})\r\nexport class CartModule { }\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-customer-profile',\r\n  templateUrl: './customer-profile.component.html',\r\n  styleUrls: ['./customer-profile.component.scss']\r\n})\r\nexport class CustomerProfileComponent {\r\n  @Input(\"id\") customerID;\r\n  @Input(\"showDrawerCustomerInfo\") showDrawerCustomerInfo;\r\n  @Output(\"closeInfoCustomer\") closeInfoCustomer = new EventEmitter<any>();\r\n\r\n  customer: any = {}\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe\r\n  ) { }\r\n\r\n  ngOnChanges(change: SimpleChanges) {\r\n    // lấy dữ liệu khách hàng\r\n    this.initCustomer(change.customerID.currentValue)\r\n  }\r\n\r\n  initCustomer(id_customer: string) {\r\n    if (id_customer != 'id_retail') {\r\n      let customer = this.vhQueryCafe.getlocalCustomer(id_customer)\r\n      this.customer = customer ? customer : {}\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.closeInfoCustomer.emit(false)\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" [nzVisible]=\"showDrawerCustomerInfo\"\r\n  (nzOnClose)=\"goBack()\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n      </div>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer type' | translate}}:</b><span> {{(customer.isBusiness ? 'Business/Business household' : 'Individual') | translate}}</span>\r\n      </div>\r\n\r\n      <ng-container *ngIf=\"customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Tax code' | translate}}:</b><span> {{customer.taxcode}}</span>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"!customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Gender' | translate}}:</b><span> {{customer.gender | translate}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n        </div>\r\n      </ng-container>\r\n      \r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CustomerProfileComponent } from './customer-profile.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CustomerProfileComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    CustomerProfileComponent\r\n  ]\r\n})\r\nexport class CustomerProfileModule { }\r\n","import { VhComponent } from './../../../../../components/vh-component/vh-component';\r\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAuth, VhQueryCafe, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-info-bill2',\r\n  templateUrl: './info-bill2.component.html',\r\n  styleUrls: ['./info-bill2.component.scss']\r\n})\r\nexport class InfoBill2Component implements OnInit, OnChanges {\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices;\r\n  // ID nhân viên đang order\r\n  @Input() employeeID: string;\r\n  // thông tin bàn đang order\r\n  @Input() tableInfo: any = {};\r\n  // ID khách hàng order\r\n  @Input() customerID: string;\r\n  @Input() total_earning_points : any;\r\n  @Output() changeDebt: EventEmitter<boolean> = new EventEmitter() // trạng thái cho phép nợ bị thay đổi\r\n  // cập nhật hóa đơn khi có sự thay đổi\r\n  @Output() updateInvoice: EventEmitter<any> = new EventEmitter()\r\n  employeeList: any[] = []\r\n  customerList: any[] = []\r\n  customerType: 1 | 2 | 3;\r\n  customer = \"\";\r\n  customerSearchList = []\r\n  show_box_search: boolean = false;\r\n  point_validity  = 0\r\n  // Customer\r\n  showDrawerAddCustomer: boolean = false\r\n  showDrawerCustomerInfo: boolean = false\r\n  showDrawerAddRetail: boolean = false\r\n  constructor(\r\n    public vhAuth: VhAuth,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private lang: LanguageService,\r\n    private vhAlgorithm: VhAlgorithm,\r\n    private nzModalService: NzModalService,\r\n    private vhComponent:VhComponent,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initData();\r\n  }\r\n\r\n  ngOnChanges({ customerID }: SimpleChanges) {\r\n    if (customerID)\r\n      if (customerID.previousValue) {\r\n        if (customerID.previousValue != customerID.currentValue) {\r\n          if (this.customerID == \"id_retail\") {\r\n            this.customerType = 1\r\n          } else {\r\n            this.customerType = 2;\r\n            this.customer = this.vhQueryCafe.getlocalCustomer(this.customerID).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.customerID).phone;\r\n            setTimeout(() => {\r\n              this.point_validity =  this.vhQueryCafe.getlocalCustomerPoints(this.customerID);\r\n              console.log(this.point_validity);\r\n            }, 200);\r\n          }\r\n        }\r\n      }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  initData() {\r\n    // console.log('initData');\r\n\r\n    // nhân viên\r\n    this.employeeList = this.vhAuth.getlocalEmployees();\r\n    // khách hàng\r\n    this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    this.customerSearchList = this.customerList;\r\n    //console.log('customerID',this.customerID);\r\n\r\n    if (this.customerID == \"id_retail\") {\r\n      //  console.log('1');\r\n      this.customerType = 1\r\n    } else {\r\n      // console.log('2');\r\n      this.customer = this.vhQueryCafe.getlocalCustomer(this.customerID).name + ' - ' + this.vhQueryCafe.getlocalCustomer(this.customerID).phone;\r\n      //  console.log('customer',this.customer);\r\n\r\n      this.customerType = 2\r\n      setTimeout(() => {\r\n        this.point_validity =  this.vhQueryCafe.getlocalCustomerPoints(this.customerID);\r\n        console.log(this.point_validity);\r\n      }, 200);\r\n    }\r\n\r\n  }\r\n\r\n  changeEmployee(ev) {\r\n    this.invoices.setIdEmployee(ev)\r\n    this.updateInvoice.emit({ id_employee: ev })\r\n  }\r\n  changeCustomerType(type) {\r\n    if (type == 1) {\r\n      this.customerID = \"id_retail\"\r\n      this.invoices.setIdPartner(\"id_retail\")\r\n      this.invoices.setTaxBuyerDisplayName('Người mua không lấy hoá đơn');\r\n      this.invoices.setTaxBuyerLegalName('');\r\n      this.invoices.setTaxBuyerTaxCode('');\r\n      this.invoices.setTaxBuyerAddressLine('');\r\n      this.invoices.setTaxBuyerEmail('');\r\n      this.updateInvoice.emit({ id_customer: 'id_retail', tax_buyerDisplayName: this.invoices.getTaxBuyerDisplayName(), tax_buyerLegalName: this.invoices.getTaxBuyerLegalName(), tax_buyerTaxCode: this.invoices.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.invoices.getTaxBuyerAddressLine(), tax_buyerEmail: this.invoices.getTaxBuyerEmail() })\r\n      this.changeDebt.emit(false)\r\n      if (this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill) {\r\n        this.vhComponent.alertMessageDesktop('success',this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\") + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill).name)\r\n        this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), 'id_retail').discount)\r\n      }\r\n      else this.invoices.setDiscount(0);\r\n\r\n      this.updateServiceTime();\r\n    } else if (type == 2 && this.invoices.getRetailName()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.lang.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.lang.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.clearRetailCustomer()\r\n          this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n          this.customerSearchList = this.customerList\r\n          setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n        },\r\n        nzOnCancel: () => { this.customerType = 1 },\r\n      })\r\n    }  else if (type == 2) {\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n    }\r\n  }\r\n  clearRetailCustomer() {\r\n    this.invoices.setRetailName('')\r\n    this.invoices.setRetailPhone('')\r\n    this.invoices.setRetailAddress('')\r\n  }\r\n  blurCustomer() {\r\n    setTimeout(() => {\r\n      if (this.customerID == \"id_retail\") this.customerType = 1;\r\n    }, 500)\r\n  }\r\n  changeCustomer(ev) {\r\n    this.invoices.setIdPartner(ev)\r\n    const localCustomer = this.vhQueryCafe.getlocalCustomer(ev);\r\n    this.invoices.setTaxBuyerDisplayName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerLegalName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerTaxCode(localCustomer?.taxcode || '');\r\n    this.invoices.setTaxBuyerAddressLine(localCustomer?.address || '');\r\n    this.invoices.setTaxBuyerEmail(localCustomer?.email || '');\r\n    this.updateInvoice.emit({ id_customer: ev, tax_buyerDisplayName: this.invoices.getTaxBuyerDisplayName(), tax_buyerLegalName: this.invoices.getTaxBuyerLegalName(), tax_buyerTaxCode: this.invoices.getTaxBuyerTaxCode(), tax_buyerAddressLine: this.invoices.getTaxBuyerAddressLine(), tax_buyerEmail: this.invoices.getTaxBuyerEmail() })\r\n    let debt = this.vhQueryCafe.getlocalCustomer(ev).debt_enable\r\n    this.changeDebt.emit(debt ? debt : false)\r\n    // if (this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill) {\r\n    //   this.vhComponent.alertMessageDesktop('success',this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\")+ \" \" + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill).name)\r\n    //   this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), ev).discount)\r\n    // }\r\n    // else this.invoices.setDiscount(0)\r\n    this.updateServiceTime();\r\n  }\r\n  // Customer process\r\n  openAddCustomer() {\r\n    if (this.customerType == 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCustomer = true\r\n  }\r\n  closeAddCustomer(ev) {\r\n    if (ev.reload) { // restart customer list\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      this.customerID = ev.value._id;\r\n      this.changeCustomer(ev.value._id)\r\n    }\r\n    this.showDrawerAddCustomer = false\r\n  }\r\n  openCustomerInfo() {\r\n    this.showDrawerCustomerInfo = true\r\n  }\r\n  closeCustomerInfo(ev) {\r\n    this.showDrawerCustomerInfo = false\r\n  }\r\n\r\n  searchCustomer(event) {\r\n    this.customerList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(event.toString().toLowerCase()), this.customerSearchList, ['name', 'phone'])\r\n  }\r\n  //Lưu thông tin khách lẻ\r\n  saveRetailInfo(result) {\r\n    if (result) {\r\n      this.invoices.setRetailName(result.retail_name)\r\n      this.invoices.setRetailPhone(result.retail_phone)\r\n      this.invoices.setRetailAddress(result.retail_address)\r\n      this.updateInvoice.emit({ id_customer: 'id_retail' })\r\n    }\r\n    this.showDrawerAddRetail = false\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div class=\"info-bill\">\r\n    <div class=\"title\">\r\n        {{tableInfo}} - {{ invoices.getBillCode()}}\r\n    </div>\r\n    <div class=\"bill-info\">\r\n        <div class=\"bill-info-employee\">\r\n            <nz-select nzBorderless nzShowSearch nzPlaceHolder=\"{{'Select employee' | translate}}\"\r\n                [(ngModel)]=\"employeeID\" (ngModelChange)=\"changeEmployee($event)\">\r\n                <nz-option *ngFor=\"let item of employeeList; trackBy:myTrackByFunction\" [nzValue]=\"item._id\"\r\n                    [nzLabel]=\"item.name\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div class=\"bill-info-date\">\r\n            {{invoices.getDate() | date : 'dd/MM/yyyy HH:mm'}} <i nz-icon nzType=\"calendar\" nzTheme=\"outline\"></i>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"customer-type\">\r\n        <nz-radio-group nzName=\"radiogroup\" [(ngModel)]=\"customerType\" (ngModelChange)=\"changeCustomerType($event)\" ks>\r\n            <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n            <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n            <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n        </nz-radio-group>\r\n        <div class=\"btn-add\">\r\n            <button nz-button nzType=\"text\" nzShape=\"circle\" (click)=\"openAddCustomer();show_box_search = false\">\r\n                <i [nzType]=\"invoices.getRetailName() ? 'eye':'plus'\" nz-icon nzTheme=\"outline\"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <ng-container *ngIf=\"customerType == 1 && invoices.getRetailName()\">\r\n        {{invoices.getRetailName()}} - {{invoices.getRetailPhone()}} {{invoices.getRetailAddress() ? '-':\r\n        ''}} {{invoices.getRetailAddress()}}\r\n    </ng-container>\r\n    <div class=\"customer-select\" *ngIf=\"customerType == 2\">\r\n        <nz-select id=\"select-customer\" nzShowSearch nzPlaceHolder=\"{{'Select customer' | translate}}\"\r\n            [(ngModel)]=\"customerID\" (ngModelChange)=\"changeCustomer($event)\" (nzBlur)=\"blurCustomer()\">\r\n            <nz-option *ngFor=\"let item of customerList\" [nzValue]=\"item._id\" nzLabel=\"{{item.name}} - {{item.phone}} \">\r\n            </nz-option>\r\n        </nz-select>\r\n        <i [ngClass]=\"customerID != '' ? 'active' : 'deactive'\" style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\"\r\n            nzTheme=\"outline\" (click)=\"showDrawerCustomerInfo = true\"></i>\r\n\r\n    </div>\r\n    <div nz-col nzSpan=\"24\" *ngIf=\"customerType == 2\"\r\n        style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n        <span>\r\n            {{'Accumulated points' | translate}} : <b>{{point_validity ? point_validity : 0 }}</b>\r\n        </span>\r\n        <span>\r\n            {{'Plus' | translate}} : <b>{{total_earning_points}}</b>\r\n        </span>\r\n    </div>\r\n    <div *ngIf=\"customerType == 3\" style=\"display: flex; justify-content: space-between;\">\r\n        <app-search-customer [id_customer]=\"customerID\"\r\n            (closeAndReceiveCustomer)=\"changeCustomer($event)\"></app-search-customer>\r\n        <i (click)=\"openCustomerInfo()\"\r\n            [ngClass]=\"customerID !='id_retail' ? 'active' : 'deactive'\"\r\n            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n    </div>\r\n</div>\r\n\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCustomer\" [showDrawerAddCustomer]=\"showDrawerAddCustomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\">\r\n</app-add-customer>\r\n<!-- --------------------customer info---------------------- -->\r\n<app-customer-profile *ngIf=\"showDrawerCustomerInfo\" [showDrawerCustomerInfo]=\"showDrawerCustomerInfo\"\r\n    (closeInfoCustomer)=\"closeCustomerInfo($event)\" [id]=\"customerID\">\r\n</app-customer-profile>\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n    [retail_name]=\"invoices.getRetailName()\" [retail_phone]=\"invoices.getRetailPhone()\"\r\n    [retail_address]=\"invoices.getRetailAddress()\" (closeAddCustomer)=\"saveRetailInfo($event)\"></app-retail-info>","import { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { CustomerProfileModule } from './../customer-profile/customer-profile.module';\r\nimport { AddCustomerModule } from './../add-customer/add-customer.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { InfoBill2Component } from './info-bill2.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { RetailInfoComponent } from '../retail-info/retail-info.component';\r\nimport { SearchModule } from 'src/app/cafe/components/search/search.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    InfoBill2Component, RetailInfoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    AddCustomerModule,\r\n    CustomerProfileModule,\r\n    KeyboardModule,\r\n    ScrollingModule,\r\n    ReactiveFormsModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    InfoBill2Component\r\n  ]\r\n})\r\nexport class InfoBill2Module { }\r\n","import { VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { Component, EventEmitter, HostListener, Input, Output } from '@angular/core';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-payment-button2',\r\n  templateUrl: './payment-button2.component.html',\r\n  styleUrls: ['./payment-button2.component.scss']\r\n})\r\nexport class PaymentButton2Component {\r\n  // bắt sự kiện key press\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if (event.key == \"Enter\" && this.openBillStatus) {\r\n      document.getElementById(\"order-complete\").click()\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n    } else if ([\"F1\", \"F2\", \"Delete\", \"Enter\"].includes(event.key)) {\r\n\r\n      switch (event.key) {\r\n        case \"F1\": document.getElementById(\"order-and-print\").click(); break;\r\n        case \"F2\": document.getElementById(\"order\").click(); break;\r\n        case \"Delete\": document.getElementById(\"delete-invoice\").click(); break;\r\n      }\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n  checkPrinter: boolean = false;\r\n  checkPrinterKitchen: boolean = false;\r\n  /** thuộc tính máy in */\r\n  printer: any;\r\n  // đối tượng hóa đơn\r\n  @Input() invoices: VhOrderInvoices\r\n  // trạng thái hóa đơn - updating/Đang cập nhật hóa đơn - deleting/đang xóa hóa đơn\r\n  @Input() statusInvoice: any = {}\r\n  // khách hàng được cho nợ hay không?\r\n  @Input() debt: boolean;\r\n  @Input()  customer_class: any;\r\n  // tiến hành thanh toán hóa đơn\r\n  @Output() payment: EventEmitter<\"print\" | \"notPrint\"> = new EventEmitter()\r\n  // tiến hành xóa hóa đơn\r\n  @Output() deleteInvoice: EventEmitter<boolean> = new EventEmitter()\r\n  // tiến hành cập nhật hóa đơn\r\n  @Output() updateInvoice: EventEmitter<boolean> = new EventEmitter()\r\n \r\n  @Output() testPrint: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() printKitchenAll: EventEmitter<boolean> = new EventEmitter()\r\n\r\n  status: \"print\" | \"notPrint\";\r\n  openBillStatus: boolean = false\r\n  constructor(\r\n    private vhQueryCafe:VhQueryCafe,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  openInvoice(print: \"print\" | \"notPrint\" = \"print\") {\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.openBillStatus = true\r\n    this.invoices.setSubTotal()\r\n    this.status = print\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    // kiểm tra máy in\r\n    let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : null\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable\r\n    }\r\n    let printer_kitchen = this.vhQueryCafe.getLocalPrintPage('page_desktop_kitchen')\r\n    this.checkPrinterKitchen =  printer_kitchen ? printer_kitchen.print_sizes[printer_kitchen.print_sizes.findIndex(e => e._id == printer_kitchen.print_size_default)].enable : null\r\n  }\r\n\r\n  delete() {\r\n    this.deleteInvoice.emit(true)\r\n  }\r\n\r\n  updateInvoices(ev) {\r\n    this.updateInvoice.emit(true)\r\n  }\r\n\r\n  saveInvoice() {\r\n    this.payment.emit(this.status)\r\n  }\r\n\r\n  handleCancel() {\r\n    this.openBillStatus = false\r\n\r\n    delete this.status;\r\n  }\r\n\r\n}\r\n","<div nz-row>\r\n    <div style=\"padding: 0 0 8px 0\" class=\"payment-btn\" nz-col nzSpan=\"12\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button class=\"order\" (click)=\"testPrint.emit(true)\">\r\n            {{\"Print out for customer\" | translate}}\r\n        </button>\r\n\r\n    </div>\r\n    <div *ngIf=\"checkPrinterKitchen\" style=\"padding: 0 0 8px 0\" class=\"payment-btn\" nz-col nzSpan=\"12\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button id=\"order\" class=\"order\"\r\n            (click)=\"printKitchenAll.emit(true)\">\r\n            {{'Print all dishes to kitchen' | translate}}\r\n        </button>\r\n    </div>\r\n    <div class=\"payment-btn\" style=\"padding: 0 0 8px 0\" nz-col nzSpan=\"12\">\r\n        <button nz-button [nzLoading]=\"statusInvoice.deleting\" id=\"delete-invoice\" class=\"delete\" nz-popconfirm\r\n            nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"delete()\" nzPopconfirmPlacement=\"top\">\r\n            {{\"Delete\" | translate}} (DEL)\r\n        </button>\r\n    </div>\r\n    <div class=\"payment-btn\" style=\"padding: 0 0 8px 0\" nz-col [nzSpan]=\"checkPrinterKitchen ? '12' : '24'\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" nz-button [nzLoading]=\"statusInvoice.updating\"\r\n            id=\"order-and-print\" class=\"order-and-print\" (click)=\"openInvoice('print')\">\r\n            {{\"Pay & Print\"|translate}} (F1)\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<!-- ---------------------hiển thị thông tin thanh toán------------------- -->\r\n<nz-modal [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooterPrintKitchen\"  [(nzVisible)]=\"openBillStatus\"\r\n    (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"saveInvoice()\">\r\n    <ng-container *nzModalContent>\r\n        <app-bill1 [invoices]=\"invoices\" [debt]=\"debt\" [tax]=\"invoices.getTax()\"  [customer_class]=\"customer_class\"\r\n            [paymentType]=\"invoices.getPaymentType() == 3 ? [invoices.getPaymentType(), invoices.getIdWallet()]: [invoices.getPaymentType()]\"\r\n            (updateInvoice)=\"updateInvoices($event)\">\r\n        </app-bill1>\r\n    </ng-container>\r\n    <ng-template #modalFooterPrintKitchen>\r\n        <button nz-button class=\"nz-hover-border\" id=\"order-complete\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white); width: 100%;height: 44px; font-size: 0.9rem;\"\r\n            [nzLoading]=\"statusInvoice['payment']\" class=\"nz-hover-border-green\" (click)=\"saveInvoice()\">\r\n            {{\"Complete\" | translate}} (Enter)</button>\r\n    </ng-template>\r\n</nz-modal>","import { Bill1Module } from './../bill1/bill1.module';\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PaymentButton2Component } from './payment-button2.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PaymentButton2Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    Bill1Module\r\n  ],\r\n  exports: [\r\n    PaymentButton2Component\r\n  ]\r\n})\r\nexport class PaymentButton2Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-retail-info',\r\n  templateUrl: './retail-info.component.html',\r\n  styleUrls: ['./retail-info.component.scss']\r\n})\r\nexport class RetailInfoComponent implements OnInit {\r\n  @Input(\"showDrawerAddRetail\") showDrawerAddRetail: boolean = false;\r\n  @Input(\"retail_name\") retail_name: string = '';\r\n  @Input(\"retail_phone\") retail_phone: string = '';\r\n  @Input(\"retail_address\") retail_address: string = '';\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n\r\n  constructor() { }\r\n  ngOnInit(): void {\r\n    this.initaddRetailForm()\r\n  }\r\n  addRetailForm: FormGroup;\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? this.addRetailForm.value : false);\r\n  }\r\n  initaddRetailForm() {\r\n    this.addRetailForm = new FormGroup({\r\n      retail_name: new FormControl(this.retail_name, Validators.compose([Validators.required])),\r\n      retail_phone: new FormControl(this.retail_phone, Validators.compose([Validators.required, Validators.minLength(6)])),\r\n      retail_address: new FormControl(this.retail_address),\r\n    });\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer retail\" | translate}}'\r\n    [nzVisible]=\"showDrawerAddRetail\" [nzFooter]=\"footerAddRetail\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"addRetailForm\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_name\" nz-input\r\n                                placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n                            <ng-template #combineTplName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Retail name is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                        <nz-input-group>\r\n                            <input class=\"phone\" formControlName=\"retail_phone\" type=\"tel\" nz-input\r\n                                placeholder=\"{{'Enter customer phone' | translate}}\" minlength=\"6\" required />\r\n                            <ng-template #combineTplPhone let-control>\r\n                                <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Address' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_address\" nz-input\r\n                                placeholder=\"{{'Enter address' | translate}}\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddRetail>\r\n        <div class=\"footerAddRetail\" style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n            <button [disabled]=\"addRetailForm.invalid\" [ngStyle]=\"{opacity: addRetailForm.invalid ? 0.5 : 1}\" nz-button\r\n                (click)=\"close(true)\">{{\"Add\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-search-combo2',\r\n  templateUrl: './search-combo2.component.html',\r\n  styleUrls: ['./search-combo2.component.scss'],\r\n})\r\nexport class SearchCombo2Component implements OnInit {\r\n  // trả về product được chọn và đã xử lý cho search\r\n  @Output('closeSearchCombosList') closeSearchCombosList: EventEmitter<any> =\r\n    new EventEmitter();\r\n  /**Danh sách combo */\r\n  public combosList: any[] = [];\r\n  /**Danh sách combo đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /**Combo được chọn để xử lý */\r\n  choiceCombos: any = {};\r\n  id_branch = this.vhQueryCafe.getDefaultBranch()._id\r\n  auto_hidden_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_hidden_lot;\r\n  auto_select_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .auto_select_lot;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private functionService: FunctionService,\r\n    public vhAuth: VhAuth\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    let dispatcher_done =\r\n      !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable;\r\n    this.combosList = this.vhQueryCafe\r\n      .getlocalDetailProducts(5)\r\n      .filter((item) => !item.delete_hidden)\r\n      .map((e) => {\r\n        this.handleLotsOfCombo(e.combos.filter((lot) => lot.lots));\r\n        return {\r\n          ...e,\r\n          ...e.units[0],\r\n          dispatcher_done: dispatcher_done,\r\n          combos: e.combos.map((combo) => {\r\n            return {\r\n              ...combo,\r\n              unit: this.getUnit(combo.units, combo.ratio),\r\n              ptype: combo.type\r\n            };\r\n          }),\r\n        };\r\n      });\r\n    this.combosList = this.vhAlgorithm.sortVietnamesebyASC(\r\n      this.combosList,\r\n      'name'\r\n    );\r\n    this.searchList = this.functionService.transformProd5(this.combosList);\r\n  }\r\n\r\n  @Input() search_value = ''\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    let dispatcher_done =\r\n      !this.vhQueryCafe.getLocalAppSettingNameBranch('dispatchers_enable')\r\n        .dispatchers_enable;\r\n    this.combosList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(this.search_value.toLocaleLowerCase()), this.vhQueryCafe.getlocalDetailProducts(5).filter(item => !item.delete_hidden), ['name']).map((e) => {\r\n      this.handleLotsOfCombo(e.combos.filter((lot) => lot.lots));\r\n      return {\r\n        ...e,\r\n        ...e.units[0],\r\n        dispatcher_done: dispatcher_done,\r\n        combos: e.combos.map((combo) => {\r\n          return {\r\n            ...combo,\r\n            unit: this.getUnit(combo.units, combo.ratio),\r\n            ptype: combo.type\r\n          };\r\n        }),\r\n      };\r\n    });\r\n\r\n    this.combosList = this.vhAlgorithm.sortVietnamesebyASC(this.combosList, 'name')\r\n    this.searchList = this.functionService.transformProd5(this.combosList);\r\n  }\r\n  handleLotsOfCombo(combos) {\r\n    combos = this.vhAlgorithm.sortDatebyASC(combos, 'date_exp');\r\n    for (let i of combos) {\r\n      if (i.lots.length != 0) {\r\n        if (this.auto_hidden_lot)\r\n          i.lots = i.lots.filter(\r\n            (e) => new Date(e.date_exp).getTime() >= new Date().getTime()\r\n          );\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(i.lots, 'date_exp');\r\n        // if (this.auto_select_lot && min_date_exp[0])\r\n        i['id_lotproduct'] = min_date_exp[0]._id;\r\n      }\r\n    }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index;\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchCombosList.emit(false);\r\n  }\r\n  /**Chọn combo\r\n   * @param value combo đang được chọn\r\n   */\r\n  selectCombos(value) {\r\n    this.choiceCombos = {\r\n      ...value,\r\n      quantity: 1,\r\n      note: '',\r\n      price_origin: value.price,\r\n      price: value.price,\r\n      ptype: 5,\r\n    };\r\n\r\n    if (this.choiceCombos) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\r\n          '.price-' + value._id\r\n        );\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  editPrice: any = {};\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue();\r\n    this.choiceCombos.price = price ? parseFloat(price) : 0;\r\n    this.choiceCombos.quantity =\r\n      this.choiceCombos.quantity > 0 ? this.choiceCombos.quantity : 1;\r\n  }\r\n  chooseCombos() {\r\n    this.showOptions = false;\r\n    if (this.choiceCombos['quantity']) {\r\n      this.choiceCombos['combos'] = this.choiceCombos['combos'].map((item) => {\r\n        return {\r\n          ...item,\r\n          id_category: this.vhQueryCafe.getlocalProduct(item.id_product)\r\n            .id_category,\r\n        };\r\n      });\r\n\r\n      this.closeSearchCombosList.emit(this.choiceCombos);\r\n    }\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  changeLot(e, item) {\r\n    item.lot_number = item.lots.find(find => find._id == e).lot_number\r\n  }\r\n\r\n  getUnit(units, ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  increaseQuantityToppings(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity + 1\r\n  }\r\n  reduceQuantityToppings(item) {\r\n    if (item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity - 1\r\n  }\r\n}\r\n","<div id=\"search-combos-popup\">\r\n  <nz-row nz-row style=\"height: 100%;\">\r\n    <div nz-col nzSpan=\"24\">\r\n      <cdk-virtual-scroll-viewport [itemSize]=\"226\" class=\"infinite-container ant-table-body\">\r\n        <div class=\"combos-area\" *cdkVirtualFor=\"let rows of searchList; trackBy: myTrackByFunction\">\r\n          <div class=\"combos-area-item\" *ngFor=\"let prod of rows; trackBy: myTrackByFunction\"\r\n            (click)=\"selectCombos(prod)\" title=\"{{prod.name}}\">\r\n            <nz-card class=\"combos-area-item-card\" nzHoverable>\r\n              <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\" />\r\n              <div class=\"combos-area-item-card-title\">{{prod.name}}</div>\r\n              <div class=\"combos-area-item-card-subtitle\">{{vhAlgorithm.vhcurrencyunit(prod.price)}}\r\n              </div>\r\n            </nz-card>\r\n          </div>\r\n        </div>\r\n      </cdk-virtual-scroll-viewport>\r\n    </div>\r\n  </nz-row>\r\n</div>\r\n\r\n<!-- ------------select combos---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceCombos.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseCombos()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row class=\"option-modal\">\r\n      <div nz-row style=\"width: 100%;\">\r\n        <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n          <input [ngClass]=\"'price-' + choiceCombos._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceCombos)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n            [value]=\"vhAlgorithm.vhcurrencyunit(choiceCombos.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n          <s *ngIf=\"choiceCombos.price_origin > choiceCombos.price\"\r\n            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceCombos.price_origin)}}</s>\r\n        </div>\r\n        <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n          style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceCombos.quantity <= 1\"\r\n            (click)=\"reduceQuantityToppings(choiceCombos)\"\r\n            [ngClass]=\"{'btn-activate': choiceCombos.quantity > 0, 'btn-disabled': choiceCombos.quantity <= 1}\">\r\n            <i nz-icon nzType=\"minus\"></i>\r\n          </button>\r\n          <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceCombos)\"\r\n            [(ngModel)]=\"choiceCombos.quantity\">\r\n          </nz-input-number>\r\n          <button nz-button nzType=\"default\" [disabled]=\"choiceCombos.quantity > 9999999998\"\r\n            (click)=\"increaseQuantityToppings(choiceCombos)\"\r\n            [ngClass]=\"{'btn-activate': choiceCombos.quantity <= 9999999998, 'btn-disabled': choiceCombos.quantity > 9999999998}\">\r\n            <i nz-icon nzType=\"plus\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n          {{vhAlgorithm.vhcurrencyunit(choiceCombos.price * choiceCombos.quantity)}}\r\n        </div>\r\n        <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n          <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceCombos.note\" [ngModelOptions]=\"{standalone: true}\"\r\n            nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n        </div>\r\n      </div>\r\n      <ng-container *ngFor=\"let combo of choiceCombos.combos\">\r\n          <!-- chọn lô - hsd -->\r\n        <div *ngIf=\"combo.lots\">\r\n          <b>{{'Select lot and expiry date for combo components' | translate}}</b><br>\r\n          <span>{{combo.name}} ({{combo.unit}})</span>\r\n          <nz-radio-group [(ngModel)]=\"combo.id_lotproduct\" (ngModelChange)=\"changeLot($event, combo)\"\r\n            style=\"width:100%;padding: 8px 0;\">\r\n            <div nz-row *ngFor=\"let lot of combo.lots\">\r\n              <div nz-col nzSpan=\"24\">\r\n                <label class=\"radio-purchase\" nz-radio [nzValue]=\"lot._id\" style=\"width:100%;\">\r\n                  <div nz-row>\r\n                    <div nz-col nzSpan=\"6\">\r\n                      {{lot.lot_number}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                      NSX: {{lot.date_mfg | date : 'dd/MM/yyyy'}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                      HSD: {{lot.date_exp | date : 'dd/MM/yyyy'}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                      {{'Stock' | translate}}:\r\n                      <span style=\" color: var(--ion-color-vh-orange)\">{{lot.quantity_branch[id_branch]/combo.ratio\r\n                        | number : '1.0-2'}}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                </label>\r\n              </div>\r\n\r\n            </div>\r\n          </nz-radio-group>\r\n        </div>\r\n      </ng-container>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterSelectFood>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseCombos()\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchCombo2Component } from './search-combo2.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchCombo2Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchCombo2Component\r\n  ]\r\n})\r\nexport class SearchCombo2Module { }","import { Component, OnInit, Output, EventEmitter, Input, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n@Component({\r\n  selector: 'app-search-product2',\r\n  templateUrl: './search-product2.component.html',\r\n  styleUrls: ['./search-product2.component.scss']\r\n})\r\nexport class SearchProduct2Component implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input(\"promotions\") promotions: any[] = [];\r\n  // trả về product được chọn và đã xử lý cho search\r\n  @Output(\"closeSearchProductList\") closeSearchProductList: EventEmitter<any> = new EventEmitter();\r\n  /** Danh sách món ăn */\r\n  public foodList: any[] = []\r\n  /** Danh sách món ăn đang được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Món ăn đang được chọn */\r\n  public choiceFood: any = {};\r\n  /** Danh sách menu */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }]\r\n  id_branch = this.vhQueryCafe.getDefaultBranch()._id\r\n  indexTab: number = 0;\r\n  showOptions: boolean = false;\r\n  auto_hidden_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_hidden_lot\r\n  auto_select_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  @Input() default_price_type: number\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private functionService: FunctionService, \r\n    public vhAuth : VhAuth,\r\n    private vhComponent:VhComponent\r\n  ) { }\r\n  ngOnInit(): void {\r\n    this.getMenu()\r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  goBack() {\r\n    this.closeSearchProductList.emit(false);\r\n  }\r\n\r\n\r\n  getMenu() {\r\n    let products = this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(e => !e.delete_hidden).map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, item.units.find(u => u.default) ? item.units.find(u => u.default).ratio : 1)\r\n      return { ...item, ...unit }\r\n    })\r\n    this.foodList = products\r\n\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1 || item.type == 3).map(e => {\r\n      e.status = products.find(pro => pro.id_category == e._id) ? true : false\r\n      return { ...e }\r\n    })\r\n    this.list_menu.filter(cate => cate.status).forEach(item => this.listTabs.push(item));\r\n\r\n    this.searchList = this.functionService.transformProd5(this.foodList);\r\n  }\r\n\r\n  @Input() search_value = ''\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    \r\n    let products = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(this.search_value.toLocaleLowerCase()), this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(item => !item.delete_hidden), ['name', 'item_code']).map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, item.units.find(u => u.default) ? item.units.find(u => u.default).ratio : 1)\r\n      return { ...item, ...unit }\r\n    })\r\n    this.foodList = products\r\n\r\n    // this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1 || item.type == 3).map(e => {\r\n    //   e.status = products.find(pro => pro.id_category == e._id) ? true : false\r\n    //   return { ...e }\r\n    // })\r\n    // this.list_menu.filter(cate => cate.status).forEach(item => this.listTabs.push(item));\r\n\r\n    this.searchList = this.functionService.transformProd5(this.foodList);\r\n  }\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    if (!item.ptype) {\r\n      let price = this.editPrice['price-' + item._id].getRawValue()\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity = this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1\r\n    } else {\r\n      let price = this.editPrice['topping-' + item._id].getRawValue()\r\n      let index = this.choiceFood.toppings.findIndex(element => element._id == item._id)\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity = this.choiceFood.toppings[index].quantity > 0 ? this.choiceFood.toppings[index].quantity : 1\r\n      }\r\n    }\r\n  }\r\n\r\n  chooseProduct(item) {\r\n    this.closeSearchProductList.emit(item)\r\n  }\r\n\r\n  /** Chọn món ăn để xử lý\r\n   * @param value món ăn được chọn\r\n   */\r\n  selectFoods(value) {\r\n    // console.log(value);\r\n\r\n    // this.checkPromotions(value._id) // kiểm tra dữ liệu khuyến mãi\r\n    //   .then(async (promotionProd) => {\r\n    this.choiceFood = {\r\n      toppings: JSON.parse(JSON.stringify(value.toppings || [])), quantity: 1, note: \"\", price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, name: value.name, ptype: value.type, properties: value.properties, _id: value._id,\r\n      price: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, ratio: 1, units: value.units\r\n    }\r\n    if (value.lot_number) this.choiceFood['lot_number'] = value.lot_number;\r\n    if (value.lots) this.choiceFood['lots'] = value.lots.filter( e => !e.hidden);\r\n    if (value.id_lotproduct) this.choiceFood['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) this.choiceFood.id_subproduct = value.id_subproduct\r\n    // Lưu trữ các properties đã chon\r\n    if (this.choiceFood.properties) {\r\n      // sao chép mảng giá trị chọn\r\n      this.choiceFood.properties.forEach(element => {\r\n        element.active = true;\r\n        element.selectedValue = element.value[0]\r\n      });\r\n    }\r\n    // Kiểm tra topping\r\n    if (this.choiceFood.toppings) {\r\n      for (let topping of this.choiceFood.toppings) {\r\n        let data = this.vhQueryCafe.getlocalProduct(topping.id_product)\r\n        topping.quantity = topping.quantity\r\n        topping.name = data.name\r\n        topping.price_origin = this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price\r\n        topping.price = this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price\r\n        topping.ratio = 1\r\n        topping.ptype = 4\r\n        topping._id = topping.id_product\r\n      }\r\n    }\r\n    if (this.choiceFood.type == 3 && this.choiceFood.lots) {\r\n      this.choiceFood.lots = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots, 'date_exp')\r\n      if (this.auto_hidden_lot) this.choiceFood.lots = this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime())\r\n\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime()), 'date_exp')\r\n\r\n        if (min_date_exp.length) {\r\n          this.choiceFood['id_lotproduct'] = min_date_exp[0]._id;\r\n          this.choiceFood['lot_number'] = min_date_exp[0].lot_number;\r\n        }\r\n\r\n    }\r\n\r\n    if (this.choiceFood) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n        // if (this.choiceFood.toppings) {\r\n        //   this.choiceFood.toppings.forEach(topping => {\r\n        //     this.editPrice['topping-' + topping._id] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping._id)\r\n        //   });\r\n        // }\r\n      }, 200)\r\n      // console.log(this.choiceFood);\r\n\r\n    }\r\n    // })\r\n  }\r\n\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n  }\r\n  changeLot(e) {\r\n    this.choiceFood.lot_number = this.choiceFood.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    if(this.choiceFood.lots && !this.choiceFood.id_lotproduct) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", \"Vui lòng chọn lô nguyên liệu!\");\r\n      return;\r\n    }\r\n    // if (this.choiceFood.toppings) this.choiceFood.toppings = this.choiceFood.toppings.filter(item => item.quantity)\r\n    this.choiceFood.dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    if (this.choiceFood.quantity) this.closeSearchProductList.emit(this.choiceFood)\r\n\r\n  }\r\n  /**\r\n   * Chọn menu\r\n   * @param event index tab của menu\r\n   */\r\n  changeTypeGood(event) {\r\n    this.indexTab = event\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    let products = this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(item => !item.delete_hidden).map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, item.units.find(u => u.default) ? item.units.find(u => u.default).ratio : 1)\r\n      return { ...item, ...unit, dispatcher_done: dispatcher_done}\r\n    })\r\n    if (event == 0) {\r\n      this.foodList = products\r\n    }\r\n    else {\r\n      this.foodList = products.filter(item => item.id_category == this.listTabs[event]._id && !item.delete_hidden);\r\n    }\r\n\r\n    this.searchList = this.functionService.transformProd5(this.vhAlgorithm.sortVietnamesebyASC(this.foodList, 'name'))\r\n  }\r\n\r\n  increaseQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity + 1\r\n  }\r\n  reduceQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity - 1\r\n  }\r\n}\r\n","<div id=\"search-product-popup\">\r\n  <nz-row nz-row style=\"height: 100%;\">\r\n    <div nz-col nzSpan=\"24\">\r\n      <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n        <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n      </nz-tabset>\r\n      <cdk-virtual-scroll-viewport [itemSize]=\"226\" class=\"infinite-container ant-table-body\">\r\n        <div class=\"product-area\" *cdkVirtualFor=\"let rows of searchList; trackBy: myTrackByFunction\">\r\n          <div class=\"product-area-item\" *ngFor=\"let prod of rows; trackBy: myTrackByFunction\" title=\"{{prod.name}}\"\r\n            (click)=\"selectFoods(prod)\">\r\n            <nz-card class=\"product-area-item-card\" nzHoverable>\r\n              <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\" />\r\n              <div class=\"product-area-item-card-title\">{{prod.name}}</div>\r\n              <div *ngIf=\"prod.item_code\" style=\"text-align: left; padding: 0 8px\">\r\n                <small style=\"color: var(--ion-color-vh-green)\">{{prod.item_code}}</small>\r\n              </div>\r\n              <!-- <div class=\"product-area-item-card-subtitle\">{{vhAlgorithm.vhcurrencyunit(prod.price)}}</div> -->\r\n              <div class=\"product-area-item-card-subtitle\" *ngIf=\"default_price_type == 1 || !prod.price2\">\r\n                {{vhAlgorithm.vhcurrencyunit(prod.price)}}</div>\r\n            <div class=\"product-area-item-card-subtitle\" *ngIf=\"default_price_type == 2 && prod.price2\">\r\n                {{vhAlgorithm.vhcurrencyunit(prod.price2)}}</div>\r\n            </nz-card>\r\n          </div>\r\n        </div>\r\n      </cdk-virtual-scroll-viewport>\r\n    </div>\r\n  </nz-row>\r\n</div>\r\n\r\n\r\n<!-- ------------select food---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceFood.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseFood()\" nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body\" style=\" max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <div *ngIf=\"choiceFood\" nz-row class=\"option-modal\">\r\n        <div nz-row style=\"width: 100%;\">\r\n          <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n            <input style=\"width: 90%;\" [ngClass]=\"'price-' + choiceFood._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceFood)\"\r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\" nz-input placeholder=\"{{'Price' | translate}}\" \r\n              [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"/>\r\n            <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n              style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n          </div>\r\n          <div nz-col nzSpan=\"4\">\r\n            <nz-select style=\"width: 90%;\" [(ngModel)]=\"choiceFood.ratio\" (ngModelChange)=\"changeUnit($event,choiceFood)\">\r\n              <nz-option *ngFor=\"let i of choiceFood.units\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\"></nz-option>\r\n            </nz-select>\r\n          </div>\r\n          <div class=\"text-align-center price-edit\" nz-col nzSpan=\"6\"\r\n            style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity <= 1\"\r\n              (click)=\"reduceQuantityToppings(choiceFood)\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 1}\">\r\n              <i nz-icon nzType=\"minus\"></i>\r\n            </button>\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceFood)\"\r\n              [(ngModel)]=\"choiceFood.quantity\">\r\n            </nz-input-number>\r\n            <button nz-button nzType=\"default\" [disabled]=\"choiceFood.quantity > 9999999998\"\r\n              (click)=\"increaseQuantityToppings(choiceFood)\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n              <i nz-icon nzType=\"plus\"></i>\r\n            </button>\r\n          </div>\r\n          <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n            <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\" [ngModelOptions]=\"{standalone: true}\"\r\n              nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Thuoc tinh -->\r\n      <div *ngIf=\"choiceFood.properties && choiceFood.properties.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Properties' | translate}}\r\n        </div>\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n          <nz-collapse nzGhost>\r\n            <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n              [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n              <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n              </nz-radio-group>\r\n            </nz-collapse-panel>\r\n          </nz-collapse>\r\n        </div>\r\n      </div>\r\n      <!-- Mon phu -->\r\n      <div *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Side dishes' | translate}}\r\n        </div>\r\n        <div nz-row class=\"option-modal\">\r\n          <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n            <div nz-row style=\"width: 100%;\">\r\n              <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                {{item.name |translate}} <br>\r\n                <!-- {{vhAlgorithm.vhcurrencyunit(item.price)}} -->\r\n                <input [ngClass]=\"'topping-' + item._id\" maxlength=\"15\" [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\"\r\n                  (blur)=\"updatePrice(item)\" nz-input placeholder=\"{{'Price' | translate}}\"   />\r\n              </div>\r\n              <div class=\"align-end text-align-center price-edit\"\r\n                style=\"display: flex;justify-content: space-evenly;align-items: flex-end;\" nz-col nzSpan=\"10\">\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                  (click)=\"item.quantity = item.quantity - 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 0}\">\r\n                  <i nz-icon nzType=\"minus\"></i>\r\n                </button>\r\n                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\">\r\n                </nz-input-number>\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                  (click)=\"item.quantity = item.quantity + 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                  <i nz-icon nzType=\"plus\"></i>\r\n                </button>\r\n              </div>\r\n              <div class=\" text-align-right\" style=\"display: flex;align-items: flex-end;justify-content: flex-end;\"\r\n                nz-col nzSpan=\"7\">\r\n                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- chọn lô - hsd -->\r\n      <div *ngIf=\"choiceFood.lots\">\r\n        Chọn lô, hạn sử dụng của nguyên liệu\r\n        <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n          style=\"width:100%;padding: 8px 0;\">\r\n          <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n              <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                <div nz-row>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    {{item.lot_number}}\r\n                  </div>\r\n\r\n                  <div nz-col nzSpan=\"6\">\r\n                    NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                    {{'Stock' | translate}}:\r\n                    <span style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                      | number : '1.0-2'}}</span>\r\n                  </div>\r\n                </div>\r\n\r\n              </label>\r\n            </div>\r\n\r\n          </div>\r\n        </nz-radio-group>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterSelectFood>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">\r\n      {{\"Cancel\" | translate}}\r\n    </button>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseFood()\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchProduct2Component } from './search-product2.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchProduct2Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchProduct2Component\r\n  ]\r\n})\r\nexport class SearchProduct2Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-search-service2',\r\n  templateUrl: './search-service2.component.html',\r\n  styleUrls: ['./search-service2.component.scss']\r\n})\r\nexport class SearchService2Component implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input(\"promotions\") promotions: any[] = []\r\n  // trả về product được chọn và đã xử lý cho search\r\n  @Output(\"closeSearchServiceList\") closeSearchServiceList: EventEmitter<any> = new EventEmitter();\r\n  /** Danh sách dịch vụ */\r\n  public serviceList: any[] = [];\r\n  /** Dịch vụ đang được xử lý */\r\n  choiceService: any = {}\r\n  /** Danh sách dịch vụ đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Danh mục dịch vụ */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }]\r\n  @Input() default_price_type: number\r\n  indexTab: number = 0;\r\n\r\n  public VhType = VhType;\r\n  \r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private functionService: FunctionService,\r\n    public vhAuth : VhAuth\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getMenu()\r\n  }\r\n\r\n  getMenu() {\r\n    this.serviceList = this.vhQueryCafe.getlocalDetailProducts(VhType.SERVICE_SERVICETIME).filter(item => !item.delete_hidden).map(e => {return {...e, ...e.units[0]}})\r\n    this.serviceList = this.vhAlgorithm.sortVietnamesebyASC(this.serviceList,'name')\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys().map(e =>{\r\n      e.status = this.serviceList.find(pro => pro.id_category == e._id) ? true : false\r\n      return {...e}\r\n    })\r\n    this.list_menu.filter(cate => cate.status).forEach(item => this.listTabs.push(item));\r\n\r\n    this.searchList = this.functionService.transformProd5(this.serviceList);\r\n  }\r\n\r\n  @Input() search_value = ''\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.serviceList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(this.search_value.toLocaleLowerCase()),  this.vhQueryCafe.getlocalDetailProducts(VhType.SERVICE_SERVICETIME).filter(item => !item.delete_hidden), ['name']).map(e => {return {...e, ...e.units[0]}})\r\n    this.serviceList = this.vhAlgorithm.sortVietnamesebyASC(this.serviceList,'name')\r\n    this.searchList = this.functionService.transformProd5(this.serviceList); \r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchServiceList.emit(false);\r\n  }\r\n  /**\r\n   * Chọn dịch vụ xử lý\r\n   * @param value thông tin dịch đang được xử lý\r\n   */\r\n  selectService(value) {\r\n    // this.checkPromotions(value._id)\r\n    //   .then((promotionProd: any) => {\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n      this.choiceService = {\r\n        ...value, \r\n        quantity: 1, \r\n        note: \"\", \r\n        price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,\r\n        price: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,\r\n        ptype: value.type,\r\n        dispatcher_done: dispatcher_done\r\n      }\r\n\r\n      if (this.choiceService) {\r\n        if (value.type !== VhType.SERVICETIME) {\r\n          this.showOptions = true;\r\n          setTimeout(() => {\r\n            this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n          }, 200)\r\n        }\r\n        else {\r\n          this.closeSearchServiceList.emit(this.choiceService);\r\n        }\r\n      }\r\n      // })\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue()\r\n    this.choiceService.price = price ? parseFloat(price) : 0;\r\n    this.choiceService.quantity = this.choiceService.quantity > 0 ? this.choiceService.quantity : 1\r\n  }\r\n  chooseService() {\r\n    this.showOptions = false;\r\n    if (this.choiceService['quantity']) {\r\n      this.closeSearchServiceList.emit(this.choiceService)\r\n    }\r\n  }\r\n\r\n  changeTypeGood(event) {\r\n    this.indexTab = event\r\n    let products = this.vhQueryCafe.getlocalDetailProducts(VhType.SERVICE_SERVICETIME).filter(item => !item.delete_hidden).map(e => {return {...e, ...e.units[0]}})\r\n    if (event == 0) {\r\n      this.serviceList = products\r\n    }\r\n    else {\r\n      this.serviceList = products.filter(item => item.id_category == this.listTabs[event]._id);\r\n    }\r\n    this.searchList = this.functionService.transformProd5(this.serviceList)\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n\r\n  increaseQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity + 1\r\n  }\r\n  reduceQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity - 1\r\n  }\r\n}\r\n","<div id=\"search-service-popup\">\r\n    <nz-row nz-row style=\"height: 100%\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n                <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n            </nz-tabset>\r\n            <cdk-virtual-scroll-viewport [itemSize]=\"226\" class=\"infinite-container ant-table-body\">\r\n                <div class=\"service-area\" *cdkVirtualFor=\"let rows of searchList; trackBy: myTrackByFunction\">\r\n                    <div class=\"service-area-item\" *ngFor=\"let prod of rows; trackBy: myTrackByFunction\"\r\n                        (click)=\"selectService(prod)\" title=\"{{prod.name}}\">\r\n                        <nz-card class=\"service-area-item-card\" nzHoverable>\r\n                            <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\" />\r\n                            <div class=\"service-area-item-card-title\">{{prod.name}}</div>\r\n                            <div class=\"service-area-item-card-subtitle\" *ngIf=\"default_price_type == 1 || !prod.price2\">\r\n                              {{vhAlgorithm.vhcurrencyunit(prod.price)}}\r\n                              <ng-container *ngIf=\"prod.type === VhType.SERVICETIME\"> / {{prod.units[0].unit | translate}}</ng-container>\r\n                            </div>\r\n                            <div class=\"service-area-item-card-subtitle\" *ngIf=\"default_price_type == 2 && prod.price2\">\r\n                              {{vhAlgorithm.vhcurrencyunit(prod.price2)}}\r\n                              <ng-container *ngIf=\"prod.type === VhType.SERVICETIME\"> / {{prod.units[0].unit | translate}}</ng-container>\r\n                            </div>\r\n                        </nz-card>\r\n                    </div>\r\n                </div>\r\n            </cdk-virtual-scroll-viewport>\r\n        </div>\r\n    </nz-row>\r\n</div>\r\n\r\n\r\n<!-- ------------select service---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceService.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseService()\">\r\n    <ng-container *nzModalContent>\r\n        <div *ngIf=\"!choiceService.manysize\" nz-row class=\"option-modal\">\r\n            <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                  <input [ngClass]=\"'price-' + choiceService._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceService)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(choiceService.price)\" nz-input placeholder=\"{{'Price' | translate}}\"\r\n                   />\r\n                  <s *ngIf=\"choiceService.price_origin > choiceService.price\"\r\n                    style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceService.price_origin)}}</s>\r\n                </div>\r\n                <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n                  style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n                  <button nz-button nzType=\"default\" [disabled]=\"choiceService.quantity <= 1\"\r\n                    (click)=\"reduceQuantityToppings(choiceService)\"\r\n                    [ngClass]=\"{'btn-activate': choiceService.quantity > 0, 'btn-disabled': choiceService.quantity <= 1}\">\r\n                    <i nz-icon nzType=\"minus\"></i>\r\n                  </button>\r\n                  <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceService)\"\r\n                    [(ngModel)]=\"choiceService.quantity\" >\r\n                  </nz-input-number>\r\n                  <button nz-button nzType=\"default\" [disabled]=\"choiceService.quantity > 9999999998\"\r\n                    (click)=\"increaseQuantityToppings(choiceService)\"\r\n                    [ngClass]=\"{'btn-activate': choiceService.quantity <= 9999999998, 'btn-disabled': choiceService.quantity > 9999999998}\">\r\n                    <i nz-icon nzType=\"plus\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n                  {{vhAlgorithm.vhcurrencyunit(choiceService.price * choiceService.quantity)}}\r\n                </div>\r\n                <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n                  <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceService.note\" [ngModelOptions]=\"{standalone: true}\"\r\n                    nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                </div>\r\n              </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterSelectFood>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseService()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchService2Component } from './search-service2.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchService2Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchService2Component\r\n  ]\r\n})\r\nexport class SearchService2Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-search-topping2',\r\n  templateUrl: './search-topping2.component.html',\r\n  styleUrls: ['./search-topping2.component.scss']\r\n})\r\nexport class SearchTopping2Component implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input(\"promotions\") promotions: any[] = []\r\n  // trả về product được chọn và đã xử lý cho search\r\n  @Output(\"closeSearchSideDishesList\") closeSearchSideDishesList: EventEmitter<any> = new EventEmitter();\r\n  /** Danh sách món phụ */\r\n  public sideDishesList: any[] = [];\r\n  /** Danh sách món phụ đang được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Món phụ đang được chọn */\r\n  choiceSideDishes: any = {}\r\n  @Input() default_price_type: number\r\n  // bien kiểm tra show bàn phím ảo hay ko\r\n  show_keyboard: boolean = this.vhAuth.localStorageGET(\"show_keyboard\");\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private functionService: FunctionService,\r\n    private vhAuth:VhAuth\r\n  ) { }\r\n  ngOnInit(): void {\r\n    this.sideDishesList = this.vhQueryCafe.getlocalProducts().filter(item => !item.delete_hidden && item.type == 4).map(e => {return {...e, ...e.units[0]}})\r\n    this.sideDishesList =this.vhAlgorithm.sortVietnamesebyASC(this.sideDishesList,'name')\r\n    this.searchList = this.functionService.transformProd5(this.sideDishesList);\r\n  }\r\n\r\n\r\n  @Input() search_value = ''\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.sideDishesList = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(this.search_value.toLocaleLowerCase()),  this.vhQueryCafe.getlocalProducts().filter(item => !item.delete_hidden && item.type == 4), ['name']).map(e => {return {...e, ...e.units[0]}})\r\n    this.sideDishesList =this.vhAlgorithm.sortVietnamesebyASC(this.sideDishesList,'name')\r\n    this.searchList = this.functionService.transformProd5(this.sideDishesList); \r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchSideDishesList.emit(false);\r\n  }\r\n\r\n  /** Chọn món phụ để xử lý\r\n   * @param value: thông tin món phụ được chọn\r\n   */\r\n  selectSideDishes(value) {\r\n    // this.checkPromotions(value._id) // kiểm tra chương trình khuyến mãi áp dụng\r\n    //   .then((promotionProd: any) => {\r\n      let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n        this.choiceSideDishes = {\r\n          ...value, quantity: 1, note: \"\", price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,\r\n           price : this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,ptype : 4, dispatcher_done : dispatcher_done\r\n        }\r\n        if (this.choiceSideDishes) {\r\n          this.showOptions = true;\r\n          setTimeout(() => {\r\n            this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n          }, 200)\r\n        }\r\n      // })\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue()\r\n    this.choiceSideDishes.price = price ? parseFloat(price) : 0;\r\n    this.choiceSideDishes.quantity = this.choiceSideDishes.quantity > 0 ? this.choiceSideDishes.quantity : 1\r\n  }\r\n  chooseSideDishes() {\r\n    this.showOptions = false;\r\n    if (this.choiceSideDishes['quantity']) {\r\n      this.closeSearchSideDishesList.emit(this.choiceSideDishes)\r\n    }\r\n  }\r\n\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n\r\n\r\n  increaseQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity + 1\r\n  }\r\n  reduceQuantityToppings(item){\r\n    if(item.quantity != '') item.quantity = parseFloat(item.quantity)\r\n    item.quantity = item.quantity - 1\r\n  }\r\n}\r\n","<div id=\"search-side-dishes-popup\">\r\n    <nz-row nz-row style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <cdk-virtual-scroll-viewport [itemSize]=\"226\" class=\"infinite-container ant-table-body\">\r\n                <div class=\"side-dishes-area\" *cdkVirtualFor=\"let rows of searchList; trackBy: myTrackByFunction\">\r\n                    <div class=\"side-dishes-area-item\" *ngFor=\"let prod of rows; trackBy: myTrackByFunction\"\r\n                        (click)=\"selectSideDishes(prod)\" title=\"{{prod.name}}\">\r\n                        <nz-card class=\"side-dishes-area-item-card\" nzHoverable>\r\n                            <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\" />\r\n                            <div class=\"side-dishes-area-item-card-title\">{{prod.name}}</div>\r\n                            <div class=\"side-dishes-area-item-card-subtitle\" *ngIf=\"default_price_type == 1 || !prod.price2\">\r\n                              {{vhAlgorithm.vhcurrencyunit(prod.price)}}</div>\r\n                          <div class=\"side-dishes-area-item-card-subtitle\" *ngIf=\"default_price_type == 2 && prod.price2\">\r\n                              {{vhAlgorithm.vhcurrencyunit(prod.price2)}}</div>\r\n                        </nz-card>\r\n                    </div>\r\n                </div>\r\n            </cdk-virtual-scroll-viewport>\r\n        </div>\r\n    </nz-row>\r\n</div>\r\n\r\n<!-- ------------select sideDishes---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceSideDishes.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseSideDishes()\">\r\n    <ng-container *nzModalContent>\r\n        <div *ngIf=\"!choiceSideDishes.manysize\" nz-row class=\"option-modal\">\r\n            <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                  <input [ngClass]=\"'price-' + choiceSideDishes._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceSideDishes)\" [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(choiceSideDishes.price)\" nz-input placeholder=\"{{'Price' | translate}}\"\r\n                    />\r\n                  <s *ngIf=\"choiceSideDishes.price_origin > choiceSideDishes.price\"\r\n                    style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price_origin)}}</s>\r\n                </div>\r\n                <div class=\"text-align-center price-edit\" nz-col nzSpan=\"10\"\r\n                  style=\"display: flex;justify-content: space-evenly;align-items: center;\">\r\n                  <button nz-button nzType=\"default\" [disabled]=\"choiceSideDishes.quantity <= 1\"\r\n                    (click)=\"reduceQuantityToppings(choiceSideDishes)\"\r\n                    [ngClass]=\"{'btn-activate': choiceSideDishes.quantity > 0, 'btn-disabled': choiceSideDishes.quantity <= 1}\">\r\n                    <i nz-icon nzType=\"minus\"></i>\r\n                  </button>\r\n                  <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" (blur)=\"updatePrice(choiceSideDishes)\"\r\n                    [(ngModel)]=\"choiceSideDishes.quantity\">\r\n                  </nz-input-number>\r\n                  <button nz-button nzType=\"default\" [disabled]=\"choiceSideDishes.quantity > 9999999998\"\r\n                    (click)=\"increaseQuantityToppings(choiceSideDishes)\"\r\n                    [ngClass]=\"{'btn-activate': choiceSideDishes.quantity <= 9999999998, 'btn-disabled': choiceSideDishes.quantity > 9999999998}\">\r\n                    <i nz-icon nzType=\"plus\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"align-center text-align-right\" nz-col nzSpan=\"7\">\r\n                  {{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price * choiceSideDishes.quantity)}}\r\n                </div>\r\n                <div class=\"align-center order-div-note1\" nz-col nzSpan=\"24\">\r\n                  <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceSideDishes.note\" [ngModelOptions]=\"{standalone: true}\"\r\n                    nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                </div>\r\n              </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterSelectFood>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseSideDishes()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { KeyboardModule } from './../../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchTopping2Component } from './search-topping2.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchTopping2Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    KeyboardModule\r\n  ],\r\n  exports: [\r\n    SearchTopping2Component\r\n  ]\r\n})\r\nexport class SearchTopping2Module { }\r\n","import { Component, HostListener, OnInit, EventEmitter, Input, Output } from '@angular/core';\r\nimport { VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F3\", \"F4\", \"F5\", \"F6\"].includes(event.key)) {\r\n      this.closeSearchProduct(false)\r\n      this.closeSearchService(false)\r\n      this.closeSearchSideDishes(false)\r\n      this.closeSearchCombos(false)\r\n\r\n      switch (event.key) {\r\n        case \"F3\": this.typeProduct = 1; break;\r\n        case \"F4\": this.typeProduct = 2; break;\r\n        case \"F5\": this.typeProduct = 4; break;\r\n        case \"F6\": this.typeProduct = 5; break;\r\n      }\r\n      event.preventDefault(); event.stopPropagation()\r\n    }\r\n  }\r\n  // trả về product được chọn và đã xử lý cho bill-detail2\r\n  @Output() billDetail: EventEmitter<boolean> = new EventEmitter();\r\n  @Output() goback = new EventEmitter();\r\n  typeProduct: 1 | 2 | 4 | 5 = 1\r\n  showDrawerProductList: boolean = false\r\n  showDrawerServiceList: boolean = false\r\n  showDrawerSideDishesList: boolean = false\r\n  showDrawerCombosList: boolean = false\r\n  showModalChangePriceType: boolean = false;\r\n  @Input() default_price_type: any;\r\n  @Output() changePriceType: EventEmitter<any> = new EventEmitter()\r\n  @Output() checkPromotion: EventEmitter<any> = new EventEmitter()\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2\r\n  search_value = ''\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAuth: VhAuth\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  emitGoBack() {\r\n    this.goback.emit(true)\r\n  }\r\n\r\n  closeSearchProduct(ev) {\r\n    if (ev) this.billDetail.emit(ev)\r\n    else this.showDrawerProductList = false\r\n  }\r\n  closeSearchService(ev) {\r\n    if (ev) this.billDetail.emit(ev)\r\n    else this.showDrawerServiceList = false\r\n  }\r\n  closeSearchSideDishes(ev) {\r\n    if (ev) this.billDetail.emit(ev)\r\n    else this.showDrawerSideDishesList = false\r\n  }\r\n  closeSearchCombos(ev) {\r\n    if (ev) this.billDetail.emit(ev)\r\n    else this.showDrawerCombosList = false\r\n  }\r\n  handleOk() {\r\n    this.showModalChangePriceType = false\r\n    this.changePriceType.emit(this.default_price_type)\r\n  }\r\n\r\n  handleCancel() {\r\n    this.showModalChangePriceType = false\r\n    this.changePriceType.emit(null)\r\n  }\r\n}\r\n","<div class=\"search\">\r\n    \r\n    <div class=\"btn-list\">\r\n        <nz-radio-group class=\"btn-list-radio\" [(ngModel)]=\"typeProduct\">\r\n            <label class=\"btn-list-radio-btn\" nz-radio-button [nzValue]=\"0\" (click)=\"emitGoBack()\">\r\n                <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n            </label>\r\n            <label class=\"btn-list-radio-btn\" nz-radio-button [nzValue]=\"1\">\r\n                {{'Dishes/beverage' | translate}} (F3)\r\n            </label>\r\n            <label class=\"btn-list-radio-btn\" nz-radio-button [nzValue]=\"2\">\r\n                {{'Service' | translate}} (F4)\r\n            </label>\r\n            <label class=\"btn-list-radio-btn\" nz-radio-button [nzValue]=\"4\">\r\n                {{'Side dishes' | translate}} (F5)\r\n            </label>\r\n            <label class=\"btn-list-radio-btn\" nz-radio-button [nzValue]=\"5\">\r\n                {{'Combo' | translate}} (F6)\r\n            </label>\r\n        </nz-radio-group>\r\n        <nz-input-group nzSize=\"large\" [nzSuffix]=\"suffixIconSearch\" style=\"width: 30%;\">\r\n            <input type=\"text\" nz-input placeholder=\"{{'Search dish name, item code' | translate}}\" [(ngModel)]=\"search_value\" />\r\n        </nz-input-group>\r\n        <ng-template #suffixIconSearch>\r\n            <i nz-icon nzType=\"search\"></i>\r\n        </ng-template>\r\n        <div style=\"width: 265px; display: flex;\">\r\n            <button *ngIf=\"management_product_price2\" nz-button nzType=\"default\" style=\"margin-right: 8px;\" nzSize=\"large\" (click)=\"showModalChangePriceType = true\">{{'Choose selling price' | translate}}</button>\r\n            <button nz-button nzType=\"primary\" nzSize=\"large\" (click)=\"checkPromotion.emit(true)\"><i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Promotions' | translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div class=\"search-area ant-table-body\" [ngSwitch]=\"typeProduct\">\r\n        <!-- --------------------open product search---------------------- -->\r\n        <app-search-product2 *ngSwitchDefault [default_price_type]=\"default_price_type\" [search_value]=\"search_value\"\r\n            (closeSearchProductList)=\"closeSearchProduct($event)\">\r\n        </app-search-product2>\r\n        <!-- --------------------open service search---------------------- -->\r\n        <app-search-service2 *ngSwitchCase=\"2\"  [default_price_type]=\"default_price_type\" [search_value]=\"search_value\"\r\n            (closeSearchServiceList)=\"closeSearchService($event)\">\r\n        </app-search-service2>\r\n        <!-- --------------------open side dishes search---------------------- -->\r\n        <app-search-topping2 *ngSwitchCase=\"4\"  [default_price_type]=\"default_price_type\" [search_value]=\"search_value\"\r\n            (closeSearchSideDishesList)=\"closeSearchSideDishes($event)\">\r\n        </app-search-topping2>\r\n        <!-- --------------------open combo search---------------------- -->\r\n        <app-search-combo2 *ngSwitchCase=\"5\" (closeSearchCombosList)=\"closeSearchCombos($event)\" [search_value]=\"search_value\">\r\n        </app-search-combo2>\r\n    </div>\r\n</div>\r\n\r\n<nz-modal nzCentered=\"\" [(nzVisible)]=\"showModalChangePriceType\" nzTitle=\"{{'Choose selling price' | translate}}\" \r\n(nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\" nzCancelText=\"{{'Cancel' | translate}}\">\r\n    <ng-container *nzModalContent>\r\n        <nz-radio-group [(ngModel)]=\"default_price_type\">\r\n            <label nz-radio [nzValue]=\"1\">{{'Selling price' | translate}} 1</label>\r\n            <label nz-radio [nzValue]=\"2\">{{'Selling price' | translate}} 2</label>\r\n        </nz-radio-group>\r\n    </ng-container>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchComponent } from './search.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { SearchCombo2Module } from '../search-combo2/search-combo2.module';\r\nimport { SearchTopping2Module } from './../search-topping2/search-topping2.module';\r\nimport { SearchService2Module } from './../search-service2/search-service2.module';\r\nimport { SearchProduct2Module } from './../search-product2/search-product2.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    SearchCombo2Module,\r\n    SearchTopping2Module,\r\n    SearchService2Module,\r\n    SearchProduct2Module\r\n  ],\r\n  exports: [\r\n    SearchComponent\r\n  ]\r\n})\r\nexport class SearchModule { }\r\n"],"names":["SalesA4Component","SalesA5Component","SalesK80Col4Component","SalesK80Col3Component","SalesK57Col3Component","VhOrderInvoices","VhType","i0","data_r9","ctx_r7","data_r38","ctx_r37","CartComponent","constructor","vhAlgorithm","vhQueryCafe","router","vhAuth","languageService","vhComponent","cdRef","mess","nzModalService","vhQuery","platform","productService","vhEinvoice","billService","updating","deleting","payment","getLocalAppSettingNameBranch","cqt_invoice_auto_sign","cqt_submit_invoice_immediately","dataTrans","getCurrentNavigation","extras","state","dataRestore","initInvoice","ngOnInit","is","console","log","connectDisplayLEDScreens","ngOnDestroy","closeSyncOpeningBill","disconnectDisplayLEDScreens","ngAfterViewChecked","document","getElementById","style","height","querySelector","clientHeight","detectChanges","alertErr","err","error","translate","goBack","handleEmit_printKitchenAll","ev","updateServiceTimePriceInvoiceDetail","invoices","getInvoiceDetail","getPriceType","printKitchenAll","setTimeout","changePriceType","event","default_price_type","destroyBillDetails_withPromotions","then","length","bill_details","i","ptype","SERVICETIME","updateServiceTimePrice","serviceTimePrice","Object","price_update","product","getlocalDetailProduct","id_subproduct","id_product","getUnit_byRatio","units","ratio","price","toppings","top","getlocalProduct","price2","topping","price_origin","setSubTotal","setPriceType","updateBill_Billdetail","getID","getCreateUpdateInvoice","getCreateUpdateInvoiceDetail","getBill_Detail_ByID_Bill","gotten_gift_type7","handlePromotionType7","bill_details_pmtype_7","reset","isExit","navigate","renderNameFood","id_prod","id_subProd","food","subFood","subs","find","item","_id","name","renderSubCombo","arr","subName","forEach","quantity","setIdTable","setIdEmployee","getUser","setIdArea","tax","getlocalTaxs","status","default","setTax","parseFloat","value","id_bill","Promise","all","getBill","getBill_details_byId_bill","showLoading","getDocsByFields","id_branch","$eq","getDefaultBranch","getEarningPointsBills","getEarningPointsProducts","bill","billDetail","loading","label","earning_point_bills","earning_points_products","stamp","list_earning_point_bills","list_earning_points_products","alertMessage","sortDatebyDESC","getClassAndProgram","debt","getIdPartner","getlocalCustomer","observableCheckBill","checkMyPermission","catch","finally","hideLoading","getIdTable","tableInfo","getlocalArea","getIdArea","getlocalTable","printer","getLocalPrintPage","print_sizes","findIndex","e","print_size_default","checkPrinter","enable","printer_kitchen","checkPrinterKitchen","observableSyncOpeningBill","subscribe","rsp","vcode","confirm","nzTitle","nzOkText","nzOnOk","nzCancelText","nzOnCancel","alertMessageDesktop","updateInvoice","statusInvoice","isPromotion","deletePromotion","updateBill","id","getEarningBill","program_bill","getSubTotal","bill_total_minimum","subTotal","include_promotion_product","getSubTotalNotPromotion","include_discount","getDiscount","getDiscountBill","include_paid_points","getDiscountPoint","include_fee","getFee","include_tax","getTax","exchange","money","points","filter","id_promotion","reduce","prev","next","getSubTotalNotPromotionOFProduct","products_of_program_earnig_product","getEarningProduct","products","program_product","customer","customer_class","getlocalCustomerClasss","id_customer_class","id_earning_points_bill","id_earning_points_product","getTotalEarningPoint","earning_point","getTotalEarningPointProduct","promotion","deleteProcess","deleteBill_Billdetail","updateTable","deleteInvoice","createProcess","updateAllServiceTimeToPause","saveInvoice","print","checkLocalMyPermissionName","getUsePoint","earned_points","updateCustomer_byEarnedPoints","setEarningPointBill","invoiceTemp","invoice","res","handleMinvoice","promise","Array","getArrayCouponCodes","updateCouponCode","date_used","Date","id_customer_used","asyncPromiseAll","array","success","getBillCode","handlePrintInvoice","showToast","renderPrintPage","type","setBillCode","bill_code","showModal","modal","onWillDismiss","handlePrintTest","updateServiceTime","temp","nzDuration","nzContent","nzIconType","setBillHavePromotion","resolve","product_gift_type7","handleAddGiftType7","showProductGiftType7","products_gift","choose","addBill_detail_promotion","getPromotions","bill_details_type_6","bill_details_others","isContainServiceTime","changeBillDetails_withPromotions","getDate","bill_details_display","bill_details_pmtype_0to6","handleChooseLotForPromotion","sortNumberbyASC","isGotPromotion","getEarningpointPromotion","findLastIndex","total_bill_value","getTotalATax","getUnit","unit","lots","min_date_exp","sortDatebyASC","lot_number","combos","element","pmtype","earning_points_product","checkDisableChooseProductGift","data","promotions_maximum","reject","currentBranch","getlocalBranch","einvoices","_a","cqt_status","invoiceSeries","changeBill_byLocal_toInvoice_byMinvoice","saveInvoice_Sign_byMinvoice","taxcode","token","code","bool","saveInvoice_noSign_byMinvoice","selectors","decls","vars","consts","template","ctx","EventEmitter","ctx_r1","i_r23","ctx_r17","properties_r34","ctx_r40","item_r41","SearchProduct2Component","functionService","auto_hidden_lot","auto_select_lot","getMenu","myTrackByFunction","index","closeSearchProductList","emit","getlocalDetailProducts","delete_hidden","map","u","foodList","list_menu","getlocalCategorys","pro","id_category","cate","listTabs","push","searchList","transformProd5","ngOnChanges","changes","changeAlias","search_value","toLocaleLowerCase","updatePrice","editPrice","getRawValue","choiceFood","chooseProduct","selectFoods","JSON","parse","stringify","note","properties","hidden","id_lotproduct","active","selectedValue","date_exp","getTime","showOptions","vhnumeral","changeUnit","changeLot","selectFoodsCancel","chooseFood","dispatcher_done","dispatchers_enable","changeTypeGood","indexTab","sortVietnamesebyASC","increaseQuantityToppings","reduceQuantityToppings","inputs","promotions","outputs","features","_r3"],"sourceRoot":"webpack:///"}