{"version":3,"file":"src_app_cafe_desktop_cafe-pos_components_list-invoice_list-invoice_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGmG;AACA;AACiB;AACA;AACA;AAEJ;AAExD;;;;;;;;;;;;;;;;;;IC0BxB,0EAAgE;IAAA,qEAAG;IAAA,wDAChD;;IAAA,6DAAI;IAAA,6DAAK;;IADuC,2DAChD;IADgD,oJAChD;;;IAcH,yEAAgC;IAC5B,uEAAK;IAAA,wDAA+C;IAAA,6DAAM;IAAC,iEAAI;IACnE,sEAAe;;;;IADN,2DAA+C;IAA/C,6HAA+C;;;IAMhD,yEAAiC;IAC7B,2EAC0C;IAAA,wDAAiD;IAAA,6DAAM;IACrG,sEAAe;;;;IAD+B,2DAAiD;IAAjD,+HAAiD;;;IALnG,4EAAyD;IACrD,wDAEA;IAAA,mMAGe;IAAA,8DACnB;IAAA,6DAAO;;;;IANH,2DAEA;IAFA,+KAEA;IAAe,2DAAgB;IAAhB,iFAAgB;;;IAJvC,yEAAkC;IAC9B,4KAOO;IACX,sEAAe;;;IAR8B,2DAAc;IAAd,qFAAc;;;IAgB3D,2EAAwE;IACpE,wDAEJ;IAAA,6DAAM;;;;IAFF,2DAEJ;IAFI,oLAEJ;;;IAEJ,qEAAwD;;;IAiBxD,0EAAoD;IAAA,wDAA6G;;IAAA,6DAAK;;;IAAlH,2DAA6G;IAA7G,8PAA6G;;;IAbrK,0EAAkE;IAC9D,sEAAI;IACA,4EAAiD;IAAA,wDAAe;IAAA,6DAAO;IAC3E,6DAAK;IACL,0EAAqB;IAAA,wDAAmC;;IAAA,6DAAK;IAC7D,0EAAoB;IAChB,wDACA;IAAA,2EAAgC;IAC5B,yDAGJ;IAAA,6DAAM;IACV,6DAAK;IACL,iKAAsK;IACtK,2EAAoB;IAAA,sEAAG;IAAA,yDACA;IAAA,6DAAI;IAC3B,6DAAK;IACT,6DAAK;;;;IAfoD,2DAAe;IAAf,iFAAe;IAE/C,2DAAmC;IAAnC,gKAAmC;IAEpD,2DACA;IADA,iIACA;IACI,2DAGJ;IAHI,0LAGJ;IAEmB,2DAA2B;IAA3B,gGAA2B;IAC3B,2DACA;IADA,4IACA;;;IAhD/B,yEAAiD;IAC7C,0EAA8B;IAC1B,sEAAI;IACA,wDAAc;IAAA,iEAAI;IAClB,6KAEe;IACf,6KASe;IACnB,6DAAK;IACL,0EAAqB;IACjB,wDACJ;IAAA,6DAAK;IACL,0EAAqB;IAAA,yDAAiB;IAAA,6DAAK;IAC3C,2EAAoB;IAChB,yDACA;IAAA,6JAGM;IACV,6DAAK;IACL,2JAAwD;IACxD,2EAAoB;IAAA,sEAAG;IAAA,yDACF;IAAA,6DAAI;IAAA,6DAAK;IAClC,6DAAK;IACL,4JAiBK;IACT,sEAAe;;;;IAhDH,2DAAc;IAAd,0FAAc;IACC,2DAAe;IAAf,gFAAe;IAGf,2DAAiB;IAAjB,kFAAiB;IAYhC,2DACJ;IADI,4HACJ;IACqB,2DAAiB;IAAjB,mFAAiB;IAElC,2DACA;IADA,+HACA;IAAiC,2DAAqC;IAArC,0GAAqC;IAKpD,2DAA2B;IAA3B,gGAA2B;IAC1B,2DACF;IADE,wIACF;IAEuB,2DAAgB;IAAhB,uFAAgB;;;IAsBxD,yEAAgC;IAC5B,wDAAgD;IAAA,iEAAI;IACxD,sEAAe;;;;IADX,2DAAgD;IAAhD,wIAAgD;;;IAM5C,yEAAiC;IAC7B,2EACyC;IAAA,wDAAiD;IAAA,6DAAM;IACpG,sEAAe;;;;IAD8B,2DAAiD;IAAjD,+HAAiD;;;IALlG,4EACsC;IAAA,wDAElC;IAAA,mMAGe;IAAA,8DACnB;IAAA,6DAAO;;;;IAN+B,2DAElC;IAFkC,8KAElC;IAAe,2DAAgB;IAAhB,iFAAgB;;;IAJvC,yEAAkC;IAC9B,4KAOO;IACX,sEAAe;;;IAPW,2DAAc;IAAd,qFAAc;;;IAexC,2EAAwE;IACpE,wDAEJ;IAAA,6DAAM;;;;IAFF,2DAEJ;IAFI,oLAEJ;;;IAEJ,qEAAwD;;;IAiBxD,0EAAoD;IAAA,wDAA6G;;IAAA,6DAAK;;;IAAlH,2DAA6G;IAA7G,8PAA6G;;;IAbrK,0EAAkE;IAC9D,sEAAI;IACA,4EAAiD;IAAA,wDAAe;IAAA,6DAAO;IAC3E,6DAAK;IACL,0EAAqB;IAAA,wDAAmC;;IAAA,6DAAK;IAC7D,0EAAoB;IAChB,wDACA;IAAA,2EAAgC;IAC5B,yDAGJ;IAAA,6DAAM;IACV,6DAAK;IACL,iKAAsK;IACtK,2EAAoB;IAAA,sEAAG;IAAA,yDACA;IAAA,6DAAI;IAC3B,6DAAK;IACT,6DAAK;;;;IAfoD,2DAAe;IAAf,iFAAe;IAE/C,2DAAmC;IAAnC,gKAAmC;IAEpD,2DACA;IADA,iIACA;IACI,2DAGJ;IAHI,0LAGJ;IAEmB,2DAA2B;IAA3B,gGAA2B;IAC3B,2DACA;IADA,4IACA;;;IA/C/B,yEAAsD;IAClD,sEAAM;IACF,sEAAI;IAAA,wDAAc;IAAA,qEAAG;IAAA,wDAAwB;;IAAA,6DAAI;IAAA,iEAAI;IACjD,6KAEe;IACf,6KASe;IACnB,6DAAK;IACL,2EAAqB;IACjB,yDACJ;IAAA,6DAAK;IACL,2EAAqB;IAAA,yDAAiB;IAAA,6DAAK;IAC3C,2EAAoB;IAChB,yDACA;IAAA,6JAGM;IACV,6DAAK;IACL,2JAAwD;IACxD,2EAAoB;IAAA,sEAAG;IAAA,yDACF;IAAA,6DAAI;IAAA,6DAAK;IAClC,6DAAK;IACL,4JAiBK;IACT,sEAAe;;;;IAhDH,2DAAc;IAAd,yFAAc;IAAG,2DAAwB;IAAxB,sJAAwB;IAC1B,2DAAe;IAAf,gFAAe;IAGf,2DAAiB;IAAjB,kFAAiB;IAYhC,2DACJ;IADI,4HACJ;IACqB,2DAAiB;IAAjB,mFAAiB;IAElC,2DACA;IADA,+HACA;IAAiC,2DAAqC;IAArC,0GAAqC;IAKpD,2DAA2B;IAA3B,gGAA2B;IAC1B,2DACF;IADE,wIACF;IAEuB,2DAAgB;IAAhB,uFAAgB;;;IAxFxE,yEAAwC;IACpC,0EAA6B;IACzB,0EAAgB;IAAA,qEAAG;IAAA,wDAAa;IAAA,6DAAI;IAAA,6DAAK;IAC7C,6DAAK;IACL,gKAmDe;IACf,gKAkDe;IAGnB,sEAAe;;;IA3GY,2DAAa;IAAb,8EAAa;IAEL,2DAAgB;IAAhB,sFAAgB;IAoDhB,2DAAqB;IAArB,2FAAqB;;;IAyDhD,yEAAyC;IACrC,iEAAI;IAAA,wEAAM;IAAA,wDAAsD;IAAA,6DAAO;IAC3E,sEAAe;;;;IADD,2DAAsD;IAAtD,qJAAsD;;;IAQxD,yEAAiC;IAC7B,2EAC0C;IAAA,wDAAiD;IAAA,6DAAM;IACrG,sEAAe;;;;IAD+B,2DAAiD;IAAjD,+HAAiD;;;IALnG,4EAAyD;IACrD,wDAEA;IAAA,yLAGe;IAAA,8DACnB;IAAA,6DAAO;;;;IANH,2DAEA;IAFA,+KAEA;IAAe,2DAAgB;IAAhB,iFAAgB;;;IAJvC,yEAAkC;IAC9B,kKAOO;IACX,sEAAe;;;IAR8B,2DAAc;IAAd,oFAAc;;;IAF/D,yEAAsC;IAClC,mKASe;IACnB,sEAAe;;;IAVI,2DAAiB;IAAjB,iFAAiB;;;IAWpC,yEAA+E;IAC3E,4EAAuB;IACnB,wDAA8C;IAAA,6DAAO;IAAA,iEAAI;IACjE,sEAAe;;;IADP,2DAA8C;IAA9C,gIAA8C;;;IAMlD,qEAAiC;IAAA,wDAAsF;;;IAAA,6DAAI;;;IAA1F,2DAAsF;IAAtF,kRAAsF;;;IACvH,qEAA+B;IAC3B,wDACJ;;;IAAA,6DAAI;;;IADA,2DACJ;IADI,iRACJ;;;IACA,yEAAmH;IAC/G,qEAAG;IAAA,wDAAwC;;IAAA,6DAAI;IACnD,sEAAe;;;IADR,2DAAwC;IAAxC,uKAAwC;;;IAPnD,2EAAkF;IAC9E,sEAA8B;IAC9B,oIAA2H;IAC3H,oIAEI;IACJ,0JAEe;IACnB,6DAAM;;;;IAPE,2DAA2B;IAA3B,2FAA2B;IAC3B,2DAAyB;IAAzB,yFAAyB;IAGd,2DAAuF;IAAvF,iKAAuF;;;IAO1G,yEAAwD;IAAA,wDAAoC;IAAA,sEAAe;;;;IAAnD,2DAAoC;IAApC,0HAAoC;;;IAE3E,yEAAwD;IAAA,wDAAkC;;IAAA,sEAAe;;;IAAjD,2DAAkC;IAAlC,6JAAkC;;;IAE3G,yEAAwD;IACpD,wDACA;IAAA,2EAAgC;IAC5B,wDAGJ;IAAA,6DAAM;IACV,sEAAe;;;;IANX,2DACA;IADA,8HACA;IACI,2DAGJ;IAHI,iLAGJ;;;IAGR,0EAAoD;IAAA,wDAAqG;;IAAA,6DAAK;;;IAA1G,2DAAqG;IAArG,kPAAqG;;;;IAnD7J,0EAAwD;IACpD,sEAAI;IACA,wDACA;IAAA,oJAEe;IACf,iEAAI;IACJ,oJAWe;IACf,oJAGe;IAGf,kIASM;IACV,6DAAK;IAEL,sEAAI;IACA,oJAA2G;IAC/G,6DAAK;IACL,2EAAqB;IAAA,sJAAyG;IAAA,6DAAK;IACnI,2EAAoB;IAChB,sJAOe;IACnB,6DAAK;IACL,kIAA8J;IAC9J,2EAAoB;IAAA,sEAAG;IAAA,yDAA0D;IAAA,6DAAI;IAAA,6DAAK;IAC9F,6DAAK;;;;IAnDG,2DACA;IADA,yFACA;IAAe,2DAAwB;IAAxB,wFAAwB;IAIxB,2DAAqB;IAArB,qFAAqB;IAYD,2DAA0C;IAA1C,uLAA0C;IAMvE,2DAAuC;IAAvC,+GAAuC;IAa9B,2DAAuC;IAAvC,+GAAuC;IAEtB,2DAAuC;IAAvC,+GAAuC;IAExD,2DAAuC;IAAvC,+GAAuC;IASnC,2DAA2B;IAA3B,gGAA2B;IAC3B,2DAA0D;IAA1D,sIAA0D;;;IAiBjF,0EAAoD;IAAA,wDAAqG;;IAAA,6DAAK;;;IAA1G,2DAAqG;IAArG,sPAAqG;;;IAf7J,0EAAgE;IAC5D,sEAAI;IACA,4EAAiD;IAAA,wDAAa;IAAA,6DAAO;IAEzE,6DAAK;IACL,sEAAI;IAAC,wDAA2B;IAAA,6DAAK;IACrC,0EAAqB;IAAA,wDAAiC;;IAAA,6DAAK;IAC3D,0EAAoB;IAChB,yDACA;IAAA,4EAAgC;IAC5B,yDAGJ;IAAA,6DAAM;IACV,6DAAK;IACL,kIAA8J;IAC9J,2EAAoB;IAAA,sEAAG;IAAA,yDACF;IAAA,6DAAI;IACzB,6DAAK;IACT,6DAAK;;;;IAjBoD,2DAAa;IAAb,+EAAa;IAG7D,2DAA2B;IAA3B,gHAA2B;IACX,2DAAiC;IAAjC,8JAAiC;IAElD,2DACA;IADA,+HACA;IACI,2DAGJ;IAHI,oLAGJ;IAEmB,2DAA2B;IAA3B,gGAA2B;IAC3B,2DACF;IADE,wIACF;;;IAtL7B,yEAA0D;IACtD,+IA6Ge;IACf,6HAqDK;IACL,6HAmBK;IAGT,sEAAe;;;IA1LI,2DAAuB;IAAvB,uFAAuB;IA8GR,2DAAwB;IAAxB,wFAAwB;IAsDR,2DAAgB;IAAhB,sFAAgB;;;IA6C9E,2EAAuE;IACnE,wDACJ;;IAAA,6DAAM;;;IADF,2DACJ;IADI,8KACJ;;;IACA,2EAAuE;IACnE,wDACJ;;IAAA,6DAAM;;;IADF,2DACJ;IADI,uNACJ;;;IACA,2EAAuE;IACnE,wDACJ;IAAA,6DAAM;;;IADF,2DACJ;IADI,6HACJ;;;IAgBA,2EAC8E;IAC1E,2EAAkC;IAAA,wDAA0B;;IAAA,6DAAM;IAElE,2EAAkC;IAC9B,wDACJ;IAAA,6DAAM;IACV,6DAAM;;;IALgC,2DAA0B;IAA1B,8IAA0B;IAGxD,2DACJ;IADI,gJACJ;;;IAEJ,2EAC8E;IAC1E,uEAAK;IAAA,wDAA+B;;IAAA,6DAAM;IAC1C,uEAAK;IAAA,wDAA0D;IAAA,6DAAM;IACzE,6DAAM;;;IAFG,2DAA+B;IAA/B,mJAA+B;IAC/B,2DAA0D;IAA1D,sIAA0D;;;IAEnE,2EAC8E;IAC1E,uEAAK;IAAA,wDAAgC;;IAAA,6DAAM;IAC3C,uEAAK;IAAA,wDAA2D;IAAA,6DAAM;IAC1E,6DAAM;;;IAFG,2DAAgC;IAAhC,oJAAgC;IAChC,2DAA2D;IAA3D,uIAA2D;;;ADlR7E,MAAM,eAAe;IAY1B,YACU,MAAc,EACd,WAAwB,EACxB,eAAgC,EAChC,MAAc,EACd,WAAwB,EACzB,WAAwB,EACvB,KAAwB,EACzB,cAA8B;QAP7B,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACzB,gBAAW,GAAX,WAAW,CAAa;QACvB,UAAK,GAAL,KAAK,CAAmB;QACzB,mBAAc,GAAd,cAAc,CAAgB;QAfvC,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC;QAC/E,oCAA+B,GAAY,IAAI,CAAC,WAAW,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,+BAA+B,CAAC;QAC9I,0BAAqB,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,uBAAuB,CAAC,CAAC;QACtE,WAAM,GAAG,kEAAM,CAAC;QAcrB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC7E,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAID,iBAAiB,CAAC,OAAY,EAAE,KAAa;QAC3C,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC;IAC3C,CAAC;IAID,OAAO,CAAC,KAAY,EAAE,KAAK;QACzB,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC;IAC7D,CAAC;IAID,YAAY,CAAC,IAAI,EAAE,GAAG;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;QAC7C,OAAO,GAAG,CAAC,UAAU,CAAC;IACxB,CAAC;IAID,IAAI,CAAC,UAA0B,IAAI,EAAE,gBAAwC,IAAI;QAC/E,IAAI,CAAC,OAAO,GAAG,IAAI,oFAAe,CAAC,OAAO,EAAE,aAAa,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5E,IAAI,OAAO,IAAI,aAAa,EAAE;YAC5B,IAAI,CAAC,WAAW,GAAG;gBACjB,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;gBACpE,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;gBACvE,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;gBAC/D,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,IAAI,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,EAAE;aACnO;SACF;;YAAM,IAAI,CAAC,WAAW,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC;QACzE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,CAAC;IAC/C,CAAC;IAIO,cAAc,CAAC,EAAE;QACvB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChE,OAAO,CAAC,GAAG,CAAC;gBACV,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;gBAC5B,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,EAAE,CAAC;aAC/C,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,aAAa,CAAM,EAAE,EAAE;gBACxC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBAC3B,IAAI,kBAAkB,GAA4B,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,aAAa,EAAC,kBAAkB,CAAC,CAAC;gBACpH,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;gBACvC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAClC,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAID,aAAa;QACX,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,EAAE;YAC5D,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,0CAA0C,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;iBAC3M,IAAI,CAAC,GAAG,EAAE;gBACT,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBAChE,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBACrE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACxC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,iCAAiC,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;4BAC3M,IAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC,CAAC,CAAC;oBACL,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;YACL,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;SACjB;;YAAM,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6BAA6B,CAAC,EAAE,aAAa,CAAC,CAAC;IACxH,CAAC;IAIM,cAAc,CAAC,IAAe;QACnC,QAAQ,IAAI,EAAE;YACZ,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YACtD,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACvD,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC;SACjF;IACH,CAAC;IAIM,aAAa,CAAC,OAAO;QAC1B,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAC7C,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;YACjD,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;YACjD,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACpD,CAAC;IAID,UAAU;QACR,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;YACtC,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;YACvE,IAAI,OAAO,IAAI,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM;gBAAE,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;;gBACrN,OAAO,CAAC,IAAI,CAAC,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC;IAID,YAAY;QACV,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YACjC,IAAI,OAAO;gBACT,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,eAAe,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACxJ,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;YACT,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,qCAAqC,CAAC,EAAE,IAAI,CAAC,CAAC;QAC7J,CAAC,CAAC;IACJ,CAAC;IAIO,eAAe,CAAC,IAAyG;QAC/H,QAAQ,IAAI,EAAE;YACZ,KAAK,mBAAmB,CAAC,CAAC,OAAO,8HAAqB,CAAC;YACvD,KAAK,mBAAmB,CAAC,CAAC,OAAO,8HAAqB,CAAC;YACvD,KAAK,mBAAmB,CAAC,CAAC,OAAO,8HAAqB,CAAC;YACvD,KAAK,eAAe,CAAC,CAAC,OAAO,6GAAgB,CAAC;YAC9C,KAAK,eAAe,CAAC,CAAC,OAAO,6GAAgB,CAAC;YAC9C,OAAO,CAAC,CAAC,OAAO,6GAAgB,CAAC;SAClC;IACH,CAAC;IAID,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,6BAA6B,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;IACtG,CAAC;IAID,kBAAkB;QAChB,IAAI,QAAQ,CAAC,cAAc,CAAC,4BAA4B,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE;YAC1M,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,4BAA4B,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY;kBACvM,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;SAC9E;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;;8EAjKU,eAAe;8GAAf,eAAe;QCnB5B,gFAA2C;QACvC,0EAAmB;QACf,0EAAwB;QACpB,0EAAsD;QAClD,0EAA8F;QAAnB,qIAAS,YAAQ,IAAC;QACzF,mEAA+C;QAAA,wDACnD;;QAAA,6DAAM;QACN,0EAAqC;QACjC,qEAAG;QAAA,yDAAwD;;QAAA,6DAAI;QACnE,6DAAM;QACN,2EAAyD;QACrD,wEAAK;QACD,8EACqB;QADb,yIAAS,kBAAc,IAAC;QAE5B,2EAAyF;QACzF,yDACJ;;QAAA,6DAAS;QACb,6DAAM;QACN,wEAAK;QACD,+EACmF;QADnC,yIAAS,mBAAe,IAAC;QAErE,4EAAqE;QACrE,yDACJ;;QAAA,6DAAS;QACb,6DAAM;QACV,6DAAM;QACV,6DAAM;QACN,4EAAwD;QACpD,4EAAgC;QAC5B,qFAC6D;;QACzD,0EAAO;QACH,uEAAI;QACA,2EAAkB;QAAA,sEAAG;QAAA,yDAA8B;;QAAA,6DAAI;QAAA,6DAAK;QAC5D,2EAAmC;QAAA,sEAAG;QAAA,yDAAsB;;QAAA,6DAAI;QAAA,6DAAK;QACrE,2EAAmC;QAAA,sEAAG;QAAA,yDAA0B;;QAAA,6DAAI;QAAA,6DAAK;QACzE,2EAAkC;QAAA,sEAAG;QAAA,yDAA4B;;QAAA,6DAAI;QAAA,6DAAK;QAC1E,6GAC4B;QAC5B,2EAAkC;QAAA,sEAAG;QAAA,yDAAuB;;QAAA,6DAAI;QAAA,6DAAK;QACzE,6DAAK;QACT,6DAAQ;QACR,0EAAO;QACH,iIA2Le;QACnB,6DAAQ;QACZ,6DAAW;QACf,6DAAM;QACV,6DAAM;QACV,6DAAM;QACN,4EAA2C;QACvC,4EAAoD;QAChD,wEAAK;QACD,sEAAG;QAAA,yDAA0B;;QAAA,6DAAI;QACjC,4EAAyB;QAAA,yDAA6B;QAAA,6DAAM;QAChE,6DAAM;QACN,wEAAK;QACD,sEAAG;QAAA,yDAA4B;;QAAA,6DAAI;QACnC,4EAAyB;QAAA,yDAAgD;;QAAA,6DAAM;QACnF,6DAAM;QACN,wEAAK;QACD,sEAAG;QAAA,yDAAuB;;QAAA,6DAAI;QAC9B,4EAAyB;QAAA,yDAAwB;QAAA,6DAAM;QAC3D,6DAAM;QACV,6DAAM;QACN,4EAAuD;QACnD,sEAAG;QAAA,yDAAsC;;QAAA,6DAAI;QAC7C,+GAEM;QACN,+GAEM;QACN,+GAEM;QACV,6DAAM;QACN,4EAAsD;QAClD,sEAAG;QAAA,yDAAqC;;QAAA,6DAAI;QAC5C,4EAAwB;QACpB,yEAAM;QAAA,yDAA0B;;QAAA,6DAAO;QACvC,wEAAK;QAAA,yDAAqD;QAAA,6DAAM;QACpE,6DAAM;QAKN,4EAA6D;QACzD,yEAAM;QAAA,yDAAgC;;QAAA,6DAAO;QAC7C,wEAAK;QAAA,yDAAqD;QAAA,6DAAM;QACpE,6DAAM;QACN,+GAOM;QACN,+GAIM;QACN,+GAIM;QACN,6EAAwD;QACpD,0EAAM;QAAA,0DAAqB;;QAAA,6DAAO;QAClC,yEAAK;QAAA,0DAAgD;QAAA,6DAAM;QAC/D,6DAAM;QACN,6EAAwD;QACpD,0EAAM;QAAA,0DAAqB;;QAAA,6DAAO;QAClC,yEAAK;QAAA,0DAA+C;QAAA,6DAAM;QAC1D,yEAAK;QACD,0DAAqD;QAAA,6DAAM;QACnE,6DAAM;QACN,6EAA0D;QACtD,0EAAM;QAAA,0DAAuB;;QAAA,6DAAO;QACpC,yEAAK;QAAA,0DAAsD;QAAA,6DAAM;QAErE,6DAAM;QACN,6EAAwD;QACpD,0EAAM;QAAA,0DAAqB;;QAAA,6DAAO;QAClC,yEAAK;QAAA,0DAA2D;QAAA,6DAAM;QAE1E,6DAAM;QACN,6EAAyD;QACrD,0EAAM;QAAA,0DAAsB;;QAAA,6DAAO;QACnC,6EAA6C;QACzC,0DACuB;QAAA,6DAAM;QACrC,6DAAM;QACN,6EAAiE;QAC7D,0EAAM;QAAA,0DAAgC;;QAAA,6DAAO;QAC7C,yEAAK;QAAA,0DAAiD;QAAA,6DAAM;QAChE,6DAAM;QACN,6EAAyD;QACrD,0EAAM;QAAA,0DAAsB;;QAAA,6DAAO;QACnC,yEAAK;QAAA,0DAAqB;QAAA,6DAAM;QACpC,6DAAM;QACV,6DAAM;QACV,6DAAM;QACV,6DAAM;QACV,6DAAY;;;QAzUsC,2DAAe;QAAf,yEAAe;QAEE,2DACnD;QADmD,qJACnD;QAEO,2DAAwD;QAAxD,6LAAwD;QAOnD,2DACJ;QADI,wJACJ;QAGQ,2DAAuC;QAAvC,qGAAuC;QAG3C,2DACJ;QADI,yJACJ;QAOkB,2DAAsC;QAAtC,iKAAsC;QADlD,gKAA+B;QAIR,2DAA8B;QAA9B,oJAA8B;QACb,2DAAsB;QAAtB,4IAAsB;QACtB,2DAA0B;QAA1B,gJAA0B;QAC3B,2DAA4B;QAA5B,kJAA4B;QAC9C,2DAA2B;QAA3B,4FAA2B;QAET,2DAAuB;QAAvB,6IAAuB;QAIjC,2DAAyB;QAAzB,8EAAyB;QAoM7D,2DAA0B;QAA1B,gJAA0B;QACJ,2DAA6B;QAA7B,+FAA6B;QAGnD,2DAA4B;QAA5B,kJAA4B;QACN,2DAAgD;QAAhD,+KAAgD;QAGtE,2DAAuB;QAAvB,6IAAuB;QACD,2DAAwB;QAAxB,0FAAwB;QAIlD,2DAAsC;QAAtC,4JAAsC;QACnC,2DAA4C;QAA5C,6GAA4C;QAG5C,2DAA4C;QAA5C,6GAA4C;QAG5C,2DAA4C;QAA5C,6GAA4C;QAK/C,2DAAqC;QAArC,2JAAqC;QAE9B,2DAA0B;QAA1B,gJAA0B;QAC3B,2DAAqD;QAArD,2HAAqD;QAOpD,2DAAgC;QAAhC,sJAAgC;QACjC,2DAAqD;QAArD,2HAAqD;QAEjC,2DAA+B;QAA/B,gGAA+B;QAQtD,2DAAgC;QAAhC,iGAAgC;QAKhC,2DAAiC;QAAjC,kGAAiC;QAM7B,2DAAqB;QAArB,4IAAqB;QACtB,2DAAgD;QAAhD,sHAAgD;QAG/C,2DAAqB;QAArB,4IAAqB;QACtB,2DAA+C;QAA/C,uHAA+C;QAEhD,2DAAqD;QAArD,qIAAqD;QAGnD,2DAAuB;QAAvB,8IAAuB;QACxB,2DAAsD;QAAtD,4HAAsD;QAIrD,2DAAqB;QAArB,4IAAqB;QACtB,2DAA2D;QAA3D,iIAA2D;QAI1D,2DAAsB;QAAtB,6IAAsB;QAExB,2DACuB;QADvB,wKACuB;QAGrB,2DAAgC;QAAhC,uJAAgC;QACjC,2DAAiD;QAAjD,kHAAiD;QAGhD,2DAAsB;QAAtB,6IAAsB;QACvB,2DAAqB;QAArB,uFAAqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IEvT9B,mEAA+B;;;IAK/B,2EACY;;;;IAD+B,kFAAsB;;;IAK7E,0EAA6E;IACzE,0EAAmD;IAC/C,oEAAG;IAAA,uDAAkC;;IAAA,4DAAI;IAC7C,4DAAM;IACV,4DAAM;;IAFK,0DAAkC;IAAlC,oJAAkC;;;IAyCc,uEAC4D;IAAC,uDAC3E;;IAAA,oEAAG;IAAA,uDACD;IAAA,4DAAI;IAC/B,4DAAO;;;;IAH6F,0DAC3E;IAD2E,qJAC3E;IAAG,0DACD;IADC,sKACD;;;;;IARnC,yEAAmG;IAA9B,wYAA6B;IAC9F,yEAAmB;IAAA,uDAA2C;;IAAA,4DAAK;IACnE,yEAAmB;IAAA,uDAAqB;IAAA,4DAAK;IAC7C,yEAAmB;IAAA,uDAAoC;;IAAA,4DAAK;IAC5D,yEAAmB;IAAA,wDAAgC;;IAAA,4DAAK;IACxD,0EAAmB;IAAA,wDAAwB;IAAA,kIAIhC;IAAA,4DAAK;IAChB,0EAAmB;IAAA,wDAAwB;IAAA,4DAAK;IAChD,0EAAmB;IAAA,wDAAgB;IAAA,4DAAK;IACxC,0EAC2G;IACvG,wDAAkB;IAAA,4DAAK;IAC3B,0EAAwB;IACpB,wDAAwE;IAAA,4DAAK;IACrF,4DAAK;;;;IAhBkB,0DAA2C;IAA3C,sKAA2C;IAC3C,0DAAqB;IAArB,qFAAqB;IACrB,0DAAoC;IAApC,0JAAoC;IACpC,0DAAgC;IAAhC,uJAAgC;IAChC,0DAAwB;IAAxB,iGAAwB;IAClC,0DAA4F;IAA5F,wKAA4F;IAIlF,0DAAwB;IAAxB,wFAAwB;IACxB,0DAAgB;IAAhB,gFAAgB;IAE/B,0DAAsG;IAAtG,gOAAsG;IACtG,0DAAkB;IAAlB,4FAAkB;IAElB,0DAAwE;IAAxE,kKAAwE;;;;;IAjD5F,0EAAwD;IACpD,0EAAmC;IAAA,uDAAsB;;IAAA,2EAA4C;IAC7F,uDACJ;IAAA,4DAAO;IAAA,uDACX;;IAAA,4DAAM;IACN,mFACgE;IAA5D,4XAA2D;IAC3D,yEAAO;IACH,sEAAI;IACA,0EAAiC;IAAA,qEAAG;IAAA,wDAAsB;;IAAA,4DAAI;IAAA,4DAAK;IACnE,0EAAiC;IAAA,qEAAG;IAAA,wDAA8B;;IAAA,4DAAI;IAAA,4DAAK;IAC3E,0EAAiC;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IACvE,0EAAiC;IAAA,qEAAG;IAAA,wDAAwB;;IAAA,4DAAI;IAAA,4DAAK;IACrE,0EAAiC;IAAA,qEAAG;IAAA,wDAAgC;;IAAA,4DAAI;IAAA,4DAAK;IAC7E,0EAAiC;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IACvE,0EAAiC;IAAA,qEAAG;IAAA,wDAAsB;;IAAA,4DAAI;IAAA,4DAAK;IACnE,0EAAmC;IAAA,qEAAG;IAAA,wDAAwB;;IAAA,4DAAI;IAAA,4DAAK;IACvE,0EAAkC;IAAA,qEAAG;IAAA,wDAAuB;;IAAA,4DAAI;IAAA,4DAAK;IACzE,4DAAK;IACT,4DAAQ;IACR,yEAAO;IAaH,0HAiBK;IACT,4DAAQ;IACZ,4DAAW;IACf,4DAAM;;;;IApDiC,0DAAsB;IAAtB,0IAAsB;IACjD,0DACJ;IADI,+FACJ;IAAO,0DACX;IADW,6JACX;IACU,0DAA+B;IAA/B,gKAA+B;IAIO,0DAAsB;IAAtB,0IAAsB;IACtB,0DAA8B;IAA9B,kJAA8B;IAC9B,0DAA0B;IAA1B,8IAA0B;IAC1B,0DAAwB;IAAxB,4IAAwB;IACxB,0DAAgC;IAAhC,oJAAgC;IAChC,0DAA0B;IAA1B,8IAA0B;IAC1B,0DAAsB;IAAtB,0IAAsB;IACpB,0DAAwB;IAAxB,4IAAwB;IACzB,0DAAuB;IAAvB,2IAAuB;IAgBxC,0DAAkB;IAAlB,6EAAkB;;ADrDnD,MAAM,oBAAoB;IAgB/B,YACU,WAAwB,EACxB,MAAc,EACf,WAAwB,EACvB,eAAgC,EAChC,WAAwB,EACxB,KAAwB,EACxB,MAAc;QANd,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACf,gBAAW,GAAX,WAAW,CAAa;QACvB,oBAAe,GAAf,eAAe,CAAiB;QAChC,gBAAW,GAAX,WAAW,CAAa;QACxB,UAAK,GAAL,KAAK,CAAmB;QACxB,WAAM,GAAN,MAAM,CAAQ;QArBjB,UAAK,GAAU,EAAE,CAAC;QAClB,cAAS,GAAU,EAAE,CAAC;QACrB,cAAS,GAAS,IAAI,IAAI,EAAE;QAC5B,YAAO,GAAS,IAAI,IAAI,EAAE;QAClC,gBAAW,GAAS,EAAE,CAAC;QACvB,eAAU,GAAe,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;QACpD,eAAU,GAAW,CAAC,CAAC;QACvB,aAAQ,GAAe,EAAE;QACzB,cAAS,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QAC9C,eAAU,GAAe,EAAE,CAAC;QAC5B,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW;QAE9E,wCAAwC;QACxC,kBAAa,GAAY,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;QA4GtE,oBAAe,GAAQ,CAAC,CAAC;QAlGvB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QACrC,IAAI,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,EAAE;YAC/E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;YACvD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;SACtD;IACH,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IACD,uBAAuB;IACvB,OAAO;QACL,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChE,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACpM,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;oBACvC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;wBAC1B,IAAI,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;wBAC3D,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,SAAS,EAAE;4BACjC,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;4BAC5D,QAAQ,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,MAAM,KAAK,CAAC,IAAI,EAAE;yBACrF;wBACD,uCACK,IAAI,KAAE,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,QAAQ,EAC7M,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,IACxI;oBACH,CAAC,CAAC;oBACF,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;oBACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,IAAI,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC;oBAClL,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,GAAG,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;oBACvG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,EAAE;oBACtC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;oBAC5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS;oBAChC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;gBAClC,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IACD,aAAa,CAAC,YAAuB,EAAE,YAAoB,IAAI;QAC7D,QAAQ,YAAY,EAAE;YACpB,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YACrD,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC;YACtD,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,IAAI;SAC/D;IACH,CAAC;IACD,aAAa,CAAC,SAAoB;QAChC,QAAQ,SAAS,EAAE;YACjB,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YACrD,KAAK,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC;YAC1D,OAAO,CAAC,CAAC,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,cAAc,CAAC;SAC/D;IACH,CAAC;IAED,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,6BAA6B,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE;YAC5M,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY;kBACpI,QAAQ,CAAC,aAAa,CAAC,6BAA6B,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;SACnJ;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IACD,uBAAuB,CAAC,KAAK,IAAI,CAAC;IAClC,UAAU,CAAC,KAAa;QACtB,IAAI,KAAK,EAAE;YACT,IAAI,KAAK,CAAC,MAAM,EAAE;gBAChB,IAAI,GAAG,GAAW,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;gBAC1E,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,cAAc,EAAE,cAAc,EAAE,eAAe,CAAC,CAAC;aAC/H;;gBAAM,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;SAE1C;;YAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IACD,MAAM;QACJ,IAAI,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,EAAE;YAC/E,OAAO,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;YAC3C,OAAO,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;SAC3C;QACD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;IACvE,CAAC;IACD,UAAU,CAAC,IAAI;QACb,IAAI,WAAW,mCAAQ,IAAI,CAAC,WAAW,KAAE,gBAAgB,EAAE,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,IAAI,CAAC,UAAU,GAAE;QAC/G,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,oCAAoC,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;IAC/I,CAAC;IACD,UAAU,CAAC,KAAK;QACd,IAAI,KAAK,IAAI,CAAC,EAAC;YACb,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS;SACjC;aACI;YACH,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,SAAS;gBAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC;iBACrH;gBACH,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;gBAC7F,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBAC7C,IAAI,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACrE,IAAI,KAAK,IAAI,CAAC,CAAC;wBAAE,OAAO,IAAI;gBAC9B,CAAC,CAAC;aACH;SACF;QACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,EAAE;QACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;IACnC,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAY,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;IAC/F,CAAC;;wFA9HU,oBAAoB;kHAApB,oBAAoB;QCXjC,+EAAoC;QAChC,yEAA+C;QAC3C,yEAA4F;QAAnB,yIAAS,YAAQ,IAAC;QACvF,kEAA+C;QAAA,uDACnD;;QAAA,4DAAM;QACN,yEAAsD;QAClD,oEAAG;QAAA,uDAAgC;;QAAA,4DAAI;QAC3C,4DAAM;QACN,0EAAyD;QACrD,qFAAkE;QAC9D,4EAG2F;QAHpF,8LAAyB,0GAAkB,sBAAkB,IAApC,gQAGsC,sBAAkB,IAHxD;;QAAhC,4DAG2F;QAC/F,4DAAiB;QACjB,8MAEc;QAClB,4DAAM;QACN,0EAAwD;QACpD,iFAAsF;QAA3E,iMAAwB,8GAAkB,sBAAkB,IAApC;QAC/B,+HACY;QAChB,4DAAY;QAChB,4DAAM;QACV,4DAAM;QACN,mHAIM;QACN,qHAqDM;QACV,4DAAY;;;QAlF+C,0DACnD;QADmD,mJACnD;QAEO,0DAAgC;QAAhC,mJAAgC;QAGnB,0DAA6B;QAA7B,yEAA6B;QAErC,0DAAqG;QAArG,8NAAqG;QADlG,oFAAyB;QAUzB,0DAAwB;QAAxB,mFAAwB;QACH,0DAAa;QAAb,mFAAa;QAKxC,0DAAwC;QAAxC,4GAAwC;QAK/C,0DAAsB;QAAtB,sFAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BwC;AAEzB;AACiB;AACJ;AACL;AACqB;AAC/B;AACS;AACT;;;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,yEAAoB;aAChC;YACD;gBACE,IAAI,EAAE,QAAQ;gBACd,SAAS,EAAE,qEAAe;aAC3B;SACF;KACF;CACF;AAcM,MAAM,iBAAiB;;kFAAjB,iBAAiB;8GAAjB,iBAAiB;kHAVnB;YACP,yDAAY;YACZ,kEAAqB,CAAC,MAAM,CAAC;YAC7B,sFAAgB;YAChB,uDAAW;YACX,gEAAe;YACf,uDAAW;YACX,qEAAc;SACf;mIAEU,iBAAiB,mBAXb,yEAAoB,EAAE,qEAAe,aAElD,yDAAY,6DAEZ,sFAAgB;QAChB,uDAAW;QACX,gEAAe;QACf,uDAAW;QACX,qEAAc","sources":["./src/app/cafe/desktop/cafe-pos/components/list-invoice/detail/detail.component.ts","./src/app/cafe/desktop/cafe-pos/components/list-invoice/detail/detail.component.html","./src/app/cafe/desktop/cafe-pos/components/list-invoice/list-invoice.component.ts","./src/app/cafe/desktop/cafe-pos/components/list-invoice/list-invoice.component.html","./src/app/cafe/desktop/cafe-pos/components/list-invoice/list-invoice.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { SalesA4Component } from 'src/app/cafe/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/cafe/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/cafe/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/cafe/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/cafe/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoice, VhOrderInvoiceDetail, VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent {\r\n\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhOrderInvoices;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price;\r\n  show_discount_product = this.vhAuth.localStorageGET(\"show_discount_product\");\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    public productService: ProductService,\r\n  ) {\r\n    this.getDataInvoice(this.router.getCurrentNavigation().extras.state.id_bill);\r\n    this.init();\r\n  }\r\n\r\n\r\n\r\n  myTrackByFunction(element: any, index: number) {\r\n    return element._id ? element._id : index;\r\n  }\r\n\r\n\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit;\r\n  } \r\n\r\n\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number;\r\n  }\r\n\r\n\r\n\r\n  init(invoice: VhOrderInvoice = null, invoiceDetail: VhOrderInvoiceDetail[] = null) {\r\n    this.invoice = new VhOrderInvoices(invoice, invoiceDetail,this.vhQueryCafe);\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee()),\r\n        partner: this.vhQueryCafe.getlocalCustomer(this.invoice.getIdPartner()),\r\n        paymentName: this.setPaymentName(this.invoice.getPaymentType()),\r\n        table: this.invoice.getIdArea() == \"go_home\" ? this.languageService.translate(\"Take away\") : `${this.vhQueryCafe.getlocalArea(this.invoice.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.invoice.getIdTable()).name}`\r\n      } \r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' };\r\n    console.log(this.invoice.getInvoiceDetail());\r\n  }\r\n\r\n\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getBill(id),\r\n        this.vhQueryCafe.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        console.log(invoiceDetail);\r\n        let invoiceDetailFresh: VhOrderInvoiceDetail[] =  this.vhAlgorithm.sortDatebyDESC(invoiceDetail,'time_start_order');\r\n        this.init(invoice, invoiceDetailFresh);\r\n        this.vhComponent.hideLoading(0);\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQueryCafe.deleteBill_Billdetail(this.invoice.getID()).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000, `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\");\r\n                this.goBack();\r\n              });\r\n            });\r\n          });\r\n        }, () => { });\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\");\r\n  }\r\n\r\n\r\n\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\");\r\n      case 2: return this.languageService.translate(\"Debit\");\r\n      case 3: return this.vhQueryCafe.getlocalWallet(this.invoice.getIdWallet()).name;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '');\r\n  }\r\n\r\n\r\n\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQueryCafe.getLocalPrintPage('page_desktop_sales');\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)]);\r\n      else rejects(\"No\");\r\n    })\r\n  }\r\n  \r\n\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`);\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\");  \r\n    })\r\n  }\r\n\r\n\r\n\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component;\r\n      case 'print_size_k80_3c': return SalesK80Col3Component;\r\n      case 'print_size_k80_4c': return SalesK80Col4Component;\r\n      case 'print_size_a5': return SalesA5Component;\r\n      case 'print_size_a4': return SalesA4Component;\r\n      default: return SalesA4Component;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/cafe-pos/list-invoice'], { state: { dataRestore: this.dataRestore } });\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('sales-invoice-detail-today') && document.querySelector(\".sales-cart-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('sales-invoice-detail-today').clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<nz-layout id=\"sales-invoice-detail-today\">\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"3\" style=\"cursor: pointer;\" class=\"center-all-content\" (click)=\"goBack()\">\r\n                    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"9\" class=\"title\">\r\n                    <b>{{'Sales order' | translate}}: {{invoice.getBillCode()}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content button\">\r\n                    <div>\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                    <div>\r\n                        <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n                            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n                            {{'Delete' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"custom-scroll-bar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice.getInvoiceDetail()\" #rowSelectionTable\r\n                        nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" *ngIf=\"show_discount_product\" nzAlign='right'><b>{{'Discount value' |\r\n                                        translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <ng-container *ngFor=\"let item of rowSelectionTable.data\">\r\n                                <ng-container *ngIf=\"item.id_promotion\">\r\n                                    <tr style=\"cursor: pointer;\">\r\n                                        <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                                    </tr>\r\n                                    <ng-container *ngFor=\"let data of item.products\">\r\n                                        <tr style=\"cursor: pointer;\" >\r\n                                            <td>\r\n                                                {{data.name}} <br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    <div>{{getLotNumber(data.lots, data.id_lotproduct)}}</div> <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\" *ngFor=\"let combo of data.combos\">\r\n                                                        {{combo.quantity}}x {{combo.name}}\r\n                                                        ({{getUnit(combo.units,combo.ratio)}})\r\n                                                        <ng-container *ngIf=\"combo.lots\">\r\n                                                            <div\r\n                                                                style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                        </ng-container>,\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center' *ngIf=\"show_discount_product\"></td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let toping of data.toppings\">\r\n                                            <td>\r\n                                                <span class=\"sub-name\" style=\"padding-left:8px;\">{{toping.name}}</span>\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{toping.quantity| number:'1.0-2'}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(toping.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\">\r\n                                                    {{toping.price_origin > toping.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(toping.price_origin)\r\n                                                    : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(toping.price_origin > toping.price ? ((1 - toping.price/toping.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(toping.quantity *\r\n                                                    toping.price)}}</b>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                    <ng-container *ngFor=\"let data of item.products_gift\">\r\n                                        <tr  >\r\n                                            <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                                                <ng-container *ngIf=\"data.lots\">\r\n                                                    {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"data.combos\">\r\n                                                    <span class=\"sub-name\"\r\n                                                        *ngFor=\"let combo of data.combos\">{{combo.quantity}}x {{combo.name}}\r\n                                                        ({{getUnit(combo.units,combo.ratio)}})\r\n                                                        <ng-container *ngIf=\"combo.lots\">\r\n                                                            <div\r\n                                                                style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                        </ng-container>,\r\n                                                    </span>\r\n                                                </ng-container>\r\n                                            </td>\r\n                                            <td nzAlign='center'>\r\n                                                {{getUnit(data.units, data.ratio)}}\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{data.quantity}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{data.price_origin > data.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center' *ngIf=\"show_discount_product\"></td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                                    data.price)}}</b></td>\r\n                                        </tr>\r\n                                        <tr style=\"cursor: pointer;\" *ngFor=\"let toping of data.toppings\">\r\n                                            <td>\r\n                                                <span class=\"sub-name\" style=\"padding-left:8px;\">{{toping.name}}</span>\r\n                                            </td>\r\n                                            <td nzAlign='center'>{{toping.quantity| number:'1.0-2'}}</td>\r\n                                            <td nzAlign='right'>\r\n                                                {{vhAlgorithm.vhcurrencyunit(toping.price)}}\r\n                                                <del style=\"font-size: 0.7rem;\">\r\n                                                    {{toping.price_origin > toping.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(toping.price_origin)\r\n                                                    : ''}}\r\n                                                </del>\r\n                                            </td>\r\n                                            <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(toping.price_origin > toping.price ? ((1 - toping.price/toping.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                            <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(toping.quantity *\r\n                                                    toping.price)}}</b>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                   \r\n                                    \r\n                                </ng-container>\r\n                                <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                                    <td>\r\n                                        {{item.name}}\r\n                                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                            <br><span>Số lô: {{getLotNumber(item.lots, item.id_lotproduct)}}</span>\r\n                                        </ng-container>\r\n                                        <br>\r\n                                        <ng-container *ngIf=\"item.ptype == 5\">\r\n                                            <ng-container *ngIf=\"item.combos\">\r\n                                                <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                                                    {{combo.quantity}}x {{combo.name}}\r\n                                                    ({{getUnit(combo.units,combo.ratio)}})\r\n                                                    <ng-container *ngIf=\"combo.lots\">\r\n                                                        <div\r\n                                                            style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</div>\r\n                                                    </ng-container>,\r\n                                                </span>\r\n                                            </ng-container>\r\n                                        </ng-container>\r\n                                        <ng-container *ngFor=\"let property of item.properties ? item.properties : [];\">\r\n                                            <span class=\"sub-name\">\r\n                                                {{property.name}} - {{property.selectedValue}}</span><br>\r\n                                        </ng-container>\r\n\r\n                                        <!-- Hàng thời gian -->\r\n                                        <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                                            <div class=\"delete-btn\"></div>\r\n                                            <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                                            <p *ngIf=\"item.time_end_order\">\r\n                                                {{'_Ended at' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                                            </p>\r\n                                            <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                                                <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                                            </ng-container>\r\n                                        </div>\r\n                                    </td>\r\n\r\n                                    <td>\r\n                                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">({{getUnit(item.units,item.ratio)}})</ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'><ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">{{item.quantity | number:'1.0-2'}}</ng-container></td>\r\n                                    <td nzAlign='right'>\r\n                                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                                            {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                            <del style=\"font-size: 0.7rem;\">\r\n                                                {{item.price_origin > item.price ?\r\n                                                vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                                : ''}}\r\n                                            </del>\r\n                                        </ng-container>\r\n                                    </td>\r\n                                    <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(item.price_origin > item.price ? ((1 - item.price/item.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b></td>\r\n                                </tr>\r\n                                <tr style=\"cursor: pointer;\" *ngFor=\"let data of item.toppings\">\r\n                                    <td>\r\n                                        <span class=\"sub-name\" style=\"padding-left:8px;\">{{data.name}}</span>\r\n                                        \r\n                                    </td>\r\n                                    <td> ({{getUnit(data.units,1)}})</td>\r\n                                    <td nzAlign='center'>{{data.quantity| number:'1.0-2'}}</td>\r\n                                    <td nzAlign='right'>\r\n                                        {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                        <del style=\"font-size: 0.7rem;\">\r\n                                            {{data.price_origin > data.price ?\r\n                                            vhAlgorithm.vhcurrencyunit(data.price_origin)\r\n                                            : ''}}\r\n                                        </del>\r\n                                    </td>\r\n                                    <td nzAlign='center'  *ngIf=\"show_discount_product\">{{(data.price_origin > data.price ? ((1 - data.price/data.price_origin)*100) : 0) | number:'1.0-2'}}%</td>\r\n                                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity *\r\n                                            data.price)}}</b>\r\n                                    </td>\r\n                                </tr>\r\n                                \r\n\r\n                            </ng-container>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Salesman' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Sales date' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoice.getDate() | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Table' | translate}}</b>\r\n                    <div class=\"self-center\">{{invoiceInfo['table']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n                <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n                    {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n                </div>\r\n                <!-- <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.getDiscountBill()\">\r\n                    <span>{{'Discount' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}</div>\r\n                </div> -->\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscount())}}</div>\r\n                </div>\r\n                <div class=\"bill-area-item\" *ngIf=\"invoice.getDiscountBill()\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div class=\"bill-area-item-title\">{{'Discount' | translate}}</div>\r\n\r\n                    <div class=\"bill-area-item-value\">\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"invoice.getDiscountPoint()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div>{{'Point payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountPoint())}}</div>\r\n                </div>\r\n                <div *ngIf=\"invoice.getDiscountCoupon()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\">\r\n                    <div>{{'Coupon payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountCoupon())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getFee())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.getTax()/100)}}</div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Pay' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getPayment())}}</div>\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Rest' | translate}}</span>\r\n                    <div style=\"color: var(--ion-color-vh-red);\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() -\r\n                        invoice.getPayment())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Payment method' | translate}}</span>\r\n                    <div>{{setPaymentName(this.invoice.getPaymentType())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.getNote()}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-list-invoice',\r\n  templateUrl: './list-invoice.component.html',\r\n  styleUrls: ['./list-invoice.component.scss']\r\n})\r\nexport class ListInvoiceComponent implements OnInit {\r\n\r\n  public bills: any[] = [];\r\n  public tempBills: any[] = [];\r\n  private startTime: Date = new Date()\r\n  private endTime: Date = new Date()\r\n  searchValue: string='';\r\n  listFilter: Array<any> = [{ value: 1, name: \"All\" }]\r\n  filterType: number = 1;\r\n  listArea: Array<any> = []\r\n  listTable = this.vhQueryCafe.getlocalTables();\r\n  searchList: Array<any> = [];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n\r\n  // bien kiểm tra show bàn phím ảo hay ko\r\n  show_keyboard: boolean = this.vhAuth.localStorageGET(\"show_keyboard\");\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.startTime.setHours(0, 0, 0, 0)\r\n    this.endTime.setHours(23, 59, 59, 59)\r\n    if (this.dataRestore['searchValueToday'] && this.dataRestore['filterTypeToday']) {\r\n      this.searchValue = this.dataRestore['searchValueToday']\r\n      this.filterType = this.dataRestore['filterTypeToday']\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n  /** Lấy bill mang về */\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQueryCafe.getBills_byFields({ date: { $gte: this.startTime, $lte: this.endTime }, bill_type: { $in: [1, 4] }, id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id } }).then((res: any) => {\r\n        this.vhComponent.hideLoading().then(() => {\r\n          this.bills = res.map(item => {\r\n            let areaName = this.languageService.translate(\"Take away\");\r\n            if (item['id_table'] != 'go_home') {\r\n              let table = this.vhQueryCafe.getlocalTable(item['id_table'])\r\n              areaName = `${this.vhQueryCafe.getlocalArea(table['id_area']).name} - ${table.name}`\r\n            }\r\n            return {\r\n              ...item, customerName: this.vhQueryCafe.getlocalCustomer(item.id_customer).name, customerPhone: this.vhQueryCafe.getlocalCustomer(item.id_customer).phone, status: this.getStatusBill(item.bill_type), areaName\r\n              , paymentName: this.renderPayment(item.payment_type, item.id_wallet), employeeName: this.vhAuth.getlocalEmployee(item.id_employee).name\r\n            }\r\n          })\r\n          this.bills.reverse();\r\n          this.listArea = this.vhQueryCafe.getlocalAreas().filter(item => item.status && item.id_branch == this.vhQueryCafe.getDefaultBranch()._id || item._id == 'go_home' && item.status);\r\n          this.listArea.forEach((item, index) => { this.listFilter.push({ name: item.name, value: index + 2 }) })\r\n          this.totalValInvoice = this.getTotal()\r\n          this.tempBills = this.bills;\r\n          this.searchList = this.tempBills\r\n          this.sortFilter(this.filterType)\r\n        })\r\n      })\r\n    })\r\n  }\r\n  renderPayment(payment_type: 1 | 2 | 3, id_wallet: string = null) {\r\n    switch (payment_type) {\r\n      case 1: return this.languageService.translate('Cash')\r\n      case 2: return this.languageService.translate('Debit')\r\n      case 3: return this.vhQueryCafe.getlocalWallet(id_wallet).name\r\n    }\r\n  }\r\n  getStatusBill(bill_type: 1 | 4 | 5) {\r\n    switch (bill_type) {\r\n      case 1: return this.languageService.translate(\"Paid\")\r\n      case 4: return this.languageService.translate(\"Cancelled\")\r\n      default: return this.languageService.translate(\"Not paid yet\")\r\n    }\r\n  }\r\n  tableHeight: any;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-invoice-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-invoice-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  onCurrentPageDataChange(event) { }\r\n  searchBill(value: string) {\r\n    if (value) {\r\n      if (value.length) {\r\n        let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n        this.bills = this.vhAlgorithm.searchList(val, this.searchList, ['bill_code', 'employeeName', 'customerName', 'customerPhone'])\r\n      } else this.bills = [...this.searchList];\r\n\r\n    }else this.bills = [...this.searchList];\r\n  }\r\n  goBack() {\r\n    if (this.dataRestore['searchValueToday'] && this.dataRestore['filterTypeToday']) {\r\n      delete this.dataRestore['searchValueToday']\r\n      delete this.dataRestore['filterTypeToday']\r\n    }\r\n    this.router.navigate(['/cafe/cafe-pos'], { state: this.dataRestore })\r\n  }\r\n  gotoDetail(bill) {\r\n    let dataRestore = { ...this.dataRestore, searchValueToday: this.searchValue, filterTypeToday: this.filterType }\r\n    this.router.navigate(['/cafe/cafe-pos/list-invoice/detail'], { state: { dataRestore: dataRestore, type: bill.id_table, id_bill: bill._id } })\r\n  }\r\n  sortFilter(event) {\r\n    if (event == 1){\r\n      this.searchList = this.tempBills\r\n    }\r\n    else {\r\n      if (this.listArea[event - 2]._id == 'go_home') this.searchList = this.tempBills.filter(item => item.id_table == 'go_home')\r\n      else {\r\n        let tableOfArea = this.listTable.filter(item => item.id_area == this.listArea[event - 2]._id)\r\n        this.searchList = this.tempBills.filter(item => {\r\n          let index = tableOfArea.findIndex(data => data._id == item.id_table);\r\n          if (index != -1) return item\r\n        })\r\n      }\r\n    }\r\n    this.totalValInvoice = this.getTotal()\r\n    this.searchBill(this.searchValue)\r\n  }\r\n  totalValInvoice: any = 0;\r\n  getTotal() {\r\n    return this.bills.reduce((prev: number, next) => prev + next.total * (1 + next.tax / 100), 0)\r\n  }\r\n}\r\n","<nz-layout id=\"sales-invoice-today\">\r\n    <div class=\"sales-invoice-today-header\" nz-row>\r\n        <div nz-col nzSpan=\"2\" class=\"left-all-content\" style=\"cursor: pointer;\" (click)=\"goBack()\">\r\n            <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n            <b>{{'Invoices today' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\" class=\"search-bill\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for invoice code, employee name, customer name, customer phone' | translate}}\"\r\n                    [(appKeyboard)]=\"searchValue\"\r\n                    [isKeyboardDirectiveActive]=\"show_keyboard\"  (appKeyboardChange)=\"searchBill($event)\"/>\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"title center-all-content\">\r\n            <nz-select [(ngModel)]=\"filterType\" (ngModelChange)=\"sortFilter($event)\" nzBorderless>\r\n                <nz-option *ngFor=\"let item of listFilter\" [nzValue]=\"item.value\" [nzLabel]=\"item.name | translate\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n    </div>\r\n    <div nz-row *ngIf=\"!bills.length && !tempBills.length\" style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <p>{{'No invoice today' | translate}}</p>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"tempBills.length\" style=\"margin-top: 16px;\">\r\n        <div class='total-item small-size'>{{'Total' |translate}}<span style=\"color:var(--ion-color-vh-red)\">\r\n                {{bills.length}}\r\n            </span>{{'invoices today' | translate}}\r\n        </div>\r\n        <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"bills\" #tableSales nzShowPagination nzShowSizeChanger\r\n            (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Date' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Invoice code' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Customer' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Method' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Payment method' | translate}}</b></th>\r\n                    <th nzWidth=\"12%\" nzAlign='left'><b>{{'Employee' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                    <th nzWidth=\"10%\" nzAlign='center'><b>{{'Status' | translate}}</b></th>\r\n                    <th nzWidth=\"15%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <!-- <tr>\r\n                    <td nzAlign='left' style=\"color: var(--ion-color-vh-green);\">{{\"Total\" |translate}}</td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td nzAlign='left'></td>\r\n                    <td class=\"money-right\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(totalValInvoice)}}</td>\r\n                </tr> -->\r\n                <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"gotoDetail(invoice)\">\r\n                    <td nzAlign='left'>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                    <td nzAlign='left'>{{invoice.bill_code}}</td>\r\n                    <td nzAlign='left'>{{invoice.customerName | translate}}</td>\r\n                    <td nzAlign='left'>{{invoice.areaName | translate}}</td>\r\n                    <td nzAlign='left'>{{invoice.paymentName}} <span\r\n                            *ngIf=\"(invoice.total*(1+invoice.tax/100) - invoice.payment ) > 0 && invoice.payment_type !=2\"> -\r\n                            {{'Rest'|translate}} <b>{{vhAlgorithm.vhcurrencyunit(invoice.total*(1+invoice.tax/100) -\r\n                                invoice.payment )}}</b>\r\n                        </span></td>\r\n                    <td nzAlign='left'>{{invoice.employeeName}}</td>\r\n                    <td nzAlign='left'>{{invoice.note}}</td>\r\n                    <td nzAlign='left'\r\n                        [ngStyle]=\"{'color': invoice.bill_type == 4 ? 'var(--ion-color-vh-red)': 'var(--ion-color-vh-black)'}\">\r\n                        {{invoice.status}}</td>\r\n                    <td class=\"money-right\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total*(1+invoice.tax/100))}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n","import { KeyboardModule } from './../../../../keyboard/keyboard.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ListInvoiceComponent } from './list-invoice.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    children: [\r\n      {\r\n        path: \"\",\r\n        component: ListInvoiceComponent,\r\n      },\r\n      {\r\n        path: \"detail\",\r\n        component: DetailComponent\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ListInvoiceComponent, DetailComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    KeyboardModule\r\n  ]\r\n})\r\nexport class ListInvoiceModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}