{"version":3,"file":"src_app_cafe_desktop_menu_management_dishes_combo_combo_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/dishes/combo/add/add.component.ts","./src/app/cafe/desktop/menu/management/dishes/combo/add/add.component.html","./src/app/cafe/desktop/menu/management/dishes/combo/combo.component.ts","./src/app/cafe/desktop/menu/management/dishes/combo/combo.component.html","./src/app/cafe/desktop/menu/management/dishes/combo/combo.module.ts","./src/app/cafe/desktop/menu/management/dishes/combo/detail/detail.component.ts","./src/app/cafe/desktop/menu/management/dishes/combo/detail/detail.component.html"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  public foodList: any[] = [];\r\n  public searchList: any[] = [];\r\n  public finalList: any[] = [];\r\n  public componentFoods: any[] = [];\r\n  comboForm: FormGroup;\r\n  show: any = []\r\n  value: any = 0;\r\n  total: number = 0;\r\n  public price: any;\r\n  barcode: boolean = true;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  editPrice: any = {}\r\n  createProd: boolean = false;\r\n  heightScroll: string;\r\n  list_category = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 5)\r\n  public indexTab = 0;\r\n  public tabs: any = [\r\n    this.languageService.translate('All'),\r\n    'Product',\r\n    'Service',\r\n    'Ingredient',\r\n    'Topping',\r\n  ];\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm()\r\n    this.getFoodLList()\r\n\r\n  }\r\n  ngOnDestroy() {\r\n    if (!this.createProd && this.comboForm.value['img'])\r\n      this.vhImage.deleteThumbnail([this.comboForm.value['img']]).then(() => { })\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".combo-table\"))\r\n      this.heightScroll = document.querySelector(\".combo-table\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight + \"px\";\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * khỡi tạo form với các trường để tạo combo lên DB\r\n   * @example this.initForm()\r\n   */\r\n  initForm() {\r\n    this.comboForm = new FormGroup({\r\n      name: new FormControl(\"\", [Validators.required]),\r\n      img: new FormControl(\"\"),\r\n      barcode: new FormControl(''),\r\n      // allow_sell: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      describe: new FormControl(''),\r\n      price: new FormControl(0),\r\n      time_warning : new FormControl(0),\r\n      unit: new FormControl('', [Validators.required]),\r\n      id_category: new FormControl('', [Validators.required]),\r\n    })\r\n  }\r\n\r\n  // set barcode tự động\r\n  setBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.comboForm.controls['barcode'].setValue(newbarcode)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @example this.checkBarcode('123456')\r\n   */\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n    } else {\r\n      this.barcode = false\r\n    }\r\n  }\r\n  // modal component dishes/beverage\r\n  isVisibleAddComponent = false;\r\n  showComponent() {\r\n    this.indexTab = 0\r\n    this.isVisibleAddComponent = true\r\n  }\r\n\r\n  handleCancelComponent() {\r\n    this.isVisibleAddComponent = false;\r\n  }\r\n\r\n\r\n  /**\r\n   * get danh sách sp và dịch vụ để chọn vào thành phần cho combo\r\n   * @example this.getFoodLList()\r\n   */\r\n  getFoodLList() {\r\n    this.foodList = this.vhAlgorithm.sortDatebyASC(this.vhQueryCafe.getlocalDetailProducts().filter(filter => filter.type != 5).map((localProduct) => {\r\n      if (localProduct.units) {\r\n        localProduct.units = this.vhAlgorithm.sortNumberbyASC(\r\n          localProduct.units,\r\n          'ratio'\r\n        );\r\n        let unit = this.vhQueryCafe.getUnit_byRatio(localProduct.units, 1);\r\n        return {\r\n          ...localProduct,\r\n          choose: false,\r\n          display: 'flex',\r\n          quantity: 1,\r\n          ...unit,\r\n        };\r\n      } else\r\n        return { ...localProduct, choose: false, display: 'flex', quantity: 1 };\r\n    }), 'name');\r\n    this.searchList = this.foodList;\r\n    console.log(this.foodList);\r\n    \r\n    this.finalList = this.searchList\r\n  }\r\n\r\n  tempVal: string = ''\r\n  /**\r\n   * lọc tên sp theo tên\r\n   * @example this.searchFood('')\r\n   */\r\n  searchFood(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length) this.finalList = this.vhAlgorithm.searchList(tempVal, this.searchList, ['name'])\r\n    else this.finalList = this.searchList\r\n  }\r\n  /**\r\n   * bắt sk thay đổi tab xem loại sản phẩm\r\n   * @param event \r\n   * @example this.changeTypeGood(0)\r\n   */\r\n  changeTypeGood(event) {\r\n    this.indexTab = event;\r\n    if(this.indexTab == 0 ) this.finalList = this.foodList;\r\n    else this.finalList = this.foodList.filter(filter => filter.type == this.indexTab)\r\n    this.searchList = this.foodList;\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn sp vào combo, xử lý các sp đã chọn vào thành phần của combo\r\n   * @example this.handleComponent()\r\n   */\r\n  handleComponent() {\r\n    this.componentFoods = this.searchList.filter(item => item.choose).map(e => {return {...e, quantity :1 ,price_origin  : e.price}});\r\n    this.show = this.componentFoods\r\n    setTimeout(() => this.renderPrice(this.componentFoods), 100)\r\n    this.comboPrice()\r\n    this.isVisibleAddComponent = false\r\n  }\r\n\r\n  /**\r\n   * cleavejs cho các sp trong combo để xử lý giá sp\r\n   * @example this.renderPrice([])\r\n   */\r\n  renderPrice(arr: any[]) {\r\n    arr.forEach(item => {\r\n      if (!item.id_subproduct) this.editPrice['product-' + item._id] = this.vhAlgorithm.vhnumeral('.product-' + item._id)\r\n      else this.editPrice['product-' + item.id_subproduct] = this.vhAlgorithm.vhnumeral('.product-' + item.id_subproduct)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tính lại giá tổng combo\r\n   * @example this.comboPrice()\r\n   */\r\n  comboPrice(dish?: any) {\r\n    if (dish) {\r\n      let price: string = '';\r\n      if (dish.id_subproduct) { price = this.editPrice['product-' + dish.id_subproduct].getRawValue(); }\r\n      else { price = this.editPrice['product-' + dish._id].getRawValue(); }\r\n      dish.price = parseFloat(price)\r\n    }\r\n    this.total = this.show.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n    this.comboForm.controls['price'].setValue(this.total);\r\n  }\r\n\r\n  // Thực hiện xóa sản phẩm trong combo\r\n  deleteFood(food) {\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate('Are you sure to delete this product?')}`, \"OK\", this.languageService.translate('Cancel')).then(() => {\r\n      this.componentFoods.splice(this.componentFoods.findIndex(item => item.name == food.name), 1);\r\n      this.finalList.map(item => {\r\n        if (item.name == food.name) {\r\n          item.display = 'flex';\r\n          item.price = food.price_origin;\r\n          item.choose = false\r\n        }\r\n      })\r\n      this.show = this.componentFoods;\r\n      this.comboPrice()\r\n      this.editPrice['product-' + food._id] = null\r\n      Promise.all([this.vhComponent.showLoading(\"\", \"transparent-loading\", null, null, false),])\r\n        .finally(() => this.vhComponent.hideLoading(0))\r\n    }, () => { })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/dishes/combo'], { state: this.dataRestore });\r\n  }\r\n\r\n  /**\r\n   * tạo combo lên DB\r\n   * @example this.saveCombo()\r\n   */\r\n  saveCombo() {\r\n    let update = this.cleanForm(this.comboForm).value;\r\n    update['units'] = [{\r\n      barcode: update.barcode,\r\n      price: update.price,\r\n      unit: update.unit,\r\n      ratio: 1,\r\n      default: true\r\n    }]\r\n    delete update.barcode;\r\n    delete update.price;\r\n    delete update.unit;\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      if (!this.barcode) {\r\n        this.vhComponent.hideLoading(0).then(() => this.vhComponent.showToast(1500, this.languageService.translate(\"Barcode already exists\"), \"alert-toast\"))\r\n      } else {\r\n        this.vhQueryCafe.addProduct_Cafe({ ...update, type: 5 }).then(async ({ _id, name }: any) => {\r\n          console.log(_id);\r\n          \r\n          this.createProd = true\r\n          if (this.show.length) {\r\n            await this.addComponentFoods(_id, this.show)\r\n          }\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(1000, name + \" \" + (this.languageService.translate(\"has been added successfully\")), \"success-toast\");\r\n            this.goBack();\r\n          })\r\n        }).catch(err => {\r\n          this.vhComponent.hideLoading(0).then(() => this.vhComponent.showToast(1500, this.languageService.translate(\"An error occurred while adding product. Please try again\"), \"alert-toast\"))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * bắt sk thay đổi đơn vị của sp trong combo\r\n   * @param data sp trong combo\r\n   * @param event giá trị ratio của đơn vị\r\n   * @example this.changeRatio(combo_prodct, 1)\r\n   */\r\n  changeRatio(data, event){\r\n    let unit = this.vhQueryCafe.getUnit_byRatio(data.units, event);\r\n    data.price = unit.price;\r\n    data.ratio = event;\r\n    setTimeout(() => {\r\n      this.comboPrice(data)\r\n    }, 100);\r\n  }\r\n\r\n  // Hàm thực hiện xóa space (TRIM) các control trong form\r\n  public cleanForm(formGroup: FormGroup) {\r\n    Object.keys(formGroup.controls).forEach((key) => {\r\n      if (key === 'name' || key === 'barcode' || key === 'brand' || key === 'unit') {\r\n        if (formGroup.get(key).value) {\r\n          let value = formGroup.get(key).value.toString().trim();\r\n          formGroup.get(key).setValue(value)\r\n        }\r\n      }\r\n    });\r\n    return formGroup;\r\n  }\r\n\r\n  /**\r\n   * thêm danh sách thành phần combo lên DB\r\n   * @example this.addComponentFoods(id_combo, [])\r\n   */\r\n  addComponentFoods(_id, foods: any[]) {\r\n    return new Promise<any>((resolve) => {\r\n      this.vhQueryCafe.addCombosProduct_Cafe(_id, foods.map(food => {\r\n        let data = {\r\n          id_product: food._id,\r\n          type: food.type,\r\n          quantity: food.quantity,\r\n          price: food.price,\r\n          ratio: food.ratio\r\n        }\r\n        if (food.id_subproduct) data['id_subproduct'] = food.id_subproduct;\r\n        return data;\r\n      })).then((combos) => {\r\n        if (combos) resolve(true)\r\n      }, error => {\r\n        console.log('error', error);\r\n        resolve(false)\r\n      }).catch(e => {\r\n        console.log(e);\r\n        \r\n      })\r\n    })\r\n  }\r\n\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 128, 128, \"products\", this.comboForm.value.img || null).then(\r\n      photoURL => {\r\n        this.comboForm.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), \"success-toast\");\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), \"alert-toast\");\r\n      }\r\n    );\r\n  }\r\n      \r\n      \r\n      \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.COMBO)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.COMBO }).then((res: any) => {\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.comboForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n  \r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <div class=\"combo\">\r\n    <div class=\"combo-name\">\r\n      <div nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"20\" class=\"title left-all-content\">\r\n          <b>{{'Add combo'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"add-button\">\r\n          <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"saveCombo()\"\r\n            [disabled]=\"comboForm.invalid || !componentFoods.length\"\r\n            [ngStyle]=\"{opacity: (comboForm.invalid || !componentFoods.length) ? 0.5 : 1}\">\r\n            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n            {{'Save' | translate}}</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"custom-scroll-bar\" style=\"padding-top: 16px;height: 87%;overflow-y: auto;\">\r\n        <form nz-form [formGroup]=\"comboForm\" style=\"height: 100%\">\r\n          <div nz-row style=\"margin-bottom: 1.6%\">\r\n            <div nz-col nzSpan=\"3\">\r\n              <div nz-row>\r\n                <div nz-col nzSpan=\"24\">\r\n                  <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n                    <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n                      (change)=\"onUpload($event)\" />\r\n                    <img [ngStyle]=\"{width: comboForm.value.img ? '100%' : '60px'}\"\r\n                      onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"comboForm.value.img\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"21\">\r\n              <div nz-row style=\"justify-content: space-between; height: 100%;\">\r\n                <div nz-col nzSpan=\"9\" class=\"combo-name-input\">\r\n                  <div><b>{{'Combo name' | translate}}*</b></div>\r\n                  <nz-form-item style=\"margin-bottom: 0;\">\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                      <nz-input-group>\r\n                        <input formControlName=\"name\" nz-input placeholder=\"{{'Enter combo name' | translate}}\"\r\n                          required />\r\n                        <ng-template #combineTplName let-control>\r\n                          <ng-container *ngIf=\"control.hasError('required')\">\r\n                            {{'Combo name is required' | translate}}\r\n                          </ng-container>\r\n                        </ng-template>\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n                <div nz-col nzSpan=\"13\" class=\"combo-price-input\">\r\n                  <div><b>{{'Barcode' | translate}}</b></div>\r\n                  <nz-form-item style=\"margin-bottom: 0;\">\r\n                    <nz-form-control>\r\n                      <nz-input-group style=\"display: flex\">\r\n                        <input formControlName=\"barcode\" nz-input\r\n                          placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" #qr\r\n                          (keyup)=\"checkBarcode(qr.value)\" />\r\n                        <i nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcode()\" nz-tooltip\r\n                          nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                          nzTooltipPlacement=\"bottom\"></i>\r\n                      </nz-input-group>\r\n                      <div class=\"validation-errors\">\r\n                        <ng-container>\r\n                          <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                            <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                          </div>\r\n                        </ng-container>\r\n                      </div>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div nz-row style=\"justify-content: space-between;\">\r\n            <div nz-col nzSpan=\"12\" class=\"small-size combo-warning\">\r\n              <div><b class='label'>{{'Category'| translate}}*</b></div>\r\n              <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                <!-- Thanh chọn -->\r\n                <nz-select formControlName=\"id_category\" \r\n                    [nzDropdownRender]=\"addCategoryTemplate\"\r\n                    nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                    <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                </nz-select>\r\n                <!-- Thêm danh mục -->\r\n                <ng-template #addCategoryTemplate>\r\n                    <nz-divider></nz-divider>\r\n                    <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                        <!-- Input nhập tên -->\r\n                        <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                        <!-- Nút thêm -->\r\n                        <button (click)=\"addCategory(categoryName)\" nz-button\r\n                            [nzLoading]=\"isAddingCategory\"\r\n                            [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                            {{'Add' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </ng-template>\r\n              </nz-form-control>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b>{{'Unit' | translate}}</b>*</div>\r\n              <nz-form-item style=\"margin-bottom: 2%;\">\r\n                <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit' | translate}}\" />\r\n                    <ng-template #combineTplUnit let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">\r\n                        {{'Unit can not be empty' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" class=\"small-size combo-warning\">\r\n              <div><b>{{'Warning timeout (minute)' | translate}}</b></div>\r\n              <nz-form-item style=\"margin-bottom: 2%;\">\r\n                <nz-form-control>\r\n                  <nz-input-group>\r\n                    <input formControlName=\"time_warning\" nz-input type=\"number\"\r\n                      placeholder=\"{{'Enter warning timeout (minutes)'|translate}}\" />\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b>{{'Description' | translate}}</b></div>\r\n              <nz-form-item style=\"margin-bottom: 2%;\">\r\n                <nz-form-control>\r\n                  <nz-input-group>\r\n                    <textarea nz-input formControlName=\"describe\" placeholder=\"{{'Description' | translate}}\"\r\n                      [nzAutosize]=\"{ minRows: 1, maxRows: 2 }\" style=\"border-radius: 5px;\"></textarea>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- <div nz-col nzSpan=\"24\">\r\n              <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell' |\r\n                translate}}</label>\r\n            </div> -->\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"combo-component\">\r\n      <div nz-row style=\"padding-bottom: 15px;\">\r\n        <div nz-col nzSpan=\"20\">\r\n          <div class=\"large-size\"><b>{{'Combo components' | translate}}</b></div>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n          <div>\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"showComponent()\">\r\n              <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n              {{'Add'|translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div nz-row class=\"content-Component custom-scroll-bar\" *ngIf=\"!componentFoods.length\">\r\n        <div class=\"no-data\">\r\n          <p>{{'No data' | translate}}</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"combo-table\" *ngIf=\"componentFoods.length\" style=\"height: 83%;overflow: hidden;\">\r\n        <nz-table [nzScroll]=\"{ y: heightScroll }\" #cf nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"show\"\r\n          [nzShowPagination]=\"false\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Component name' | translate}}</b></th>\r\n              <th nzWidth=\"15%\" nzAlign=\"left\"><b>{{'Unit' | translate}}</b></th>\r\n              <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Quantity' | translate}}</b></th>\r\n              <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n              <th nzWidth=\"15%\" nzAlign=\"right\"><b>{{'Price total' | translate}}</b></th>\r\n              <th nzWidth=\"10%\" nzAlign=\"center\"></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td></td>\r\n              <td style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                {{'Combo price' |translate}}\r\n              </td>\r\n              <td></td>\r\n              <td></td>\r\n              <td></td>\r\n              <td nzAlign=\"right\" style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                {{vhAlgorithm.vhcurrencyunit(total)}}\r\n              </td>\r\n              <td></td>\r\n\r\n            </tr>\r\n            <tr *ngFor=\"let data of show; let i = index\" style=\"cursor: pointer;\">\r\n              <td style=\"padding: 0;\" nzAlign='center'>\r\n                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n              </td>\r\n              <td>{{ data.name }}</td>\r\n              <td>\r\n                <nz-select style=\"width:100%;\" [(ngModel)]=\"data.ratio\" (ngModelChange)=\"changeRatio(data, $event)\"\r\n                  nzShowSearch nzPlaceHolder=\"{{'Select unit' | translate}}\">\r\n                  <nz-option *ngFor=\"let item of data.units;index as index_units\" nzLabel=\"{{item.unit}}\"\r\n                    [nzValue]=\"item.ratio\">\r\n                  </nz-option>\r\n                </nz-select>\r\n              </td>\r\n              <td>\r\n                <nz-input-number (ngModelChange)=\"data.quantity = $event;comboPrice()\" [nzStep]=\"1\"\r\n                  [(ngModel)]=\"data.quantity\" type=\"number\" nz-input [nzMin]=\"0.1\"\r\n                  [nzMax]=\"9999999999\"></nz-input-number>\r\n              </td>\r\n              <td>\r\n                <input *ngIf=\"data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input\r\n                  [ngClass]=\"'product-' +data.id_subproduct  \" (blur)=\"comboPrice(data)\">\r\n                <input *ngIf=\"!data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input\r\n                  [ngClass]=\"'product-' +  data._id\" (blur)=\"comboPrice(data)\">\r\n              </td>\r\n              <td nzAlign=\"right\">\r\n                {{ vhAlgorithm.vhcurrencyunit((data.price)*(data.quantity)) }}\r\n              </td>\r\n              <td>\r\n                <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\" (click)=\"deleteFood(data)\"></i>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>\r\n\r\n<!--Modal component dishes/beverage-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleAddComponent\" [(nzVisible)]=\"isVisibleAddComponent\"\r\n  nzTitle=\"{{languageService.translate('Select combo components')}}\" (nzOnOk)=\"handleComponent()\"\r\n  (nzOnCancel)=\"handleCancelComponent()\" [nzMaskClosable]=\"false\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\"><input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n          (ngModelChange)=\"searchFood($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          placeholder=\"{{ 'Search for product name, barcode' | translate}}\" />\r\n      </div>\r\n    </div>\r\n    <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event);\" [nzSelectedIndex]=\"indexTab\">\r\n      <nz-tab *ngFor=\"let tab of tabs\" nzTitle=\"{{tab | translate}}\"></nz-tab>\r\n    </nz-tabset>\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"20\" class=\"infinite-container\">\r\n          <nz-list>\r\n            <nz-list-item *cdkVirtualFor=\"let item of finalList\" style=\"cursor: pointer;\"\r\n              [ngStyle]=\"{'display': item.display}\">\r\n              <nz-list-item-meta (click)=\"item.choose = !item.choose\"\r\n                nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\" nzDescription=\"{{item.name}}\">\r\n              </nz-list-item-meta>\r\n              <label nz-checkbox [(ngModel)]=\"item.choose\"></label>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"finalList.length === 0\"></nz-list-empty>\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelComponent()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleComponent()\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-combo',\r\n  templateUrl: './combo.component.html',\r\n  styleUrls: ['./combo.component.scss']\r\n})\r\nexport class ComboComponent {\r\n\r\n  list_show_combo_hidden: any = [];\r\n  list_show: any = [];\r\n  list_subcombos: any = [];\r\n  keySearch: any = '';\r\n  selectedValue: any = '1'; //theo menu\r\n  selectedIndex: number = 0; // theo index của tab\r\n  heightScroll: string;\r\n  listTabs = ['Allow sale', 'Hidden'];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhComponent: VhComponent\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#combo-list\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".combo-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#combo-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".combo-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**get data product, category */\r\n  getData() {\r\n    if (this.dataRestore) {\r\n      this.keySearch = this.dataRestore.keySearch;\r\n      this.selectedValue = this.dataRestore.selectedValue;\r\n      this.selectedIndex = this.dataRestore.selectedIndex;\r\n    }\r\n    this.changeTab(this.selectedIndex);\r\n  }\r\n\r\n\r\n  list_combo_hidden = []\r\n  /**\r\n   * Lấy danh sách sản phẩm đã ẩn\r\n   */\r\n  getHiddenProducts() {\r\n    this.vhQueryCafe.refreshLocalProducts_Delete_Hidden(VhType.COMBO).then(() => {\r\n      this.list_show_combo_hidden = this.vhQueryCafe.getlocalProducts(VhType.COMBO).filter(item => item.delete_hidden).map(item => this.processCombo(item));\r\n      this.list_combo_hidden = this.list_show_combo_hidden\r\n      this.list_subcombos = this.vhAlgorithm.sortStringbyASC(this.list_show_combo_hidden, 'name');\r\n      this.searchCombos(this.keySearch);\r\n\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lí dữ liệu của sản phẩm (units, subproduct, name_category, ...)\r\n   * @param item\r\n   * @returns\r\n   */\r\n  processCombo(item: any): any {\r\n    return {\r\n      ...item,\r\n      quantity: item.combos.length,\r\n      price: item.units[0].price,\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(id, value, parent?, is_sub?) {\r\n    console.log('value', value);\r\n    console.log('id', id);\r\n\r\n\r\n    this.vhQueryCafe.updateProduct(id, value).then((res) => {\r\n      console.log(res);\r\n      this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n      if (!value.delete_hidden) {\r\n        this.list_combo_hidden = this.list_combo_hidden.filter(item => item._id != id);\r\n        this.list_show_combo_hidden = this.list_show_combo_hidden.filter(item => item._id != id);\r\n      }\r\n    }, error => {\r\n      console.log(error);\r\n    }).catch(e => {\r\n      console.log(e);\r\n    })\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * Khi thay đổi tab\r\n   * @example this.changeTab('1');\r\n   */\r\n  changeTab(value) {\r\n    this.filterByAllowSell(value);\r\n    if (value == '1') {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo allow_sell\r\n   */\r\n  filterByAllowSell(index) {\r\n    this.list_show = this.vhQueryCafe.getlocalProducts(VhType.COMBO).map(item => this.processCombo(item));\r\n    if (this.list_show) {\r\n      if (index == 0) this.list_show = this.list_show.filter(item => item.delete_hidden == false);\r\n      // else if(index == 1) this.list_show = this.list_show_combo_hidden.filter(item => !item.delete_hidden == false);\r\n      this.list_subcombos = this.list_show;\r\n      this.searchCombos(this.keySearch);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm (tab đã ẩn) theo tên\r\n   * @example this.searchCombos('');\r\n   */\r\n  searchCombos(value) {\r\n    this.list_show = this.vhAlgorithm.searchList(\r\n      this.vhAlgorithm.changeAlias(value.toLowerCase()),\r\n      this.list_subcombos,\r\n      ['name']\r\n    );\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/dishes']);\r\n  }\r\n\r\n\r\n  gotoAdd() {\r\n    let dataRestore = { keySearch: this.keySearch, selectedValue: this.selectedValue, selectedIndex: this.selectedIndex }\r\n    this.router.navigate(['/cafe/dashboard/management/dishes/combo/add'], { state: { dataRestore } });\r\n  }\r\n\r\n\r\n  gotoComboDetail(data, isFromHidden?: boolean) {\r\n    let dataRestore = { keySearch: this.keySearch, selectedValue: this.selectedValue, selectedIndex: this.selectedIndex };\r\n    const state = {\r\n      data: data,\r\n      dataRestore\r\n    }\r\n    if (isFromHidden) {\r\n      state['isFromHidden'] = true;\r\n    }\r\n    this.router.navigate(['/cafe/dashboard/management/dishes/combo/detail'], {\r\n      state: state\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  name_col = false;             // chọn sort cột tên sản phẩm\r\n  quantity_col = false;         // Chọn sắp xếp theo đơn vị\r\n  price_col = false;            // Chọn sắp xếp theo giá\r\n\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   * @param typeList      // Biến dùng để xác định danh sách sắp xếp là cho bán hay không cho bán\r\n   */\r\n  sortTable(colName) {\r\n    let methodName = colName === 'name' ? 'sortVietnameseby' : 'sortNumberby';\r\n    let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n    this.list_show = this.vhAlgorithm[methodName + direction]([...this.list_show], colName);\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"combo-list\" class=\"height-layout\">\r\n  <div nz-row class=\"combo-list-header\">\r\n    <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n      <b>{{'List of combos'|translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input [(ngModel)]=\"keySearch\" type=\"text\" nz-input [placeholder]=\"'Search for combo name' | translate\"\r\n          (keyup)=\"searchCombos(keySearch)\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <div nz-col nzSpan=\"9\" class=\"right-all-content\">\r\n      <div>\r\n        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAdd()\">\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n          {{'Add' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"selectedIndex\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <nz-tab  nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class=\"total-item small-size\">\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show.length}}&nbsp; </span> {{'combos' | translate}}\r\n        </div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #allowSale nzShowPagination nzShowSizeChanger [nzNoResult]=\"'No data'| translate\" [nzData]=\"list_show\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b></b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"40%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Combo name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"center\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"quantity_col = !quantity_col; sortTable('quantityCombos')\">\r\n                <b>{{'Number of components' | translate}}</b>\r\n                <i nz-icon [nzType]=\"quantity_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"right\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"price_col = !price_col; sortTable('price')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let data of allowSale.data\" (click)=\"gotoComboDetail(data, tab === 'Hidden')\" style=\"cursor: pointer;\">\r\n              <td style=\"padding: 0;\" nzAlign='center'>\r\n                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n              </td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td nzAlign=\"center\">{{data.combos.length}}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.units[0].price)}}</td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n      <nz-tab  nzTitle=\"{{'Hidden not allow sell' | translate}}\">\r\n        <div nz-row class=\"total-item small-size\">\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_combo_hidden.length}}&nbsp; </span> {{'combos' | translate}}\r\n        </div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #comboHidden nzShowPagination nzShowSizeChanger [nzNoResult]=\"'No data'| translate\" [nzData]=\"list_show_combo_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b></b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"40%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Combo name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"center\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"quantity_col = !quantity_col; sortTable('quantityCombos')\">\r\n                <b>{{'Number of components' | translate}}</b>\r\n                <i nz-icon [nzType]=\"quantity_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"right\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"price_col = !price_col; sortTable('price')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!comboHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"5\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <tr *ngFor=\"let data of comboHidden.data\"   style=\"cursor: pointer;\">\r\n              <td style=\"padding: 0;\" nzAlign='center'>\r\n                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n              </td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td nzAlign=\"center\">{{data.combos.length}}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.units[0].price)}}</td>\r\n              <td class=\"money-right\">\r\n                <nz-switch   [(ngModel)]=\"data.delete_hidden\"\r\n                  (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                </nz-switch>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { ComboComponent } from './combo.component';\r\nimport { AddComponent } from './add/add.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component:  ComboComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component:  AddComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component:  DetailComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ComboComponent,\r\n    AddComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ScrollingModule,\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TranslateModule,\r\n    IonicModule\r\n  ]\r\n})\r\nexport class ComboModule { }\r\n","import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport Cleave from 'cleave.js';\r\nimport { VhAlgorithm, VhImage, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  barcode: boolean = true;\r\n  comboForm: FormGroup;\r\n  public price: any;\r\n  data: any;\r\n   \r\n  priceDef: any;\r\n  editPrice: any[] = [];\r\n  heightScroll: string;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  list_category = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 5)\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef\r\n\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state.data; \r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm()\r\n\r\n    if (this.data.combos) {\r\n      for (let i = 0; i < this.data.combos.length; i++) {\r\n        // let dataPush = {};\r\n        let product;\r\n        if(this.data.combos[i].id_subproduct){\r\n          product = this.vhQueryCafe.getlocalDetailProduct(this.data.combos[i].id_subproduct)\r\n        }else{\r\n          product = this.vhQueryCafe.getlocalDetailProduct(this.data.combos[i].id_product)\r\n        }\r\n        this.data.combos[i].units = product.units;\r\n      }\r\n      setTimeout(() => {\r\n        this.renderPrice(this.data.combos)\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".combo-table\"))\r\n      this.heightScroll = document.querySelector(\".combo-table\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight + \"px\";\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n  // Định dạng hiển thị kiểu giá ngoài giao diện 100,000 VNĐ\r\n  renderPrice(arr: any[]) {\r\n    arr.forEach((item) => {\r\n      if (!item.id_subproduct) this.editPrice['product-' + item._id] = this.vhAlgorithm.vhnumeral('.product-' + item._id)\r\n      else this.editPrice['product-' + item.id_subproduct] = this.vhAlgorithm.vhnumeral('.product-' + item.id_subproduct)\r\n    })\r\n  }\r\n\r\n  // cập nhật lại giá tiền khi đổi đơn vị\r\n  changeUnit(event, data) {\r\n    let unit_exchange = data.units.find(item => item.ratio == event);\r\n    data.price = unit_exchange.price;\r\n    data.ratio = unit_exchange.ratio;\r\n    data.unit = unit_exchange.unit;\r\n    setTimeout(() => {\r\n      this.comboPrice(data)\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * gán giá trị combo nhận dc từ state truyền qua vào form để show lên giao diện\r\n   * @example this.initForm()\r\n   */\r\n  initForm() {\r\n    this.comboForm = new FormGroup({\r\n      name: new FormControl(this.data.name, [Validators.required]),\r\n      img: new FormControl(this.data.img),\r\n      allow_sell: new FormControl(this.data.delete_hidden ? false : true),\r\n      delete_hidden: new FormControl(this.data.delete_hidden),\r\n      price: new FormControl(this.data.units[0].price),\r\n      barcode: new FormControl(this.data.units[0].barcode),\r\n      describe: new FormControl(this.data.describe),\r\n      unit: new FormControl(this.data.units[0].unit),\r\n      time_warning : new FormControl(this.data.time_warning),\r\n      id_category: new FormControl(this.data.id_category, Validators.required),\r\n    })\r\n  }\r\n\r\n\r\n  // Tự động tạo barcode và lưu\r\n  setBarcode(){\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if(this.barcode){\r\n      this.comboForm.controls['barcode'].setValue(newbarcode)\r\n      this.updateCombo({ units :[{ \r\n        barcode: this.comboForm.value['barcode'],\r\n        price : this.comboForm.value['price'],\r\n        unit : this.comboForm.value['unit'],\r\n        ratio : 1\r\n      }]})\r\n    }\r\n  }\r\n\r\n  // Kiểm tra mã barcode vừa tạo đã tồn tại chưa ( chưa: true, đã tồn tại: false)\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)\r\n    if(detailproduct == null){\r\n      this.barcode = true;\r\n    }else{\r\n      this.barcode = false\r\n    }\r\n  }\r\n\r\n  // Cập nhật combo\r\n  updateCombo(object) {\r\n    if (object.hasOwnProperty('allow_sell')) {\r\n      object = { delete_hidden: !object.allow_sell }\r\n    }\r\n    if(this.comboForm.valid)\r\n      this.vhQueryCafe.updateProduct_Cafe(this.data._id, object)\r\n  }\r\n\r\n\r\n  //  hàm Cập nhật giá tổng của combo\r\n  comboPrice(dish?: any) {\r\n    console.log(dish);\r\n    \r\n    if (dish) {\r\n      let price: string = '';\r\n      if (dish.id_subproduct) { price = this.editPrice['product-' + dish.id_subproduct].getRawValue(); }\r\n      else { price = this.editPrice['product-' + dish._id].getRawValue(); }\r\n      dish.price = price ? parseFloat(price) : dish.price_origin\r\n    }\r\n    let price = 0\r\n    for (let product of this.data.combos) {\r\n      price = price + (product.price * product.quantity)\r\n    }\r\n    this.comboForm.controls['price'].setValue(price)\r\n    this.updateCombo({ units :[{ \r\n      barcode: this.comboForm.value['barcode'],\r\n      price : price,\r\n      unit : this.comboForm.value['unit'],\r\n      ratio : 1\r\n    }]})\r\n    if(dish) this.updateshow(this.data._id, dish)\r\n\r\n  }\r\n\r\n  // hàm cập nhật giá 1 sản phẩm khi thay đổi trong combo\r\n  updatePrice(data){\r\n    let dataUpdate = this.data.combos.find(item => item.id_product == data.id_product);\r\n    dataUpdate.price = data.price;\r\n    dataUpdate.ratio = data.ratio;\r\n    dataUpdate.unit = data.unit;\r\n    this.updateshow(this.data._id, dataUpdate);\r\n    this.comboPrice(data);\r\n  }\r\n\r\n\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n   /**\r\n   * mở modal xác nhận xóa combo\r\n   * @example this.showModal\r\n   */\r\n   showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok modal xác nhận xóa combo\r\n   * @example this.handleOk\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    this.deleteCombo();\r\n  }\r\n  /**\r\n   * đóng modal xác nhận xóa combo\r\n   * @example this.handleCancel\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  /**\r\n   * xóa combo khỏi DB\r\n   * @example this.deleteCombo();\r\n   */\r\n  deleteCombo() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.deleteProduct_Cafe(this.data._id)\r\n        .then((rsp : any) => {\r\n          if(rsp.vcode === 0){\r\n            if (this.comboForm.value[\"img\"]) {\r\n              this.vhImage.deleteThumbnail(this.comboForm.value[\"img\"]).then(() => {\r\n                this.vhComponent.showToast(2000, (this.languageService.translate(\"Product has been deleted successfully\")), \"success-toast\");\r\n                this.vhComponent.hideLoading(0);\r\n                setTimeout(() => {\r\n                  this.isVisible = false;\r\n                  this.goBack();\r\n                }, 300);\r\n              })\r\n            } else {\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.alertMessageDesktop(\"success\", (this.languageService.translate(\"Product has been deleted successfully\")));\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            }\r\n        }else if(rsp.vcode === 1){\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n          this.goBack();\r\n        }else if(rsp.vcode === 2){\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n          this.goBack();\r\n        }\r\n           \r\n        });\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp trong combo\r\n   * @example this.updateshow('DNSWIDHNBWIUDH', combo_product_selected) \r\n   */\r\n  updateshow(_id, food) {\r\n    console.log(food);\r\n    \r\n    return this.vhQueryCafe.updateComboProduct(_id, food._id, {\r\n      price: food.price,\r\n      ratio: food.ratio\r\n    }).then((bool) => {\r\n      console.log('bool', bool);\r\n    }, error => {\r\n      console.log('error', error);\r\n    })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/dishes/combo'], { state: this.dataRestore });\r\n  }\r\n\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 128, 128, \"products\", this.comboForm.value.img || null).then(\r\n      photoURL => {\r\n        this.comboForm.controls[\"img\"].setValue(photoURL);\r\n        this.updateCombo({img: this.comboForm.value.img});\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), \"success-toast\");\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), \"alert-toast\");\r\n      }\r\n    );\r\n  }\r\n    \r\n    \r\n    \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.COMBO)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.COMBO }).then((res: any) => {\r\n        console.log(res);\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.comboForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"combo\">\r\n        <div class=\"combo-name\">\r\n            <div nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"20\" class=\"title left-all-content\">\r\n                    <b>{{'Combo detail'|translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"add-button\">\r\n                    <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n            {{'Delete' | translate}}</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"custom-scroll-bar\" style=\"padding-top: 16px;height: 87%;overflow-y: auto;\">\r\n                <form nz-form [formGroup]=\"comboForm\" style=\"height: 100%\">\r\n                    <div nz-row style=\"margin-bottom: 1.6%\">\r\n                        <div nz-col nzSpan=\"3\">\r\n                            <div nz-row>\r\n                                <div nz-col nzSpan=\"24\">\r\n                                    <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n                                        <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\" (change)=\"onUpload($event)\" />\r\n                                        <img [ngStyle]=\"{width: comboForm.value.img ? '100%' : '60px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"comboForm.value.img\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"21\">\r\n                            <div nz-row style=\"justify-content: space-between;height: 100%;\">\r\n                                <div nz-col nzSpan=\"9\" class=\"combo-name-input\" style=\"height: 77px;\">\r\n                                    <div><b>{{'Combo name' | translate}}*</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                            <nz-input-group>\r\n                                                <input formControlName=\"name\" nz-input placeholder=\"{{'Enter combo name' | translate}}\" required (blur)=\"updateCombo({name: comboForm.value.name})\" />\r\n                                                <ng-template #combineTplName let-control>\r\n                                                    <ng-container *ngIf=\"control.hasError('required')\">{{'Combo name is required' | translate}}\r\n                                                    </ng-container>\r\n                                                </ng-template>\r\n                                            </nz-input-group>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n                                <div nz-col nzSpan=\"14\" class=\"combo-price-input\">\r\n                                    <div><b>{{'Barcode' | translate}}</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control>\r\n                                            <nz-input-group style=\"display: flex\">\r\n                                                <input formControlName=\"barcode\" nz-input placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" (blur)=\"updateCombo({ units :[{ \r\n                                                    barcode: comboForm.value['barcode'],\r\n                                                    price : comboForm.value['price'],\r\n                                                    unit : comboForm.value['unit'],\r\n                                                    ratio : 1\r\n                                                  }]})\" #qr (keyup)=\"checkBarcode(qr.value)\" />\r\n                                                <i nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcode()\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                            </nz-input-group>\r\n                                            <div class=\"validation-errors\">\r\n                                                <ng-container>\r\n                                                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                                                        <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                                                    </div>\r\n                                                </ng-container>\r\n                                            </div>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div nz-row style=\"justify-content: space-between;\">\r\n                        <div nz-col nzSpan=\"12\" class=\"small-size combo-warning\">\r\n                            <div><b class='label'>{{'Category'| translate}}*</b></div>\r\n                            <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                                <!-- Thanh chọn -->\r\n                                <nz-select formControlName=\"id_category\" \r\n                                  (ngModelChange)=\"updateCombo({id_category: $event})\"\r\n                                  [nzDropdownRender]=\"addCategoryTemplate\"\r\n                                  nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                                  <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                                </nz-select>\r\n                                <!-- Thêm danh mục -->\r\n                                <ng-template #addCategoryTemplate>\r\n                                  <nz-divider></nz-divider>\r\n                                  <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                                    <!-- Input nhập tên -->\r\n                                    <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                                    <!-- Nút thêm -->\r\n                                    <button (click)=\"addCategory(categoryName)\" nz-button\r\n                                      [nzLoading]=\"isAddingCategory\"\r\n                                      [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                                      {{'Add' | translate}}\r\n                                    </button>\r\n                                  </div>\r\n                                </ng-template>\r\n                            </nz-form-control>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"12\">\r\n                            <div><b>{{'Unit' | translate}}</b>*</div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit' | translate}}\" (blur)=\"updateCombo({ units :[{ \r\n                                            barcode: comboForm.value['barcode'],\r\n                                            price : comboForm.value['price'],\r\n                                            unit : comboForm.value['unit'],\r\n                                            ratio : 1\r\n                                          }]})\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"12\" class=\"small-size combo-warning\">\r\n                            <div><b>{{'Warning timeout (minute)' | translate}}</b></div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input formControlName=\"time_warning\" nz-input type=\"number\"(blur)=\"updateCombo({ time_warning: comboForm.value.time_warning})\"\r\n                                            placeholder=\"{{'Enter warning timeout (minutes)'|translate}}\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"12\">\r\n                            <div><b>{{'Description' | translate}}</b></div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <textarea nz-input formControlName=\"describe\" placeholder=\"{{'Description' | translate}}\" [nzAutosize]=\"{ minRows: 1, maxRows: 2 }\" (blur)=\"updateCombo({describe: comboForm.value.describe})\" style=\"border-radius: 5px;\"></textarea>\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"24\">\r\n                            <label nz-checkbox formControlName=\"allow_sell\" (ngModelChange)=\"updateCombo({allow_sell: $event})\">\r\n                {{'Available to sell' | translate}}\r\n              </label>\r\n                        </div>\r\n\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"combo-component\">\r\n            <div nz-row style=\"padding-bottom: 15px;\">\r\n                <div nz-col nzSpan=\"20\">\r\n                    <div class=\"large-size\"><b>{{'Combo components' | translate}}</b></div>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"content-Component custom-scroll-bar\" *ngIf=\"!data.combos\">\r\n                <div class=\"no-data\">\r\n                    <p>{{'No data' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"combo-table\" *ngIf=\"data.combos\" style=\"height: 83%;overflow: hidden;\">\r\n                <nz-table [nzScroll]=\"{ y: heightScroll }\" #cf nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"data.combos\" nzShowSizeChanger [nzShowPagination]=\"false\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Image' | translate}}</b></th>\r\n                            <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Component name' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"left\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Quantity' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"right\"><b>{{'Price total' | translate}}</b></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{\"Combo price\"|translate}}\r\n                            </td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td nzAlign=\"right\" style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{vhAlgorithm.vhcurrencyunit(comboForm.value.price)}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of data.combos; index as i\">\r\n                            <td style=\"padding: 0;\" nzAlign='center'>\r\n                                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                            </td>\r\n                            <td>{{ data.name }} {{ data.name_sub ? '( '+ data.name_sub+ ')' : ''}}</td>\r\n                            <td>\r\n                                <nz-select style=\"width:100%;\" (ngModelChange)=\"changeUnit($event,data)\" [(ngModel)]=\"data.ratio\" nzShowSearch nzPlaceHolder=\"{{'Select unit' | translate}}\">\r\n                                    <nz-option *ngFor=\"let item of data.units\" nzLabel=\"{{item.unit}}\" [nzValue]=\"item.ratio\">\r\n                                    </nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td nzAlign=\"center\">\r\n                                {{data.quantity}}\r\n                            </td>\r\n                            <td>\r\n                                <input *ngIf=\"data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +data.id_subproduct  \" (blur)=\"comboPrice(data)\">\r\n                                <input *ngIf=\"!data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +  data._id\" (blur)=\"comboPrice(data)\">\r\n                            </td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit((data.price)*(data.quantity)) }}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- Delete side dish -->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n    <p *nzModalContent>{{'Are you sure to delete this combo?' | translate}}</p>\r\n</nz-modal>"],"names":["FormControl","FormGroup","Validators","VhType","i0","option_r14","data_r22","ctx_r10","ctx_r11","AddComponent","constructor","router","vhImage","vhComponent","languageService","vhQueryCafe","vhAlgorithm","cdRef","getCurrentNavigation","extras","state","dataRestore","getlocalCategorys","filter","item","type","translate","ngOnInit","initForm","getFoodLList","ngOnDestroy","createProd","comboForm","value","deleteThumbnail","then","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","name","required","img","barcode","delete_hidden","describe","price","time_warning","unit","id_category","setBarcode","newbarcode","index","Math","floor","random","checkBarcode","controls","setValue","detailproduct","getlocalDetailProduct_byBarcode_Cafe","showComponent","indexTab","isVisibleAddComponent","handleCancelComponent","foodList","sortDatebyASC","getlocalDetailProducts","map","localProduct","units","sortNumberbyASC","getUnit_byRatio","choose","display","quantity","searchList","console","log","finalList","searchFood","tempVal","changeAlias","toLowerCase","length","changeTypeGood","event","handleComponent","componentFoods","e","price_origin","show","setTimeout","renderPrice","comboPrice","arr","forEach","id_subproduct","editPrice","_id","vhnumeral","dish","getRawValue","parseFloat","total","reduce","prev","next","deleteFood","food","alertConfirm","splice","findIndex","Promise","all","showLoading","finally","hideLoading","goBack","navigate","saveCombo","update","cleanForm","ratio","default","showToast","addProduct_Cafe","Object","addComponentFoods","catch","err","changeRatio","data","formGroup","keys","key","get","toString","trim","foods","resolve","addCombosProduct_Cafe","id_product","combos","error","getFile","getElementById","click","onUpload","file","target","files","getThumbnailFromDesktop","photoURL","addCategory","categoryName","_a","_b","res","COMBO","isAddingCategory","nativeElement","list_category","unshift","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///"}