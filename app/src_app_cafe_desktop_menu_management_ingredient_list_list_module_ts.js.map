{"version":3,"file":"src_app_cafe_desktop_menu_management_ingredient_list_list_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/ingredient/list/add-product/add-product.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/add-product/add-product.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/create-data-products/create-data-products.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/create-data-products/create-data-products.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/detail-three-col/detail-three-col.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/detail-three-col/detail-three-col.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/detail/detail.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/detail/detail.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/edit-product.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/edit-product.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-five-col-lot/print-five-col-lot.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-five-col-lot/print-five-col-lot.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-five-col/print-five-col.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-five-col/print-five-col.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-four-col-lot/print-four-col-lot.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-four-col-lot/print-four-col-lot.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-four-col/print-four-col.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-four-col/print-four-col.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-one-col-lot/print-one-col-lot.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-one-col-lot/print-one-col-lot.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-one-col/print-one-col.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-one-col/print-one-col.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-three-col-lot/print-three-col-lot.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-three-col-lot/print-three-col-lot.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-two-col-lot/print-two-col-lot.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/edit-product/print-two-col-lot/print-two-col-lot.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/list.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/list.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/list.module.ts","./src/app/cafe/desktop/menu/management/ingredient/list/lot-list-update/lot-list-update.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/lot-list-update/lot-list-update.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/lot-list/lot-list.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/lot-list/lot-list.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/units-list-update/units-list-update.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/units-list-update/units-list-update.component.html","./src/app/cafe/desktop/menu/management/ingredient/list/units-list/units-list.component.ts","./src/app/cafe/desktop/menu/management/ingredient/list/units-list/units-list.component.html"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VhAlgorithm, VhImage, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-add-product',\r\n  templateUrl: './add-product.component.html',\r\n  styleUrls: ['./add-product.component.scss'],\r\n})\r\nexport class AddProductComponent implements OnInit {\r\n\r\n  management_product_manysize: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .management_product_manysize;\r\n  management_product_lot: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .management_product_lot;\r\n  management_product_price2: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .management_product_price2;\r\n  stateObj: any;\r\n  productForm: FormGroup;\r\n  price: any;\r\n  price2: any;\r\n  price_import: any;\r\n  list_category: any;\r\n  list_barcode: any;\r\n  barcode: boolean = true;\r\n  createProd: boolean = false;\r\n  dataUnits: any[] = []; // danh sách đơn vị quy đổi\r\n  dataUnitMain = {};\r\n  barcodes = [];\r\n\r\n\r\n\r\n  constructor(\r\n    public translate: TranslateService,\r\n    public languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private cdf: ChangeDetectorRef\r\n  ) {\r\n    this.stateObj = this.router.getCurrentNavigation().extras.state.stateObj;\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n    this.initData();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.price = this.vhAlgorithm.vhnumeral('.price');\r\n      this.price_import = this.vhAlgorithm.vhnumeral('.price_import');\r\n      if (this.management_product_price2)\r\n        this.price2 = this.vhAlgorithm.vhnumeral('.price2');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * khởi tạo form với các trường để lưu sp\r\n   * @param data nếu có thì gán dữ liệu vào form\r\n   * @example this.initForm()\r\n   */\r\n  initForm(data?) {\r\n    this.productForm = new FormGroup({\r\n      img: new FormControl(data ? data.img : ''),\r\n      item_code : new FormControl(data ? data.item_code : ''),\r\n      name: new FormControl(data ? data.name : '', [Validators.required]),\r\n      barcode: new FormControl(''),\r\n      unit: new FormControl('', [Validators.required]),\r\n      price_import: new FormControl(\r\n        0,\r\n        Validators.compose([\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n          Validators.required,\r\n        ])\r\n      ),\r\n      price: new FormControl(\r\n        0,\r\n        Validators.compose([\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n          Validators.required,\r\n        ])\r\n      ),\r\n      price2: new FormControl(\r\n        0,\r\n        Validators.compose([\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n          Validators.required,\r\n        ])\r\n      ),\r\n      id_category: new FormControl(data ? data.id_category : '', [\r\n        Validators.required,\r\n      ]),\r\n      brand: new FormControl(data ? data.brand : ''),\r\n      // allow_sell: new FormControl(true),\r\n      warning_number: new FormControl(\r\n        0,\r\n        Validators.compose([\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n          Validators.required,\r\n        ])\r\n      ),\r\n      selling: new FormControl(true),\r\n      type: new FormControl(3),\r\n      manysize: new FormControl(false),\r\n      manylot: new FormControl(false),\r\n      delete_hidden: new FormControl(false),\r\n      tax: new FormControl(0),\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list'], {\r\n      state: { stateObj: this.stateObj },\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (!this.createProd && this.productForm.value['img']) {\r\n      this.vhImage.deleteThumbnail(this.productForm.value['img']);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * thêm sp vô DB\r\n   * @example this.saveProduct()\r\n   */\r\n  saveProduct() {\r\n    this.productForm.removeControl('subProducts');\r\n    let product = this.cleanForm(this.productForm).value;\r\n    product.tax = 0;\r\n    // nếu có manysize thì phải format lại các trường trong subs để lưu\r\n    if (product['manysize']) {\r\n      delete product['item_code'];\r\n      if (this.subProducts.length === 0) {\r\n        this.vhComponent.showToast(\r\n          1500,\r\n          'Vui lòng thông tin Add Size',\r\n          'alert-toast'\r\n        );\r\n        return;\r\n      } else {\r\n        this.subProducts = this.subProducts.map((item) => {\r\n          let sub_product = {\r\n            name: item.name,\r\n            warning_number: item.warning_number,\r\n            item_code : item.item_code,\r\n            // allow_sell: !item.delete_hidden,\r\n            delete_hidden: false,\r\n            selling: item.selling,\r\n            units: [\r\n              {\r\n                unit: item.unit,\r\n                ratio: 1,\r\n                price: parseFloat(item.price),\r\n                price2: this.management_product_price2\r\n                  ? parseFloat(item.price2)\r\n                  : 0,\r\n                price_import: parseFloat(item.price_import),\r\n                barcode: item.barcode,\r\n                default: item.units.filter((e) => e.default).length\r\n                  ? false\r\n                  : true,\r\n              },\r\n              ...item.units,\r\n            ],\r\n            manylot: item.manylot,\r\n          };\r\n          if (item['manylot']) {\r\n            sub_product['lots'] = item.lots;\r\n            sub_product['days_import_warning'] = item.days_import_warning;\r\n            sub_product['days_exp_warning'] = item.days_exp_warning;\r\n          }\r\n          return sub_product;\r\n        });\r\n      }\r\n    } else {\r\n      this.subProducts = [];\r\n      product.units = new Array();\r\n      product.price = parseFloat(\r\n        this.price.getRawValue() ? this.price.getRawValue() : '0'\r\n      );\r\n      product.price_import = parseFloat(\r\n        this.price_import.getRawValue() ? this.price_import.getRawValue() : '0'\r\n      );\r\n      product.price2 =\r\n        this.management_product_price2 &&\r\n        parseFloat(this.price2.getRawValue() ? this.price2.getRawValue() : '0');\r\n      product.units = [...this.dataUnits];\r\n      product.units = [\r\n        {\r\n          unit: product.unit,\r\n          ratio: 1,\r\n          price: parseFloat(product.price),\r\n          price2: this.management_product_price2\r\n            ? parseFloat(product.price2)\r\n            : 0,\r\n          price_import: parseFloat(product.price_import),\r\n          barcode: product.barcode,\r\n          default: product.units.filter((e) => e.default).length ? false : true,\r\n        },\r\n        ...product.units,\r\n      ];\r\n      if (product.warning_number >= 0)\r\n        product.warning_number = parseFloat(product.warning_number);\r\n      else product.warning_number = 0;\r\n      if (product['manylot']) {\r\n        product['lots'] = this.lot_list;\r\n      }\r\n    }\r\n    Object.keys(product).forEach((key) => {\r\n      if (\r\n        key == 'unit' ||\r\n        key == 'ratio' ||\r\n        key == 'price' ||\r\n        key == 'price2' ||\r\n        key == 'price_import' ||\r\n        key == 'barcode'\r\n      )\r\n        delete product[key];\r\n    });\r\n    if (!this.barcode) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Barcode already exists')\r\n      );\r\n    } else\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQueryCafe\r\n          .addProductAndSubsProduct_Cafe(product, this.subProducts)\r\n          .then(\r\n            () => {\r\n              this.createProd = true;\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.showToast(\r\n                1000,\r\n                product.name +\r\n                  ' ' +\r\n                  this.languageService.translate('has been added successfully'),\r\n                'success-toast'\r\n              );\r\n              setTimeout(() => {\r\n                this.goBack();\r\n              }, 300);\r\n            },\r\n            (err) => {\r\n              console.log(err);\r\n              this.vhComponent.hideLoading(0);\r\n              // this.vhComponent.alertMessageDesktop(\"error\",err)\r\n              this.vhComponent.showToast(\r\n                1500,\r\n                this.languageService.translate(\r\n                  'An error occurred while adding product. Please try again'\r\n                ),\r\n                'alert-toast'\r\n              );\r\n            }\r\n          );\r\n      });\r\n  }\r\n\r\n  // Hàm thực hiện xóa space (TRIM) các control trong form\r\n  public cleanForm(formGroup: FormGroup) {\r\n    Object.keys(formGroup.controls).forEach((key) => {\r\n      if (\r\n        key === 'name' ||\r\n        key === 'barcode' ||\r\n        key === 'brand' ||\r\n        key === 'unit'\r\n      ) {\r\n        if (formGroup.get(key).value) {\r\n          let value = formGroup.get(key).value.toString().trim();\r\n          formGroup.get(key).setValue(value);\r\n        }\r\n      }\r\n    });\r\n    return formGroup;\r\n  }\r\n\r\n  initData() {\r\n    // lấy danh mục\r\n    this.list_category = this.vhQueryCafe.getlocalCategorys(3);\r\n  }\r\n\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @example this.checkBarcode('123456')\r\n   */\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct =\r\n      this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode);\r\n    if (detailproduct == null) {\r\n      if (\r\n        this.dataUnits.find((e) => e.barcode == barcode) ||\r\n        this.lot_list.find((lot) => lot.barcode == barcode)\r\n      )\r\n        this.barcode = false;\r\n      else this.barcode = true;\r\n    } else {\r\n      this.barcode = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra barcode của sub đã tồn tại hay chưa\r\n   * @example this.checkBarcode('123456')\r\n   */\r\n  checkBarcodeSubProduct(barcode: string, sub_name) {\r\n    let detailproduct =\r\n      this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode);\r\n    if (detailproduct == null) {\r\n      if (this.barcodes.filter((item) => barcode && item == barcode).length)\r\n        this.barcode = false;\r\n      else this.barcode = true;\r\n    } else {\r\n      this.barcode = false;\r\n    }\r\n  }\r\n  /**\r\n   * mở giao diện chọn file để upload ảnh\r\n   * @example getFile()\r\n   */\r\n  getFile() {\r\n    document.getElementById('file-upload').click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage\r\n      .getThumbnailFromDesktop(\r\n        file,\r\n        256,\r\n        256,\r\n        'products',\r\n        this.productForm.value['img'] || null\r\n      )\r\n      .then(\r\n        (photoURL) => {\r\n          this.productForm.controls['img'].setValue(photoURL);\r\n          this.vhComponent.showToast(\r\n            2000,\r\n            this.languageService.translate('Image was loaded successfully'),\r\n            'success-toast'\r\n          );\r\n        },\r\n        () => {\r\n          this.vhComponent.showToast(\r\n            2000,\r\n            this.languageService.translate('Image was failed'),\r\n            'alert-toast'\r\n          );\r\n        }\r\n      );\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động\r\n   * @example this.changeBarcode()\r\n   */\r\n  changeBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.productForm.controls['barcode'].setValue(newbarcode);\r\n    }\r\n  }\r\n\r\n  // CleaveJS\r\n  tranformPrice(class_name) {\r\n    switch (class_name) {\r\n      case 'size-price-item':\r\n        this.price_size = this.vhAlgorithm.vhnumeral('.size-price-item')\r\n          ? this.vhAlgorithm.vhnumeral('.size-price-item')\r\n          : 0;\r\n        break;\r\n      case 'size-price2-item':\r\n        this.price2_size =\r\n          this.management_product_price2 &&\r\n          this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n            ? this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n            : 0;\r\n        break;\r\n      case 'size-price-purchase-item':\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\r\n          '.size-price-purchase-item'\r\n        )\r\n          ? this.vhAlgorithm.vhnumeral('.size-price-purchase-item')\r\n          : 0;\r\n        break;\r\n      case 'price':\r\n        this.price = this.vhAlgorithm.vhnumeral('.price')\r\n          ? this.vhAlgorithm.vhnumeral('.price')\r\n          : 0;\r\n        break;\r\n      case 'price2':\r\n        this.price2 =\r\n          this.management_product_price2 &&\r\n          this.vhAlgorithm.vhnumeral('.price2')\r\n            ? this.vhAlgorithm.vhnumeral('.price2')\r\n            : 0;\r\n        break;\r\n      case 'price_import':\r\n        this.price_import = this.vhAlgorithm.vhnumeral('.price_import')\r\n          ? this.vhAlgorithm.vhnumeral('.price_import')\r\n          : 0;\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Thêm units\r\n  showDrawerUnits = false;\r\n  closeUnits(event) {\r\n    if (typeof event != 'boolean') {\r\n      if (!this.productForm.value.manysize) this.dataUnits = event;\r\n      else {\r\n        this.dataUnits = event\r\n        this.formSubProduct.controls['units'].setValue(event);\r\n      }\r\n    }\r\n    this.showDrawerUnits = false;\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị\r\n   * @example this.changeUnits()\r\n   */\r\n  changeUnits() {\r\n    this.barcodes = [];\r\n    if (!this.productForm.value.manysize) {\r\n      this.barcodes = [this.productForm.value.barcode]\r\n        .concat(\r\n          this.dataUnits.map((item) => {\r\n            return item.barcode;\r\n          })\r\n        )\r\n        .concat(\r\n          this.lot_list.map((lot) => {\r\n            return lot.barcode;\r\n          })\r\n        );\r\n    }\r\n    this.showDrawerUnits = true;\r\n    this.dataUnitMain = {\r\n      unit: this.productForm.value.unit,\r\n      ratio: 1,\r\n      barcode: this.productForm.value.barcode,\r\n      price: parseFloat(\r\n        this.price.getRawValue() ? this.price.getRawValue() : '0'\r\n      ),\r\n      price2:\r\n        this.management_product_price2 &&\r\n        parseFloat(this.price2.getRawValue() ? this.price2.getRawValue() : '0'),\r\n      price_import: parseFloat(\r\n        this.price_import.getRawValue() ? this.price_import.getRawValue() : '0'\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị của subproduct\r\n   * @example this.changeUnitsSubs()\r\n   */\r\n  changeUnitsSubs() {\r\n    this.barcodes = [];\r\n    for (let i in this.subProducts) {\r\n      this.barcodes = this.barcodes.concat([\r\n        ...this.subProducts[i].units.map((e) => {\r\n          return e.barcode;\r\n        }),\r\n        this.subProducts[i].barcode,\r\n        ...this.subProducts[i].lots.map((lot) => {\r\n          return lot.barcode;\r\n        }),\r\n      ]);\r\n    }\r\n    this.barcodes.push(\r\n      this.formSubProduct.value.barcode,\r\n      ...this.formSubProduct.value.units.map((item) => {\r\n        return item.barcode;\r\n      })\r\n    );\r\n    this.showDrawerUnits = true;\r\n    this.dataUnits = this.formSubProduct.value.units;\r\n    this.dataUnitMain = {\r\n      unit: this.formSubProduct.value.unit,\r\n      ratio: 1,\r\n      barcode: this.formSubProduct.value.barcode,\r\n      price: this.price_size ? parseFloat(this.price_size.getRawValue()) : 0,\r\n      price2:\r\n        this.management_product_price2 && this.price2_size\r\n          ? parseFloat(this.price2_size.getRawValue())\r\n          : 0,\r\n      price_import: this.price_size_purchase\r\n        ? parseFloat(this.price_size_purchase.getRawValue())\r\n        : 0,\r\n    };\r\n  }\r\n\r\n  //  cập nhật trường form khi manysize: true/false\r\n  statusCheckBox(e) {\r\n    this.dataUnits = [];\r\n    if (!e) {\r\n      this.subProducts = [];\r\n      this.initForm(this.productForm.value);\r\n    } else {\r\n      this.productForm.addControl(\r\n        'subProducts',\r\n        new FormControl('', [Validators.required])\r\n      );\r\n      this.productForm.removeControl('price');\r\n      this.productForm.removeControl('price2');\r\n      this.productForm.removeControl('price_import');\r\n      this.productForm.removeControl('barcode');\r\n      this.productForm.removeControl('warning_number');\r\n      this.productForm.removeControl('unit');\r\n      this.productForm.removeControl('selling');\r\n      // this.productForm.removeControl('allow_sell');\r\n      this.productForm.removeControl('manylot');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk thay đổi thiết lập lô cho sp\r\n   * @param event \r\n   * @example this.changeManyLot(true)\r\n   */\r\n  changeManyLot(event) {\r\n    if (event) {\r\n      this.productForm.addControl('days_import_warning', new FormControl(null));\r\n      this.productForm.addControl('days_exp_warning', new FormControl(null));\r\n    } else {\r\n      this.productForm.removeControl('days_import_warning');\r\n      this.productForm.removeControl('days_exp_warning');\r\n    }\r\n  }\r\n\r\n  public subProducts = [];\r\n  public isVisibleAddSize = false; // mở model thêm/ sửa sub product\r\n\r\n  /**Add Size */\r\n  deleteSize(data) {\r\n    this.subProducts = this.subProducts.filter((sub) => sub.name != data.name);\r\n    if (this.subProducts.length == 0) {\r\n      this.productForm.controls['subProducts'].setValue([]);\r\n    } else {\r\n      this.productForm.controls['subProducts'].setValue(this.subProducts);\r\n    }\r\n  }\r\n  handleCancelAdd() {\r\n    this.isVisibleAddSize = false;\r\n  }\r\n\r\n  price_size_purchase: any;\r\n  price_size: any;\r\n  price2_size: any;\r\n  public formSubProduct: FormGroup;\r\n  public titleSubProduct = '';\r\n  public subAdd = true; // dùng để xác định dùng form edit/ form add\r\n  index_sub_update: number = 0;\r\n  // hàm thực hiện thêm hoặc sửa sub\r\n  handleFormSubProduct(value) {\r\n    if (!this.barcode) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Barcode already exists')\r\n      );\r\n    } else {\r\n      let data = {\r\n        ...value,\r\n        name: value.name.toString().trim(),\r\n        barcode: value.barcode.toString().trim(),\r\n        unit: value.unit.toString().trim(),\r\n        units: value.units,\r\n        lots: value.lots,\r\n        price: this.price_size.getRawValue()\r\n          ? parseFloat(this.price_size.getRawValue())\r\n          : 0,\r\n        price2:\r\n          this.management_product_price2 && this.price2_size.getRawValue()\r\n            ? parseFloat(this.price2_size.getRawValue())\r\n            : 0,\r\n        price_import: this.price_size_purchase.getRawValue()\r\n          ? parseFloat(this.price_size_purchase.getRawValue())\r\n          : 0,\r\n      };\r\n      if (!this.subAdd) {\r\n        this.subProducts[this.index_sub_update] = data;\r\n      } else this.subProducts.push(data);\r\n      this.productForm.controls['subProducts'].setValue(this.subProducts);\r\n      this.isVisibleAddSize = false;\r\n    }\r\n  }\r\n\r\n  // hiển thị Form thực hiện add hoặc là thực hiện việc edit\r\n  showSubProduct(data?) {\r\n    this.isVisibleAddSize = true;\r\n    this.barcodes = [];\r\n    for (let i in this.subProducts) {\r\n      this.barcodes = this.barcodes.concat([\r\n        ...this.subProducts[i].units.map((e) => {\r\n          return e.barcode;\r\n        }),\r\n        this.subProducts[i].barcode,\r\n        ...this.subProducts[i].lots.map((lot) => {\r\n          return lot.barcode;\r\n        }),\r\n      ]);\r\n    }\r\n    if (data) {\r\n      this.titleSubProduct = this.languageService.translate(\r\n        'Cập nhật phân loại sản phẩm'\r\n      );\r\n      this.initFormSubProduct(data);\r\n      this.subAdd = false;\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price_size = this.vhAlgorithm.vhnumeral('.size-price-item')\r\n          ? this.vhAlgorithm.vhnumeral('.size-price-item')\r\n          : 0;\r\n        this.price2_size =\r\n          this.management_product_price2 &&\r\n          this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n            ? this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n            : 0;\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\r\n          '.size-price-purchase-item'\r\n        )\r\n          ? this.vhAlgorithm.vhnumeral('.size-price-purchase-item')\r\n          : 0;\r\n      });\r\n      this.index_sub_update = this.subProducts.findIndex(\r\n        (item) => item.name == data.name\r\n      );\r\n    } else {\r\n      this.titleSubProduct = this.languageService.translate(\r\n        'Thêm phân loại sản phẩm'\r\n      );\r\n      this.initFormSubProduct();\r\n      this.subAdd = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param data \r\n   * @example this.duplicateSubProduct(subproduct_selected)\r\n   */\r\n  duplicateSubProduct(data) {\r\n    let value = { ...data };\r\n    delete value.name;\r\n    this.checkBarcodeSubProduct(value.barcode, '');\r\n    this.initFormSubProduct(value);\r\n    this.subAdd = true;\r\n    this.titleSubProduct = this.languageService.translate(\r\n      'Thêm phân loại sản phẩm'\r\n    );\r\n    this.isVisibleAddSize = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.price_size = this.vhAlgorithm.vhnumeral('.size-price-item')\r\n        ? this.vhAlgorithm.vhnumeral('.size-price-item')\r\n        : 0;\r\n      this.price2_size =\r\n        this.management_product_price2 &&\r\n        this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n          ? this.vhAlgorithm.vhnumeral('.size-price2-item')\r\n          : 0;\r\n      this.price_size_purchase = this.vhAlgorithm.vhnumeral(\r\n        '.size-price-purchase-item'\r\n      )\r\n        ? this.vhAlgorithm.vhnumeral('.size-price-purchase-item')\r\n        : 0;\r\n    });\r\n  }\r\n\r\n  // Khởi tạo form sub product\r\n  initFormSubProduct(item?: any) {\r\n    this.formSubProduct = new FormGroup({\r\n      name: new FormControl(item ? item['name'] : '', [Validators.required]),\r\n      price_import: new FormControl(\r\n        item ? item['price_import'] : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price: new FormControl(\r\n        item ? item['price'] : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price2: new FormControl(\r\n        item ? item['price2'] : '',\r\n        Validators.compose([\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      warning_number: new FormControl(item ? item['warning_number'] : 0, [\r\n        Validators.required,\r\n      ]),\r\n      barcode: new FormControl(item ? item['barcode'] : ''),\r\n      unit: new FormControl(item ? item['unit'] : ''),\r\n      units: new FormControl(item ? item['units'] : []),\r\n      // allow_sell: new FormControl(item ? item['allow_sell'] : true),\r\n      delete_hidden: new FormControl(item ? item['delete_hidden'] : false),\r\n      selling: new FormControl(item ? item['selling'] : true),\r\n      manylot: new FormControl(item ? item['manylot'] : false),\r\n      days_import_warning: new FormControl(\r\n        item ? item['days_import_warning'] : ''\r\n      ),\r\n      days_exp_warning: new FormControl(item ? item['days_exp_warning'] : ''),\r\n      lots: new FormControl(item ? item['lots'] : []),\r\n      item_code: new FormControl(item ? item['item_code'] : ''),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động cho subproduct\r\n   * @example this.changeBarcodeSubProduct()\r\n   */\r\n  changeBarcodeSubProduct() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.formSubProduct.controls['barcode'].setValue(newbarcode);\r\n    }\r\n  }\r\n\r\n  show_lot_list = false;\r\n  lot_list: any = [];\r\n\r\n  /**\r\n   * mở drawer danh sách lô sp\r\n   * @param lots \r\n   * @example this.openListLot([])\r\n   */\r\n  openListLot(lots?) {\r\n    this.barcodes = [];\r\n    if (!this.productForm.value.manysize) {\r\n      console.log([this.productForm.value.barcode]);\r\n\r\n      this.barcodes = [this.productForm.value.barcode].concat(\r\n        this.dataUnits.map((item) => {\r\n          return item.barcode;\r\n        })\r\n      );\r\n    } else {\r\n      for (let i in this.subProducts) {\r\n        this.barcodes = this.barcodes.concat([\r\n          ...this.subProducts[i].units.map((e) => {\r\n            return e.barcode;\r\n          }),\r\n          this.subProducts[i].barcode,\r\n          ...this.subProducts[i].lots.map((lot) => {\r\n            return lot.barcode;\r\n          }),\r\n        ]);\r\n      }\r\n      this.barcodes.push(\r\n        this.formSubProduct.value.barcode,\r\n        ...this.formSubProduct.value.units.map((item) => {\r\n          return item.barcode;\r\n        })\r\n      );\r\n    }\r\n    console.log(this.barcodes);\r\n\r\n    this.show_lot_list = true;\r\n    if (lots) this.lot_list = lots;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút lưu drawer lô sp\r\n   * @param lot_list \r\n   */\r\n  handleLotList(lot_list) {\r\n    this.show_lot_list = false;\r\n    if (lot_list) {\r\n      if (this.productForm.value.manysize) {\r\n        this.formSubProduct.controls['lots'].setValue(lot_list);\r\n      } else this.lot_list = lot_list;\r\n    }\r\n    console.log(lot_list);\r\n  }\r\n  /**\r\n   * bắt sk thay đổi thiết lập lô cho subproduct\r\n   * @param event \r\n   * @example thsi.changeManyLotSub(true)\r\n   */\r\n  changeManyLotSub(event) {\r\n    if (event) {\r\n      this.formSubProduct.addControl(\r\n        'days_import_warning',\r\n        new FormControl(null)\r\n      );\r\n      this.formSubProduct.addControl('days_exp_warning', new FormControl(null));\r\n    } else {\r\n      this.formSubProduct.removeControl('days_import_warning');\r\n      this.formSubProduct.removeControl('days_exp_warning');\r\n    }\r\n  }\r\n\r\n  gotoConfigProduct() {\r\n    this.router.navigate(['/cafe/dashboard/settings/configuration/products']);\r\n  }\r\n    \r\n    \r\n    \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.INGREDIENT)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.INGREDIENT }).then((res: any) => {\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.productForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <nz-content>\r\n    <div nz-row class=\"main\" style=\"height: 100%\">\r\n      <!-- Tiêu đề -->\r\n      <div nz-col nzSpan=\"21\" class=\"title left-all-content\">\r\n        <b>{{'Add ingredient' | translate}}</b>\r\n      </div>\r\n\r\n      <!-- Nút Lưu -->\r\n      <div nz-col nzSpan=\"3\" class=\"add-button\">\r\n        <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"saveProduct()\"\r\n          [disabled]=\"productForm.invalid\" [ngStyle]=\"{opacity: productForm.invalid ? 0.5 : 1}\">\r\n          <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n          {{'Save' | translate}}</button>\r\n      </div>\r\n\r\n      <div style=\"overflow-x: hidden; overflow-y: auto; margin: 8px 0; height: 92%; width: 100%;\"\r\n        class=\"custom-scroll-bar\">\r\n        <form nz-form [formGroup]=\"productForm\">\r\n          <div class=\"grid-product\">\r\n            \r\n            <!-- Ảnh -->\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n              <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n                <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n                  (change)=\"onUpload($event)\" />\r\n                <img [ngStyle]=\"{width: productForm.value.img ? '100%' : '60px'}\"\r\n                  onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"productForm.value.img\" />\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <div class=\"small-size\" nz-row>\r\n                <!-- Tên nguyên liệu -->\r\n                <div nz-col [nzSpan]=\"productForm.value.manysize ? 24 : 16\" class=\"small-size\">\r\n                  <div><b>{{'Ingredient name' | translate}}*</b></div>\r\n                  <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                      <nz-input-group>\r\n                        <input style=\"width:95%\" formControlName=\"name\" nz-input\r\n                          [placeholder]=\"'Enter ingredient name' | translate\" required />\r\n                        <ng-template #combineTplName let-control>\r\n                          <ng-container *ngIf=\"control.hasError('required')\">{{'Ingredient name is required' | translate}}\r\n                          </ng-container>\r\n                        </ng-template>\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n                <!-- Mã sản phẩm -->\r\n                <div *ngIf=\"!productForm.value.manysize\" nz-col nzSpan=\"8\" class=\"small-size\">\r\n                  <div><b>{{'Item code' | translate}}</b></div>\r\n                  <nz-form-item>\r\n                    <nz-form-control>\r\n                      <nz-input-group>\r\n                        <input style=\"width:86%\" formControlName=\"item_code\" nz-input\r\n                          [placeholder]=\"'Enter item code' | translate\" />\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"small-size\" nz-row>\r\n                <!-- Danh mục -->\r\n                <div nz-col nzSpan=\"12\">\r\n                  <div><b class='label'>{{'Category' | translate}}*</b></div>\r\n                  <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                    <!-- Thanh chọn -->\r\n                    <nz-select formControlName=\"id_category\" \r\n                        [nzDropdownRender]=\"addCategoryTemplate\"\r\n                        nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                        <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                    </nz-select>\r\n                    <!-- Thêm danh mục -->\r\n                    <ng-template #addCategoryTemplate>\r\n                        <nz-divider></nz-divider>\r\n                        <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                            <!-- Input nhập tên -->\r\n                            <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                            <!-- Nút thêm -->\r\n                            <button (click)=\"addCategory(categoryName)\" nz-button\r\n                                [nzLoading]=\"isAddingCategory\"\r\n                                [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                                {{'Add' | translate}}\r\n                            </button>\r\n                        </div>\r\n                    </ng-template>\r\n                  </nz-form-control>\r\n                </div>\r\n\r\n                <!-- Thương hiệu -->\r\n                <div nz-col nzSpan=\"12\">\r\n                  <div><b class='label'>{{'Brand' | translate}}</b></div>\r\n                  <nz-form-item>\r\n                    <nz-form-control>\r\n                      <nz-input-group>\r\n                        <input formControlName=\"brand\" nz-input [placeholder]=\"'Enter brand' |translate\" />\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Phân theo thuộc tính hàng hóa -->\r\n              <div nz-row class=\"small-size\" *ngIf=\"management_product_manysize\">\r\n                <div nz-col nzSpan=\"12\">\r\n                  <label nz-checkbox formControlName=\"manysize\" (ngModelChange)=\"statusCheckBox($event)\">\r\n                    {{'Categorize by product attributes' | translate}}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div nz-row>\r\n            <!-- Giá nhập -->\r\n            <div nz-col nzSpan=\"12\" *ngIf=\"!productForm.value.manysize\">\r\n              <div><b class='label'>{{'Purchase price' | translate}}*</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                  <nz-input-group>\r\n                    <input (keyup)=\"tranformPrice('price_import')\" class=\"price_import\" type=\"text\" maxlength=\"15\"\r\n                      formControlName=\"price_import\" nz-input [placeholder]=\"vhAlgorithm.vhcurrencyunit_symbol(0)\" />\r\n                    <ng-template #combineTplPriceImport let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Đơn vị -->\r\n            <div nz-col nzSpan=\"11\" *ngIf=\"!productForm.value.manysize\">\r\n              <div><b class='label'>{{'Unit' | translate}}*</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                  <nz-input-group style=\"display:flex; justify-content: space-between;\">\r\n                    <input formControlName=\"unit\" nz-input style=\"width: 65%;\"\r\n                      [placeholder]=\"'Enter unit' | translate\" />\r\n                    <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"changeUnits()\"\r\n                      style=\"margin-right: 8px;\">\r\n                      <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                      {{(dataUnits.length ? 'Unit list' : 'Add unit') | translate}}</button>\r\n                    <ng-template #combineTplUnit let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Giá bán -->\r\n            <div nz-col nzSpan=\"12\" *ngIf=\"!productForm.value.manysize\">\r\n              <div><b class='label'>{{'Selling price' | translate}} *</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplPrice\">\r\n                  <nz-input-group>\r\n                    <input (keyup)=\"tranformPrice('price')\" class=\"price\" type=\"text\" maxlength=\"15\"\r\n                      formControlName=\"price\" nz-input [placeholder]=\"vhAlgorithm.vhcurrencyunit_symbol(0)\" />\r\n                    <ng-template #combineTplPrice let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Mã vạch -->\r\n            <div nz-col nzSpan=\"12\" *ngIf=\"!productForm.value.manysize\">\r\n              <div><b class='label'>{{'Barcode' | translate}}</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control>\r\n                  <nz-input-group>\r\n                    <input #box formControlName=\"barcode\" nz-input style=\"width: 86%;\"\r\n                      [placeholder]=\"'Enter manually or use the barcode scanner' | translate\"\r\n                      (blur)=\"checkBarcode(box.value)\" />\r\n                    <i style=\"padding: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"changeBarcode()\"\r\n                      nz-tooltip [nzTooltipTitle]=\"'Generate barcodes automatically' | translate\"\r\n                      nzTooltipPlacement=\"bottom\"></i>\r\n                  </nz-input-group>\r\n                  <div class=\"validation-errors\">\r\n                    <ng-container>\r\n                      <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                        <ion-text color=\"vh-red\">{{'Barcode already exists' | translate}}\r\n                        </ion-text>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Giá bán 2 -->\r\n            <div nz-col nzSpan=\"12\" *ngIf=\"!productForm.value.manysize && management_product_price2\">\r\n              <div><b class='label'>{{'Selling price' | translate}} 2</b>*</div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplPrice2\">\r\n                  <nz-input-group>\r\n                    <input (keyup)=\"tranformPrice('price2')\" class=\"price2\" type=\"text\" maxlength=\"15\"\r\n                      formControlName=\"price2\" nz-input [placeholder]=\"vhAlgorithm.vhcurrencyunit_symbol(0)\"\r\n                      pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" />\r\n                    <ng-template #combineTplPrice2 let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Số lượng cảnh báo hết hàng -->\r\n            <div nz-col nzSpan=\"12\" *ngIf=\"!productForm.value.manysize\">\r\n              <div><b class='label'>{{'Minimum quantity to alert' | translate}}*</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplWarning_number\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"warning_number\" type=\"number\" nz-input required\r\n                      [placeholder]=\"'Enter warning quantity' | translate\" />\r\n                    <ng-template #combineTplWarning_number let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Invalid value' | translate}}\r\n                      </ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Bán nhanh -->\r\n            <div nz-col nzSpan=\"24\" style=\"display: flex; align-items: center;\" *ngIf=\"!productForm.value.manysize\">\r\n              <div nz-col nzSpan=\"24\" flex>\r\n                <!-- <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell'|translate}}</label> -->\r\n                <label nz-checkbox formControlName=\"selling\">{{'Quick sale' | translate}}</label>\r\n              </div>\r\n            </div>\r\n\r\n            <ng-container *ngIf=\"management_product_lot\">\r\n              <!-- Lô, hạn sử dụng -->\r\n              <div nz-col nzSpan=\"24\" style=\"display: flex; align-items: center;\" *ngIf=\"!productForm.value.manysize\">\r\n                <div nz-col nzSpan=\"24\" flex>\r\n                  <label nz-checkbox formControlName=\"manylot\" (ngModelChange)=\"changeManyLot($event)\">{{'Batch, expiration date' | translate}}</label>\r\n                </div>\r\n              </div>\r\n              <!-- Số ngày HSD còn lại được phép nhập hàng -->\r\n              <div nz-col nzSpan=\"12\" *ngIf=\"productForm.value.manylot\">\r\n                <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                    <nz-input-group>\r\n                      <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                        placeholder=\"0\" />\r\n                      <ng-template #combineTplPrice3 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                        </ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Số ngày HSD còn lại được cảnh báo -->\r\n              <div nz-col nzSpan=\"12\" *ngIf=\"productForm.value.manylot\">\r\n                <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                    <nz-input-group>\r\n                      <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                        placeholder=\"0\" />\r\n                      <ng-template #combineTplPrice4 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                        </ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Danh sách lô -->\r\n              <div nz-col nzSpan=\"12\" *ngIf=\"productForm.value.manylot\">\r\n                <button class=\"  center-all-content\" nz-button nzType=\"default\" (click)=\"openListLot()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{'List of lots' | translate}}</button>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </form>\r\n\r\n        <div nz-row style=\"margin-bottom: 12px;\" *ngIf=\"productForm.value.manysize\">\r\n          <div class=\"title-sub\" nz-col nzSpan=\"24\">\r\n            <div class=\"large-size hide-overflow\"><b>{{'Product classification' | translate}}</b></div>\r\n            <div>\r\n              <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"showSubProduct()\"\r\n                [disabled]=\"!productForm.value.manysize\" [ngStyle]=\"{opacity: (!productForm.value.manysize) ? 0.5 : 1}\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Add'|translate}}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <nz-table #basicTable [nzData]=\"subProducts\" *ngIf=\"productForm.value.manysize\" [nzNoResult]=\"'No data' | translate\">\r\n          <thead>\r\n            <tr>\r\n              <th nzAlign=\"center\">{{'_subname' | translate}}</th>\r\n              <th nzAlign=\"right\">{{'Purchase price' | translate}}</th>\r\n              <th *ngIf=\"management_product_price2\" nzAlign=\"right\">{{'Selling price' | translate}} 2</th>\r\n              <th nzAlign=\"right\">{{'Selling price' | translate}}</th>\r\n              <!-- <th>{{'Status' | translate}}</th> -->\r\n              <th>{{'Lot' | translate}}</th>\r\n              <th nzAlign=\"center\">{{'Functions' | translate}}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let data of subProducts\">\r\n              <td nzAlign=\"left\">{{ data.name }}<br><small>{{data.item_code}}</small></td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price_import)}}</td>\r\n              <td *ngIf=\"management_product_price2\" nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price2) }}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price) }}</td>\r\n              <!-- <td>{{ (data.allow_sell ? 'Allow sale' : 'Not allow sale') | translate }}</td> -->\r\n              <td>\r\n                <button *ngIf=\"data.manylot\" class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n                  (click)=\"openListLot(data.lots)\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{'List of lots' | translate}}</button>\r\n              </td>\r\n              <td style=\" display: flex; justify-content: space-between; font-size: 1.2rem;\">\r\n                <a (click)=\"showSubProduct(data)\">\r\n                  <i style=\"color: var(--ion-color-vh-green)\" class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                    nz-tooltip [nzTooltipTitle]=\"'Edit' | translate\"></i>\r\n                </a>\r\n                <a nz-popconfirm [nzPopconfirmTitle]=\"('Delete ' | translate) + data.name\"\r\n                  nzCancelText=\"{{'Cancel' | translate}}\" (nzOnConfirm)=\"deleteSize(data)\">\r\n                  <i style=\"color: var(--ion-color-vh-red)\" class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                    nz-tooltip [nzTooltipTitle]=\"'Delete' | translate\"></i>\r\n                </a>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n        <div *ngIf=\"!management_product_manysize\" (click)=\"gotoConfigProduct()\"\r\n          style=\"color:var(--ion-color-vh-green); margin-top:32px; cursor:pointer;\">\r\n          + {{'Enable the feature to create products with multiple attributes' | translate}}\r\n        </div>\r\n        <div *ngIf=\"!management_product_lot\" (click)=\"gotoConfigProduct()\"\r\n          style=\"color:var(--ion-color-vh-green); cursor:pointer;\">\r\n          + {{'Enable the feature to manage products by batch and expiration date' | translate}}\r\n        </div>\r\n        <div *ngIf=\"!management_product_price2\" (click)=\"gotoConfigProduct()\"\r\n          style=\"color:var(--ion-color-vh-green); cursor:pointer;\">\r\n          + {{'Enable the feature to create and sell a second price for dishes/ingredients' | translate}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <div class=\"sub-content\" *ngIf=\"productForm.value.manysize\">\r\n            <div class=\"many-size\">\r\n                <div nz-row style=\"margin-bottom: 12px;\">\r\n                    <div class=\"title-sub\" nz-col nzSpan=\"24\">\r\n                        <div class=\"large-size hide-overflow\"><b>{{'Add size' | translate}}</b></div>\r\n                        <div>\r\n                            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"showSubProduct()\"\r\n                                [disabled]=\"!productForm.value.manysize\"\r\n                                [ngStyle]=\"{opacity: (!productForm.value.manysize) ? 0.5 : 1}\">\r\n                                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                                {{'Add'|translate}}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div nz-row class=\"content-size ant-table-body\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <nz-list>\r\n                            <ng-container *ngFor=\"let data of subProducts\">\r\n                                <nz-list-item>\r\n                                    <nz-list-item-meta-title style=\"width:calc(100% - 110px)\">\r\n                                        <b>{{data.name}}</b>\r\n                                        <div class=\"quantity\">\r\n                                            <span>{{this.vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                        </div>\r\n                                    </nz-list-item-meta-title>\r\n                                    <ul nz-list-item-actions>\r\n                                        <nz-list-item-action>\r\n                                            <a (click)=\"showSubProduct(data)\">\r\n                                                <i style=\"color: var(--ion-color-vh-black)\" class=\"cus-icon\" nz-icon\r\n                                                    nzType=\"form\" nzTheme=\"outline\"></i>\r\n                                            </a>\r\n                                        </nz-list-item-action>\r\n                                        <nz-list-item-action>\r\n                                            <a nz-popconfirm [nzPopconfirmTitle]=\"('Delete ' | translate) + data.name\"\r\n                                                nzCancelText=\"{{'Cancel' | translate}}\"\r\n                                                (nzOnConfirm)=\"deleteSize(data)\">\r\n                                                <i style=\"color: var(--ion-color-vh-black)\" class=\"cus-icon\" nz-icon\r\n                                                    nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                                            </a>\r\n                                        </nz-list-item-action>\r\n                                    </ul>\r\n\r\n                                </nz-list-item>\r\n                            </ng-container>\r\n                        </nz-list>\r\n                        <div class=\"no-data\" *ngIf=\"!productForm.value.manysize\">{{'Not sub yet'| translate}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div> -->\r\n  </nz-content>\r\n</nz-layout>\r\n\r\n<!--Modal add name, price size-->\r\n<nz-modal [nzFooter]=\"modalFooterAddUnitPrice\" [(nzVisible)]=\"isVisibleAddSize\" [nzTitle]=\"titleSubProduct\"\r\n  (nzOnCancel)=\"handleCancelAdd()\" [nzStyle]=\"{ top: '20px' }\">\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"formSubProduct\" style=\"overflow: auto; height: 450px; padding-bottom: 16px;\">\r\n      <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" style=\"padding-right: 8px;\">\r\n          <!-- Tên -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Attribute name (color, size, ...)' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input nz-input formControlName=\"name\" [placeholder]=\"'Enter name' | translate\" />\r\n              <ng-template #errorSubsName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Employee name is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid name' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Mã sản phẩm -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Item code' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input nz-input formControlName=\"item_code\" [placeholder]=\"'Enter item code' | translate\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Mã vạch -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"22\">\r\n              <input formControlName=\"barcode\"\r\n                (blur)=\"checkBarcodeSubProduct(barcodesize.value,formSubProduct.value.name)\" #barcodesize maxlength=\"15\"\r\n                nz-input [placeholder]=\"'Barcode' | translate\" />\r\n            </nz-form-control>\r\n            <div nz-col [nzSpan]=\"2\">\r\n              <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                (click)=\"changeBarcodeSubProduct()\" nz-tooltip\r\n                [nzTooltipTitle]=\"'Generate barcodes automatically' | translate\" nzTooltipPlacement=\"bottom\"></i>\r\n            </div>\r\n            <div class=\"validation-errors\" nz-col [nzSpan]=\"24\">\r\n              <ng-container>\r\n                <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                  <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                  </ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </nz-form-item>\r\n\r\n          <!-- Giá nhập -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Purchase price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPriceImport\">\r\n              <input nz-input class=\"size-price-purchase-item\" (keyup)=\"tranformPrice('size-price-purchase-item')\"\r\n                type=\"text\" formControlName=\"price_import\" [placeholder]=\"'Enter price' | translate\" />\r\n              <ng-template #errorSubsPriceImport let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Giá bán 2 -->\r\n          <nz-form-item style=\"margin:0 0 4px;\" *ngIf=\"management_product_price2\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}} 2*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice2\">\r\n              <input nz-input class=\"size-price2-item\" (keyup)=\"tranformPrice('size-price2-item')\" type=\"text\"\r\n                formControlName=\"price2\" [placeholder]=\"'Enter price' | translate\" />\r\n              <ng-template #errorSubsPrice2 let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Giá bán -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice\">\r\n              <input nz-input class=\"size-price-item\" (keyup)=\"tranformPrice('size-price-item')\" type=\"text\"\r\n                formControlName=\"price\" [placeholder]=\"'Enter price' | translate\" />\r\n              <ng-template #errorSubsPrice let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Đơn vị -->\r\n          <nz-form-item style=\"margin:0 0 4px; width: 100%;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Unit' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzErrorTip]=\"combineTplUnit2\">\r\n              <nz-input-group style=\"display:flex; justify-content: space-between;\">\r\n                <input style=\"width: 60%;\" formControlName=\"unit\" nz-input [placeholder]=\"'Enter unit' | translate\" />\r\n                <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"changeUnitsSubs()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{(dataUnits.length ? 'Unit list' : 'Add unit') | translate}}\r\n                </button>\r\n                <ng-template #combineTplUnit2 let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Số lượng cảnh báo hết hàng -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Minimum quantity to alert' | translate}}*</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsWarning_number\">\r\n              <input nz-input type=\"number\" formControlName=\"warning_number\"\r\n                [placeholder]=\"'Enter number' | translate\" />\r\n              <ng-template #errorSubsWarning_number let-control>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid value' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <!-- <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell'|translate}}</label> -->\r\n            <label nz-checkbox formControlName=\"selling\">{{'Quick sale' | translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" flex *ngIf=\"management_product_lot\">\r\n            <label nz-checkbox formControlName=\"manylot\" (ngModelChange)=\"changeManyLotSub($event)\">{{'Lô, hạn sử dụng' | translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLot(formSubProduct.value.lots)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #modalFooterAddUnitPrice>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelAdd()\">\r\n      {{'Cancel' |translate}}\r\n    </button>\r\n    <button [disabled]=\"formSubProduct.invalid\" [ngStyle]=\"{opacity: formSubProduct.invalid ? 0.5 : 1}\" nz-button\r\n      class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleFormSubProduct(formSubProduct.value)\">\r\n      {{'Save' | translate}}\r\n    </button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<app-units-list *ngIf=\"showDrawerUnits\" [dataUnits]=\"dataUnits\" [dataUnit]=\"dataUnitMain\" [barcodes]=\"barcodes\"\r\n  [showDrawerUnits]=\"showDrawerUnits\" (closeUnits)=\"closeUnits($event)\">\r\n</app-units-list>\r\n<app-lot-list *ngIf=\"show_lot_list\" [data]=\"lot_list\" [show_lot_list]=\"show_lot_list\" [barcodes]=\"barcodes\"\r\n  (close)=\"handleLotList($event)\">\r\n</app-lot-list>\r\n","import { Component } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators, FormArray, AbstractControl, ValidationErrors } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhQueryCafe, VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-create-data-products',\r\n  templateUrl: './create-data-products.component.html',\r\n  styleUrls: ['./create-data-products.component.scss']\r\n})\r\nexport class CreateDataProductsComponent {\r\n\r\n  formData: FormGroup[] = [];\r\n  localProduct: any[] = [];\r\n  localCategory: any[] = []\r\n  nameFile: string = \"\";\r\n  file_import_is_manysize = false;\r\n  url: any = \"/assets/documents/list-ingredients/\" + this.languageService.translate(\"Ingredients list\") + \".xlsx\";\r\n  url_sub: any = \"/assets/documents/list-ingredients/\" + this.languageService.translate(\"The size of the ingredients list\") + \".xlsx\";\r\n  VALIDATOR_PRICE = [Validators.required, Validators.pattern(\"^[^0.-][0-9]*(([.](?=[0-9]){1}[0-9]{0,5})|)\")];\r\n\r\n\r\n\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService,\r\n    private platform: Platform,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.syncData()\r\n  }\r\n\r\n\r\n\r\n  syncData() {\r\n    this.localProduct = this.vhQueryCafe.getlocalProducts().filter(item => item.type == 1);\r\n    this.localCategory = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * trả về form lưu các trường để thêm sp\r\n   * @example this.initForm({name : '',...} , 1)\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  initForm(data, index) {\r\n    const units = new FormArray([]);\r\n    const form = new FormGroup({\r\n      manylot: new FormControl(data[this.languageService.translate(\"_manylot\")]?.toString().toLowerCase() === 'yes'),\r\n      manysize: new FormControl(data[this.languageService.translate(\"_subname\")] ? true : false),\r\n      id: new FormControl(index),\r\n      name: new FormControl(data[this.languageService.translate(\"_name\")], [Validators.required]),\r\n      subname: new FormControl(data[this.languageService.translate(\"_subname\")] || '', data[this.languageService.translate(\"_subname\")] ? [Validators.required] : []),\r\n      category: new FormControl(data[this.languageService.translate(\"_category\")], Validators.required),\r\n      unit: new FormControl(data[this.languageService.translate(\"_unit\")], [Validators.required]),\r\n      ratio: new FormControl(1, [Validators.required]),\r\n      brand: new FormControl(data[this.languageService.translate(\"_brand\")]),\r\n      price_import: new FormControl(data[this.languageService.translate(\"_price_import\")], this.VALIDATOR_PRICE),\r\n      price: new FormControl(data[this.languageService.translate(\"_price\")], this.VALIDATOR_PRICE),\r\n      price2: new FormControl(data[this.languageService.translate(\"_price2\")], this.VALIDATOR_PRICE),\r\n      barcode: new FormControl(data[this.languageService.translate(\"_barcode\")]?.toString(), [\r\n        CustomValidators.barcodeValidator(() => this.formData, this.vhQueryCafe)\r\n      ]),\r\n      warning_number: new FormControl(data[this.languageService.translate(\"_warning_number\")] === '' ? 0 : Number(data[this.languageService.translate(\"_warning_number\")]), [Validators.pattern(/^-?\\d+(\\.\\d+)?$/)]),\r\n      item_code: new FormControl(data[this.languageService.translate(\"_item_code\")]),\r\n      tax: new FormControl(0),\r\n      units: units,\r\n    });\r\n\r\n    // Thêm unit và validators\r\n    form.get('unit')?.setValidators([\r\n      Validators.required,\r\n      CustomValidators.unitNameValidator(() => form)\r\n    ]);\r\n\r\n    // Thêm ratio và validators\r\n    form.get('ratio')?.disable();\r\n    form.get('ratio')?.setValidators([\r\n      Validators.required,\r\n      CustomValidators.ratioValidator(() => form)\r\n    ]);\r\n  \r\n    // Xử lý subname và manysize cho sub\r\n    if (data[this.languageService.translate(\"_subname\")]) {\r\n      form.addControl('subname', new FormControl(data[this.languageService.translate(\"_subname\")], [Validators.required]));\r\n      form.get('manysize')?.setValue(true);\r\n    } else {\r\n      form.removeControl('subname');\r\n      form.get('manysize')?.setValue(false);\r\n    }\r\n  \r\n    return form;\r\n  }\r\n  \r\n\r\n\r\n  /**\r\n   * Nhập tệp Excel\r\n   */\r\n  openFile() {\r\n    document.getElementById(\"file_excel_product\")['value'] = '';\r\n    document.getElementById(\"file_excel_product\").click()\r\n  }\r\n\r\n\r\n\r\n  /**Mở CSVFile */\r\n  openXLSXFile(events) {\r\n\r\n    this.formData = []\r\n    this.file_import_is_manysize = false;\r\n    if (events.target.files[0]) {\r\n      // lưu tên file\r\n      this.nameFile = events.target.files[0]['name'].slice(0, events.target.files[0]['name'].lastIndexOf(\".\"))\r\n      this.vhAlgorithm.importXLSX(events.target.files[0]).then((data: any) => {\r\n        if (data.length > 200) {\r\n          this.vhComponent.alertMessage(\"\", this.languageService.translate(\"Only 200 products can be imported at a time\"), \"\", \"OK\").then(() => {\r\n            this.formData = []\r\n          })\r\n        } else {\r\n          if (data.length) {\r\n            this.vhComponent.showLoading(\"\").then(() => {\r\n              /** Map chứa sản phẩm theo tên */\r\n              const productMap = new Map();\r\n              \r\n              // Lặp qua từng dùng trong file\r\n              data.forEach((item, index) => {\r\n                const productName = item[this.languageService.translate('_name')];\r\n                const subname = item[this.languageService.translate('_subname')];\r\n                let key = '';\r\n\r\n                // CÓ sub\r\n                if (subname) {\r\n                  key = `${productName}_${subname}`;\r\n                }\r\n                // KHÔNG sub\r\n                else {\r\n                  key = `${productName}`;\r\n                }\r\n\r\n                // Nếu chưa có form trong map thì tạo mới\r\n                if (!productMap.has(key)) {\r\n                  const form = this.initForm(item, index);\r\n                  productMap.set(key, form);\r\n                } \r\n                // Nếu đã có form trong map thì lấy ra và thêm unit\r\n                else {\r\n                  // Lấy form ra\r\n                  const existingForm = productMap.get(key);\r\n                  // Thêm unit\r\n                  const newUnit = this.addUnitForm(existingForm, item);\r\n                  // Thêm vô mảng units\r\n                  (existingForm.get('units') as FormArray).push(newUnit);\r\n                  // Lưu lại form đã cập nhật vào map\r\n                  productMap.set(key, existingForm);\r\n                }\r\n\r\n                if (index == data.length - 1) {\r\n                  this.formData = Array.from(productMap.values()); // Chuyển map sang array\r\n                  console.log(\"formData\", this.formData);\r\n                  this.vhComponent.hideLoading(0);\r\n                  // nếu có sub thì check lại checkModelChangeSubProduct\r\n                  if (this.formData[0].value.manysize) {\r\n                    this.file_import_is_manysize = true;\r\n                  }\r\n                  else {\r\n                    this.file_import_is_manysize = false;\r\n                  }\r\n                }\r\n              })\r\n            })\r\n          }\r\n        }\r\n      }).catch(err => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.formData = [];\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), this.languageService.translate(\"Fail file format\"), \"\", this.languageService.translate(\"Cancel\"));\r\n      })\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /**\r\n   * Trả về một FormGroup cho unit mới, dùng khi thêm unit mới vào units\r\n   */\r\n  addUnitForm(existingForm: FormGroup, item): FormGroup {\r\n    return new FormGroup({\r\n      price: new FormControl(parseFloat(item[this.languageService.translate('_price')]), this.VALIDATOR_PRICE),\r\n      price2: new FormControl(parseFloat(item[this.languageService.translate('_price2')]), this.VALIDATOR_PRICE),\r\n      price_import: new FormControl(parseFloat(item[this.languageService.translate('_price_import')]), this.VALIDATOR_PRICE),\r\n      unit: new FormControl(item[this.languageService.translate('_unit')] ? item[this.languageService.translate('_unit')].trim() : '', [\r\n        Validators.required,\r\n        CustomValidators.unitNameValidator(() => existingForm)\r\n      ]),\r\n      barcode: new FormControl(item[this.languageService.translate('_barcode')] ? item[this.languageService.translate('_barcode')] : '', [\r\n        CustomValidators.barcodeValidator(() => this.formData, this.vhQueryCafe)\r\n      ]),\r\n      ratio: new FormControl(item[this.languageService.translate('_ratio')] ? parseFloat(item[this.languageService.translate('_ratio')]) : 1, [\r\n        Validators.required,\r\n        CustomValidators.ratioValidator(() => existingForm)\r\n      ]),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  status: boolean = false;\r\n  /** \r\n   * Xuất tệp ra XLSX\r\n   */\r\n  exportXLSXFile() {\r\n    if (this.formData.length) {\r\n      let XLSXData: any[] = [];\r\n      this.formData.forEach((item, index) => {\r\n        let row: Object = new Object;\r\n        row[this.languageService.translate(\"_name\")] = item['value']['name'];\r\n        if (item['value']['subname']) row[this.languageService.translate(\"_subname\")] = item['value']['subname'];\r\n        row[this.languageService.translate(\"_item_code\")] = item['value']['item_code'] ? item['value']['item_code'] : '';\r\n        row[this.languageService.translate(\"_tax\")] = 0;\r\n        row[this.languageService.translate(\"_category\")] = item['value']['category'];\r\n        row[this.languageService.translate(\"_brand\")] = item['value']['brand'];\r\n        row[this.languageService.translate(\"_unit\")] = item['value']['unit'];\r\n        row[this.languageService.translate(\"_ratio\")] = item['value']['ratio'];\r\n        row[this.languageService.translate(\"_price_import\")] = item['value']['price_import'];\r\n        row[this.languageService.translate(\"_price\")] = item['value']['price'];\r\n        row[this.languageService.translate(\"_price2\")] = item['value']['price2'];\r\n        row[this.languageService.translate(\"_barcode\")] = item['value']['barcode'];\r\n        row[this.languageService.translate(\"_warning_number\")] = item['value']['warning_number'];\r\n        row[this.languageService.translate(\"_manylot\")] = item['value']['manylot'] ? 'Yes' : 'No';\r\n        XLSXData.push(row);\r\n        // Xử lý units\r\n        if (item['value']['units'] && item['value']['units'].length) {\r\n          item['value']['units'].forEach((unit, unitIndex) => {\r\n            let unitRow: Object = new Object;\r\n            unitRow[this.languageService.translate(\"_name\")] = item['value']['name'];\r\n            if (item['value']['subname']) unitRow[this.languageService.translate(\"_subname\")] = item['value']['subname'];\r\n            unitRow[this.languageService.translate(\"_unit\")] = unit['unit'];\r\n            unitRow[this.languageService.translate(\"_ratio\")] = unit['ratio'];\r\n            unitRow[this.languageService.translate(\"_price_import\")] = unit['price_import'];\r\n            unitRow[this.languageService.translate(\"_price\")] = unit['price'];\r\n            unitRow[this.languageService.translate(\"_price2\")] = unit['price2'];\r\n            unitRow[this.languageService.translate(\"_barcode\")] = unit['barcode'];\r\n            XLSXData.push(unitRow);\r\n          });\r\n        }\r\n        if (index == this.formData.length - 1) {\r\n          this.vhAlgorithm.exportXLSX(XLSXData, this.nameFile).then(() => this.status = true).catch(err => this.status = true);\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Tải file mẫu */\r\n  downloadSampleFile() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Danh-sach-nguyen-lieu-new.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Ingredient-list-new.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-cafe-language\");\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes, height=250, width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250, width=250, scrollbars=yes,status=yes,title=Download');\r\n    } else {\r\n      document.getElementById(\"download_product\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Tải file mẫu có sub */\r\n  downloadSampleFileSub() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Danh-sach-nguyen-lieu-co-thuoc-tinh-new.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/The-size-of-the-ingredient-list.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-cafe-language\");\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n    } else {\r\n      document.getElementById(\"download_subproduct\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkForm(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, \"\", this.languageService.translate(\"Cancel\"));\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  createdError: string = \"\";\r\n  /**\r\n  * bắt sk nhấn nút lưu\r\n  * @example this.createData()\r\n  */\r\n  createData() {\r\n    if (this.checkForm()) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Create product data\") + '?', \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(res => {\r\n          if (!this.file_import_is_manysize) this.createCategoriesAndProduct();\r\n          else this.createCategoriesAndSubProduct();\r\n        }, () => { });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo dữ liệu danh mục và sản phẩm\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  createCategoriesAndProduct() {\r\n    this.vhComponent.showLoading(\"\", \"current-loading\").then(async () => {\r\n      // lấy dữ liệu tên category\r\n      const dataCategory: any[] = [...new Set(this.formData.map(item => item['value']['category']))];\r\n      // tìm ra dữ liệu category chưa được tạo database\r\n      let createdCategory: any[] = []; // danh sách danh mục được tạo\r\n      dataCategory.forEach((item, index) => {\r\n        if (item && !this.localCategory.some(cate => this.vhAlgorithm.changeAlias(cate.name.trim()).toLowerCase() == this.vhAlgorithm.changeAlias(item.trim()).toLowerCase()))\r\n          createdCategory.push({ name: item, type: 3 });\r\n      })\r\n\r\n      try {\r\n        const categories: any = await this.vhQueryCafe.addCategorys(createdCategory);\r\n\r\n        if (categories)\r\n          this.localCategory = [...this.localCategory.concat([...categories])];\r\n        else throw Error(\"Categories have been created failed\");\r\n\r\n        // tạo sản phẩm\r\n        const dataProduct: any[] = this.formData.map(form => {\r\n          const category: any = this.localCategory.find(cate => this.vhAlgorithm.changeAlias(cate['name'].trim()).toLowerCase() == this.vhAlgorithm.changeAlias(form['value']['category'].trim()).toLowerCase())\r\n          let data: any = {\r\n            img: '',\r\n            name: form['value']['name'].trim(),\r\n            warning_number: !form['value']['warning_number'] ? 0 : parseInt(form['value']['warning_number']),\r\n            item_code: form['value']['item_code'] ? form['value']['item_code'].trim() : '',\r\n            tax: 0,\r\n            brand: form['value']['brand'] ? form['value']['brand'].trim() : '',\r\n            id_category: category?._id,\r\n            type: VhType.INGREDIENT,\r\n            // allow_sell: true,\r\n            delete_hidden: false,\r\n            manysize: false,\r\n            manylot: form['value']['manylot'],\r\n            units: [\r\n              {\r\n                price: parseFloat(form['value']['price']),\r\n                price2: parseFloat(form['value']['price2']),\r\n                price_import: parseFloat(form['value']['price_import']),\r\n                unit: form['value']['unit'] ? form['value']['unit'].trim() : '',\r\n                barcode: form['value']['barcode'] ? form['value']['barcode'] : '',\r\n                ratio: 1,\r\n                default: true\r\n              },\r\n              ...form['value']['units'].map(unit => {\r\n                return {\r\n                  price: parseFloat(unit['price']),\r\n                  price2: parseFloat(unit['price2']),\r\n                  price_import: parseFloat(unit['price_import']),\r\n                  unit: unit['unit'] ? unit['unit'].trim() : '',\r\n                  barcode: unit['barcode'] ? unit['barcode'] : '',\r\n                  ratio: parseFloat(unit['ratio']),\r\n                  default: false\r\n                };\r\n              })\r\n            ]\r\n          }\r\n          if (form['value']['manylot']) {\r\n            data['days_import_warning'] = 7;\r\n            data['days_exp_warning'] = 7;\r\n            data['lots'] = [];\r\n          }\r\n          return data;\r\n        });\r\n\r\n        // Mỗi lần add 5 cái, xong mới add tiếp 5 cái kế\r\n        const batchSize = 5;\r\n        let addedProducts = [];\r\n        for (let i = 0; i < dataProduct.length; i += batchSize) {\r\n          // lấy 5 cái\r\n          const batch = dataProduct.slice(i, i + batchSize);\r\n          try {\r\n            const promises = batch.map(async (product) => {\r\n              return await this.vhQueryCafe.addProducts([product]);\r\n            });\r\n            // add\r\n            const results = await this.vhQuery.asyncPromiseAll(promises);\r\n            // sau khi add xong\r\n            console.log(`Batch ${Math.floor(i / batchSize) + 1} added successfully`);\r\n            results.forEach((products, index) => {\r\n              if (products) {\r\n                addedProducts.push(...products); // Thêm các sản phẩm đã thêm vào mảng addedProducts\r\n              } else {\r\n                throw Error(\"Services have been created failed\");\r\n              }\r\n            });\r\n          } catch (error) {\r\n            console.error(`Error in batch ${Math.floor(i / batchSize) + 1}:`, error);\r\n          }\r\n        }\r\n        // add xong\r\n        this.vhComponent.hideLoading(0);\r\n        this.showLog([...dataProduct], [...addedProducts]);\r\n\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\")\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo dữ liệu danh mục và sản phẩm có sp con\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  createCategoriesAndSubProduct() {\r\n    this.vhComponent.showLoading(\"\", \"current-loading\").then(async () => {\r\n      // lấy dữ liệu tên category\r\n      const dataCategory: any[] = [...new Set(this.formData.map(item => item['value']['category']))];\r\n      // tìm ra dữ liệu category chưa được tạo database\r\n      let createdCategory: any[] = [] // danh sách danh mục được tạo\r\n      dataCategory.forEach((item, index) => {\r\n        if (item && !this.localCategory.some(cate => this.vhAlgorithm.changeAlias(cate.name.trim()).toLowerCase() == this.vhAlgorithm.changeAlias(item.trim()).toLowerCase()))\r\n          createdCategory.push({ name: item, type: 3 })\r\n      })\r\n\r\n      try {\r\n        const categories: any = await this.vhQueryCafe.addCategorys(createdCategory);\r\n\r\n        if (categories)\r\n          this.localCategory = [...this.localCategory.concat([...categories])];\r\n        else throw Error(\"Categories have been created failed\");\r\n\r\n        // tạo sản phẩm\r\n        const dataProduct: any[] = [];\r\n        let products = this.formData.map(item => { return { ...item.value } });\r\n        for (let i = 0; i < products.length; i++) {\r\n          if (!dataProduct.find(pro => pro.name == products[i].name)) {\r\n            let category: any = this.localCategory.find(cate => this.vhAlgorithm.changeAlias(cate['name'].trim()).toLowerCase() == this.vhAlgorithm.changeAlias(products[i]['category'].trim()).toLowerCase());\r\n            let subproduct = products.filter(e => e.name == products[i].name);\r\n            dataProduct.push({\r\n              img: '',\r\n              name: products[i].name,\r\n              brand: products[i].brand,\r\n              tax: 0,\r\n              manysize: true,\r\n              type: VhType.INGREDIENT,\r\n              id_category: category?._id,\r\n              delete_hidden: false,\r\n              subs: subproduct.map(sub => {\r\n                let sub_data = {\r\n                  name: sub.subname,\r\n                  warning_number: sub.warning_number,\r\n                  manylot: sub.manylot,\r\n                  item_code: sub.item_code ? sub.item_code.trim() : '',\r\n                  // allow_sell: true,\r\n                  delete_hidden: false,\r\n                  selling: true,\r\n                  units: [\r\n                    {\r\n                      price: parseFloat(sub.price ? sub.price.toString().trim() : '0'),\r\n                      price2: parseFloat(sub.price2 ? sub.price2.toString().trim() : '0'),\r\n                      price_import: parseFloat(sub.price_import ? sub.price_import.toString().trim() : \"0\"),\r\n                      barcode: sub.barcode ? sub.barcode.toString().trim() : '',\r\n                      unit: sub['unit'] ? sub['unit'].toString().trim() : '',\r\n                      ratio: 1,\r\n                      default: true\r\n                    },\r\n                    ...sub['units'].map(unit => {\r\n                      return {\r\n                        price: parseFloat(unit['price']),\r\n                        price2: parseFloat(unit['price2']),\r\n                        price_import: parseFloat(unit['price_import']),\r\n                        unit: unit['unit'] ? unit['unit'].trim() : '',\r\n                        barcode: unit['barcode'] ? unit['barcode'] : '',\r\n                        ratio: parseFloat(unit['ratio']),\r\n                        default: false\r\n                      };\r\n                    })\r\n                  ]\r\n                }\r\n                if (sub.manylot) {\r\n                  sub_data['days_import_warning'] = 7\r\n                  sub_data['days_exp_warning'] = 7\r\n                  sub_data['lots'] = []\r\n                }\r\n                return sub_data\r\n              })\r\n            });\r\n          }\r\n        }\r\n        \r\n        // Mỗi lần add 5 cái, xong mới add tiếp 5 cái kế\r\n        const batchSize = 5;\r\n        try {\r\n          for (let i = 0; i < dataProduct.length; i += batchSize) {\r\n            // lấy 5 cái\r\n            const batch = dataProduct.slice(i, i + batchSize);\r\n            const promises = batch.map(async (product) => {\r\n              let subs = [];\r\n              if (product.manysize) {\r\n                subs = [...product.subs];\r\n                delete product.subs;\r\n              }\r\n              return await this.vhQueryCafe.addProductAndSubsProduct_Cafe(product, subs);\r\n            });\r\n            // add\r\n            const results = await this.vhQuery.asyncPromiseAll(promises);\r\n            // sau khi add xong\r\n            console.log(`Batch ${Math.floor(i / batchSize) + 1} added successfully`);\r\n            if (!results) {\r\n              throw Error(\"Products have been created failed\");\r\n            }\r\n          }\r\n          \r\n          this.vhComponent.showToast(1500, `${this.languageService.translate(\"Products\")} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n        } catch (error) {\r\n          console.error(\"Error in batch processing:\", error);\r\n          this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\");\r\n        } finally {\r\n          this.vhComponent.hideLoading(0);\r\n          this.goBack();\r\n        }\r\n      } catch (error) {\r\n        this.vhComponent.hideLoading(0);\r\n        console.error(error);\r\n        this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\")\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * hiển thị modal lỗi thêm sp nếu có\r\n   * @param data mảng sp cần thêm\r\n   * @param dataSuccess mảng sp đã thêm lên DB thành công\r\n   * @example this.showLog([...data], [...customer])\r\n   */\r\n  showLog(data: any[], dataSuccess: any[]) {\r\n    this.createdError = \"\";\r\n    if (data.length != dataSuccess.length) {\r\n      for (let product of data) {\r\n        if (!dataSuccess.some(item => item.phone == product.phone))\r\n          this.createdError += `<span> - ${product.name}(${product.phone})</span><br/>`;\r\n      }\r\n\r\n      this.nzModalService.error({\r\n        nzTitle: this.languageService.translate(\"Products have been created failed\"),\r\n        nzContent: this.createdError\r\n      });\r\n\r\n      this.formData = [];\r\n\r\n    } else {\r\n      this.vhComponent.hideLoading(0).then(() => {\r\n        this.goBack();\r\n      })\r\n      this.vhComponent.showToast(1500, `${this.languageService.translate(\"Products\")} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list']);\r\n  }\r\n}\r\n\r\n\r\n\r\nexport class CustomValidators {\r\n\r\n  /**\r\n   * Kiểm tra barcode có trùng trong form và trong database hay không.\r\n   * \r\n   * Sẽ trả về lỗi `barcodeExists` nếu có trùng.\r\n   * \r\n   * @param formData \r\n   * @param vhQueryCafe\r\n   * @returns\r\n   * @example\r\n   * barcode: new FormControl('mybarcode', [CustomValidators.barcodeValidator(() => this.formData, this.vhQueryCafe)]),\r\n   */\r\n  static barcodeValidator(formData: () => FormGroup[], vhQueryCafe: VhQueryCafe) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi barcode */\r\n      const barcodeCounts = new Map<string, number>();\r\n  \r\n      // Đếm số lần xuất hiện của mỗi barcode\r\n      formData()?.forEach(form => {\r\n        const allControls = [form.get('barcode'), ...((form.get('units') as FormArray).controls.map(unit => unit.get('barcode')))];\r\n        allControls.forEach(ctrl => {\r\n          const ctrlBarcode = ctrl?.value?.toString()?.trim();\r\n          if (ctrlBarcode) {\r\n            barcodeCounts.set(ctrlBarcode, (barcodeCounts.get(ctrlBarcode) || 0) + 1);\r\n            // Kiểm tra xem barcode hiện tại có trùng trong database hay không\r\n            const barcodeExistsInDB = vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(ctrlBarcode);\r\n            if (barcodeExistsInDB) {\r\n              barcodeCounts.set(ctrlBarcode, (barcodeCounts.get(ctrlBarcode) || 0) + 1);\r\n            }\r\n          }\r\n        });\r\n      });\r\n  \r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      formData()?.forEach(form => {\r\n        const allControls = [form.get('barcode'), ...((form.get('units') as FormArray).controls.map(unit => unit.get('barcode')))];\r\n        allControls.forEach(ctrl => {\r\n          const ctrlBarcode = ctrl?.value?.toString()?.trim();\r\n          // Nếu xuất hiện > 1 lần thì set lỗi\r\n          if (barcodeCounts.get(ctrlBarcode) > 1) {\r\n            ctrl?.setErrors({ ...ctrl.errors, barcodeExists: true });\r\n          } \r\n          // Nếu không thì xóa lỗi barcodeExists\r\n          else {\r\n            if (ctrl?.hasError('barcodeExists')) {\r\n              /** Danh sách những lỗi hiện tạo của contol này */\r\n              const existingErrors = ctrl.errors; \r\n              // Xóa lỗi barcodeExists nếu có\r\n              if (existingErrors) {\r\n                delete existingErrors['barcodeExists'];\r\n                ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n  \r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return barcodeCounts.get(control.value) > 1 ? { barcodeExists: true } : null;\r\n    };\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * Kiểm tra tên đơn vị có trùng trong sản phẩm hay không.\r\n   * \r\n   * Sẽ trả về lỗi `unitNameExists` nếu có trùng.\r\n   * \r\n   * Cần kiểm tra unit của form và units.\r\n   */\r\n  static unitNameValidator(currentForm: () => FormGroup) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi unit */\r\n      const unitCounts = new Map<string, number>();\r\n      /** Tất cả control của unit trong form và units */\r\n      const allControls = [currentForm().get('unit'), ...((currentForm().get('units') as FormArray).controls.map(unit => unit.get('unit')))];\r\n\r\n      // Đếm số lần xuất hiện của mỗi unit\r\n      allControls.forEach(ctrl => {\r\n        const unitNameValue = ctrl?.value?.trim();\r\n        if (unitNameValue) {\r\n          unitCounts.set(unitNameValue, (unitCounts.get(unitNameValue) || 0) + 1);\r\n        }\r\n      });\r\n\r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      allControls.forEach(ctrl => {\r\n        // Nếu xuất hiện > 1 lần thì set lỗi\r\n        if (unitCounts.get(ctrl?.value?.trim()) > 1) {\r\n          ctrl?.setErrors({ unitNameExists: true });\r\n        } \r\n        // Nếu không thì xóa lỗi unitNameExists\r\n        else {\r\n          if (ctrl?.hasError('unitNameExists')) {\r\n            /** Danh sách những lỗi hiện tạo của contol này */\r\n            const existingErrors = ctrl.errors;\r\n            // Xóa lỗi unitNameExists nếu có\r\n            if (existingErrors) {\r\n              delete existingErrors['unitNameExists'];\r\n              ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return unitCounts.get(control.value) > 1 ? { unitNameExists: true } : null;\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Kiểm tra ratio có trùng trong sản phẩm hay không.\r\n   * \r\n   * Sẽ trả về lỗi `ratioExists` nếu có trùng.\r\n   * \r\n   * Cần kiểm tra ratio của form và ratio trong unitss.\r\n   */\r\n  static ratioValidator(currentForm: () => FormGroup) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi ratio */\r\n      const ratioCounts = new Map<string, number>();\r\n      /** Tất cả control của ratio trong form và units */\r\n      const allControls = [currentForm().get('ratio'), ...((currentForm().get('units') as FormArray).controls.map(ratio => ratio.get('ratio')))];\r\n\r\n      // Đếm số lần xuất hiện của mỗi ratio\r\n      allControls.forEach(ctrl => {\r\n        const ratioValue = ctrl?.value?.toString()?.trim();\r\n        if (ratioValue) {\r\n          ratioCounts.set(ratioValue, (ratioCounts.get(ratioValue) || 0) + 1);\r\n        }\r\n      });\r\n\r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      allControls.forEach(ctrl => {\r\n        // Nếu xuất hiện > 1 lần thì set lỗi\r\n        if (ratioCounts.get(ctrl?.value?.toString()?.trim()) > 1) {\r\n          ctrl?.setErrors({ ratioExists: true });\r\n        } \r\n        // Nếu không thì xóa lỗi ratioExists\r\n        else {\r\n          if (ctrl?.hasError('ratioExists')) {\r\n            /** Danh sách những lỗi hiện tạo của contol này */\r\n            const existingErrors = ctrl.errors;\r\n            // Xóa lỗi ratioExists nếu có\r\n            if (existingErrors) {\r\n              delete existingErrors['ratioExists'];\r\n              ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return ratioCounts.get(control.value) > 1 ? { ratioExists: true } : null;\r\n    };\r\n  }\r\n\r\n}\r\n\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <div nz-row style=\"padding-bottom: 16px;z-index: 99;\">\r\n    <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n      <div>\r\n        <b>{{'Create product data' | translate}}</b>\r\n        <small style=\"color: var(--ion-color-vh-gray); display: block\">*{{'The first unit must have a ratio of 1' | translate}}</small>\r\n      </div>\r\n    </div>\r\n    <div nz-col nzSpan=\"16\" class=\"right-all-content\">\r\n      <!-- Tải file mẫu -->\r\n      <div>\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\"  class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n          {{'Download sample file' | translate}}</button>\r\n          <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n            <ul nz-menu>\r\n              <li nz-menu-item (click)=\"downloadSampleFile()\">{{'Product WITHOUT ATTRIBUTE' | translate}}</li>\r\n              <li nz-menu-item (click)=\"downloadSampleFileSub()\">{{'Product WITH ATTRIBUTE' | translate}}</li>\r\n            </ul>\r\n          </nz-dropdown-menu>\r\n      </div>\r\n      <!-- Xuất tệp -->\r\n      <div>\r\n        <button (click)=\"exportXLSXFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export file' | translate}}</button>\r\n      </div>\r\n      <!-- Nhập tệp -->\r\n      <div>\r\n        <button (click)=\"openFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"upload\" nzTheme=\"outline\"></i>\r\n          {{'Import file' | translate}}</button>\r\n      </div>\r\n      <!-- Tạo dữ liệu -->\r\n      <div>\r\n        <button (click)=\"createData()\" [disabled]=\"!formData.length\" class=\"btn-add center-all-content\" nz-button\r\n          nzType=\"default\">\r\n          <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n          {{'Create data' | translate}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div nz-row class='table'>\r\n    <table>\r\n      <thead>\r\n        <tr *ngIf=\"file_import_is_manysize\">\r\n          <th style=\"max-width: 3% !important; width: 3%;\">#</th>\r\n          <th style=\"max-width: 8% !important; width: 8%;\">{{\"_name\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%;\">{{\"_subname\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_item_code\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_category\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_brand\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%; text-align: center;\">{{\"_unit\"| translate}}</th>\r\n          <th style=\"max-width: 3% !important; width: 3%; text-align: center;\">{{\"_ratio\"| translate}}</th>\r\n          <th *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_tax\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price_import\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price2\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_barcode\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_warning_number\"| translate}}</th>\r\n        </tr>\r\n        <tr *ngIf=\"!file_import_is_manysize\">\r\n          <th style=\"max-width: 3% !important; width: 3%;\">#</th>\r\n          <th style=\"max-width: 15% !important; width: 15%;\">{{\"_name\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_item_code\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_category\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_brand\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%; text-align: center;\">{{\"_unit\"| translate}}</th>\r\n          <th style=\"max-width: 3% !important; width: 3%; text-align: center;\">{{\"_ratio\"| translate}}</th>\r\n          <th *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_tax\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price_import\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price2\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_barcode\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_warning_number\"| translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n          <tr>\r\n            <!-- STT -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">{{i + 1}}</td>\r\n  \r\n            <!-- Tên sản phẩm -->\r\n            <td [ngStyle]=\"{'max-width': file_import_is_manysize ? '8% !important' : '15% !important', 'width' : file_import_is_manysize ? '8%' : '15%'}\">\r\n              <input formControlName=\"name\"\r\n                type=\"text\" [placeholder]=\"'_name'| translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('name').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Name is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Tên thuộc tính -->\r\n            <td style=\"max-width: 7% !important; width: 7%;\" *ngIf=\"file_import_is_manysize\">\r\n              <input formControlName=\"subname\" \r\n                type=\"text\" [placeholder]=\"'_subname' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('subname')?.hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Size name is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Mã sản phẩm -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"item_code\"\r\n                style=\"text-align: end;\" type=\"text\" [placeholder]=\"'_item_code' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Danh mục -->\r\n            <td style=\"max-width: 10% !important; width: 10%;\">\r\n              <input formControlName=\"category\" \r\n                [placeholder]=\"'_category' | translate\" type=\"text\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('category').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Category is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('category').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Category is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Thương hiệu -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"brand\" type=\"text\" [placeholder]=\"'_brand' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Đơn vị -->\r\n            <td style=\"max-width: 7% !important; width: 7%;\">\r\n              <input formControlName=\"unit\" type=\"text\" [placeholder]=\"'_unit' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('unit').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Unit is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('unit').hasError('unitNameExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'Unit already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Tỉ lệ quy đổi -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">\r\n              <input formControlName=\"ratio\" type=\"text\" [placeholder]=\"'_ratio' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('ratio').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Ratio is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('ratio').hasError('ratioExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'Ratio already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Thuế -->\r\n            <td *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"tax\" type=\"text\" [placeholder]=\"'_tax' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Giá nhập -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input formControlName=\"price_import\" \r\n                style=\"text-align: end;\" type=\"number\" [placeholder]=\"'_price_import' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price_import').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Cost is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price_import').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Giá bán -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input style=\"text-align: end;\" type=\"number\" formControlName=\"price\"\r\n                [placeholder]=\"'_price' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Price is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Giá bán 2 -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input formControlName=\"price2\"\r\n                style=\"text-align: end;\" type=\"number\" [placeholder]=\"'_price2' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price2').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Wholesale price is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price2').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Mã vạch -->\r\n            <td style=\"max-width: 10% !important; width: 10%;\">\r\n              <input formControlName=\"barcode\"\r\n                type=\"text\" [placeholder]=\"'_barcode' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('barcode').hasError('barcodeExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'QR code already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Số lượng cảnh báo -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"warning_number\" \r\n                style=\"text-align: end;\" type=\"text\" [placeholder]=\"'_warning_number' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('warning_number').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid format number' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n\r\n          <!-- Danh sách units còn lại nếu có nhiều hơn 1 unit -->\r\n          <ng-container *ngIf=\"form.get('units')?.controls.length > 0\">\r\n            <tr *ngFor=\"let unit of form.get('units').controls\" [formGroup]=\"unit\">\r\n\r\n              <!-- STT -->\r\n              <td style=\"max-width: 3% !important; width: 3%;\"></td>\r\n    \r\n              <!-- Tên sản phẩm -->\r\n              <td [ngStyle]=\"{'max-width': file_import_is_manysize ? '8% !important' : '15% !important', 'width' : file_import_is_manysize ? '8%' : '15%'}\">\r\n              </td>\r\n    \r\n              <!-- Tên thuộc tính -->\r\n              <td style=\"max-width: 7% !important; width: 7%;\" *ngIf=\"file_import_is_manysize\">\r\n              </td>\r\n    \r\n              <!-- Mã sản phẩm -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Danh mục -->\r\n              <td style=\"max-width: 10% !important; width: 10%;\">\r\n              </td>\r\n    \r\n              <!-- Thương hiệu -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Đơn vị -->\r\n              <td style=\"max-width: 7% !important; width: 7%;\">\r\n                <input type=\"text\" formControlName=\"unit\" [placeholder]=\"'_unit' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('unit').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Unit is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('unit').hasError('unitNameExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Unit already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Tỉ lệ quy đổi -->\r\n              <td style=\"max-width: 3% !important; width: 3%;\">\r\n                <input type=\"text\" formControlName=\"ratio\" [placeholder]=\"'_ratio' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('ratio').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Ratio is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('ratio').hasError('ratioExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Ratio already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Thuế -->\r\n              <td *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Giá nhập -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price_import\"\r\n                  [placeholder]=\"'_price_import' | translate\" />\r\n                  <div class=\"error-message error-font\" *ngIf=\"unit.get('price_import').hasError('required')\">\r\n                    <ion-text color=\"vh-red\">{{ 'Cost is required' | translate }}</ion-text>\r\n                  </div>\r\n                  <div class=\"error-message error-font\" *ngIf=\"unit.get('price_import').hasError('pattern')\">\r\n                    <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                  </div>\r\n              </td>\r\n    \r\n              <!-- Giá bán -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price\"\r\n                  [placeholder]=\"'_price' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Price is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price').hasError('pattern')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Giá bán 2 -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price2\"\r\n                  [placeholder]=\"'_price2' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price2').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Wholesale price is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price2').hasError('pattern')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Mã vạch -->\r\n              <td style=\"max-width: 10% !important; width: 10%;\">\r\n                <input formControlName=\"barcode\" \r\n                  type=\"text\" [placeholder]=\"'_barcode' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('barcode').hasError('barcodeExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'QR code already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Số lượng cảnh báo -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n            </tr>\r\n          </ng-container>\r\n\r\n        </ng-container>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</nz-layout>\r\n<a style=\"display: none;\" id=\"download_product\" [href]=\"url\" download></a>\r\n<a style=\"display: none;\" id=\"download_subproduct\" [href]=\"url_sub\" download></a>\r\n<input type=\"file\" style=\"display: none;\" id=\"file_excel_product\"\r\n  accept=\".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n  (change)=\"openXLSXFile($event)\" />\r\n","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js'; \r\n@Component({\r\n  selector: 'app-detail-three-col',\r\n  templateUrl: './detail-three-col.component.html',\r\n  styleUrls: ['./detail-three-col.component.scss']\r\n})\r\nexport class DetailThreeColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 3 thì hiện cả 3 tem trên hàng\r\n     * ngược lại number = 4 => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/3; i++) {\r\n     if(this.stamp.number%3 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/3) this.listRowBarcode.push({show_col2:false,show_col3:false});\r\n       else if(i == (this.stamp.number-2)/3) this.listRowBarcode.push({show_col2:true,show_col3:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n  \r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  stamp: any;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll: any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property = this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property, 'y');\r\n    console.log(this.stamp);\r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.stamp);\r\n\r\n    for (let item of this.stamp.barcode.property) {\r\n      switch (item.type) {\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'price': item.value = this.stamp.formProduct.price; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number / 2; i++) {\r\n      if (this.stamp.number % 2 == 0) this.listRowBarcode.push(true);\r\n      else {\r\n        if (i == (this.stamp.number - 1) / 2) this.listRowBarcode.push(false);\r\n        else this.listRowBarcode.push(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.stamp.formProduct.barcode)\r\n      jsbarcode(\".barcode\", this.stamp.formProduct.barcode, {\r\n        displayValue: false,\r\n        // height: 65\r\n      });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'], { state: this.stamp })\r\n  }\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n  // drop(event:any) {\r\n  //   moveItemInArray(this.stamp.barcode.property, event.previousIndex, event.currentIndex);\r\n  // }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                            }\"\r\n                            [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\"\r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': stamp.barcode.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                             }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                             <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!-- <div nz-col nzSpan=\"6\" class=\"border-left\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n                    <span>Nhập số lượng:</span>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <input nz-input type=\"number\" [(ngModel)]=\"number\" (blur)=\"changeNummber()\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"title text-center\">Thuộc tính</div>\r\n            <div style=\"text-align: end;\">\r\n                <nz-select class=\"font-text-size\" nzMode=\"default\" nzPlaceHolder=\"Kích thước phông chữ\"\r\n                    [(ngModel)]=\"propertySelected.font_size\">\r\n                    <nz-option *ngFor=\"let option of listOfFontSize\" [nzLabel]=\"option\" [nzValue]=\"option\"></nz-option>\r\n                </nz-select>\r\n            </div>\r\n \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn font-text-btn-bold\" nz-button\r\n                    [nzType]=\"propertySelected.fontBold ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontBold = !propertySelected.fontBold; \">B</button>\r\n                <button class=\"font-text-btn font-text-btn-italic\" nz-button\r\n                    [nzType]=\"propertySelected.fontItalic ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontItalic = !propertySelected.fontItalic; \"><i nz-icon nzType=\"italic\"\r\n                        nzTheme=\"outline\"></i></button>\r\n                <button class=\"font-text-btn font-text-btn-underline\" nz-button\r\n                    [nzType]=\"propertySelected.fontUnderline ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontUnderline = !propertySelected.fontUnderline; \">\r\n                    <i nz-icon nzType=\"underline\" nzTheme=\"outline\"></i></button>\r\n\r\n            </div> \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'left' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'left'\">\r\n                    <i nz-icon nzType=\"align-left\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'center' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'center'\">\r\n                    <i nz-icon nzType=\"align-center\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'right' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'right'\">\r\n                    <i nz-icon nzType=\"align-right\" nzTheme=\"outline\"></i>\r\n                </button>\r\n            </div> \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'start' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'start'\">\r\n                    <i nz-icon nzType=\"vertical-align-top\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'center' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'center'\">\r\n                    <i nz-icon nzType=\"pic-center\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'end' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'end'\">\r\n                    <i nz-icon nzType=\"vertical-align-bottom\" nzTheme=\"outline\"></i>\r\n                </button>\r\n            </div>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n                    <span>Hiển thị</span>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <nz-switch [(ngModel)]=\"propertySelected.status\" (ngModelChange)=\"propertySelected.status = $event\">\r\n                    </nz-switch>\r\n                </div>\r\n            </div>\r\n        </div> -->\r\n    </div>\r\n</nz-layout>","import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-edit-product',\r\n  templateUrl: './edit-product.component.html',\r\n  styleUrls: ['./edit-product.component.scss']\r\n})\r\nexport class EditProductComponent implements OnInit {\r\n  management_product_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_lot\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2\r\n  showModalPrintBarcode = false;\r\n  data: any = [];\r\n  showPopup: boolean = false;\r\n  ProductForm: FormGroup;\r\n  barcode: boolean = true; // biến cho phép cập nhật barcode và show lỗi trùng true: ok, false : trùng\r\n  list_category: any;\r\n  price: any;\r\n  price2: any;\r\n  price_import: any;\r\n  stateObj: any;\r\n  listBarcode = [];\r\n  listBarcodeLot = [];\r\n  showDrawerUnitsUpdate = false;\r\n  show_lot_list_update = false;\r\n  id_lotproduct = '' // biến tạm lưu id lot được chọn để in\r\n  lots = []; // biến show danh sách lô để chọn để in\r\n  show_modal_select_lots = false\r\n  public dataUnits: any[];                    // Danh sách đơn vị quy đổi\r\n  dataUnitMain = {}\r\n  public rowLabel: any = [1, 2, 3, 4, 5]\r\n  product_has_lots = false;\r\n  id_sub_or_product = ''\r\n  show_modal_select_subs = false;\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuery: VhQuery,\r\n    private cdf: ChangeDetectorRef\r\n\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state;\r\n    this.initData(this.data.formProduct);\r\n    console.log(this.data.formProduct);\r\n\r\n    this.stateObj = this.router.getCurrentNavigation().extras.state.stateObj\r\n    if (this.data.listBarcode) {\r\n      this.listBarcode = this.data.listBarcode;\r\n      this.listBarcodeLot = this.data.listBarcodeLot;\r\n    }\r\n    this.subProducts = this.data.formProduct.subs ? this.data.formProduct.subs : []\r\n    this.dataUnits = this.data.formProduct.units ? this.data.formProduct.units : []\r\n\r\n    // xữ lý price cho subs\r\n    this.subProducts = this.subProducts.map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, 1);\r\n      return { ...item, ...unit }\r\n    })\r\n    console.log(this.subProducts);\r\n    if (this.data.formProduct.manylot || this.subProducts.find(e => e.manylot)) this.product_has_lots = true\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  heightScoll = ''\r\n  ngAfterViewChecked(): void {\r\n    if (this.ProductForm.value.manysize) {\r\n      if (document.getElementById(\"main\")) this.heightScoll = document.getElementById(\"main\").clientHeight / 2 - 32 + 'px'\r\n    }\r\n    this.cdf.detectChanges()\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.data.formProduct.manysize)\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price = this.vhAlgorithm.vhnumeral(\".price\");\r\n        this.price_import = this.vhAlgorithm.vhnumeral(\".price_import\");\r\n        if(this.management_product_price2) this.price2 = this.vhAlgorithm.vhnumeral(\".price2\");\r\n      });\r\n    if (this.listBarcode.length == 0)\r\n      this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $in: [6, 5] } })\r\n        .then((response: any) => {\r\n          this.listBarcode = response.filter(e => e.type == 6).map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n          this.listBarcodeLot = response.filter(e => e.type == 5).map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /**\r\n   * gán giá trị của sp nhận từ state vào form\r\n   * @example this.initData(product_info)\r\n   */\r\n  initData(item?) {\r\n    this.list_category = this.vhQueryCafe.getlocalCategorys().filter(res => res.type == 3);\r\n    if (item) {\r\n      this.ProductForm = new FormGroup({\r\n        img: new FormControl(item.img),\r\n        name: new FormControl(item.name, [Validators.required]),\r\n        id_category: new FormControl(item.id_category, Validators.required),\r\n        brand: new FormControl(item.brand),\r\n        allow_sell: new FormControl(item.delete_hidden ? false : true),\r\n        delete_hidden: new FormControl(item.delete_hidden),\r\n        selling: new FormControl(item.selling),\r\n        type: new FormControl(item.type),\r\n        number_column: new FormControl(item.number_column ? item.number_column : 2),\r\n        number_print: new FormControl(item.number_print ? item.number_print : 10),\r\n        id_design_barcode: new FormControl(item.id_design_barcode ? item.id_design_barcode : ''),\r\n        number_column_lot: new FormControl(item.number_column_lot ? item.number_column_lot : 2),\r\n        number_print_lot: new FormControl(item.number_print_lot ? item.number_print_lot : 10),\r\n        id_design_barcode_lot: new FormControl(item.id_design_barcode_lot ? item.id_design_barcode_lot : ''),\r\n        units: new FormControl(item.units),\r\n        manysize: new FormControl(item.manysize),\r\n        manylot: new FormControl(item.manylot),\r\n        subs: new FormControl(item.subs),\r\n        item_code: new FormControl(item.item_code ? item.item_code : ''),\r\n      });\r\n      if (!item.manysize) {\r\n        if (item.units) {\r\n          let unitMain = this.vhQueryCafe.getUnit_byRatio(item.units, 1)\r\n          this.ProductForm.addControl('price_import', new FormControl(unitMain ? unitMain.price_import : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price', new FormControl(unitMain ? unitMain.price : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price2', new FormControl(unitMain ? unitMain.price2 : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('warning_number', new FormControl(item.warning_number, Validators.required))\r\n          this.ProductForm.addControl('item_code', new FormControl(item.item_code ? item.item_code : ''))\r\n          this.ProductForm.addControl('barcode', new FormControl(unitMain ? unitMain.barcode : ''))\r\n          this.ProductForm.addControl('unit', new FormControl(unitMain ? unitMain.unit : '', Validators.required))\r\n        } else {\r\n          this.ProductForm.addControl('price_import', new FormControl(item.price_import ? item.price_import : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price', new FormControl(item.price ? item.price : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price2', new FormControl(item.price2 ? item.price2 : 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('warning_number', new FormControl(item.warning_number, Validators.required))\r\n          this.ProductForm.addControl('item_code', new FormControl(item.item_code ? item.item_code : ''))\r\n          this.ProductForm.addControl('barcode', new FormControl(item.barcode ? item.barcode : ''))\r\n          this.ProductForm.addControl('unit', new FormControl(item.unit ? item.unit : '', Validators.required))\r\n        }\r\n      }\r\n      if (item.manylot) {\r\n        this.ProductForm.addControl('lots', new FormControl(item ? item.lots : []))\r\n        this.ProductForm.addControl('days_import_warning', new FormControl(item ? item.days_import_warning : '', Validators.required))\r\n        this.ProductForm.addControl('days_exp_warning', new FormControl(item ? item.days_exp_warning : '', Validators.required))\r\n        this.lot_list = item.lots\r\n      }\r\n      this.lot_list = item.lots ? item.lots : []\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list'], {\r\n      state: { stateObj: this.stateObj }\r\n    });\r\n  }\r\n\r\n  /**Hàm xóa sản phẩm */\r\n  deleteProduct() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.deleteProduct_Cafe(this.data.formProduct._id)\r\n        .then((rsp: any) => {\r\n          if (rsp.vcode === 0) {\r\n            if (this.ProductForm.value[\"img\"] && !this.ProductForm.value['img'].includes(\"assets/img/default\")) {\r\n              this.vhImage.deleteThumbnail(this.ProductForm.value[\"img\"]).then(() => {\r\n                this.vhComponent.showToast(2000, (this.languageService.translate(\"Product has been deleted successfully\")), \"success-toast\");\r\n                this.vhComponent.hideLoading(0);\r\n                setTimeout(() => {\r\n                  this.isVisible = false;\r\n                  this.goBack();\r\n                }, 300);\r\n              })\r\n            } else {\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.alertMessageDesktop(\"success\", (this.languageService.translate(\"Product has been deleted successfully\")));\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            }\r\n          } else if (rsp.vcode === 1) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n            // this.goBack();\r\n          } else if (rsp.vcode === 2) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n            // this.goBack();\r\n          } else if (rsp.vcode === 3) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Vui lòng xóa các thuộc tính của sản phẩm trước\")));\r\n            // this.goBack();\r\n          }\r\n\r\n        }).catch(error => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.alertMessageDesktop(\"error\", error);\r\n        });\r\n    })\r\n\r\n  }\r\n\r\n  /** Sự kiện click chọn ảnh*/\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 256, 256, \"products\", this.ProductForm.value[\"img\"] || null).then(\r\n      photoURL => {\r\n        this.ProductForm.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), 'success-toast');\r\n        this.updateProductByField({ img: photoURL });\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), 'alert-toast');\r\n      }\r\n    );\r\n  }\r\n\r\n  /**Kiểm tra barcode tồn tại hay chưa */\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n      this.updateProductForm('barcode', { barcode: this.ProductForm.value.barcode })\r\n    } else {\r\n      if (detailproduct._id != this.data.formProduct._id)\r\n        this.barcode = false\r\n    }\r\n  }\r\n  /**Kiểm tra barcode của sub tồn tại hay chưa */\r\n  checkBarcodeSubProduct(barcode: string, sub_name) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)\r\n    if (detailproduct == null) {\r\n      if (this.subProducts.filter(item => item.name != sub_name).filter(item => barcode && item.barcode == barcode).length)\r\n        this.barcode = false;\r\n      else {this.barcode = true;\r\n        this.updateUnitsSubProduct()\r\n      }\r\n    } else {\r\n      this.barcode = false\r\n    }\r\n  }\r\n\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n\r\n  /**\r\n    * mở modal xác nhận xóa sp\r\n    * @example this.showModal\r\n    */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok modal xác nhận xóa sp\r\n   * @example this.handleOk\r\n   */\r\n  handleOk(): void {\r\n    this.deleteProduct();\r\n  }\r\n\r\n  /**\r\n   * đóng modal xác nhận xóa sp\r\n   * @example this.handleCancel\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  /** Hàm cập nhật sản phẩm\r\n   *\r\n   * @param field         // trường cập nhật\r\n   * @param object        // vd: { name: 'San Pham 123'}\r\n   */\r\n  updateProductForm(field: string, object) {\r\n    if (this.ProductForm.valid) {\r\n      if (!this.ProductForm.value.manysize) {\r\n        if (field == 'warning_number') object.warning_number = parseFloat(object.warning_number);\r\n        if (field == 'price') object.price = parseFloat(this.price.getRawValue());\r\n        if (field == 'price_import') object.price_import = parseFloat(this.price_import.getRawValue());\r\n        if (field == 'price2') object.price2 = this.management_product_price2 ?  parseFloat(this.price2.getRawValue()) : 0;\r\n        let data: any = {}\r\n        data['units'] = [\r\n          ...this.ProductForm.value.units\r\n        ]\r\n        data['units'][0].price_import = parseFloat(this.price_import.getRawValue());\r\n        data['units'][0].price = parseFloat(this.price.getRawValue());\r\n        data['units'][0].price2 = this.management_product_price2 ?  parseFloat(this.price2.getRawValue()) : 0;\r\n        data['units'][0].barcode = this.ProductForm.value.barcode.toString();\r\n        data['units'][0].unit = this.ProductForm.value.unit;\r\n\r\n        delete object.unit;\r\n        delete object.price;\r\n        delete object.price2;\r\n        delete object.price_import;\r\n        delete object.barcode;\r\n        object = { ...object, ...data }\r\n      }\r\n      this.dataUnits = object['units']\r\n      if (this.barcode)\r\n        this.updateProductByField(object)\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(value) {\r\n    if(value.hasOwnProperty('allow_sell')) {\r\n      value = { delete_hidden: !value.allow_sell }\r\n    }\r\n    if (this.ProductForm.valid)\r\n      this.vhQueryCafe.updateProduct_Cafe(this.data.formProduct._id, value).then((res) => {\r\n        console.log(res);\r\n      }, error => {\r\n        console.log('error', error);\r\n      })\r\n  }\r\n\r\n  // Hàm kiểm tra giá trị mới update với giá trị cũ có thay đổi -  Thay đổi: true, không thay đổi: false\r\n  checkChangeObjectUpdate(object) {\r\n    const keys = Object.keys(object);\r\n    for (let key of keys) {\r\n      //  giá trị nhập vào khác với giá trị cũ\r\n      if (object[key] != this.data.formProduct[key]) {\r\n        return true;\r\n      }\r\n      else false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n   * tạo barcode tự động của sp bth\r\n   * @example this.changeBarcode()\r\n   */\r\n  changeBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode)\r\n    if (this.barcode) {\r\n      this.ProductForm.controls['barcode'].setValue(newbarcode)\r\n      this.updateProductForm('barcode', { barcode: newbarcode })\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở modal cấu hình tem in cho sản phẩm\r\n   * @example printBarcode()\r\n   */\r\n  printBarcode() {\r\n    this.showModalPrintBarcode = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok modal cấu hình tem in cho sản phẩm\r\n   * @example updateConfigLabel()\r\n   */\r\n  updateConfigLabel() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      let dataUpdate = {\r\n        id_design_barcode: this.ProductForm.value.id_design_barcode,\r\n        number_column: this.ProductForm.value.number_column,\r\n        number_print: this.ProductForm.value.number_print,\r\n      }\r\n      if (this.product_has_lots) {\r\n        dataUpdate['id_design_barcode_lot'] = this.ProductForm.value.id_design_barcode_lot\r\n        dataUpdate['number_column_lot'] = this.ProductForm.value.number_column_lot\r\n        dataUpdate['number_print_lot'] = this.ProductForm.value.number_print_lot\r\n      }\r\n      this.vhQueryCafe.updateProduct_Cafe(this.data.formProduct._id, dataUpdate)\r\n        .then((bool) => {\r\n          this.showModalPrintBarcode = false;\r\n          this.vhComponent.hideLoading(0)\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0)\r\n          console.log('error', error);\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"An error while updating product\"))\r\n        })\r\n    })\r\n\r\n\r\n  }\r\n\r\n  id_subproduct = ''\r\n  /**\r\n   * mở modal chọn sp con để in sp con\r\n   * @example this.handleOkPrintSub()\r\n   */\r\n  handleOkPrintSub() {\r\n    let sub = this.subProducts.find(e => e._id == this.id_subproduct)\r\n    this.gotoPrintLabel(sub)\r\n  }\r\n  /**\r\n   * bắt sk thay đổi đơn vị của sp con để in tem\r\n   *  this.changeUnit(subproduct_selected)\r\n   */\r\n  changeUnit(item) {\r\n    item.price = item.units.find(e => e.ratio == item.ratio).price\r\n    item.barcode = item.units.find(e => e.ratio == item.ratio).barcode\r\n  }\r\n  /**\r\n   * qua trang in tem sp\r\n   * @example this.gotoPrintLabel(product_or_subproduct_selected)\r\n   */\r\n  gotoPrintLabel(item?) {\r\n    let state = {}\r\n    if (this.ProductForm.value.manysize) {\r\n      state = {\r\n        listBarcodeLot: this.listBarcodeLot,\r\n        listBarcode: this.listBarcode,\r\n        col: this.ProductForm.value.number_column,\r\n        number: this.ProductForm.value.number_print,\r\n        barcode: this.listBarcode[this.listBarcode.findIndex(item => item._id == this.ProductForm.value.id_design_barcode)],\r\n        formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id, sub_name: item.name, ...this.vhQueryCafe.getUnit_byRatio(item.units, item.ratio) },\r\n        stateObj: this.stateObj\r\n      }\r\n    }\r\n    else\r\n      state = {\r\n        listBarcodeLot: this.listBarcodeLot,\r\n        listBarcode: this.listBarcode,\r\n        col: this.ProductForm.value.number_column,\r\n        number: this.ProductForm.value.number_print,\r\n        barcode: this.listBarcode[this.listBarcode.findIndex(item => item._id == this.ProductForm.value.id_design_barcode)],\r\n        formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id },\r\n        stateObj: this.stateObj\r\n      }\r\n    if (!state['barcode']) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy mẫu tem này! Vui lòng kiểm tra lại\"))\r\n    }\r\n    else\r\n      switch (state['col']) {\r\n        case 1: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-one-col'], { state: state })\r\n          break;\r\n        }\r\n        case 2: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-two-col'], { state: state })\r\n          break;\r\n        }\r\n        case 3: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-three-col'], { state: state })\r\n          break;\r\n        }\r\n        case 4: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-four-col'], { state: state })\r\n          break;\r\n        }\r\n        case 5: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-five-col'], { state: state })\r\n          break;\r\n        }\r\n        default: {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không hỗ trợ kiểu tem này\"))\r\n        }\r\n      }\r\n  }\r\n\r\n  /**\r\n   * mở modal chọn lô sp để in tem lô\r\n   * @example this.showChooseLotToPrint()\r\n   */\r\n  showChooseLotToPrint() {\r\n    this.show_modal_select_lots = true;\r\n\r\n    if (!this.ProductForm.value.manysize) this.lots = this.lot_list;\r\n    else {\r\n      // this.lots = this.subProducts.filter(e => e.lots.length).map(item => { return { ...item.lots.map(lot => { return { ...lot } }) } })\r\n      let lot_array = [];\r\n      let lot_subs = this.subProducts.filter(e => e.lots.length)\r\n      for (let i in lot_subs) {\r\n        lot_array = lot_array.concat(lot_subs[i].lots)\r\n      }\r\n      this.lots = lot_array\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * qua trang in tem lô sp\r\n   */\r\n  gotoPrintLabelLot() {\r\n    let data_lot = this.lots.find(e => e._id == this.id_lotproduct);\r\n    let state = {\r\n      listBarcode: this.listBarcode,\r\n      listBarcodeLot: this.listBarcodeLot,\r\n      col: this.ProductForm.value.number_column_lot,\r\n      number: this.ProductForm.value.number_print_lot,\r\n      barcode: this.listBarcodeLot[this.listBarcodeLot.findIndex(item => item._id == this.ProductForm.value.id_design_barcode_lot)],\r\n      formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id, ...data_lot },\r\n      stateObj: this.stateObj\r\n    }\r\n    if (!state.barcode) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy mẫu tem này! Vui lòng kiểm tra lại\"))\r\n    }\r\n    else\r\n      switch (state.col) {\r\n        case 1: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-one-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 2: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-two-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 3: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-three-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 4: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-four-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 5: {\r\n          this.router.navigate(['/cafe/dashboard/management/ingredient/list/print-five-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        default: {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không hỗ trợ kiểu tem này\"))\r\n        }\r\n      }\r\n  }\r\n\r\n  /**\r\n   * lọc lô theo mã lô\r\n   * @example this.searchLot('')\r\n   */\r\n  searchLot(searchValue) {\r\n    this.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue), this.lot_list, ['lot_number'])\r\n  }\r\n\r\n  // Thêm units\r\n  showDrawerUnits = false\r\n  /**\r\n   * bắt sk lưu hoặc đóng drawer danh sách đơn vị của modal thêm subproduct\r\n   * @example this.closeUnits()\r\n   */\r\n  closeUnits(event) {\r\n    if (typeof event === 'object') {\r\n      this.formSubProduct.controls['units'].setValue(event);\r\n    }\r\n    this.showDrawerUnits = false;\r\n  }\r\n\r\n  /**\r\n   * bắt sk lưu hoặc đóng drawer danh sách đơn vị để update\r\n   * @example this.closeUnitsUpdate(null)\r\n   */\r\n  closeUnitsUpdate(event) {\r\n    console.log(event);\r\n\r\n    if (event != null) {\r\n      if (!this.ProductForm.value.manysize) {\r\n        if (this.check2ArrUnits(this.ProductForm.value[\"units\"], event) == true)\r\n          this.ProductForm.value[\"units\"] = event\r\n        this.dataUnits = event\r\n        this.updateProductByField({ units: event })\r\n\r\n      }\r\n      else {\r\n        this.formSubProduct.controls['units'].setValue(event);\r\n        this.updateUnitsSubProduct()\r\n      }\r\n    }\r\n    this.showDrawerUnitsUpdate = false;\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị để update\r\n   * @example this.changeUnitsUpdate()\r\n   */\r\n  changeUnitsUpdate() {\r\n    this.showDrawerUnitsUpdate = true\r\n    // this.dataUnits = this.formSubProduct.value.units\r\n    this.dataUnitMain = { ...this.vhQueryCafe.getUnit_byRatio(this.dataUnits, 1) }\r\n  }\r\n  /**\r\n   * mở drawer danh sách đơn vị để thêm của modal thêm subproduct \r\n   * @example this.changeUnitsSubs()\r\n   */\r\n  changeUnitsSubs() {\r\n    this.showDrawerUnits = true;\r\n    this.barcodes = [this.formSubProduct.value.barcode, ...this.formSubProduct.value.lots.map(item => { return item.barcode })]\r\n    this.dataUnits = this.formSubProduct.value.units.filter(e => e.ratio != 1)\r\n    this.dataUnitMain = {\r\n      unit: this.formSubProduct.value.unit,\r\n      ratio: 1,\r\n      barcode: this.formSubProduct.value.barcode,\r\n      price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n      price2: this.management_product_price2 &&  this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n      price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị để update của subproduct\r\n   * @example this.changeUnitsSubsUpdate()\r\n   */\r\n  changeUnitsSubsUpdate() {\r\n    this.showDrawerUnitsUpdate = true;\r\n    this.dataUnits = this.formSubProduct.value.units\r\n    this.dataUnitMain = { ...this.vhQueryCafe.getUnit_byRatio(this.dataUnits, 1) }\r\n  }\r\n  // Kiểm tra mảng unit trước khi thay đổi và sao khi thay đổi\r\n  check2ArrUnits(unit1: any[], unit2: any[]): boolean {\r\n    unit1.forEach(element1 => {\r\n      unit2.forEach(element2 => {\r\n        if (element1.unit === element2.unit || this.ProductForm.value['unit'] === element2.unit)\r\n          return false;\r\n      })\r\n    })\r\n    return true\r\n  }\r\n\r\n  // CleaveJS\r\n  tranformPrice(class_name) {\r\n    switch (class_name) {\r\n      case 'size-price-item':\r\n        this.price_size = this.vhAlgorithm.vhnumeral(\".size-price-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-item\") : 0;\r\n        break;\r\n      case 'size-price2-item':\r\n        if(this.management_product_price2) this.price2_size = this.vhAlgorithm.vhnumeral(\".size-price2-item\") ? this.vhAlgorithm.vhnumeral(\".size-price2-item\") : 0;\r\n        break;\r\n      case 'size-price-purchase-item':\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") : 0;\r\n        break;\r\n    }\r\n  }\r\n\r\n  subProducts = [];\r\n  price_size_purchase: any;\r\n  price_size: any;\r\n  price2_size: any;\r\n  isVisibleSubProduct: boolean = false;      // ẩn/ hiển form sub product\r\n  show_add_size = false\r\n  public formSubProduct: FormGroup\r\n\r\n\r\n  // xóa sub product\r\n  deleteSubProductById(data) {\r\n    this.vhQueryCafe.deleteSubProduct_Cafe(data._id).then((rsp: any) => {\r\n      console.log(rsp);\r\n\r\n      if (rsp.vcode === 0) {\r\n        this.subProducts = this.subProducts.filter(sub => sub._id != data._id);\r\n      } else if (rsp.vcode === 1) {\r\n        this.vhComponent.hideLoading(0);\r\n        this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n        // this.goBack();\r\n      } else if (rsp.vcode === 2) {\r\n        this.vhComponent.hideLoading(0);\r\n        this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n        // this.goBack();\r\n      }\r\n    }, error => {\r\n      this.vhComponent.alertMessageDesktop(\"error\", error);\r\n    })\r\n  }\r\n\r\n  // Khởi tạo form sub product\r\n  initFormEditSubProduct(item?) {\r\n    this.formSubProduct = new FormGroup({\r\n      _id: new FormControl(item ? item['_id'] : ''),\r\n      name: new FormControl(item ? item['name'] : '', [Validators.required]),\r\n      price_import: new FormControl(item ? item['price_import'] : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price: new FormControl(item ? item['price'] : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price2: new FormControl(item ? item['price2'] : '', Validators.compose([ Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      warning_number: new FormControl(item ? item['warning_number'] : 0, Validators.required),\r\n      item_code: new FormControl(item ? item['item_code'] : ''),\r\n      barcode: new FormControl(item ? item['barcode'] : ''),\r\n      unit: new FormControl(item ? item['unit'] : ''),\r\n      units: new FormControl(item ? item['units'] : []),\r\n      allow_sell: new FormControl(item && item.delete_hidden ? false : true),\r\n      delete_hidden: new FormControl(item ? item['delete_hidden'] : false),\r\n      selling: new FormControl(item ? item['selling'] : true),\r\n      manylot: new FormControl(item ? item['manylot'] : false),\r\n      days_import_warning: new FormControl(item ? item['days_import_warning'] : ''),\r\n      days_exp_warning: new FormControl(item ? item['days_exp_warning'] : ''),\r\n      lots: new FormControl(item ? item['lots'] : []),\r\n      number_column: new FormControl(item ? item.number_column : 2),\r\n      number_print: new FormControl(item ? item.number_print : 10),\r\n      id_design_barcode: new FormControl(item ? item.id_design_barcode : ''),\r\n      number_column_lot: new FormControl(item ? item.number_column_lot : 2),\r\n      number_print_lot: new FormControl(item ? item.number_print_lot : 10),\r\n      id_design_barcode_lot: new FormControl(item ? item.id_design_barcode_lot : ''),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * mở modal thêm subproduct\r\n   * @example this.openModalAddSize()\r\n   */\r\n  openModalAddSize() {\r\n    this.initFormEditSubProduct();\r\n    this.show_add_size = true\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhất nút ok modal thêm subproduct\r\n   * @example this.addSubProduct({name:'S',....})\r\n   */\r\n  addSubProduct(value) {\r\n    if (this.formSubProduct.valid) {\r\n      let data = {\r\n        ...value,\r\n        warning_number: value.warning_number >= 0 ? parseFloat(value.warning_number) : null,\r\n        price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n        price2: this.management_product_price2 &&  this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n        price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n      }\r\n      let data_add = {\r\n        name: data.name,\r\n        warning_number: data.warning_number,\r\n        item_code: data.item_code ? data.item_code : '',\r\n        // allow_sell : data.allow_sell,\r\n        delete_hidden: false,\r\n        selling : data.selling,\r\n        units: [\r\n          {\r\n            unit: data.unit,\r\n            ratio: 1,\r\n            price: data.price,\r\n            price2: data.price2,\r\n            price_import: data.price_import,\r\n            barcode: data.barcode,\r\n            default: data.units.find(e => e.default) ? false : true\r\n          },\r\n          ...data.units\r\n        ],\r\n        manylot: data.manylot,\r\n\r\n      }\r\n      if (data['manylot']) {\r\n        data_add['lots'] = data.lots;\r\n        data_add['days_import_warning'] = data.days_import_warning;\r\n        data_add['days_exp_warning'] = data.days_exp_warning;\r\n      }\r\n      if (!this.barcode) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Barcode already exists\"))\r\n      }\r\n      else\r\n        this.vhQueryCafe.addSubProduct_Cafe(this.data.formProduct._id, data_add).then((subproducts: any) => {\r\n          let id_subproduct = this.vhQueryCafe.getlocalProduct(this.data.formProduct._id).subs.find(e => e.name == data_add.name)._id\r\n          this.subProducts.push({ ...data, _id: id_subproduct, units: data_add.units });\r\n          this.show_add_size = false;\r\n        }, error => {\r\n          this.vhComponent.alertMessageDesktop(\"error\", error);\r\n        })\r\n\r\n    }\r\n  }\r\n\r\n  /** Mở form sub product\r\n   *\r\n   * @param data\r\n   */\r\n  openFormSubProduct(data?) {\r\n    if (data) {\r\n      this.initFormEditSubProduct(data);\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price_size = this.vhAlgorithm.vhnumeral(\".size-price-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-item\") : 0;\r\n        this.price2_size = this.management_product_price2 && this.vhAlgorithm.vhnumeral(\".size-price2-item\") ? this.vhAlgorithm.vhnumeral(\".size-price2-item\") : 0;\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") : 0;\r\n      })\r\n    }\r\n    this.isVisibleSubProduct = true;\r\n  }\r\n\r\n  /**\r\n   * dóng modal chỉnh sửa subproduct và ko lưu\r\n   * @param data\r\n   */\r\n  handleCancelSubProduct() {\r\n    this.isVisibleSubProduct = false;\r\n    this.show_add_size = false;\r\n  }\r\n\r\n  // xử lý cập nhật sub product\r\n  handleSubProduct(value) {\r\n    if (this.formSubProduct.valid) {\r\n      let data = {\r\n        ...value,\r\n        warning_number: value.warning_number >= 0 ? parseFloat(value.warning_number) : null,\r\n        price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n        price2: this.management_product_price2 &&  this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n        price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n      }\r\n      let dataUpdate = {};\r\n      let subUpdate: any = this.subProducts.filter(f => f._id == data._id)[0];\r\n      if (data.name != subUpdate.name) dataUpdate['name'] = data.name;\r\n      if (data.warning_number != subUpdate.warning_number) dataUpdate['warning_number'] = data.warning_number;\r\n      data.units[0]['price_import'] = data.price_import;\r\n      data.units[0]['price'] = data.price;\r\n      data.units[0]['price2'] = data.price2;\r\n      data.units[0]['barcode'] = data.barcode;\r\n      dataUpdate['units'] = [\r\n        ...data.units\r\n      ]\r\n      if (data.manylot != subUpdate.manylot) dataUpdate['manylot'] = data.manylot;\r\n      if (data['manylot']) {\r\n        dataUpdate['lots'] = data.lots;\r\n        dataUpdate['days_import_warning'] = data.days_import_warning;\r\n        dataUpdate['days_exp_warning'] = data.days_exp_warning;\r\n      }\r\n      console.log(dataUpdate);\r\n      this.vhQueryCafe.updateSubProduct_Cafe(subUpdate._id, dataUpdate).then((bool) => {\r\n        if (bool) {\r\n          const index = this.subProducts.findIndex(f => f._id == data._id)\r\n          this.subProducts = this.subProducts.filter(f => f._id != data._id)\r\n          this.subProducts.splice(index, 0, data);\r\n        }\r\n        else {\r\n          this.vhComponent.alertMessageDesktop(\"error\", 'Cập nhật thất bại, vui lòng thử lại !');\r\n        }\r\n      }, error => {\r\n        this.vhComponent.alertMessageDesktop(\"error\", error);\r\n      })\r\n      this.handleCancelSubProduct();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * xử lý update phần units cho subproduct\r\n   */\r\n  updateUnitsSubProduct() {\r\n    let data = {\r\n      ...this.formSubProduct.value,\r\n      price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n      price2: this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n      price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n    }\r\n    let dataUpdate = {};\r\n    data.units[0]['unit'] = data.unit;\r\n    data.units[0]['price_import'] = data.price_import;\r\n    data.units[0]['price'] = data.price;\r\n    data.units[0]['price2'] = data.price2;\r\n    data.units[0]['barcode'] = data.barcode;\r\n    dataUpdate['units'] = [\r\n      ...data.units\r\n    ]\r\n    if (this.barcode)\r\n      this.udpateSubProductByField(data._id, dataUpdate, 'units')\r\n  }\r\n\r\n  /**\r\n   * cập nhật subproduct theo trường truyền vào\r\n   * @param id_subproduct \r\n   * @param value \r\n   * @param field \r\n   */\r\n  udpateSubProductByField(id_subproduct, value, field) {\r\n    console.log(value);\r\n\r\n    if(value.hasOwnProperty('allow_sell')) {\r\n      value = { delete_hidden: !value.allow_sell }\r\n      this.subProducts.find(e => e._id == id_subproduct).delete_hidden = value.delete_hidden\r\n    }\r\n    this.vhQueryCafe.updateSubProduct_Cafe(id_subproduct, value).then((bool) => {\r\n      console.log('updateSubProduct', bool);\r\n      if (bool) {\r\n        const index = this.subProducts.findIndex(f => f._id == id_subproduct)\r\n        this.subProducts[index][field] = value[field];\r\n        this.subProducts[index].price = this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0;\r\n        this.subProducts[index].price2 = this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0;\r\n        this.subProducts[index].price_import = this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0;\r\n        this.subProducts[index].unit = this.formSubProduct.value.unit;\r\n        this.subProducts[index].barcode = this.formSubProduct.value.barcode;\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"error\", 'Cập nhật thất bại, vui lòng thử lại !');\r\n      }\r\n    }, error => {\r\n      this.vhComponent.alertMessageDesktop(\"error\", error);\r\n    })\r\n  }\r\n\r\n  // cập nhật barcode cho sub product đang chọn\r\n  changeBarcodeSubProduct() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode)\r\n    if (this.barcode) {\r\n      this.formSubProduct.controls['barcode'].setValue(newbarcode)\r\n      if(this.formSubProduct.value._id)  this.updateUnitsSubProduct()\r\n    }\r\n  }\r\n\r\n\r\n\r\n  changeManyLot(event) {\r\n    if (event) { // từ false thành true\r\n      this.ProductForm.addControl('days_import_warning', new FormControl(0, Validators.required))\r\n      this.ProductForm.addControl('days_exp_warning', new FormControl(0, Validators.required))\r\n      this.updateProductByField({\r\n        days_import_warning: 0,\r\n        days_exp_warning: 0,\r\n        manylot: true,\r\n      })\r\n    }\r\n    else {\r\n      this.ProductForm.removeControl('days_import_warning');\r\n      this.ProductForm.removeControl('days_exp_warning');\r\n      this.updateProductByField({\r\n        manylot: false\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi thuộc tính lô của modal add subproduct\r\n   * @param event \r\n   * @example this.changeManyLotSubProduct(true)\r\n   */\r\n  changeManyLotSubProduct(event) {\r\n    if (event) { // từ false thành true\r\n      this.formSubProduct.addControl('days_import_warning', new FormControl(0, Validators.required))\r\n      this.formSubProduct.addControl('days_exp_warning', new FormControl(0, Validators.required))\r\n      this.formSubProduct.addControl('lots', new FormControl([]))\r\n    }\r\n    else {\r\n      this.formSubProduct.removeControl('days_import_warning');\r\n      this.formSubProduct.removeControl('days_exp_warning');\r\n      this.formSubProduct.removeControl('lots');\r\n    }\r\n  }\r\n\r\n  show_lot_list = false;\r\n  lot_list: any = [];\r\n  barcodes = [];\r\n  /**\r\n   * mở drawer danh sách lô của modal add subproduct\r\n   * @param lots \r\n   */\r\n  openListLot(lots?) {\r\n    this.barcodes = [this.formSubProduct.value.barcode, ...this.formSubProduct.value.units.map(item => { return item.barcode })]\r\n    this.show_lot_list = true;\r\n    if (lots) this.lot_list = lots\r\n  }\r\n\r\n  /**\r\n   * bắt sk đóng drawer danh sách lô của modal add subproduct\r\n   * @param lot_list dữ liệu output trả về nếu có\r\n   */\r\n  handleLotList(lot_list) {\r\n    this.show_lot_list = false;\r\n    if (lot_list) {\r\n      if (this.ProductForm.value.manysize) {\r\n        this.formSubProduct.controls['lots'].setValue(lot_list)\r\n\r\n      }\r\n      else {\r\n        this.lot_list = lot_list;\r\n        this.updateProductByField({ lots: lot_list })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở drawer danh sách lô để cập nhật\r\n   * @param id_sub_or_product \r\n   */\r\n  openListLotUpdate(id_sub_or_product, lots?) {\r\n    this.id_sub_or_product = id_sub_or_product;\r\n    this.show_lot_list_update = true;\r\n  }\r\n\r\n  /**\r\n   * đóng drawer danh sách lô để cập nhật\r\n   */\r\n  handleLotListUpdate(lot_list) {\r\n    this.show_lot_list_update = false;\r\n  }\r\n      \r\n      \r\n      \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.INGREDIENT)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.INGREDIENT }).then((res: any) => {\r\n        console.log(res);\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.ProductForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n  \r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <nz-content>\r\n    <div class=\"main\" id=\"main\">\r\n      <div nz-row>\r\n        <div nz-col nzSpan=\"12\" class=\"title left-all-content\">\r\n          <b>{{'Ingredient detail'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"add-button\">\r\n          <button style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"printBarcode()\">\r\n            <i nz-icon nzType=\"setting\" nzTheme=\"outline\"></i>\r\n            {{'Label printing configuration'|translate}} </button>\r\n          <button *ngIf=\"ProductForm.value.manysize \" [disabled]=\"!ProductForm.value.id_design_barcode\"\r\n            style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"show_modal_select_subs = true\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print product label' | translate}} </button>\r\n\r\n          <button *ngIf=\"!ProductForm.value.manysize \" [disabled]=\"!ProductForm.value.id_design_barcode\"\r\n            style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"gotoPrintLabel()\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print product label' | translate}} </button>\r\n          <button [disabled]=\"!ProductForm.value.id_design_barcode_lot\" style=\"margin-right: 16px;\"\r\n            class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"showChooseLotToPrint()\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print batch label' | translate}} </button>\r\n          <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n            <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n            {{'Delete' | translate}}</button>\r\n        </div>\r\n      </div>\r\n      <form nz-form [formGroup]=\"ProductForm\">\r\n        <div class=\"grid-product\">\r\n          <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n              <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n                (change)=\"onUpload($event)\" />\r\n              <img [ngStyle]=\"{width: ProductForm.value.img ? '100%' : '60px'}\"\r\n                onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"ProductForm.value.img\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <div class=\"small-size\" nz-row>\r\n              <!-- Tên nguyên liệu -->\r\n              <div nz-col [nzSpan]=\"ProductForm.value.manysize ? 24 : 16\" class=\"small-size\">\r\n                <div><b>{{'Ingredient name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                    <nz-input-group>\r\n                      <input style=\"width:95%\" formControlName=\"name\" nz-input\r\n                        (blur)=\"updateProductByField( {name: ProductForm.value.name})\"\r\n                        placeholder=\"{{'Enter product name' | translate}}\" required />\r\n                      <ng-template #combineTplName let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Ingredient name is required' | translate}}\r\n                        </ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Mã sản phẩm -->\r\n              <div *ngIf=\"!ProductForm.value.manysize\" nz-col nzSpan=\"8\" class=\"small-size\">\r\n                <div><b>{{'Item code' | translate}}</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control>\r\n                    <nz-input-group>\r\n                      <input style=\"width:95%\" formControlName=\"item_code\" nz-input\r\n                        (blur)=\"updateProductByField({item_code: ProductForm.value.item_code})\"\r\n                        [placeholder]=\"'Enter item code' | translate\" />\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"small-size\" nz-row>\r\n              <div nz-col nzSpan=\"12\">\r\n                <div><b class='label'>{{'Category' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                    <!-- Thanh chọn -->\r\n                    <nz-select formControlName=\"id_category\" \r\n                      (ngModelChange)=\"updateProductByField({id_category: $event})\"\r\n                      [nzDropdownRender]=\"addCategoryTemplate\"\r\n                      nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                      <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                    </nz-select>\r\n                    <!-- Thêm danh mục -->\r\n                    <ng-template #addCategoryTemplate>\r\n                      <nz-divider></nz-divider>\r\n                      <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                        <!-- Input nhập tên -->\r\n                        <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                        <!-- Nút thêm -->\r\n                        <button (click)=\"addCategory(categoryName)\" nz-button\r\n                          [nzLoading]=\"isAddingCategory\"\r\n                          [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                          {{'Add' | translate}}\r\n                        </button>\r\n                      </div>\r\n                    </ng-template>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <div nz-col nzSpan=\"12\">\r\n                <div><b class='label'>{{'Brand' | translate}}</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control>\r\n                    <nz-input-group>\r\n                      <input formControlName=\"brand\" nz-input placeholder=\"{{'Enter brand' |translate}}\"\r\n                        (blur)=\"updateProductByField(  { brand: ProductForm.value.brand })\" />\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div nz-row>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Purchase price' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                <nz-input-group>\r\n                  <input class=\"price_import\" type=\"text\" maxlength=\"15\" formControlName=\"price_import\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" required\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\"\r\n                    (blur)=\"updateProductForm('price_import', { price_import: ProductForm.value.price_import })\" />\r\n                  <ng-template #combineTplPriceImport let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"11\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Unit' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                  <input (blur)=\"updateProductForm('unit', {unit: unit.value})\" #unit style=\"width:65%;\"\r\n                    formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit'|translate}}\" />\r\n                  <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"changeUnitsUpdate()\"\r\n                    style=\"margin-right: 8px;\">\r\n                    <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                    {{(dataUnits.length ? 'Unit list' : 'Add unit') | translate}}</button>\r\n                  <ng-template #combineTplUnit let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Selling price' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice\">\r\n                <nz-input-group>\r\n                  <input class=\"price\" type=\"text\" maxlength=\"15\" formControlName=\"price\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                    (blur)=\"updateProductForm('price', { price: ProductForm.value.price })\" />\r\n                  <ng-template #combineTplPrice let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Barcode' | translate}}</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group>\r\n                  <input #box formControlName=\"barcode\" nz-input style=\"width: 86%;\"\r\n                    placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\"\r\n                    (blur)=\"checkBarcode(box.value)\" />\r\n                  <i style=\"padding: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"changeBarcode()\"\r\n                    nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                    nzTooltipPlacement=\"bottom\"></i>\r\n                </nz-input-group>\r\n                <div class=\"validation-errors\">\r\n                  <ng-container>\r\n                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                      <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize  && management_product_price2\">\r\n            <div><b class='label'>{{'Selling price' | translate}} 2*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice2\">\r\n                <nz-input-group>\r\n                  <input class=\"price2\" type=\"text\" maxlength=\"15\" formControlName=\"price2\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                    (blur)=\"updateProductForm('price2', { price2: ProductForm.value.price2 })\"\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" />\r\n                  <ng-template #combineTplPrice2 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Minimum quantity to alert' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTpl_warning_number\">\r\n                <nz-input-group>\r\n                  <input formControlName=\"warning_number\" nz-input placeholder=\"0\" type=\"number\" min=\"0\" required\r\n                    (blur)=\"updateProductByField( { warning_number: ProductForm.value.warning_number })\" />\r\n                  <ng-template #combineTpl_warning_number let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"updateProductByField( {days_import_warning: ProductForm.value.days_import_warning})\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"updateProductByField( {days_exp_warning: ProductForm.value.days_exp_warning})\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <label nz-checkbox formControlName=\"allow_sell\" *ngIf=\"!ProductForm.value.manysize\"\r\n              (ngModelChange)=\"updateProductByField(  { allow_sell: ProductForm.value.allow_sell })\">{{'Available to sell' | translate}}</label>\r\n            <label nz-checkbox formControlName=\"selling\" *ngIf=\"!ProductForm.value.manysize\"\r\n              (ngModelChange)=\"updateProductByField( { selling: ProductForm.value.selling })\">{{'Quick sale' | translate}}</label>\r\n\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLotUpdate(data.formProduct._id)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div nz-row style=\"margin-bottom: 12px;\" *ngIf=\"ProductForm.value.manysize\">\r\n        <div class=\"title-sub\" nz-col nzSpan=\"24\">\r\n          <div class=\"large-size hide-overflow\"><b>{{'Product classification' | translate}}</b></div>\r\n          <div>\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"openModalAddSize()\"\r\n              [disabled]=\"!ProductForm.value.manysize\" [ngStyle]=\"{opacity: (!ProductForm.value.manysize) ? 0.5 : 1}\">\r\n              <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n              {{'Add'|translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <nz-table #basicTable [nzData]=\"subProducts\" [nzShowPagination]=\"false\" *ngIf=\"ProductForm.value.manysize\"\r\n        [nzScroll]=\"{y : heightScoll}\">\r\n        <thead>\r\n          <tr>\r\n            <th nzAlign=\"center\">{{'_subname' | translate}}</th>\r\n            <th nzAlign=\"right\">{{'Purchase price' | translate}}</th>\r\n            <th *ngIf=\"management_product_price2\" nzAlign=\"right\">{{'Selling price' | translate}} 2</th>\r\n            <th nzAlign=\"right\">{{'Selling price' | translate}}</th>\r\n            <th>{{'Status' | translate}}</th>\r\n            <th>{{'Lot' | translate}}</th>\r\n            <th nzAlign=\"center\">{{'Functions' | translate}}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let data of subProducts\">\r\n            <td nzAlign=\"left\">{{ data.name }}<br><small>{{data.item_code}}</small></td>\r\n            <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price_import)}}</td>\r\n            <td *ngIf=\"management_product_price2\" nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price2) }}</td>\r\n            <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price) }}</td>\r\n            <td>{{ (!data.delete_hidden ? 'Allow sale' : 'Not allow sale') | translate }}</td>\r\n            <td>\r\n              <button *ngIf=\"data.manylot\" class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n                (click)=\"openListLotUpdate(data._id,data.lots);initFormEditSubProduct(data)\">\r\n                <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                {{'List of lots' | translate}}</button>\r\n            </td>\r\n            <td style=\"display: flex; justify-content: space-between; font-size: 1.2rem;\">\r\n              <a (click)=\"openFormSubProduct(data)\">\r\n                <i style=\"color: var(--ion-color-vh-green)\" class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                  nz-tooltip nzTooltipTitle=\"{{'Edit' | translate}}\"></i>\r\n              </a>\r\n              <a nz-popconfirm [nzPopconfirmTitle]=\"('Delete ' | translate) + data.name\"\r\n                nzCancelText=\"{{'Cancel' | translate}}\" (nzOnConfirm)=\"deleteSubProductById(data)\">\r\n                <i style=\"color: var(--ion-color-vh-red)\" class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                  nz-tooltip nzTooltipTitle=\"{{'Delete' | translate}}\"></i>\r\n              </a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </nz-table>\r\n    </div>\r\n\r\n  </nz-content>\r\n</nz-layout>\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\"\r\n  (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n  <p *nzModalContent>{{'Are you sure to delete this product?' | translate}}</p>\r\n</nz-modal>\r\n\r\n<nz-modal [(nzVisible)]=\"showModalPrintBarcode\" nzTitle=\"{{'Choose a label template' | translate}}\"\r\n  (nzOnCancel)=\"showModalPrintBarcode = false\" (nzOnOk)=\"updateConfigLabel()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <div nz-col [nzSpan]=\"product_has_lots ? '11' : '24'\">\r\n        <form nz-form [formGroup]=\"ProductForm\">\r\n          <div nz-row>\r\n            <div nz-col [nzSpan]=\"24\">\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Choose product label template' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"id_design_barcode\" nzAllowClear>\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'No template' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of listBarcode\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels per item' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"number_column\" nzAllowClear>\r\n                    <nz-option *ngFor=\"let item of rowLabel\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'_Number of labels to print' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <input nz-input type=\"number\" [min]=\"1\" [max]=\"200\" formControlName=\"number_print\"\r\n                    placeholder=\"{{'Enter the number of label to print' | translate}}\" />\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n      <div nz-col nzSpan=\"2\" *ngIf=\"product_has_lots\"></div>\r\n      <div nz-col nzSpan=\"11\" *ngIf=\"product_has_lots\">\r\n        <form nz-form [formGroup]=\"ProductForm\">\r\n          <div nz-row>\r\n            <div nz-col [nzSpan]=\"24\">\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Choose lot label template' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"id_design_barcode_lot\" nzAllowClear>\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'No template' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of listBarcodeLot\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels per item' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"number_column_lot\" nzAllowClear>\r\n                    <nz-option *ngFor=\"let item of rowLabel\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'_Number of labels to print' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <input nz-input type=\"number\" [min]=\"1\" [max]=\"200\" formControlName=\"number_print_lot\"\r\n                    placeholder=\"{{'Enter the number of label to print' | translate}}\" />\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!listBarcode.length && !listBarcodeLot.length\"\r\n      nzNotFoundContent=\"{{'You do not have any templates yet' | translate}}\"></nz-empty>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!--Modal add size-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice3\" [(nzVisible)]=\"show_add_size\" nzTitle=\"{{'Add size' | translate}}\"\r\n  (nzOnCancel)=\"handleCancelSubProduct()\" (nzOnOk)=\"handleSubProduct(formSubProduct.value)\" [nzStyle]=\"{ top: '20px' }\">\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"formSubProduct\" style=\"overflow: auto; height: 455px;padding-bottom: 16px;\">\r\n      <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" style=\"padding-right: 8px;\">\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Attribute name (color, size, ...)' | translate}}*</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input id=\"size-name\" nz-input placeholder=\"{{'Enter size name' | translate}}\" formControlName=\"name\" />\r\n              <ng-template #errorSubsName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Employee name is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid name' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Mã sản phẩm -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Item code' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n              <input nz-input formControlName=\"item_code\" [placeholder]=\"'Enter item code' | translate\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"22\">\r\n              <input id=\"size-barcode\" #barcodesize maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" formControlName=\"barcode\" />\r\n            </nz-form-control>\r\n            <div nz-col [nzSpan]=\"2\">\r\n              <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                (click)=\"changeBarcodeSubProduct()\" nz-tooltip\r\n                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n            </div>\r\n            <div class=\"validation-errors\">\r\n              <ng-container>\r\n                <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                  <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                  </ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Purchase price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice2\">\r\n              <input class=\"size-price-purchase-item\" (keyup)=\"tranformPrice('size-price-purchase-item')\" maxlength=\"15\"\r\n                nz-input placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price_import\" />\r\n              <ng-template #errorSubsPrice2 let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\" *ngIf=\"management_product_price2\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}} 2*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPriceImport\">\r\n              <input class=\"size-price2-item\" (keyup)=\"tranformPrice('size-price2-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price2\" />\r\n              <ng-template #errorSubsPriceImport let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice\">\r\n              <input class=\"size-price-item\" (keyup)=\"tranformPrice('size-price-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price\" />\r\n              <ng-template #errorSubsPrice let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;width: 100%;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Unit' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n              <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                <input style=\"width: 60%;\" formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit'|translate}}\" />\r\n                <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n                  style=\"margin-right: 8px; border-radius: 5px; border: 1px solid #c9c9c9; width:35%; cursor: pointer; width:35%;\"\r\n                  (click)=\"changeUnitsSubs()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{ 'Unit list' | translate}}</button>\r\n                <ng-template #combineTplUnit let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Minimum quantity to alert' | translate}}</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsWarning_number\">\r\n              <input nz-input type=\"number\" formControlName=\"warning_number\" required\r\n                placeholder=\"{{'Enter number' | translate}}\" />\r\n              <ng-template #errorSubsWarning_number let-control>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid value' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <!-- <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell'|translate}}</label> -->\r\n            <label nz-checkbox formControlName=\"selling\">{{'Quick sale' | translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" flex *ngIf=\"management_product_lot\">\r\n            <label nz-checkbox formControlName=\"manylot\" (ngModelChange)=\"changeManyLotSubProduct($event)\">{{'Lô, hạn sử\r\n              dụng' |\r\n              translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLot(formSubProduct.value.lots)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice3>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelSubProduct()\">\r\n      {{\"Cancel\" |translate}}\r\n    </button>\r\n    <button [disabled]=\"formSubProduct.invalid\" [ngStyle]=\"{opacity: formSubProduct.invalid ? 0.5 : 1}\" nz-button\r\n      class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"addSubProduct(formSubProduct.value)\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!--Modal edit name, price size-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" [(nzVisible)]=\"isVisibleSubProduct\"\r\n  nzTitle=\"{{'Update size' | translate}}\" (nzOnCancel)=\"handleCancelSubProduct()\"\r\n  (nzOnOk)=\"handleSubProduct(formSubProduct.value)\" [nzStyle]=\"{ top: '20px' }\">\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"formSubProduct\" style=\"overflow: auto; height: 450px;padding-bottom: 16px;\">\r\n      <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" style=\"padding-right: 8px;\">\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Attribute name (color, size, ...)' | translate}}*</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input id=\"size-name\" nz-input placeholder=\"{{'Enter size name' | translate}}\" formControlName=\"name\"\r\n                (blur)=\"udpateSubProductByField(formSubProduct.value._id, {name : formSubProduct.value.name }, 'name')\" />\r\n              <ng-template #errorSubsName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Employee name is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid name' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Mã sản phẩm -->\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Item code' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n              <input nz-input formControlName=\"item_code\" [placeholder]=\"'Enter item code' | translate\" \r\n                (blur)=\"udpateSubProductByField(formSubProduct.value._id, {item_code: formSubProduct.value.item_code }, 'item_code')\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"22\">\r\n              <input id=\"size-barcode\" (blur)=\"checkBarcodeSubProduct(barcodesize.value, formSubProduct.value.name)\"\r\n                #barcodesize maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" formControlName=\"barcode\" />\r\n            </nz-form-control>\r\n            <div nz-col [nzSpan]=\"2\">\r\n              <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                (click)=\"changeBarcodeSubProduct()\" nz-tooltip\r\n                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n            </div>\r\n            <div class=\"validation-errors\">\r\n              <ng-container>\r\n                <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                  <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                  </ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Purchase price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice2\">\r\n              <input class=\"size-price-purchase-item\" (keyup)=\"tranformPrice('size-price-purchase-item')\" maxlength=\"15\"\r\n                nz-input placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price_import\"\r\n                (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPrice2 let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\" *ngIf=\"management_product_price2\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}} 2*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPriceImport\">\r\n              <input class=\"size-price2-item\" (keyup)=\"tranformPrice('size-price2-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price2\" (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPriceImport let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Selling price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice\">\r\n              <input class=\"size-price-item\" (keyup)=\"tranformPrice('size-price-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price\" (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPrice let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px; width: 100%;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Unit' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n              <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                <input style=\"width: 60%;\" formControlName=\"unit\" nz-input required\r\n                  placeholder=\"{{'Enter unit'|translate}}\" (blur)=\"updateUnitsSubProduct()\" />\r\n                <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n                  style=\"margin-right: 8px; border-radius: 5px; border: 1px solid #c9c9c9; width:35%; cursor: pointer; width:35%;\"\r\n                  (click)=\"changeUnitsSubsUpdate()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\" style=\"margin-right: 4px;\"></i>\r\n                  {{'Unit list' | translate}}</button>\r\n                <ng-template #combineTplUnit let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Minimum quantity to alert' | translate}}</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsWarning_number\">\r\n              <input nz-input type=\"number\" formControlName=\"warning_number\"\r\n                placeholder=\"{{'Enter number' | translate}}\" required\r\n                (blur)=\"udpateSubProductByField(formSubProduct.value._id, {warning_number : formSubProduct.value.warning_number }, 'warning_number')\" />\r\n              <ng-template #errorSubsWarning_number let-control>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid value' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <label nz-checkbox formControlName=\"allow_sell\"\r\n              (ngModelChange)=\"udpateSubProductByField(formSubProduct.value._id, {allow_sell : formSubProduct.value.allow_sell }, 'allow_sell')\">{{'Available to sell'|translate}}</label>\r\n            <label nz-checkbox formControlName=\"selling\"\r\n              (ngModelChange)=\"udpateSubProductByField(formSubProduct.value._id, {selling : formSubProduct.value.selling }, 'selling')\">{{'Quick sale' | translate}}</label>\r\n\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"udpateSubProductByField(formSubProduct.value._id, {days_import_warning : formSubProduct.value.days_import_warning }, 'days_import_warning')\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"udpateSubProductByField(formSubProduct.value._id, {days_exp_warning : formSubProduct.value.days_exp_warning }, 'days_exp_warning')\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLotUpdate(formSubProduct.value._id,formSubProduct.value.lots)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelSubProduct()\">\r\n      {{\"Close\" |translate}}\r\n    </button>\r\n    <!-- <button [disabled]=\"formSubProduct.invalid\" [ngStyle]=\"{opacity: formSubProduct.invalid ? 0.5 : 1}\" nz-button\r\n            class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleSubProduct(formSubProduct.value)\">{{\"Save\" |\r\n            translate}}</button> -->\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n  nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"show_modal_select_lots = false\" (nzOnOk)=\"gotoPrintLabelLot()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n          (keyup)=\"searchLot(searchValue.value )\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <nz-radio-group [(ngModel)]=\"id_lotproduct\" style=\"width:100%;\">\r\n      <div nz-row *ngFor=\"let item of lots\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"8\">\r\n                {{item.lot_number}}\r\n              </div>\r\n\r\n              <div nz-col nzSpan=\"8\">\r\n                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"8\">\r\n                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n            </div>\r\n\r\n          </label>\r\n        </div>\r\n\r\n      </div>\r\n    </nz-radio-group>\r\n    <div *ngIf=\"!lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice2>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"show_modal_select_lots = false\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!id_lotproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"gotoPrintLabelLot()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sp con để in tem sản phẩm -->\r\n<nz-modal [nzFooter]=\"modalFooterChooseSub\" [(nzVisible)]=\"show_modal_select_subs\"\r\n  nzTitle=\"{{'Select property' | translate}}\" (nzOnCancel)=\"show_modal_select_subs = false\"\r\n  (nzOnOk)=\"handleOkPrintSub()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-radio-group [(ngModel)]=\"id_subproduct\" style=\"width:100%;\">\r\n      <div nz-row *ngFor=\"let item of subProducts\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.name}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                <nz-select nzShowSearch [(ngModel)]=\"item.ratio\" (ngModelChange)=\"changeUnit(item)\">\r\n                  <nz-option *ngFor=\"let unit of item.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit.ratio\">\r\n                  </nz-option>\r\n                </nz-select>\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.barcode}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{vhAlgorithm.vhcurrencyunit( item.price)}}\r\n              </div>\r\n            </div>\r\n          </label>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    </nz-radio-group>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterChooseSub>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"show_modal_select_subs = false\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!id_subproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleOkPrintSub()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n<!-- component thêm units ở sp con -->\r\n<app-units-list *ngIf=\"showDrawerUnits\" [dataUnit]=\"dataUnitMain\" [dataUnits]=\"dataUnits\" [barcodes]=\"barcodes\"\r\n  [showDrawerUnits]=\"showDrawerUnits\" (closeUnits)=\"closeUnits($event)\"></app-units-list>\r\n\r\n<app-units-list-update *ngIf=\"showDrawerUnitsUpdate\" [dataUnit]=\"dataUnitMain\" [dataUnits]=\"dataUnits\"\r\n  [showDrawerUnits]=\"showDrawerUnitsUpdate\" (closeUnits)=\"closeUnitsUpdate($event)\"></app-units-list-update>\r\n\r\n<app-lot-list *ngIf=\"show_lot_list\" [data]=\"lot_list\" [show_lot_list]=\"show_lot_list\" (close)=\"handleLotList($event)\"\r\n  [barcodes]=\"barcodes\">\r\n</app-lot-list>\r\n\r\n\r\n<app-lot-list-update *ngIf=\"show_lot_list_update\" [id_sub_or_product]=\"id_sub_or_product\"\r\n  [show_lot_list]=\"show_lot_list_update\" (close)=\"handleLotListUpdate($event)\">\r\n</app-lot-list-update>\r\n","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-five-col-lot',\r\n  templateUrl: './print-five-col-lot.component.html',\r\n  styleUrls: ['./print-five-col-lot.component.scss']\r\n})\r\nexport class PrintFiveColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false,show_col5:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 5 thì hiện cả 5 tem trên hàng\r\n     * ngược lại => khi push tới hàng cuối cùng thì check i = (number-1)/5 : cột thứ 1  hay = (number-2)/5 : cột thứ 2 hay = (number-3)/5 : cột thứ 3 hay = (number-4)/5 : cột thứ 4\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/5; i++) {\r\n     if(this.stamp.number%5 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/5) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false,show_col5:false});\r\n       else if(i == (this.stamp.number-2)/5) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-3)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-4)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  ngAfterViewChecked(): void {\r\n   \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                                 \r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n@Component({\r\n  selector: 'app-print-five-col',\r\n  templateUrl: './print-five-col.component.html',\r\n  styleUrls: ['./print-five-col.component.scss']\r\n})\r\nexport class PrintFiveColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false,show_col5:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 5 thì hiện cả 5 tem trên hàng\r\n     * ngược lại => khi push tới hàng cuối cùng thì check i = (number-1)/5 : cột thứ 1  hay = (number-2)/5 : cột thứ 2 hay = (number-3)/5 : cột thứ 3 hay = (number-4)/5 : cột thứ 4\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/5; i++) {\r\n     if(this.stamp.number%5 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/5) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false,show_col5:false});\r\n       else if(i == (this.stamp.number-2)/5) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-3)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-4)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-four-col-lot',\r\n  templateUrl: './print-four-col-lot.component.html',\r\n  styleUrls: ['./print-four-col-lot.component.scss']\r\n})\r\nexport class PrintFourColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 4 thì hiện cả 4 tem trên hàng\r\n     * ngược lại  => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/4; i++) {\r\n      console.log(i);\r\n      \r\n     if(this.stamp.number%4 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/4) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false});\r\n       else if(i == (this.stamp.number-2)/4) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false});\r\n       else  if(i == (this.stamp.number-3)/4) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height > 20 ? this.stamp.height - 4 : this.stamp.height -2 ) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print-four-col',\r\n  templateUrl: './print-four-col.component.html',\r\n  styleUrls: ['./print-four-col.component.scss']\r\n})\r\nexport class PrintFourColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 4 thì hiện cả 4 tem trên hàng\r\n     * ngược lại  => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/4; i++) {\r\n      console.log(i);\r\n      \r\n     if(this.stamp.number%4 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/4) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false});\r\n       else if(i == (this.stamp.number-2)/4) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false});\r\n       else  if(i == (this.stamp.number-3)/4) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height > 20 ? this.stamp.height - 4 : this.stamp.height -2 ) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-one-col-lot',\r\n  templateUrl: './print-one-col-lot.component.html',\r\n  styleUrls: ['./print-one-col-lot.component.scss']\r\n})\r\nexport class PrintOneColLotComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll: any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property = this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property, 'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeNummber()\r\n    for (let item of this.stamp.barcode.property) {\r\n      switch (item.type) {\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'name': item.value = this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    console.log(this.stamp.barcode.property);\r\n    \r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number; i++) {\r\n      this.listRowBarcode.push(true);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.stamp.formProduct.barcode)\r\n      jsbarcode(\".barcode\", this.stamp.formProduct.barcode, {\r\n        displayValue: this.stamp.barcode.property[1].hidden_text,\r\n        fontSize: this.stamp.barcode.property[1].font_size,\r\n        font: \"sans-serif\"\r\n      });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'], { state: this.stamp })\r\n  }\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n\r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'lot_number' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'lot_number' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <svg [ngStyle]=\"{'height.px': pro.height*3.78,'width.px': pro.width*3.78}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print-one-col',\r\n  templateUrl: './print-one-col.component.html',\r\n  styleUrls: ['./print-one-col.component.scss']\r\n})\r\nexport class PrintOneColComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeNummber()\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number ; i++) {\r\n      this.listRowBarcode.push(true);\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  } \r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                            }\"\r\n                            [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\"\r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-three-col-lot',\r\n  templateUrl: './print-three-col-lot.component.html',\r\n  styleUrls: ['./print-three-col-lot.component.scss']\r\n})\r\nexport class PrintThreeColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 3 thì hiện cả 3 tem trên hàng\r\n     * ngược lại number = 4 => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/3; i++) {\r\n     if(this.stamp.number%3 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/3) this.listRowBarcode.push({show_col2:false,show_col3:false});\r\n       else if(i == (this.stamp.number-2)/3) this.listRowBarcode.push({show_col2:true,show_col3:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void { \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  }\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}'  \r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\"hideScrollbar\" style=\"overflow: auto;padding-top: 16px;display: flex;align-items: flex-start;justify-content: center;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\"  \r\n                    style=\"display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\" [ngClass]=\"{ 'mb-6': i != listRowBarcode.length -1}\" class=\"stamp\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\"  \r\n                    style=\"display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\" [ngClass]=\"{ 'mb-6': i != listRowBarcode.length -1}\" class=\"stamp\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-two-col-lot',\r\n  templateUrl: './print-two-col-lot.component.html',\r\n  styleUrls: ['./print-two-col-lot.component.scss']\r\n})\r\nexport class PrintTwoColLotComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.stamp);\r\n    \r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/2; i++) {\r\n     if(this.stamp.number%2 ==0)  this.listRowBarcode.push(true);\r\n     else {\r\n       if(i == (this.stamp.number-1)/2) this.listRowBarcode.push(false);\r\n       else this.listRowBarcode.push(true);\r\n     }\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  ngAfterViewChecked(): void { \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'],{state: this.stamp})\r\n  } \r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" [ngClass]=\"{'mb-6': i != listRowBarcode.length -1  }\"  class=\"stamp \"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"position: absolute;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'left.px':pro.x,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': pro.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                             'z-index':pro.z_index,\r\n                             'display': pro.status ? 'flex' : 'none'\r\n                             }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                             <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" [ngClass]=\"{'mb-6': i != listRowBarcode.length -1  }\"  class=\"stamp \"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <svg [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'left.px':pro.x,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': pro.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                             'z-index':pro.z_index,\r\n                             'display': pro.status ? 'flex' : 'none'\r\n                             }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                             <svg [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div> \r\n    </div>\r\n</nz-layout>","import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { combineLatest } from 'rxjs';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-list',\r\n  templateUrl: './list.component.html',\r\n  styleUrls: ['./list.component.scss']\r\n})\r\nexport class ListComponent implements OnInit {\r\n /** Danh sách sản phẩm hiển thị trong tab Cho bán */\r\n   list_show_product: any = [];\r\n   /** Danh sách sản phẩm hiển thị trong tab Không cho bán */\r\n   list_show_product_not: any = [];\r\n   list_subproduct: any = [];\r\n   list_product: any = [];\r\n   list_show: any = [];\r\n \r\n   /** Danh sách sản phẩm hiển thị trong tab Đã ẩn */\r\n   list_show_product_hidden: any = [];\r\n   list_subproduct_hidden: any = [];\r\n   list_product_hidden: any = [];\r\n   list_show_hidden: any = [];\r\n \r\n   /** Danh sách tất cả danh mục */\r\n   list_category: any = [];\r\n   /** Danh sách danh mục tìm kiếm */\r\n   list_search_category: any = [];\r\n   stateObj = {\r\n     /** Từ khoá tìm kiếm */\r\n     keySearch: '',\r\n     /** id của danh mục được chọn */\r\n     selectedValue: '1',\r\n     /** Tab được chọn */\r\n     tab: 0,\r\n     nzPageIndex: 1\r\n   }\r\n   observableAll: any;\r\n \r\n \r\n \r\n   constructor(\r\n     private router: Router,\r\n     private vhQueryCafe: VhQueryCafe,\r\n     public vhAlgorithm: VhAlgorithm,\r\n     private languageService: LanguageService,\r\n     private cdRef: ChangeDetectorRef,\r\n     private datePipe: DatePipe,\r\n     private vhComponent: VhComponent,\r\n   ) {\r\n     if (this.router.getCurrentNavigation().extras.state) {\r\n       let stateObj = this.router.getCurrentNavigation().extras.state.stateObj;\r\n       this.stateObj.keySearch = stateObj.keySearch;\r\n       this.stateObj.selectedValue = stateObj.selectedValue;\r\n       this.stateObj.tab = stateObj.tab;\r\n       this.stateObj.nzPageIndex = stateObj.nzPageIndex;\r\n     }\r\n   }\r\n \r\n \r\n \r\n   ngOnInit(): void {\r\n     //xử lý category\r\n     this.list_category = this.vhQueryCafe.getlocalCategorys(VhType.INGREDIENT);\r\n     if (!this.list_category.some(item => item._id == '1')) {\r\n       this.list_category.unshift({ name: this.languageService.translate('All'), _id: '1' });\r\n     }\r\n     this.list_search_category = this.list_category;\r\n   }\r\n \r\n \r\n \r\n   ngAfterViewInit() {\r\n     this.doRefreshData();\r\n     if (this.stateObj.tab === 2) {\r\n       this.getHiddenProducts();\r\n     }\r\n   }\r\n \r\n \r\n \r\n   ngOnDestroy() {\r\n     this.observableAll.unsubscribe();\r\n   }\r\n \r\n \r\n \r\n   heightScroll: string;\r\n   ngAfterViewChecked() {\r\n     if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n       this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n         - document.querySelector(\".product-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n     }\r\n     this.cdRef.detectChanges();\r\n   }\r\n \r\n \r\n \r\n   /**get data product, category */\r\n   doRefreshData() {\r\n     this.observableAll = combineLatest([\r\n       this.vhQueryCafe.getObservableLocalProducts(VhType.INGREDIENT)\r\n     ]).subscribe((result: any) => {\r\n       console.log('getObservableLocalProducts', result);\r\n       this.list_product = result[0].filter(item => {\r\n         // check subs\r\n         if (item.subs && item.subs.length) {\r\n           item.subs = item.subs.filter(sub => !sub.delete_hidden)\r\n           return item.subs.some(sub => !sub.delete_hidden);\r\n         }\r\n         else {\r\n           return !item.delete_hidden;\r\n         }\r\n       }).map(item => this.processProduct(item));\r\n       this.list_subproduct = this.vhAlgorithm.sortStringbyASC(this.list_product, 'name');\r\n       if (this.stateObj.keySearch) {\r\n         this.searchProducts(this.stateObj.keySearch);\r\n       }\r\n       else {\r\n         this.searchByCategory(this.stateObj.selectedValue);\r\n       }\r\n     })\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Xử lí dữ liệu của sản phẩm (units, subproduct, name_category, ...)\r\n    * @param item \r\n    * @returns \r\n    */\r\n   processProduct(item: any): any {\r\n     let arr: any = []  // sắp xếp subproduct theo tiền\r\n     if (item.manysize && item.subs.length) {\r\n       arr = this.vhAlgorithm.sortNumberbyASC(item.subs, 'price');\r\n       item['show_expand'] = false;\r\n       item.subs.forEach(element => {\r\n         if (element.units) {\r\n           element['unit_exchange'] = element.units.find(e => e.default ? e.default : e.ratio == 1);\r\n         }\r\n       });\r\n     }\r\n     else {\r\n       if (item.units) {\r\n         item['unit_exchange'] = item.units.find(e => e.default ? e.default : e.ratio == 1);\r\n         item['price_high'] = item.unit_exchange.price;\r\n       }\r\n     }\r\n     return {\r\n       ...item,\r\n       name_category: this.vhQueryCafe.getlocalCategory(item.id_category) ? this.vhQueryCafe.getlocalCategory(item.id_category).name : ''\r\n     }\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * ẩn / hiện sản phẩm con\r\n    * @example this.renderSubProducts(product_selected)\r\n    */\r\n   renderSubProducts(data) {\r\n     data.show_expand = !data.show_expand\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Khi thay đổi tab\r\n    * @example this.changeTab('1');\r\n    */\r\n   changeTab(value) {\r\n     this.stateObj.tab = value;\r\n     if (value == '1') {\r\n       this.getHiddenProducts();\r\n     }\r\n   }\r\n \r\n \r\n   /**\r\n    * cập nhật sp theo trường truyền vào\r\n    * @example this.updateProductByField({name: ''})\r\n    */\r\n   updateProductByField(id, value, parent?, is_sub?) {\r\n     console.log('value', value);\r\n     console.log('id', id);\r\n     if (is_sub) {\r\n       this.vhQueryCafe.updateSubProduct_Cafe(id, value).then((res) => {\r\n         console.log(res);\r\n         this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n         // kiểm tra nếu tất cả con đều false thì xóa khỏi mảng\r\n         if(parent.subs.filter(e => e.delete_hidden).length == 0) {\r\n           this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != parent._id); \r\n         }\r\n       }, error => {\r\n         console.log(error);\r\n       }).catch(e => {\r\n         console.log(e);\r\n       })\r\n     }\r\n     else {\r\n       this.vhQueryCafe.updateProduct(id, value).then((res) => {\r\n         console.log(res);\r\n         this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n         if (!value.delete_hidden) {\r\n           this.list_product_hidden = this.list_product_hidden.filter(item => item._id != id);\r\n           this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != id);\r\n         }\r\n       }, error => {\r\n         console.log(error);\r\n       }).catch(e => {\r\n         console.log(e);\r\n       })\r\n     }\r\n \r\n   }\r\n \r\n \r\n   /**\r\n    * Lấy danh sách sản phẩm đã ẩn\r\n    */\r\n   getHiddenProducts() {\r\n     this.vhQueryCafe.refreshLocalProducts_Delete_Hidden(VhType.INGREDIENT).then(() => {\r\n       const hiddenProducts = this.vhQueryCafe.getlocalProducts(VhType.INGREDIENT).filter(item => {\r\n         // check subs\r\n         if (item.subs && item.subs.length) {\r\n           return item.subs.some(sub => sub.delete_hidden);\r\n         }\r\n         else {\r\n           return item.delete_hidden;\r\n         }\r\n       });\r\n \r\n       this.list_product_hidden = hiddenProducts.map(item => this.processProduct(item));\r\n       this.list_subproduct_hidden = this.vhAlgorithm.sortStringbyASC(this.list_product_hidden, 'name');\r\n       if (this.stateObj.keySearch) {\r\n         this.searchProductsHidden(this.stateObj.keySearch);\r\n       }\r\n       else {\r\n         this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n       }\r\n       \r\n     });\r\n   }\r\n \r\n \r\n \r\n   /** \r\n    * Lọc danh sách sản phẩm theo delete_hidden\r\n    */\r\n   filterByAllowSell() {\r\n     this.list_show_product = this.list_show.filter(item => item.delete_hidden == false || item.manysize);\r\n     // this.list_show_product_not = this.list_show.filter(item => !item.delete_hidden == false);\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Tìm kiếm sản phẩm theo tên và barcode\r\n    * @param value giá trị tìm kiếm từ input\r\n    */\r\n   searchProducts(value) {\r\n     this.stateObj.keySearch = value;\r\n     this.list_product = this.applySearchFilter(this.list_subproduct, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n     this.searchByCategory(this.stateObj.selectedValue);\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Tìm kiếm sản phẩm (tab đã ẩn) theo tên và barcode\r\n    * @param value giá trị tìm kiếm từ input\r\n    */\r\n   searchProductsHidden(value) {\r\n     this.stateObj.keySearch = value;\r\n     this.list_product_hidden = this.applySearchFilter(this.list_subproduct_hidden, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n     this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Tìm kiếm sản phẩm theo tên và barcode, nếu không có giá trị tìm kiếm thì trả về tất cả, ngược lại thì lọc theo tên và barcode\r\n    * @param products \r\n    * @param searchValue \r\n    * @param fields \r\n    * @returns \r\n    */\r\n   applySearchFilter(products: any[], searchValue: string, fields: string[]): any[] {\r\n     return searchValue\r\n       ? this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue.toLowerCase()), products, fields)\r\n       : products;\r\n   }\r\n \r\n \r\n \r\n   /** \r\n    * Lọc sản phẩm theo danh mục sản phẩm\r\n    */\r\n   searchByCategory(value) {\r\n     this.stateObj.selectedValue = value;\r\n     this.list_show = this.applyCategoryFilter(this.list_product, value);\r\n     this.filterByAllowSell();\r\n   }\r\n \r\n \r\n \r\n   /** \r\n    * Lọc sản phẩm (tab đã ẩn) theo danh mục sản phẩm\r\n    */\r\n   searchByCategoryHidden(value) {\r\n     this.stateObj.selectedValue = value;\r\n     this.list_show_hidden = this.applyCategoryFilter(this.list_product_hidden, value);\r\n     this.list_show_product_hidden = this.list_show_hidden;\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Lọc danh sách sản phẩm theo danh mục, nếu danh mục là '1' thì trả về tất cả sản phẩm, nếu không thì lọc theo id_category truyền vào\r\n    * @param products \r\n    * @param categoryId \r\n    * @returns \r\n    */\r\n   applyCategoryFilter(products: any[], categoryId: string): any[] {\r\n     return categoryId === '1'\r\n       ? products\r\n       : products.filter(item => item.id_category === categoryId);\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * Lọc danh mục theo tên\r\n    * @param value \r\n    */\r\n   search(value) {\r\n     let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n     if (value.length) {\r\n       this.list_category = this.vhAlgorithm.searchList(tempVal, this.list_search_category, ['name']);\r\n     }\r\n     else {\r\n       this.list_category = this.list_search_category;\r\n     }\r\n   }\r\n \r\n \r\n \r\n   gotoAddProducts() {\r\n     this.router.navigate(['/cafe/dashboard/management/ingredient/list/add'], {\r\n       state: {\r\n         stateObj: this.stateObj\r\n       }\r\n     });\r\n   }\r\n \r\n \r\n   gotoProductDetail(data, isFromHidden?: boolean) {\r\n     const state = {\r\n       formProduct: data,\r\n       stateObj: this.stateObj\r\n     }\r\n     if (isFromHidden) {\r\n       state['isFromHidden'] = true;\r\n     }\r\n     this.router.navigate(['/cafe/dashboard/management/ingredient/list/edit'], {\r\n       state: state\r\n     });\r\n   }\r\n \r\n \r\n   gotoCreateDataProducts() {\r\n     this.router.navigate(['/cafe/dashboard/management/ingredient/list/create-data']);\r\n   }\r\n \r\n \r\n   goBack() {\r\n     this.router.navigate(['/cafe/dashboard/management/ingredient']);\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * xuất danh sách sản phẩm ra file excel và tải về\r\n    * @example this.exportListProduct()\r\n    */\r\n   exportListProduct() {\r\n     let productExcel: Array<any> = [];\r\n     this.list_product.forEach((product, index) => {\r\n       const category: any = this.vhQueryCafe.getlocalCategory(product['id_category'])\r\n       if (!product.manysize) {\r\n         product.units.forEach(unit => {\r\n           let row: Object = new Object()\r\n           row[this.languageService.translate(\"_name\")] = product['name']\r\n           row[this.languageService.translate(\"_item_code\")] = product['item_code']\r\n           row[this.languageService.translate(\"_category\")] = category ? category['name'] : ''\r\n           row[this.languageService.translate(\"_unit\")] = unit['unit']\r\n           row[this.languageService.translate(\"_brand\")] = product['brand']\r\n           row[this.languageService.translate(\"_price_import\")] = unit['price_import']\r\n           row[this.languageService.translate(\"_price\")] = unit['price']\r\n           row[this.languageService.translate(\"_price2\")] = unit['price2']\r\n           row[this.languageService.translate(\"_barcode\")] = unit['barcode']\r\n           row[this.languageService.translate(\"_warning_number\")] = product['warning_number']\r\n           if (row) productExcel.push(row)\r\n         });\r\n       } else {\r\n         product.subs.forEach(subProduct => {\r\n           subProduct.units.forEach(unitsubProduct => {\r\n             let row: Object = new Object()\r\n             row[this.languageService.translate(\"_name\")] = product['name'] + ` (` + subProduct['name'] + `)`\r\n            row[this.languageService.translate(\"_item_code\")] = subProduct['item_code']\r\n             row[this.languageService.translate(\"_category\")] = category ? category['name'] : ''\r\n             row[this.languageService.translate(\"_unit\")] = unitsubProduct['unit']\r\n             row[this.languageService.translate(\"_brand\")] = product['brand']\r\n             row[this.languageService.translate(\"_price_import\")] = unitsubProduct['price_import']\r\n             row[this.languageService.translate(\"_price\")] = unitsubProduct['price']\r\n             row[this.languageService.translate(\"_price2\")] = unitsubProduct['price2']\r\n             row[this.languageService.translate(\"_barcode\")] = unitsubProduct['barcode']\r\n             row[this.languageService.translate(\"_warning_number\")] = subProduct['warning_number']\r\n             if (row) productExcel.push(row)\r\n           });\r\n         });\r\n       }\r\n       if (index == this.list_product.length - 1) {\r\n         this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list\"))\r\n       }\r\n     })\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * xuất danh sách sản phẩm ra file excel và tải về\r\n    * @example this.exportListProduct()\r\n    */\r\n   exportListNotSubProduct() {\r\n     let productExcel: Array<any> = [];\r\n     this.list_product.forEach((product, index) => {\r\n       const category: any = this.vhQueryCafe.getlocalCategory(product['id_category'])\r\n       if (!product.manysize) {\r\n         product.units.forEach(unit => {\r\n           let row: Object = new Object()\r\n           row[this.languageService.translate(\"_name\")] = product['name']\r\n           row[this.languageService.translate(\"_category\")] = category ? category['name'] : ''\r\n           row[this.languageService.translate(\"_unit\")] = unit['unit']\r\n           row[this.languageService.translate(\"_brand\")] = product['brand']\r\n           row[this.languageService.translate(\"_price_import\")] = unit['price_import']\r\n           row[this.languageService.translate(\"_price\")] = unit['price']\r\n           row[this.languageService.translate(\"_price2\")] = unit['price2']\r\n           row[this.languageService.translate(\"_barcode\")] = unit['barcode']\r\n           row[this.languageService.translate(\"_warning_number\")] = product['warning_number']\r\n           if (row) productExcel.push(row)\r\n         });\r\n       }\r\n       if (index == this.list_product.length - 1) {\r\n         this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list have not manysize\"))\r\n       }\r\n     })\r\n   }\r\n \r\n \r\n \r\n   /**\r\n   * xuất danh sách sản phẩm có sub ra file excel và tải về\r\n   * @example this.exportListSubProduct()\r\n   */\r\n   exportListSubProduct() {\r\n     let productExcel: Array<any> = [];\r\n     this.list_product.forEach((product, index) => {\r\n       const category: any = this.vhQueryCafe.getlocalCategory(product['id_category']);\r\n       if (product.manysize) {\r\n         product.subs.forEach(subProduct => {\r\n           subProduct.units.forEach(unitsubProduct => {\r\n             let row: Object = new Object();\r\n             row[this.languageService.translate(\"_name\")] = product['name'];\r\n             row[this.languageService.translate(\"_subname\")] = subProduct['name'];\r\n             row[this.languageService.translate(\"_item_code\")] = subProduct['item_code']\r\n             row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n             row[this.languageService.translate(\"_unit\")] = unitsubProduct['unit'];\r\n             row[this.languageService.translate(\"_brand\")] = product['brand'];\r\n             row[this.languageService.translate(\"_price_import\")] = unitsubProduct['price_import'];\r\n             row[this.languageService.translate(\"_price\")] = unitsubProduct['price'];\r\n             row[this.languageService.translate(\"_price2\")] = unitsubProduct['price2'];\r\n             row[this.languageService.translate(\"_barcode\")] = unitsubProduct['barcode'];\r\n             row[this.languageService.translate(\"_warning_number\")] = subProduct['warning_number'];\r\n             if (row) productExcel.push(row);\r\n           });\r\n         });\r\n       }\r\n       if (index == this.list_product.length - 1) {\r\n         this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list have manysize\"));\r\n       }\r\n     });\r\n   }\r\n \r\n \r\n \r\n   /**\r\n    * xuất danh sách lô sản phẩm ra file excel và tải về\r\n    * @example this.exportListOfProductLot()\r\n    */\r\n   exportListOfProductLot() {\r\n     let productExcel: Array<any> = [];\r\n     this.list_product.forEach((product, index) => {\r\n       const category: any = this.vhQueryCafe.getlocalCategory(product['id_category']);\r\n       if (!product.manysize) {\r\n         if (product.manylot) {\r\n           product.lots.forEach(lot => {\r\n             let row: Object = new Object();\r\n             row[this.languageService.translate(\"_name\")] = product['name'];\r\n             row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n             row[this.languageService.translate(\"_lot_number\")] = lot['lot_number'];\r\n             row[this.languageService.translate(\"_date_exp\")] = this.format_date(lot['date_exp']);\r\n             row[this.languageService.translate(\"_date_mfg\")] = this.format_date(lot['date_mfg']);\r\n             row[this.languageService.translate(\"_lot_barcode\")] = lot['barcode'];\r\n             if (row) productExcel.push(row);\r\n           });\r\n         }\r\n       } else {\r\n         product.subs.forEach(subProduct => {\r\n           if (subProduct.manylot) {\r\n             subProduct.lots.forEach(lot => {\r\n               let row: Object = new Object();\r\n               row[this.languageService.translate(\"_name\")] = product['name'] + ` (` + subProduct['name'] + `)`;\r\n               row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n               row[this.languageService.translate(\"_lot_number\")] = lot['lot_number'];\r\n               row[this.languageService.translate(\"_date_exp\")] = this.format_date(lot['date_exp']);\r\n               row[this.languageService.translate(\"_date_mfg\")] = this.format_date(lot['date_mfg']);\r\n               row[this.languageService.translate(\"_lot_barcode\")] = lot['barcode'];\r\n               if (row) productExcel.push(row);\r\n             });\r\n           }\r\n         });\r\n       }\r\n       if (index == this.list_product.length - 1) {\r\n         this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"List of product batches\"))\r\n       }\r\n     })\r\n   }\r\n \r\n \r\n \r\n   format_date(date) {\r\n     return this.datePipe.transform(date, \"dd/MM/yyyy HH:mm\");\r\n   }\r\n \r\n \r\n \r\n   //** hàm sort cho các cột */\r\n   name_col = false;          // chọn sort cột tên sản phẩm\r\n   unit_col = false;             // Chọn sắp xếp theo đơn vị\r\n   barcode_col = false;          // Chọn sắp xếp theo barcode\r\n   name_category_col = false;     // Chọn sắp xếp theo tên danh mục\r\n   brand_col = false;            // Chọn sắp xếp theo chi nhánh\r\n   price_high_col = false;            // Chọn sắp xếp theo giá\r\n   sortTable(colName) {\r\n     let methodName = colName === 'price_high' ? 'sortNumberby' : 'sortVietnameseby';\r\n     let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n \r\n     this.list_show_product = this.vhAlgorithm[methodName + direction]([...this.list_show_product], colName);\r\n     this.list_show_product_not = this.vhAlgorithm[methodName + direction]([...this.list_show_product_not], colName);\r\n     this.list_show_product_hidden = this.vhAlgorithm[methodName + direction]([...this.list_show_product_hidden], colName);\r\n   }\r\n \r\n }\r\n ","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n  <div nz-row class=\"product-list-header\">\r\n    <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n      <b>{{'Ingredient list' | translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input #box [value]=\"stateObj.keySearch\" type=\"text\" nz-input\r\n          [placeholder]=\"'Search for product name, barcode, item code' | translate\"\r\n          (keyup)=\"searchProducts(box.value); stateObj.tab === 1 ? searchProductsHidden(box.value) : '';\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n      <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\" nzBorderless\r\n        [(ngModel)]=\"stateObj.selectedValue\"\r\n        (ngModelChange)=\"searchByCategory($event); stateObj.tab === 1 ? searchByCategoryHidden($event) : '';\">\r\n        <nz-option *ngFor=\"let option of list_category\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\"></nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <div>\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export data'|translate}}</button>\r\n        <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n          <ul nz-menu>\r\n            <li nz-menu-item (click)=\"exportListProduct()\">{{'Export all product data' | translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListNotSubProduct()\">{{'Export data of products WITHOUT ATTRIBUTES' |\r\n              translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListSubProduct()\">{{'Export data of products WITH ATTRIBUTES' | translate}}\r\n            </li>\r\n            <li nz-menu-item (click)=\"exportListOfProductLot()\">{{'Export batch product data' | translate}}</li>\r\n          </ul>\r\n        </nz-dropdown-menu>\r\n      </div>\r\n      <div>\r\n        <button class=\"btn-data\" nz-button nzType=\"default\" (click)=\"gotoCreateDataProducts()\">\r\n          <i nz-icon nzType=\"appstore-add\" nzTheme=\"outline\"></i>\r\n          {{'Create data' | translate}}\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAddProducts()\">\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n          {{'Add' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"stateObj.tab\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <!-- Tab Cho bán -->\r\n      <nz-tab nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n        <nz-table class=\"allow-sales\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n          [(nzPageIndex)]=\"stateObj.nzPageIndex\" [nzScroll]=\"{ y: heightScroll }\" #allowSale nzShowPagination\r\n          nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_show_product\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <ng-container *ngFor=\"let data of allowSale.data\">\r\n              <tr style=\"cursor: pointer;\" (click)=\"gotoProductDetail(data)\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <td>{{ data.brand }}</td>\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <tr *ngFor=\"let sub of data.subs\">\r\n                  <td></td>\r\n                  <td></td>\r\n                  <td style=\"color: var(--ion-color-vh-green);\">{{ sub.name }}<br><small style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                  <td (click)=\"$event.stopPropagation()\">\r\n                    <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                      <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                      </nz-option>\r\n                    </nz-select>\r\n                  </td>\r\n                  <td>\r\n                    {{ sub.unit_exchange?.barcode }}\r\n                  </td>\r\n                  <td>{{ data.name_category }}</td>\r\n                  <td>{{ data.brand }}</td>\r\n                  <td class=\"money-right\">\r\n                    {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n\r\n\r\n      <!-- Tab Đã ẩn -->\r\n      <nz-tab [nzTitle]=\"'Hidden not allow sell' | translate \">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product_hidden.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #productHidden nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\"\r\n          [nzData]=\"list_show_product_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right' (click)=\"price_high_col = !price_high_col; sortTable('price_high')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!productHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"9\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <ng-container *ngFor=\"let data of productHidden.data\">\r\n              <tr style=\"cursor: pointer;\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <td>{{ data.brand }}</td>\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n                <td class=\"money-right\">\r\n                  <nz-switch *ngIf=\"!data.manysize\" [(ngModel)]=\"data.delete_hidden\"\r\n                    (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                  </nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <ng-container *ngFor=\"let sub of data.subs\">\r\n                  <tr>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">{{\r\n                      sub.name }} <span *ngIf=\"sub.delete_hidden\">({{ 'Hidden' | translate }})</span><br><small style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                    <td (click)=\"$event.stopPropagation()\">\r\n                      <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                        <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\"></nz-option>\r\n                      </nz-select>\r\n                    </td>\r\n                    <td>\r\n                      {{ sub.unit_exchange?.barcode }}\r\n                    </td>\r\n                    <td>{{ data.name_category }}</td>\r\n                    <td>{{ data.brand }}</td>\r\n                    <td class=\"money-right\"\r\n                      [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">\r\n                      {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                    </td>\r\n                    <td class=\"money-right\">\r\n                      <nz-switch  [(ngModel)]=\"sub.delete_hidden\"\r\n                        (ngModelChange)=\"updateProductByField(sub._id,{delete_hidden: sub.delete_hidden},data, true)\">\r\n                      </nz-switch>\r\n                    </td>\r\n                  </tr>\r\n                </ng-container>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ListComponent } from './list.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AddProductComponent } from './add-product/add-product.component';\r\nimport { EditProductComponent } from './edit-product/edit-product.component';\r\nimport { CreateDataProductsComponent } from './create-data-products/create-data-products.component';\r\nimport { UnitsListComponent } from './units-list/units-list.component';\r\nimport { LotListComponent } from './lot-list/lot-list.component';\r\nimport { LotListUpdateComponent } from './lot-list-update/lot-list-update.component';\r\nimport { UnitsListUpdateComponent } from './units-list-update/units-list-update.component';\r\nimport { PrintFiveColComponent } from './edit-product/print-five-col/print-five-col.component';\r\nimport { PrintFourColComponent } from './edit-product/print-four-col/print-four-col.component';\r\nimport { PrintOneColComponent } from './edit-product/print-one-col/print-one-col.component';\r\nimport { DetailThreeColComponent } from './edit-product/detail-three-col/detail-three-col.component';\r\nimport { PrintFiveColLotComponent } from './edit-product/print-five-col-lot/print-five-col-lot.component';\r\nimport { PrintFourColLotComponent } from './edit-product/print-four-col-lot/print-four-col-lot.component';\r\nimport { PrintOneColLotComponent } from './edit-product/print-one-col-lot/print-one-col-lot.component';\r\nimport { PrintThreeColLotComponent } from './edit-product/print-three-col-lot/print-three-col-lot.component';\r\nimport { PrintTwoColLotComponent } from './edit-product/print-two-col-lot/print-two-col-lot.component';\r\nimport { DetailComponent } from './edit-product/detail/detail.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component:  ListComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component:  AddProductComponent\r\n  },\r\n  {\r\n    path: 'edit',\r\n    component: EditProductComponent\r\n  },\r\n  {\r\n    path: 'create-data',\r\n    component: CreateDataProductsComponent\r\n  },\r\n  {\r\n    path: 'print-two-col',\r\n    component: DetailComponent\r\n  },\r\n  {\r\n    path: 'print-three-col',\r\n    component: DetailThreeColComponent\r\n  },\r\n  {\r\n    path: 'print-one-col',\r\n    component: PrintOneColComponent\r\n  },\r\n  {\r\n    path: 'print-four-col',\r\n    component: PrintFourColComponent\r\n  },\r\n  {\r\n    path: 'print-five-col',\r\n    component: PrintFiveColComponent\r\n  },\r\n  {\r\n    path: 'print-two-col-lot',\r\n    component: PrintTwoColLotComponent\r\n  },\r\n  {\r\n    path: 'print-three-col-lot',\r\n    component: PrintThreeColLotComponent\r\n  },\r\n  {\r\n    path: 'print-one-col-lot',\r\n    component: PrintOneColLotComponent\r\n  },\r\n  {\r\n    path: 'print-four-col-lot',\r\n    component: PrintFourColLotComponent\r\n  },\r\n  {\r\n    path: 'print-five-col-lot',\r\n    component: PrintFiveColLotComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ListComponent,\r\n    AddProductComponent,\r\n    EditProductComponent,\r\n    CreateDataProductsComponent,UnitsListComponent,\r\n    DetailComponent,\r\n    LotListComponent,\r\n    LotListUpdateComponent,\r\n    UnitsListUpdateComponent,\r\n    DetailThreeColComponent,\r\n    PrintOneColComponent,\r\n    PrintFourColComponent,\r\n    PrintFiveColComponent,\r\n    PrintTwoColLotComponent,\r\n    PrintThreeColLotComponent,\r\n    PrintOneColLotComponent,\r\n    PrintFourColLotComponent,\r\n    PrintFiveColLotComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    TranslateModule,\r\n    IonicModule\r\n  ]\r\n})\r\nexport class ListModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks'; \r\nimport { VhComponent } from '../../../../../../components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n@Component({\r\n  selector: 'app-lot-list-update',\r\n  templateUrl: './lot-list-update.component.html',\r\n  styleUrls: ['./lot-list-update.component.scss']\r\n})\r\nexport class LotListUpdateComponent implements OnInit {\r\n   @Input() id_sub_or_product: string = '';\r\n    @Input() show_lot_list: boolean = false;\r\n    data: any[];\r\n    @Output(\"close\") close = new EventEmitter<any>();\r\n    public formLots = this.formBuilderfb.group({                       // Form thêm đơn vị quy đổi\r\n      lots: this.formBuilderfb.array([], Validators.required)\r\n    })\r\n    public lotForm: FormGroup;\r\n    formAddLot: FormGroup;\r\n    show_modal_add_lot = false;\r\n    is_change_to_update = false\r\n    constructor(\r\n      public vhAlgorithm: VhAlgorithm,\r\n      private readonly formBuilderfb: FormBuilder,\r\n      private vVhQueryCafe: VhQueryCafe,\r\n      private vhComponent: VhComponent,\r\n      private lang: LanguageService,\r\n      private functionService: FunctionService\r\n    ) {\r\n  \r\n    }\r\n    ngOnInit(): void {\r\n      this.data = this.vVhQueryCafe.getlocalDetailProduct(this.id_sub_or_product).lots;\r\n      this.initAddLotsForm(this.data)\r\n    }\r\n  \r\n    initAddLotsForm(data) {\r\n      if (data.length > 0) {\r\n        for (let i = 0; i < data.length; i++) { //  đơn vị quy đổi\r\n          this.addLots(data[i])\r\n        }\r\n      }\r\n      \r\n  \r\n    }\r\n  \r\n    /**\r\n     * gán dữ liệu lô vào form để dể xử lý\r\n     */\r\n    addNewLots() {\r\n      this.show_modal_add_lot = true;\r\n      this.formAddLot = new FormGroup({\r\n        date_mfg: new FormControl(new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n        date_exp: new FormControl(new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n        lot_number: new FormControl('', Validators.compose([Validators.required])),\r\n        hidden: new FormControl(false),\r\n        barcode: new FormControl(''),\r\n      })\r\n    }\r\n  \r\n    /**\r\n     * bắt sk nhấn nút ok modal thêm lô\r\n     * @example this.handleOkNewLot()\r\n     */\r\n    handleOkNewLot() {\r\n      if (!this.exist_barcode_add) {\r\n        \r\n        \r\n        this.vVhQueryCafe.addLotProduct_Cafe(this.id_sub_or_product, this.formAddLot.value)\r\n          .then((lot) => {\r\n            \r\n            this.addLots({ ...this.formAddLot.value, _id: lot })\r\n            this.show_modal_add_lot = false;\r\n            this.is_change_to_update = true\r\n          }, error => {\r\n            \r\n          })\r\n      }\r\n      else this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode này đã tồn tại\"))\r\n    }\r\n  \r\n    // get mãng lô quy đổi\r\n    get lots() {\r\n      return this.formLots.controls[\"lots\"] as FormArray;\r\n    }\r\n    // thêm lô quy đổi\r\n    addLots(lot?) {\r\n      this.lotForm = this.formBuilderfb.group({\r\n        date_mfg: new FormControl(lot ? new Date(lot.date_mfg) : new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n        date_exp: new FormControl(lot ? new Date(lot.date_exp) : new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n        lot_number: new FormControl(lot ? lot.lot_number : '', Validators.compose([Validators.required])),\r\n        hidden: new FormControl(lot ? lot.hidden : false),\r\n        barcode: new FormControl(lot ? lot.barcode : ''),\r\n        _id: new FormControl(lot ? lot._id : null),\r\n      })\r\n      this.lots.push(this.lotForm);\r\n    }\r\n  \r\n    /**\r\n     * cập nhật mã lô lên DB\r\n     * @param id \r\n     * @param value \r\n     */\r\n    updateLotNumber(id, value) {\r\n      if (this.exist_lot_number && this.checkLotNumber(value)) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Lot number already exists\"))\r\n      } else {\r\n        this.updateLotProduct(id, { lot_number: value })\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * cập nhật barcode lô lên DB\r\n     * @param id \r\n     * @param value \r\n     */\r\n    updateBarcode(id, value) {\r\n      if (this.barcode_exist) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode already exists\"))\r\n      } else {\r\n        this.updateLotProduct(id, { barcode: value })\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * cập nhật các trường khác của lô lên DB\r\n     * @param id \r\n     * @param value \r\n     */\r\n    updateLotProduct(id, value) {\r\n      this.vVhQueryCafe.updateLotProduct_Cafe(this.id_sub_or_product, id, value)\r\n        .then((bool) => {\r\n          \r\n          if (!bool) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Cập nhật thất bại\"))\r\n        }, error => {  })\r\n    }\r\n    // xóa đơn vị quy đổi\r\n    deleteLots(index: number, id_lotproduct) {\r\n  \r\n      this.vVhQueryCafe.deleteLotProduct_Cafe(this.id_sub_or_product, id_lotproduct)\r\n        .then((rsp: any) => {\r\n          \r\n  \r\n          if (rsp.vcode === 0) {\r\n            this.lots.removeAt(index)\r\n            this.is_change_to_update = true\r\n          } else if (rsp.vcode === 1) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Bạn không thể xóa, vì lô sản phẩm này không tồn tại\"))\r\n          } else if (rsp.vcode === 2) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Bạn không thể xóa, vì lô sản phẩm này đã phát sinh hóa đơn\"))\r\n          }\r\n        }, error => {\r\n          \r\n  \r\n        })\r\n    }\r\n    /**\r\n     * kiểm tra ngày sx và ngày hh hợp lệ\r\n     * @param formAddLot \r\n     */\r\n    changeDate(formAddLot) {\r\n      this.is_change_to_update = true\r\n      if (new Date(formAddLot.value.date_mfg).getTime() >= new Date(formAddLot.value.date_exp).getTime()) {\r\n        formAddLot.control['date_exp'].setValue(new Date(new Date(formAddLot.value.date_mfg).setHours(23, 59, 59)))\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n      }\r\n      else {\r\n        this.updateLotProduct(formAddLot.value._id, { date_exp: formAddLot.value.date_exp, date_mfg: formAddLot.value.date_mfg })\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * đóng component\r\n     */\r\n    okLots() {\r\n      // \r\n      // \r\n      if (this.barcode_exist) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode already exists\"))\r\n      }\r\n      else {\r\n        if (this.is_change_to_update) {\r\n          let invalid_lot = this.lots.value.filter(item => new Date(item.date_exp).getTime() <= new Date(new Date(item.date_mfg)).getTime())\r\n          if (invalid_lot.length) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", invalid_lot[0].lot_number + ' ' + this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n          }\r\n          else {\r\n            let data = this.lots.value.filter(item => item.lot_number != '' && new Date(item.date_exp).getTime() >= new Date(new Date(item.date_mfg)).getTime())\r\n            \r\n  \r\n            this.close.emit(data);\r\n          }\r\n        }\r\n        else this.close.emit(null);\r\n      }\r\n    }\r\n  \r\n    nzclose() {\r\n      this.okLots()\r\n    }\r\n  \r\n    /**\r\n     * tạo barcode tự động\r\n     * @returns string\r\n     * @example let barcode = this.createBarcodeAuto()\r\n     */\r\n    createBarcodeAuto() {\r\n      let newbarcode = '';\r\n      for (let index = 0; index < 12; index++) {\r\n        newbarcode += Math.floor(Math.random() * 10)\r\n      }\r\n      let detailproduct = this.vVhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(newbarcode)\r\n      if (detailproduct == null) {\r\n        return newbarcode\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * tạo barcode tự động cho lô đã thêm\r\n     * @param position \r\n     */\r\n    setBarcodeForUnit(position) {\r\n      (this.lots.at(position) as FormGroup).get('barcode').setValue(this.createBarcodeAuto());\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      this.is_change_to_update = true\r\n      this.updateBarcode(this.lotForm.value._id, this.lotForm.value.barcode)\r\n    }\r\n  \r\n  \r\n  \r\n    /**\r\n     * tạo barcode tự động cho lô thêm mới\r\n     * @param position \r\n     */\r\n    setBarcodeForNewLot() {\r\n      this.formAddLot.controls['barcode'].setValue(this.createBarcodeAuto());\r\n    }\r\n  \r\n    barcode_exist = false;\r\n    /**\r\n     * kiểm tra barcode đã tồn tại hay chưa\r\n     * @param barcode \r\n     * @param position vị trí của lô trong mảng để làm css nếu trùng\r\n     * @example this.checkBarcode('123456789',1) \r\n     */\r\n    checkBarcode(barcode, position) {\r\n      this.is_change_to_update = true\r\n      if (barcode.length) {\r\n        if (this.vVhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)) {\r\n          this.barcode_exist = true;\r\n          document.getElementById('barcodeError' + position).style.display = 'block';\r\n          return;\r\n        }\r\n        else {\r\n          const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n          if (lotsNotPosition.length) {\r\n            lotsNotPosition.forEach(element => {\r\n              if (element.barcode != barcode) {\r\n                this.barcode_exist = false;\r\n                document.getElementById('barcodeError' + position).style.display = 'none';\r\n                return\r\n              } else {\r\n                this.barcode_exist = true;\r\n                document.getElementById('barcodeError' + position).style.display = 'block';\r\n                return;\r\n              }\r\n            })\r\n          } else {\r\n            this.barcode_exist = false;\r\n            document.getElementById('barcodeError' + position).style.display = 'none';\r\n            return\r\n          }\r\n        }\r\n      } else {\r\n        this.barcode_exist = false;\r\n        document.getElementById('barcodeError' + position).style.display = 'none';\r\n        return\r\n      }\r\n    }\r\n  \r\n  \r\n    lot_number_exist = false;\r\n    //  kiểm tra đơn vị khi thêm\r\n    checkNameUnit(lot: string, position: number) {\r\n      this.is_change_to_update = true\r\n      if (lot.length) {\r\n        const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n        if (lotsNotPosition.length) {\r\n          lotsNotPosition.forEach(element => {\r\n            if (element.lot_number != lot) {\r\n              document.getElementById('lotError' + position).style.display = 'none';\r\n              this.lot_number_exist = false;\r\n              return\r\n            } else {\r\n              document.getElementById('lotError' + position).style.display = 'block';\r\n              this.lot_number_exist = true;\r\n              return;\r\n            }\r\n          })\r\n        } else {\r\n          document.getElementById('lotError' + position).style.display = 'none';\r\n          this.lot_number_exist = false;\r\n          return\r\n        }\r\n      }\r\n    }\r\n  \r\n    exist_lot_number = false;\r\n    checkLotNumber(lot) {\r\n      this.exist_lot_number = this.functionService.checkExitsLotNumber(lot)\r\n      return this.functionService.checkExitsLotNumber(lot)\r\n    }\r\n    exist_barcode_add = false;\r\n    checkBarcodeAdd(barcode) {\r\n      if (this.vVhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)) {\r\n        this.exist_barcode_add = true;\r\n      }\r\n      else this.exist_barcode_add = false;\r\n    }\r\n  }\r\n  ","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"1000\" nzTitle='{{\"List of lots\" | translate}}' [nzVisible]=\"show_lot_list\"\r\n    [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"nzclose()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"formLots\">\r\n            <div *ngIf=\"lots.length == 0\" style=\"text-align:center\">\r\n                <span>{{'No data'|translate}}</span>\r\n                <button class=\"btn-add\" style=\"margin: auto;\" nz-button nzType=\"default\" (click)=\"addNewLots()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"\r\n                        style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                    {{'Create lot' | translate}}\r\n                </button>\r\n            </div>\r\n            <ng-container formArrayName=\"lots\" *ngIf=\"lots.length > 0\">\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Lot number' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Date of manufacture' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Expiration date' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Stop using' | translate}}</b></div>\r\n                    </div>\r\n                </div>\r\n                <div *ngFor=\"let lotForm of lots.controls; let i = index\">\r\n                    <form nz-row [formGroup]=\"lotForm\" style=\"padding-bottom: 8px\" [nzGutter]=\"24\">\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                                style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                <i (click)=\"$event.stopPropagation()\" nz-popconfirm\r\n                                    nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\"\r\n                                    (nzOnConfirm)=\"deleteLots(i,lotForm.value._id)\" nzPopconfirmPlacement=\"topLeft\"\r\n                                    style=\"color: var(--ion-color-vh-red); cursor: pointer;\" nz-icon nzType=\"close\"\r\n                                    nzTheme=\"outline\"></i>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <input nz-input formControlName=\"lot_number\" [id]=\"'lot'+i\"\r\n                                    placeholder=\"{{ 'Enter lot number'| translate}}\" #lot\r\n                                    (keyup)=\"checkNameUnit(lot.value,i)\" (blur)=\"updateLotNumber(lotForm.value._id, lotForm.value.lot_number)\"/>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_exp\" (ngModelChange)=\"changeDate(lotForm)\">\r\n                                </nz-date-picker>\r\n                            </div>\r\n\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div\r\n                                    style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                    <input nz-input formControlName=\"barcode\" (blur)=\"updateBarcode(lotForm.value._id, lotForm.value.barcode)\"\r\n                                        (keyup)=\"checkBarcode(lotForm.value.barcode,i)\" />\r\n                                    <i style=\"padding-left: 8px; cursor: pointer;\" nz-icon nzType=\"reload\"\r\n                                        nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip\r\n                                        nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                                        nzTooltipPlacement=\"bottom\"></i>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <nz-switch formControlName=\"hidden\"  (ngModelChange)=\"updateLotProduct(lotForm.value._id, {hidden: lotForm.value.hidden})\"></nz-switch>\r\n                            </div>\r\n\r\n                        </ng-container>\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                                style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <div class=\"validation-errors\" [id]=\"'lotError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Please enter lot number'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div>\r\n                        </ng-container>\r\n                    </form>\r\n                </div>\r\n                <div style=\"padding-top: 8px; float: right;\">\r\n                    <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addNewLots()\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"\r\n                            style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                        {{'Add lot' | translate}}\r\n                    </button>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddCustomer>\r\n        <div class=\"footerAddCustomer\" style=\"float: right\">\r\n            <!-- <button nz-button style=\"margin-right: 8px;\" (click)=\"nzclose()\">{{\"Cancel\" | translate}}</button> -->\r\n            <button nz-button (click)=\"okLots()\">{{\"Close\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n\r\n\r\n<nz-modal *ngIf=\"show_modal_add_lot\" [(nzVisible)]=\"show_modal_add_lot\" nzTitle=\"{{'Add new lot' | translate}}\"\r\n    [nzOkDisabled]=\"formAddLot.invalid\" (nzOnCancel)=\"show_modal_add_lot =false\" (nzOnOk)=\"handleOkNewLot()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"formAddLot\">\r\n            <div nz-row>\r\n                <div nz-col [nzSpan]=\"24\">\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Lot number' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input nz-input formControlName=\"lot_number\" placeholder=\"{{ 'Enter lot number'| translate}}\" #lot\r\n                                (keyup)=\"checkLotNumber(lot.value)\" />\r\n                            <ng-container *ngIf=\"exist_lot_number\"> <br> <span style=\"color:red;\">{{'This batch number already exists' | translate}}</span>\r\n                            </ng-container>\r\n\r\n                        </nz-form-control>\r\n\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Date of manufacture' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-date-picker formControlName=\"date_exp\" (ngModelChange)=\"changeDate(formAddLot)\">\r\n                            </nz-date-picker>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input style=\"width: 95%;\" nz-input formControlName=\"barcode\" placeholder=\"{{ 'Enter barcode_' | translate}}\"\r\n                                #barcode (keyup)=\"checkBarcodeAdd(barcode.value)\" />\r\n                            <i style=\"padding-left: 8px; cursor: pointer;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                                (click)=\"setBarcodeForNewLot()\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i>\r\n                            <ng-container *ngIf=\"exist_barcode_add\"> <br> <span style=\"color:red;\">{{'This barcode already exists' | translate}}</span>\r\n                            </ng-container>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-lot-list',\r\n  templateUrl: './lot-list.component.html',\r\n  styleUrls: ['./lot-list.component.scss']\r\n})\r\nexport class LotListComponent implements OnInit {\r\n  @Input() show_lot_list: boolean = false;\r\n  @Input(\"data\") data: any[] = [];\r\n  @Input(\"barcodes\") barcodes: any = []\r\n  @Output(\"close\") close = new EventEmitter<any>();\r\n  public formLots = this.formBuilderfb.group({                       // Form thêm đơn vị quy đổi\r\n    lots: this.formBuilderfb.array([], Validators.required)\r\n  })\r\n  public lotForm: FormGroup;\r\n\r\n  disabledButton = true;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private readonly formBuilderfb: FormBuilder,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService\r\n  ) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.initAddLotsForm(this.data)\r\n  }\r\n\r\n  initAddLotsForm(data) {\r\n    if (data.length > 0) {\r\n      for (let i = 0; i < data.length; i++) { //  đơn vị quy đổi\r\n        this.addLots(data[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  // get mãng đơn vị quy đổi\r\n  get lots() {\r\n    return this.formLots.controls[\"lots\"] as FormArray;\r\n  }\r\n  // thêm đơn vị quy đổi\r\n  addLots(lot?) {\r\n    this.lotForm = this.formBuilderfb.group({\r\n      date_mfg: new FormControl(lot ? lot.date_mfg : new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n      date_exp: new FormControl(lot ? lot.date_exp : new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n      lot_number: new FormControl(lot ? lot.lot_number : '', Validators.compose([Validators.required])),\r\n      hidden: new FormControl(lot ? lot.hidden : false),\r\n      barcode: new FormControl(lot ? lot.barcode : ''),\r\n    })\r\n    this.lots.push(this.lotForm);\r\n  }\r\n  // xóa đơn vị quy đổi\r\n  deleteLots(index: number) {\r\n    this.lots.removeAt(index)\r\n  }\r\n  /**\r\n   * kiểm tra ngày sx và ngày hh hợp lý hay ko\r\n   * @param lotForm \r\n   */\r\n  changeDate(lotForm) {\r\n    if (new Date(lotForm.value.date_mfg).getTime() >= new Date(lotForm.value.date_exp).getTime()) {\r\n      lotForm.control['date_exp'].setValue(new Date(new Date(lotForm.value.date_mfg).setHours(23, 59, 59)))\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút lưu\r\n   */\r\n  okLots() {\r\n    console.log(this.lots.value);\r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode already exists\"))\r\n    }\r\n    else {\r\n      let invalid_lot = this.lots.value.filter(item => new Date(item.date_exp).getTime() <= new Date(new Date(item.date_mfg)).getTime())\r\n      if (invalid_lot.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", invalid_lot[0].lot_number + ' ' + this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n      }\r\n      else {\r\n        let data = this.lots.value.filter(item => item.lot_number != '' && new Date(item.date_exp).getTime() >= new Date(new Date(item.date_mfg)).getTime())\r\n        this.close.emit(data);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * đóng component\r\n   */\r\n  nzclose() {\r\n    this.close.emit(false);\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động tại vị trí position trong mảng\r\n   * @param position \r\n   */\r\n  setBarcodeForUnit(position) {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(newbarcode)\r\n    if (detailproduct == null) {\r\n      (this.lots.at(position) as FormGroup).get('barcode').setValue(newbarcode);\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n    } else {\r\n      document.getElementById('barcodeError' + position).style.display = 'block';\r\n    }\r\n  }\r\n\r\n\r\n  barcode_exist = false;\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa (cả trong local và sp đã tạo)\r\n   * @param barcode \r\n   * @param position \r\n   * @returns \r\n   */\r\n  checkBarcode(barcode, position) {\r\n    if (barcode.length) {\r\n      console.log(this.barcodes);\r\n      \r\n      if (this.barcodes.find(item => item == barcode)) {\r\n        this.barcode_exist = false;\r\n        document.getElementById('barcodeError' + position).style.display = 'block';\r\n        return\r\n      }\r\n      else {\r\n        if (this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)) {\r\n          this.barcode_exist = true;\r\n          document.getElementById('barcodeError' + position).style.display = 'block';\r\n          return;\r\n        }\r\n        else {\r\n          const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n          if (lotsNotPosition.length) {\r\n            lotsNotPosition.forEach(element => {\r\n              if (element.barcode != barcode) {\r\n                this.barcode_exist = false;\r\n                document.getElementById('barcodeError' + position).style.display = 'none';\r\n                return\r\n              } else {\r\n                this.barcode_exist = true;\r\n                document.getElementById('barcodeError' + position).style.display = 'block';\r\n                return;\r\n              }\r\n            })\r\n\r\n          } else {\r\n            this.barcode_exist = false;\r\n            document.getElementById('barcodeError' + position).style.display = 'none';\r\n            return\r\n          }\r\n\r\n        }\r\n      }\r\n    } else {\r\n      this.barcode_exist = false;\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      return\r\n    }\r\n  }\r\n\r\n\r\n\r\n  //  kiểm tra đơn vị khi thêm\r\n  checkNameUnit(lot: string, position: number) {\r\n    if (lot.length) {\r\n      const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n      if (lotsNotPosition.length) {\r\n        lotsNotPosition.forEach(element => {\r\n          if (element.lot_number != lot) {\r\n            document.getElementById('lotError' + position).style.display = 'none';\r\n            return\r\n          } else {\r\n            document.getElementById('lotError' + position).style.display = 'block';\r\n            return;\r\n          }\r\n        })\r\n      } else {\r\n        document.getElementById('lotError' + position).style.display = 'none';\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"1000\" nzTitle='{{\"List of lots\" | translate}}' [nzVisible]=\"show_lot_list\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"nzclose()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"formLots\">\r\n            <div *ngIf=\"lots.length == 0\" style=\"text-align:center\">\r\n                <span>{{'No data'|translate}}</span>\r\n                <button class=\"btn-add\" style=\"margin: auto;\" nz-button nzType=\"default\" (click)=\"addLots()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                    {{'Create lot' | translate}}\r\n                </button>\r\n            </div>\r\n            <ng-container formArrayName=\"lots\" *ngIf=\"lots.length > 0\">\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Lot number' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Date of manufacture' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Expiration date' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Stop using' | translate}}</b></div>\r\n                    </div>\r\n                </div>\r\n                <div *ngFor=\"let lotForm of lots.controls; let i = index\">\r\n                    <form nz-row [formGroup]=\"lotForm\" style=\"padding-bottom: 8px\" [nzGutter]=\"24\">\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                <i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteLots(i)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red); cursor: pointer;\" nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <input nz-input formControlName=\"lot_number\" [id]=\"'lot'+i\" placeholder=\"{{ 'Enter lot number'| translate}}\" #lot (keyup)=\"checkNameUnit(lot.value,i)\" />\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_exp\" (ngModelChange)=\"changeDate(lotForm)\"></nz-date-picker>\r\n                            </div>\r\n                             \r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                    <input nz-input formControlName=\"barcode\" (blur)=\"checkBarcode(lotForm.value.barcode,i)\" />\r\n                                    <i style=\"padding-left: 8px; cursor: pointer;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <nz-switch formControlName=\"hidden\" ></nz-switch>\r\n                            </div>\r\n\r\n                        </ng-container>\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <div class=\"validation-errors\" [id]=\"'lotError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Lot number already exists'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                 \r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div> \r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div>\r\n                        </ng-container>\r\n                    </form>\r\n                </div>\r\n                <div style=\"padding-top: 8px; float: right;\">\r\n                    <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addLots()\">\r\n                      <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                      {{'Add lot' | translate}}\r\n                  </button>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddCustomer>\r\n        <div class=\"footerAddCustomer\" style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"nzclose()\">{{\"Cancel\" | translate}}</button>\r\n            <button nz-button (click)=\"okLots()\">{{(lots.length > 0 ? 'Lưu' : 'Ok') | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-units-list-update',\r\n  templateUrl: './units-list-update.component.html',\r\n  styleUrls: ['./units-list-update.component.scss']\r\n})\r\nexport class UnitsListUpdateComponent implements OnInit {\r\n  unit_main: any;\r\n  @Input(\"showDrawerUnits\") showDrawerUnits: boolean = false;\r\n  @Input(\"dataUnit\") dataUnit: any\r\n  @Input(\"dataUnits\") dataUnits: any[];\r\n  @Output(\"closeUnits\") closeUnits = new EventEmitter<any>();\r\n  ratio_default: number = 1;\r\n  public formUnits = this.formBuilderfb.group({                       // Form thêm đơn vị quy đổi\r\n    units: this.formBuilderfb.array([], Validators.required)\r\n  })\r\n  public unitForm: FormGroup;\r\n  ratioError = true;\r\n  is_change_to_update = false;\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private formBuilderfb: FormBuilder,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.ratio_default = this.dataUnits.find(e => e.default) ? this.dataUnits.find(e => e.default).ratio : 1\r\n    this.initAddUnitsForm(this.dataUnits)\r\n  }\r\n  ngAfterViewInit() {\r\n    for (let i = 0; i < this.units.value.length; i++) { //  đơn vị quy đổi\r\n      if (this.units.value[i].ratio != 1) {\r\n        this.vhAlgorithm.vhnumeral(\"#\" + 'price_units' + i)\r\n        this.vhAlgorithm.vhnumeral(\"#\" + 'price2_units' + i)\r\n        this.vhAlgorithm.vhnumeral(\"#\" + 'priceImport_units' + i)\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  initAddUnitsForm(data) {\r\n    if (data.length > 0) {\r\n      for (let i = 0; i < data.length; i++) { //  đơn vị quy đổi\r\n        if (data[i].ratio != 1) this.addUnits(data[i])\r\n        if (data[i].ratio == 1) this.unit_main = data[i]\r\n      }\r\n    }\r\n  }\r\n\r\n  // get mãng đơn vị quy đổi\r\n  get units() {\r\n    return this.formUnits.controls[\"units\"] as FormArray;\r\n  }\r\n  // thêm đơn vị quy đổi\r\n  addUnits(unit?) {\r\n    this.unitForm = this.formBuilderfb.group({\r\n      unit: new FormControl(unit ? unit.unit : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price: new FormControl(unit ? unit.price : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price2: new FormControl(unit ? unit.price2 : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price_import: new FormControl(unit ? unit.price_import : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      barcode: new FormControl(unit ? unit.barcode : ''),\r\n      ratio: new FormControl(unit ? unit.ratio : '', [Validators.required]),\r\n      default: new FormControl(unit ? unit.default : false, [Validators.required]),\r\n    })\r\n    this.units.push(this.unitForm);\r\n  }\r\n  // xóa đơn vị quy đổi\r\n  deleteUnits(index: number) {\r\n    this.units.removeAt(index)\r\n    this.is_change_to_update = true;\r\n    this.unit_main.default = true;\r\n    this.barcode_exist = false;\r\n    this.ratio_default = 1\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút lưu\r\n   */\r\n  okUnits() {\r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Barcode already exists\"))\r\n    }\r\n    else {\r\n      if (this.is_change_to_update) {\r\n        this.dataUnits = this.units.value.filter(item => item.unit != '' &&  typeof(item.price) == 'number'  && typeof(item.price2)  == 'number' && typeof(item.price_import)  == 'number' && item.ratio )\r\n        if (this.unit_main) this.dataUnits.unshift(this.unit_main)\r\n        this.dataUnits.forEach((unit) => {\r\n          if (unit.ratio == this.ratio_default) unit.default = true;\r\n          else unit.default = false;\r\n        });\r\n        setTimeout(() => {\r\n          this.closeUnits.emit(this.dataUnits);\r\n        }, 100);\r\n\r\n      }\r\n      else this.closeUnits.emit(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * đóng component\r\n   */\r\n  close(success?) {\r\n    this.okUnits()\r\n  }\r\n\r\n  changeDefault() {\r\n    this.is_change_to_update = true\r\n  }\r\n  /**\r\n   * tạo barcode tự động tại vị trí position trong mảng đơn vị\r\n   * @example setBarcodeForUnit(1)\r\n   */\r\n  setBarcodeForUnit(position) {\r\n    this.is_change_to_update = true\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(newbarcode)\r\n    if (detailproduct == null) {\r\n      (this.units.at(position) as FormGroup).get('barcode').setValue(newbarcode);\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n    } else {\r\n      document.getElementById('barcodeError' + position).style.display = 'block';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá bán\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPrice(nameClass, position) {\r\n    this.is_change_to_update = true\r\n    let price = this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n    (this.units.at(position) as FormGroup).get('price').patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'))\r\n    this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá bán 2\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPrice2(nameClass, position) {\r\n    this.is_change_to_update = true\r\n    let price = this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n    (this.units.at(position) as FormGroup).get('price2').patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'))\r\n    this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá nhập\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPriceImport(nameClass, position) {\r\n    this.is_change_to_update = true\r\n    let price = this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n    (this.units.at(position) as FormGroup).get('price_import').patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'))\r\n    this.vhAlgorithm.vhnumeral(\"#\" + nameClass);\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá trị ratio của đơn vị\r\n   * @param ratio \r\n   * @param position \r\n   */\r\n  changeUnitsRatio(ratio, position) {\r\n    this.is_change_to_update = true\r\n    let value = parseFloat(ratio);\r\n    // Thực hiện lọc dữ liệu units khác với vị trí nhập hiện tại\r\n    // Và giá trị nhập vào phải khác với bất cứ giá trị Ratio nào trong mảng vừa lọc\r\n    //  Tồn tại mảng có chiều dài thì giá trị đó đã tồn tại\r\n    if (value == 1) {\r\n      document.getElementById('ratioError' + position).style.display = 'block';\r\n    } else {\r\n      const unitsDef: any[] = this.units.value.filter((item, index) => index != position);\r\n      if (unitsDef.length) {\r\n        if (unitsDef.find(item => item.ratio == value)) {\r\n          document.getElementById('ratioError' + position).style.display = 'block';\r\n        } else {\r\n          (this.units.at(position) as FormGroup).get('ratio').setValue((value));\r\n          document.getElementById('ratioError' + position).style.display = 'none';\r\n        }\r\n      } else {\r\n        document.getElementById('ratioError' + position).style.display = 'none';\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode_exist = false;\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @param barcode \r\n   * @param position \r\n   *  \r\n   */\r\n  checkBarcode(barcode, position) {\r\n    this.is_change_to_update = true\r\n    if (barcode.length) {\r\n      if (this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)) {\r\n        this.barcode_exist = true;\r\n        document.getElementById('barcodeError' + position).style.display = 'block';\r\n        return;\r\n      }\r\n      else {\r\n        const unitsNotPosition: any[] = this.units.value.filter((item, index) => index != position)\r\n        if (unitsNotPosition.length) {\r\n          unitsNotPosition.forEach(element => {\r\n            if (element.barcode != barcode) {\r\n              this.barcode_exist = false;\r\n              document.getElementById('barcodeError' + position).style.display = 'none';\r\n              return\r\n            } else {\r\n              this.barcode_exist = true;\r\n              document.getElementById('barcodeError' + position).style.display = 'block';\r\n              return;\r\n            }\r\n          })\r\n        } else {\r\n          this.barcode_exist = false;\r\n          document.getElementById('barcodeError' + position).style.display = 'none';\r\n          return\r\n        }\r\n      }\r\n    } else {\r\n      this.barcode_exist = false;\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      return\r\n    }\r\n  }\r\n\r\n\r\n\r\n  //  kiểm tra đơn vị khi thêm\r\n  checkNameUnit(unit: string, position: number) {\r\n    this.is_change_to_update = true\r\n    if (unit.length) {\r\n      if (unit == this.dataUnit) {\r\n        document.getElementById('unitError' + position).style.display = 'block';\r\n        return;\r\n      } else {\r\n        const unitsNotPosition: any[] = this.units.value.filter((item, index) => index != position)\r\n        if (unitsNotPosition.length) {\r\n          unitsNotPosition.forEach(element => {\r\n            if (element.unit != unit) {\r\n              document.getElementById('unitError' + position).style.display = 'none';\r\n              return\r\n            } else {\r\n              document.getElementById('unitError' + position).style.display = 'block';\r\n              return;\r\n            }\r\n          })\r\n        } else {\r\n          document.getElementById('unitError' + position).style.display = 'none';\r\n          return\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"'90vw'\" nzTitle='{{\"Đơn vị quy đổi\" | translate}}' [nzVisible]=\"showDrawerUnits\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"formUnits\">\r\n            <!-- <div *ngIf=\"units.length == 0\" style=\"text-align:center\">\r\n                <span>{{'No conversion unit' | translate}}</span>\r\n                <button class=\"btn-add\" style=\"margin: auto;\" nz-button nzType=\"default\" (click)=\"addUnits()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                    {{'Create unit' | translate}}\r\n                </button>\r\n            </div> -->\r\n            <ng-container formArrayName=\"units\"  >\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Unit name' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"2\">\r\n                        <div class='label'><b>{{'Conversion ratio' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Selling price' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Selling price' | translate}} 2*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'_price_import' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"3\">\r\n                        <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row ion-text-end\" nzSpan=\"2\">\r\n                        <div class='label'><b>{{'Default' | translate}}</b></div>\r\n                    </div>\r\n                </div>\r\n                <nz-radio-group [(ngModel)]=\"ratio_default\" [ngModelOptions]=\"{standalone: true}\" (ngModelChange)=\"changeDefault()\">\r\n                    <div nz-row [nzGutter]=\"24\" style=\"padding-bottom: 8px\" >\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                            style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ 'Enter unit name'| translate}}\"\r\n                                [value]=\"dataUnit.unit\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ 'Enter conversion ratio'| translate}}\"\r\n                                [value]=\"dataUnit.ratio\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price)\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price2)\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price_import)\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                            <div\r\n                                style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                <input nz-input disabled placeholder=\"{{ 'Enter barcode'| translate}}\"\r\n                                    [value]=\"dataUnit.barcode\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"gutter-row \" nz-col nzSpan=\"1\">\r\n                            <label nz-radio [nzValue]=\"1\"></label>\r\n                        </div>\r\n                    </div>\r\n                    <div *ngFor=\"let unitForm of units.controls; let i = index\">\r\n                        <form nz-row [formGroup]=\"unitForm\" style=\"padding-bottom: 8px\" [nzGutter]=\"24\">\r\n                            <ng-container>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                    <i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteUnits(i)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red); cursor: pointer;font-size: 1rem;\" nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input nz-input formControlName=\"unit\" [id]=\"'unit'+i\" placeholder=\"{{ 'Enter unit name'| translate}}\" #unit (keyup)=\"checkNameUnit(unit.value,i)\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input nz-input [id]=\"'ratio_units'+i\" #unitRatio (keyup)=\"changeUnitsRatio(unitRatio.value, i)\" [min]=\"2\" nz-input formControlName=\"ratio\" type=\"number\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'price_units'+i\" (blur)=\"changeUnitsPrice('price_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'price2_units'+i\" (blur)=\"changeUnitsPrice2('price2_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price2\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'priceImport_units'+i\" (blur)=\"changeUnitsPriceImport('priceImport_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price_import\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                    <div style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                        <input nz-input formControlName=\"barcode\" (blur)=\"checkBarcode(unitForm.value.barcode,i)\"  placeholder=\"{{ 'Enter barcode'| translate}}\" />\r\n                                        <i style=\"padding-left: 8px; cursor: pointer;font-size: 1rem;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"gutter-row \" nz-col nzSpan=\"1\">\r\n                                    <label nz-radio [nzValue]=\"unitForm.value.ratio\"></label>\r\n                                </div>\r\n                            </ng-container>\r\n                            <ng-container>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <div class=\"validation-errors\" [id]=\"'unitError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Unit already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <div class=\"validation-errors\" [id]=\"'ratioError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Ratio already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                    <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row \" nz-col nzSpan=\"1\"></div>\r\n                            </ng-container>\r\n                        </form>\r\n                    </div>\r\n\r\n                </nz-radio-group>\r\n                <div style=\"padding-top: 8px; float: right;\">\r\n                    <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addUnits()\">\r\n                      <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                      {{'Add unit' | translate}}\r\n                  </button>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddCustomer>\r\n        <div class=\"footerAddCustomer\" style=\"float: right\">\r\n            <!-- <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button> -->\r\n            <button nz-button (click)=\"okUnits()\">{{\"Close\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport {\r\n  FormArray,\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-units-list',\r\n  templateUrl: './units-list.component.html',\r\n  styleUrls: ['./units-list.component.scss'],\r\n})\r\nexport class UnitsListComponent implements OnInit {\r\n  unit_main: any;\r\n  @Input('showDrawerUnits') showDrawerUnits: boolean = false;\r\n  @Input('barcodes') barcodes: any = [];\r\n  @Input('dataUnit') dataUnit: any;\r\n  @Input('dataUnits') dataUnits: any[];\r\n  @Output('closeUnits') closeUnits = new EventEmitter<any>();\r\n  ratio_default: number = 1;\r\n  public formUnits = this.formBuilderfb.group({\r\n    // Form thêm đơn vị quy đổi\r\n    units: this.formBuilderfb.array([], Validators.required),\r\n  });\r\n  public unitForm: FormGroup;\r\n  ratioError = true;\r\n  disabledButton = true;\r\n  management_product_price2: boolean =\r\n    this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch')\r\n      .management_product_price2;\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private formBuilderfb: FormBuilder,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.initAddUnitsForm(this.dataUnits);\r\n    this.ratio_default = this.dataUnits.find((e) => e.default)\r\n      ? this.dataUnits.find((e) => e.default).ratio\r\n      : 1;\r\n  }\r\n  ngAfterViewInit() {\r\n    for (let i = 0; i < this.units.value.length; i++) {\r\n      //  đơn vị quy đổi\r\n      if (this.units.value[i].ratio != 1) {\r\n        this.vhAlgorithm.vhnumeral('#' + 'price_units' + i);\r\n        if (this.management_product_price2)\r\n          this.vhAlgorithm.vhnumeral('#' + 'price2_units' + i);\r\n        this.vhAlgorithm.vhnumeral('#' + 'priceImport_units' + i);\r\n      }\r\n    }\r\n  }\r\n\r\n  initAddUnitsForm(data) {\r\n    if (data.length > 0) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        //  đơn vị quy đổi\r\n        this.addUnits(data[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  // get mãng đơn vị quy đổi\r\n  get units() {\r\n    return this.formUnits.controls['units'] as FormArray;\r\n  }\r\n  // thêm đơn vị quy đổi\r\n  addUnits(unit?) {\r\n    this.unitForm = this.formBuilderfb.group({\r\n      unit: new FormControl(\r\n        unit ? unit.unit : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price: new FormControl(\r\n        unit ? unit.price : 0,\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price2: new FormControl(\r\n        unit ? unit.price2 : 0,\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price_import: new FormControl(\r\n        unit ? unit.price_import : 0,\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      barcode: new FormControl(unit ? unit.barcode : ''),\r\n      ratio: new FormControl(unit ? unit.ratio : '', [Validators.required]),\r\n      default: new FormControl(unit ? unit.default : false, [\r\n        Validators.required,\r\n      ]),\r\n    });\r\n    this.units.push(this.unitForm);\r\n  }\r\n  // xóa đơn vị quy đổi\r\n  deleteUnits(index: number) {\r\n    this.units.removeAt(index);\r\n    this.barcode_exist = false;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút lưu\r\n   */\r\n  okUnits() {\r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Barcode already exists')\r\n      );\r\n    } else {\r\n      this.dataUnits = this.units.value.filter(\r\n        (item) =>\r\n          item.unit != '' &&\r\n          typeof item.price == 'number' &&\r\n          typeof item.price2 == 'number' &&\r\n          typeof item.price_import == 'number' &&\r\n          item.ratio\r\n      );\r\n      this.closeUnits.emit(this.dataUnits);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * đóng component\r\n   */\r\n  close(success?) {\r\n    this.closeUnits.emit(success ? true : false);\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động tại vị trí position trong mảng đơn vị\r\n   * @example setBarcodeForUnit(1)\r\n   */\r\n  setBarcodeForUnit(position) {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    let detailproduct =\r\n      this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(newbarcode);\r\n    if (detailproduct == null) {\r\n      (this.units.at(position) as FormGroup)\r\n        .get('barcode')\r\n        .setValue(newbarcode);\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n    } else {\r\n      document.getElementById('barcodeError' + position).style.display =\r\n        'block';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá bán\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPrice(nameClass, position) {\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá bán 2\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPrice2(nameClass, position) {\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price2')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk thay đổi giá nhập\r\n   * @param nameClass \r\n   * @param position \r\n   */\r\n  changeUnitsPriceImport(nameClass, position) {\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price_import')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n  /** \r\n   * bắt sk thay đổi unit default\r\n   * @example this.changeDefault()\r\n   */\r\n  changeDefault() {\r\n    this.units.value.forEach((unit) => {\r\n      if (unit.ratio == this.ratio_default) unit.default = true;\r\n      else unit.default = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi giá trị ratio của đơn vị\r\n   * @param ratio \r\n   * @param position \r\n   */\r\n  changeUnitsRatio(ratio, position) {\r\n    let value = parseFloat(ratio);\r\n    // Thực hiện lọc dữ liệu units khác với vị trí nhập hiện tại\r\n    // Và giá trị nhập vào phải khác với bất cứ giá trị Ratio nào trong mảng vừa lọc\r\n    //  Tồn tại mảng có chiều dài thì giá trị đó đã tồn tại\r\n    if (value == 1) {\r\n      document.getElementById('ratioError' + position).style.display = 'block';\r\n    } else {\r\n      const unitsDef: any[] = this.units.value.filter(\r\n        (item, index) => index != position\r\n      );\r\n      if (unitsDef.length) {\r\n        if (unitsDef.find((item) => item.ratio == value)) {\r\n          document.getElementById('ratioError' + position).style.display =\r\n            'block';\r\n        } else {\r\n          (this.units.at(position) as FormGroup).get('ratio').setValue(value);\r\n          document.getElementById('ratioError' + position).style.display =\r\n            'none';\r\n        }\r\n      } else {\r\n        document.getElementById('ratioError' + position).style.display = 'none';\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode_exist = false;\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @param barcode \r\n   * @param position \r\n   *  \r\n   */\r\n  checkBarcode(barcode, position) {\r\n    if (barcode.length) {\r\n      if (this.barcodes.find((item) => item == barcode)) {\r\n        this.barcode_exist = false;\r\n        document.getElementById('barcodeError' + position).style.display =\r\n          'block';\r\n        return;\r\n      } else {\r\n        if (this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode)) {\r\n          this.barcode_exist = true;\r\n          document.getElementById('barcodeError' + position).style.display =\r\n            'block';\r\n          return;\r\n        } else {\r\n          if (barcode == this.dataUnit.barcode) {\r\n            this.barcode_exist = true;\r\n            document.getElementById('barcodeError' + position).style.display =\r\n              'block';\r\n            return;\r\n          } else {\r\n            const unitsNotPosition: any[] = this.units.value.filter(\r\n              (item, index) => index != position\r\n            );\r\n            if (unitsNotPosition.length) {\r\n              unitsNotPosition.forEach((element) => {\r\n                if (element.barcode != barcode) {\r\n                  this.barcode_exist = false;\r\n                  document.getElementById(\r\n                    'barcodeError' + position\r\n                  ).style.display = 'none';\r\n                  return;\r\n                } else {\r\n                  this.barcode_exist = true;\r\n                  document.getElementById(\r\n                    'barcodeError' + position\r\n                  ).style.display = 'block';\r\n                  return;\r\n                }\r\n              });\r\n            } else {\r\n              this.barcode_exist = false;\r\n              document.getElementById('barcodeError' + position).style.display =\r\n                'none';\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.barcode_exist = false;\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      return;\r\n    }\r\n  }\r\n\r\n  //  kiểm tra đơn vị khi thêm\r\n  checkNameUnit(unit: string, position: number) {\r\n    if (unit.length) {\r\n      if (unit == this.dataUnit.unit) {\r\n        document.getElementById('unitError' + position).style.display = 'block';\r\n        return;\r\n      } else {\r\n        const unitsNotPosition: any[] = this.units.value.filter(\r\n          (item, index) => index != position\r\n        );\r\n        if (unitsNotPosition.length) {\r\n          unitsNotPosition.forEach((element) => {\r\n            if (element.unit != unit) {\r\n              document.getElementById('unitError' + position).style.display =\r\n                'none';\r\n              return;\r\n            } else {\r\n              document.getElementById('unitError' + position).style.display =\r\n                'block';\r\n              return;\r\n            }\r\n          });\r\n        } else {\r\n          document.getElementById('unitError' + position).style.display =\r\n            'none';\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"'90vw'\" nzTitle='{{\"Đơn vị quy đổi\" | translate}}'\r\n  [nzVisible]=\"showDrawerUnits\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n  <ng-container *nzDrawerContent>\r\n    <form nz-form [formGroup]=\"formUnits\">\r\n      <ng-container formArrayName=\"units\">\r\n        <div nz-row [nzGutter]=\"24\">\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"3\">\r\n            <div class='label'><b>{{'Unit name' | translate}}*</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"2\">\r\n            <div class='label'><b>{{'Conversion ratio' | translate}}*</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n            <div class='label'><b>{{'Selling price' | translate}}*</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"4\" *ngIf=\"management_product_price2\">\r\n            <div class='label'><b>{{'Selling price' | translate}} 2*</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n            <div class='label'><b>{{'_price_import' | translate}}*</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row\" nzSpan=\"3\">\r\n            <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n          </div>\r\n          <div nz-col class=\"gutter-row ion-text-end\" nzSpan=\"3\">\r\n            <div class='label'><b>{{'Default' | translate}}</b></div>\r\n          </div>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"ratio_default\" [ngModelOptions]=\"{standalone: true}\"\r\n          (ngModelChange)=\"changeDefault()\">\r\n          <div nz-row [nzGutter]=\"24\" style=\"padding-bottom: 8px\">\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n              style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"3\" style=\"padding-left: 0px; padding-right: 0px\">\r\n              <input nz-input disabled placeholder=\"{{ 'Enter unit name'| translate}}\" [value]=\"dataUnit.unit\" />\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n              <input nz-input disabled placeholder=\"{{ 'Enter conversion ratio'| translate}}\" [value]=\"dataUnit.ratio\" />\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n              <input nz-input disabled placeholder=\"{{ vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price)\" />\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\"\r\n              *ngIf=\"management_product_price2\">\r\n              <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price2)\" />\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n              <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price_import)\" />\r\n            </div>\r\n            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n              <div\r\n                style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                <input nz-input disabled placeholder=\"{{ 'Enter barcode'| translate}}\" [value]=\"dataUnit.barcode\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"gutter-row center-all-content\" nz-col nzSpan=\"2\">\r\n              <label nz-radio [nzValue]=\"1\"></label>\r\n            </div>\r\n          </div>\r\n          <div *ngFor=\"let unitForm of units.controls; let i = index\">\r\n            <form nz-row [formGroup]=\"unitForm\" style=\"padding-bottom: 8px\" [nzGutter]=\"24\">\r\n              <ng-container>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                  style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                  <!-- <i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteUnits(i)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red); cursor: pointer;\" nz-icon nzType=\"close\" nzTheme=\"outline\"></i> -->\r\n                  <ion-icon name=\"close-outline\" (click)=\"$event.stopPropagation()\" nz-popconfirm\r\n                    nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteUnits(i)\"\r\n                    nzPopconfirmPlacement=\"topLeft\"\r\n                    style=\"color: var(--ion-color-vh-red); cursor: pointer;width: 24px; height: 24px;\">\r\n                  </ion-icon>\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"3\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <input nz-input formControlName=\"unit\" [id]=\"'unit'+i\" placeholder=\"{{ 'Enter unit name'| translate}}\"\r\n                    #unit (keyup)=\"checkNameUnit(unit.value,i)\" />\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <input nz-input [id]=\"'ratio_units'+i\" #unitRatio (keyup)=\"changeUnitsRatio(unitRatio.value, i)\"\r\n                    [min]=\"2\" nz-input formControlName=\"ratio\" type=\"number\" />\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <input [id]=\"'price_units'+i\" (blur)=\"changeUnitsPrice('price_units'+i,i)\" [min]=\"0\" nz-input\r\n                    formControlName=\"price\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\"\r\n                  *ngIf=\"management_product_price2\">\r\n                  <input [id]=\"'price2_units'+i\" (blur)=\"changeUnitsPrice2('price2_units'+i,i)\" [min]=\"0\" nz-input\r\n                    formControlName=\"price2\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <input [id]=\"'priceImport_units'+i\" (blur)=\"changeUnitsPriceImport('priceImport_units'+i,i)\" [min]=\"0\"\r\n                    nz-input formControlName=\"price_import\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                  <div\r\n                    style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                    <input nz-input formControlName=\"barcode\" placeholder=\"{{ 'Enter barcode'| translate}}\"\r\n                      (blur)=\"checkBarcode(unitForm.value.barcode,i)\" />\r\n                    <i style=\"padding-left: 8px; cursor: pointer;font-size: 1rem;\" nz-icon nzType=\"reload\"\r\n                      nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip\r\n                      nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                      nzTooltipPlacement=\"bottom\"></i>\r\n                  </div>\r\n                </div>\r\n                <div class=\"gutter-row center-all-content\" nz-col nzSpan=\"2\">\r\n                  <label nz-radio [nzValue]=\"unitForm.value.ratio\"></label>\r\n                </div>\r\n              </ng-container>\r\n              <!-- <br> -->\r\n              <ng-container>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                  style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"3\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <div class=\"validation-errors\" [id]=\"'unitError'+i\">\r\n                    <ng-container>\r\n                      <div class=\"error-message\">\r\n                        <ion-text color=\"vh-red\">{{'Unit already exists'|translate}}\r\n                        </ion-text>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                  <div class=\"validation-errors\" [id]=\"'ratioError'+i\">\r\n                    <ng-container>\r\n                      <div class=\"error-message\">\r\n                        <ion-text color=\"vh-red\">{{'Ratio already exists'|translate}}\r\n                        </ion-text>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                </div>\r\n                <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                  <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                    <ng-container>\r\n                      <div class=\"error-message\">\r\n                        <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                        </ion-text>\r\n                      </div>\r\n                    </ng-container>\r\n                  </div>\r\n                </div>\r\n                <div class=\"gutter-row \" nz-col nzSpan=\"2\"></div>\r\n              </ng-container>\r\n            </form>\r\n          </div>\r\n        </nz-radio-group>\r\n        <div style=\"padding-top: 8px; float: right;\">\r\n          <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addUnits()\">\r\n            <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n            {{'Add unit' | translate}}\r\n          </button>\r\n        </div>\r\n      </ng-container>\r\n\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #footerAddCustomer>\r\n    <div class=\"footerAddCustomer\" style=\"float: right\">\r\n      <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n      <button nz-button (click)=\"okUnits()\">{{(units.length > 0 ? 'Lưu' : 'Ok') | translate}}</button>\r\n    </div>\r\n  </ng-template>\r\n</nz-drawer>\r\n"],"names":["FormGroup","FormControl","Validators","FormArray","VhType","i0","CreateDataProductsComponent","constructor","vhQueryCafe","vhAlgorithm","vhComponent","router","languageService","nzModalService","platform","vhQuery","translate","required","pattern","syncData","localProduct","getlocalProducts","filter","item","type","localCategory","getlocalCategorys","initForm","data","index","units","form","manylot","_a","toString","toLowerCase","manysize","id","name","subname","category","unit","ratio","brand","price_import","VALIDATOR_PRICE","price","price2","barcode","_b","CustomValidators","barcodeValidator","formData","warning_number","Number","item_code","tax","get","_c","setValidators","unitNameValidator","_d","disable","_e","ratioValidator","addControl","_f","setValue","removeControl","_g","openFile","document","getElementById","click","openXLSXFile","events","file_import_is_manysize","target","files","nameFile","slice","lastIndexOf","importXLSX","then","length","alertMessage","showLoading","productMap","Map","forEach","productName","key","has","set","existingForm","newUnit","addUnitForm","push","Array","from","values","console","log","hideLoading","value","catch","err","parseFloat","trim","exportXLSXFile","XLSXData","row","Object","unitIndex","unitRow","exportXLSX","status","downloadSampleFile","is","urlEn","urlVI","appLang","localStorage","getItem","window","open","downloadSampleFileSub","checkForm","i","invalid","createData","alertConfirm","res","createCategoriesAndProduct","createCategoriesAndSubProduct","dataCategory","Set","map","createdCategory","some","cate","changeAlias","categories","addCategorys","concat","Error","dataProduct","find","img","parseInt","id_category","_id","INGREDIENT","delete_hidden","default","batchSize","addedProducts","batch","promises","product","addProducts","results","asyncPromiseAll","Math","floor","products","error","showLog","showToast","pro","subproduct","e","subs","sub","sub_data","selling","addProductAndSubsProduct_Cafe","goBack","dataSuccess","createdError","phone","nzTitle","nzContent","navigate","selectors","decls","vars","consts","template","ctx","control","barcodeCounts","allControls","controls","ctrl","ctrlBarcode","barcodeExistsInDB","getlocalDetailProduct_byBarcode_Cafe","setErrors","errors","barcodeExists","hasError","existingErrors","keys","currentForm","unitCounts","unitNameValue","unitNameExists","ratioCounts","ratioValue","ratioExists"],"sourceRoot":"webpack:///"}