{"version":3,"file":"src_app_cafe_desktop_menu_management_invoice_order-invoice_edit_edit_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/canLeavePage.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/add-customer/add-customer.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/add-customer/add-customer.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/add-customer/add-customer.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill-detail1/bill-detail1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill-detail1/bill-detail1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill-detail1/bill-detail1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill1/bill1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill1/bill1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/bill1/bill1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer-profile/customer-profile.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer-profile/customer-profile.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer-profile/customer-profile.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer1/customer1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer1/customer1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/customer1/customer1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/info-bill1/info-bill1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/info-bill1/info-bill1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/info-bill1/info-bill1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/payment-button1/payment-button1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/payment-button1/payment-button1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/payment-button1/payment-button1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/product-wishlist1/product-wishlist1.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/product-wishlist1/product-wishlist1.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/product-wishlist1/product-wishlist1.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/retail-info/retail-info.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/retail-info/retail-info.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-combo/search-combo.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-combo/search-combo.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-combo/search-combo.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-product/search-product.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-product/search-product.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-product/search-product.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-service/search-service.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-service/search-service.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-service/search-service.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-topping/search-topping.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-topping/search-topping.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/components/search-topping/search-topping.module.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/edit.component.ts","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/edit.component.html","./src/app/cafe/desktop/menu/management/invoice/order-invoice/edit/edit.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, RouterStateSnapshot, CanDeactivate, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nexport interface CheckDeactivate {\r\n    checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree;\r\n}\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class CanLeavePage implements CanDeactivate<CheckDeactivate> {\r\n    canDeactivate(component: CheckDeactivate, currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n        return component.checkDeactivate(currentRoute, currentState, nextState);\r\n    }\r\n}","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-add-customer',\r\n  templateUrl: './add-customer.component.html',\r\n  styleUrls: ['./add-customer.component.scss']\r\n})\r\nexport class AddCustomerComponent implements OnInit {\r\n  @Input(\"showDrawerAddCustomer\") showDrawerAddCustomer: boolean = false;\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n  createStatus: boolean = false\r\n  addCustomerForm: FormGroup;\r\n  selectedValue: any;\r\n  \r\n\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private functionService: FunctionService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initAddCustomerForm()\r\n  }\r\n  \r\n\r\n\r\n  close(success = false) {\r\n    if (!this.createStatus)\r\n      this.closeAddCustomer.emit(success);\r\n  }\r\n\r\n\r\n\r\n  initAddCustomerForm() {\r\n    this.addCustomerForm = new FormGroup({\r\n      img: new FormControl(null),\r\n      name: new FormControl(null, Validators.compose([Validators.required])),\r\n      email: new FormControl(null, Validators.compose([Validators.email])),\r\n      gender: new FormControl(null),\r\n      datebirth: new FormControl(null),\r\n      phone: new FormControl(null, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.countryCode),\r\n      ]),\r\n      address: new FormControl(null),\r\n      country: new FormControl(null),\r\n      province: new FormControl(null),\r\n      district: new FormControl(null),\r\n      note: new FormControl(null),\r\n      type: new FormControl(1),\r\n      time_for_payment: new FormControl(0),\r\n      debt_enable: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      isBusiness: new FormControl(false),\r\n      taxcode: new FormControl(null),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  addCustomer() {\r\n    this.createStatus = true\r\n    let customer: any = { ...this.addCustomerForm.value };\r\n\r\n    const phoneNumberValue = customer.phone;\r\n    customer.countryCode = this.countryCode;\r\n    customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n    customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n\r\n    customer.date = (new Date()).toISOString();\r\n\r\n    if(customer.isBusiness) {\r\n      delete customer.gender;\r\n      delete customer.datebirth;\r\n    }\r\n    else {\r\n       delete customer.taxcode;\r\n    }\r\n\r\n    this.vhQueryCafe.addCustomer(customer)\r\n      .then((res: any) => {\r\n        if(res.vcode == 0) {\r\n          setTimeout(() => {\r\n            this.createStatus = false\r\n            this.vhComponent.showToast(1500, `${this.lang.translate(\"Customer\")} ${customer.name} ${this.lang.translate(\"has been added successfully\")}`, \"success-toast\");\r\n            this.close(true);\r\n          }, 500)\r\n        }\r\n        else if(res.vcode == 1) {\r\n          //This phone number is already in use with another customer\r\n          this.createStatus = false\r\n          this.isExitsPhone = true;\r\n          this.vhComponent.showToast(1500, this.lang.translate(\"This phone number is already in use with another customer\"), 'alert-toast');\r\n        }\r\n      }, error => {\r\n        this.createStatus = false\r\n        this.vhComponent.showToast(1500, this.lang.translate(\"An error occurred while adding customer. Please try again\"), \"alert-toast\")\r\n      });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Loại khách hàng\r\n   */\r\n  changeBusiness(event) {\r\n    // taxcode required khi isBusiness = true\r\n    if (event) {\r\n      this.addCustomerForm.get('taxcode')?.setValidators([Validators.required]);\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    } \r\n    else {\r\n      this.addCustomerForm.get('taxcode')?.clearValidators();\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /** Kiểm tra số điện thoại đã tồn tại ha chưa để hiển thị thông báo */\r\n  isExitsPhone: boolean = false;\r\n\r\n  /** Mã quốc gia */\r\n  countryCode: string = this.functionService.defaultCountryCode;\r\n  \r\n  /** Calling code */\r\n  callingCode: string = this.functionService.defaultCallingCode;\r\n  \r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chọn mã quốc gia\r\n   */\r\n  openSearchCountryCode() {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.addCustomerForm.value.phone, this.countryCode as CountryCode);\r\n      this.addCustomerForm.get('phone')?.markAsTouched();\r\n      this.addCustomerForm.get('phone')?.markAsDirty();\r\n      this.addCustomerForm.get('phone')?.updateValueAndValidity();\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   */\r\n  formatPhoneNumber(event: Event): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this.addCustomerForm.get('phone')?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"false\" [nzWidth]=\"400\" nzTitle='{{\"Add customer\" | translate}}'\r\n  [nzVisible]=\"showDrawerAddCustomer\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n  <ng-container *nzDrawerContent>\r\n    <form nz-form [formGroup]=\"addCustomerForm\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer name' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n            <nz-input-group>\r\n              <input formControlName=\"name\" nz-input placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n              <ng-template #combineTplName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Customer name is required' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n            <nz-input-group>\r\n              <div (click)=\"openSearchCountryCode()\" class=\"calling-code\">\r\n                <span>+{{callingCode}}</span>\r\n                <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n              </div>\r\n              <input formControlName=\"phone\"\r\n                (input)=\"formatPhoneNumber($event)\"\r\n                [value]=\"formattedPhone\"\r\n                [placeholder]=\"'Enter customer phone' | translate\" type=\"tel\" nz-input required />\r\n              <ng-template #combineTplPhone let-control>\r\n                <ng-container *ngIf=\"control.hasError('invalidPhone')\">{{'_Invalid phone number' | translate}}</ng-container>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' | translate}}</ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n            <div *ngIf=\"isExitsPhone\"\r\n              class=\"ng-tns-c300-27 ant-form-item-explain ant-form-item-explain-error ng-star-inserted\"\r\n              ng-reflect-ng-class=\"ant-form-item-explain,ant-form\">\r\n              <div class=\"ng-tns-c300-27 ng-trigger ng-trigger-helpMotion\">\r\n                {{'Phone number already exists' | translate}}\r\n              </div>\r\n            </div>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Email' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control nzErrorTip=\"{{'Email is not correct' | translate}}\">\r\n            <nz-input-group>\r\n              <input type=\"email\" formControlName=\"email\" nz-input\r\n                placeholder=\"{{'Enter customer mail' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n\r\n      <!-- Loại khách hàng -->\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer type' | translate}}</b></div>\r\n        <nz-select nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select customer type' | translate\"\r\n          formControlName=\"isBusiness\"\r\n          (ngModelChange)=\"changeBusiness($event)\">\r\n          <nz-option [nzLabel]=\"'Individual' | translate\" [nzValue]=\"false\"></nz-option>\r\n          <nz-option [nzLabel]=\"'Business/Business household' | translate\" [nzValue]=\"true\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <!-- Mã số thuế -->\r\n      <ng-container *ngIf=\"addCustomerForm.value.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div><b class='label'>{{'Tax code' | translate}}</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"taxcode\">\r\n              <nz-input-group>\r\n                <input formControlName=\"taxcode\" nz-input [placeholder]=\"'Enter tax code' | translate\" />\r\n                <ng-template #taxcode let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Tax code is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <div nz-col nzSpan=\"24\" *ngIf=\"!addCustomerForm.value.isBusiness\">\r\n        <div nz-row [nzGutter]=\"16\">\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n            <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"{{'Select gender' | translate}}\"\r\n              [(ngModel)]=\"selectedValue\" formControlName=\"gender\">\r\n              <nz-option nzLabel=\"{{'Female'|translate}}\" nzValue=\"Female\"></nz-option>\r\n              <nz-option nzLabel=\"{{'Male'|translate}}\" nzValue=\"Male\"></nz-option>\r\n            </nz-select>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n            <nz-date-picker formControlName=\"datebirth\" nzPlaceHolder=\"{{'Select date of birth' | translate}}\">\r\n            </nz-date-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Address' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"address\" nz-input placeholder=\"{{'Enter address' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Country' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"country\" nz-input placeholder=\"{{'Enter country' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Province' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"province\" nz-input placeholder=\"{{'Enter province' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'District' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"district\" nz-input placeholder=\"{{'Enter district' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Note' | translate}}</b></div>\r\n        <textarea nz-input placeholder=\"{{'Enter note' | translate}}\" [nzAutosize]=\"{ minRows: 3, maxRows: 5 }\"\r\n          formControlName=\"note\"></textarea>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n        <div></div>\r\n        <label nz-checkbox formControlName=\"debt_enable\">{{'Debit permission' | translate}}</label>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #footerAddCustomer>\r\n    <div class=\"footerAddCustomer\" style=\"float: right\">\r\n      <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" |\r\n        translate}}</button>\r\n      <button nz-button (click)=\"addCustomer()\" [disabled]=\"addCustomerForm.invalid\" [nzLoading]=\"createStatus\"\r\n        [ngStyle]=\"{opacity: addCustomerForm.invalid ? 0.5 : 1}\">{{\"Add\" | translate}}</button>\r\n    </div>\r\n  </ng-template>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddCustomerComponent } from './add-customer.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddCustomerComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    AddCustomerComponent\r\n  ]\r\n})\r\nexport class AddCustomerModule { }\r\n","import { Component, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-bill-detail1',\r\n  templateUrl: './bill-detail1.component.html',\r\n  styleUrls: ['./bill-detail1.component.scss']\r\n})\r\nexport class BillDetail1Component implements OnInit {\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F3\", \"F4\", \"F5\", \"F6\"].includes(event.key)) {\r\n      this.closeSearchProduct(false)\r\n      this.closeSearchService(false)\r\n      this.closeSearchSideDishes(false)\r\n      this.closeSearchCombos(false)\r\n\r\n      switch (event.key) {\r\n        case \"F3\": this.openSearchService(); break;\r\n        case \"F4\": this.openSearchProduct(); break;\r\n        case \"F5\": this.openSearchSideDishes(); break;\r\n        case \"F6\": this.openSearchCombos(); break;\r\n      }\r\n      event.preventDefault(); event.stopPropagation()\r\n    }\r\n  }\r\n  @Input() invoices: VhOrderInvoices\r\n  @Input() tableInfo: any;\r\n  @Output() deletePromotion: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGift: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showProductGiftType7: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() showModalChangePriceType: EventEmitter<boolean> = new EventEmitter()\r\n  @Output() checkPromotion: EventEmitter<boolean> = new EventEmitter()\r\n  showDrawerProductList: boolean = false\r\n  showDrawerServiceList: boolean = false\r\n  showDrawerSideDishesList: boolean = false\r\n  showDrawerCombosList: boolean = false\r\n  showDrawerEdit: boolean = false\r\n  display_promotion_selling_price: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  warning_lot_expried: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried\r\n  public printKitchen: any = {\r\n    status: false,\r\n    title: 'Add dishes',\r\n    value: []\r\n  };\r\n  wishList: boolean = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth:VhAuth,\r\n    private vhQueryCafe:VhQueryCafe,\r\n    private vhComponent:VhComponent,\r\n    private lang:LanguageService,\r\n    private nzModalService:NzModalService,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.wishList =this.vhAuth.localStorageGET(\"show_best_selling\") ? this.vhAuth.localStorageGET(\"show_best_selling\"): false;\r\n    if(this.invoices.getInvoiceDetail().length && this.productService.isContainServiceTime(this.invoices)) {\r\n      this.endTime = new Date();\r\n      // set lại price\r\n      this.invoices.getInvoiceDetail()?.forEach((item, index) => {\r\n        if (item.ptype === VhType.SERVICETIME && !item.is_paused) {\r\n          const newItem = { ...item, time_end_order: this.endTime };\r\n          const serviceTimePrice: any = this.productService.calculateServiceTimePrice(newItem, this.endTime, this.invoices.getPriceType());\r\n          newItem.price = serviceTimePrice.total_price;\r\n          newItem.price_origin = serviceTimePrice.total_price;\r\n          this.invoices.getInvoiceDetail()[index] = {...newItem};\r\n        }\r\n      });\r\n      // Tính lại total cho bill\r\n      this.invoices.setSubTotal();\r\n    }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  myTrackByNameFunction(element: any, index: any) {\r\n    return element.name ? element.name : index\r\n  }\r\n\r\n  openSearchProduct() {\r\n    this.showDrawerProductList = true\r\n  }\r\n  closeSearchProduct(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerProductList = false\r\n  }\r\n  openSearchService() {\r\n    this.showDrawerServiceList = true\r\n  }\r\n  closeSearchService(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerServiceList = false\r\n  }\r\n  openSearchSideDishes() {\r\n    this.showDrawerSideDishesList = true\r\n  }\r\n  closeSearchSideDishes(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerSideDishesList = false\r\n  }\r\n  openSearchCombos() {\r\n    this.showDrawerCombosList = true\r\n  }\r\n  closeSearchCombos(ev) {\r\n    if (ev) this.createBillDetail(ev)\r\n    else this.showDrawerCombosList = false\r\n  }\r\n\r\n  createBillDetail(productValue: any) {\r\n    console.log(productValue);\r\n    \r\n    // món không có sub\r\n    if (productValue.quantity) {\r\n      let name = `${productValue.name}`\r\n      let detail: any = this.invoices.getCreateItemDetail(productValue,\r\n        productValue.id_subproduct ?\r\n          {\r\n            _id: productValue.id_subproduct,\r\n            quantity: productValue.quantity,\r\n            price: productValue.price, price_origin: productValue.price_origin,\r\n            note: productValue.note\r\n          } : null\r\n        , true)\r\n      this.invoices.addInvoiceDetail({ ...productValue,id_product: productValue._id, name })\r\n      \r\n    }\r\n  }\r\n  /**Cập nhật thông tin món ăn */\r\n  saveEdit() {\r\n    if(this.choiceFood.ptype === VhType.SERVICETIME) {\r\n      if (!this.choiceFood.is_paused) {\r\n        this.choiceFood.time_end_order = new Date();\r\n      }\r\n      const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n      this.choiceFood.price = serviceTimePrice.total_price;\r\n      this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n      delete this.choiceFood.serviceTimePrice;\r\n    }\r\n    this.showDrawerEdit = false;\r\n\r\n    let index: number = this.invoices.getInvoiceDetail().findIndex(item => item._id == this.choiceFood._id);\r\n\r\n    this.invoices.getInvoiceDetail()[index] = { ...this.choiceFood }\r\n    this.invoices.setSubTotal()\r\n    \r\n    delete this.choiceFood\r\n  }\r\n\r\n  editPrice: any = {}\r\n  choiceFood: any;\r\n  editFood(item: any) {\r\n    this.choiceFood = item\r\n    this.showDrawerEdit = true;\r\n\r\n    // Nếu không phải Dịch vụ thời gian\r\n    if(this.choiceFood.ptype !== VhType.SERVICETIME) {\r\n      // backup\r\n      // cleavejs cho các input\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + item.id_product] = this.vhAlgorithm.vhnumeral(\".price-\" + item.id_product);\r\n        if (this.choiceFood.toppings) {\r\n          this.choiceFood.toppings.forEach(topping => {\r\n            this.editPrice['topping-' + topping.id_product] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping.id_product);\r\n          });\r\n        }\r\n      }, 200);\r\n      return;\r\n    }\r\n\r\n    // Nếu là Dịch vụ thời gian\r\n    this.productService.updateServiceTimePrice(this.choiceFood, this.invoices.getPriceType());\r\n    if(!this.choiceFood.is_paused) {\r\n      this.invoices.setSubTotal();\r\n    }\r\n    console.log(this.choiceFood);\r\n  }\r\n\r\n\r\n\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    if (item.ptype) {\r\n      let price = this.editPrice['price-' + item.id_product].getRawValue()\r\n      this.choiceFood.price = price ? parseFloat(price) : 0\r\n    } else {\r\n      let price = this.editPrice['topping-' + item.id_product].getRawValue()\r\n      let index = this.choiceFood.toppings.findIndex(element => element.id_product == item.id_product)\r\n      if (index != -1) this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0\r\n    }\r\n  }\r\n  /**Xóa món ăn */\r\n  removeFood(food: any) {\r\n    this.invoices.removeInvoiceDetail(food._id)\r\n    \r\n  }\r\n\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  searchLot(value) {\r\n    this.choiceFood.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.choiceFood = data\r\n    this.list_search_lot = this.choiceFood.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.choiceFood.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.lang.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.choiceFood.lots = this.list_search_lot;\r\n            this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.choiceFood.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.choiceFood.lots = this.list_search_lot;\r\n        this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.choiceFood.lots = this.list_search_lot;\r\n      this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { id_lotproduct: this.choiceFood.id_lotproduct })\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.choiceFood.lots = this.list_search_lot\r\n  }\r\n\r\n\r\n\r\n  /* -------------------------------------------------- MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------- */\r\n  /** Có hiện modal Chỉnh sửa thời gian sử dụng hay không */\r\n  isShowModalEditUsedTime: boolean = false;\r\n  /** Biến tạm lưu thời gian bắt đầu (time_start_order) */\r\n  tempStartTime: any;\r\n  /** Biến tạm lưu thời gian kết thúc (time_end_order) */\r\n  tempEndTime: any;\r\n  /** Thời gian mở bill, dùng để tính thời gian cho Dịch vụ thời gian */\r\n  endTime: Date = new Date();\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleOpenEditUsedTime() {\r\n    this.tempStartTime = this.choiceFood.time_start_order;\r\n    if (!(this.tempStartTime instanceof Date)) {\r\n      this.tempStartTime = new Date(this.tempStartTime);\r\n    }\r\n    if(this.choiceFood.is_paused) {\r\n      this.tempEndTime = this.choiceFood.time_end_order;\r\n      if (!(this.tempEndTime instanceof Date)) {\r\n        this.tempEndTime = new Date(this.tempEndTime);\r\n      }\r\n    }\r\n    else {\r\n      this.tempEndTime = null;\r\n    }\r\n    this.isShowModalEditUsedTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn ok trong modal Chỉnh sửa thời gian sử dụng\r\n   */\r\n  handleUpdateUsedTime() {\r\n    // validate start time<= now; end time > start time\r\n    if (this.tempStartTime > new Date()) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The start time must be less than or equal to the current time.'));\r\n      return;\r\n    }\r\n    if (this.tempEndTime && this.tempEndTime <= this.tempStartTime) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate('The end time must be greater than the start time.'));\r\n      return;\r\n    }\r\n\r\n    this.isShowModalEditUsedTime = false;\r\n\r\n    this.choiceFood.time_start_order = this.tempStartTime;\r\n\r\n    const currentTime = new Date();\r\n    if(!this.tempEndTime) {\r\n      this.choiceFood.is_paused = false;\r\n    }\r\n    else {\r\n      // mặt hàng tính giờ sẽ dừng tính giờ ngay tại thời điểm đó\r\n      this.choiceFood.is_paused = true;\r\n    }\r\n\r\n    this.choiceFood.time_end_order = this.tempEndTime ?? currentTime;\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_start_order: this.tempStartTime,\r\n      time_end_order: this.tempEndTime ? this.choiceFood.time_end_order : null,\r\n      is_paused: this.choiceFood.is_paused,\r\n    });\r\n\r\n    // Tính lại giá cho dịch vụ thời gian\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạm ngưng / Tiếp tục tính giờ\r\n   * \r\n   * @param isPause true: tạm ngưng; false: tiếp tục tính giờ\r\n   */\r\n  pauseTime(isPause: boolean) {\r\n    this.choiceFood.time_end_order = new Date();\r\n    this.choiceFood.is_paused = isPause;\r\n\r\n    const serviceTimePrice: any = this.productService.calculateServiceTimePrice(this.choiceFood, this.endTime, this.invoices.getPriceType());\r\n    this.choiceFood.serviceTimePrice = JSON.parse(JSON.stringify(serviceTimePrice));\r\n    this.choiceFood.price = serviceTimePrice.total_price;\r\n    this.choiceFood.price_origin = serviceTimePrice.total_price;\r\n    this.invoices.setSubTotal();\r\n\r\n    this.vhQueryCafe.updateBill_Detail(this.choiceFood._id, { \r\n      time_end_order: isPause ? this.choiceFood.time_end_order : undefined, \r\n      is_paused: isPause ,\r\n      price: this.choiceFood.price,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"layout\" [ngClass]=\"{'layout-1': wishList}\">\r\n    <div class=\"bill-detail\">\r\n\r\n        <!-- Danh sách nút tìm kiếm -->\r\n        <div class=\"btn-list\">\r\n            <!-- <button nz-button nzType=\"default\">\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                {{'Delete' | translate}}\r\n            </button> -->\r\n            <button nz-button nzType=\"default\" (click)=\"openSearchService()\">\r\n                <i nz-icon nzType=\"file-search\" nzTheme=\"outline\"></i>\r\n                {{'Service' | translate}} (F3)\r\n            </button>\r\n            <button nz-button nzType=\"default\" (click)=\"openSearchProduct()\">\r\n                <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                {{'Dishes/beverage' | translate}} (F4)</button>\r\n            <button nz-button nzType=\"default\" (click)=\"openSearchSideDishes()\">\r\n                <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                {{'Side dishes' | translate}} (F5)</button>\r\n            <button nz-button nzType=\"default\" (click)=\"openSearchCombos()\">\r\n                <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                {{'Combos' | translate}} (F6)</button>\r\n        </div>\r\n\r\n        <!-- Danh sách bill detail -->\r\n        <div class=\"bill-detail-area ant-table-body\">\r\n\r\n            <!-- Chưa có dữ liệu -->\r\n            <div *ngIf=\"!invoices.getInvoiceDetail().length\" class=\"no-data\">\r\n                <p>{{'Please select a dishes/beverage' | translate}}</p>\r\n            </div>\r\n\r\n            <!-- Có dữ liệu -->\r\n            <div class=\"bill-detail-area-item\"\r\n                *ngFor=\"let item of invoices.getInvoiceDetail(),index as i; trackBy:myTrackByFunction\">\r\n            <!-- CÓ Chương trình khuyến mãi -->\r\n            <ng-container *ngIf=\"item.id_promotion; else elseTemplate\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"1\" class=\"center-col\">\r\n                        <button nzType=\"text\" nz-popconfirm\r\n                            nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\" [nzLoading]=\"item.deleting\"\r\n                            (nzOnConfirm)=\"deletePromotion.emit(true)\" nzPopconfirmPlacement=\"bottomLeft\" nz-button>\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"cursor: pointer;\"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div nz-col nzSpan=\"23\">\r\n                        <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}\r\n                            <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                *ngIf=\"item.pmtype == 6\" (click)=\"showProductGift.emit(true)\"></i>\r\n                            <i nz-icon nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                *ngIf=\"item.pmtype == 7\" (click)=\"showProductGiftType7.emit(true)\"></i>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <ng-container *ngIf=\"item.pmtype != 6\">\r\n                    <div *ngFor=\"let data of item.products\">\r\n                        <div class=\"bill-detail-area-item-info\">\r\n                            <div class=\"delete-btn\">\r\n                            </div>\r\n                            <div class=\"item-name\">{{data.name}} (Quà tặng) \r\n                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                    <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots,\r\n                                        data.id_lotproduct)}}</div>\r\n                                </ng-container>\r\n                            </div>\r\n                            <div class=\"item-quantity\">x{{data.quantity | number:'1.0-2'}}</div>\r\n                            <div class=\"item-price\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n\r\n                                <!-- Giá khuyến mãi -->\r\n                                <s *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\">\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price_origin)}}\r\n                                </s>\r\n                            </div>\r\n                            <div class=\"item-total\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price * data.quantity)}}\r\n                            </div>\r\n                            <div class=\"edit-btn\">\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-combo\">\r\n                            <div *ngIf=\"data.combos\">\r\n                                <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                    style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                    {{ i == data.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                                    ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                                    + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-side-dishes\"\r\n                            *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                            <div class=\"delete-btn\"></div>\r\n                            <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n                            <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n                            <div class=\"item-price\">\r\n                                <!-- {{vhAlgorithm.vhcurrencyunit(sideDishes.price)}} -->\r\n\r\n                                <!-- Giá khuyến mãi -->\r\n                                <!-- <s *ngIf=\"sideDishes.price < sideDishes.price_origin\">\r\n                                    {{vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)}}\r\n                                </s> -->\r\n                            </div>\r\n                            <!-- <div class=\"item-total\">\r\n                                {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                            </div> -->\r\n                            <div class=\"edit-btn\"></div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-properties\"\r\n                            *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                            <div class=\"delete-btn\"></div>\r\n                            <div class=\"item-name\">{{\"+ \" + properties.name + \" \" + properties.selectedValue}}</div>\r\n                            <div class=\"edit-btn\"></div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n                            <input nz-input [(ngModel)]=\"data.note\" placeholder=\"{{'Note' | translate}}\"\r\n                                nzBorderless   />\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <!-- Danh sách sản phẩm tặng đã chọn -->\r\n                <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                    <ng-container *ngIf=\"data.choose\">\r\n                        <div class=\"bill-detail-area-item-info\">\r\n                            <div class=\"delete-btn\">\r\n\r\n                            </div>\r\n                            <div class=\"item-name\">{{data.name}} (Quà tặng)\r\n                               \r\n                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                    <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots,\r\n                                        data.id_lotproduct)}}</div>\r\n                                </ng-container>\r\n                            </div>\r\n                            <div class=\"item-quantity\">x{{data.quantity | number:'1.0-2'}}</div>\r\n                            <div class=\"item-price\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n\r\n                                <!-- Giá khuyến mãi -->\r\n                                <s *ngIf=\"data.price < data.price_origin && display_promotion_selling_price\">\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price_origin)}}\r\n                                </s>\r\n                            </div>\r\n                            <div class=\"item-total\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price * data.quantity)}}\r\n                            </div>\r\n                            <div class=\"edit-btn\">\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-combo\">\r\n                            <div *ngIf=\"data.combos\">\r\n                                <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                    style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                    {{ i == data.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                                    ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                                    + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-side-dishes\"\r\n                            *ngFor=\"let sideDishes of data.toppings ? data.toppings : []; trackBy:myTrackByFunction\">\r\n                            <div class=\"delete-btn\"></div>\r\n                            <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n                            <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n                            <div class=\"item-price\">\r\n                                <!-- {{vhAlgorithm.vhcurrencyunit(sideDishes.price)}} -->\r\n\r\n                                <!-- Giá khuyến mãi -->\r\n                                <!-- <s *ngIf=\"sideDishes.price < sideDishes.price_origin\">\r\n                                    {{vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)}}\r\n                                </s> -->\r\n                            </div>\r\n                            <!-- <div class=\"item-total\">\r\n                                {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                            </div> -->\r\n                            <div class=\"edit-btn\"></div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-properties\"\r\n                            *ngFor=\"let properties of data.properties ? data.properties : []; trackBy:myTrackByNameFunction\">\r\n                            <div class=\"delete-btn\"></div>\r\n                            <div class=\"item-name\">{{\"+ \" + properties.name + \" \" + properties.selectedValue}}</div>\r\n                            <div class=\"edit-btn\"></div>\r\n                        </div>\r\n                        <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n                            <input nz-input [(ngModel)]=\"data.note\" placeholder=\"{{'Note' | translate}}\"\r\n                                nzBorderless   />\r\n                        </div>\r\n                    </ng-container>\r\n                </div>\r\n            </ng-container>\r\n\r\n            <!-- KHÔNG CÓ Chương trình khuyến mãi -->\r\n            <ng-template #elseTemplate>\r\n                <!-- Hàng Tên -->\r\n                <div class=\"bill-detail-area-item-info\">\r\n                    <!-- Nút xoá -->\r\n                    <div class=\"delete-btn\">\r\n                        <button nz-button nzType=\"text\" [nzLoading]=\"!item._id || item.deleting\" nz-popconfirm\r\n                            nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"removeFood(item)\"\r\n                            nzPopconfirmPlacement=\"right\">\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"item-name\">\r\n                        <!-- Tên -->\r\n                        {{item.name}}  <ng-container *ngIf=\"item.ptype == 3\">\r\n                            ({{getUnit(item.units,item.ratio)}})\r\n                        </ng-container>\r\n                       \r\n                        <!-- Lô -->\r\n                        <ng-container *ngIf=\"item.id_lotproduct\">\r\n                            <div style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots,\r\n                                item.id_lotproduct)}}</div>\r\n                        </ng-container>\r\n                    </div>\r\n                    <!-- Số lượng -->\r\n                    <div class=\"item-quantity\">            \r\n                        <!-- Không phải dịch vụ thời gian thì mới hiện -->\r\n                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                            x{{item.quantity | number:'1.0-2'}}\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"item-price\">\r\n                        <!-- Dịch vụ thời gian không hiện giá -->\r\n                        <ng-container *ngIf=\"item.ptype !== VhType.SERVICETIME\">\r\n                            {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                            <!-- Giá khuyến mãi -->\r\n                            <s *ngIf=\"item.price < item.price_origin && display_promotion_selling_price\">\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price_origin)}}\r\n                            </s>\r\n                        </ng-container>\r\n                    </div>\r\n                    <!-- Thành tiền -->\r\n                    <div class=\"item-total\">\r\n                        {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n                    </div>\r\n                    <!-- Nút edit -->\r\n                    <div class=\"edit-btn\">\r\n                        <button nz-button nzType=\"text\" (click)=\"editFood(item)\">\r\n                            <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Combo -->\r\n                <div class=\"bill-detail-area-item-combo\">\r\n                    <div *ngIf=\"item.combos\">\r\n                        <span *ngFor=\"let combo of item.combos;index as i\"\r\n                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                            {{ i == item.combos.length-1 ? combo.quantity + 'x ' + combo.name +\r\n                            ' (' + getUnit(combo.units,combo.ratio)+ ') ': combo.quantity + 'x '\r\n                            + combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Topping -->\r\n                <div class=\"bill-detail-area-item-side-dishes\"\r\n                    *ngFor=\"let sideDishes of item.toppings ? item.toppings : []; trackBy:myTrackByFunction\">\r\n                    <div class=\"delete-btn\"></div>\r\n                    <div class=\"item-name\">{{\"+ \" + sideDishes.name}}</div>\r\n                    <div class=\"item-quantity\">{{sideDishes.quantity| number:'1.0-2'}}</div>\r\n                    <div class=\"item-price\">\r\n                        <!-- {{vhAlgorithm.vhcurrencyunit(sideDishes.price)}} -->\r\n\r\n                        <!-- Giá khuyến mãi -->\r\n                        <!-- <s *ngIf=\"sideDishes.price < sideDishes.price_origin\">\r\n                            {{vhAlgorithm.vhcurrencyunit(sideDishes.price_origin)}}\r\n                        </s> -->\r\n                    </div>\r\n                    <!-- <div class=\"item-total\">\r\n                        {{vhAlgorithm.vhcurrencyunit(sideDishes.price * sideDishes.quantity)}}\r\n                    </div> -->\r\n                    <div class=\"edit-btn\"></div>\r\n                </div>\r\n\r\n                <!-- Thuộc tính -->\r\n                <div class=\"bill-detail-area-item-properties\"\r\n                    *ngFor=\"let properties of item.properties ? item.properties : []; trackBy:myTrackByNameFunction\">\r\n                    <div class=\"delete-btn\"></div>\r\n                    <div class=\"item-name\">{{\"+ \" + properties.name + \" \" + properties.selectedValue}}</div>\r\n                    <div class=\"edit-btn\"></div>\r\n                </div>\r\n\r\n                <!-- Hàng thời gian -->\r\n                <div *ngIf=\"item.ptype === VhType.SERVICETIME\" class=\"bill-detail-area-item-time\">\r\n                  <p *ngIf=\"item.time_start_order\">{{'Started at' | translate}}: {{item.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n                  <p *ngIf=\"item.time_end_order\"\r\n                    [ngStyle]=\"{'color': item.is_paused ? 'var(--ion-color-vh-orange)' : ''}\">\r\n                    {{'Estimated until' | translate}}: {{item.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}\r\n                  </p>\r\n                  <ng-container *ngIf=\"productService.generateTimeUseString(item.time_start_order, item.time_end_order) as usedTime\">\r\n                    <p>{{ 'Used' | translate }}: {{ usedTime }}</p>\r\n                  </ng-container>\r\n                </div>\r\n\r\n                <!-- Ghi chú -->\r\n                <div class=\"bill-detail-area-item-note\" id=\"note-card1\">\r\n                    <input nz-input [(ngModel)]=\"item.note\" placeholder=\"{{'Note' | translate}}\" nzBorderless\r\n                         />\r\n                </div>\r\n            </ng-template>\r\n\r\n        </div>\r\n        </div>\r\n    </div>\r\n\r\n    <app-product-wishlist1 *ngIf=\"wishList\" style=\"padding-top: 8px\" (productChoice)=\"createBillDetail($event)\">\r\n    </app-product-wishlist1>\r\n</div>\r\n\r\n\r\n<!-- --------------------open product search---------------------- -->\r\n<app-search-product *ngIf=\"showDrawerProductList\" [showDrawerProductList]=\"showDrawerProductList\"\r\n    (closeSearchProductList)=\"closeSearchProduct($event)\">\r\n</app-search-product>\r\n<!-- --------------------open service search---------------------- -->\r\n<app-search-service *ngIf=\"showDrawerServiceList\" [showDrawerServiceList]=\"showDrawerServiceList\"\r\n    (closeSearchServiceList)=\"closeSearchService($event)\">\r\n</app-search-service>\r\n<!-- --------------------open side dishes search---------------------- -->\r\n<app-search-topping *ngIf=\"showDrawerSideDishesList\" [showDrawerSideDishesList]=\"showDrawerSideDishesList\"\r\n    (closeSearchSideDishesList)=\"closeSearchSideDishes($event)\">\r\n</app-search-topping>\r\n<!-- --------------------open combo search---------------------- -->\r\n<app-search-combo *ngIf=\"showDrawerCombosList\" [showDrawerCombosList]=\"showDrawerCombosList\"\r\n    (closeSearchCombosList)=\"closeSearchCombos($event)\">\r\n</app-search-combo>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------------- MODAL CHỈNH SỬA MÓN ĂN ------------------------------------------------------ -->\r\n<nz-modal\r\n  *ngIf=\"choiceFood\"\r\n  (nzOnCancel)=\"saveEdit()\"\r\n  [(nzVisible)]=\"showDrawerEdit\"\r\n  [nzTitle]=\"choiceFood.name\"\r\n  [nzFooter]=\"null\"\r\n  nzWidth=\"40vw\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body modal-edit\" style=\"max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <!-- Không phải Dịch vụ thời gian -->\r\n      <ng-container *ngIf=\"choiceFood.ptype !== VhType.SERVICETIME else serviceTimeTemplate\">\r\n        <div nz-row style=\"width: 100%; align-items: center;\">\r\n          <!-- Giá -->\r\n          <div nz-col nzSpan=\"7\">\r\n            <input [disabled]=\"!vhAuth.checkLocalMyPermissionName('sales_enable_update_price_bill_detail')\"\r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\"\r\n              (blur)=\"updatePrice(choiceFood)\"\r\n              [ngClass]=\"'price-' + choiceFood.id_product\" maxlength=\"15\"\r\n              nz-input [placeholder]=\"'Price' | translate\" />\r\n          </div>\r\n          <!-- Input số lượng -->\r\n          <div class=\"price-edit\" style=\"display: flex; justify-content: space-between; align-items: stretch; gap: 6px; padding: 0 20px;\" nz-col nzSpan=\"10\">\r\n            <!-- Giảm -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity <= 1\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity - 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity > 0, 'btn-disabled': choiceFood.quantity <= 1}\">\r\n              <i nz-icon nzType=\"minus\"></i>\r\n            </button>\r\n            <!-- Ô nhập -->\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n              [(ngModel)]=\"choiceFood.quantity\"\r\n              (ngModelChange)=\"updatePrice(choiceFood)\"\r\n              style=\"flex: 1;\">\r\n            </nz-input-number>\r\n            <!-- Tăng -->\r\n            <button nz-button nzType=\"default\" style=\"width: 40px\"\r\n              [disabled]=\"choiceFood.quantity > 9999999998\"\r\n              (click)=\"choiceFood.quantity = choiceFood.quantity + 1\"\r\n              [ngClass]=\"{'btn-activate': choiceFood.quantity <= 9999999998, 'btn-disabled': choiceFood.quantity > 9999999998}\">\r\n              <i nz-icon nzType=\"plus\"></i>\r\n            </button>\r\n          </div>\r\n          <!-- Thành tiền -->\r\n          <div style=\"text-align: right\" nz-col nzSpan=\"7\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <!-- Combo -->\r\n          <div *ngIf=\"choiceFood.combos\" nz-col nzSpan=\"24\" style=\"font-size: 0.7rem; margin-top: 8px;\">\r\n            {{getSubCombo(choiceFood.combos)}}\r\n          </div>\r\n          <!-- Ghi chú -->\r\n          <div class=\"order-div-note1\" nz-col nzSpan=\"24\" style=\"margin-top: 8px;\">\r\n            <input class=\"order-note\" nzBorderless nz-input\r\n              [(ngModel)]=\"choiceFood.note\"\r\n              [ngModelOptions]=\"{standalone: true}\"\r\n              [placeholder]=\"'Enter note' | translate\" />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thuoc tinh -->\r\n        <div *ngIf=\"choiceFood.properties\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.properties.length\">\r\n            {{'Properties' | translate}}\r\n          </div>\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n            <nz-collapse nzGhost>\r\n              <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n                [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n                <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                  <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n                </nz-radio-group>\r\n              </nz-collapse-panel>\r\n            </nz-collapse>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Mon phu -->\r\n        <div *ngIf=\"choiceFood.toppings\" nz-row class=\"option-modal\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\"\r\n            *ngIf=\"choiceFood.toppings.length\">\r\n            {{'Side dishes' | translate}}\r\n          </div>\r\n          <div nz-row class=\"option-modal\">\r\n            <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n              <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                  {{item.name |translate}} <br>\r\n                </div>\r\n                <div class=\"text-align-center price-edit\" style=\"display: flex;justify-content: space-evenly;align-items: end;\" nz-col nzSpan=\"10\">\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 1\"\r\n                    (click)=\"item.quantity = item.quantity - 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 1}\">\r\n                    <i nz-icon nzType=\"minus\"></i>\r\n                  </button>\r\n                  <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                    (ngModelChange)=\"updatePrice(choiceFood)\" [(ngModel)]=\"item.quantity\">\r\n                  </nz-input-number>\r\n                  <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                    (click)=\"item.quantity = item.quantity + 1\"\r\n                    [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                    <i nz-icon nzType=\"plus\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"align-end text-align-right\" nz-col nzSpan=\"7\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Combo -->\r\n        <ng-container *ngFor=\"let combo of choiceFood.combos\">\r\n          <!-- chọn lô - hsd -->\r\n          <div *ngIf=\"combo.lots\">\r\n            <b>{{'Select lot and expiry date for combo components' | translate}}</b><br>\r\n            <span>{{combo.name}} ({{getUnit(combo.units, combo.ratio)}})</span>\r\n            <nz-radio-group [(ngModel)]=\"combo.id_lotproduct\" (ngModelChange)=\"changeLot($event, combo)\"\r\n              style=\"width:100%; padding: 8px 0;\">\r\n              <div nz-row *ngFor=\"let lot of combo.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                  <label class=\"radio-purchase\" nz-radio [nzValue]=\"lot._id\" style=\"width:100%;\">\r\n                    <div nz-row>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        {{lot.lot_number}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        NSX: {{lot.date_mfg | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\">\r\n                        HSD: {{lot.date_exp | date : 'dd/MM/yyyy'}}\r\n                      </div>\r\n                      <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                        {{'Stock' | translate}}:\r\n                        <span style=\" color: var(--ion-color-vh-orange)\">{{lot.quantity_branch[id_branch]/combo.ratio | number : '1.0-2'}}</span>\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </nz-radio-group>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <!-- Dịch vụ thời gian -->\r\n      <ng-template #serviceTimeTemplate>\r\n        <!-- Tiêu đề -->\r\n        <div class=\"flex-between\" style=\"margin-bottom: 8px; font-size: 0.95rem;\">\r\n          <b>{{'Used time' | translate}}</b>\r\n          <b>{{'Drafted' | translate}}</b>\r\n        </div>\r\n\r\n        <div>\r\n          <!-- First time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_first_time\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'First time block' | translate}} - {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'first' | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].first_time.time_block}} {{choiceFood.units[0].first_time.unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}} - {{choiceFood?.serviceTimePrice?.first_time?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.first_time?.price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Special time -->\r\n          <div *ngIf=\"choiceFood.units[0].is_special_times && choiceFood?.serviceTimePrice?.special_times?.length\" style=\"margin-bottom: 1rem;\">\r\n            <span>{{'Special time' | translate}}</span>\r\n            <div *ngFor=\"let specialTime of choiceFood?.serviceTimePrice?.special_times\" class=\"flex-between\">\r\n              <p style=\"margin-bottom: 0\">{{specialTime.from_time | date : 'HH:mm:ss'}} - {{specialTime.to_time | date : 'HH:mm dd/MM/yyyy'}} = {{productService.generateTimeFromValue(specialTime.duration, choiceFood.units[0].unit)}} ({{vhAlgorithm.vhcurrencyunit_symbol(specialTime.price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n              <p style=\"margin-bottom: 0\">{{vhAlgorithm.vhcurrencyunit(specialTime.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Merge block -->\r\n          <div *ngIf=\"choiceFood.units[0].is_merge_block\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Merge block' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.merge_block?.price)}} / 1 block</span>\r\n              <p style=\"margin-top: 0.25rem;\">{{choiceFood?.serviceTimePrice?.merge_block?.count}} block = {{choiceFood?.serviceTimePrice?.merge_block?.duration}} {{choiceFood.units[0].unit | translate}} (1 block = {{choiceFood?.serviceTimePrice?.merge_block?.time_per_block}} {{choiceFood.units[0].unit | translate}})</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.merge_block?.total_price)}}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Normal time -->\r\n          <div *ngIf=\"choiceFood?.serviceTimePrice?.time_used\" class=\"flex-between\">\r\n            <div>\r\n              <span>{{'Regular selling time' | translate}} - {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood.units[0].price)}} / {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</span>\r\n              <small style=\"display: block;\">*{{'Time less than' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}} {{'will be rounded up to' | translate}} {{choiceFood.units[0].time_block}} {{choiceFood.units[0].unit | translate}}</small>\r\n              <p style=\"margin-top: 0.25rem;\">{{productService.generateTimeFromValue(choiceFood?.serviceTimePrice?.time_used, choiceFood?.serviceTimePrice?.unit)}}</p>\r\n            </div>\r\n            <div>\r\n              <p>{{vhAlgorithm.vhcurrencyunit(choiceFood?.serviceTimePrice?.price)}}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Thành tiền -->\r\n        <div class=\"flex-between\">\r\n          <p>{{'From' | translate}} <b>{{choiceFood.time_start_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> {{'to' | translate}} <b>{{choiceFood?.time_end_order | date : 'HH:mm:ss dd/MM/yyyy'}}</b> <br> <b>({{productService.generateTimeUseString(choiceFood.time_start_order, choiceFood?.time_end_order)}})</b></p>\r\n          <b style=\"font-size: 1rem;\">{{'Total' | translate}}: {{vhAlgorithm.vhcurrencyunit_symbol(choiceFood?.serviceTimePrice?.total_price)}}</b>\r\n        </div>\r\n\r\n        <div class=\"flex-between\" style=\"margin: 16px 0;\">\r\n          <!-- Tạm ngưng / Tiếp tục tính giờ -->\r\n          <i (click)=\"pauseTime(!choiceFood?.is_paused)\" style=\"text-align: right; color: var(--ion-color-vh-orange); cursor: pointer;\">{{(choiceFood?.is_paused ? 'Continue timing' : 'Pause timing') | translate}}</i>\r\n          <hr style=\"background-color: #f0f0f0; flex: auto;\">\r\n          <!-- Chỉnh sửa thời gian sử dụng -->\r\n          <i (click)=\"handleOpenEditUsedTime()\" style=\"text-align: right; color: var(--ion-color-vh-green); cursor: pointer;\">{{'Edit usage time'| translate}}</i>\r\n        </div>\r\n\r\n        <!-- Ghi chú -->\r\n        <div class=\"order-div-note1\" nz-col nzSpan=\"24\">\r\n          <b>{{'Note' | translate}}</b>\r\n          <input class=\"order-note\" nz-input\r\n            [(ngModel)]=\"choiceFood.note\"\r\n            [placeholder]=\"'Enter note' | translate\" />\r\n        </div>\r\n      </ng-template>\r\n\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------ MODAL CHỈNH SỬA THỜI GIAN SỬ DỤNG ------------------------------------------------ -->\r\n<nz-modal\r\n  [(nzVisible)]=\"isShowModalEditUsedTime\"\r\n  (nzOnCancel)=\"isShowModalEditUsedTime = false\"\r\n  (nzOnOk)=\"handleUpdateUsedTime()\"\r\n  [nzTitle]=\"'Edit used time' | translate\"\r\n  [nzFooter]=\"modalFooterEditUsedTime\" >\r\n\r\n  <ng-container *nzModalContent>\r\n    <div nz-row [nzGutter]=\"16\">\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'_Started at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempStartTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          [nzAllowClear]=\"false\"\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <p style=\"margin-bottom: 4px\"><b>{{'Ended at' | translate}}</b></p>\r\n        <nz-date-picker [(ngModel)]=\"tempEndTime\"\r\n          nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n          nzShowTime\r\n          nzAllowClear\r\n          style=\"width: 100%;\">\r\n        </nz-date-picker>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-top: 32px\">\r\n      <p style=\"margin-bottom: 4px\"><b>*{{'_Note' | translate}}:</b></p>\r\n      <p style=\"margin-bottom: 0px\">{{'The start time must be less than or equal to the current time.' | translate}}</p>\r\n      <p style=\"margin-bottom: 0px\">{{'The end time must be greater than the start time.' | translate}}</p>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterEditUsedTime>\r\n    <button (click)=\"isShowModalEditUsedTime = false\"\r\n      nz-button class=\"nz-hover-border\" nzType=\"default\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\">{{'Cancel' |translate}}</button>\r\n    <button [disabled]=\"!tempStartTime\"\r\n      (click)=\"handleUpdateUsedTime()\"\r\n      nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\">{{'Ok' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BillDetail1Component } from './bill-detail1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SearchProductModule } from '../search-product/search-product.module';\r\nimport { SearchServiceModule } from '../search-service/search-service.module';\r\nimport { SearchToppingModule } from '../search-topping/search-topping.module';\r\nimport { SearchComboModule } from '../search-combo/search-combo.module';\r\nimport { ProductWishlist1Module } from '../product-wishlist1/product-wishlist1.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BillDetail1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ProductWishlist1Module,\r\n    SearchProductModule,\r\n    SearchServiceModule,\r\n    SearchToppingModule,\r\n    SearchComboModule\r\n  ],\r\n  exports: [\r\n    BillDetail1Component\r\n  ]\r\n})\r\nexport class BillDetail1Module { }\r\n","import { AfterViewInit, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-bill1',\r\n  templateUrl: './bill1.component.html',\r\n  styleUrls: ['./bill1.component.scss']\r\n})\r\nexport class Bill1Component implements OnInit, AfterViewInit, OnChanges {\r\n  @Input() invoices: VhOrderInvoices\r\n  @Input() debt: boolean = false;\r\n  @Input() tax: number = 0\r\n  @Input() paymentType: Array<any> = [1]\r\n  @Input() id_partner :any = ''\r\n  /** Có ngăn edit hay không, có thì sẽ hiển thị các input và textarea dưới dạng span */\r\n  @Input() isPreventEdit: boolean = false;\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ]\r\n  listTax: any[] = this.vhQueryCafe.getlocalTaxs().filter(tax => tax.status);\r\n  printer:any;\r\n  moneyEdit: any = {}\r\n  percent_discount : number = 0; \r\n  constructor(\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // lấy thông tin tài khoản\r\n    this.getWallets()\r\n    \r\n    this.printer = this.vhQueryCafe.getlocalPrinters().find(item => item.name == \"DESKTOP\") ? this.vhQueryCafe.getlocalPrinters().find(item => item.name == \"DESKTOP\").sales :  {show_discount : true, show_fee: true, show_tax: true,show_note : true, show_rest : true}\r\n  }\r\n\r\n  ngOnChanges({ debt ,id_partner}: SimpleChanges) {\r\n    if (debt) {\r\n      if (!debt.currentValue) {\r\n        if (this.paymentType[0] == 2) this.changePaymentType([1])\r\n      }\r\n      this.nzOptions[1].disabled = !debt.currentValue\r\n    }\r\n    this.percent_discount = this.invoices.getDiscount()/this.invoices.getSubTotal()*100\r\n    \r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Cleave js\r\n    if(document.querySelector(\".discount-price\"))  this.moneyEdit['discount'] = this.vhAlgorithm.vhnumeral(\".discount-price\")\r\n    if(document.querySelector(\".fee-price\")) this.moneyEdit['fee'] = this.vhAlgorithm.vhnumeral(\".fee-price\")\r\n    if(document.querySelector(\".payment-price\")) this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  getWallets() {\r\n    this.nzOptions[2].children = this.vhQueryCafe.getlocalWallets()\r\n      .filter(wallet => wallet._id != 'id_cash' &&\r\n        wallet.id_branch == this.vhQueryCafe.getDefaultBranch()._id\r\n      ).map(wallet => {\r\n        return { label: wallet.name, value: wallet._id, isLeaf: true }\r\n      })\r\n  }\r\n\r\n\r\n  changePercentDiscount(value){\r\n    this.percent_discount = value\r\n    this.invoices.setDiscount(this.invoices.getSubTotal()*value/100) \r\n  }\r\n  /**Cập nhật giảm giá */\r\n  updateDiscount() {\r\n    let discount: any = this.moneyEdit['discount'].getRawValue()\r\n    this.invoices.setDiscount(discount ? parseFloat(discount) : 0)\r\n    this.percent_discount = discount/this.invoices.getSubTotal()*100\r\n  }\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.changePercentDiscount(value)\r\n  }\r\n  /** Cập nhật phí */\r\n  updateFee() {\r\n    let fee: any = this.moneyEdit['fee'].getRawValue()\r\n    this.invoices.setFee(fee ? parseFloat(fee) : 0)\r\n  }\r\n  /**Cập nhật thuế */\r\n  updateTax(value) {\r\n    this.invoices.setTax(parseFloat(value))\r\n  }\r\n  /**Cập nhật tiền khách trả */\r\n  updatePayment() {\r\n    if (this.debt) {\r\n      let payment: any = this.moneyEdit['payment'].getRawValue()\r\n      let value = payment ? parseFloat(payment) : 0\r\n\r\n      this.invoices.setPayment(value ? (value > this.invoices.getTotalATax() || value < 0 ? this.invoices.getTotalATax() : value) : 0)\r\n\r\n      document.getElementById(\"payment-price\")['value'] = this.invoices.getPayment()\r\n      this.moneyEdit['payment'] = this.vhAlgorithm.vhnumeral(\".payment-price\")\r\n    }\r\n  }\r\n  /**Cập nhật ghi chú */\r\n  updateNote() {\r\n    let note: any = document.getElementById(\"invoice-note\")\r\n    this.invoices.setNote(note.value)\r\n  }\r\n\r\n  /** Thay đổi phương thức thanh toán */\r\n  changePaymentType(value: any) {\r\n    this.invoices.setPaymentType(value[0])\r\n    this.invoices.setPayment()\r\n    switch (value[0]) {\r\n      case 1:\r\n        this.invoices.setIdWallet(\"id_cash\")\r\n        break\r\n      case 2:\r\n        this.invoices.setIdWallet(\"\")\r\n        break;\r\n\r\n      case 3:\r\n        this.invoices.setIdWallet(value[1])\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy label của phương thức thanh toán\r\n   * @param value value của phương thức thanh toán cần lấy label\r\n   * @returns label của phương thức thanh toán \r\n   */\r\n  getPaymentTypeLabel(value) {\r\n    if(value[1]) {\r\n      let wallet = this.vhQueryCafe.getlocalWallets().find(item => item._id == value[1]);\r\n      if(wallet) return `${this.nzOptions.filter(item => item.value == value[0])?.[0]?.label} / ${wallet.name}`;\r\n    }\r\n    else {\r\n      return this.nzOptions.filter(item => item.value == value[0])?.[0]?.label;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(this.isPreventEdit || !this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div class=\"bill\">\r\n    <!-- Tiêu đề -->\r\n    <div class=\"bill-title\">\r\n        {{'Payment information' | translate}}\r\n    </div>\r\n\r\n    <div class=\"bill-area\">\r\n        <!-- Cộng tiền -->\r\n        <div class=\"bill-area-item\">\r\n            <div class=\"bill-area-item-title\">{{'SubTotal' | translate}}</div>\r\n            <div class=\"bill-area-item-value\">{{vhAlgorithm.vhcurrencyunit(invoices.getSubTotal())}}</div>\r\n        </div>\r\n        \r\n        <!-- Giảm giá -->\r\n        <ng-container  >\r\n            <div class=\"sales-bills-content-discount\" style=\"display: flex; justify-content: space-between; align-items: center;\" nz-col nzSpan=\"24\">\r\n                <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                <!-- Phần trăm -->\r\n                <div>\r\n                    <span *ngIf=\"isPreventEdit\">{{percent_discount | number:'1.0-2'}} %</span>\r\n                </div>\r\n                <div *ngIf=\"!isPreventEdit\">\r\n                    <input id=\"percent-discount-price\" style=\"width: 60px;\" #percentDiscount type=\"number\"\r\n                        max=\"100\" min=\"0\" step=\"1\"\r\n                        (blur)=\"updateServiceTime(); invoices.setPercentDiscountBill(percentDiscount.value); editPercentDiscount(percentDiscount.value)\"\r\n                        [value]=\"percent_discount | number:'1.0-2'\" \r\n                        class=\"border_bottom \" maxlength=\"3\" nz-input />%\r\n                </div>\r\n                <!-- Giá trị -->\r\n                <span *ngIf=\"isPreventEdit\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getDiscount())}}</span>\r\n                <input *ngIf=\"!isPreventEdit\" style=\"width: 50%;\" \r\n                    (blur)=\"updateServiceTime(); updateDiscount()\" \r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getDiscount())\"\r\n                    class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n            </div>\r\n        </ng-container>\r\n\r\n        <!-- Chiết khấu -->\r\n        <div *ngIf=\"invoices.getDiscountBill()\" class=\"sales-bills-content-discount\"\r\n            style=\"display: flex; justify-content: space-between; align-items: center;\" nz-col nzSpan=\"24\">\r\n            <div style=\"width: auto;\">{{'Discount' | translate}}</div>\r\n            <span>{{vhAlgorithm.vhcurrencyunit(invoices.getDiscountBill())}}</span>\r\n        </div>\r\n\r\n        <!-- Phí -->\r\n        <div class=\"bill-area-item\" *ngIf=\"printer.show_fee\">\r\n            <div class=\"bill-area-item-title\" nz-col nzSpan=\"12\">{{'Fee' | translate}}</div>\r\n            <span *ngIf=\"isPreventEdit\" nz-col nzSpan=\"12\" class=\"text-end\">{{vhAlgorithm.vhcurrencyunit(invoices.getFee())}}</span>\r\n            <div *ngIf=\"!isPreventEdit\" class=\"bill-area-item-value\" nz-col nzSpan=\"12\">\r\n                <input nzBorderless maxlength=\"15\" class=\"fee-price\" id=\"fee-price\" nz-input\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getFee())\" \r\n                    (blur)=\"updateServiceTime(); updateFee()\" />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Thuế -->\r\n        <div class=\"bill-area-item\"  *ngIf=\"printer.show_tax\">\r\n            <div class=\"bill-area-item-title\">{{'Tax' | translate}}</div>\r\n            <div>\r\n                <span *ngIf=\"isPreventEdit\">{{vhAlgorithm.vhcurrencyunit(invoices.getTaxValue())}} %</span>\r\n                <nz-select *ngIf=\"!isPreventEdit && listTax.length\" nzBorderless style=\"min-width: 72px;\" \r\n                    [(ngModel)]=\"tax\"\r\n                    (ngModelChange)=\"updateServiceTime(); updateTax($event)\">\r\n                    <nz-option *ngFor=\"let item of listTax; trackBy:myTrackByFunction\"\r\n                    [nzValue]=\"item.value\" \r\n                    [nzLabel]=\"vhAlgorithm.vhpercent(item.value/100)\">\r\n                    </nz-option>\r\n                </nz-select>\r\n                <span *ngIf=\"!listTax.length\">0.00%</span>\r\n            </div>\r\n            <div class=\"bill-area-item-value\">{{vhAlgorithm.vhcurrencyunit(invoices.getTaxValue())}}</div>\r\n        </div>\r\n\r\n        <!-- Tổng -->\r\n        <div class=\"bill-area-item\">\r\n            <div class=\"bill-area-item-title\">{{'Total' | translate}}</div>\r\n            <div class=\"bill-area-item-value\">{{vhAlgorithm.vhcurrencyunit(invoices.getTotalATax())}}</div>\r\n        </div>\r\n\r\n        <!-- Thanh toán -->\r\n        <div class=\"bill-area-item\">\r\n            <div class=\"bill-area-item-title payment\">{{'Pay' | translate}}</div>\r\n            <div class=\"bill-area-item-value\">\r\n                <span *ngIf=\"isPreventEdit\" class=\"payment-price\">{{vhAlgorithm.vhcurrencyunit(invoices.getPayment())}}</span>\r\n                <input *ngIf=\"!isPreventEdit\" \r\n                [disabled]=\"!debt\"\r\n                [value]=\"vhAlgorithm.vhcurrencyunit(invoices.getPayment())\" \r\n                (blur)=\"updateServiceTime(); updatePayment()\" \r\n                nzBorderless maxlength=\"15\" class=\"payment-price\" id=\"payment-price\" nz-input />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Nợ lại -->\r\n        <div class=\"bill-area-item\" *ngIf=\"printer.show_rest\">\r\n            <div class=\"bill-area-item-title\">{{'Rest' | translate}}</div>\r\n            <div class=\"bill-area-item-value\">\r\n                {{vhAlgorithm.vhcurrencyunit_symbol(invoices.getTotalATax() - invoices.getPayment())}}\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Hình thức thanh toán -->\r\n        <div class=\"bill-area-item-payment_type bill-area-item\">\r\n            <div *ngIf=\"isPreventEdit\">{{'Payment method' | translate}}</div>\r\n            <span *ngIf=\"isPreventEdit\" class=\"text-end payment-price\">{{getPaymentTypeLabel(paymentType)}}</span>\r\n            <nz-cascader *ngIf=\"!isPreventEdit\"\r\n                [(ngModel)]=\"paymentType\"\r\n                (ngModelChange)=\"updateServiceTime(); changePaymentType($event)\" \r\n                [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" [nzPlaceHolder]=\"'Payment method' | translate\">\r\n            </nz-cascader>\r\n        </div>\r\n\r\n        <!-- Ghi chú -->\r\n        <div class=\"bill-area-item-note\" nz-col nzSpan=\"24\" *ngIf=\"printer.show_note\">\r\n            <span *ngIf=\"isPreventEdit\" class=\"payment-price\">{{invoice_note}}</span>\r\n            <textarea *ngIf=\"!isPreventEdit\" \r\n                [value]=\"invoices.getNote()\" \r\n                (blur)=\"updateServiceTime(); updateNote()\"\r\n                class=\"nz-hover-border\" id=\"invoice-note\" nz-input [placeholder]=\"'Enter note...' | translate\"\r\n                [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\" ></textarea>\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Bill1Component } from './bill1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Bill1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    Bill1Component\r\n  ]\r\n})\r\nexport class Bill1Module { }\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-customer-profile',\r\n  templateUrl: './customer-profile.component.html',\r\n  styleUrls: ['./customer-profile.component.scss']\r\n})\r\nexport class CustomerProfileComponent {\r\n  @Input(\"id\") customerID;\r\n  @Input(\"showDrawerCustomerInfo\") showDrawerCustomerInfo;\r\n  @Output(\"closeInfoCustomer\") closeInfoCustomer = new EventEmitter<any>();\r\n\r\n  customer: any = {}\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe\r\n  ) { }\r\n\r\n  ngOnChanges(change: SimpleChanges) {\r\n    // lấy dữ liệu khách hàng\r\n    this.initCustomer(change.customerID.currentValue)\r\n  }\r\n\r\n  initCustomer(id_customer: string) {\r\n    if (id_customer != 'id_retail') {\r\n      let customer = this.vhQueryCafe.getlocalCustomer(id_customer)\r\n      this.customer = customer ? customer : {}\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.closeInfoCustomer.emit(false)\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" [nzVisible]=\"showDrawerCustomerInfo\"\r\n  (nzOnClose)=\"goBack()\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n      </div>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer type' | translate}}:</b><span> {{(customer.isBusiness ? 'Business/Business household' : 'Individual') | translate}}</span>\r\n      </div>\r\n\r\n      <ng-container *ngIf=\"customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Tax code' | translate}}:</b><span> {{customer.taxcode}}</span>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"!customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Gender' | translate}}:</b><span> {{customer.gender | translate}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n        </div>\r\n      </ng-container>\r\n      \r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CustomerProfileComponent } from './customer-profile.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CustomerProfileComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    CustomerProfileComponent\r\n  ]\r\n})\r\nexport class CustomerProfileModule { }\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-customer1',\r\n  templateUrl: './customer1.component.html',\r\n  styleUrls: ['./customer1.component.scss']\r\n})\r\nexport class Customer1Component implements OnInit, OnChanges {\r\n  @Input() invoices: VhOrderInvoices;\r\n  @Input() customerID: string;\r\n  @Output() changeDebt: EventEmitter<boolean> = new EventEmitter() // trạng thái cho phép nợ bị thay đổi\r\n  customerList: any[] = []\r\n  customerType: 1 | 2 | 3;\r\n  // Customer\r\n  showDrawerAddCustomer: boolean = false\r\n  showDrawerCustomerInfo: boolean = false\r\n  showDrawerAddRetail: boolean = false\r\n  point_validity  = 0\r\n  @Input() total_earning_points : any;\r\n  constructor(\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private nzModalService: NzModalService,\r\n    private lang: LanguageService,\r\n    private vhComponent:VhComponent,\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initCustomer()\r\n  }\r\n\r\n  initCustomer() {\r\n    this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    if (this.customerID == \"id_retail\") {\r\n      this.customerType = 1\r\n    } else {\r\n      this.customerType = 2\r\n    }\r\n  }\r\n\r\n  ngOnChanges({ customerID }: SimpleChanges) {\r\n    if (customerID)\r\n      if (customerID.previousValue) {\r\n        if (customerID.previousValue != customerID.currentValue) {\r\n          if (this.customerID == \"id_retail\") {\r\n            this.customerType = 1\r\n          } else {\r\n            this.customerType = 2\r\n          }\r\n        }\r\n      }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  changeCustomerType(type) {\r\n    if (type == 1) {\r\n      this.customerID = \"id_retail\"\r\n      this.invoices.setIdPartner(\"id_retail\")\r\n      this.invoices.setTaxBuyerDisplayName('Người mua không lấy hoá đơn');\r\n      this.invoices.setTaxBuyerLegalName('');\r\n      this.invoices.setTaxBuyerTaxCode('');\r\n      this.invoices.setTaxBuyerAddressLine('');\r\n      this.invoices.setTaxBuyerEmail('');\r\n      this.changeDebt.emit(false)\r\n      if (this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill) {\r\n        this.vhComponent.alertMessageDesktop('success',this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\") + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer('id_retail').id_discount_bill).name)\r\n        this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), 'id_retail').discount)\r\n      }\r\n      this.updateServiceTime();\r\n    } else if (type == 2 && this.invoices.getRetailName()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.lang.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.lang.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => {\r\n          this.clearRetailCustomer()\r\n          this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n          setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n        },\r\n        nzOnCancel: () => { this.customerType = 1 },\r\n      })\r\n    }\r\n    else if (type == 2) {\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n      setTimeout(() => document.getElementById(\"select-customer\").click(), 200)\r\n    }\r\n  }\r\n  clearRetailCustomer() {\r\n    this.invoices.setRetailName('')\r\n    this.invoices.setRetailPhone('')\r\n    this.invoices.setRetailAddress('')\r\n  }\r\n  blurCustomer() {\r\n    setTimeout(() => {\r\n      if (this.customerID == \"id_retail\") this.customerType = 1;\r\n    }, 500)\r\n  }\r\n  changeCustomer(ev) {\r\n    this.invoices.setIdPartner(ev)\r\n    const localCustomer = this.vhQueryCafe.getlocalCustomer(ev);\r\n    this.invoices.setTaxBuyerDisplayName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerLegalName(localCustomer?.name || '');\r\n    this.invoices.setTaxBuyerTaxCode(localCustomer?.taxcode || '');\r\n    this.invoices.setTaxBuyerAddressLine(localCustomer?.address || '');\r\n    this.invoices.setTaxBuyerEmail(localCustomer?.email || '');\r\n\r\n    let debt = this.vhQueryCafe.getlocalCustomer(ev).debt_enable\r\n    this.changeDebt.emit(debt ? debt : false)\r\n    if (this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill) {\r\n      this.vhComponent.alertMessageDesktop('success',this.lang.translate(\"Khách hàng này được chiết khấu theo công thức\")+ \" \" + this.vhQueryCafe.getlocalDiscount_bill(this.vhQueryCafe.getlocalCustomer(ev).id_discount_bill).name)\r\n      this.invoices.setDiscount(this.vhQueryCafe.getDiscount_bill_byCustomer(this.invoices.getSubTotal(), ev).discount)\r\n    }\r\n    else this.invoices.setDiscount(0);\r\n\r\n    this.updateServiceTime();\r\n  }\r\n  // Customer process\r\n  openAddCustomer() {\r\n    if (this.customerType === 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCustomer = true\r\n  }\r\n  closeAddCustomer(ev: boolean) {\r\n    if (ev) { // restart customer list\r\n      this.customerList = this.vhQueryCafe.getlocalCustomers().filter(item => item._id != 'id_retail');\r\n    }\r\n    this.showDrawerAddCustomer = false\r\n  }\r\n  openCustomerInfo() {\r\n    this.showDrawerCustomerInfo = true\r\n  }\r\n  closeCustomerInfo(ev) {\r\n    this.showDrawerCustomerInfo = false\r\n  }\r\n  //Lưu thông tin khách lẻ\r\n  saveRetailInfo(result) {\r\n    if (result) {\r\n      this.invoices.setRetailName(result.retail_name)\r\n      this.invoices.setRetailPhone(result.retail_phone)\r\n      this.invoices.setRetailAddress(result.retail_address)\r\n    }\r\n    this.showDrawerAddRetail = false\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div class=\"customer\">\r\n    <div class=\"customer-title\">\r\n        <div class=\"title\">\r\n            {{'Customer information' | translate}}\r\n        </div>\r\n        <div class=\"btn-add\">\r\n            <button nz-button nzType=\"text\" nzShape=\"circle\" (click)=\"openAddCustomer()\">\r\n                <i [nzType]=\"invoices.getRetailName() ? 'eye':'plus'\" nz-icon nzTheme=\"outline\"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <ng-container *ngIf=\"customerType == 1 && invoices.getRetailName()\">\r\n        {{invoices.getRetailName()}} - {{invoices.getRetailPhone()}} {{invoices.getRetailAddress() ? '-':\r\n        ''}} {{invoices.getRetailAddress()}}\r\n    </ng-container>\r\n    <div class=\"customer-type\">\r\n        <nz-radio-group nzName=\"radiogroup\" [(ngModel)]=\"customerType\" (ngModelChange)=\"changeCustomerType($event)\" ks>\r\n            <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n            <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n            <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n        </nz-radio-group>\r\n    </div>\r\n    <div class=\"customer-select\" *ngIf=\"customerType == 2\">\r\n        <nz-select id=\"select-customer\" nzShowSearch nzPlaceHolder=\"{{'Select customer' | translate}}\"\r\n            [(ngModel)]=\"customerID\" (ngModelChange)=\"changeCustomer($event)\" (nzBlur)=\"blurCustomer()\">\r\n            <nz-option *ngFor=\"let item of customerList\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n            </nz-option>\r\n        </nz-select>\r\n        <button nz-button nzType=\"text\" nzShape=\"circle\" (click)=\"openCustomerInfo()\">\r\n            <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n        </button>\r\n    </div>\r\n    <div nz-col nzSpan=\"24\" *ngIf=\"customerType == 2\"\r\n        style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n        <span>\r\n            {{'Accumulated points' | translate}} : <b>{{point_validity ? point_validity : 0 }}</b>\r\n        </span>\r\n        <span>\r\n            {{'Plus' | translate}} : <b>{{total_earning_points}}</b>\r\n        </span>\r\n    </div>\r\n    <div *ngIf=\"customerType == 3\" style=\"display: flex; justify-content: space-between;\">\r\n        <app-search-customer [id_customer]=\"customerID\"\r\n            (closeAndReceiveCustomer)=\"changeCustomer($event)\"></app-search-customer>\r\n        <i (click)=\"openCustomerInfo()\"\r\n            [ngClass]=\"customerID !='id_retail' ? 'active' : 'deactive'\"\r\n            style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n    </div>\r\n</div>\r\n\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCustomer\" [showDrawerAddCustomer]=\"showDrawerAddCustomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\">\r\n</app-add-customer>\r\n<!-- --------------------customer info---------------------- -->\r\n<app-customer-profile *ngIf=\"showDrawerCustomerInfo\" [showDrawerCustomerInfo]=\"showDrawerCustomerInfo\"\r\n    (closeInfoCustomer)=\"closeCustomerInfo($event)\" [id]=\"customerID\">\r\n</app-customer-profile>\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n    [retail_name]=\"invoices.getRetailName()\" [retail_phone]=\"invoices.getRetailPhone()\"\r\n    [retail_address]=\"invoices.getRetailAddress()\" (closeAddCustomer)=\"saveRetailInfo($event)\"></app-retail-info>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Customer1Component } from './customer1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AddCustomerModule } from '../add-customer/add-customer.module';\r\nimport { CustomerProfileModule } from '../customer-profile/customer-profile.module';\r\nimport { RetailInfoComponent } from '../retail-info/retail-info.component';\r\nimport { SearchModule } from 'src/app/cafe/components/search/search.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Customer1Component, RetailInfoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    AddCustomerModule,\r\n    CustomerProfileModule,\r\n    ReactiveFormsModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    Customer1Component\r\n  ]\r\n})\r\nexport class Customer1Module { }\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-info-bill1',\r\n  templateUrl: './info-bill1.component.html',\r\n  styleUrls: ['./info-bill1.component.scss']\r\n})\r\nexport class InfoBill1Component implements OnInit {\r\n  @Input() invoices: VhOrderInvoices;\r\n  @Input() employeeID: string;\r\n  @Input() tableInfo: any = {};\r\n  pickerTime = new Date();\r\n  employeeList: any[] = []\r\n  constructor(\r\n    public vhAuth: VhAuth,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private fncService: FunctionService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initData()\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  initData() {\r\n    // nhân viên\r\n    this.employeeList = this.vhAuth.getlocalEmployees();\r\n    this.pickerTime = new Date(this.invoices.getDate())\r\n  }\r\n\r\n  changeEmployee(ev) {\r\n    this.invoices.setIdEmployee(ev)\r\n  }\r\n\r\n  onChangeDate(event) {\r\n    this.vhQueryCafe.getValidityDate(event)\r\n      .then((validitydate) => {\r\n        if (validitydate) {\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n          this.invoices.setDate(this.invoices.getDate())\r\n          this.pickerTime = new Date(this.invoices.getDate()) \r\n        }\r\n        else {\r\n          this.invoices.setDate(event);\r\n        }\r\n      })\r\n  }\r\n}\r\n","<div class=\"info-bill\">\r\n    <div class=\"select\">\r\n        <div class=\" select-title\">\r\n            {{'Invoice code' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            {{invoices.getBillCode()}}\r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\"select-title\">\r\n            {{'Salesman' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            <nz-select nzBorderless nzShowSearch nzPlaceHolder=\"{{'Select employee' | translate}}\"\r\n                [(ngModel)]=\"employeeID\" (ngModelChange)=\"changeEmployee($event)\">\r\n                <nz-option *ngFor=\"let item of employeeList; trackBy:myTrackByFunction\" [nzValue]=\"item._id\"\r\n                    [nzLabel]=\"item.name\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\"select-title\">\r\n            {{'Sales date' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            <nz-date-picker nzFormat=\"dd/MM/yyyy HH:mm\" [(ngModel)]=\"pickerTime\" (ngModelChange)=\"onChangeDate($event)\"></nz-date-picker>\r\n            \r\n        </div>\r\n    </div>\r\n    <div class=\"select\">\r\n        <div class=\" select-title\">\r\n            {{'Table' | translate}}\r\n        </div>\r\n        <div class=\"select-detail\">\r\n            {{tableInfo}}\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { InfoBill1Component } from './info-bill1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    InfoBill1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    InfoBill1Component\r\n  ]\r\n})\r\nexport class InfoBill1Module { }\r\n","import { Component, EventEmitter, HostListener, Input, Output } from '@angular/core';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-payment-button1',\r\n  templateUrl: './payment-button1.component.html',\r\n  styleUrls: ['./payment-button1.component.scss']\r\n})\r\nexport class PaymentButton1Component {\r\n  @HostListener('window:keydown', ['$event'])\r\n  keyEvent(event: KeyboardEvent) {\r\n    if ([\"F1\"].includes(event.key)) {\r\n      switch (event.key) {\r\n        case \"F1\": document.getElementById(\"order-and-print\").click(); break;\r\n      }\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n  @Input() invoices: VhOrderInvoices\r\n  @Input() statusInvoice: any = {}\r\n  @Output() save: EventEmitter<any> = new EventEmitter();\r\n  openBillStatus: boolean = false;\r\n\r\n\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n  ) { }\r\n\r\n\r\n\r\n  saveInvoice() {\r\n    this.save.emit()\r\n  }\r\n\r\n\r\n  \r\n  handleCancel() {\r\n    this.openBillStatus = false\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tính lại bill detail cho Dịch vụ thời gian và setSubTotal() cho invoices\r\n   */\r\n  updateServiceTime() {\r\n    if(!this.productService.isContainServiceTime(this.invoices)) return;\r\n    this.productService.updateServiceTimePriceInvoiceDetail(this.invoices.getInvoiceDetail(), this.invoices.getPriceType());\r\n    this.invoices.setSubTotal();\r\n  }\r\n\r\n}\r\n","<div>\r\n    <div style=\"padding: 8px 0\">\r\n        <button [disabled]=\"!invoices.getInvoiceDetail().length\" \r\n            nz-button \r\n            [nzLoading]=\"statusInvoice.saving\"\r\n            id=\"order-and-print\" class=\"order-and-print\"\r\n            (click)=\"updateServiceTime(); openBillStatus = true\" >\r\n            {{'Save' | translate}} (F1)\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- ----------------------------------------------- MODAL HIỂN THỊ THÔNG TIN THANH TOÁN ----------------------------------------------- -->\r\n<nz-modal \r\n    [nzMaskClosable]=\"false\" \r\n    [nzFooter]=\"modalFooterPrintKitchen\"\r\n    [(nzVisible)]=\"openBillStatus\"\r\n    (nzOnCancel)=\"handleCancel()\" \r\n    (nzOnOk)=\"saveInvoice()\"\r\n    [nzTitle]=\"'Payment information' | translate\" >\r\n    <ng-container *nzModalContent>\r\n        <app-bill1 \r\n            [invoices]=\"invoices\" \r\n            [debt]=\"debt\" \r\n            [tax]=\"invoices.getTax()\"\r\n            [customer_class]=\"customer_class\"\r\n            [paymentType]=\"invoices.getPaymentType() == 3 ? [invoices.getPaymentType(), invoices.getIdWallet()] : [invoices.getPaymentType()]\"\r\n            [isPreventEdit]=\"true\">\r\n        </app-bill1>\r\n    </ng-container>\r\n    <ng-template #modalFooterPrintKitchen>\r\n        <!-- CÓ bật xác nhận thanh toán -->\r\n        <button id=\"order-and-print\" class=\"order-and-print\" nz-button\r\n            [disabled]=\"!invoices.getInvoiceDetail().length\"\r\n            [nzLoading]=\"statusInvoice.saving\"\r\n            nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n            nzPopconfirmTitle=\"{{'Complete' | translate}}?\"\r\n            (nzOnConfirm)=\"saveInvoice()\">\r\n            {{'Save' | translate}} (F1)\r\n        </button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PaymentButton1Component } from './payment-button1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Bill1Module } from '../bill1/bill1.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PaymentButton1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    Bill1Module\r\n  ],\r\n  exports: [\r\n    PaymentButton1Component\r\n  ]\r\n})\r\nexport class PaymentButton1Module { }\r\n","import { AfterViewInit, Component, Input, NgZone, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-product-wishlist1',\r\n  templateUrl: './product-wishlist1.component.html',\r\n  styleUrls: ['./product-wishlist1.component.scss']\r\n})\r\nexport class ProductWishlist1Component implements OnInit {\r\n  @Output('productChoice') productChoice: EventEmitter<any> = new EventEmitter()\r\n  indexPage: number = 1;\r\n  wishList: any[] = []\r\n  choiceFood: any = {};\r\n  showOptions: boolean = false\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    let dataProd: any[] = this.vhQueryCafe.getlocalProducts().filter(product => product.selling && product.type == VhType.DISHES && !product.delete_hidden)\r\n    this.wishList = dataProd\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  chooseProduct(item) {\r\n    this.productChoice.emit(item)\r\n  }\r\n\r\n  changeSub(value) {\r\n    let subChoice: any = this.choiceFood.subs.find(item => item._id == value)\r\n    if (subChoice) {\r\n      this.choiceFood['id_subproduct'] = value\r\n      this.choiceFood['price'] = subChoice.price\r\n      this.choiceFood['price_origin'] = subChoice.price_origin\r\n    }\r\n  }\r\n\r\n  selectFoods(value) {\r\n    if (value.manysize) {\r\n      this.choiceFood = {\r\n        ...value, quantity: 1, note: '', price: 0, price_origin: 0, subs: value.subs.map(item => {\r\n          return {\r\n            ...item, price_origin: item.price,\r\n            price: item.price\r\n          }\r\n        })\r\n      }\r\n      if (this.choiceFood.subs && this.choiceFood.subs.length) {\r\n        this.choiceFood['id_subproduct'] = this.choiceFood.subs[0]._id\r\n        this.choiceFood['price'] = this.choiceFood.subs[0].price\r\n        this.choiceFood['price_origin'] = this.choiceFood.subs[0].price_origin\r\n      }\r\n    } else this.choiceFood = {\r\n      ...value, quantity: 1, note: \"\", price_origin: value.price,\r\n      price: value.price\r\n    }\r\n    // Lưu trữ các properties đã chon\r\n    if (this.choiceFood.properties) {\r\n      // sao chép mảng giá trị chọn\r\n      this.choiceFood.properties.forEach(element => {\r\n        element.active = true;\r\n        element.selectedValue = element.value[0]\r\n      });\r\n    }\r\n    // Kiểm tra topping\r\n    if (this.choiceFood.toppings) {\r\n      for (let topping of this.choiceFood.toppings) {\r\n        topping.quantity = 0\r\n        topping.price_origin = topping.price\r\n        topping.price = topping.price_origin\r\n      }\r\n    }\r\n\r\n    if (this.choiceFood) {\r\n      this.showOptions = true;\r\n    }\r\n  }\r\n\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    if (this.choiceFood.quantity) {\r\n      if (this.choiceFood.id_subproduct) {\r\n        let sub: any = this.choiceFood.subs.find(item => item._id == this.choiceFood.id_subproduct)\r\n        this.choiceFood['name'] += ` (${sub.name})`\r\n      }\r\n      this.productChoice.emit(this.choiceFood)\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"wish-list\">\r\n    <div class=\"wish-list-header\">\r\n        <div class=\"wish-list-header-title\">{{'Dishes/beverage' | translate}}</div>\r\n        <div class=\"wish-list-header-page\">\r\n            <nz-pagination [(nzPageIndex)]=\"indexPage\" [nzPageSize]=\"5\" [nzTotal]=\"wishList.length\" nzSimple>\r\n            </nz-pagination>\r\n        </div>\r\n    </div>\r\n    <div class=\"wish-list-area\">\r\n        <div class=\"wish-list-area-item\"\r\n            *ngFor=\"let prod of wishList | slice:5 * (indexPage - 1):5 * (indexPage - 1) + 5; trackBy: myTrackByFunction\">\r\n            <nz-card class=\"wish-list-area-item-card\" nzHoverable (click)=\"selectFoods(prod)\">\r\n                <img alt=\"image\" src=\"{{prod.img ? prod.img : 'assets/icon/management/noimage.svg'}}\" />\r\n                <div class=\"wish-list-area-item-card-title\">{{prod.name}}</div>\r\n            </nz-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- ------------select food---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceFood.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseFood()\">\r\n    <ng-container *nzModalContent>\r\n        <div class=\"ant-table-body\" style=\" max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n            <div *ngIf=\"choiceFood.manysize\" nz-row class=\"option-modal\">\r\n\r\n                <div nz-col nzSpan=\"24\" class=\"items-food\">\r\n                    <div nz-row style=\"width: 100%;\">\r\n                        <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                            {{vhAlgorithm.vhcurrencyunit(choiceFood.price)}}\r\n                            <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                                style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n                        </div>\r\n                        <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                [(ngModel)]=\"choiceFood.quantity\">\r\n                            </nz-input-number>\r\n                        </div>\r\n                        <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n                        </div>\r\n                        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                            <nz-radio-group [(ngModel)]=\"choiceFood.id_subproduct\" (ngModelChange)=\"changeSub($event)\">\r\n                                <label nz-radio\r\n                                    *ngFor=\"let sub of choiceFood.subs ? choiceFood.subs : []; trackBy:myTrackByFunction\"\r\n                                    [nzValue]=\"sub._id\">\r\n                                    {{sub.name}} - {{vhAlgorithm.vhcurrencyunit(sub.price)}}\r\n                                    <s *ngIf=\"sub.price < sub.price_origin\">{{vhAlgorithm.vhcurrencyunit(sub.price_origin)\r\n                                        }}</s>\r\n                                </label>\r\n                            </nz-radio-group>\r\n                        </div>\r\n                        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                            <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\"\r\n                                [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                                placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"!choiceFood.subs.length\">{{\"Not property yet\" | translate}}</div>\r\n            </div>\r\n            <div *ngIf=\"!choiceFood.manysize\" nz-row class=\"option-modal\">\r\n                <div nz-row style=\"width: 100%;\">\r\n                    <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                        {{vhAlgorithm.vhcurrencyunit(choiceFood.price)}}\r\n                        <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                            style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n                    </div>\r\n                    <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                        <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                            [(ngModel)]=\"choiceFood.quantity\">\r\n                        </nz-input-number>\r\n                    </div>\r\n                    <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                        {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n                    </div>\r\n                    <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                        <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\"\r\n                            [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                            placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- Thuoc tinh -->\r\n            <div *ngIf=\"choiceFood.properties && choiceFood.properties.length\" nz-row class=\"option-modal\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n                    {{'Properties' | translate}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                    <nz-collapse nzGhost>\r\n                        <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n                            [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n                            <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                                <label nz-radio *ngFor=\"let value of properties.value\"\r\n                                    [nzValue]=\"value\">{{value}}</label>\r\n                            </nz-radio-group>\r\n                        </nz-collapse-panel>\r\n                    </nz-collapse>\r\n                </div>\r\n            </div>\r\n            <!-- Mon phu -->\r\n            <div *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\" nz-row class=\"option-modal\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n                    {{'Side dishes' | translate}}\r\n                </div>\r\n                <div nz-row class=\"option-modal\">\r\n\r\n                    <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n                        <div nz-row style=\"width: 100%;\">\r\n                            <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                                {{item.name |translate}} <br>\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price)}} <s *ngIf=\"item.price_origin > item.price\"\r\n                                    style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(item.price_origin)}}</s>\r\n                            </div>\r\n                            <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                    [(ngModel)]=\"item.quantity\">\r\n                                </nz-input-number>\r\n                            </div>\r\n                            <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n\r\n    <ng-template #modalFooterSelectFood>\r\n        <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">\r\n            {{\"Cancel\" | translate}}\r\n        </button>\r\n        <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseFood()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ProductWishlist1Component } from './product-wishlist1.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductWishlist1Component\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    ProductWishlist1Component\r\n  ]\r\n})\r\nexport class ProductWishlist1Module { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-retail-info',\r\n  templateUrl: './retail-info.component.html',\r\n  styleUrls: ['./retail-info.component.scss']\r\n})\r\nexport class RetailInfoComponent implements OnInit {\r\n  @Input(\"showDrawerAddRetail\") showDrawerAddRetail: boolean = false;\r\n  @Input(\"retail_name\") retail_name: string = '';\r\n  @Input(\"retail_phone\") retail_phone: string = '';\r\n  @Input(\"retail_address\") retail_address: string = '';\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n\r\n  constructor() { }\r\n  ngOnInit(): void {\r\n    this.initaddRetailForm()\r\n  }\r\n  addRetailForm: FormGroup;\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? this.addRetailForm.value : false);\r\n  }\r\n  initaddRetailForm() {\r\n    this.addRetailForm = new FormGroup({\r\n      retail_name: new FormControl(this.retail_name, Validators.compose([Validators.required])),\r\n      retail_phone: new FormControl(this.retail_phone, Validators.compose([Validators.required, Validators.minLength(6)])),\r\n      retail_address: new FormControl(this.retail_address),\r\n    });\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer retail\" | translate}}'\r\n    [nzVisible]=\"showDrawerAddRetail\" [nzFooter]=\"footerAddRetail\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"addRetailForm\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_name\" nz-input\r\n                                placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n                            <ng-template #combineTplName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Retail name is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                        <nz-input-group>\r\n                            <input class=\"phone\" formControlName=\"retail_phone\" type=\"tel\" nz-input\r\n                                placeholder=\"{{'Enter customer phone' | translate}}\" minlength=\"6\" required />\r\n                            <ng-template #combineTplPhone let-control>\r\n                                <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Address' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_address\" nz-input\r\n                                placeholder=\"{{'Enter address' | translate}}\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddRetail>\r\n        <div class=\"footerAddRetail\" style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n            <button [disabled]=\"addRetailForm.invalid\" [ngStyle]=\"{opacity: addRetailForm.invalid ? 0.5 : 1}\" nz-button\r\n                (click)=\"close(true)\">{{\"Add\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, OnInit, Input, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search-combo',\r\n  templateUrl: './search-combo.component.html',\r\n  styleUrls: ['./search-combo.component.scss']\r\n})\r\nexport class SearchComboComponent implements OnInit {\r\n  @Input(\"showDrawerCombosList\") showDrawerCombosList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output(\"closeSearchCombosList\") closeSearchCombosList: EventEmitter<any> = new EventEmitter();\r\n  public combosList: any[] = [];\r\n  choiceCombos: any = {}\r\n  public searchList: any[] = [];\r\n\r\n  auto_hidden_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_hidden_lot\r\n  auto_select_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe, \r\n  ) { }\r\n  ngOnInit(): void {\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    this.combosList = this.vhQueryCafe.getlocalDetailProducts(5).filter(item => !item.delete_hidden).map(e => {\r\n      this.handleLotsOfCombo(e.combos.filter(lot => lot.lots))\r\n      return {...e, dispatcher_done : dispatcher_done ,...e.units[0],combos : e.combos.map( pro =>{ return {...pro, ptype : pro.type}})}}\r\n      )\r\n    this.searchList = [...this.combosList]\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList,'name')\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById(\"inputSearchCombos\").focus();\r\n  }\r\n\r\n\r\n  handleLotsOfCombo(combos) {\r\n    combos = this.vhAlgorithm.sortDatebyASC(combos, 'date_exp')\r\n    for (let i of combos) {\r\n      if (i.lots.length) {\r\n        if (this.auto_hidden_lot) i.lots = i.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime())\r\n        let min_date_exp = this.vhAlgorithm.sortDatebyASC(i.lots, 'date_exp')\r\n        if (this.auto_select_lot) i['id_lotproduct'] = min_date_exp[0]._id\r\n      }\r\n    }\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchCombosList.emit(false);\r\n  }\r\n\r\n  tempVal: string = ''\r\n  /** Tìm kiếm combo\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchCombos(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length) this.searchList = this.vhAlgorithm.searchList(tempVal, this.combosList, ['name'])\r\n    else this.searchList = this.combosList;\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList,'name')\r\n  }\r\n  /**\r\n   * Chọn combo để xử lý\r\n   * @param value dữ liệu combo được chọn\r\n   */\r\n  selectCombos(value) {\r\n    this.choiceCombos = {\r\n      ...value, quantity: 1, note: \"\", price_origin: value.price,\r\n      price: value.price,ptype : 5\r\n    }\r\n\r\n    if (this.choiceCombos) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue()\r\n    this.choiceCombos.price = price ? parseFloat(price) : 0;\r\n    this.choiceCombos.quantity = this.choiceCombos.quantity > 0 ? this.choiceCombos.quantity : 1\r\n  }\r\n  chooseCombos() {\r\n    this.showOptions = false;\r\n    if (this.choiceCombos['quantity']) {\r\n      this.choiceCombos['combos'] = this.choiceCombos['combos'].map(item => { return { ...item, id_category: this.vhQueryCafe.getlocalProduct(item.id_product).id_category } })\r\n\r\n      this.closeSearchCombosList.emit(this.choiceCombos)\r\n    }\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  } \r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerCombosList\" (nzOnClose)=\"goBack()\"\r\n    nzTitle=\"{{'Search for combos' | translate}}\">\r\n    <div *nzDrawerContent id=\"search-combos-popup\">\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <input id=\"inputSearchCombos\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n                    (ngModelChange)=\"searchCombos($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                    placeholder=\"{{ 'Search for side dishes name, barcode' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n                    <nz-list nzItemLayout=\"horizontal\">\r\n                        <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\"\r\n                            class=\"combos-item\" (click)=\"selectCombos(item)\">\r\n                            <nz-list-item-meta\r\n                                nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                                <nz-list-item-meta-title>\r\n                                    <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                                        {{item.name}}\r\n                                    </span>\r\n                                </nz-list-item-meta-title>\r\n                                <nz-list-item-meta-description>\r\n                                    <span\r\n                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                        {{item.subComboName}}\r\n                                    </span>\r\n                                </nz-list-item-meta-description>\r\n                            </nz-list-item-meta>\r\n                        </nz-list-item>\r\n                        <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n                        </nz-list-empty>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select combos---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceCombos.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseCombos()\">\r\n    <ng-container *nzModalContent>\r\n        <div *ngIf=\"!choiceCombos.manysize\" nz-row class=\"option-modal\">\r\n            <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceCombos.price)}}\r\n                    <s *ngIf=\"choiceCombos.price_origin > choiceCombos.price\"\r\n                        style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceCombos.price_origin)}}</s>\r\n                </div>\r\n                <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                    <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"choiceCombos.quantity\">\r\n                    </nz-input-number>\r\n                </div>\r\n                <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceCombos.price * choiceCombos.quantity)}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"font-size: 0.7rem;\">\r\n                    {{choiceCombos.subComboName}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                    <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceCombos.note\"\r\n                        [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterSelectFood>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseCombos()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchComboComponent } from './search-combo.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchComboComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule\r\n  ],\r\n  exports: [\r\n    SearchComboComponent\r\n  ]\r\n})\r\nexport class SearchComboModule { }","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\n@Component({\r\n  selector: 'app-search-product',\r\n  templateUrl: './search-product.component.html',\r\n  styleUrls: ['./search-product.component.scss']\r\n})\r\nexport class SearchProductComponent implements OnInit {\r\n  @Input(\"showDrawerProductList\") showDrawerProductList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output(\"closeSearchProductList\") closeSearchProductList: EventEmitter<any> = new EventEmitter();\r\n  /** Danh sách sản phẩm */\r\n  public foodList: any[] = this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(item => !item.delete_hidden || item.manysize).map(e => {\r\n    return { ...e, ...e.units[0], ptype: e.type }\r\n  })\r\n  /** Danh sách sản phẩm đã tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Sản phẩm được chọn */\r\n  public choiceFood: any = {};\r\n  /** Danh sách menu */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }]\r\n\r\n  indexTab: number = 0;\r\n  showOptions: boolean = false;\r\n  tempVal: string = ''\r\n  id_branch: string = this.vhQueryCafe.getDefaultBranch()._id\r\n  auto_hidden_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_hidden_lot\r\n  auto_select_lot: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  @Input() default_price_type: number\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n  ) { }\r\n  ngOnInit(): void {\r\n    this.getMenu()\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById(\"inputSearchDishes\").focus();\r\n    console.log(this.foodList);\r\n\r\n  }\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n  goBack() {\r\n    this.closeSearchProductList.emit(false);\r\n  }\r\n\r\n  getMenu() {\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == 1 || item.type == 3)\r\n    this.list_menu.forEach(item => this.listTabs.push(item));\r\n    this.searchList = [...this.foodList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n    console.log(this.searchList)\r\n  }\r\n  /**\r\n   * Tìm kiếm sản phẩm\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchFood(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length) this.searchList = this.vhAlgorithm.searchList(tempVal, this.foodList, ['name'])\r\n    else this.searchList = [...this.foodList]\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n  }\r\n\r\n  chooseProduct(item) {\r\n    this.closeSearchProductList.emit(item)\r\n  }\r\n\r\n  changeSub(value) {\r\n    let subChoice: any = this.choiceFood.subs.find(item => item._id == value)\r\n    if (subChoice) {\r\n      this.choiceFood['id_subproduct'] = value\r\n      this.choiceFood['price'] = subChoice.price\r\n      this.choiceFood['price_origin'] = subChoice.price_origin\r\n    }\r\n  }\r\n  /**\r\n      * Chọn sản phẩm để xử lý\r\n      * @param value dữ liệu sản phẩm được chọn\r\n      */\r\n  selectFoods(value) {\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    this.choiceFood = {\r\n      ...value,\r\n      dispatcher_done: dispatcher_done,\r\n      toppings: value.toppings, quantity: 1, note: \"\", price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, name: value.name, ptype: value.type, properties: value.properties, _id: value._id,\r\n      price: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, ratio: 1, units: value.units\r\n    }\r\n    if (value.lot_number) this.choiceFood['lot_number'] = value.lot_number;\r\n    if (value.lots) this.choiceFood['lots'] = value.lots;\r\n    if (value.id_lotproduct) this.choiceFood['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) this.choiceFood.id_subproduct = value.id_subproduct\r\n    // Lưu trữ các properties đã chon\r\n    if (this.choiceFood.properties) {\r\n      // sao chép mảng giá trị chọn\r\n      this.choiceFood.properties.forEach(element => {\r\n        element.active = true;\r\n        element.selectedValue = element.value[0]\r\n      });\r\n    }\r\n    // Kiểm tra topping\r\n    if (this.choiceFood.toppings) {\r\n      for (let topping of this.choiceFood.toppings) {\r\n        let data = this.vhQueryCafe.getlocalProduct(topping.id_product)\r\n        topping.quantity = topping.quantity\r\n        topping.name = data.name\r\n        topping.price_origin = this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price\r\n        topping.price =  this.default_price_type == 1 ? data.units[0].price : data.units[0].price2 ? data.units[0].price2 : data.units[0].price\r\n        topping.ratio = 1\r\n        topping.ptype = 4\r\n        topping._id = topping.id_product\r\n      }\r\n    }\r\n    if (this.choiceFood.type == 3 && this.choiceFood.lots) {\r\n      this.choiceFood.lots = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots, 'date_exp')\r\n      if (this.auto_hidden_lot) this.choiceFood.lots = this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime())\r\n\r\n      let min_date_exp = this.vhAlgorithm.sortDatebyASC(this.choiceFood.lots.filter(e => new Date(e.date_exp).getTime() >= new Date().getTime()), 'date_exp')\r\n\r\n      if (min_date_exp.length) {\r\n        this.choiceFood['id_lotproduct'] = min_date_exp[0]._id;\r\n        this.choiceFood['lot_number'] = min_date_exp[0].lot_number;\r\n      }\r\n\r\n    }\r\n\r\n    if (this.choiceFood) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n        if (this.choiceFood.toppings) {\r\n          this.choiceFood.toppings.forEach(topping => {\r\n            this.editPrice['topping-' + topping._id] = this.vhAlgorithm.vhnumeral(\".topping-\" + topping._id)\r\n          });\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    if (!item.ptype) {\r\n      let price = this.editPrice['price-' + item._id].getRawValue()\r\n      this.choiceFood.price = price ? parseFloat(price) : 0;\r\n      this.choiceFood.quantity = this.choiceFood.quantity > 0 ? this.choiceFood.quantity : 1\r\n    } else {\r\n      let price = this.editPrice['topping-' + item._id].getRawValue()\r\n      let index = this.choiceFood.toppings.findIndex(element => element._id == item._id)\r\n      if (index != -1) {\r\n        this.choiceFood.toppings[index].price = price ? parseFloat(price) : 0;\r\n        this.choiceFood.toppings[index].quantity = this.choiceFood.toppings[index].quantity > 0 ? this.choiceFood.toppings[index].quantity : 1\r\n      }\r\n    }\r\n  }\r\n\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n  chooseFood() {\r\n    this.showOptions = false;\r\n    if (this.choiceFood.toppings) this.choiceFood.toppings = this.choiceFood.toppings.filter(item => item.quantity)\r\n    console.log(this.choiceFood);\r\n\r\n    if (this.choiceFood.quantity) {\r\n      this.closeSearchProductList.emit(this.choiceFood)\r\n    }\r\n  }\r\n  /** Chọn danh mục\r\n   * @param event index danh mục được chọn\r\n  */\r\n  changeTypeGood(event) {\r\n    this.indexTab = event\r\n    let products = this.vhQueryCafe.getlocalDetailProducts().filter(item => item.type == 1 || item.type == 3).filter(item => !item.delete_hidden).map(item => {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, item.units.find(u => u.default).ratio)\r\n      return { ...item, ...unit }\r\n    })\r\n    if (event == 0) {\r\n      this.foodList = products.filter(item => !item.delete_hidden)\r\n    }\r\n    else {\r\n      this.foodList = products.filter(item => item.id_category == this.listTabs[event]._id);\r\n    }\r\n    this.searchFood(this.tempVal)\r\n  }\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQueryCafe.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n  }\r\n  changeLot(e) {\r\n    this.choiceFood.lot_number = this.choiceFood.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerProductList\" (nzOnClose)=\"goBack()\"\r\n  nzTitle=\"{{'Search dishes/ beverage' | translate}}\">\r\n  <div *nzDrawerContent id=\"search-product-popup\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\" (ngModelChange)=\"searchFood($event)\"\r\n          [ngModelOptions]=\"{standalone: true}\" nz-input\r\n          placeholder=\"{{ 'Search for product name, barcode' | translate}}\" />\r\n      </div>\r\n    </div>\r\n    <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n          <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n        </nz-tabset>\r\n        <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n          <nz-list nzItemLayout=\"horizontal\">\r\n            <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"product-item\"\r\n              (click)=\"selectFoods(item)\">\r\n              <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                <nz-list-item-meta-title>\r\n                  <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                    {{item.name}}\r\n                  </span>\r\n                  <span *ngIf=\"item.type== 3\" style=\"font-size: 0.75rem;display: block;\">\r\n                    {{'Stock'|translate}}:\r\n                    <span style=\"color: var(--ion-color-vh-orange)\">\r\n                      {{item.quantity_branch[id_branch]}}\r\n                      {{item.unit}}</span>\r\n                  </span>\r\n                </nz-list-item-meta-title>\r\n              </nz-list-item-meta>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n            </nz-list-empty>\r\n          </nz-list>\r\n        </cdk-virtual-scroll-viewport>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-drawer>\r\n\r\n\r\n<!-- ------------select food---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceFood.name}}\"\r\n  (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseFood()\">\r\n  <ng-container *nzModalContent>\r\n    <div class=\"ant-table-body\" style=\" max-height: 50vh; overflow-y: auto; overflow-x: hidden; padding: 0 8px\">\r\n      <div *ngIf=\"choiceFood.manysize\" nz-row class=\"option-modal\">\r\n\r\n        <div nz-col nzSpan=\"24\" class=\"items-food\">\r\n          <div nz-row style=\"width: 100%;\">\r\n            <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n              <input [ngClass]=\"'price-' + choiceFood._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceFood)\" \r\n              [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n              <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n                style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n            </div>\r\n            <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n              <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"choiceFood.quantity\">\r\n              </nz-input-number>\r\n            </div>\r\n            <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n              {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n            </div>\r\n            <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n              <nz-radio-group [(ngModel)]=\"choiceFood.id_subproduct\" (ngModelChange)=\"changeSub($event)\">\r\n                <label nz-radio *ngFor=\"let sub of choiceFood.subs ? choiceFood.subs : []; trackBy:myTrackByFunction\"\r\n                  [nzValue]=\"sub._id\">\r\n                  {{sub.name}} - {{vhAlgorithm.vhcurrencyunit(sub.price)}}\r\n                  <s *ngIf=\"sub.price < sub.price_origin\">{{vhAlgorithm.vhcurrencyunit(sub.price_origin) }}</s>\r\n                </label>\r\n              </nz-radio-group>\r\n            </div>\r\n            <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n              <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\" [ngModelOptions]=\"{standalone: true}\"\r\n                nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"!choiceFood.subs.length\">{{\"Not property yet\" | translate}}</div>\r\n      </div>\r\n      <div *ngIf=\"!choiceFood.manysize\" nz-row class=\"option-modal\">\r\n        <div nz-row style=\"width: 100%;\">\r\n          <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n            <input [ngClass]=\"'price-' + choiceFood._id\" maxlength=\"15\" (blur)=\"updatePrice(choiceFood)\" \r\n            [value]=\"vhAlgorithm.vhcurrencyunit(choiceFood.price)\" nz-input placeholder=\"{{'Price' | translate}}\" />\r\n            <s *ngIf=\"choiceFood.price_origin > choiceFood.price\"\r\n              style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceFood.price_origin)}}</s>\r\n          </div>\r\n          <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"choiceFood.quantity\">\r\n            </nz-input-number>\r\n          </div>\r\n          <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n            {{vhAlgorithm.vhcurrencyunit(choiceFood.price * choiceFood.quantity)}}\r\n          </div>\r\n          <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n            <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceFood.note\" [ngModelOptions]=\"{standalone: true}\"\r\n              nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Thuoc tinh -->\r\n      <div *ngIf=\"choiceFood.properties && choiceFood.properties.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Properties' | translate}}\r\n        </div>\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n          <nz-collapse nzGhost>\r\n            <nz-collapse-panel *ngFor=\"let properties of choiceFood.properties; let i = index\"\r\n              [nzHeader]=\"properties.name\" [nzActive]=\"properties.active\">\r\n              <nz-radio-group style=\"padding-left: 24px\" [(ngModel)]=\"properties.selectedValue\">\r\n                <label nz-radio *ngFor=\"let value of properties.value\" [nzValue]=\"value\">{{value}}</label>\r\n              </nz-radio-group>\r\n            </nz-collapse-panel>\r\n          </nz-collapse>\r\n        </div>\r\n      </div>\r\n      <!-- Mon phu -->\r\n      <div *ngIf=\"choiceFood.toppings && choiceFood.toppings.length\" nz-row class=\"option-modal\">\r\n        <div class=\"align-center\" nz-col nzSpan=\"24\" style=\"padding: 16px 0; font-weight: bold;\">\r\n          {{'Side dishes' | translate}}\r\n        </div>\r\n        <div nz-row class=\"option-modal\">\r\n\r\n          <div *ngFor=\"let item of choiceFood.toppings\" nz-col nzSpan=\"24\" class=\"items-food\">\r\n            <div nz-row style=\"width: 100%;\">\r\n              <div class=\"align-center price-edit\" nz-col nzSpan=\"7\">\r\n                {{item.name |translate}} <br>\r\n                <!-- {{vhAlgorithm.vhcurrencyunit(item.price)}} -->\r\n                <input [ngClass]=\"'topping-' + item._id\" maxlength=\"15\" [value]=\"vhAlgorithm.vhcurrencyunit(item.price)\"\r\n                  (blur)=\"updatePrice(item)\" nz-input placeholder=\"{{'Price' | translate}}\"   />\r\n              </div>\r\n              <div class=\"align-end text-align-center price-edit\"\r\n                style=\"display: flex;justify-content: space-evenly;align-items: flex-end;\" nz-col nzSpan=\"10\">\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity <= 0\"\r\n                  (click)=\"item.quantity = item.quantity - 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity > 0, 'btn-disabled': item.quantity <= 1}\">\r\n                  <i nz-icon nzType=\"minus\"></i>\r\n                </button>\r\n                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\">\r\n                </nz-input-number>\r\n                <button nz-button nzType=\"default\" [disabled]=\"item.quantity > 9999999998\"\r\n                  (click)=\"item.quantity = item.quantity + 1\"\r\n                  [ngClass]=\"{'btn-activate': item.quantity <= 9999999998, 'btn-disabled': item.quantity > 9999999998}\">\r\n                  <i nz-icon nzType=\"plus\"></i>\r\n                </button>\r\n              </div>\r\n              <div class=\" text-align-right\" style=\"display: flex;align-items: flex-end;justify-content: flex-end;\"\r\n                nz-col nzSpan=\"7\">\r\n                {{vhAlgorithm.vhcurrencyunit(item.price * item.quantity)}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n       <!-- chọn lô - hsd -->\r\n       <div *ngIf=\"choiceFood.lots\">\r\n        Chọn lô, hạn sử dụng của nguyên liệu\r\n        <nz-radio-group [(ngModel)]=\"choiceFood.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n          style=\"width:100%;padding: 8px 0;\">\r\n          <div nz-row *ngFor=\"let item of choiceFood.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n              <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                <div nz-row>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    {{item.lot_number}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\">\r\n                    HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                  </div>\r\n                  <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                    {{'Stock' | translate}}:\r\n                    <span style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/choiceFood.ratio\r\n                      | number : '1.0-2'}}</span>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </nz-radio-group>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #modalFooterSelectFood>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"selectFoodsCancel()\">\r\n      {{\"Cancel\" | translate}}\r\n    </button>\r\n    <button *ngIf=\"!choiceFood.manysize || choiceFood.subs.length\" nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"chooseFood()\">{{\"Add\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchProductComponent } from './search-product.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchProductComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule\r\n  ],\r\n  exports: [\r\n    SearchProductComponent\r\n  ]\r\n})\r\nexport class SearchProductModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-search-service',\r\n  templateUrl: './search-service.component.html',\r\n  styleUrls: ['./search-service.component.scss']\r\n})\r\nexport class SearchServiceComponent implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input(\"promotions\") promotions: any[] = []\r\n  @Input(\"showDrawerServiceList\") showDrawerServiceList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output(\"closeSearchServiceList\") closeSearchServiceList: EventEmitter<any> = new EventEmitter();\r\n  /**Danh sách dịch vụ */\r\n  public serviceList: any[] = this.vhQueryCafe.getlocalDetailProducts(VhType.SERVICE_SERVICETIME).filter(item => !item.delete_hidden).map(e => { return { ...e, ...e.units[0] } })\r\n  /**Dịch vụ được chọn */\r\n  choiceService: any = {}\r\n  /** Danh sách dịch vụ đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  /** Danh mục dịch vụ */\r\n  list_menu: any = [];\r\n  listTabs: Array<any> = [{ _id: 'all', name: 'All', type: 1 }]\r\n  indexTab: number = 0\r\n  @Input() default_price_type: number\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe, \r\n  ) { }\r\n  ngOnInit(): void {\r\n    this.list_menu = this.vhQueryCafe.getlocalCategorys(VhType.SERVICE)\r\n    this.list_menu.forEach(item => this.listTabs.push(item));\r\n    this.searchList = [...this.serviceList];\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById(\"inputSearchService\").focus();\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchServiceList.emit(false);\r\n  }\r\n  tempVal: string = ''\r\n  /**\r\n   * Tìm kiếm dịch vụ\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchService(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length) this.searchList = this.vhAlgorithm.searchList(tempVal, this.serviceList, ['name'])\r\n    else this.searchList = this.serviceList\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n  }\r\n  /**\r\n     * Chọn dịch vụ để xử lý\r\n     * @param value dữ liệu dịch vụ được chọn\r\n     */\r\n  selectService(value) {\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    this.choiceService = {\r\n      dispatcher_done: dispatcher_done,\r\n      ...value, \r\n      quantity: 1, \r\n      note: \"\", \r\n      price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,\r\n      price : this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,\r\n      ptype : value.type,\r\n    }\r\n\r\n    if (this.choiceService) {\r\n      if (value.type !== VhType.SERVICETIME) {\r\n        this.showOptions = true;\r\n        setTimeout(() => {\r\n          this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.closeSearchServiceList.emit(this.choiceService);\r\n      }\r\n    }\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue()\r\n    this.choiceService.price = price ? parseFloat(price) : 0;\r\n    this.choiceService.quantity = this.choiceService.quantity > 0 ? this.choiceService.quantity : 1\r\n  }\r\n  chooseService() {\r\n    this.showOptions = false;\r\n    if (this.choiceService['quantity']) {\r\n      this.closeSearchServiceList.emit(this.choiceService)\r\n    }\r\n  }\r\n\r\n  changeTypeGood(event) {\r\n    this.indexTab = event\r\n    let products = this.vhQueryCafe.getlocalDetailProducts(VhType.SERVICE_SERVICETIME).filter(item => !item.delete_hidden).map(e => {return {...e, ...e.units[0]}})\r\n    if (event == 0) {\r\n      this.serviceList = products \r\n    }\r\n    else {\r\n      this.serviceList = products.filter(item => item.id_category == this.listTabs[event]._id);\r\n    }\r\n    this.searchService(this.tempVal)\r\n  }\r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerServiceList\" (nzOnClose)=\"goBack()\"\r\n    nzTitle=\"{{'Search for service' | translate}}\">\r\n    <div *nzDrawerContent id=\"search-service-popup\">\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <input id=\"inputSearchService\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n                    (ngModelChange)=\"searchService($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                    placeholder=\"{{ 'Search for service name, barcode' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <nz-tabset (nzSelectedIndexChange)=\"changeTypeGood($event)\" [nzSelectedIndex]=\"indexTab\">\r\n                    <nz-tab *ngFor=\"let tab of listTabs\" nzTitle=\"{{tab.name | translate}}\"></nz-tab>\r\n                </nz-tabset>\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n                    <nz-list nzItemLayout=\"horizontal\">\r\n                        <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\" class=\"service-item\"\r\n                            (click)=\"selectService(item)\">\r\n                            <nz-list-item-meta\r\n                                nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                                <nz-list-item-meta-title>\r\n                                    <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                                        {{item.name}}\r\n                                    </span>\r\n                                </nz-list-item-meta-title>\r\n                            </nz-list-item-meta>\r\n                        </nz-list-item>\r\n                        <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n                        </nz-list-empty>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select service---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceService.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseService()\">\r\n    <ng-container *nzModalContent>\r\n        <div *ngIf=\"!choiceService.manysize\" nz-row class=\"option-modal\">\r\n            <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceService.price)}}\r\n                    <s *ngIf=\"choiceService.price_origin > choiceService.price\"\r\n                        style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceService.price_origin)}}</s>\r\n                </div>\r\n                <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                    <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"choiceService.quantity\">\r\n                    </nz-input-number>\r\n                </div>\r\n                <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceService.price * choiceService.quantity)}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                    <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceService.note\"\r\n                        [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterSelectFood>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseService()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchServiceComponent } from './search-service.component';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchServiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule\r\n  ],\r\n  exports: [\r\n    SearchServiceComponent\r\n  ]\r\n})\r\nexport class SearchServiceModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search-topping',\r\n  templateUrl: './search-topping.component.html',\r\n  styleUrls: ['./search-topping.component.scss']\r\n})\r\nexport class SearchToppingComponent implements OnInit {\r\n  // chương trình khuyến mãi đang được áp dụng\r\n  @Input(\"promotions\") promotions: any[] = []\r\n  @Input(\"showDrawerSideDishesList\") showDrawerSideDishesList: boolean = true;\r\n  // trả về product được chọn và đã xử lý cho bill-detail1\r\n  @Output(\"closeSearchSideDishesList\") closeSearchSideDishesList: EventEmitter<any> = new EventEmitter();\r\n  /**Danh sách topping */\r\n  public sideDishesList: any[] = this.vhQueryCafe.getlocalProducts().filter(item => !item.delete_hidden && item.type == 4).map(e => { return { ...e, ...e.units[0] } })\r\n  /**Topping được chọn để xử lý */\r\n  choiceSideDishes: any = {}\r\n  /**Danh sách topping đã được tìm kiếm */\r\n  public searchList: any[] = [];\r\n  @Input() default_price_type: number\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe, \r\n  ) { }\r\n  ngOnInit(): void {\r\n    this.searchList = [...this.sideDishesList]\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n  }\r\n  ngAfterViewInit() {\r\n    document.getElementById(\"inputSearchSideDishes\").focus();\r\n  }\r\n\r\n  myTrackByFunction(element: any, index: any) {\r\n    return element._id ? element._id : index\r\n  }\r\n\r\n  goBack() {\r\n    this.closeSearchSideDishesList.emit(false);\r\n  }\r\n  tempVal: string = ''\r\n  /**\r\n   * Tìm kiếm topping\r\n   * @param value giá trị tìm kiếm\r\n   */\r\n  searchSideDishes(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n\r\n    if (value.length) this.searchList = this.vhAlgorithm.searchList(tempVal, this.sideDishesList, ['name'])\r\n    else this.searchList = this.sideDishesList;\r\n    this.searchList = this.vhAlgorithm.sortVietnamesebyASC(this.searchList, 'name')\r\n  }\r\n\r\n  /**\r\n   * Chọn topping để xử lý\r\n   * @param value dữ liệu topping được chọn\r\n   */\r\n  selectSideDishes(value) {\r\n    let dispatcher_done = !this.vhQueryCafe.getLocalAppSettingNameBranch(\"dispatchers_enable\").dispatchers_enable\r\n    this.choiceSideDishes = {\r\n      dispatcher_done : dispatcher_done,\r\n      ...value, quantity: 1, note: \"\", price_origin: this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price, price : this.default_price_type == 1 ? value.price : value.price2 ? value.price2 : value.price,ptype : 4\r\n    }\r\n\r\n    if (this.choiceSideDishes) {\r\n      this.showOptions = true;\r\n      setTimeout(() => {\r\n        this.editPrice['price-' + value._id] = this.vhAlgorithm.vhnumeral(\".price-\" + value._id)\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  editPrice: any = {}\r\n  /**Thêm cleavejs chỉnh sửa giá món ăn */\r\n  updatePrice(item) {\r\n    let price = this.editPrice['price-' + item._id].getRawValue()\r\n    this.choiceSideDishes.price = price ? parseFloat(price) : 0;\r\n    this.choiceSideDishes.quantity = this.choiceSideDishes.quantity > 0 ? this.choiceSideDishes.quantity : 1\r\n  }\r\n  chooseSideDishes() {\r\n    this.showOptions = false;\r\n    if (this.choiceSideDishes['quantity']) {\r\n      this.closeSearchSideDishesList.emit(this.choiceSideDishes)\r\n    }\r\n  }\r\n \r\n  showOptions: boolean = false;\r\n  selectFoodsCancel() {\r\n    this.showOptions = false;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzVisible]=\"showDrawerSideDishesList\" (nzOnClose)=\"goBack()\"\r\n    nzTitle=\"{{'Search for side dishes' | translate}}\">\r\n    <div *nzDrawerContent id=\"search-side-dishes-popup\">\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <input id=\"inputSearchSideDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\"\r\n                    (ngModelChange)=\"searchSideDishes($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input\r\n                    placeholder=\"{{ 'Search for side dishes name, barcode' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"height: calc(100% - 35px); padding: 8px 0\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"56\" class=\"infinite-container ant-table-body\">\r\n                    <nz-list nzItemLayout=\"horizontal\">\r\n                        <nz-list-item *ngFor=\"let item of searchList; trackBy: myTrackByFunction\"\r\n                            class=\"side-dishes-item\" (click)=\"selectSideDishes(item)\">\r\n                            <nz-list-item-meta\r\n                                nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\">\r\n                                <nz-list-item-meta-title>\r\n                                    <span style=\"font-size: 0.9rem; color: var(--ion-color-vh-black)\">\r\n                                        {{item.name}}\r\n                                    </span>\r\n                                </nz-list-item-meta-title>\r\n                            </nz-list-item-meta>\r\n                        </nz-list-item>\r\n                        <nz-list-empty *ngIf=\"searchList.length === 0\" nzNoResult=\"{{'No data' | translate}}\">\r\n                        </nz-list-empty>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-drawer>\r\n\r\n<!-- ------------select sideDishes---------- -->\r\n<nz-modal [(nzVisible)]=\"showOptions\" [nzFooter]=\"modalFooterSelectFood\" nzTitle=\"{{choiceSideDishes.name}}\"\r\n    (nzOnCancel)=\"selectFoodsCancel()\" (nzOnOk)=\"chooseSideDishes()\">\r\n    <ng-container *nzModalContent>\r\n        <div *ngIf=\"!choiceSideDishes.manysize\" nz-row class=\"option-modal\">\r\n            <div nz-row style=\"width: 100%;\">\r\n                <div class=\"align-center\" nz-col nzSpan=\"10\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price)}}\r\n                    <s *ngIf=\"choiceSideDishes.price_origin > choiceSideDishes.price\"\r\n                        style=\"font-size: 0.8rem;\">{{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price_origin)}}</s>\r\n                </div>\r\n                <div class=\"align-center text-align-center\" nz-col nzSpan=\"6\">\r\n                    <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                        [(ngModel)]=\"choiceSideDishes.quantity\">\r\n                    </nz-input-number>\r\n                </div>\r\n                <div class=\"align-center text-align-right\" nz-col nzSpan=\"8\">\r\n                    {{vhAlgorithm.vhcurrencyunit(choiceSideDishes.price * choiceSideDishes.quantity)}}\r\n                </div>\r\n                <div class=\"align-center\" nz-col nzSpan=\"24\">\r\n                    <input class=\"order-note\" nzBorderless [(ngModel)]=\"choiceSideDishes.note\"\r\n                        [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Enter note' | translate}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterSelectFood>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"selectFoodsCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"chooseSideDishes()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SearchToppingComponent } from './search-topping.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchToppingComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    ScrollingModule\r\n  ],\r\n  exports: [\r\n    SearchToppingComponent\r\n  ]\r\n})\r\nexport class SearchToppingModule { }\r\n","import { AfterViewChecked, ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe, VhAuth, VhEinvoice } from 'ionic-vhframeworks';\r\nimport { NzModalRef, NzModalService } from 'ng-zorro-antd/modal';\r\nimport { Observable } from 'rxjs';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhOrderInvoices } from 'src/app/cafe/interface/vh-order-invoice';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { BillService } from 'src/app/cafe/services/bill.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { ProductService } from 'src/app/cafe/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit, AfterViewChecked {\r\n  dataRestore: any;\r\n  invoices: VhOrderInvoices = new VhOrderInvoices();\r\n  // cho phép nợ hay không\r\n  debt: boolean = false;\r\n  // thông tin bàn đang được đặt\r\n  tableInfo: string = '';\r\n  // trạng thái\r\n  statusInvoice: any = {\r\n    updating: false,\r\n    deleting: false\r\n  }\r\n  // thuộc tính máy in\r\n  printer: any;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private router: Router,\r\n    public vhAuth: VhAuth,\r\n    private languageService: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modal: NzModalService,\r\n    private productService: ProductService,\r\n    private vhEinvoice: VhEinvoice,\r\n    private billService: BillService,\r\n  ) {\r\n    let dataTrans: any = this.router.getCurrentNavigation().extras.state\r\n    if (dataTrans.dataRestore) this.dataRestore = dataTrans.dataRestore\r\n    this.initInvoice(dataTrans)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    Promise.all([\r\n      this.vhQueryCafe.getEarningPointsBills(),\r\n      this.vhQueryCafe.getEarningPointsProducts(),\r\n\r\n    ])\r\n      .then(([earning_point_bills, earning_points_products]) => {\r\n        this.list_earning_point_bills = earning_point_bills\r\n        this.list_earning_points_products = earning_points_products;\r\n        this.getClassAndProgram();\r\n      })\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    this.cdRef.detectChanges()\r\n  }\r\n  /**Pop up báo khi phát sinh lỗi */\r\n  alertErr(err) {\r\n    console.error(err)\r\n    this.vhComponent.showToast(2000, \"Lỗi kết nối\", \"alert-toast\")\r\n  }\r\n\r\n  /**Render food name */\r\n  renderNameFood(id_prod: string, id_subProd?: string) {\r\n    let food = this.vhQueryCafe.getlocalProduct(id_prod)\r\n    let subFood: any;\r\n\r\n    if (id_subProd)\r\n      subFood = food.subs.find(item => item._id == id_subProd)\r\n    return `${food ? food.name : ''} ${subFood ? '(' + subFood.name + ')' : ''}`\r\n  }\r\n  /**Render các thành phần combo */\r\n  renderSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity} ${item.name}`\r\n      else subName += `${item.quantity} ${item.name}`\r\n    })\r\n    return subName\r\n  }\r\n  /**Khởi tạo hóa đơn */\r\n  initInvoice({ invoice, invoiceDetail }) {\r\n    // lấy thuế \r\n    let tax: any = this.vhQueryCafe.getlocalTaxs().find(tax => tax.status && tax.default);\r\n    if (tax) this.invoices.setTax(parseFloat(tax.value))\r\n    if (invoice && invoiceDetail) {\r\n      this.invoices = new VhOrderInvoices(invoice, invoiceDetail, this.vhQueryCafe)\r\n      // kiểm tra cho phép nợ\r\n      this.debt = this.invoices.getIdPartner() == \"id_retail\" ? false :\r\n        this.vhQueryCafe.getlocalCustomer(this.invoices.getIdPartner())\r\n    }\r\n\r\n    // lấy thông tin bàn\r\n    if (this.invoices.getIdTable() == \"go_home\") {\r\n      this.tableInfo = this.languageService.translate(\"Take away\")\r\n    } else {\r\n      this.tableInfo = `${this.vhQueryCafe.getlocalArea(this.invoices.getIdArea()).name} - ${this.vhQueryCafe.getlocalTable(this.invoices.getIdTable()).name}`\r\n    }\r\n\r\n  }\r\n  /**Save hóa đơn */\r\n  saveProcess() {\r\n    this.productService.updateAllServiceTimeToPause(this.invoices.getInvoiceDetail());\r\n    return this.vhQueryCafe.updateBill_Billdetail(this.invoices.getID(), this.invoices.getCreateUpdateInvoice(), this.invoices.getCreateUpdateInvoiceDetail())\r\n  }\r\n  saveInvoice() {\r\n    this.statusInvoice['saving'] = true\r\n    const bill: any = {...this.invoices};\r\n    const invoiceTemp = {...bill?.invoice};\r\n    this.saveProcess().then(async (res) => {\r\n      if(this.cqt_submit_invoice_immediately) await this.handleMinvoice(invoiceTemp);\r\n      this.vhComponent.showToast(2000,\r\n        `${this.languageService.translate(\"Sales invoice\")} ${this.invoices.getBillCode()} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n      )\r\n      this.exitPage = true;\r\n      this.router.navigate(['/cafe/dashboard/management/invoice/order-invoice'], { state: { ...this.dataRestore, reload: true } })\r\n    })\r\n\r\n  }\r\n\r\n\r\n  ///////////////////////////////////////////////GO BACK////////////////////////////////////////////////////\r\n  exitPage: boolean = false;\r\n  popUpExit() {\r\n    return new Promise<{ save: boolean, exit: boolean }>(resolve => {\r\n      const modal: NzModalRef = this.modal.create({\r\n        nzTitle: this.languageService.translate(\"Confirm\"),\r\n        nzContent: this.languageService.translate(\"Are you sure to cancel the sales invoice\") + \"?\",\r\n        nzFooter: [\r\n          {\r\n            label: this.languageService.translate(\"Cancel\"),\r\n            onClick: () => {\r\n              modal.destroy()\r\n              resolve({ save: false, exit: false })\r\n            }\r\n          },\r\n          {\r\n            label: 'OK',\r\n            type: 'primary',\r\n            onClick: () => {\r\n              modal.destroy()\r\n              resolve({ save: false, exit: true })\r\n            }\r\n          }\r\n        ]\r\n      })\r\n    })\r\n  }\r\n  goBack() {\r\n    this.popUpExit().then(({ save, exit }) => {\r\n      this.exitPage = exit;\r\n      if (exit) {\r\n        this.router.navigate(['/cafe/dashboard/management/invoice/order-invoice'], { state: this.dataRestore })\r\n      }\r\n    })\r\n  }\r\n\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    if (!this.exitPage) {\r\n      this.popUpExit().then(({ save, exit }) => {\r\n        this.exitPage = exit;\r\n        if (exit) {\r\n          if (nextState.url != 'cafe/dashboard/management/invoice/order-invoice')\r\n            this.router.navigate([nextState.url])\r\n          else\r\n            this.router.navigate(['/cafe/dashboard/management/invoice/order-invoice'], { state: this.dataRestore })\r\n        }\r\n      })\r\n    } return this.exitPage;\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này để xóa tất cả promotion trong bill và update\r\n   */\r\n  deletePromotions() {\r\n    this.destroyBillDetails_withPromotions().then(() => {\r\n\r\n    })\r\n  }\r\n\r\n  destroyBillDetails_withPromotions() {\r\n    this.invoices.setBillHavePromotion(false)\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQueryCafe.destroyBillDetails_withPromotions(this.invoices.getInvoiceDetail()).map(item => { return { ...item, _id: item._id ? item._id : true } })\r\n      console.log(bill_details);\r\n\r\n      this.invoices = new VhOrderInvoices(this.invoices.getCreateUpdateInvoice(5), bill_details, this.vhQueryCafe)\r\n      this.invoices.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true)\r\n    })\r\n\r\n  }\r\n  isGotPromotion = false;\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n      for (let i in this.product_gift_type7) {\r\n        // this.product_gift_type7[i].products_gift = this.product_gift_type7[i].products_gift.filter(item => item.choose).map(e => { return { ...e } })\r\n        if (this.product_gift_type7[i].products_gift.length) this.invoices.addBill_detail_promotion(this.product_gift_type7[i])\r\n      }\r\n    console.log(this.invoices.getInvoiceDetail());\r\n    this.gotten_gift_type7 = true;\r\n  }\r\n  /**\r\n   * hàm lấy quà\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        this.vhQueryCafe.changeBillDetails_withPromotions(this.invoices.getInvoiceDetail(), this.invoices.getDate()).then((bill_details_display: any) => {\r\n\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_0to6)\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_7)\r\n\r\n          this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC([...bill_details_display.bill_details_pmtype_7], 'total_bill_value')\r\n          this.isGotPromotion = true;\r\n          this.vhComponent.hideLoading(0)\r\n          this.invoices = new VhOrderInvoices(this.invoices.getCreateUpdateInvoice(5), [...bill_details_display.bill_details_pmtype_0to6,], this.vhQueryCafe,);\r\n          // if (bill_details_display.filter(item => item.products_gift).length) this.showProductGift = true;\r\n          this.getEarningpointPromotion();\r\n\r\n          // this.product_gift_type7 = [...bill_details_display.bill_details_pmtype_7]\r\n          this.handlePromotionType7(this.bill_details_pmtype_7)\r\n\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length) {\r\n      if (bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.invoices.getTotalATax()) != -1)\r\n        this.product_gift_type7 = [bill_details_pmtype_7[bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.invoices.getTotalATax())]]\r\n      else this.product_gift_type7 = []\r\n      this.showProductGiftType7 = true\r\n    }\r\n    else this.product_gift_type7 = []\r\n    // console.log(this.product_gift_type7);\r\n  }\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(product.lots, 'date_exp')\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach(element => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(element.lots, 'date_exp')\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    for (let i of this.invoices.getInvoiceDetail()) {\r\n      if (i.pmtype) this.invoices.setBillHavePromotion(true);\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n        }\r\n      }\r\n      if (i.products) {\r\n        for (let product of i.products) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n        }\r\n      }\r\n      if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n    }\r\n    this.invoices.setSubTotal();\r\n    this.vhQueryCafe.updateBill_Billdetail(this.invoices.getID(), this.invoices.getCreateUpdateInvoice(5), this.invoices.getCreateUpdateInvoiceDetail())\r\n      .then(() => {\r\n        console.log(\"success\");\r\n      })\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (data.products_gift.filter(item => item.choose).length == data.promotions_maximum) return true;\r\n    else return false\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQueryCafe.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (this.program_bill && this.invoices.getSubTotal() > this.program_bill.bill_total_minimum) {\r\n      let subTotal = this.invoices.getSubTotal();\r\n      if (!this.program_bill.include_promotion_product) { // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion()\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoices.getDiscount() - this.invoices.getDiscountBill()\r\n\r\n        if (this.program_bill.include_paid_points && this.invoices.getDiscountPoint()) subTotal = subTotal - this.invoices.getDiscountPoint()\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoices.getTax() / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.invoices.getSubTotal();\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoices.getDiscount() - this.invoices.getDiscountBill()\r\n\r\n        if (this.program_bill.include_paid_points && this.invoices.getDiscountPoint()) subTotal = subTotal - this.invoices.getDiscountPoint()\r\n        if (this.program_bill.include_fee) subTotal += this.invoices.getFee();\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoices.getTax() / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  /**\r\n  * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n  * return : number\r\n  */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoices.getInvoiceDetail().filter(item => !item.id_promotion).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoices.getInvoiceDetail()\r\n      .filter(item => item.price_origin == item.price && products_of_program_earnig_product.find(i => i == item.id_product || i == item.id_subproduct))\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) { // tích điểm sp ko có km \r\n        subTotal = this.getSubTotalNotPromotionOFProduct(this.program_product.products);\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {// tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = products.filter(item => item.price_origin == item.price && this.program_product.products.find(i => i == item.id_product)).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n  earning_point: number = 0;\r\n  /**\r\n  * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n  */\r\n  getClassAndProgram() {\r\n    let customer = this.vhQueryCafe.getlocalCustomer(this.invoices.getIdPartner());\r\n    this.customer_class = this.vhQueryCafe.getlocalCustomerClasss().find(item => item._id == customer.id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(item => item._id == this.customer_class.id_earning_points_bill);\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(item => item._id == this.customer_class.id_earning_points_product);\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n  }\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point = this.getEarningProduct(this.invoices.getInvoiceDetail()) + this.getEarningBill();\r\n    return this.earning_point ? this.earning_point : 0\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n  /* ----------------------------------------------------------- HÓA ĐƠN ĐIỆN TỬ ---------------------------------------------------------- */\r\n\r\n  cqt_invoice_auto_sign: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_invoice_auto_sign\r\n  cqt_submit_invoice_immediately: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').cqt_submit_invoice_immediately\r\n\r\n  handleMinvoice(bill) {\r\n    return new Promise((resolve, reject) => {\r\n      // lấy ra chi nhánh hiện tại\r\n      let currentBranch = this.vhQueryCafe.getlocalBranch(this.vhQueryCafe.getDefaultBranch()._id);\r\n\r\n      if (!currentBranch.einvoices) {\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chưa có tạo kết nối hóa đơn điện tử\r\n      if (!currentBranch.einvoices?.length) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp đã gửi lên cqt rồi thì khỏi\r\n      if(bill.cqt_status == 2 || bill.cqt_status == 3){\r\n        resolve(true)\r\n        return\r\n      }\r\n      // trường hợp chỉ có 1 kết nối hóa đơn điện tử thì tạo thẳng luôn\r\n      if (currentBranch.einvoices.length && currentBranch.einvoices.length == 1) {\r\n        if (!currentBranch.einvoices[0].invoiceSeries.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please connect e-invoice for this branch\"))\r\n          resolve(true)\r\n          return\r\n        }\r\n        this.billService.changeBill_byLocal_toInvoice_byMinvoice(bill._id, currentBranch.einvoices[0].invoiceSeries[0])\r\n          .then((rsp) => {\r\n            console.log('changeBill_toInvoice_byMinvoice', rsp)\r\n            if (rsp.vcode == 0) {\r\n              if (this.cqt_invoice_auto_sign) {\r\n                this.vhEinvoice.saveInvoice_Sign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log('saveInvoice_Sign_byMinvoice', res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 3\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 3 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                     \r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n              else {\r\n                this.vhEinvoice.saveInvoice_noSign_byMinvoice(currentBranch.taxcode, currentBranch.einvoices[0].token, 1, rsp.data)\r\n                  .then((res: any) => {\r\n                    console.log(res);\r\n                    if (res.code == '00') {\r\n                      bill.cqt_status = 2\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 2 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      }, error => {\r\n                        console.log('error', error);\r\n                      })\r\n                    }\r\n                    else if (res.code == '9999') {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng kiểm tra lại thông tin hóa đơn đẩy lên CQT chưa phù hợp\"))\r\n                    }\r\n                    else {\r\n                      \r\n                      bill.cqt_status = 1\r\n                      this.vhQueryCafe.updateBill(bill._id, { cqt_status: 1 }).then((bool: any) => {\r\n                        console.log('updateBill', bool);\r\n                        resolve(true)\r\n                      })\r\n                      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('An error occurred while sending the invoice to CQT'))\r\n                    }\r\n                  })\r\n              }\r\n            }\r\n          }, (error: any) => {\r\n            console.log('error', error)\r\n            resolve(true)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout>\r\n    <nz-content>\r\n        <div nz-row class=\"row\">\r\n            <div nz-col [nzSpan]=\"17\" class=\"col-left\" style=\"padding: 4px\">\r\n                <app-bill-detail1 [invoices]=\"invoices\" [tableInfo]=\"tableInfo\" (checkPromotion)=\"getPromotions()\" (deletePromotion)=\"deletePromotions()\" ></app-bill-detail1>\r\n            </div>\r\n            <div nz-col [nzSpan]=\"7\" class=\"col-right\">\r\n                <div class=\"ant-table-body\">\r\n                    <app-info-bill1 style=\"padding: 4px\" [invoices]=\"invoices\" [employeeID]=\"invoices.getIdEmployee()\"\r\n                        [tableInfo]=\"tableInfo\">\r\n                    </app-info-bill1>\r\n                    <app-customer1 style=\"padding: 4px\" [invoices]=\"invoices\" [customerID]=\"invoices.getIdPartner()\"\r\n                        (changeDebt)=\"debt = $event\"  [total_earning_points]=\"getTotalEarningPoint()\">\r\n                    </app-customer1>\r\n                    <app-bill1 style=\"padding: 4px\" [id_partner]=\"invoices.getIdPartner()\" [invoices]=\"invoices\" [debt]=\"debt\" [tax]=\"invoices.getTax()\"\r\n                        [paymentType]=\"invoices.getPaymentType() == 3 ? [invoices.getPaymentType(), invoices.getIdWallet()]: [invoices.getPaymentType()]\">\r\n                    </app-bill1>\r\n                </div>\r\n                <app-payment-button1 style=\"padding: 4px\" [invoices]=\"invoices\" [statusInvoice]=\"statusInvoice\"\r\n                    (save)=\"saveInvoice()\">\r\n                </app-payment-button1>\r\n            </div>\r\n        </div>\r\n    </nz-content>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { EditComponent } from './edit.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { BillDetail1Module } from './components/bill-detail1/bill-detail1.module';\r\nimport { Customer1Module } from './components/customer1/customer1.module';\r\nimport { InfoBill1Module } from './components/info-bill1/info-bill1.module';\r\nimport { Bill1Module } from './components/bill1/bill1.module';\r\nimport { PaymentButton1Module } from './components/payment-button1/payment-button1.module';\r\nimport { CanLeavePage } from 'src/app/cafe/desktop/canLeavePage';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: EditComponent,\r\n    canDeactivate: [CanLeavePage]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [EditComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes),\r\n    BillDetail1Module,\r\n    Customer1Module,\r\n    InfoBill1Module,\r\n    Bill1Module,\r\n    PaymentButton1Module\r\n  ]\r\n})\r\nexport class EditModule { }\r\n"],"names":["VhOrderInvoices","EditComponent","constructor","vhAlgorithm","vhQueryCafe","router","vhAuth","languageService","vhComponent","cdRef","modal","productService","vhEinvoice","billService","updating","deleting","getLocalAppSettingNameBranch","cqt_invoice_auto_sign","cqt_submit_invoice_immediately","dataTrans","getCurrentNavigation","extras","state","dataRestore","initInvoice","ngOnInit","Promise","all","getEarningPointsBills","getEarningPointsProducts","then","earning_point_bills","earning_points_products","list_earning_point_bills","list_earning_points_products","getClassAndProgram","ngAfterViewChecked","detectChanges","alertErr","err","console","error","showToast","renderNameFood","id_prod","id_subProd","food","getlocalProduct","subFood","subs","find","item","_id","name","renderSubCombo","arr","subName","forEach","length","quantity","invoice","invoiceDetail","tax","getlocalTaxs","status","default","invoices","setTax","parseFloat","value","debt","getIdPartner","getlocalCustomer","getIdTable","tableInfo","translate","getlocalArea","getIdArea","getlocalTable","saveProcess","updateAllServiceTimeToPause","getInvoiceDetail","updateBill_Billdetail","getID","getCreateUpdateInvoice","getCreateUpdateInvoiceDetail","saveInvoice","statusInvoice","bill","invoiceTemp","res","handleMinvoice","getBillCode","exitPage","navigate","reload","popUpExit","resolve","create","nzTitle","nzContent","nzFooter","label","onClick","destroy","save","exit","type","goBack","checkDeactivate","currentRoute","currentState","nextState","url","deletePromotions","destroyBillDetails_withPromotions","setBillHavePromotion","bill_details","map","log","setSubTotal","product_gift_type7","bill_details_pmtype_7","handleAddGiftType7","showProductGiftType7","gotten_gift_type7","i","products_gift","addBill_detail_promotion","getPromotions","showLoading","changeBillDetails_withPromotions","getDate","bill_details_display","handleChooseLotForPromotion","bill_details_pmtype_0to6","sortNumberbyASC","isGotPromotion","hideLoading","getEarningpointPromotion","handlePromotionType7","findLastIndex","e","total_bill_value","getTotalATax","promotion","product","lots","min_date_exp","sortDatebyASC","lot_number","combos","element","pmtype","earning_points_product","getTotalEarningPointProduct","products","id_promotion","checkDisableChooseProductGift","data","filter","choose","promotions_maximum","getUnit","units","ratio","getUnit_byRatio","unit","getLotNumber","lot","getEarningBill","program_bill","getSubTotal","bill_total_minimum","subTotal","include_promotion_product","getSubTotalNotPromotion","include_discount","getDiscount","getDiscountBill","include_paid_points","getDiscountPoint","include_fee","getFee","include_tax","getTax","exchange","money","points","reduce","prev","next","price","getSubTotalNotPromotionOFProduct","products_of_program_earnig_product","price_origin","id_product","id_subproduct","getEarningProduct","program_product","customer","customer_class","getlocalCustomerClasss","id_customer_class","id_earning_points_bill","id_earning_points_product","getTotalEarningPoint","earning_point","reject","currentBranch","getlocalBranch","getDefaultBranch","einvoices","_a","alertMessageDesktop","cqt_status","invoiceSeries","changeBill_byLocal_toInvoice_byMinvoice","rsp","vcode","saveInvoice_Sign_byMinvoice","taxcode","token","code","updateBill","bool","saveInvoice_noSign_byMinvoice","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}