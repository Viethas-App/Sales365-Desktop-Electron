{"version":3,"file":"src_app_cafe_desktop_menu_management_reports_best-selling-dishes_best-selling-dishes_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/reports/best-selling-dishes/best-selling-dishes.component.ts","./src/app/cafe/desktop/menu/management/reports/best-selling-dishes/best-selling-dishes.component.html","./src/app/cafe/desktop/menu/management/reports/best-selling-dishes/best-selling-dishes.module.ts"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { DatePipe } from '@angular/common';\r\nimport { Router } from '@angular/router';\r\nimport ApexCharts, { ApexOptions } from 'apexcharts';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { TopReport } from 'src/app/cafe/interface/vh-report';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n@Component({\r\n  selector: 'app-best-selling-dishes',\r\n  templateUrl: './best-selling-dishes.component.html',\r\n  styleUrls: ['./best-selling-dishes.component.scss']\r\n})\r\nexport class BestSellingDishesComponent {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  dataReport: TopReport = this.initDataReport();\r\n  // đồ thị\r\n  chart: ApexCharts;\r\n  dataColor: Array<any> = [\"#Ffda45\", \"#48c0e3\", \"#f9be57\", \"#ee3d85\", \"#f8756d\", \"#c667ca\", \"#d6df3a\", \"#06467b\", \"#3c86c7\", \"#1fd2cd\", \"#F8765B\"];\r\n  type: \"sales\" | \"quantity\" = \"sales\";\r\n  useBranch: boolean = this.fncService.checkUsingBranch()\r\n  branchList: Array<any> = []\r\n  id_branch_report: string = ''\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private cdRef: ChangeDetectorRef,\r\n    private datePipe: DatePipe,\r\n    public router: Router,\r\n    private fncService: FunctionService,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    this.getBranches()\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.chart = new ApexCharts(document.querySelector(\"#chart-top-products\"), this.initOption([], []));\r\n    this.chart.render();\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    this.cdRef.detectChanges()\r\n  }\r\n  showReport() {\r\n    this.getData()\r\n  }\r\n  /**\r\n   * get chi nhánh được xem báo cáo của user\r\n   */\r\n  getBranches() {\r\n    let branches = [...this.vhQueryCafe.getlocalBranchs()] // danh sách toàn bộ chi nhánh\r\n    let employee = this.vhAuth.getUser() // thông tn nhân viên\r\n    let defaultBranch = this.vhQueryCafe.getDefaultBranch()._id // chi nhánh mặc định khi đăng nhập (lấy id chi nhánh)\r\n\r\n    if (this.useBranch) { // kiểm tra xem có 2 chi nhánh trở lên\r\n\r\n      if (employee['owner'] == 'boss') { // kiểm tra tài khoản đăng nhập là boss\r\n        this.branchList = branches // gán danh sách chi nhánh show ra HTML\r\n        if (this.branchList.length > 1) this.branchList.unshift({ _id: \"all\", name: \"All\" })\r\n        this.id_branch_report = defaultBranch // gán mặc định chi nhánh mặc định xem báo cáo là chi nhánh đăng nhập vô\r\n      }\r\n\r\n      else { // trường hợp tài khoản là nhân viên\r\n        this.vhAuth.getPermission(employee['_id']).then(result => { // get quyền nhân viên được xem báo cáo chi nhánh nào\r\n          branches.forEach(item => {\r\n            if (result[`${item._id}_view_report_branch`]) this.branchList.push({ ...item }) // kiểm tra chi nhánh đc xem báo cáo, gán cho branchList show ra HMLT \r\n          })\r\n          if (this.branchList.length > 1) { // trường hợp được xem báo cáo 2 chi nhánh trở lên\r\n            this.branchList.unshift({ _id: \"all\", name: \"All\" }) // đẩy xem tất cả vô, nếu có 2 chi nhánh trở lên\r\n            for (let i in this.branchList) {\r\n              if (this.branchList[i]._id == defaultBranch) return this.id_branch_report = defaultBranch // nếu có gán chi nhánh xem báo mặc định là chi nhánh mặc định (đăng nhập)\r\n              else this.id_branch_report = this.branchList[1]._id // ngược lại gán chi nhánh mặc định là chi nhánh thứ 1\r\n            }\r\n          }\r\n          else if (this.branchList.length == 1) { // nếu chỉ đc xem báo cáo 1 chi nhánh , lấy mặc định là chi nhánh đó\r\n            this.id_branch_report = this.branchList[0]._id\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"warning\", \"Bạn không được chọn chi nhánh xem báo cáo\") // kg có chi nhánh xem báo cáo\r\n        })\r\n      }\r\n    } else this.id_branch_report = defaultBranch // chỉ xài 1 chi nhánh \r\n\r\n  }\r\n\r\n  initDataReport(startTime: Date = new Date(), endTime: Date = new Date()): TopReport {\r\n    startTime.setHours(0, 0, 0, 0)\r\n    endTime.setHours(23, 59, 59, 59)\r\n\r\n    return { startTime, endTime, sales: [], quantity: [] }\r\n  }\r\n\r\n  /**\r\n   * gán dữ liệu cho chart\r\n   * @param series \r\n   * @param labels \r\n   * @returns \r\n   */\r\n  initOption(series, labels): ApexOptions {\r\n    return {\r\n      series: series,\r\n      chart: { type: \"pie\" },\r\n      dataLabels: {\r\n        dropShadow: { enabled: false }\r\n      },\r\n      colors: this.dataColor,\r\n      labels: labels,\r\n      fill: { type: \"solid\", colors: this.dataColor },\r\n      legend: { show: false },\r\n      yaxis: {\r\n        labels: { formatter: (value) => { return (this.type == \"sales\" ? this.vhAlgorithm.vhcurrencyunit_symbol(value) : value.toString()) } }\r\n      },\r\n      states: {\r\n        active: { filter: { type: \"none\" } },\r\n        normal: { filter: { type: \"none\" } },\r\n        hover: { filter: { type: \"none\" } }\r\n      },\r\n      noData: {\r\n        text: (this.languageService.translate('No data!'))\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <=  this.fncService.checkDateReport() * 86000000) {\r\n      this.dataReport = this.initDataReport(event[0], event[1])\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n      this.dataReport = this.initDataReport(new Date(this.date[0]), new Date(this.date[1]))\r\n      \r\n    }\r\n  }\r\n\r\n  changeType(type) {\r\n    this.chart.updateOptions(this.initOption(this.dataReport[type].map(prod => prod.value), this.dataReport[type].map(prod => prod.label)))\r\n  }\r\n\r\n  /**Hàm get dữ liệu */\r\n  getData() {\r\n    //console.log(this.dataReport['startTime'], this.dataReport['endTime'])\r\n    this.vhComponent.showLoading(\"\").then(() => {\r\n      this.vhQueryCafe.getReportSales_Products_byProducts(this.dataReport['startTime'], this.dataReport['endTime'], \"all\", 1, this.id_branch_report).then(res => {\r\n        this.dataReport['sales'] = this.transformTop10(res.docs.map(prod => { return { label: prod.name, value: prod['sales_atax'] } }).sort((prev, next) => next.value - prev.value))\r\n        this.dataReport['quantity'] = this.transformTop10(res.docs.map(prod => { return { label: prod.name, value: prod['quantity'] } }).sort((prev, next) => next.value - prev.value))\r\n        this.changeType(this.type)\r\n      }).finally(() => this.vhComponent.hideLoading(0))\r\n    })\r\n  }\r\n  private transformTop10(array: Array<{ label: string, value: number }>): Array<{ label: string, value: number }> {\r\n    let dataFresh: Array<{ label: string, value: number }> = []\r\n    if (array.length > 10) {\r\n      let sales_other = { label: this.languageService.translate(\"Others\"), value: 0 }\r\n      for (let i = 10; i < array.length; i++) {\r\n        sales_other['value'] += array[i].value\r\n      }\r\n      dataFresh = array.slice(0, 10); dataFresh.push(sales_other)\r\n    } else dataFresh = [...array]\r\n    for (let i = 0; i < dataFresh.length; i++) {\r\n      dataFresh[i]['color'] = this.dataColor[i]\r\n    }\r\n    return dataFresh\r\n  }\r\n  /////////////////////////////////////////////Xuất báo cáo///////////////////////////////////////////////////\r\n  status: boolean = false;\r\n  downloadImg() {\r\n    this.status = true\r\n    this.vhComponent.downloadImg(\"chart-image\",\r\n      `${this.languageService.translate(\"_best_selling_dishes_report\")}_${this.languageService.translate(\"_from\")}_${this.format_date(this.dataReport.startTime)}_${this.languageService.translate(\"_to\")}_${this.format_date(this.dataReport.endTime)}_${this.id_branch_report == \"all\" ? \"\" : this.vhAlgorithm.changeAlias(this.vhQueryCafe.getlocalBranch(this.id_branch_report).name).replace(/\\s/g, \"_\")}`).then(() => this.status = false)\r\n  }\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd_MM_yyyy\")\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/report']);\r\n  }\r\n\r\n  /** */\r\n  indexTab: number = 0;\r\n  listTab: Array<any> = [{ _id: 0, name: \"sales\", type: \"sales\" }, { _id: 1, name: \"Quantity\", type: \"quantity\" }]\r\n  areaChanged(id) {\r\n    this.type = this.listTab[id].type\r\n    this.changeType(this.type)\r\n  }\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col [nzSpan]=\"useBranch ? 5:9\" class=\"title left-all-content\">\r\n            <b>{{'Best-selling dishes'|translate}}</b>\r\n        </div>\r\n        <div nz-col [nzSpan]=\"useBranch ? 7 :8\">\r\n            <nz-range-picker nzFormat='dd/MM/yyyy'   [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n        </div>\r\n        <div nz-col *ngIf=\"useBranch\" nzSpan=\"5\" class=\"center-all-content\">\r\n            <nz-select nzShowSearch nzBorderless nzPlaceHolder=\"{{'Select branch' | translate}}\"\r\n                [(ngModel)]=\"id_branch_report\">\r\n                <nz-option *ngFor=\"let option of branchList\" nzLabel=\"{{option.name| translate}}\"\r\n                    nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"right-all-content\">\r\n            <div>\r\n                <button (click)=\"downloadImg()\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                    {{'Download' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button [disabled]=\"!id_branch_report.length\" class=\"btn-view center-all-content\" nz-button\r\n                    nzType=\"default\" (click)=\"showReport()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-tabset nzSelectedIndex=\"{{indexTab}}\">\r\n                <nz-tab (nzSelect)=\"areaChanged(tab._id)\" *ngFor=\"let tab of listTab\"\r\n                    nzTitle=\"{{ tab.name |translate}}\">\r\n                </nz-tab>\r\n            </nz-tabset>\r\n        </div>\r\n    </div>\r\n\r\n    <div id=\"chart-image\">\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"12\">\r\n                <div id=\"chart-top-products\"></div>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <div class=\"scroll\" *ngFor=\"let i of dataReport[type]\">\r\n                    <div class=\"khung_l\" [style.backgroundColor]=\"i.color\"></div>\r\n                    <div class=\"title_l max-width-overflow\">{{i.label}}</div>\r\n                    <div class=\"total_l\">{{type == 'quantity' ? i.value :\r\n                        vhAlgorithm.vhcurrencyunit_symbol(i.value)}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BestSellingDishesComponent } from './best-selling-dishes.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: BestSellingDishesComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [BestSellingDishesComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class BestSellingDishesModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}