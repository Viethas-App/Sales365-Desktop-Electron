{"version":3,"file":"src_app_cafe_desktop_menu_management_reports_sales-combo_sales-combo_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/reports/sales-combo/sales-combo.component.ts","./src/app/cafe/desktop/menu/management/reports/sales-combo/sales-combo.component.html","./src/app/cafe/desktop/menu/management/reports/sales-combo/sales-combo.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { SalesChartTableReport } from 'src/app/cafe/interface/vh-report';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport ApexCharts, { ApexOptions } from 'apexcharts';\r\nimport { DatePipe } from '@angular/common';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-sales-combo',\r\n  templateUrl: './sales-combo.component.html',\r\n  styleUrls: ['./sales-combo.component.scss']\r\n})\r\nexport class SalesComboComponent {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  selectedValue: any = 'all';\r\n  listCombo: any = [{ _id: 'all', name: this.languageService.translate('All') }]\r\n  heightScroll: string;\r\n  listData: any = [];\r\n\r\n  reportConfig: any = {\r\n    sales_btax : this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').show_btax_report_sales_combo\r\n  }\r\n  dataReport: SalesChartTableReport = this.initDataReport()\r\n  chart: ApexCharts;\r\n  isChart: boolean = false; // false là bảng true là chart\r\n  sales_combo: any = new Object({ _id: 'all' });\r\n  dataColor: Array<any> = [\"#Ffda45\", \"#48c0e3\", \"#f9be57\", \"#ee3d85\", \"#f8756d\", \"#c667ca\", \"#d6df3a\", \"#06467b\", \"#3c86c7\", \"#1fd2cd\", \"#373737\"];\r\n  useBranch: boolean = this.fncService.checkUsingBranch()\r\n  branchList: Array<any> = []\r\n  id_branch_report: string = ''\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    private datePipe: DatePipe,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    this.getBranches()\r\n    let data: any = this.router.getCurrentNavigation().extras.state\r\n\r\n    if (data) {\r\n      let stateSubObj = data.stateObj;\r\n      this.dataReport = stateSubObj.dataReport;\r\n      this.date = [this.dataReport.startTime, this.dataReport.endTime];\r\n      this.selectedValue = stateSubObj.selectedValue;\r\n      this.id_branch_report = stateSubObj.id_branch_report\r\n    }\r\n\r\n    this.getListCombo()\r\n  }\r\n  /**\r\n   * get danh sách combo để xử lý chọn combo xem báo cáo\r\n   * @example this.getListCombo()\r\n   */\r\n  getListCombo() {\r\n    let combos = this.vhQueryCafe.getlocalProducts(5)\r\n    for (let item of combos) {\r\n      this.listCombo.push({ _id: item._id, name: item.name })\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi combo xem báo cáo\r\n   * @param optionValue \r\n   */\r\n  filterProducts(optionValue) {\r\n    this.sales_combo['_id'] = optionValue\r\n    if (this.sales_combo['_id'] != 'all') this.isChart = false\r\n    this.dataReport = this.initDataReport(this.date[0], this.date[1]);\r\n  }\r\n  /**\r\n   * get chi nhánh được xem báo cáo của user\r\n   */\r\n  getBranches() {\r\n    let branches = [...this.vhQueryCafe.getlocalBranchs()] // danh sách toàn bộ chi nhánh\r\n    let employee = this.vhAuth.getUser() // thông tn nhân viên\r\n    let defaultBranch = this.vhQueryCafe.getDefaultBranch()._id // chi nhánh mặc định khi đăng nhập (lấy id chi nhánh)\r\n\r\n    if (this.useBranch) { // kiểm tra xem có 2 chi nhánh trở lên\r\n\r\n      if (employee['owner'] == 'boss') { // kiểm tra tài khoản đăng nhập là boss\r\n        this.branchList = branches // gán danh sách chi nhánh show ra HTML\r\n        if (this.branchList.length > 1) this.branchList.unshift({ _id: \"all\", name: \"All\" })\r\n        this.id_branch_report = defaultBranch // gán mặc định chi nhánh mặc định xem báo cáo là chi nhánh đăng nhập vô\r\n      }\r\n\r\n      else { // trường hợp tài khoản là nhân viên\r\n        this.vhAuth.getPermission(employee['_id']).then(result => { // get quyền nhân viên được xem báo cáo chi nhánh nào\r\n          branches.forEach(item => {\r\n            if (result[`${item._id}_view_report_branch`]) this.branchList.push({ ...item }) // kiểm tra chi nhánh đc xem báo cáo, gán cho branchList show ra HMLT\r\n          })\r\n          if (this.branchList.length > 1) { // trường hợp được xem báo cáo 2 chi nhánh trở lên\r\n            this.branchList.unshift({ _id: \"all\", name: \"All\" }) // đẩy xem tất cả vô, nếu có 2 chi nhánh trở lên\r\n            for (let i in this.branchList) {\r\n              if (this.branchList[i]._id == defaultBranch) return this.id_branch_report = defaultBranch // nếu có gán chi nhánh xem báo mặc định là chi nhánh mặc định (đăng nhập)\r\n              else this.id_branch_report = this.branchList[1]._id // ngược lại gán chi nhánh mặc định là chi nhánh thứ 1\r\n            }\r\n          }\r\n          else if (this.branchList.length == 1) { // nếu chỉ đc xem báo cáo 1 chi nhánh , lấy mặc định là chi nhánh đó\r\n            this.id_branch_report = this.branchList[0]._id\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"warning\", \"Bạn không được chọn chi nhánh xem báo cáo\") // kg có chi nhánh xem báo cáo\r\n        })\r\n      }\r\n    } else this.id_branch_report = defaultBranch // chỉ xài 1 chi nhánh\r\n\r\n  }\r\n\r\n  /**Render các thành phần combo */\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity} ${item.name}`\r\n      else subName += `${item.quantity} ${item.name}`\r\n    })\r\n    return subName\r\n  }\r\n\r\n  initDataReport(startTime: Date = new Date(), endTime: Date = new Date()): SalesChartTableReport {\r\n    startTime.setHours(0, 0, 0, 0)\r\n    endTime.setHours(23, 59, 59, 59)\r\n    return { startTime, endTime, dataChart: [], dataTable: { docs: [], sales_atax: 0, sales_btax: 0, quantity: 0 } }\r\n  }\r\n\r\n  /**\r\n   * khởi tạo chart và gán dữ liệu cho chart\r\n   * @param series \r\n   * @param labels \r\n   * @param initStatus \r\n   * \r\n   */\r\n  initOption(series, labels, initStatus = false): ApexOptions {\r\n    return {\r\n      series: series,\r\n      chart: {\r\n        height: \"auto\",\r\n        type: \"pie\"\r\n      },\r\n      dataLabels: {\r\n        dropShadow: {\r\n          enabled: false\r\n        }\r\n      },\r\n      colors: this.dataColor,\r\n      labels: labels,\r\n      fill: {\r\n        type: \"solid\",\r\n        colors: this.dataColor,\r\n      },\r\n      legend: {\r\n        show: false\r\n      },\r\n      yaxis: {\r\n        labels: {\r\n          formatter: (value) => {\r\n            return this.vhAlgorithm.vhcurrencyunit(value);\r\n          }\r\n        }\r\n      },\r\n      states: {\r\n        active: {\r\n          filter: {\r\n            type: \"none\"\r\n          }\r\n        },\r\n        normal: {\r\n          filter: {\r\n            type: \"none\"\r\n          }\r\n        },\r\n        hover: {\r\n          filter: {\r\n            type: \"none\"\r\n          }\r\n        }\r\n      },\r\n      noData: {\r\n        text: this.languageService.translate('No data!')\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   * @example this.changeTime(['2023-06-27T01:21:41.397Z','2023-06-27T01:21:41.397Z'])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <=  this.fncService.checkDateReport() * 86000000) {\r\n      this.dataReport = this.initDataReport(event[0], event[1])\r\n      if (this.isChart) this.chart.updateOptions(this.initOption([], []))\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n      this.dataReport = this.initDataReport(new Date(this.date[0]), new Date(this.date[1]))\r\n    }\r\n  }\r\n  /**\r\n   * xem báo cáo\r\n   * @param startTime \r\n   * @param endTime \r\n   * @returns \r\n   */\r\n  getSalesCombo(startTime, endTime) {\r\n    return new Promise<any>((resolve, rejects) => {\r\n      this.vhQueryCafe.getReportSales_Combos_byProducts(startTime, endTime, this.sales_combo['_id'], this.id_branch_report)\r\n        .then((res) => resolve(res)).catch(err => rejects(err))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu báo cáo\r\n   * @param startTime \r\n   * @param endTime \r\n   * @returns \r\n   */\r\n  getSales(id_combo, startTime, endTime) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.dataReport = this.initDataReport(startTime, endTime)\r\n      this.getSalesCombo(startTime, endTime).then((res) => {\r\n        this.vhComponent.hideLoading(0)\r\n        if (res) {\r\n          if (!res.empty) {\r\n            let data = res.docs;\r\n            for (let i = 0; i < 10; i++) {\r\n              if (!data[i]) break\r\n              else {\r\n                this.dataReport['dataChart'].push({\r\n                  color: this.dataColor[i],\r\n                  label: data[i]['name'],\r\n                  value: data[i]['sales_atax'],\r\n                })\r\n              }\r\n            }\r\n\r\n            this.dataReport['dataTable']['sales_atax'] = res['sales_atax']\r\n            this.dataReport['dataTable']['sales_btax'] = res['sales_btax']\r\n            this.dataReport['dataTable']['quantity'] = res['quantity']\r\n            this.dataReport['dataTable']['docs'] = res.docs.map((item, index) => {\r\n              return { ...item, index  }\r\n            });\r\n            console.log(this.dataReport['dataTable']['docs']);\r\n\r\n            this.sort(this.statusQuantity, 'quantity')\r\n          }\r\n          if (this.isChart) this.updateChart(this.dataReport['dataChart'], false)\r\n        }\r\n      }).catch(() => this.vhComponent.hideLoading(0))\r\n    });\r\n\r\n  }\r\n  //** hàm sort cho các cột */\r\n  statusQuantity = false\r\n  statusSales = false\r\n  statusbSales = false\r\n  statusName = false\r\n  /**\r\n   * sort với trường là dạng số\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'total')\r\n   */\r\n  sort(sort, value) {\r\n    if (sort) {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortNumberbyASC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n    else {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n  }\r\n  /**\r\n   * sort với trường là dạng chuỗi\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'name')\r\n   */\r\n  sortName(sort, value) {\r\n    if (sort) {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortVietnamesebyASC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n    else {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortVietnamesebyDESC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n  }\r\n  updateChart(data_chart, initStatus = false) {\r\n    this.chart.updateOptions(this.initOption(\r\n      !data_chart.length || !data_chart[0].value ? [] : data_chart.map(item => item.value),\r\n      !data_chart.length || !data_chart[0].value ? [] : data_chart.map(item => item.label),\r\n      initStatus\r\n    ))\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/report']);\r\n  }\r\n\r\n  /**\r\n   * hiển thị chart ra giao diện\r\n   * @example this.initChart()\r\n   */\r\n  initChart(data_chart?) {\r\n    setTimeout(() => {\r\n      this.chart = new ApexCharts(document.querySelector(\"#sales-combo-chart\"), this.initOption([], []));\r\n      this.chart.render();\r\n      if (data_chart) this.updateChart(data_chart)\r\n    }, 200)\r\n  }\r\n  /**\r\n   * bắt sk thay đổi kiểu xem báo cáo (chart or table)\r\n   */\r\n  showChart() {\r\n    if (this.sales_combo['_id'] == 'all') this.isChart = !this.isChart;\r\n    else this.isChart = false\r\n    this.isChart ? this.initChart(this.dataReport['dataChart']) : this.chart.destroy()\r\n  }\r\n  gotoDetailProducts(data) {\r\n    let stateObj = { selectedValue: this.selectedValue, id_branch_report: this.id_branch_report, dataReport: this.dataReport }\r\n    this.router.navigate(['/cafe/dashboard/management/report/sales-combo/detail-combo'], { state: { product: { ...data }, stateObj } })\r\n  }\r\n  /**\r\n   * tải về báo cáo dưới dạng hình ảnh của chart\r\n   * @example this.downloadImg()\r\n   */\r\n  downloadImg() {\r\n    this.vhComponent.downloadImg(\"chart-image\",\r\n      `${this.languageService.translate(\"_combo_sales_report\")}_${this.languageService.translate(\"_from\")}_${this.format_date(this.dataReport.startTime)}_${this.languageService.translate(\"_to\")}_${this.format_date(this.dataReport.endTime)}_${this.id_branch_report == \"all\" ? \"\" : this.vhAlgorithm.changeAlias(this.vhQueryCafe.getlocalBranch(this.id_branch_report).name).replace(/\\s/g, \"_\")}`).then(() => { })\r\n  }\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd_MM_yyyy\")\r\n  }\r\n\r\n  /**\r\n   * xuất dữ liệu sang file excel và tải về\r\n   */\r\n  export() {\r\n    let data = [];\r\n\r\n    let name = `${this.languageService.translate(\"_combo_sales_report\")}_${this.languageService.translate(\"_from\")}_${this.format_date(this.dataReport.startTime)}_${this.languageService.translate(\"_to\")}_${this.format_date(this.dataReport.endTime)}_${this.id_branch_report == \"all\" ? \"\" : this.vhAlgorithm.changeAlias(this.vhQueryCafe.getlocalBranch(this.id_branch_report).name).replace(/\\s/g, \"_\")}`;\r\n    let total: any = new Object();\r\n    total[this.languageService.translate('No.')] = \"\";\r\n    if (this.reportConfig.product_picture)\r\n      total[this.languageService.translate('Image')] = \"\";\r\n    total[this.languageService.translate('Combo name')] = this.languageService.translate('Total');\r\n    total[this.languageService.translate('Quantity')] = this.dataReport['dataTable'].quantity;\r\n    if (this.reportConfig.sales_btax)\r\n      total[this.languageService.translate('Sales before tax')] = this.dataReport['dataTable'].sales_btax;\r\n    total[this.languageService.translate('Sales after tax')] = this.dataReport['dataTable'].sales_atax;\r\n    data.push(total);\r\n\r\n    this.dataReport['dataTable'].docs.forEach((_row, index)=>{\r\n      let item: any = new Object();\r\n      item[this.languageService.translate('No.')] = index + 1;\r\n      if (this.reportConfig.product_picture)\r\n        item[this.languageService.translate('Image')] = _row.img;\r\n      item[this.languageService.translate('Combo name')] = _row.name + \"(\" + _row.comboName + \")\";\r\n      item[this.languageService.translate('Quantity')] = _row.quantity;\r\n      if (this.reportConfig.sales_btax)\r\n        item[this.languageService.translate('Sales before tax')] = _row.sales_btax;\r\n      item[this.languageService.translate('Sales after tax')] = _row.sales_atax;\r\n      data.push(item);\r\n    })\r\n    this.vhAlgorithm.exportXLSX(data, name)\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-combo\") && document.querySelector(\".sales-combo-header\") && document.querySelector(\".ant-table-thead\")) {\r\n      this.heightScroll = (document.querySelector(\"#sales-combo\").clientHeight -\r\n        document.querySelector(\".sales-combo-header\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight) -\r\n        90 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"sales-combo\" class=\"height-header\">\r\n  <div nz-row class=\"height-layout sales-combo-header\">\r\n    <div nz-col [nzSpan]=\"useBranch? 3:5\" class=\"title left-all-content\">\r\n      <b>{{'Combo sales'|translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"1\" class=\"center-all-content\">\r\n      <i class=\"size-icon\" *ngIf=\"selectedValue == 'all'\"\r\n        [ngStyle]=\"{color: isChart ? 'var(--ion-color-vh-green)' : 'black'}\" nz-icon nzType=\"pie-chart\"\r\n        nzTheme=\"outline\" (click)=\"showChart()\"></i>\r\n    </div>\r\n    <div nz-col nzSpan=\"1\" class=\"center-all-content\">\r\n      <i class=\"size-icon\" [ngStyle]=\"{color: !isChart ? 'var(--ion-color-vh-green)' : 'black'}\" nz-icon\r\n        nzType=\"appstore\" nzTheme=\"outline\" (click)=\"showChart()\"></i>\r\n    </div>\r\n    <div nz-col nzSpan=\"5\" class=\"center-all-content\">\r\n      <nz-select nzShowSearch [(ngModel)]=\"selectedValue\" nzBorderless (ngModelChange)=\"filterProducts($event)\">\r\n        <nz-option *ngFor=\"let option of listCombo\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\">\r\n        </nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div class=\"center-all-content\" nz-col [nzSpan]=\"useBranch? 6:8\">\r\n      <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n    </div>\r\n    <div nz-col *ngIf=\"useBranch\" nzSpan=\"4\" class=\"center-all-content\">\r\n      <nz-select nzShowSearch nzBorderless nzPlaceHolder=\"{{'Select branch' | translate}}\"\r\n        [(ngModel)]=\"id_branch_report\">\r\n        <nz-option *ngFor=\"let option of branchList\" nzLabel=\"{{option.name| translate}}\" nzValue=\"{{option._id}}\">\r\n        </nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div nz-col nzSpan=\"4\" class=\"right-all-content button-group\">\r\n      <div>\r\n        <button class=\"btn-white mr-3\" nz-button nzType=\"default\" (click)=\" isChart ? downloadImg() : export()\">\r\n          <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n          {{'Download' | translate}}</button>\r\n      </div>\r\n      <div>\r\n        <button [disabled]=\"!id_branch_report.length\" class=\"btn-green center-all-content ml-3\" nz-button\r\n          nzType=\"default\" (click)=\"getSales(selectedValue,dataReport['startTime'],dataReport['endTime'])\">\r\n          <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n          {{'View' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div style=\"padding-top: 20px;\" *ngIf=\"!isChart\">\r\n    <nz-table [nzPageSize]=\"20\"\r\n      [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #reportData nzShowPagination\r\n      nzShowSizeChanger [nzData]=\"dataReport['dataTable'].docs\">\r\n      <thead>\r\n        <tr>\r\n          <th nzWidth=\"5%\"><b>{{'No.' | translate}}</b></th>\r\n          <th style=\"cursor: pointer;\" (click)=\"statusName = !statusName;sortName(statusName,'name')\" nzWidth=\"30%\">\r\n            <b>{{'Combo name'\r\n              | translate}}</b>\r\n            <i nz-icon [nzType]=\"statusName == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n          </th>\r\n          <th style=\"cursor: pointer;\" (click)=\"statusQuantity = !statusQuantity;sort(statusQuantity,'quantity')\"\r\n            nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b>\r\n            <i nz-icon [nzType]=\"statusQuantity == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n          </th>\r\n          <th style=\"cursor: pointer;\" (click)=\"statusbSales = !statusbSales;sort(statusbSales,'sales_btax')\"\r\n            *ngIf=\"reportConfig.sales_btax\" nzWidth=\"20%\" nzAlign='right'\r\n            [ngStyle]=\"{display: !reportConfig.sales_btax ? 'none' : ''}\"><b>{{'Sales before tax'|translate}}</b>\r\n            <i nz-icon [nzType]=\"statusbSales == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n          </th>\r\n          <th style=\"cursor: pointer;\" (click)=\"statusSales = !statusSales;sort(statusSales,'sales_atax')\"\r\n            [nzWidth]=\"!reportConfig.sales_btax ? '40%' : '20%'\" nzAlign='right'>\r\n            <b>{{'Sales after tax'|translate}}</b>\r\n            <i nz-icon [nzType]=\"statusSales == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngIf=\"dataReport['dataTable']['docs'].length > 0\">\r\n          <td></td>\r\n          <td style=\"color: var(--ion-color-vh-green);\">{{'Total' | translate}}</td>\r\n          <td nzAlign='center' style=\"color: var(--ion-color-vh-green); font-weight: bold;\">\r\n            {{dataReport['dataTable']['quantity'] | number:'1.0-2'}}</td>\r\n          <td nzAlign='right' style=\"color: var(--ion-color-vh-green); font-weight: bold;\"\r\n            [ngStyle]=\"{display: !reportConfig.sales_btax ? 'none' : ''}\">\r\n            {{vhAlgorithm.vhcurrencyunit_symbol(dataReport['dataTable']['sales_btax'] || 0)}}</td>\r\n          <td nzAlign='right' style=\"color: var(--ion-color-vh-green); font-weight: bold;\">\r\n            {{vhAlgorithm.vhcurrencyunit_symbol(dataReport['dataTable']['sales_atax'] || 0)}}</td>\r\n        </tr>\r\n        <tr *ngFor=\"let item of reportData.data\" style=\"cursor: pointer;\" (click)=\"gotoDetailProducts(item)\">\r\n          <td>{{item.index + 1}}</td>\r\n          <td>{{item.name }} <br> <span style=\"color: var(--ion-color-vh-gray)\">{{item.comboName}}</span></td>\r\n          <td nzAlign='center'>{{item.quantity | number:'1.0-2'}}</td>\r\n          <td nzAlign='right' [ngStyle]=\"{display: !reportConfig.sales_btax ? 'none' : ''}\">\r\n            {{vhAlgorithm.vhcurrencyunit(item.sales_btax)}}</td>\r\n          <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(item.sales_atax)}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </div>\r\n\r\n  <div style=\"padding-top: 20px;\" id=\"chart-image\" *ngIf=\"selectedValue =='all' && isChart\">\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"12\">\r\n        <div id=\"sales-combo-chart\"></div>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\">\r\n        <div class=\"scroll\" *ngFor=\"let i of dataReport['dataChart']\">\r\n          <div class=\"khung_l\" [style.backgroundColor]=\"i.color\"></div>\r\n          <div class=\"title_l max-width-overflow\">{{i.label}}</div>\r\n          <div class=\"total_l\">{{vhAlgorithm.vhcurrencyunit(i.value)}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SalesComboComponent } from './sales-combo.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalesComboComponent\r\n  },\r\n  {\r\n    path: 'detail-combo',\r\n    loadChildren: () => import('./detail/detail.module').then(m => m.DetailModule)\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [SalesComboComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class SalesComboModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}