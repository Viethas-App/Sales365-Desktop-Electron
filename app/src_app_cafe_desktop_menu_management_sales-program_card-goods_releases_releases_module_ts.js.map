{"version":3,"file":"src_app_cafe_desktop_menu_management_sales-program_card-goods_releases_releases_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/list-code/list-code.component.ts","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/list-code/list-code.component.html","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/list-code/print/print.component.ts","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/list-code/print/print.component.html","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/releases-detail.component.ts","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases-detail/releases-detail.component.html","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases.component.ts","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases.component.html","./src/app/cafe/desktop/menu/management/sales-program/card-goods/releases/releases.module.ts"],"sourcesContent":["import { FormControl, FormGroup } from '@angular/forms';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'app-list-code',\r\n  templateUrl: './list-code.component.html',\r\n  styleUrls: ['./list-code.component.scss']\r\n})\r\nexport class ListCodeComponent implements OnInit {\r\n  public isVisible: boolean = false;                             // hiển thị modal lấy mã code\r\n  public isVisibleEdit: boolean = false;                         // hiển thị modal sửa mã code\r\n  public item: any;                                             // release được nhận\r\n  public listCodePaymentCard: any[] = [];                           // danh sách mã payment card\r\n  public itemEditCurrent;                                       // mã code được chọn chỉnh sửa mã code\r\n  public settingCode: any = {                                    // Thông tin mặc định để lấy mã code\r\n    quantity: 1, \r\n  };\r\n  public heightScroll: string;                                  // Chiều cao sroll danh sách\r\n  public dataRestore: any;                                             // dữ liệu dùng để trả về\r\n  public statusList: any = [     // danh sách trạng thái để lọc\r\n    {\r\n      id: 'all',\r\n      name: this.languageService.translate(\"All\")\r\n    },\r\n    {\r\n      id: '1',\r\n      name: 'Đã phát hành'\r\n    },\r\n    {\r\n      id: '2',\r\n      name: 'Đã bán'\r\n    },\r\n    {\r\n      id: '3',\r\n      name: 'Đã đổi từ tích điểm'\r\n    },\r\n    {\r\n      id: '4',\r\n      name: 'Đã sử dụng'\r\n    },\r\n    {\r\n      id: '5',\r\n      name: 'Đã hết hạn'\r\n    }\r\n  ]\r\n  private listCodePaymentCardSearch: any[];\r\n  public keySearch = '';\r\n  public stateObj = {\r\n    keySearch: '',\r\n    selectedValue: 'all',\r\n    tab: 0\r\n  }\r\n  barcode_designs: any;\r\n  start_print: boolean = false;\r\n  list_print_data: any[] = []; \r\n  public listBranch: any[];                                            // Danh sách chi nhánh\r\n  public branch: any;                                                  // chi nhánh tạo mã\r\n  public paymentcard: any;                                             // payment cart hiện tại\r\n  public payment_card_release_detail: any;                             // payment card release retails\r\n  constructor(\r\n    public router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private vhQuery: VhQuery,\r\n    public vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService\r\n\r\n  ) {\r\n    this.item = this.router.getCurrentNavigation().extras.state.data;                 // payment_card_release_details\r\n    this.dataRestore = this.router.getCurrentNavigation().extras.state.dataRestore;   // payment_card_releases\r\n    console.log(this.dataRestore);\r\n\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") &&\r\n      document.querySelector(\".ant-table-thead\") &&\r\n      document.querySelector(\".product-list-header\") &&\r\n      document.querySelector(\".left-all-content\") &&\r\n      document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.item) {\r\n      this.listBranch = this.vhQueryCafe.getlocalBranchs()\r\n      this.branch = this.listBranch.find(item => item._id == this.dataRestore.release.id_branch)\r\n    }\r\n    Promise.all([\r\n      this.getListProductCodes(),\r\n      this.vhQueryCafe.getPaymentCard(this.item.id_payment_card),\r\n      this.getLabelDesign()\r\n    ]).then((voucher: any) => {\r\n      this.paymentcard = voucher[1];\r\n    })\r\n  }\r\n\r\n  // lấy danh sách mã code theo id_card và id_release\r\n  getListProductCodes() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQueryCafe.getPaymentCardCodes_byIdPaymentCardReleaseDetail(this.item._id).then((listCodes: any) => {\r\n        console.log(listCodes);\r\n\r\n        this.listCodePaymentCard = listCodes;\r\n        this.listCodePaymentCardSearch = this.listCodePaymentCard;\r\n        this.vhComponent.hideLoading(0);\r\n        if (this.stateObj.selectedValue != \"0\") {\r\n          this.searchByCategory()\r\n          this.vhComponent.hideLoading(0);\r\n        }\r\n        this.vhComponent.hideLoading(0);\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n  getLabelDesign() {\r\n    this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQueryCafe.getDefaultBranch()._id }, type: { $eq: 4 } })\r\n      .then((barcode_designs: any) => {\r\n        this.barcode_designs = barcode_designs.find(item => item._id == this.item.id_design_barcode)\r\n      })\r\n  }\r\n\r\n  checkExpried(end_date) {\r\n    return new Date() > new Date(end_date)\r\n  }\r\n  //  Tìm kiểm mã voucher\r\n  searchCodeVoucher(key) {\r\n    if (key.length > 0) {\r\n      this.listCodePaymentCard = this.vhAlgorithm.searchList(\r\n        this.vhAlgorithm.changeAlias(key.toLowerCase()),\r\n        this.listCodePaymentCardSearch, [\"code\"]\r\n      );\r\n    } else {\r\n      this.listCodePaymentCard = this.listCodePaymentCardSearch\r\n    }\r\n\r\n  }\r\n\r\n  //  tìm theo trạng thái mã voucher\r\n  searchByCategory() {\r\n\r\n    if (this.stateObj.selectedValue == 'all') {\r\n      this.listCodePaymentCard = this.listCodePaymentCardSearch;\r\n    }\r\n    else {\r\n      if (this.stateObj.selectedValue == '1') this.listCodePaymentCard = this.listCodePaymentCardSearch.filter(item => !this.checkExpried(item.date_expire) && item.status == 1)\r\n      else if (this.stateObj.selectedValue == '5') this.listCodePaymentCard = this.listCodePaymentCardSearch.filter(item => this.checkExpried(item.date_expire) && item.status == 1)\r\n      else this.listCodePaymentCard = this.listCodePaymentCardSearch.filter(item => item.status == this.stateObj.selectedValue)\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    let dataRestore = this.dataRestore.release;\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods/releases/detail'],\r\n      {\r\n        state: dataRestore\r\n      })\r\n  }\r\n\r\n  checkCreateCode() {\r\n     this.isVisible = true\r\n  }\r\n  \r\n\r\n  // Xóa mã code\r\n  gotoDeleteCodeVoucher(item) {\r\n    console.log('start delete PaymentCardCode', item);\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.deletePaymentCardCode(item._id, item.id_payment_card_release_detail).then(bool => {\r\n        console.log('deletePaymentCardCode', bool);\r\n        this.vhComponent.hideLoading(0)\r\n        if (bool) {\r\n          this.listCodePaymentCard = this.listCodePaymentCard.filter(i => i._id != item._id)\r\n          this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa mã thẻ thành công\"))\r\n        }\r\n        else {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Xóa mã thẻ thất bại\"))\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  // chỉnh sửa mã code\r\n  handleOkEdit(item) {\r\n    if (item) {\r\n      let data = { ...item }\r\n      if (data.date_used == null) {\r\n        if (this.checkDateUpdate(data.date_validity, data.date_expire) == true) {\r\n          this.updatePaymentCardCode(data);\r\n        } else {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Ngày không hợp lệ !\"))\r\n        }\r\n      } else {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Voucher đã đùng !\"))\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Cập nhật payment card code\r\n  updatePaymentCardCode(data) {\r\n    this.vhQueryCafe.updatePaymentCardCode(data._id, data).then(() => {\r\n      const index = this.listCodePaymentCard.findIndex(item => item._id == data._id);\r\n      this.listCodePaymentCard[index].date_expire = data.date_expire\r\n      this.listCodePaymentCard[index].date_validity = data.date_validity\r\n      this.isVisibleEdit = false;\r\n      this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Cập nhật thành công !\"));\r\n    }, error => {\r\n      console.log('error', error);\r\n    })\r\n  }\r\n\r\n  checkDateUpdate(date_validity: any, date_expire: any): boolean {\r\n    if (new Date(date_validity) <= new Date(date_expire)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  // tạo mã voucher\r\n  createPaymentCardCodes() {\r\n    if (new Date() < new Date(this.dataRestore.release.date_expire)) {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        if (this.settingCode.quantity >= 1) {\r\n          let dataCode = {\r\n            id_payment_card_release_detail: this.item._id,\r\n            id_payment_card: this.item.id_payment_card,\r\n            date_validity: new Date(this.dataRestore.release.date_validity),\r\n            date_expire: new Date(this.dataRestore.release.date_expire),\r\n            ratio:1\r\n          }\r\n          this.vhQueryCafe.createPaymentCardCodes(dataCode, this.settingCode.quantity).then((paymentCard_Codes: any) => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.isVisible = false;\r\n              this.settingCode = { quantity: 1, }\r\n              this.listCodePaymentCard = this.listCodePaymentCard.concat(paymentCard_Codes);\r\n              this.vhAlgorithm.sortDatebyASC(this.listCodePaymentCard, ['_id'])\r\n              this.listCodePaymentCardSearch = this.listCodePaymentCard;\r\n              this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Tạo mã thành công\"))\r\n            })\r\n          }, error => {\r\n            this.vhComponent.hideLoading(0)\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Tạo mã thất bại\"))\r\n          })\r\n        } else {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Số lượng không hợp lệ !\"))\r\n          this.vhComponent.hideLoading(0)\r\n\r\n        }\r\n      })\r\n\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Ngày hiện tại đang lớn hơn ngày hết hạn của đợt này!\"))\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // kiểm tra trạng, ẩn các tính năng\r\n  checkAction(status): boolean {\r\n    if (status == 4 || status == 2) {\r\n      return false\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  print(data) {\r\n    if (this.barcode_designs) {\r\n      this.list_print_data = data\r\n      this.start_print = true;\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn phải chọn mẫu in ở Sửa Thẻ thanh toán trước!\"))\r\n    }\r\n  }\r\n\r\n  checked = false;\r\n  loading = false;\r\n  indeterminate = false;\r\n  listOfCurrentPageData: any = [];\r\n  setOfCheckedId = new Set<string>();\r\n\r\n  updateCheckedSet(id: string, checked: boolean): void {\r\n    if (checked) {\r\n      this.setOfCheckedId.add(id);\r\n    } else {\r\n      this.setOfCheckedId.delete(id);\r\n    }\r\n  }\r\n\r\n  onCurrentPageDataChange(listOfCurrentPageData): void {\r\n    this.listOfCurrentPageData = listOfCurrentPageData;\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  refreshCheckedStatus(): void {\r\n    const listOfEnabledData = this.listOfCurrentPageData;\r\n    this.checked = listOfEnabledData.every(({ id }) => this.setOfCheckedId.has(id));\r\n    this.indeterminate = listOfEnabledData.some(({ id }) => this.setOfCheckedId.has(id)) && !this.checked;\r\n  }\r\n\r\n  onItemChecked(id: string, checked: boolean): void {\r\n    this.updateCheckedSet(id, checked);\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  onAllChecked(checked: boolean): void {\r\n    this.listOfCurrentPageData\r\n      .forEach(({ _id }) => this.updateCheckedSet(_id, checked));\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  printAll(): void {\r\n    this.loading = true;\r\n    let requestData = this.listCodePaymentCard.filter(data => this.setOfCheckedId.has(data._id)).slice(0, 10)\r\n    this.print(requestData)\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  codeCol = false;\r\n  date_validityCol = false;\r\n  date_expireCol = false;\r\n  statusCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'code':\r\n        if (this.codeCol) {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortStringbyASC([...this.listCodePaymentCard], colName);\r\n        } else {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortStringbyDESC([...this.listCodePaymentCard], colName);\r\n        }\r\n        break;\r\n      case 'date_validity':\r\n        if (this.date_validityCol) {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortDatebyASC([...this.listCodePaymentCard], colName);\r\n        } else {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortDatebyDESC([...this.listCodePaymentCard], colName);\r\n        }\r\n        break;\r\n      case 'date_expire':\r\n        if (this.date_expireCol) {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortDatebyASC([...this.listCodePaymentCard], colName);\r\n        } else {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortDatebyDESC([...this.listCodePaymentCard], colName);\r\n        }\r\n        break;\r\n      case 'status':\r\n        if (this.statusCol) {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortNumberbyASC([...this.listCodePaymentCard], colName);\r\n        } else {\r\n          this.listCodePaymentCard = this.vhAlgorithm.sortNumberbyDESC([...this.listCodePaymentCard], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <b>{{ item.name }}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{'Search card code' | translate}}\" [(ngModel)]=\"keySearch\"\r\n                    (keyup)=\"searchCodeVoucher(keySearch)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <div nz-col nzSpan=\"10\">\r\n                <nz-select nzPlaceHolder=\"{{'Filter by card status' | translate}}\" nzShowSearch\r\n                    [nzServerSearch]=\"true\" #keySearchByCategory\r\n                    (nzOnSearch)=\"searchCodeVoucher(keySearchByCategory['searchValue'])\" nzBorderless\r\n                    [(ngModel)]=\"stateObj.selectedValue\" (ngModelChange)=\"searchByCategory()\">\r\n                    <nz-option *ngFor=\"let option of statusList\" nzLabel=\"{{option.name}}\" nzValue=\"{{option.id}}\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n                <button (click)=\"printAll()\" class=\"btn-data\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                    {{'Print'|translate}} tất cả\r\n                </button>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"checkCreateCode()\">\r\n                    <i nz-icon nzType=\"file-add\" nzTheme=\"outline\"></i>\r\n                    {{'Create card code' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 0px;\">\r\n        <span>Tổng <b style=\"color: var(--ion-color-vh-red);\">{{listCodePaymentCard.length}}</b> mã thẻ</span>\r\n    </div>\r\n    <div class=\"voucher-products-codes\" style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n            #basicTable [nzData]=\"listCodePaymentCard\" nzShowSizeChanger nzShowPagination\r\n            (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\" [nzChecked]=\"checked\" [nzIndeterminate]=\"indeterminate\"\r\n                        (nzCheckedChange)=\"onAllChecked($event)\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"codeCol = !codeCol;sortTable('code')\">\r\n                        <b>{{'Card code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"\r\n                        (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\">\r\n                        <b>{{'Start date of use' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_expireCol = !date_expireCol;sortTable('date_expire')\">\r\n                        <b>{{'Expiration date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_expireCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"statusCol = !statusCol;sortTable('status')\" nzAlign=\"center\">\r\n                        <b>{{'Card status' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\"><b>{{'Action' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of basicTable.data;let i= index\">\r\n                    <td [nzChecked]=\"setOfCheckedId.has(data._id)\" (nzCheckedChange)=\"onItemChecked(data._id, $event)\">\r\n                    </td>\r\n                    <td>{{data.code}} <i style=\"cursor: pointer\"\r\n                            (click)=\"$event.stopPropagation(); vhComponent.copyValue(data.code)\" nz-icon nzType=\"copy\"\r\n                            nzTheme=\"outline\"></i></td>\r\n                    <td>{{data.date_validity |date: 'dd/MM/yyyy'}}</td>\r\n                    <td>{{data.date_expire |date: 'dd/MM/yyyy'}}</td>\r\n                    <td nzAlign=\"center\" [ngSwitch]=\"data.status\">\r\n                        <span *ngSwitchCase=\"1\">\r\n                            <ng-container *ngIf=\"!checkExpried(data.date_expire); else elseTemplate\">\r\n                                <b> {{'_Issued' | translate}}</b>\r\n                            </ng-container>\r\n                            <ng-template #elseTemplate>\r\n                                <b style=\"color: var(--ion-color-vh-gray);\"> {{'Expired' | translate}}</b>\r\n                            </ng-template>\r\n                        </span>\r\n                        <span *ngSwitchCase=\"2\"><b style=\"color: var(--ion-color-vh-green)\">{{'Đã bán' |\r\n                                translate}}</b></span>\r\n                        <span *ngSwitchCase=\"3\"><b style=\"color: var(--ion-color-vh-green)\">{{'Đã đổi từ điểm tích lũy'\r\n                                | translate}}</b></span>\r\n                        <span *ngSwitchCase=\"4\"><b style=\"color: var(--ion-color-vh-red)\">{{'Đã sử dụng đổi hàng hóa' |\r\n                                translate}}</b></span>\r\n\r\n                        <span *ngSwitchCase=\"6\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Selected for purchase from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"7\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Ordered from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"8\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Selected for exchange from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"9\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Ordered from web/app' | translate\r\n                                }}</b></span>\r\n                    </td>\r\n\r\n                    <td nzAlign=\"center\" class=\"center-all-content\">\r\n\r\n                        <button nz-button [disabled]=\"data.status != 1\" class=\"  btn_content\">\r\n                            <i style=\"font-size: 1.2rem;\" nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm\r\n                                (click)=\"$event.stopPropagation()\" nzPopconfirmTitle=\"{{'Delete this card code' | translate}}?\"\r\n                                nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"gotoDeleteCodeVoucher(data)\"></i>\r\n                        </button>\r\n                        <button nz-button class=\"  btn_content\">\r\n                            <i (click)=\"print([data])\" style=\"font-size: 1.2rem;\" nz-icon nzType=\"printer\"\r\n                                nzTheme=\"outline\"></i>\r\n                        </button>\r\n\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<!-- Lấy mã thẻ -->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"Lấy mã thẻ\" (nzOnCancel)=\"isVisible = false\"\r\n    (nzOnOk)=\"createPaymentCardCodes()\" nzCancelText=\"{{'Cancel' | translate}}\" nzOkText=\"{{'Release' | translate}}\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Quantity' | translate}}</b></div>\r\n                <nz-form-item style=\"width: 100%; display: block;\">\r\n                    <nz-input-number [(ngModel)]=\"settingCode.quantity\" style=\"width: 100%;\"\r\n                        nzPlaceHolder=\"{{'Enter the number of cards issued' | translate}}\" [nzMin]=\"1\" [nzMax]=\"200\"\r\n                        [nzStep]=\"1\" required></nz-input-number>\r\n                </nz-form-item>\r\n            </div>\r\n\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<app-print style=\"display: none;\" *ngIf=\"barcode_designs && list_print_data\" [stamp]=\"barcode_designs\"\r\n    [start_print]=\"start_print\" [data]=\"list_print_data\"></app-print>","import  QRCode from 'qrcode';\r\nimport { ChangeDetectorRef, Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport JsBarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print',\r\n  templateUrl: './print.component.html',\r\n  styleUrls: ['./print.component.scss']\r\n})\r\nexport class PrintComponent implements OnInit {\r\n  @Input() stamp: any;\r\n  @Input() start_print: any;\r\n  @Input() data: any; \r\n  heightScroll: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdf: ChangeDetectorRef\r\n  ) {\r\n    // this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    // console.log(this.stamp);\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.stamp);\r\n  }\r\n\r\n  ngOnChanges({ start_print }: SimpleChanges): void {\r\n    // console.log(this.data);\r\n    \r\n    if (start_print && start_print.currentValue) {\r\n      // this.renderBarcode();\r\n    setTimeout(() => {\r\n      this.printBrowser()\r\n    }, 100);}\r\n  }\r\n\r\n  changeNummber() {\r\n    // this.listRowBarcode = []\r\n    // for (let i = 0; i < this.stamp.number; i++) {\r\n    //   this.listRowBarcode.push(true);\r\n    // }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.data)\r\n    for(let i in this.data)\r\n      {\r\n        if (this.data[i].code)\r\n          QRCode.toCanvas(document.getElementById(this.data[i].code), this.data[i].code,{ width: parseInt(this.stamp.property[0].height) * 3.78 }, function (error) {\r\n            if (error) console.error(error)\r\n          })\r\n        if (this.data[i].code)\r\n          JsBarcode(\".barcode\", this.data[i].code, {\r\n            displayValue: false,\r\n\r\n          });\r\n      }\r\n  } \r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<!-- <div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div> -->\r\n<nz-layout>\r\n    <!-- <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div> -->\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*stamp.col,'height.mm': stamp.height,'margin-bottom':i == data.length -1 ? '0' : ''}\" class=\"stamp \"\r\n                    style=\"display: flex;margin-bottom: 4mm;\" *ngFor=\"let item of data, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.width,'height.mm': stamp.height }\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <img *ngIf=\"stamp.display_img\" width=\"100%\" [src]=\"stamp.img\" alt=\"assets/img/default_voucher.jpg\" onerror=\"this.src='./assets/img/default_voucher.jpg'\">\r\n                        <div   *ngFor=\"let ele of stamp.property\" \r\n                        style=\"display: flex;position: absolute; \" \r\n                        [ngStyle]=\"{\r\n                        'font-size.px': ele.font_size, \r\n                        'font-weight': ele.font_weight  , \r\n                        'text-decoration': ele.text_decoration ,\r\n                        'font-style': ele.font_style  ,\r\n                        'top.px': ele.y,\r\n                        'left.px': ele.x,\r\n                        'height.mm': ele.height ,\r\n                        'width.mm': ele.width,\r\n                        'justify-content':ele.type == 'barcode' ? ele.justify_content : ''\r\n                        }\"> \r\n                        <span [ngStyle]=\"{\r\n                            'color':ele.color,\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'barcode-text'\">\r\n                              {{item.code }}\r\n                        </span>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'barcode' && ele.status\" class=\"barcode\"></canvas>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'qr' && ele.status\" [id]=\"'canvas' + i\"></canvas>\r\n\r\n                    </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { VhAlgorithm, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n@Component({\r\n  selector: 'app-releases-detail',\r\n  templateUrl: './releases-detail.component.html',\r\n  styleUrls: ['./releases-detail.component.scss']\r\n})\r\nexport class ReleasesDetailComponent implements OnInit {\r\n  public itemReleases: any ={\r\n    name:'test'\r\n  };\r\n  public listWithItem:any =[]\r\n  public isVisible = false;\r\n  public tempVal:any;                             // nội dung tìm kiếm\r\n  public listPaymentCards:any[] = [];                  // danh sách voucher\r\n  public listVoucherChoosed:any[] = [];           // danh sách voucher đã chọn\r\n  public listVoucherNotChoose:any [] = [];\r\n  public listShow:any[] = [];                     // danh sách voucher hiển thị\r\n  public listShowSearch:any[] = []                // danh sách voucher ban đầu dùng để tìm kiếm\r\n  public lengthProductCode:number;\r\n  heightScroll: string;\r\n  public keyVoucher:string;\r\n  public showVoucherModal:any [] =[]\r\n  // dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  constructor(\r\n    public router: Router,\r\n    public languageService: LanguageService,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private vhQuery: VhQuery,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n\r\n  ) {\r\n    //  Đợt phát hành đã chọn\r\n    this.itemReleases = this.router.getCurrentNavigation().extras.state;\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    if(this.itemReleases){\r\n      this.getListPaymentCards();\r\n      this.getReleaseDetail(this.itemReleases._id)\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#table\") &&\r\n    document.querySelector(\".ant-table-thead\")  ) {\r\n      this.heightScroll =\r\n      document.querySelector(\"#table\").clientHeight -\r\n      document.querySelector(\".ant-table-thead\").clientHeight - 30  + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  // lấy danh sách voucher\r\n  getListPaymentCards() {\r\n    this.vhQueryCafe.getPaymentCards().then((payment_cards:any)=>{\r\n      let data =   payment_cards\r\n      this.listPaymentCards = data.map(item => {\r\n        return { ...item, choose: false, display: 'flex' }\r\n      })\r\n      this.showVoucherModal = this.listPaymentCards;\r\n    })\r\n  }\r\n  goBack(){\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods/releases'])\r\n  }\r\n  //  xem danh sách mã voucher\r\n  gotoGetListCodeVoucher(item){\r\n    let dataRestore = { release: this.itemReleases}\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods/releases/detail/list-code'],\r\n    {\r\n      state: {\r\n        data:item,\r\n        dataRestore\r\n      },\r\n    })\r\n  }\r\n  //  thực hiện  cập nhật hiển thị đã chọn\r\n  gotoAddVoucherToReleases(){\r\n    if(this.listShow.length){\r\n      for (let itemShow of this.listShow) {\r\n        let index = this.showVoucherModal.findIndex(item => itemShow.id_payment_card == item._id);\r\n        this.showVoucherModal[index].choose = false\r\n        this.showVoucherModal[index].display = 'none'\r\n      }\r\n    }\r\n    this.isVisible = true\r\n  }\r\n\r\n  // xử lí thêm payment card vào release\r\n  handleOk(){\r\n    this.listVoucherChoosed = this.listPaymentCards.filter(item=> item.choose == true);                // lọc voucher đã chọn\r\n    if(!this.listShow.length){                                                                    // dữ liệu hiển thị không có\r\n      this.listVoucherChoosed.forEach(element =>{                                                 // thêm toàn bộ voucher vừa lọc\r\n        this.addReleaseDetails(element, this.itemReleases._id);\r\n      })\r\n    }else if(this.listShow.length){                                                               // dữ liệu đã có\r\n      if(this.listVoucherChoosed.length){                                                         // thực hiện thêm dữ liệu voucher chưa có vào, còn đã tồn tại thì không cần thêm nữa\r\n        this.listVoucherChoosed.forEach(element =>{\r\n          if( !this.listShow.filter(item => item.id_voucher === element._id).length){\r\n            this.addReleaseDetails(element, this.itemReleases._id);\r\n          }\r\n        })\r\n      }\r\n    }\r\n    this.isVisible = false;\r\n  }\r\n\r\n  // Tìm kiếm payment card trong danh sách payment card\r\n  searchVoucher(key){\r\n    if(key.length > 0){\r\n      this.listShow = this.vhAlgorithm.searchList(\r\n        this.vhAlgorithm.changeAlias(key.toLowerCase()),\r\n        this.listShowSearch, [\"name\"]\r\n      );\r\n    }else{\r\n      this.listShow = this.listShowSearch\r\n    }\r\n  }\r\n  //  tìm kiếm payment card\r\n  searchVoucherModal(key){\r\n    if(key.length > 0){\r\n      this.showVoucherModal = this.vhAlgorithm.searchList(\r\n        this.vhAlgorithm.changeAlias(key.toLowerCase()),\r\n        this.listPaymentCards, [\"name\"]\r\n      );\r\n    }else{\r\n      this.showVoucherModal = this.listPaymentCards;\r\n    }\r\n  }\r\n  // Thêm data release_details\r\n  addReleaseDetails(item,id_release){\r\n    let data = {\r\n      id_payment_card : item._id,\r\n      id_payment_card_release:id_release,\r\n      quantity_released : 0\r\n    }\r\n    this.vhQueryCafe.addPaymentCardReleaseDetail(data).then((response:any)=>{\r\n      response['id_release']  = id_release;\r\n      response['id_design_barcode']  = item.id_design_barcode;\r\n      response['name']  = item.name;\r\n      response['products']  = this.getStringName(item.products);\r\n      this.listShow = this.listShow.concat(response);\r\n      this.listShowSearch = this.listShow;\r\n    },error=>{\r\n      console.log('error', error);\r\n    })\r\n  }\r\n  // xóa payment card trong đợt phát hành\r\n  deleteCardsOfRelease(data){\r\n\tthis.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n\t\tthis.vhQueryCafe.deletePaymentCardReleaseDetail(data._id)\r\n\t\t\t.then((rsp:any)=>{\r\n\t\t\t\tthis.vhComponent.hideLoading(0);\r\n\t\t\t\tif(rsp.vcode == 0){\r\n\t\t\t\t\tthis.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa thành công\"));\r\n\t\t\t\t\tthis.listShow = this.listShow.filter(item => item._id != data._id)\r\n\t\t\t\t}else if(rsp.vcode == 1){\r\n\t\t\t\t\tthis.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không thể xóa vì có Thẻ trả trước liên quan đã được bán hoặc sử dụng lấy hàng hóa\"),8000)\r\n\t\t\t\t}\r\n\t\t\t}, error=>{\r\n\t\t\t\tthis.vhComponent.hideLoading(0);\r\n\t\t\t\tconsole.log('error', error);\r\n\t\t\t})\r\n\t})\r\n  }\r\n  // lấy danh sách payment card theo đợt và cusomize dữ liệu để hiển thị\r\n  getReleaseDetail(id_release){\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      //  lấy danh sách release_detail của đợt đang chọn\r\n      this.vhQueryCafe.getPaymentCardRelaseDetail_byFields({id_payment_card_release: {$eq: id_release}},{},{},0)\r\n      .then((release_details: any)=>{\r\n        if(release_details.length){\r\n          //  thự hiện kiểm tra có bao nhiêu payment card trong đợt phát hành\r\n          for(let releaseDetail of release_details){\r\n            let paymentCard = this.listPaymentCards.find(item => item._id == releaseDetail.id_payment_card)\r\n            if(paymentCard){\r\n              // config dữ liệu hiện thị\r\n                releaseDetail['id_design_barcode'] = paymentCard.id_design_barcode;\r\n                releaseDetail['name'] = paymentCard.name;\r\n                releaseDetail['products'] = this.getStringName(paymentCard.products);       // vouchers là danh sách sản phẩm trong 1 voucher\r\n                this.listShow = this.listShow.concat(releaseDetail)\r\n                this.listShowSearch = this.listShow;\r\n            }\r\n            this.vhComponent.hideLoading(0);\r\n          }\r\n        }else{\r\n          this.listShow = [];\r\n          this.listShowSearch = this.listShow;\r\n          this.vhComponent.hideLoading(0);\r\n        }\r\n      })\r\n    })\r\n  }\r\n  // chỉnh sửa thêm theo voucher\r\n  getStringName(vouchers){\r\n    let result: string=''\r\n    vouchers.forEach(element => { \r\n      let product = this.vhQueryCafe.getlocalProduct(element.id_product);\r\n      if (product) {\r\n        if (result.length == 0) {\r\n          if(element.id_subproduct) product.name = product.name + ' (' +  product.subs.find(sub => sub._id == element.id_subproduct).name + ')'\r\n          result = product.name + ' x' + element.quantity;\r\n        } else {\r\n          if(element.id_subproduct) product.name = product.name + ' (' +  product.subs.find(sub => sub._id == element.id_subproduct).name + ')'\r\n          result = result + ', ' + product.name + ' x' + element.quantity;\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  quantity_releasedCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.listShow = this.vhAlgorithm.sortVietnamesebyASC([...this.listShow], colName);\r\n        }else{\r\n          this.listShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.listShow], colName);\r\n        }\r\n        break;\r\n      case 'quantity_released':\r\n        if(this.quantity_releasedCol){\r\n          this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n        }else{\r\n          this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <b>{{ itemReleases.name | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{'Search card' | translate}}\" [(ngModel)]=\"tempVal\" (keyup)=\"searchVoucher(tempVal)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAddVoucherToReleases()\">\r\n              <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n            {{'Select issued card' | translate}}\r\n          </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;height: 100%;\" id=\"table\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleaseDetail [nzData]=\"listShow\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\" style=\"width: 20%;\" nzAlign=\"left\">\r\n                        <b>{{'Card name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"width: 30%;\" nzAlign=\"center\"><b>{{'Products in card' | translate}}</b></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"quantity_releasedCol = !quantity_releasedCol;sortTable('quantity_released')\" nzAlign=\"center\">\r\n                        <b>{{'Issued card quantity' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"quantity_releasedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\"><b>{{'Release' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataReleaseDetail.data\">\r\n                    <td><i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Xóa thẻ khỏi đợt này?'}}\" (nzOnConfirm)=\"deleteCardsOfRelease(data)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red);\" nz-icon nzType=\"close\"\r\n                            nzTheme=\"outline\"></i></td>\r\n                    <td>{{data.name}}</td>\r\n                    <td nzAlign=\"left\">{{data.products}}</td>\r\n                    <td nzAlign=\"center\">{{data.quantity_released}}</td>\r\n                    <td nzAlign=\"center\">\r\n                        <button style=\"margin: auto;\" class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoGetListCodeVoucher(data)\">\r\n                      {{'Release'|translate}}\r\n                    </button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" [(nzVisible)]=\"isVisible\" nzTitle=\"{{languageService.translate('Chọn thẻ vào đợt')}}\" (nzOnOk)=\"handleOk()\" (nzOnCancel)=\"isVisible = false\" [nzMaskClosable]=\"false\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\"><input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"keyVoucher\" (ngModelChange)=\"searchVoucherModal(keyVoucher)\" [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Search by card name' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <nz-list id=\"list_voucher\">\r\n                    <nz-list-item *ngFor=\"let item of showVoucherModal\" style=\"cursor: pointer;\" (click)=\"item.choose = !item.choose\" [ngStyle]=\"{'display': item.display}\">\r\n                        <nz-list-item-meta nzDescription=\"{{item.name}}\">\r\n                        </nz-list-item-meta>\r\n                        <label nz-checkbox [(ngModel)]=\"item.choose\"></label>\r\n                    </nz-list-item>\r\n                </nz-list>\r\n                <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!showVoucherModal.length\" nzNotFoundContent=\"{{'No card!' | translate}}\"></nz-empty>\r\n\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"isVisible = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"handleOk()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-releases',\r\n  templateUrl: './releases.component.html',\r\n  styleUrls: ['./releases.component.scss'],\r\n})\r\nexport class ReleasesComponent implements OnInit {\r\n  public isVisibleModalAdd: boolean = false; // show/hide modal thêm release\r\n  public isVisibleModalEdit: boolean = false; // show/hide modal sửa release\r\n  public list_data: any = []; // danh sách release\r\n  public data_selected: any = {}; // item đợt đươc chọn\r\n  public name_old: string = ''; // tên đợt cũ\r\n  public heightScroll: string; // chiều cao sroll\r\n  public addCardGoodsReleases: FormGroup;\r\n  public editCardGoodsReleases: FormGroup;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getListRelease();\r\n  }\r\n  // khởi tạo form thêm đợt phát hành payment card\r\n  initForm() {\r\n    this.addCardGoodsReleases = new FormGroup({\r\n      name: new FormControl('', [Validators.required]),\r\n      date_validity: new FormControl(\r\n        new Date(new Date().setHours(0, 0, 0)),\r\n        Validators.required\r\n      ),\r\n      date_expire: new FormControl(\r\n        new Date(new Date().setHours(23, 59, 59)),\r\n        Validators.required\r\n      ),\r\n    });\r\n  }\r\n\r\n  // khởi tạo form edit đợt phát hành payment card\r\n  initFormEdit(item) {\r\n    this.editCardGoodsReleases = new FormGroup({\r\n      _id: new FormControl(item._id),\r\n      name: new FormControl(item.name, [Validators.required]),\r\n      date_validity: new FormControl(\r\n        new Date(item.date_validity),\r\n        Validators.required\r\n      ),\r\n      date_expire: new FormControl(\r\n        new Date(item.date_expire),\r\n        Validators.required\r\n      ),\r\n    });\r\n    this.isVisibleModalEdit = true;\r\n  }\r\n\r\n  //  lấy danh sách đợt phát hành payment card\r\n  getListRelease() {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQueryCafe.getPaymentCardReleases().then(\r\n        (payment_card_releases: any) => {\r\n          this.list_data = payment_card_releases;\r\n          this.vhComponent.hideLoading(0);\r\n        },\r\n        (err) => {\r\n          console.error(err);\r\n          this.vhComponent.hideLoading(0);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (\r\n      document.querySelector('#product-list') &&\r\n      document.querySelector('.ant-table-thead') &&\r\n      document.querySelector('.product-list-header') &&\r\n      document.querySelector('.ant-table-pagination')\r\n    ) {\r\n      this.heightScroll =\r\n        document.querySelector('#product-list').clientHeight -\r\n        document.querySelector('.ant-table-thead').clientHeight -\r\n        document.querySelector('.ant-table-pagination').clientHeight -\r\n        document.querySelector('.product-list-header').clientHeight -\r\n        80 +\r\n        'px';\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  //  Thêm đơt phát hành payment card\r\n  addRelease() {\r\n    if (\r\n      new Date(this.addCardGoodsReleases.value.date_validity) <\r\n      new Date(this.addCardGoodsReleases.value.date_expire)\r\n    ) {\r\n      this.vhQueryCafe\r\n        .addPaymentCardRelease(this.addCardGoodsReleases.value)\r\n        .then(\r\n          (payment_card_releases) => {\r\n            this.isVisibleModalAdd = false;\r\n            this.list_data = this.list_data.concat(payment_card_releases);\r\n            this.vhAlgorithm.sortDatebyASC(this.list_data, ['name']);\r\n            this.vhComponent.alertMessageDesktop(\r\n              'success',\r\n              this.languageService.translate('Thêm đợt phát hành thành công')\r\n            );\r\n          },\r\n          (error) => {\r\n            console.log('error', error);\r\n            this.vhComponent.alertMessageDesktop(\r\n              'error',\r\n              this.languageService.translate('Thêm đợt phát hành thất bại')\r\n            );\r\n          }\r\n        );\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate(\r\n          'Staring date must be less than or the same as ending date'\r\n        )\r\n      );\r\n    }\r\n  } \r\n\r\n  // Cập nhật đợt phát hành payment card\r\n  save() {\r\n    if (this.editCardGoodsReleases.value) {\r\n      let data = { ...this.editCardGoodsReleases.value };\r\n      this.vhQueryCafe.updatePaymentCardRelease(data._id, data).then(\r\n        (bool) => {\r\n          this.isVisibleModalEdit = false;\r\n          this.list_data.find((item) => item._id == data._id).name = data.name;\r\n          this.list_data.find((item) => item._id == data._id).date_validity =\r\n            data.date_validity;\r\n          this.list_data.find((item) => item._id == data._id).date_expire =\r\n            data.date_expire;\r\n          this.vhComponent.alertMessageDesktop(\r\n            'success',\r\n            this.languageService.translate(\r\n              'Cập nhật đợt phát hành thành công !'\r\n            )\r\n          );\r\n        },\r\n        (error) => {\r\n          console.log('error', error);\r\n          this.vhComponent.alertMessageDesktop(\r\n            'error',\r\n            this.languageService.translate('Cập nhật đợt phát hành thất bại !')\r\n          );\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // Xóa đợt phát hành payment card\r\n  deleleData(data) {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQueryCafe.deletePaymentCardRelease(data._id).then(\r\n        (rsp: any) => {\r\n          this.vhComponent.hideLoading(0);\r\n          if (rsp.vcode == 0) {\r\n            this.vhComponent.alertMessageDesktop(\r\n              'success',\r\n              this.languageService.translate('Xóa đợt phát hành thành công')\r\n            );\r\n            this.list_data = this.list_data.filter(\r\n              (item) => item._id != data._id\r\n            );\r\n            this.vhAlgorithm.sortDatebyASC(this.list_data, ['name']);\r\n          } else if (rsp.vcode == 1) {\r\n            this.vhComponent.alertMessageDesktop(\r\n              'error',\r\n              this.languageService.translate(\r\n                'Xóa không thành công, vui lòng xóa các thẻ trả trước trong đợt phát hành này trước!'\r\n              ),\r\n              8000\r\n            );\r\n          }\r\n        },\r\n        (error) => {\r\n          this.vhComponent.hideLoading(0);\r\n          console.log('error', error);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/card-goods']);\r\n  }\r\n\r\n  // xem chi tiết đợt phát hành payment card\r\n  gotoDetail(item) {\r\n    this.router.navigate(\r\n      ['cafe/dashboard/management/sales-program/card-goods/releases/detail'],\r\n      {\r\n        state: item,\r\n      }\r\n    );\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  date_validityCol = false;\r\n  date_expireCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        }\r\n        break;\r\n      case 'date_validity':\r\n        if (this.date_validityCol) {\r\n          this.list_data = this.vhAlgorithm.sortDatebyASC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortDatebyDESC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        }\r\n        break;\r\n      case 'date_expire':\r\n        if (this.date_expireCol) {\r\n          this.list_data = this.vhAlgorithm.sortDatebyASC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortDatebyDESC(\r\n            [...this.list_data],\r\n            colName\r\n          );\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Prepaid card issuance list' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"isVisibleModalAdd = true; initForm()\">\r\n                  <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                  {{'Create issuance' | translate}}\r\n              </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleases [nzData]=\"list_data\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\" style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Issuance name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\"  (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\">\r\n                        <b>{{'Starting date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\"  (click)=\"date_expireCol = !date_expireCol;sortTable('date_expire')\">\r\n                        <b>{{'Ending date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_expireCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\" nzWidth=\"20%\"><b>{{'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_data, index as i\" (click)=\"gotoDetail(data)\" style=\"cursor: pointer;\">\r\n                    <td> {{ data.name }}</td>\r\n                    <td> {{ data.date_validity | date:'dd/MM/yyyy' }}</td>\r\n                    <td> {{ data.date_expire | date:'dd/MM/yyyy' }}</td>\r\n                    <td (click)=\"$event.stopPropagation()\" class=\"center-all-content\">\r\n                        <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 16px;font-size: 1.2rem;\"\r\n                            (click)=\"$event.stopPropagation();initFormEdit(data)\"></i>\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm style=\"font-size: 1.2rem;\"\r\n                            nzPopconfirmTitle=\"{{'Delete this coupon issuance' | translate}}?\"\r\n                            nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleleData(data)\"></i>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal  *ngIf=\"isVisibleModalAdd\" [(nzVisible)]=\"isVisibleModalAdd\" nzTitle=\"{{'Add card issuance' | translate}}\"\r\n (nzOnCancel)=\"isVisibleModalAdd = false\" (nzOnOk)=\"addRelease()\" [nzOkDisabled]=\"addCardGoodsReleases.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"addCardGoodsReleases\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'_Issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Voucher issuance name is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>\r\n<nz-modal *ngIf=\"isVisibleModalEdit\" [(nzVisible)]=\"isVisibleModalEdit\" nzTitle=\"{{'Update card issuance' | translate}}\"\r\n(nzOnCancel)=\"isVisibleModalEdit = false\" (nzOnOk)=\"save()\" [nzOkDisabled]=\"editCardGoodsReleases.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"editCardGoodsReleases\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Card issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Voucher issuance name is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>\r\n","import { PrintComponent } from './releases-detail/list-code/print/print.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReleasesComponent } from './releases.component';\r\nimport { ReleasesDetailComponent } from './releases-detail/releases-detail.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { ListCodeComponent } from './releases-detail/list-code/list-code.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReleasesComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: ReleasesDetailComponent\r\n  },\r\n  {\r\n    path: 'detail/list-code',\r\n    component: ListCodeComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ReleasesComponent,\r\n    ReleasesDetailComponent,\r\n    ListCodeComponent,\r\n    PrintComponent\r\n\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class ReleasesModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}