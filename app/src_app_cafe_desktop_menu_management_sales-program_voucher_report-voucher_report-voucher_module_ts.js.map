{"version":3,"file":"src_app_cafe_desktop_menu_management_sales-program_voucher_report-voucher_report-voucher_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/sales-program/voucher/report-voucher/detail/detail.component.ts","./src/app/cafe/desktop/menu/management/sales-program/voucher/report-voucher/detail/detail.component.html","./src/app/cafe/desktop/menu/management/sales-program/voucher/report-voucher/report-voucher.component.ts","./src/app/cafe/desktop/menu/management/sales-program/voucher/report-voucher/report-voucher.component.html","./src/app/cafe/desktop/menu/management/sales-program/voucher/report-voucher/report-voucher.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport {  VhQueryCafe, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  public releaseVoucher: any;                                         // đợt voucher\r\n  public statusList:any = [                                           // trạng thái mã voucher\r\n    {\r\n      id:'0',\r\n      name: 'Tất cả'\r\n    },\r\n    {\r\n      id: '1',\r\n      name:'Đã phát hành'\r\n    },\r\n    {\r\n      id: '2',\r\n      name:'Đã bán'\r\n    },\r\n    {\r\n      id: '3',\r\n      name:'Đã đổi từ điểm tích lũy'\r\n    },\r\n    {\r\n      id: '4',\r\n      name:'Đã sử dụng đổi hàng hóa'\r\n    },\r\n    {\r\n      id: '5',\r\n      name:'Đã hết hạn'\r\n    }\r\n  ]\r\n  public stateObj = {\r\n    searchValue: '',\r\n    selectedValue: '0',\r\n  }\r\n  public listShow:any[] = [];                                         // danh sách hiển thị\r\n  public listDetailRelease: any[] = [];                               // danh sách thông tin đợt\r\n  public listProductCodes:any [] = [];                                // danh sách mã voucher\r\n  public listSearch:any [] = [];                                      // danh sách mã tìm kiếm\r\n  public listFilter:any [] = [];                                      // danh sách mã filter\r\n  public heightScroll: string;\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n\r\n  ) {\r\n    this.releaseVoucher = this.router.getCurrentNavigation().extras.state\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  viewData(){\r\n    this.listShow= []\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQueryCafe.getVoucherRelaseDetail_byFields({id_voucher_release: {$eq: this.releaseVoucher._id}},{},{},0),\r\n        this.vhQueryCafe.getVouchers()\r\n      ]).then(([voucher_release_details, vouchers]:any)=>{\r\n\r\n        for (let item of voucher_release_details) {\r\n          let voucher = vouchers.find(item_vouchers=> item_vouchers._id == item.id_voucher)\r\n          this.getProductCodes(item._id, voucher);\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n  getProductCodes(id_release_detail: any, voucher: object) {\r\n    if(voucher){\r\n      this.vhQueryCafe.getVoucherCodes_byIdCouponReleaseDetail(id_release_detail)\r\n      .then((product_codes:any)=>{\r\n        product_codes.map(item =>{\r\n          item['price_voucher'] = voucher['units'][0]['price']\r\n          if (new Date > new Date(item.date_expire) &&  item.status == 1) item.status = 5;\r\n          return {\r\n            ...item\r\n          }\r\n        })\r\n        this.listShow = this.vhAlgorithm.sortStringbyASC(this.listShow.concat(product_codes), ['code']);\r\n        this.listProductCodes = this.listShow;\r\n        this.listSearch = this.listShow;\r\n        this.listFilter = this.listShow;\r\n      })\r\n    }\r\n  }\r\n\r\n  goBack(){\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/voucher/report-voucher'])\r\n  }\r\n\r\n  searchCode(key){\r\n    let tempVal: string = key.toLowerCase();\r\n    if (key.length)\r\n      this.listShow = this.vhAlgorithm.searchList(tempVal, this.listSearch, [\"code\"])\r\n    else this.listShow = this.listSearch\r\n  }\r\n\r\n  sortFilter(status){\r\n    this.stateObj.selectedValue = status;\r\n    switch(status){\r\n      case '0':{\r\n        this.listSearch = this.listFilter\r\n        break;\r\n      }\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':{\r\n        this.listSearch = this.listFilter.filter(item => item.status == status);\r\n        break;\r\n      }\r\n    }\r\n    this.searchCode(this.stateObj.searchValue)\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\")  &&\r\n    document.querySelector(\".ant-table-thead\") &&\r\n    document.querySelector(\".product-list-header\") &&\r\n    document.querySelector(\".left-all-content\") &&\r\n    document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n    /** hàm sort cho các cột */\r\n    codeCol = false;\r\n    date_validityCol = false;\r\n    date_usedCol = false;\r\n    price_voucherCol = false;\r\n    statusCol = false;\r\n    date_soldPoints_exchangedCol = false;\r\n    /** Hàm thực hiện sắp xếp theo collection\r\n     *\r\n     * @param colName       // tên cột muôn sắp xếp\r\n     */\r\n    sortTable(colName, colName2?){\r\n      switch (colName) {\r\n        case 'code':\r\n          if(this.codeCol){\r\n            this.listShow = this.vhAlgorithm.sortStringbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortStringbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'date_validity':\r\n          if(this.date_validityCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'date_used':\r\n          if(this.date_usedCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'price_voucher':\r\n          if(this.price_voucherCol){\r\n            this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'status':\r\n          if(this.statusCol){\r\n            this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        default:\r\n          if(this.date_soldPoints_exchangedCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName2? colName2: colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName2? colName2: colName);\r\n          }\r\n      }\r\n    }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"12\" class=\"title left-all-content\">\r\n            <b>{{ releaseVoucher.name }}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{'Search voucher code' | translate}}\" [(ngModel)]=\"stateObj.searchValue\" (keyup)=\"searchCode(stateObj.searchValue)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n            <nz-select style=\"width: 100%;\" nzBorderless [(ngModel)]=\"stateObj.selectedValue\" (ngModelChange)=\"sortFilter($event)\">\r\n                <nz-option *ngFor=\"let option of statusList\" nzLabel=\"{{option.name}}\" nzValue=\"{{option.id}}\"></nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"2\" class=\"right-all-content\">\r\n            <button class=\"btn-green center-all-content\" nz-button nzType=\"default\" (click)=\"viewData()\">\r\n                <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                {{'View' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 4px;\">\r\n        <span>Tổng <b style=\"color: #DD3341;\">{{listShow.length}}</b> mã voucher</span>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataShow [nzData]=\"listShow\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"codeCol = !codeCol;sortTable('code')\" nzWidth=\"15%\">\r\n                        <b>{{'Voucher code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\" nzWidth=\"20%\" nzAlign=\"center\">\r\n                        <b>{{'Release date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_soldPoints_exchangedCol = !date_soldPoints_exchangedCol;sortTable('date_sold','date_points_exchanged')\" nzWidth=\"17%\" nzAlign=\"center\">\r\n                        <b>{{'Sale/exchange date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_soldPoints_exchangedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_usedCol = !date_usedCol;sortTable('date_used')\" nzWidth=\"17%\" nzAlign=\"center\">\r\n                        <b>{{'Usage date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_usedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"statusCol = !statusCol;sortTable('status')\" nzWidth=\"16%\">\r\n                        <b>{{'Current status' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"price_voucherCol = !price_voucherCol;sortTable('price_voucher')\" nzWidth=\"15%\" nzAlign=\"right\">\r\n                        <b>{{'Voucher value' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"price_voucherCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataShow.data; let i = index\">\r\n                    <td> {{ data.code }}</td>\r\n                    <td nzAlign=\"center\"> {{data.date_validity |date: 'dd/MM/yyyy HH:mm'}} </td>\r\n                    <td nzAlign=\"center\">\r\n                        <span *ngIf=\"data.date_sold || data.date_points_exchanged\"> {{data.date_sold || data.date_points_exchanged |date: 'dd/MM/yyyy HH:mm'}}  </span>\r\n                        <span *ngIf=\"!data.date_sold && !data.date_points_exchanged\">-</span>\r\n                    </td>\r\n                    <td nzAlign=\"center\">\r\n                        <span *ngIf=\"data.date_used\"> {{data.date_used |date: 'dd/MM/yyyy HH:mm'}}  </span>\r\n                        <span *ngIf=\"!data.date_used\">-</span>\r\n                    </td>\r\n                    <td [ngSwitch]=\"data.status\">\r\n                        <span *ngSwitchCase=\"1\"><b>{{ '_Issued' | translate }}</b></span\r\n                      >\r\n                      <span *ngSwitchCase=\"2\"\r\n                        ><b style=\"color: var(--ion-color-vh-green)\">{{\r\n                          'Sold' | translate\r\n                        }}</b></span\r\n                      >\r\n                      <span *ngSwitchCase=\"3\"\r\n                        ><b style=\"color: var(--ion-color-vh-red)\">{{\r\n                          'Redeemed from points' | translate\r\n                        }}</b></span\r\n                      >\r\n                      <span *ngSwitchCase=\"4\"\r\n                        ><b style=\"color: var(--ion-color-vh-red)\">{{\r\n                          'Used for goods exchange' | translate\r\n                        }}</b></span\r\n                      >\r\n                      <span *ngSwitchDefault\r\n                        ><b style=\"color: var(--ion-color-vh-gray)\">Đã hết hạn</b></span\r\n                      >\r\n                    </td>\r\n                    <td nzAlign=\"right\"> {{ vhAlgorithm.vhcurrencyunit(data.price_voucher)}} </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuery, VhQueryCafe, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\n\r\n@Component({\r\n  selector: 'app-report-voucher',\r\n  templateUrl: './report-voucher.component.html',\r\n  styleUrls: ['./report-voucher.component.scss']\r\n})\r\nexport class ReportVoucherComponent implements OnInit {\r\n  public listReleases:any[] = [];                           // danh sách đợt voucher\r\n  public heightScroll: string;                              // chiều cao scroll\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuery: VhQuery,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhQueryCafe: VhQueryCafe,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getListReleases();\r\n  }\r\n\r\n  // lấy danh sách đợt phát hành voucher\r\n  getListReleases() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQueryCafe.getVoucherRelases().then((releases: any)=>{\r\n        for (let iterator of releases) {\r\n          this.vhQueryCafe.getVoucherRelaseDetail_byFields({ id_voucher_release: {$eq: iterator._id}},{},{},0)\r\n          .then((release_details:any)=>{\r\n            let voucher_sold = 0\r\n            let totalQuantityReleased = this.countNumberQuantity(release_details)\r\n            for (let itemRelease_details of release_details) {\r\n              this.vhQueryCafe.getVoucherCodes_byIdCouponReleaseDetail(itemRelease_details._id)\r\n              .then((listCodes: any)=>{\r\n                voucher_sold = voucher_sold + listCodes.filter(item => item.date_sold ).length;\r\n                iterator['total_voucher_code'] = totalQuantityReleased\r\n                iterator['voucher_sold'] = voucher_sold;\r\n                this.listReleases = this.vhAlgorithm.sortStringbyDESC(releases,['name']);\r\n              })\r\n            }\r\n            this.vhComponent.hideLoading(0)\r\n          })\r\n\r\n        }\r\n        if(!releases.length)    this.vhComponent.hideLoading(0)\r\n      })\r\n     })\r\n  }\r\n\r\n  // dùng để đếm số lượng mã voucher trong đượt\r\n  countNumberQuantity(arr:any[]):number{\r\n    let count = 0;\r\n    arr.forEach(element=>{\r\n      count =count +element['quantity_released']\r\n    })\r\n    return count\r\n  }\r\n\r\n  goBack(){\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/voucher'])\r\n  }\r\n  gotoDetail(item){\r\n    this.router.navigate(['/cafe/dashboard/management/sales-program/voucher/report-voucher/detail'],\r\n    {\r\n      state: item\r\n    })\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\")  &&\r\n    document.querySelector(\".ant-table-thead\") &&\r\n    document.querySelector(\".product-list-header\") &&\r\n    document.querySelector(\".left-all-content\") &&\r\n    document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  voucher_soldCol = false;\r\n  total_voucher_codeCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.listReleases = this.vhAlgorithm.sortVietnamesebyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortVietnamesebyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n      case 'voucher_sold':\r\n        if(this.voucher_soldCol){\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n      case 'total_voucher_code':\r\n        if(this.total_voucher_codeCol){\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"24\" class=\"title left-all-content\">\r\n            <b>{{'Voucher activity report' | translate}}</b>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 4px;\">\r\n        <span>Tổng <b style=\"color: #DD3341;\">{{listReleases.length}}</b> đợt voucher</span>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleases [nzData]=\"listReleases\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\" nzWidth=\"60%\" nzAlign=\"left\">\r\n                        <b>{{'Issuance name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"voucher_soldCol = !voucher_soldCol;sortTable('voucher_sold')\" nzWidth=\"20%\" nzAlign=\"right\">\r\n                        <b>{{'Sold voucher' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"voucher_soldCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"total_voucher_codeCol = !total_voucher_codeCol;sortTable('total_voucher_code')\" nzWidth=\"20%\" nzAlign=\"right\">\r\n                        <b>{{'Issued voucher' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"total_voucher_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataReleases.data; let i = index\" (click)=\"gotoDetail(data)\">\r\n                    <td nzAlign=\"left\"> {{ data.name }}</td>\r\n                    <td nzAlign=\"right\">\r\n                        {{data.voucher_sold}}\r\n                    </td>\r\n                    <td nzAlign=\"right\">\r\n                        {{data.total_voucher_code}}\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ReportVoucherComponent } from './report-voucher.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportVoucherComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ ReportVoucherComponent, DetailComponent ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class ReportVoucherModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}