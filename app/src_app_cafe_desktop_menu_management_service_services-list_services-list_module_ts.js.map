{"version":3,"file":"src_app_cafe_desktop_menu_management_service_services-list_services-list_module_ts.js","mappings":"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","sources":["./src/app/cafe/desktop/menu/management/service/services-list/add-service/add-service.component.ts","./src/app/cafe/desktop/menu/management/service/services-list/add-service/add-service.component.html","./src/app/cafe/desktop/menu/management/service/services-list/create-data-service/create-data-service.component.ts","./src/app/cafe/desktop/menu/management/service/services-list/create-data-service/create-data-service.component.html","./src/app/cafe/desktop/menu/management/service/services-list/detail-service/detail-service.component.ts","./src/app/cafe/desktop/menu/management/service/services-list/detail-service/detail-service.component.html","./src/app/cafe/desktop/menu/management/service/services-list/services-list.component.ts","./src/app/cafe/desktop/menu/management/service/services-list/services-list.component.html","./src/app/cafe/desktop/menu/management/service/services-list/services-list.module.ts","./src/app/cafe/desktop/menu/management/service/services-list/special-time/special-time.component.ts","./src/app/cafe/desktop/menu/management/service/services-list/special-time/special-time.component.html","./src/app/cafe/services/cleave-js.service.ts"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\r\nimport { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { CleaveJsService } from 'src/app/cafe/services/cleave-js.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-add-service',\r\n  templateUrl: './add-service.component.html',\r\n  styleUrls: ['./add-service.component.scss'],\r\n})\r\nexport class AddServiceComponent {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private cleaveJsService: CleaveJsService,\r\n  ) {}\r\n\r\n\r\n\r\n  productServiceForm: FormGroup;\r\n  barcode: boolean = false;\r\n  list_category: Array<any> = [];\r\n  list_barcode: Array<any> = [];\r\n  price: any;\r\n  price2: any;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n  createProd: boolean = false;\r\n\r\n  /** Danh sách loại dịch vụ */\r\n  item_type_list: any = [\r\n    { _id: VhType.SERVICE, name: 'Charge by work' },\r\n    { _id: VhType.SERVICETIME, name: 'Charge by time' },\r\n  ];\r\n\r\n  /** Danh sách loại khoảng thời gian */\r\n  time_unit_list: any = [\r\n    { _id: 'day', name: 'Day' },\r\n    { _id: 'hour', name: 'Hour' },\r\n    { _id: 'minute', name: 'Minute' },\r\n    // { _id: 'second', name: 'Second' },\r\n  ];\r\n\r\n  /** Có sử dụng Giờ đầu tiên hay không */\r\n  use_first_time: boolean = false;\r\n  /** Có sử dụng Giờ đặc biệt hay không */\r\n  use_special_time: boolean = false;\r\n  /** Có hiện modal chọn thời gian đặc biệt hay không */\r\n  isShowModalSpecialTime: boolean = false;\r\n  /** Ký hiệu tiền tệ. Ví dụ 'VND' */\r\n  currencySymbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text;\r\n  /** Dữ liệu thời gian đặc biệt để edit truyền vào modal */\r\n  dataSpecialTimeEdit: any = null;\r\n\r\n  /** Validator cho trường giá tiền */\r\n  PRICE_VALIDATOR = [\r\n    Validators.required,\r\n    Validators.pattern('(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'),\r\n  ];\r\n\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n    this.initData();\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.price = this.vhAlgorithm.vhnumeral('.price');\r\n      if (this.management_product_price2) {\r\n        this.price2 = this.vhAlgorithm.vhnumeral('.price2');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    if (!this.createProd && this.productServiceForm.value['img'])\r\n      this.vhImage\r\n        .deleteThumbnail([this.productServiceForm.value['img']])\r\n        .then(() => {});\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list'], {\r\n      state: this.dataRestore,\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * khởi tạo các trường của dịch vụ vào form\r\n   * @example this.initForm()\r\n   */\r\n  initForm() {\r\n    this.productServiceForm = new FormGroup({\r\n      img: new FormControl(''),\r\n      name: new FormControl('', Validators.required),\r\n      barcode: new FormControl(''),\r\n      unit: new FormControl('', Validators.required),\r\n      price: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n      price2: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n      id_category: new FormControl('', Validators.required),\r\n      // allow_sell: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      selling: new FormControl(true),\r\n      type: new FormControl(VhType.SERVICE),\r\n      time_warning: new FormControl(0),\r\n\r\n      time_block: new FormControl(1, Validators.compose([Validators.required, Validators.min(1)])),\r\n\r\n      is_merge_block: new FormControl(false, Validators.required),\r\n      is_first_time: new FormControl(false, Validators.required),\r\n      is_special_times: new FormControl(false, Validators.required),\r\n\r\n      merge_block: new FormGroup({\r\n        price: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        price2: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        number: new FormControl(1, Validators.compose([Validators.required, Validators.min(1)])),\r\n      }),\r\n\r\n      first_time: new FormGroup({\r\n        price: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        price2: new FormControl(0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        unit: new FormControl('minute', Validators.required),\r\n        time_block: new FormControl(1, Validators.compose([Validators.required, Validators.min(1)])),\r\n      }),\r\n      \r\n      special_times: new FormArray([]),\r\n    });\r\n  }\r\n  \r\n  \r\n  \r\n  /** Getter cho special_times */\r\n  get specialTimesArray(): FormArray {\r\n    return this.productServiceForm.get('special_times') as FormArray;\r\n  }\r\n\r\n  /** Getter cho merge_block */\r\n  get mergeBlockGroup(): FormGroup {\r\n    return this.productServiceForm.get('merge_block') as FormGroup;\r\n  }\r\n  \r\n  /** Getter cho first_time */\r\n  get firstTimeGroup(): FormGroup {\r\n    return this.productServiceForm.get('first_time') as FormGroup;\r\n  }\r\n\r\n\r\n\r\n  initData() {\r\n    this.list_category = this.vhQueryCafe.getlocalCategorys(2);\r\n    this.vhQueryCafe.getlocalProducts().forEach((item) => {\r\n      if (item.barcode) this.list_barcode.push(item);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * tạo barcode tự động\r\n   * @example this.changeBarcode()\r\n   */\r\n  changeBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    if (!this.checkBarcode(newbarcode)) {\r\n      this.productServiceForm.controls['barcode'].setValue(newbarcode);\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * kiểm tra barcode đã tồn tại chưa\r\n   * @example this.checkBarcode()\r\n   */\r\n  checkBarcode(barcode) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode);\r\n    if (detailproduct == null) {\r\n      let index = this.list_barcode.findIndex(\r\n        (item) => item.barcode == barcode\r\n      );\r\n      if (index >= 0) this.barcode = true;\r\n      else this.barcode = false;\r\n    } else {\r\n      this.barcode = true;\r\n    }\r\n    return this.barcode;\r\n  }\r\n\r\n\r\n\r\n  getFile() {\r\n    document.getElementById('file-upload').click();\r\n  }\r\n\r\n\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage\r\n      .getThumbnailFromDesktop(\r\n        file,\r\n        256,\r\n        256,\r\n        'products',\r\n        this.productServiceForm.value.img || null\r\n      )\r\n      .then(\r\n        (photoURL) => {\r\n          this.productServiceForm.controls['img'].setValue(photoURL);\r\n          this.vhComponent.showToast(\r\n            2000,\r\n            this.languageService.translate('Image was loaded successfully'),\r\n            'success-toast'\r\n          );\r\n        },\r\n        () => {\r\n          this.vhComponent.showToast(\r\n            2000,\r\n            this.languageService.translate('Image was failed'),\r\n            'alert-toast'\r\n          );\r\n        }\r\n      );\r\n  }\r\n\r\n\r\n\r\n  /**Tạo mới dịch vụ */\r\n  saveProduct(formValue) {\r\n    let service: any = {\r\n      name: formValue.name,\r\n      time_warning: formValue.time_warning ? parseFloat(formValue.time_warning) : 0,\r\n      img: formValue.img,\r\n      id_category: formValue.id_category,\r\n      // allow_sell: formValue.allow_sell,\r\n      delete_hidden: formValue.delete_hidden,\r\n      selling: formValue.selling,\r\n      type: formValue.type,\r\n      tax: 0,\r\n      units: [\r\n        {\r\n          unit: formValue.unit,\r\n          ratio: 1,\r\n          default: true,\r\n          price: parseFloat(this.price.getRawValue()),\r\n          price2: this.management_product_price2 ? parseFloat(this.price2.getRawValue()) : 0,\r\n          barcode: formValue.barcode,\r\n        },\r\n      ],\r\n    };\r\n\r\n    if (formValue.type == VhType.SERVICETIME) {\r\n      // set lại units[0] dạng time\r\n      service.units[0].price = parseFloat(this.cleaveJsService.getRawValue('.price'));\r\n      service.units[0].price2 = this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.price2')) : 0;\r\n      service.units[0].time_block = formValue.time_block;\r\n\r\n      // các trường is_merge_block, is_first_time, is_special_times\r\n      service.units[0].is_merge_block = formValue.is_merge_block;\r\n      service.units[0].is_first_time = formValue.is_first_time;\r\n      service.units[0].is_special_times = formValue.is_special_times;\r\n\r\n      // merge_block\r\n      if(service.units[0].is_merge_block) {\r\n        service.units[0].merge_block = {\r\n          price: parseFloat(this.cleaveJsService.getRawValue('.merge_block_price')),\r\n          price2: this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.merge_block_price2')) : 0,\r\n          number: formValue.merge_block.number,\r\n        };\r\n      }\r\n      // first_time\r\n      if (formValue.is_first_time) {\r\n        service.units[0].first_time = {\r\n          price: parseFloat(this.cleaveJsService.getRawValue('.first_time_price')),\r\n          price2: this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.first_time_price2')) : 0,\r\n          unit: formValue.first_time.unit,\r\n          time_block: formValue.first_time.time_block,\r\n        };\r\n      }\r\n      // special_times\r\n      if (formValue.is_special_times) {\r\n        service.units[0].special_times = [];\r\n        this.specialTimesArray.controls.forEach((item: any) => {\r\n          let data = {\r\n            price: parseFloat(item.value.price),\r\n            price2: this.management_product_price2 ? parseFloat(item.value.price2) : 0,\r\n            time_slot_name: item.value.time_slot_name,\r\n            specific_time: {\r\n              from_minute: item.value.specific_time.from_minute,\r\n              to_minute: item.value.specific_time.to_minute,\r\n            },\r\n            days_of_week: item.value.days_of_week.map((day) => day),\r\n          };\r\n          service.units[0].special_times.push(data);\r\n        });\r\n      }\r\n    }\r\n\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.addProduct_Cafe(service).then(\r\n        (res) => {\r\n          console.log(res);\r\n          this.createProd = true;\r\n          this.vhComponent.showToast(\r\n            1000,\r\n            service.name +\r\n              ' ' +\r\n              this.languageService.translate('has been added successfully'),\r\n            'success-toast'\r\n          );\r\n          setTimeout(() => {\r\n            this.vhComponent.hideLoading(0);\r\n            this.goBack();\r\n          }, 300);\r\n        },\r\n        (err) => {\r\n          this.vhComponent.hideLoading(0);\r\n          console.log(err);\r\n          this.vhComponent.showToast(\r\n            1500,\r\n            this.languageService.translate('An error occurred while adding product. Please try again'),\r\n            'alert-toast'\r\n          );\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi loại dịch vụ\r\n   * @param event loại dịch vụ được chọn\r\n   */\r\n  onServiceTypeChange(event: VhType) {\r\n    if (event == VhType.SERVICETIME) {\r\n      this.productServiceForm.controls['unit'].setValue('minute');\r\n      // thêm validator cho các trường\r\n      this.addValidatorsToFields(this.productServiceForm, ['time_block'], [Validators.compose([Validators.required, Validators.min(1)])]);\r\n      this.addValidatorsToFields(this.productServiceForm, ['is_merge_block', 'is_first_time', 'is_special_times'], [Validators.required]);\r\n      this.productServiceForm.controls['time_block'].setValue(1);\r\n      this.productServiceForm.controls['is_merge_block'].setValue(false);\r\n      this.productServiceForm.controls['is_first_time'].setValue(false);\r\n      this.productServiceForm.controls['is_special_times'].setValue(false);\r\n      this.productServiceForm.controls['merge_block'].get('price').setValue(0);\r\n      this.productServiceForm.controls['merge_block'].get('price2').setValue(0);\r\n      this.productServiceForm.controls['merge_block'].get('number').setValue(1);\r\n      this.productServiceForm.controls['first_time'].get('price').setValue(0);\r\n      this.productServiceForm.controls['first_time'].get('price2').setValue(0);\r\n      this.productServiceForm.controls['first_time'].get('unit').setValue('minute');\r\n      this.productServiceForm.controls['first_time'].get('time_block').setValue(1);\r\n    }\r\n    else {\r\n      this.productServiceForm.controls['unit'].setValue('');\r\n      // xóa validator cho các trường\r\n      this.removeValidatorsFromFields(this.productServiceForm, ['time_block', 'is_merge_block', 'is_first_time', 'is_special_times']);\r\n      this.removeValidatorsFromFields(this.mergeBlockGroup, ['price', 'price2', 'number']);\r\n      this.removeValidatorsFromFields(this.firstTimeGroup, ['price', 'price2', 'unit', 'time_block']);\r\n      this.specialTimesArray.clear();\r\n\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price = this.vhAlgorithm.vhnumeral('.price');\r\n        if (this.management_product_price2) {\r\n          this.price2 = this.vhAlgorithm.vhnumeral('.price2');\r\n        }\r\n      });\r\n    }\r\n    this.initPriceCleave(event == VhType.SERVICETIME, ['.price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event == VhType.SERVICETIME, ['.price2']);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Có gộp block hay không\r\n   * @param event true là có gộp block, false là không \r\n   */\r\n  changeMergeBlock(event) {\r\n    if(event) {\r\n      this.addValidatorsToFields(this.mergeBlockGroup, ['price', 'price2'], this.PRICE_VALIDATOR);\r\n      this.addValidatorsToFields(this.mergeBlockGroup, ['number'], [Validators.required]);\r\n    }\r\n    else {\r\n      this.removeValidatorsFromFields(this.mergeBlockGroup, ['price', 'price2', 'number']);\r\n    }\r\n    this.initPriceCleave(event, ['.merge_block_price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event, ['.merge_block_price2']);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Có sử dụng giờ đầu tiên hay không\r\n   * @param event true là có sử dụng giờ đầu tiên, false là không\r\n   */\r\n  changeFirstTime(event) {\r\n    if(event) {\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['price', 'price2'], this.PRICE_VALIDATOR);\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['unit'], [Validators.required]);\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['time_block'], [Validators.required, Validators.compose([Validators.required, Validators.min(1)])]);\r\n    }\r\n    else {\r\n      this.removeValidatorsFromFields(this.firstTimeGroup, ['price', 'price2', 'unit', 'time_block']);\r\n    }\r\n    this.initPriceCleave(event, ['.first_time_price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event, ['.first_time_price2']);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo / Huỷ Cleave cho các trường giá tiền\r\n   * @param event true là khởi tạo Cleave, false là huỷ Cleave\r\n   * @param name tên của các trường cần khởi tạo Cleave\r\n   */\r\n  initPriceCleave(event: boolean, names: any[]) {\r\n    if (event) {\r\n      setTimeout(() => {\r\n        this.cleaveJsService.createCleaves(names);\r\n      }, 100);\r\n    } \r\n    else {\r\n      this.cleaveJsService.destroyCleaves(names);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Nhận dữ liệu từ modal chọn thời gian đặc biệt\r\n   * @param data object special_time được trả về. Nếu data có index thì là Edit, ngược lại là Add\r\n   */\r\n  onOkSpecialTime(data: any) {\r\n    // Nếu có index thì là Edit\r\n    if(data.index !== undefined) {\r\n      // lấy days_of_week từ data và set\r\n      const daysOfWeekArray = this.specialTimesArray.at(data.index).get('days_of_week') as FormArray;\r\n      daysOfWeekArray.clear();\r\n      (data.days_of_week || []).forEach((day: string) => {\r\n        daysOfWeekArray.push(new FormControl(day));\r\n      });\r\n      this.specialTimesArray.at(data.index).patchValue({\r\n        price: data.price,\r\n        price2: this.management_product_price2 ? data.price2 : 0,\r\n        time_slot_name: data.time_slot_name,\r\n        specific_time: {\r\n          from_minute: data.specific_time.from_minute,\r\n          to_minute: data.specific_time.to_minute,\r\n        },\r\n      });\r\n    }\r\n    // Add\r\n    else {\r\n      // lấy days_of_week từ data\r\n      const selectedDays = data.days_of_week || [];\r\n      const daysOfWeekArray = new FormArray(\r\n        selectedDays.map((day: string) => new FormControl(day))\r\n      );\r\n      this.specialTimesArray.push(\r\n        new FormGroup({\r\n          price: new FormControl(data.price),\r\n          price2: new FormControl(this.management_product_price2 ? data.price2 : 0),\r\n          time_slot_name: new FormControl(data.time_slot_name),\r\n          specific_time: new FormGroup({\r\n            from_minute: new FormControl(data.specific_time.from_minute),\r\n            to_minute: new FormControl(data.specific_time.to_minute),\r\n          }),\r\n          days_of_week: daysOfWeekArray,\r\n        })\r\n      );\r\n    }\r\n\r\n  }\r\n  \r\n  \r\n  \r\n  /**\r\n   * Chuyển từ phút sang giờ\r\n   * @param minutes phút cần chuyển đổi\r\n   * @returns chuỗi thời gian theo định dạng HH:mm\r\n   * @example\r\n   * convertMinutesToTime(90) => '01:30'\r\n   */\r\n  convertMinutesToTime(minutes: number): string {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chuyển đổi phút thành đối tượng Date\r\n   * @param minutes Số phút cần chuyển đổi\r\n   * @returns Đối tượng Date với giờ và phút đã được thiết lập\r\n   * \r\n   * @example \r\n   * convertMinutesToDate(90) => Date object with hours = 1, minutes = 30\r\n   * convertMinutesToDate(120) => Date object with hours = 2, minutes = 0\r\n   */\r\n  convertMinutesToDate(minutes: number): Date {\r\n    const date = new Date();\r\n    date.setHours(Math.floor(minutes / 60), minutes % 60, 0, 0); // Set hours and minutes\r\n    return date;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xóa thời gian đặc biệt\r\n   * @param index index của thời gian đặc biệt cần xóa\r\n   */\r\n  deleteSpecialTime(index: number) {\r\n    this.specialTimesArray.removeAt(index);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chỉnh sửa thời gian đặc biệt\r\n   * @param index index của thời gian đặc biệt cần chỉnh sửa\r\n   */\r\n  editSpecialTime(index: number) {\r\n    const specialTime = this.specialTimesArray.at(index).value;\r\n    this.dataSpecialTimeEdit = JSON.parse(JSON.stringify(specialTime));\r\n    this.dataSpecialTimeEdit.specific_time.from_minute = this.convertMinutesToDate(this.dataSpecialTimeEdit.specific_time.from_minute);\r\n    this.dataSpecialTimeEdit.specific_time.to_minute = this.convertMinutesToDate(this.dataSpecialTimeEdit.specific_time.to_minute);\r\n    this.dataSpecialTimeEdit.index = index;\r\n    \r\n    this.isShowModalSpecialTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thêm validator vào các trường trong FormGroup\r\n   * \r\n   * @param group FormGroup cần thêm validator.\r\n   * @param fields Mảng tên trường mà validator sẽ được thêm vào.\r\n   * @param validators Mảng các validator cần thêm.\r\n   * \r\n   * @example\r\n   * addValidatorsToFields(this.productServiceForm, ['field1', 'field2'], [Validators.required]);\r\n   * addValidatorsToFields(this.productServiceForm, ['field1', 'field2'], [Validators.required, Validators.minLength(3)]);\r\n   */\r\n  addValidatorsToFields(group: FormGroup, fields: string[], validators: any[]) {\r\n    fields.forEach((field) => {\r\n      const control = group.get(field);\r\n      if (control) {\r\n        control.addValidators(validators);\r\n        control.updateValueAndValidity();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xóa validator khỏi các trường trong FormGroup\r\n   * Nếu không chỉ định validator, tất cả các validator sẽ bị xóa.\r\n   * \r\n   * @param group FormGroup cần xóa validator.\r\n   * @param fields Mảng tên trường mà validator sẽ bị xóa.\r\n   * @param validators (Optional) Các validator cần xóa. Nếu không cung cấp, tất cả các validator sẽ bị xóa.\r\n   * \r\n   * @example\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2']);\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2'], [Validators.required]);\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2'], [Validators.required, Validators.minLength(3)]);\r\n   */\r\n  removeValidatorsFromFields(group: FormGroup, fields: string[], validators?: any[]) {\r\n    fields.forEach((field) => {\r\n      const control = group.get(field);\r\n      if (control) {\r\n        // Xóa các validator đã chỉ định\r\n        if (validators && validators.length > 0) {\r\n          validators.forEach((validator) => {\r\n            control.removeValidators(validator);\r\n          });\r\n        } \r\n        // Xóa tất cả các validator\r\n        else {\r\n          control.clearValidators();\r\n        }\r\n        control.updateValueAndValidity();\r\n      }\r\n    });\r\n  }\r\n      \r\n      \r\n      \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.SERVICE)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.SERVICE }).then((res: any) => {\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.productServiceForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<!-- Nút Quay lại -->\r\n<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n\r\n<nz-layout>\r\n  <form nz-form [formGroup]=\"productServiceForm\">\r\n\r\n    <div class=\"custom-box\">\r\n      <!-- Header -->\r\n      <div nz-row>\r\n        <div nz-col nzSpan=\"21\" class=\"title left-all-content\">\r\n          <b>{{'Add service' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"3\" class=\"add-button\">\r\n          <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"saveProduct(productServiceForm.value)\" [disabled]=\"productServiceForm.invalid || barcode\"\r\n            [ngStyle]=\"{opacity: (productServiceForm.invalid || barcode) ? 0.5 : 1}\">\r\n            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n            {{'Save' | translate}}</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div nz-row>\r\n        <!-- Ảnh -->\r\n        <div nz-col nzSpan=\"24\" class=\"center-all-content\" style=\"margin-bottom: 24px;\">\r\n          <div class=\"bg-img center-all-content\" (click)=\"getFile()\">\r\n            <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n              (change)=\"onUpload($event)\" />\r\n            <img [ngStyle]=\"{width: productServiceForm.value.img ? '100%' : '60px'}\"\r\n              onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"productServiceForm.value.img\" />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Tên -->\r\n        <div nz-col nzSpan=\"12\">\r\n          <div><b class='label'>{{'Service name' | translate}}*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n              <nz-input-group>\r\n                <input formControlName=\"name\" nz-input [placeholder]=\"'Enter service name' | translate\" required />\r\n                <ng-template #combineTplName let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Service name is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Loại dịch vụ -->\r\n        <div nz-col nzSpan=\"12\">\r\n          <div><b>{{'Service type' | translate}}*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"type\">\r\n              <nz-select nzShowSearch [nzPlaceHolder]=\"'Please select service type' | translate\"\r\n                formControlName=\"type\"\r\n                (ngModelChange)=\"onServiceTypeChange($event)\">\r\n                <nz-option *ngFor=\"let option of item_type_list\" [nzLabel]=\"option.name | translate\" [nzValue]=\"option._id\"></nz-option>\r\n                <ng-template #type let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Service type is required' | translate}}</ng-container>\r\n                </ng-template>\r\n              </nz-select>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Danh mục -->\r\n        <div nz-col nzSpan=\"12\">\r\n          <div><b class='label'>{{'Category' | translate}}*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n              <!-- Thanh chọn -->\r\n              <nz-select formControlName=\"id_category\" \r\n                  [nzDropdownRender]=\"addCategoryTemplate\"\r\n                  nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                  <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n              </nz-select>\r\n              <!-- Thêm danh mục -->\r\n              <ng-template #addCategoryTemplate>\r\n                  <nz-divider></nz-divider>\r\n                  <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                      <!-- Input nhập tên -->\r\n                      <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                      <!-- Nút thêm -->\r\n                      <button (click)=\"addCategory(categoryName)\" nz-button\r\n                          [nzLoading]=\"isAddingCategory\"\r\n                          [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                          {{'Add' | translate}}\r\n                      </button>\r\n                  </div>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Mã vạch -->\r\n        <div nz-col nzSpan=\"12\">\r\n          <div><b class='label'>{{'Barcode' | translate}}</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control>\r\n              <nz-input-group>\r\n                <input #box formControlName=\"barcode\" nz-input\r\n                  [placeholder]=\"'Enter manually or use the barcode scanner' | translate\"\r\n                  (keyup)=\"checkBarcode(box.value)\" />\r\n                  <i style=\"margin: 8px 0 0 8px; cursor: pointer\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"changeBarcode()\"\r\n                    nz-tooltip [nzTooltipTitle]=\"'Generate barcodes automatically' | translate\" nzTooltipPlacement=\"bottom\"></i>\r\n              </nz-input-group>\r\n              <div class=\"validation-errors\">\r\n                <ng-container>\r\n                  <div class=\"error-message\" *ngIf=\"barcode\">\r\n                    <ion-text color=\"vh-red\">{{'Invalid barcode' | translate}}</ion-text>\r\n                  </div>\r\n                </ng-container>\r\n              </div>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- ------------------------------------------------------- TÍNH TIỀN THEO CÔNG ------------------------------------------------------- -->\r\n        <ng-container *ngIf=\"productServiceForm.value.type === VhType.SERVICE\">\r\n          <!-- Đơn vị -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b>{{'Unit' | translate}}</b>*</div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                <nz-input-group>\r\n                  <input formControlName=\"unit\" nz-input [placeholder]=\"'Enter unit' | translate\" />\r\n                  <ng-template #combineTplUnit let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <!-- Giá -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b>{{'Service price' | translate}} *</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                <nz-input-group>\r\n                  <input class=\"price\" formControlName=\"price\" nz-input placeholder=\"0\" required\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" />\r\n                  <ng-template #combineTplPriceImport let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <!-- Giá 2 -->\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"management_product_price2\">\r\n            <div><b>{{'Service price' | translate}} 2*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                <nz-input-group>\r\n                  <input class=\"price2\" type=\"text\" maxlength=\"15\" formControlName=\"price2\" nz-input placeholder=\"0\" required\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" />\r\n                  <ng-template #combineTplPriceImport let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <!-- Thời gian cảnh báo -->\r\n        <div nz-col nzSpan=\"12\" *ngIf=\"productServiceForm.value.type === VhType.SERVICE\">\r\n          <ng-container>\r\n            <div><b>{{'Warning timeout (minute)' | translate}}</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group>\r\n                  <input formControlName=\"time_warning\" nz-input type=\"number\"\r\n                    [placeholder]=\"'Enter warning timeout (minutes)' | translate\" />\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <div nz-col nzSpan=\"12\">\r\n          <!-- Cho phép bán -->\r\n          <!-- <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n              <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell' | translate}}</label>\r\n            </div>\r\n          </div> -->\r\n          <!-- Yêu thích -->\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n              <label nz-checkbox formControlName=\"selling\">{{'Favorite' | translate}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"productServiceForm.value.type === VhType.SERVICETIME\" nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n          <b>* {{'_Note' | translate}}:</b> <br>\r\n          <i>- {{'Priority order for calculating charges: First time block => Special time block => Merge block => Regular time.' | translate}}</i>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ---------------------------------------------------- TÍNH TIỀN THEO THỜI GIAN ----------------------------------------------------- -->\r\n    <ng-container *ngIf=\"productServiceForm.value.type === VhType.SERVICETIME\">\r\n\r\n      <!-- --------------------------------------------------------- Giờ bán thường ---------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <!-- Giờ bán thường -->\r\n        <div nz-col nzSpan=\"24\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px;\">\r\n            <b>{{'Regular selling time' | translate}}</b>\r\n          </div>\r\n\r\n          <div nz-row>\r\n            <!-- Giá bán -->\r\n            <div nz-col nzSpan=\"6\">\r\n              <div>{{'Selling price' | translate}}*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"price\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price\" class=\"price\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #price let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Giá bán 2 -->\r\n            <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n              <div>{{'Selling price' | translate}} 2*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"price2\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price2\" class=\"price2\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #price2 let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n              <div>{{'Apply for each time block' | translate}}*</div>\r\n              <div nz-row>\r\n                <!-- Áp dụng mỗi khoảng thời gian -->\r\n                <nz-form-item nz-col nzSpan=\"18\">\r\n                  <nz-form-control [nzErrorTip]=\"time_block\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"time_block\" [min]=\"1\" nz-input type=\"number\" [placeholder]=\"'Enter time' | translate\" style=\"width: 98%;\" />\r\n                      <ng-template #time_block let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time block is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid time block' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n                <!-- Đơn vị thời gian -->\r\n                <nz-form-item nz-col nzSpan=\"6\">\r\n                  <nz-form-control [nzErrorTip]=\"time_unit\">\r\n                    <nz-select formControlName=\"unit\" nzShowSearch>\r\n                      <nz-option *ngFor=\"let option of time_unit_list\" [nzLabel]=\"option.name | translate | titlecase\" [nzValue]=\"option._id\"></nz-option>\r\n                      <ng-template #time_unit let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time unit is required' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-select>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"24\" style=\"margin-bottom: 12px;\">\r\n              <b>* {{'_Note' | translate}}:</b> <br>\r\n              <i>- {{'Usage time, if less than the time set for regular selling price, will be rounded up to the time set for the regular selling price.' | translate}}</i>\r\n            </div>\r\n\r\n            <!-- Gộp block -->\r\n            <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n              <b>{{'Merge block' | translate}}</b>\r\n              <nz-switch formControlName=\"is_merge_block\" (ngModelChange)=\"changeMergeBlock($event)\"></nz-switch>\r\n            </div>\r\n            <!-- Có bật Gộp block -->\r\n            <ng-container *ngIf=\"productServiceForm.value.is_merge_block\" formGroupName=\"merge_block\">\r\n              <!-- Giá bán -->\r\n              <div nz-col nzSpan=\"6\">\r\n                <div>{{'Selling price' | translate}}*</div>\r\n                <nz-form-item nz-col nzSpan=\"24\">\r\n                  <nz-form-control [nzErrorTip]=\"merge_block_price\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"price\" class=\"merge_block_price\" nz-input placeholder=\"0\" required />\r\n                      <ng-template #merge_block_price let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Giá bán 2 -->\r\n              <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n                <div>{{'Selling price' | translate}} 2*</div>\r\n                <nz-form-item nz-col nzSpan=\"24\">\r\n                  <nz-form-control [nzErrorTip]=\"merge_block_price2\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"price2\" class=\"merge_block_price2\" nz-input placeholder=\"0\" required />\r\n                      <ng-template #merge_block_price2 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Số lượng block gộp -->\r\n              <div nz-col nzSpan=\"12\">\r\n                <div>{{'Number of merged blocks' | translate}}*</div>\r\n                <div nz-row>\r\n                  <nz-form-item nz-col nzSpan=\"24\">\r\n                    <nz-form-control [nzErrorTip]=\"number\">\r\n                      <nz-input-group>\r\n                        <input formControlName=\"number\" nz-input type=\"number\" [placeholder]=\"'Enter quantity' | translate\" style=\"width: 98%;\" />\r\n                        <ng-template #number let-control>\r\n                          <ng-container *ngIf=\"control.hasError('required')\">{{'Quantity is required' | translate}}</ng-container>\r\n                          <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid quantity' | translate}}</ng-container>\r\n                        </ng-template>\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- ---------------------------------------------------------- Giờ đầu tiên ----------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n            <b>{{'First hour' | translate}}</b>\r\n            <nz-switch formControlName=\"is_first_time\" (ngModelChange)=\"changeFirstTime($event)\"></nz-switch>\r\n          </div>\r\n          <div *ngIf=\"productServiceForm.value.is_first_time\" formGroupName=\"first_time\" nz-row>\r\n            <!-- Giá bán -->\r\n            <div nz-col nzSpan=\"6\">\r\n              <div>{{'Selling price' | translate}}*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"first_time_price\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price\" class=\"first_time_price\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #first_time_price let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Giá bán 2 -->\r\n            <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n              <div>{{'Selling price' | translate}} 2*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"first_time_price2\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price2\" class=\"first_time_price2\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #first_time_price2 let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Thời gian sử dụng đầu tiên -->\r\n            <div nz-col nzSpan=\"12\">\r\n              <div>{{'First usage time' | translate}}*</div>\r\n              <div nz-row>\r\n                <nz-form-item nz-col nzSpan=\"18\">\r\n                  <nz-form-control [nzErrorTip]=\"first_time_time_block\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"time_block\" nz-input type=\"number\" [min]=\"1\"  [placeholder]=\"'Enter time' | translate\" style=\"width: 98%;\" />\r\n                      <ng-template #first_time_time_block let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid time' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item nz-col nzSpan=\"6\">\r\n                  <nz-form-control [nzErrorTip]=\"first_time_unit\">\r\n                    <nz-select formControlName=\"unit\" nzShowSearch>\r\n                      <nz-option *ngFor=\"let option of time_unit_list\" [nzLabel]=\"option.name | translate | titlecase\" [nzValue]=\"option._id\"></nz-option>\r\n                      <ng-template #first_time_unit let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time unit is required' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-select>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- ---------------------------------------------------------- Giờ đặc biệt ----------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n            <b>{{'Special time' | translate}}</b>\r\n            <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 12px;\">\r\n              <!-- Nút thêm -->\r\n              <button *ngIf=\"productServiceForm.value.is_special_times\"\r\n                (click)=\"isShowModalSpecialTime = true; dataSpecialTimeEdit = undefined\"\r\n                 nz-button nzType=\"default\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Add' | translate}}\r\n              </button>\r\n              <!-- Bật tắt -->\r\n              <nz-switch formControlName=\"is_special_times\"></nz-switch>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Table -->\r\n          <div *ngIf=\"productServiceForm.value.is_special_times\" style=\"height: 83%; overflow: hidden;\">\r\n            <nz-table [nzShowPagination]=\"false\" [nzBordered]=\"true\" [nzData]=\"specialTimesArray.controls\" [nzNoResult]=\"null\">\r\n              <!-- Header -->\r\n              <thead>\r\n                <tr>\r\n                  <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Name' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Time block' | translate}}</b></th>\r\n                  <th nzWidth=\"30%\" nzAlign=\"left\"><b>{{'Days of the week' | translate}}</b></th>\r\n                  <th nzWidth=\"20%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n                  <th nzWidth=\"10%\" nzAlign=\"center\"></th>\r\n                </tr>\r\n              </thead>\r\n              <!-- Body -->\r\n              <tbody>\r\n                <ng-container formArrayName=\"special_times\" style=\"cursor: pointer;\">\r\n                  <tr *ngFor=\"let specialTime of specialTimesArray.controls; let i = index\" [formGroupName]=\"i\">\r\n                    <!-- Tên -->\r\n                    <td>{{specialTime.value.time_slot_name}}</td>\r\n                    <!-- Khung giờ -->\r\n                    <td nzAlign='center'>\r\n                      <ng-container *ngIf=\"specialTime.value.specific_time.from_minute === 0 && specialTime.value.specific_time.to_minute === 1440; else timeRange\">\r\n                        {{'Whole day' | translate}}\r\n                      </ng-container>\r\n                      <ng-template #timeRange>\r\n                        {{convertMinutesToTime(specialTime.value.specific_time.from_minute)}} - {{convertMinutesToTime(specialTime.value.specific_time.to_minute)}}\r\n                      </ng-template>\r\n                    </td>\r\n                    <!-- Ngày trong tuần -->\r\n                    <td>\r\n                      <ng-container *ngIf=\"specialTime.value.days_of_week && specialTime.value.days_of_week.length\">\r\n                        <ng-container *ngFor=\"let day of specialTime.value.days_of_week; let last = last\">\r\n                          {{ day | titlecase | translate }}<span *ngIf=\"!last\">, </span>\r\n                        </ng-container>\r\n                      </ng-container>\r\n                    </td>\r\n                    <!-- Giá bán -->\r\n                    <td nzAlign='center'>{{vhAlgorithm.vhcurrencyunit(specialTime.value.price)}} {{currencySymbol}} / {{productServiceForm.value.time_block}} {{productServiceForm.value.unit | translate}}</td>\r\n                    <!-- Icon -->\r\n                    <td nzAlign='center'>\r\n                      <!-- Sửa -->\r\n                      <i (click)=\"editSpecialTime(i)\"\r\n                        class=\"cus-icon\" nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 8px; cursor: pointer;\"></i>\r\n                      <!-- Xóa -->\r\n                      <span nz-button nzType=\"default\" nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n                        [nzPopconfirmTitle]=\"'Are you sure to delete this special time?'| translate\"\r\n                        (nzOnConfirm)=\"deleteSpecialTime(i)\">\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style=\"cursor: pointer;\"></i>\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                </ng-container>\r\n                <!-- Không có dữ liệu -->\r\n                <tr *ngIf=\"specialTimesArray.length === 0\" class=\"ant-table-placeholder\">\r\n                  <td colspan=\"5\">\r\n                    <nz-embed-empty>No special times available</nz-embed-empty>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </nz-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </form>\r\n</nz-layout>\r\n\r\n\r\n\r\n<!-- --------------------------------------------------- MODAL ADD/EDIT GIỜ ĐẶC BIỆT --------------------------------------------------- -->\r\n<app-special-time *ngIf=\"isShowModalSpecialTime\"\r\n  [data]=\"dataSpecialTimeEdit\"\r\n  [specialTimes]=\"productServiceForm.get('special_times').value\"\r\n  (onClose)=\"isShowModalSpecialTime = false\"\r\n  (onOk)=\"isShowModalSpecialTime = false; onOkSpecialTime($event)\">\r\n</app-special-time>\r\n","import { Component } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators, AbstractControl, ValidationErrors, ValidatorFn } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhQueryCafe, VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\ndeclare var electron: any;\r\n\r\n@Component({\r\n  selector: 'app-create-data-service',\r\n  templateUrl: './create-data-service.component.html',\r\n  styleUrls: ['./create-data-service.component.scss']\r\n})\r\nexport class CreateDataServiceComponent {\r\n\r\n  formData: FormGroup[] = [];\r\n  localProduct: any[] = this.vhQueryCafe.getlocalProducts().filter(item => item.type == VhType.SERVICE);\r\n  localCategory: any[] = this.vhQueryCafe.getlocalCategorys().filter(item => item.type == VhType.SERVICE);\r\n  nameFile: string = '';\r\n  url: any = '/assets/documents/list-service/' + this.languageService.translate('Service list') + '.xlsx';\r\n  urlByTime: any = '/assets/documents/list-service/' + this.languageService.translate('Service list by time') + '.xlsx';\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n  /** Validator cho trường giá tiền */\r\n  PRICE_VALIDATOR = [\r\n    Validators.required,\r\n    Validators.pattern('(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'),\r\n  ];\r\n  /** File excel import vào có phải là dữ liệu của Dịch vụ thời gian hay không */\r\n  file_import_is_servicetime: boolean = false;\r\n  /** Danh sách loại khoảng thời gian */\r\n  time_unit_list: any = [\r\n    { _id: 'day', name: 'Day' },\r\n    { _id: 'hour', name: 'Hour' },\r\n    { _id: 'minute', name: 'Minute' },\r\n    // { _id: 'second', name: 'Second' },\r\n  ];\r\n\r\n\r\n\r\n  constructor(\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService,\r\n    private platform: Platform,\r\n    private vhQuery: VhQuery\r\n  ) { }\r\n  \r\n\r\n\r\n  validation_messages = {\r\n    name: [{ type: \"required\", message: this.languageService.translate('Name is required') }],\r\n    status_barcode: [{ message: this.languageService.translate('Invalid barcode') }],\r\n    category: [{ type: 'required', message: this.languageService.translate('Category is required') }],\r\n    status_name: [{ message: this.languageService.translate('Invalid name') }],\r\n    price: [{ type: 'required', message: this.languageService.translate('Price is required') }, { type: 'pattern', message: this.languageService.translate('Invalid price') }],\r\n    \r\n    time_block: [{ type: 'required', message: this.languageService.translate('Time block is required') }, { type: 'min', message: this.languageService.translate('Time block must be greater than 0') }],\r\n    merge_block_price: [{ type: 'required', message: this.languageService.translate('Price is required') }, { type: 'pattern', message: this.languageService.translate('Invalid price') }],\r\n    merge_block_number: [{ type: 'required', message: this.languageService.translate('Quantity is required') }, { type: 'min', message: this.languageService.translate('Quantity must be greater than 0') }],\r\n    first_time_price: [{ type: 'required', message: this.languageService.translate('Price is required') }, { type: 'pattern', message: this.languageService.translate('Invalid price') }],\r\n    first_time_time_block: [{ type: 'required', message: this.languageService.translate('Time block is required') }, { type: 'min', message: this.languageService.translate('Time block must be greater than 0') }],\r\n    special_times: [{ type: 'required', message: this.languageService.translate('Special times is required') }, { type: 'invalidFormat', message: this.languageService.translate('Invalid special times format') }],\r\n  };\r\n\r\n\r\n\r\n  initForm(data, index) {\r\n    const form = new FormGroup({\r\n      id: new FormControl(index),\r\n      name: new FormControl(data[this.languageService.translate('_name_service')], [Validators.required]),\r\n      status_name: new FormControl(false), // trạng thái barcode true: trùng / false: oke\r\n      category: new FormControl(data[this.languageService.translate('_category')], [Validators.required]),\r\n      unit: new FormControl(this.getUnitMapping(data[this.languageService.translate('_unit')] ?? data[this.languageService.translate('_unit_regular')]), [Validators.required]),\r\n      price: new FormControl(data[this.languageService.translate('_price')] ?? data[this.languageService.translate('_price_regular')] ?? 0, this.PRICE_VALIDATOR),\r\n      barcode: new FormControl(data[this.languageService.translate('_barcode')]),\r\n      status_barcode: new FormControl(false), // trạng thái barcode true: trùng / false: oke\r\n      \r\n      time_block: new FormControl(data[this.languageService.translate('_time_block_regular')] ?? 1, [Validators.required, Validators.min(1)]),\r\n\r\n      is_merge_block: new FormControl(data[this.languageService.translate('_merge_block_quantity')] !== undefined, [Validators.required]),\r\n      is_first_time: new FormControl(data[this.languageService.translate('_time_block_first_time')] !== undefined, [Validators.required]),\r\n      is_special_times: new FormControl(data[this.languageService.translate('_special_times')]?.length > 0, [Validators.required]),\r\n    });\r\n\r\n    // merge_block\r\n    form.addControl('merge_block', \r\n      new FormGroup({\r\n        price: new FormControl(data[this.languageService.translate('_price_merge_block')] ?? 0, this.PRICE_VALIDATOR),\r\n        number: new FormControl(data[this.languageService.translate('_merge_block_quantity')] ?? 1, [Validators.required, Validators.min(1)]),\r\n      })\r\n    )\r\n\r\n    // first_time\r\n    form.addControl('first_time', \r\n      new FormGroup({\r\n        price: new FormControl(data[this.languageService.translate('_price_first_time')] ?? 0, this.PRICE_VALIDATOR),\r\n        time_block: new FormControl(data[this.languageService.translate('_time_block_first_time')] ?? 1, [Validators.required, Validators.min(1)]),\r\n        unit: new FormControl(this.getUnitMapping(data[this.languageService.translate('_unit_first_time')] ?? data[this.languageService.translate('_unit_regular')]), [Validators.required]),\r\n      })\r\n    )\r\n\r\n    // special_times\r\n    form.addControl('special_times', new FormControl(data[this.languageService.translate(\"_special_times\")] ?? '', [this.specialTimesValidator()]));\r\n\r\n    return form;\r\n  }\r\n\r\n\r\n\r\n  checkModelChange() {\r\n    this.formData.forEach((form, index) => {\r\n      let status: any = this.checkNameAndBarcode(form['value']['name'], form['value']['barcode'], form['value']['id']);\r\n      form.controls['status_name'].setValue(status[0] ? true : status[2]);\r\n      form.controls['status_barcode'].setValue(status[1] ? true : status[3]);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**Check name và barcode và lấy id_product*/\r\n  checkNameAndBarcode(name, barcode, id_form?: any) {\r\n    let checkDBName: any = name != null ? this.localProduct.find(item => item.name.trim() == name.toString().trim()) : null;\r\n    let checkDBBarcode: any = barcode != null ? this.localProduct.find(item => item.barcode == barcode.toString().trim()) : null;\r\n    //-----CHECK DỌC-----//\r\n    let checkName: any = name != null ? ((this.formData.filter(item => item['value'].name.trim() == name.trim() && item['value']['id'] != id_form).length == 0) ? false : true) : null;\r\n    let checkBarcode: any = barcode != null ? ((this.formData.filter(item => item['value'].barcode == barcode && item['value']['id'] != id_form).length == 0 || barcode.length == 0) ? false : true) : null;\r\n    return [checkDBName ? checkDBName['_id'] : null, checkDBBarcode ? checkDBBarcode['_id'] : null, checkName, checkBarcode];\r\n  }\r\n\r\n\r\n\r\n  /**Chọn file */\r\n  openFile() {\r\n    document.getElementById(\"file_excel_product\")['value'] = '';\r\n    document.getElementById(\"file_excel_product\").click();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Mở File (Nhập tệp)\r\n   */\r\n  openXLSXFile(events) {\r\n    if (events.target.files[0]) {\r\n      this.file_import_is_servicetime = false; // mặc định là false\r\n\r\n      // lưu tên file\r\n      this.nameFile = events.target.files[0]['name'].slice(0, events.target.files[0]['name'].lastIndexOf(\".\"));\r\n\r\n      this.vhAlgorithm.importXLSX(events.target.files[0]).then((data: any) => {\r\n        console.log(data)\r\n        // Nếu quá 200\r\n        if (data.length > 200) {\r\n          this.vhComponent.alertMessage(\"\", this.languageService.translate(\"Only 200 products can be imported at a time\"), \"\", \"OK\").then(() => {\r\n            this.formData = [];\r\n          });\r\n        } \r\n        // <= 200\r\n        else {\r\n          this.formData = [];\r\n          if (data.length) {\r\n            this.vhComponent.showLoading(\"\").then(() => {\r\n              // Kiểm tra có phải là dịch vụ theo thời gian hay không, dựa trên trường \"time_block\" của data[0]\r\n              if(data[0][this.languageService.translate('_time_block_regular')] !== undefined) {\r\n                this.file_import_is_servicetime = true;\r\n              }\r\n              data.forEach((item, index) => {\r\n                this.formData.push(this.initForm(item, index));\r\n                // Nếu là dòng cuối\r\n                if (index == data.length - 1) {\r\n                  this.vhComponent.hideLoading(0);\r\n                  this.checkModelChange();\r\n                }\r\n              });\r\n            });\r\n          }\r\n        }\r\n      }).catch(err => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.formData = [];\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), this.languageService.translate(\"Fail file format\"), this.languageService.translate(\"Cancel\"));\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Xuất ra file CSV hoặc tải về file mẫu */\r\n  status: boolean = false;\r\n  exportXLSXFile() {\r\n    if (this.formData.length) {\r\n      let XLSXData: any[] = [];\r\n      if(!this.file_import_is_servicetime) {\r\n        this.formData.forEach((item, index) => {\r\n          let row: Object = new Object;\r\n          row[this.languageService.translate(\"_name_service\")] = item['value']['name'];\r\n          row[this.languageService.translate(\"_category\")] = item['value']['category'];\r\n          row[this.languageService.translate(\"_unit\")] = item['value']['unit'];\r\n          row[this.languageService.translate(\"_price\")] = item['value']['price'];\r\n          row[this.languageService.translate(\"_barcode\")] = item['value']['barcode'];\r\n          XLSXData.push(row);\r\n          if (index == this.formData.length - 1) {\r\n            this.vhAlgorithm.exportXLSX(XLSXData, this.nameFile).then(() => this.status = true).catch(err => this.status = true);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.formData.forEach((item, index) => {\r\n          let row: any = {};\r\n          // Tên dịch vụ\r\n          row[this.languageService.translate('_name_service')] = item['value']['name'];\r\n          // Danh mục\r\n          row[this.languageService.translate('_category')] = item['value']['category'];\r\n          // Barcode\r\n          row[this.languageService.translate('_barcode')] = item['value']['barcode'];\r\n          // Giá bán (Giờ bán thường)\r\n          row[this.languageService.translate('_price_regular')] = item['value']?.['price'];\r\n          // Khoảng thời gian (Giờ bán thường)\r\n          row[this.languageService.translate('_time_block_regular')] = item['value']?.['time_block'];\r\n          // Đơn vị (Giờ bán thường)\r\n          row[this.languageService.translate('_unit_regular')] = this.languageService.translate(item['value']?.['unit']);\r\n\r\n          if(item['value']?.['is_merge_block']) {\r\n            // Giá bán (Gộp block)\r\n            row[this.languageService.translate('_price_merge_block')] = item['value']?.['merge_block']?.price;\r\n            // Số lượng block gộp (Gộp block)\r\n            row[this.languageService.translate('_merge_block_quantity')] = item['value']?.['merge_block']?.number;\r\n          }\r\n\r\n          if(item['value']?.['is_first_time']) {\r\n            // Giá bán (Giờ đầu tiên)\r\n            row[this.languageService.translate('_price_first_time')] = item['value']?.['first_time']?.price;\r\n            // Khoảng thời gian (Giờ đầu tiên)\r\n            row[this.languageService.translate('_time_block_first_time')] = item['value']?.['first_time']?.time_block;\r\n            // Đơn vị (Giờ đầu tiên)\r\n            row[this.languageService.translate('_unit_first_time')] = this.languageService.translate(item['value']?.['first_time']?.unit);\r\n          }\r\n\r\n          if(item['value']?.['is_special_times']) {\r\n            // Giờ đặc biệt\r\n            row[this.languageService.translate('_special_times')] = item['value']?.['special_times'];\r\n          }\r\n\r\n          XLSXData.push(row);\r\n      \r\n          // Export file nếu là dòng cuối (sau khi thêm tất cả các dòng)\r\n          if (index === this.formData.length - 1) {\r\n            this.vhAlgorithm.exportXLSX(XLSXData, this.nameFile).then(() => this.status = true).catch(err => this.status = true);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Tải file mẫu Dịch vụ theo công\r\n   */\r\n  downloadSampleFileServiceByWork() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Service-list.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Danh-sach-dich-vu.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-cafe-language\");\r\n      if(appLang == 'vi') window.open(urlVI,'_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn,'_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n    }\r\n    else {\r\n      document.getElementById(\"download_product\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Tải file mẫu Dịch vụ theo thời gian\r\n   */\r\n  downloadSampleFileServiceByTime() {\r\n    if (this.platform.is(\"electron\")){\r\n      let urlEn = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Service-list-by-time.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Danh-sach-dich-vu-theo-thoi-gian.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-cafe-language\");\r\n      if(appLang == 'vi') window.open(urlVI,'_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn,'_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n    }\r\n    else {\r\n      document.getElementById(\"download_product_by_time\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkForm(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (\r\n        this.formData[i]['value'].status_barcode == true \r\n        || this.formData[i]['value'].status_name == true\r\n        || this.formData[i]['controls']['name'].invalid\r\n        || this.formData[i]['controls']['category'].invalid\r\n        || this.formData[i]['controls']['unit'].invalid\r\n        || this.formData[i]['controls']['price'].invalid\r\n        || (\r\n          this.formData[i].invalid && (\r\n            (this.formData[i]['value'].is_first_time && this.formData[i].controls['first_time'].invalid)\r\n            || (this.formData[i]['value'].is_merge_block && this.formData[i].controls['merge_block'].invalid)\r\n            || (this.formData[i]['value'].is_special_times && this.formData[i].controls['special_times'].invalid)\r\n          )\r\n        )\r\n      ) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, this.languageService.translate(\"Cancel\"))\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  createdError: string = \"\";\r\n  createData() {\r\n    if (this.checkForm()) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Create service data\"), \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(res => {\r\n          this.createCategoriesAndProduct();\r\n        }, () => { });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Tạo dữ liệu danh mục và sản phẩm */\r\n  createCategoriesAndProduct() {\r\n    this.vhComponent.showLoading(\"\", \"current-loading\").then(async () => {\r\n      // lấy dữ liệu tên category\r\n      const dataCategory: any[] = [...new Set(this.formData.map(item => item['value']['category']))]\r\n      // tìm ra dữ liệu category chưa được tạo database\r\n      let createdCategory: any[] = [] // danh sách danh mục được tạo\r\n      dataCategory.forEach((item, index) => {\r\n        if (item && !this.localCategory.some(cate => this.vhAlgorithm.changeAlias(cate.name.trim()).toLowerCase() == this.vhAlgorithm.changeAlias(item.trim()).toLowerCase()))\r\n          createdCategory.push({ name: item, type: 2 })\r\n      })\r\n\r\n      try {\r\n        const categories: any = await this.vhQueryCafe.addCategorys(createdCategory);\r\n\r\n        if (categories) {\r\n          this.localCategory = [...this.localCategory.concat([...categories])]\r\n        }\r\n        else {\r\n          throw Error(\"Categories have been created failed\");\r\n        }\r\n\r\n        // tạo sản phẩm\r\n        const dataProduct: any[] = this.formData.map(form => {\r\n          const category: any = this.localCategory.find(cate => this.vhAlgorithm.changeAlias(cate['name'].trim()).toLowerCase() == this.vhAlgorithm.changeAlias(form['value']['category'].trim()).toLowerCase())\r\n          \r\n          let service: any = {\r\n            name: form['value']['name'].trim(),\r\n            time_warning : 0,\r\n            img: '',\r\n            id_category: category?._id,\r\n            tax: 0,\r\n            // allow_sell: true,\r\n            delete_hidden: false,\r\n            type: this.file_import_is_servicetime ? VhType.SERVICETIME : VhType.SERVICE,\r\n            units : [{\r\n              unit: form['value']['unit'] ? form['value']['unit'].trim() : '',\r\n              price: parseFloat(form['value']['price']),\r\n              price2 : 0,\r\n              barcode: form['value']['barcode'] ? form['value']['barcode'] : '',\r\n              ratio : 1,\r\n              default : true,\r\n            }],\r\n          }\r\n\r\n          if (this.file_import_is_servicetime) {\r\n            // set lại units[0] dạng time\r\n            service.units[0].price = parseFloat(form['value']['price']);\r\n            service.units[0].price2 = 0;\r\n            service.units[0].time_block = form['value']['time_block'];\r\n      \r\n            // các trường is_merge_block, is_first_time, is_special_times\r\n            service.units[0].is_merge_block = form['value']['is_merge_block'];\r\n            service.units[0].is_first_time = form['value']['is_first_time'];\r\n            service.units[0].is_special_times = form['value']['is_special_times'];\r\n      \r\n            // merge_block\r\n            if(service.units[0].is_merge_block) {\r\n              service.units[0].merge_block = {\r\n                price: parseFloat(form['value']['merge_block']['price']),\r\n                price2: 0,\r\n                number: form['value']['merge_block']['number'],\r\n              };\r\n            }\r\n            // first_time\r\n            if (service.units[0].is_first_time) {\r\n              service.units[0].first_time = {\r\n                price: parseFloat(form['value']['first_time']['price']),\r\n                price2: 0,\r\n                unit: form['value']['first_time']['unit'],\r\n                time_block: form['value']['first_time']['time_block'],\r\n              };\r\n            }\r\n            // special_times\r\n            if (service.units[0].is_special_times) {\r\n              service.units[0].special_times = [];\r\n              let special_times = form['value']['special_times'].split(';').filter((entry) => entry.trim() !== '');\r\n              for (let i = 0; i < special_times.length; i++) {\r\n                let special_time = special_times[i].split(',').map((part) => part.trim());\r\n                if (special_time.length == 4) {\r\n                  const [time_slot_name, price, specific_time, days_of_week] = special_time;\r\n                  service.units[0].special_times.push({\r\n                    time_slot_name: time_slot_name,\r\n                    price: parseFloat(price),\r\n                    price2: 0,\r\n                    specific_time: specific_time,\r\n                    days_of_week: days_of_week.split('-').map((day) => this.daysOfWeekMapping[this.vhAlgorithm.changeAlias(day.toLocaleLowerCase())]),\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          return service;\r\n        })\r\n\r\n        // Mỗi lần add 5 cái, xong mới add tiếp 5 cái kế\r\n        const batchSize = 5;\r\n        let addedProducts = [];\r\n        for (let i = 0; i < dataProduct.length; i += batchSize) {\r\n          // lấy 5 cái\r\n          const batch = dataProduct.slice(i, i + batchSize);\r\n          try {\r\n            const promises = batch.map(async (product) => {\r\n              return await this.vhQueryCafe.addProducts([product]);\r\n            });\r\n            // add\r\n            const results = await this.vhQuery.asyncPromiseAll(promises);\r\n            // sau khi add xong\r\n            console.log(`Batch ${Math.floor(i / batchSize) + 1} added successfully`);\r\n            results.forEach((products, index) => {\r\n              if (products) {\r\n                addedProducts.push(...products); // Thêm các sản phẩm đã thêm vào mảng addedProducts\r\n              } else {\r\n                throw Error(\"Services have been created failed\");\r\n              }\r\n            });\r\n          } catch (error) {\r\n            console.error(`Error in batch ${Math.floor(i / batchSize) + 1}:`, error);\r\n          }\r\n        }\r\n        // add xong\r\n        this.vhComponent.hideLoading(0);\r\n        this.showLog([...dataProduct], [...addedProducts])\r\n\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\");\r\n      }\r\n\r\n      this.vhComponent.hideLoading(0);\r\n    })\r\n  }\r\n\r\n\r\n\r\n  showLog(data: any[], dataSuccess: any[]) {\r\n    this.createdError = \"\";\r\n    if (data.length != dataSuccess.length) {\r\n      for (let product of data) {\r\n        if (!dataSuccess.some(item => item.phone == product.phone))\r\n          this.createdError += `<span> - ${product.name}(${product.phone})</span><br/>`;\r\n      }\r\n\r\n      this.nzModalService.error({\r\n        nzTitle: this.languageService.translate(\"Services have been created failed\"),\r\n        nzContent: this.createdError\r\n      });\r\n\r\n      this.formData = [];\r\n\r\n    } else {\r\n      this.vhComponent.showToast(1500, `${this.languageService.translate(\"Services\")} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n      this.goBack();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list'], { state: { stateObj: this.dataRestore } });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chuyển đổi tên đơn vị từ tiếng Việt / tiếng Anh sang định dạng để lưu vào database\r\n   */\r\n  daysOfWeekMapping: { [key: string]: string } = {\r\n    'thu 2': 'monday',\r\n    'thu 3': 'tuesday',\r\n    'thu 4': 'wednesday',\r\n    'thu 5': 'thursday',\r\n    'thu 6': 'friday',\r\n    'thu 7': 'saturday',\r\n    'chu nhat': 'sunday',\r\n    'monday': 'monday',\r\n    'tuesday': 'tuesday',\r\n    'wednesday': 'wednesday',\r\n    'thursday': 'thursday',\r\n    'friday': 'friday',\r\n    'saturday': 'saturday',\r\n    'sunday': 'sunday',\r\n  };\r\n\r\n  /** Chuyển đổi tên đơn vị từ tiếng Việt / tiếng Anh sang định dạng để lưu vào database */\r\n  unitMapping: { [key: string]: string } = {\r\n    'ngay': 'day',\r\n    'gio': 'hour',\r\n    'phut': 'minute',\r\n    'giay': 'second',\r\n    'day': 'day',\r\n    'hour': 'hour',\r\n    'minute': 'minute',\r\n    'second': 'second',\r\n  };\r\n\r\n\r\n\r\n  /**\r\n   * Lấy tên đơn vị từ tiếng Việt / tiếng Anh sang dđịnh dạng lưu vô database.\r\n   * \r\n   * Sẽ gọi changeAlias() và toLocaleLowerCase() để chuyển đổi tên đơn vị sang định dạng chuẩn.\r\n   * \r\n   * Giá trị mặc định là 'hour' nếu không tìm thấy tên đơn vị trong danh sách chuyển đổi.\r\n   * \r\n   * @returns {string} Tên đơn vị đã chuyển đổi. Nếu không tìm thấy tên đơn vị trong danh sách chuyển đổi, trả về 'hour'.\r\n   * @example\r\n   * getUnitMapping('ngày') // trả về 'day'\r\n   * getUnitMapping('   Hour ') // trả về 'hour'\r\n   */\r\n  getUnitMapping(value) {\r\n    return !this.file_import_is_servicetime \r\n              ? value \r\n              : (this.unitMapping[this.vhAlgorithm.changeAlias(value ?? 'hour')?.toLocaleLowerCase()]);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Validate special times format theo định dạng: time_slot_name, price, specific_time.from_minute-specific_time.to_minute, days_of_week.\r\n   * \r\n   * Ngày thường, 80000, 0-1440, thứ 2-thứ 3-thứ 4-thứ 5;\r\n   * \r\n   * - Phải có 4 phần tử cách nhau bởi dấu phẩy (,)\r\n   * - Tên không được để trống\r\n   * - Giá không được để trống\r\n   * - Thời gian phải nằm trong khoảng từ 0 đến 1440 phút\r\n   * - Thời gian bắt đầu phải nhỏ hơn thời gian kết thúc\r\n   * - Ngày phải được phân cách bởi dấu gạch ngang (-)\r\n   * - Ngày không được để trống\r\n   * - Ngày phải nằm trong danh sách các ngày trong tuần (monday, tuesday, wednesday, thursday, friday, saturday, sunday)\r\n   * \r\n   * @returns {ValidatorFn} Hàm validator\r\n   * @example\r\n   * day_of_week: new FormControl('', [this.specialTimesValidator()])\r\n   */\r\n  specialTimesValidator(): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const value = control.value;\r\n\r\n      // Để trống\r\n      if (!value || typeof value !== 'string') {\r\n        return { invalidFormat: 'Value is required' };\r\n      }\r\n\r\n      const specialTimeRanges: any[] = []; // Chứa danh sách object special time để check overlap\r\n      const entries = value.split(';').filter((entry) => entry.trim() !== '');\r\n      for (const entry of entries) {\r\n        // 4 phần tử cách nhau bởi dấu ,\r\n        const parts = entry.split(',').map((part) => part.trim());\r\n        if (parts.length !== 4) {\r\n          return { invalidFormat: 'Each entry must have 4 parts separated by commas. Example: Normal day, 80000, 0-1440, monday-tuesday-wednesday;' };\r\n        }\r\n\r\n        const [time_slot_name, price, specific_time, days_of_week] = parts;\r\n\r\n        // Tên để trống\r\n        if (!time_slot_name) {\r\n          return { invalidFormat: 'Name is required' };\r\n        }\r\n\r\n        // Giá để trống\r\n        if (isNaN(parseFloat(price)) || parseFloat(price) <= 0) {\r\n          return { invalidFormat: 'Price is required' };\r\n        }\r\n\r\n        // Thời gian phải nằm trong khoảng từ 0 đến 1440 phút, Thời gian bắt đầu phải nhỏ hơn thời gian kết thúc\r\n        const timeParts = specific_time.split('-').map((time) => parseInt(time.trim(), 10));\r\n        if (\r\n          timeParts.length !== 2 ||\r\n          isNaN(timeParts[0]) ||\r\n          isNaN(timeParts[1]) ||\r\n          timeParts[0] < 0 ||\r\n          timeParts[1] > 1440 ||\r\n          timeParts[0] >= timeParts[1]\r\n        ) {\r\n          return { invalidFormat: 'Invalid time range. Must be between 0 and 1440 minutes, and from_minute must be less than to_minute.' };\r\n        }\r\n\r\n        // Phải có ít nhất 1 ngày được chọn\r\n        const days = days_of_week.split('-').map((day) => day.trim());\r\n        if (days.length === 0) {\r\n          return { invalidFormat: 'At least one day must be selected' };\r\n        }\r\n        \r\n        // Ngày phải nằm trong danh sách các ngày trong tuần\r\n        if(!days.every((day) => this.daysOfWeekMapping[this.vhAlgorithm.changeAlias(day.toLocaleLowerCase())])) {\r\n          return { invalidFormat: 'Invalid days of week. Must be one or more of: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday.' };\r\n        }\r\n\r\n        // Add vô để lát nữa kiểm tra overlap\r\n        specialTimeRanges.push({\r\n          days_of_week: days,\r\n          from_minute: timeParts[0],\r\n          to_minute: timeParts[1],\r\n        });\r\n      }\r\n\r\n      // Check overlapp thời gian\r\n      for (let i = 0; i < specialTimeRanges.length; i++) {\r\n        const currentEntry = specialTimeRanges[i];\r\n        for (let j = 0; j < specialTimeRanges.length; j++) {\r\n          if (i === j) continue; // Bỏ qua nếu là chính nó\r\n          const otherEntry = specialTimeRanges[j];\r\n          if (\r\n            currentEntry.days_of_week.some((day) => otherEntry.days_of_week.includes(day)) && // Overlapping ngày\r\n            ((currentEntry.from_minute >= otherEntry.from_minute && currentEntry.from_minute < otherEntry.to_minute) || // Overlapping thờI gian bắt đầu\r\n              (currentEntry.to_minute > otherEntry.from_minute && currentEntry.to_minute <= otherEntry.to_minute)) // Overlapping thời gian kết thúc\r\n          ) {\r\n            return { invalidFormat: 'There is a time period overlapping with an existing time block' };\r\n          }\r\n        }\r\n      }\r\n\r\n      return null; // Valid\r\n    };\r\n  }\r\n\r\n}","<!-- ---------------------------------------------------------- Nút quay lại ----------------------------------------------------------- -->\r\n<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n\r\n<nz-layout>\r\n  <!-- ------------------------------------------------------------- Header -------------------------------------------------------------- -->\r\n  <div nz-row style=\"padding-bottom: 16px; z-index: 99;\">\r\n    <!-- Tiêu đề -->\r\n    <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n      <b>{{'Create service data' | translate}}</b>\r\n    </div>\r\n    <!-- Danh sách nút -->\r\n    <div nz-col nzSpan=\"16\" class=\"right-all-content\">\r\n      <!-- Tải tệp mẫu -->\r\n      <div>\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Download sample file' | translate}}</button>\r\n        <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n          <ul nz-menu>\r\n            <li nz-menu-item (click)=\"downloadSampleFileServiceByWork()\">{{'Service CHARGE BY WORK' | translate}}</li>\r\n            <li nz-menu-item (click)=\"downloadSampleFileServiceByTime()\">{{'Service CHARGE BY TIME' | translate}}</li>\r\n          </ul>\r\n        </nz-dropdown-menu>\r\n      </div>\r\n      <!-- Xuất tệp -->\r\n      <div>\r\n        <button (click)=\"exportXLSXFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export file' | translate}}</button>\r\n      </div>\r\n      <!-- Nhập tệp -->\r\n      <div>\r\n        <button (click)=\"openFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"upload\" nzTheme=\"outline\"></i>\r\n          {{'Import file' | translate}}</button>\r\n      </div>\r\n      <!-- Tạo dữ liệu -->\r\n      <div>\r\n        <button (click)=\"createData()\" [disabled]=\"!formData.length\" class=\"btn-add center-all-content\" nz-button\r\n          nzType=\"default\">\r\n          <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n          {{'Create data' | translate}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- -------------------------------------------------------------- Table -------------------------------------------------------------- -->\r\n  <div nz-row class='table'>\r\n    <table>\r\n      <!-- Table header -->\r\n      <thead [style.width.%]=\"file_import_is_servicetime ? '150' : '100'\">\r\n        <tr [style.font-size.rem]=\"file_import_is_servicetime ? '0.75' : '0.9'\">\r\n          <th style=\"max-width: 5% !important; width: 3%;\">#</th>\r\n          <th style=\"max-width: 25% !important; width: 12%;\">{{'_name_service' | translate}}</th>\r\n          <th style=\"max-width: 15% !important; width: 8%;\">{{'_category' | translate}}</th>\r\n        \r\n          <!-- Dịch vụ công -->\r\n          <ng-container *ngIf=\"!file_import_is_servicetime\">\r\n            <th style=\"max-width: 15% !important; width: 15%;\">{{'_unit' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 20%\">{{'_price' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 20%;\">{{'_barcode' | translate}}</th>\r\n          </ng-container>\r\n          \r\n          <!-- Dịch vụ theo thời gian -->\r\n          <ng-container *ngIf=\"file_import_is_servicetime\">\r\n            <th style=\"max-width: 20% !important; width: 8%;\">{{'_barcode' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 6%;\">{{'_price_regular' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 4%;\">{{'_time_block_regular' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 6%;\">{{'_unit_regular' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 3%;\">{{'_is_merge_block' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 6%;\">{{'_price_merge_block' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 4%;\">{{'_merge_block_quantity' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 3%;\">{{'_is_first_time' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 6%;\">{{'_price_first_time' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 4%;\">{{'_time_block_first_time' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 6%;\">{{'_unit_first_time' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 3%;\">{{'_is_special_times' | translate}}</th>\r\n            <th style=\"max-width: 20% !important; width: 16%;\">{{'_special_times' | translate}}</th>\r\n          </ng-container>\r\n        \r\n        </tr>\r\n      </thead>\r\n\r\n      <!-- Table body -->\r\n      <tbody [style.width.%]=\"file_import_is_servicetime ? '150' : '100'\">\r\n        <tr *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n          <!-- # -->\r\n          <td style=\"max-width: 5% !important; width: 3%;\">{{i + 1}}</td>\r\n          \r\n          <!-- Tên dịch vụ -->\r\n          <td style=\"max-width: 25% !important; width: 12%;\">\r\n            <input type=\"text\" formControlName=\"name\" (change)=\"checkModelChange()\"\r\n              [placeholder]=\"'_name_service' | translate\" />\r\n            <ng-container *ngFor=\"let validation of validation_messages.status_name\">\r\n              <div class=\"error-message error-font\" *ngIf=\"form.value['status_name'] == true\">\r\n                <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n              </div>\r\n            </ng-container>\r\n            <ng-container *ngFor=\"let validation of validation_messages.name\">\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('name').hasError(validation.type)\">\r\n                <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n\r\n          <!-- Danh mục -->\r\n          <td style=\"max-width: 15% !important; width: 8%;\">\r\n            <input type=\"text\" formControlName=\"category\" [placeholder]=\"'_category' | translate\" />\r\n            <ng-container *ngFor=\"let validation of validation_messages.category\">\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('category').hasError(validation.type)\">\r\n                <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n\r\n          <!-- ---------------------------------------------------------- DỊCH VỤ CÔNG ----------------------------------------------------------- -->\r\n          <ng-container *ngIf=\"!file_import_is_servicetime\">\r\n\r\n            <!-- Đơn vị -->\r\n            <td style=\"max-width: 15% !important; width: 15%;\">\r\n              <input type=\"text\" formControlName=\"unit\" [placeholder]=\"'_unit' | translate\" />\r\n            </td>\r\n\r\n            <!-- Giá -->\r\n            <td style=\"max-width: 20% !important; width: 20%; font-weight: 700;\">\r\n              <input style=\"text-align: end;\" type=\"text\" formControlName=\"price\"\r\n                [placeholder]=\"'_price' | translate\" />\r\n              <ng-container *ngFor=\"let validation of validation_messages.price\">\r\n                <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError(validation.type)\">\r\n                  <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n  \r\n            <!-- Barcode -->\r\n            <td style=\"max-width: 20% !important; width: 20%;\">\r\n              <input type=\"text\" formControlName=\"barcode\" (change)=\"checkModelChange()\"\r\n                [placeholder]=\" '_barcode' | translate\" />\r\n              <ng-container *ngFor=\"let validation of validation_messages.status_barcode\">\r\n                <div class=\"error-message error-font\" *ngIf=\"form.value['status_barcode'] == true\">\r\n                  <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n          </ng-container>\r\n\r\n          <!-- -------------------------------------------------------- DỊCH VỤ THỜI GIAN -------------------------------------------------------- -->\r\n          <ng-container *ngIf=\"file_import_is_servicetime\">\r\n            \r\n            <!-- Barcode -->\r\n            <td style=\"max-width: 8% !important; width: 8%;\">\r\n              <input type=\"text\" \r\n                formControlName=\"barcode\" \r\n                (change)=\"checkModelChange()\"\r\n                [placeholder]=\" '_barcode' | translate\" />\r\n              <ng-container *ngFor=\"let validation of validation_messages.status_barcode\">\r\n                <div class=\"error-message error-font\" *ngIf=\"form.value['status_barcode'] == true\">\r\n                  <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <!-- Giá bán (Giờ bán thường) -->\r\n            <td style=\"max-width: 6% !important; width: 6%; font-weight: 700;\">\r\n              <input style=\"text-align: end;\" type=\"number\" \r\n                formControlName=\"price\"\r\n                (change)=\"checkModelChange()\"\r\n                [placeholder]=\"'_price_regular' | translate\" />\r\n              <ng-container *ngFor=\"let validation of validation_messages.price\">\r\n                <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError(validation.type)\">\r\n                  <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <!-- Khoảng thời gian (Giờ bán thường) -->\r\n            <td style=\"max-width: 4% !important; width: 4%;\">\r\n              <input style=\"text-align: end;\" type=\"text\" \r\n                formControlName=\"time_block\"\r\n                (change)=\"checkModelChange()\"\r\n                [placeholder]=\"'_time_block_regular' | translate\" />\r\n              <ng-container *ngFor=\"let validation of validation_messages.time_block\">\r\n                <div class=\"error-message error-font\" *ngIf=\"form.get('time_block').hasError(validation.type)\">\r\n                  <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <!-- Đơn vị (Giờ bán thường) -->\r\n            <td style=\"max-width: 6% !important; width: 6%;\">\r\n              <select formControlName=\"unit\" (change)=\"checkModelChange()\">\r\n                <option *ngFor=\"let u of time_unit_list\" [value]=\"u._id\">{{u.name | translate | titlecase}}</option>\r\n              </select>\r\n            </td>\r\n\r\n            <!-- ------------------------------------------------------------ Gộp block ------------------------------------------------------------ -->\r\n            <!-- Sử dụng gộp block -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">\r\n              <input type=\"checkbox\" formControlName=\"is_merge_block\" (change)=\"checkModelChange()\" />\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!form.get('is_merge_block').value\">\r\n              <td style=\"max-width: 6% !important; width: 6%\"></td>\r\n              <td style=\"max-width: 4% !important; width: 4%\"></td>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"form.get('is_merge_block').value\">\r\n              <ng-container formGroupName=\"merge_block\">\r\n                <!-- Giá bán (Gộp block) -->\r\n                <td style=\"max-width: 6% !important; width: 6%; font-weight: 700;\">\r\n                  <input style=\"text-align: end;\" type=\"number\" \r\n                    formControlName=\"price\"\r\n                    (change)=\"checkModelChange()\"\r\n                    [placeholder]=\"'_price_regular' | translate\" />\r\n                  <ng-container *ngFor=\"let validation of validation_messages.merge_block_price\">\r\n                    <div class=\"error-message error-font\" *ngIf=\"form.get('merge_block.price').hasError(validation.type)\">\r\n                      <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </td>\r\n                <!-- Số lượng block gộp (Gộp block) -->\r\n                <td style=\"max-width: 4% !important; width: 4%;\">\r\n                  <input style=\"text-align: end;\" type=\"text\" \r\n                    formControlName=\"number\"\r\n                    (change)=\"checkModelChange()\"\r\n                    [placeholder]=\"'_merge_block_quantity' | translate\" />\r\n                  <ng-container *ngFor=\"let validation of validation_messages.merge_block_number\">\r\n                    <div class=\"error-message error-font\" *ngIf=\"form.get('merge_block.number').hasError(validation.type)\">\r\n                      <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </td>\r\n              </ng-container>\r\n            </ng-container>\r\n\r\n            <!-- ---------------------------------------------------------- Giờ đầu tiên ----------------------------------------------------------- -->\r\n            <!-- Sử dụng giờ đầu tiên -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">\r\n              <input type=\"checkbox\" formControlName=\"is_first_time\" (change)=\"checkModelChange()\" />\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!form.get('is_first_time').value\">\r\n              <td style=\"max-width: 6% !important; width: 6%\"></td>\r\n              <td style=\"max-width: 4% !important; width: 4%\"></td>\r\n              <td style=\"max-width: 6% !important; width: 6%\"></td>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"form.get('is_first_time').value\">\r\n              <ng-container formGroupName=\"first_time\">\r\n                <!-- Giá bán (Giờ đầu tiên) -->\r\n                <td style=\"max-width: 6% !important; width: 6%; font-weight: 700;\">\r\n                  <input style=\"text-align: end;\" type=\"number\" \r\n                    formControlName=\"price\"\r\n                    (change)=\"checkModelChange()\"\r\n                    [placeholder]=\"'_price_first_time' | translate\" />\r\n                  <ng-container *ngFor=\"let validation of validation_messages.first_time_price\">\r\n                    <div class=\"error-message error-font\" *ngIf=\"form.get('first_time.price').hasError(validation.type)\">\r\n                      <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </td>\r\n                <!-- Khoảng thời gian (Giờ đầu tiên) -->\r\n                <td style=\"max-width: 4% !important; width: 4%;\">\r\n                  <input style=\"text-align: end;\" type=\"text\" \r\n                    formControlName=\"time_block\"\r\n                    (change)=\"checkModelChange()\"\r\n                    [placeholder]=\"'_time_block_first_time' | translate\" />\r\n                  <ng-container *ngFor=\"let validation of validation_messages.first_time_time_block\">\r\n                    <div class=\"error-message error-font\" *ngIf=\"form.get('first_time.time_block').hasError(validation.type)\">\r\n                      <ion-text color=\"vh-red\">{{ validation.message }}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </td>\r\n                <!-- Đơn vị (Giờ đầu tiên) -->\r\n                <td style=\"max-width: 6% !important; width: 6%;\">\r\n                  <select formControlName=\"unit\" (change)=\"checkModelChange()\">\r\n                    <option *ngFor=\"let u of time_unit_list\" [value]=\"u._id\">{{u.name | translate | titlecase}}</option>\r\n                  </select>\r\n                </td>\r\n              </ng-container>\r\n            </ng-container>\r\n\r\n            <!-- ---------------------------------------------------------- Giờ đặc biệt ----------------------------------------------------------- -->\r\n            <!-- Sử dụng giờ đặc biệt -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">\r\n              <input type=\"checkbox\" formControlName=\"is_special_times\" (change)=\"checkModelChange()\" />\r\n            </td>\r\n            \r\n            <ng-container *ngIf=\"!form.get('is_special_times').value\">\r\n              <td style=\"max-width: 16% !important; width: 16%\"></td>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"form.get('is_special_times').value\">\r\n              <!-- Giờ đặc biệt (Tên, Giá, Từ-Đến, Thứ); -->\r\n              <td style=\"max-width: 16% !important; width: 16%;\">\r\n                <textarea type=\"text\" style=\"width: 100%; border: none;\"\r\n                  formControlName=\"special_times\"\r\n                  (change)=\"checkModelChange()\"\r\n                  [placeholder]=\"'_special_times' | translate\"></textarea>\r\n                <div class=\"error-message error-font\" *ngIf=\"form.get('special_times').hasError('invalidFormat')\">\r\n                  <ion-text color=\"vh-red\">{{ form.get('special_times').errors['invalidFormat'] | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n            </ng-container>\r\n\r\n          </ng-container>\r\n\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</nz-layout>\r\n\r\n\r\n\r\n<!-- Link tải dữ liệu mẫu -->\r\n<a style=\"display: none;\" id=\"download_product\" [href]=\"url\" download></a>\r\n<a style=\"display: none;\" id=\"download_product_by_time\" [href]=\"urlByTime\" download></a>\r\n\r\n<input type=\"file\" style=\"display: none;\" id=\"file_excel_product\"\r\n  accept=\".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n  (change)=\"openXLSXFile($event)\" />","import { Component, ViewChild } from '@angular/core';\r\nimport { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { CleaveJsService } from 'src/app/cafe/services/cleave-js.service';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\n\r\n@Component({\r\n  selector: 'app-detail-service',\r\n  templateUrl: './detail-service.component.html',\r\n  styleUrls: ['./detail-service.component.scss']\r\n})\r\nexport class DetailServiceComponent {\r\n  data: any = [];\r\n  productServiceForm: FormGroup;\r\n  barcode: boolean = true;\r\n  list_category: any = [];\r\n  price: any;\r\n  price2: any;\r\n  stateObj: any;\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n\r\n  /** Danh sách loại dịch vụ */\r\n  item_type_list: any = [\r\n    { _id: VhType.SERVICE, name: 'Charge by work' },\r\n    { _id: VhType.SERVICETIME, name: 'Charge by time' },\r\n  ];\r\n\r\n  /** Danh sách loại khoảng thời gian */\r\n  time_unit_list: any = [\r\n    { _id: 'day', name: 'Day' },\r\n    { _id: 'hour', name: 'Hour' },\r\n    { _id: 'minute', name: 'Minute' },\r\n    // { _id: 'second', name: 'Second' },\r\n  ];\r\n  \r\n  /** Có hiện modal chọn thời gian đặc biệt hay không */\r\n  isShowModalSpecialTime: boolean = false;\r\n  /** Ký hiệu tiền tệ. Ví dụ 'VND' */\r\n  currencySymbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text;\r\n  /** Dữ liệu thời gian đặc biệt để edit truyền vào modal */\r\n  dataSpecialTimeEdit: any = null;\r\n\r\n  /** Validator cho trường giá tiền */\r\n  PRICE_VALIDATOR = [\r\n    Validators.required,\r\n    Validators.pattern('(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'),\r\n  ];\r\n\r\n  public VhType = VhType;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private cleaveJsService: CleaveJsService,\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state.data;\r\n    this.stateObj = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n    // gán các giá trị của dv vào form\r\n    this.productServiceForm = new FormGroup({\r\n      img: new FormControl(this.data.img),\r\n      name: new FormControl(this.data.name, Validators.required),\r\n      barcode: new FormControl(this.data.units[0].barcode),\r\n      unit: new FormControl(this.data.units[0].unit, Validators.required),\r\n      price: new FormControl(this.data.units[0].price, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price2: new FormControl(this.data.units[0].price2 || 0, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      id_category: new FormControl(this.data.id_category, Validators.required),\r\n      allow_sell: new FormControl(this.data.delete_hidden ? false : true),\r\n      delete_hidden: new FormControl(this.data.delete_hidden),\r\n      selling: new FormControl(this.data.selling),\r\n      type: new FormControl(this.data.type),\r\n      time_warning: new FormControl(this.data.time_warning),\r\n    });\r\n\r\n    // Nếu là kiểu Thời gian\r\n    if(this.data.type === VhType.SERVICETIME) {\r\n      this.addTimeSpecificFields();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initData();\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.price = this.vhAlgorithm.vhnumeral(\".price\");\r\n      if (this.management_product_price2) this.price2 = this.vhAlgorithm.vhnumeral(\".price2\");\r\n    });\r\n  }\r\n\r\n\r\n\r\n  initData() {\r\n    // lấy danh mục\r\n    this.list_category = this.vhQueryCafe.getlocalCategorys().filter(res => res.type == 2);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thêm các trường liên quan đến Thời gian vào form\r\n   */\r\n  private addTimeSpecificFields() {\r\n    this.productServiceForm.addControl(\r\n      'time_block',\r\n      new FormControl(this.data.units[0].time_block ?? 1, Validators.compose([Validators.required, Validators.min(1)]))\r\n    );\r\n  \r\n    this.productServiceForm.addControl('is_merge_block', new FormControl(this.data.units[0].is_merge_block ?? false, Validators.required));\r\n    this.productServiceForm.addControl('is_first_time', new FormControl(this.data.units[0].is_first_time ?? false, Validators.required));\r\n    this.productServiceForm.addControl('is_special_times', new FormControl(this.data.units[0].is_special_times ?? false, Validators.required));\r\n\r\n    // merge_block\r\n    this.productServiceForm.addControl(\r\n      'merge_block',\r\n      new FormGroup({\r\n        price: new FormControl(\r\n          this.data.units[0].merge_block?.price ?? 0,\r\n          Validators.compose(this.PRICE_VALIDATOR)\r\n        ),\r\n        price2: new FormControl(\r\n          this.data.units[0].merge_block?.price2 ?? 0,\r\n          Validators.compose(this.PRICE_VALIDATOR)\r\n        ),\r\n        number: new FormControl(this.data.units[0].merge_block?.number ?? 1, Validators.compose([Validators.required, Validators.min(1)])),\r\n      })\r\n    );\r\n\r\n    // first_time\r\n    this.productServiceForm.addControl(\r\n      'first_time',\r\n      new FormGroup({\r\n        price: new FormControl(this.data.units[0].first_time?.price ?? 0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        price2: new FormControl(this.data.units[0].first_time?.price2 ?? 0, Validators.compose(this.PRICE_VALIDATOR)),\r\n        unit: new FormControl(this.data.units[0].first_time?.unit ?? 'minute', Validators.required),\r\n        time_block: new FormControl(this.data.units[0].first_time?.time_block ?? 1, Validators.compose([Validators.required, Validators.min(1)])),\r\n      })\r\n    );\r\n\r\n    // special_times\r\n    this.productServiceForm.addControl('special_times', new FormArray([]));\r\n    this.data.units[0].special_times?.forEach((item: any) => {\r\n      const daysOfWeekArray = new FormArray([]);\r\n      (item.days_of_week || []).forEach((day: string) => {\r\n        daysOfWeekArray.push(new FormControl(day));\r\n      });\r\n      this.specialTimesArray.push(\r\n        new FormGroup({\r\n          price: new FormControl(item.price, Validators.compose(this.PRICE_VALIDATOR)),\r\n          price2: new FormControl(item.price2 ?? 0, Validators.compose(this.PRICE_VALIDATOR)),\r\n          time_slot_name: new FormControl(item.time_slot_name),\r\n          specific_time: new FormGroup({\r\n            from_minute: new FormControl(item.specific_time.from_minute),\r\n            to_minute: new FormControl(item.specific_time.to_minute),\r\n          }),\r\n          days_of_week: daysOfWeekArray,\r\n        })\r\n      );\r\n    });\r\n\r\n    this.initPriceCleave(true, ['.price']);\r\n    if(this.management_product_price2) this.initPriceCleave(true, ['.price2']);\r\n    if(this.data.units[0].is_merge_block) {\r\n      this.initPriceCleave(true, ['.merge_block_price']);\r\n      if(this.management_product_price2) this.initPriceCleave(true, ['.merge_block_price2']);\r\n    }\r\n    if(this.data.units[0].is_first_time) {\r\n      this.initPriceCleave(true, ['.first_time_price']);\r\n      if(this.management_product_price2) this.initPriceCleave(true, ['.first_time_price2']);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * tạo barcode tự động\r\n   * @example this.setBarcode()\r\n   */\r\n  setBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.productServiceForm.controls['barcode'].setValue(newbarcode);\r\n      this.updateUnits();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xử lý cập nhật trường units cho dịch vụ\r\n   */\r\n  updateUnits() {\r\n    let unit: any = {\r\n      unit: this.productServiceForm.value['unit'],\r\n      ratio: 1,\r\n      default : true,\r\n      price: parseFloat(this.price.getRawValue()),\r\n      price2 : this.management_product_price2 ? parseFloat(this.price2.getRawValue()) : 0,\r\n      barcode: this.productServiceForm.value['barcode'],\r\n    };\r\n    let formValue = this.productServiceForm.value;\r\n\r\n    if (formValue.type == VhType.SERVICETIME) {\r\n      // set lại units[0] dạng time\r\n      unit.price = parseFloat(this.cleaveJsService.getRawValue('.price'));\r\n      unit.price2 = this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.price2')) : 0;\r\n      unit.time_block = formValue.time_block;\r\n\r\n      // các trường is_merge_block, is_first_time, is_special_times\r\n      unit.is_merge_block = formValue.is_merge_block;\r\n      unit.is_first_time = formValue.is_first_time;\r\n      unit.is_special_times = formValue.is_special_times;\r\n\r\n      // merge_block\r\n      if(formValue.is_merge_block) {\r\n        unit.merge_block = {\r\n          price: parseFloat(this.cleaveJsService.getRawValue('.merge_block_price')),\r\n          price2: this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.merge_block_price2')) : 0,\r\n          number: formValue.merge_block.number,\r\n        };\r\n      }\r\n      else {\r\n        delete unit.merge_block;\r\n      }\r\n\r\n      // first_time\r\n      if (formValue.is_first_time) {\r\n        unit.first_time = {\r\n          price: parseFloat(this.cleaveJsService.getRawValue('.first_time_price')),\r\n          price2: this.management_product_price2 ? parseFloat(this.cleaveJsService.getRawValue('.first_time_price2')) : 0,\r\n          unit: formValue.first_time.unit,\r\n          time_block: formValue.first_time.time_block,\r\n        };\r\n      }\r\n      else {\r\n        delete unit.first_time;\r\n      }\r\n\r\n      // special_times\r\n      if (formValue.is_special_times) {\r\n        unit.special_times = [];\r\n        this.specialTimesArray.controls.forEach((item: any) => {\r\n          let data = {\r\n            price: parseFloat(item.value.price),\r\n            price2: this.management_product_price2 ? parseFloat(item.value.price2) : 0,\r\n            time_slot_name: item.value.time_slot_name,\r\n            specific_time: {\r\n              from_minute: item.value.specific_time.from_minute,\r\n              to_minute: item.value.specific_time.to_minute,\r\n            },\r\n            days_of_week: item.value.days_of_week.map((day) => day),\r\n          };\r\n          unit.special_times.push(data);\r\n        });\r\n      }\r\n      else {\r\n        delete unit.special_times;\r\n      }\r\n    }\r\n\r\n    this.updateServiceForm('units', {\r\n      units: [unit]\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   */\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQueryCafe.getlocalDetailProduct_byBarcode_Cafe(barcode);\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n    } \r\n    else {\r\n      this.barcode = false;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 256, 256, \"products\", this.productServiceForm.value[\"img\"] || null).then(\r\n      photoURL => {\r\n        this.productServiceForm.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), \"success-toast\");\r\n        this.updateServiceForm('img', { img: this.productServiceForm.value.img });\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), 'alert-toast');\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**Hàm cập nhật sản phẩm */\r\n  updateServiceForm(field, object) {\r\n    if (object.hasOwnProperty('allow_sell')) {\r\n      object = { delete_hidden: !object.allow_sell }\r\n    }\r\n    if (this.barcode)\r\n      this.vhQueryCafe.updateProduct_Cafe(this.data._id, object)\r\n  }\r\n\r\n\r\n\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n\r\n\r\n\r\n  /**\r\n   * mở modal xác nhận xóa dịch vụ\r\n   * @example this.showModal()\r\n   */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n\r\n  /**\r\n   * đóng modal xác nhận xóa dịch vụ\r\n   * @example this.handleCancel()\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xóa dịch vụ khỏi DB\r\n   */\r\n  deleteService() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQueryCafe.deleteProduct_Cafe(this.data._id)\r\n        .then((rsp: any) => {\r\n          if (rsp.vcode === 0) {\r\n            if (this.productServiceForm.value[\"img\"] && !this.productServiceForm.value['img'].includes(\"assets/img/default\")) {\r\n              this.vhImage.deleteThumbnail(this.productServiceForm.value[\"img\"]).then(() => {\r\n                this.vhComponent.showToast(2000, (this.languageService.translate(\"Product has been deleted successfully\")), \"success-toast\");\r\n                this.vhComponent.hideLoading(0);\r\n                setTimeout(() => {\r\n                  this.isVisible = false;\r\n                  this.goBack();\r\n                }, 300);\r\n              })\r\n            } \r\n            else {\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.alertMessageDesktop(\"success\", (this.languageService.translate(\"Product has been deleted successfully\")));\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            }\r\n          } \r\n          else if (rsp.vcode === 1) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n            // this.goBack();\r\n          } \r\n          else if (rsp.vcode === 2) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n            // this.goBack();\r\n          } \r\n          else if (rsp.vcode === 3) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Vui lòng xóa các thuộc tính của sản phẩm trước\")));\r\n            // this.goBack();\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n\r\n  \r\n  /**\r\n   * Trở về trang trước đó\r\n   */\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list'], { state: this.stateObj });\r\n  }\r\n    \r\n    \r\n    \r\n  /** Getter cho special_times */\r\n  get specialTimesArray(): FormArray {\r\n    return this.productServiceForm.get('special_times') as FormArray;\r\n  }\r\n\r\n  /** Getter cho merge_block */\r\n  get mergeBlockGroup(): FormGroup {\r\n    return this.productServiceForm.get('merge_block') as FormGroup;\r\n  }\r\n  \r\n  /** Getter cho first_time */\r\n  get firstTimeGroup(): FormGroup {\r\n    return this.productServiceForm.get('first_time') as FormGroup;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi loại dịch vụ\r\n   * @param event loại dịch vụ được chọn\r\n   */\r\n  onServiceTypeChange(event: VhType) {\r\n    if (event == VhType.SERVICETIME) {\r\n      this.productServiceForm.controls['unit'].setValue('minute');\r\n      // thêm control cho các trường\r\n      this.addTimeSpecificFields();\r\n      // thêm validator cho các trường\r\n      this.addValidatorsToFields(this.productServiceForm, ['time_block'], [Validators.compose([Validators.required, Validators.min(1)])]);\r\n      this.addValidatorsToFields(this.productServiceForm, ['is_merge_block', 'is_first_time', 'is_special_times'], [Validators.required]);\r\n      this.productServiceForm.controls['time_block'].setValue(1);\r\n      this.productServiceForm.controls['is_merge_block'].setValue(false);\r\n      this.productServiceForm.controls['is_first_time'].setValue(false);\r\n      this.productServiceForm.controls['is_special_times'].setValue(false);\r\n      this.productServiceForm.controls['merge_block'].get('price').setValue(0);\r\n      this.productServiceForm.controls['merge_block'].get('price2').setValue(0);\r\n      this.productServiceForm.controls['merge_block'].get('number').setValue(1);\r\n      this.productServiceForm.controls['first_time'].get('price').setValue(0);\r\n      this.productServiceForm.controls['first_time'].get('price2').setValue(0);\r\n      this.productServiceForm.controls['first_time'].get('unit').setValue('minute');\r\n      this.productServiceForm.controls['first_time'].get('time_block').setValue(1);\r\n    }\r\n    else {\r\n      // this.productServiceForm.controls['unit'].setValue('');\r\n      // xóa validator cho các trường\r\n      this.removeValidatorsFromFields(this.productServiceForm, ['time_block', 'is_merge_block', 'is_first_time', 'is_special_times']);\r\n      this.removeValidatorsFromFields(this.mergeBlockGroup, ['price', 'price2', 'number']);\r\n      this.removeValidatorsFromFields(this.firstTimeGroup, ['price', 'price2', 'unit', 'time_block']);\r\n      this.specialTimesArray.clear();\r\n\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price = this.vhAlgorithm.vhnumeral('.price');\r\n        if (this.management_product_price2) {\r\n          this.price2 = this.vhAlgorithm.vhnumeral('.price2');\r\n        }\r\n      });\r\n    }\r\n\r\n    this.initPriceCleave(event == VhType.SERVICETIME, ['.price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event == VhType.SERVICETIME, ['.price2']);\r\n\r\n    this.updateServiceForm('type', { type: event });\r\n    this.updateUnits();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Có gộp block hay không\r\n   * @param event true là có gộp block, false là không \r\n   */\r\n  changeMergeBlock(event) {\r\n    if(event) {\r\n      this.addValidatorsToFields(this.mergeBlockGroup, ['price', 'price2'], this.PRICE_VALIDATOR);\r\n      this.addValidatorsToFields(this.mergeBlockGroup, ['number'], [Validators.required]);\r\n    }\r\n    else {\r\n      this.removeValidatorsFromFields(this.mergeBlockGroup, ['price', 'price2', 'number']);\r\n    }\r\n    this.initPriceCleave(event, ['.merge_block_price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event, ['.merge_block_price2']);\r\n\r\n    setTimeout(() => {\r\n      this.updateUnits();\r\n    }, 200); // initPriceCleave có delay nên phải setTimeout\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Có sử dụng giờ đầu tiên hay không\r\n   * @param event true là có sử dụng giờ đầu tiên, false là không\r\n   */\r\n  changeFirstTime(event) {\r\n    if(event) {\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['price', 'price2'], this.PRICE_VALIDATOR);\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['unit'], [Validators.required]);\r\n      this.addValidatorsToFields(this.firstTimeGroup, ['time_block'], [Validators.required, Validators.compose([Validators.required, Validators.min(1)])]);\r\n    }\r\n    else {\r\n      this.removeValidatorsFromFields(this.firstTimeGroup, ['price', 'price2', 'unit', 'time_block']);\r\n    }\r\n    this.initPriceCleave(event, ['.first_time_price']);\r\n    if(this.management_product_price2) this.initPriceCleave(event, ['.first_time_price2']);\r\n    \r\n    setTimeout(() => {\r\n      this.updateUnits();\r\n    }, 200); // initPriceCleave có delay nên phải setTimeout\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo / Huỷ Cleave cho các trường giá tiền\r\n   * @param event true là khởi tạo Cleave, false là huỷ Cleave\r\n   * @param name tên của các trường cần khởi tạo Cleave\r\n   */\r\n  initPriceCleave(event: boolean, names: any[]) {\r\n    if (event) {\r\n      setTimeout(() => {\r\n        this.cleaveJsService.createCleaves(names);\r\n      }, 100);\r\n    } \r\n    else {\r\n      this.cleaveJsService.destroyCleaves(names);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Nhận dữ liệu từ modal chọn thời gian đặc biệt\r\n   * @param data object special_time được trả về. Nếu data có index thì là Edit, ngược lại là Add\r\n   */\r\n  onOkSpecialTime(data: any) {\r\n    // Nếu có index thì là Edit\r\n    if(data.index !== undefined) {\r\n      // lấy days_of_week từ data và set\r\n      const daysOfWeekArray = this.specialTimesArray.at(data.index).get('days_of_week') as FormArray;\r\n      daysOfWeekArray.clear();\r\n      (data.days_of_week || []).forEach((day: string) => {\r\n        daysOfWeekArray.push(new FormControl(day));\r\n      });\r\n      this.specialTimesArray.at(data.index).patchValue({\r\n        price: data.price,\r\n        price2: this.management_product_price2 ? data.price2 : 0,\r\n        time_slot_name: data.time_slot_name,\r\n        specific_time: {\r\n          from_minute: data.specific_time.from_minute,\r\n          to_minute: data.specific_time.to_minute,\r\n        },\r\n      });\r\n    }\r\n    // Add\r\n    else {\r\n      // lấy days_of_week từ data\r\n      const selectedDays = data.days_of_week || [];\r\n      const daysOfWeekArray = new FormArray(\r\n        selectedDays.map((day: string) => new FormControl(day))\r\n      );\r\n      this.specialTimesArray.push(\r\n        new FormGroup({\r\n          price: new FormControl(data.price),\r\n          price2: new FormControl(this.management_product_price2 ? data.price2 : 0),\r\n          time_slot_name: new FormControl(data.time_slot_name),\r\n          specific_time: new FormGroup({\r\n            from_minute: new FormControl(data.specific_time.from_minute),\r\n            to_minute: new FormControl(data.specific_time.to_minute),\r\n          }),\r\n          days_of_week: daysOfWeekArray,\r\n        })\r\n      );\r\n    }\r\n\r\n    this.updateUnits();\r\n  }\r\n  \r\n  \r\n  \r\n  /**\r\n   * Chuyển từ phút sang giờ\r\n   * @param minutes phút cần chuyển đổi\r\n   * @returns chuỗi thời gian theo định dạng HH:mm\r\n   * @example\r\n   * convertMinutesToTime(90) => '01:30'\r\n   */\r\n  convertMinutesToTime(minutes: number): string {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chuyển đổi phút thành đối tượng Date\r\n   * @param minutes Số phút cần chuyển đổi\r\n   * @returns Đối tượng Date với giờ và phút đã được thiết lập\r\n   * \r\n   * @example \r\n   * convertMinutesToDate(90) => Date object with hours = 1, minutes = 30\r\n   * convertMinutesToDate(120) => Date object with hours = 2, minutes = 0\r\n   */\r\n  convertMinutesToDate(minutes: number): Date {\r\n    const date = new Date();\r\n    date.setHours(Math.floor(minutes / 60), minutes % 60, 0, 0); // Set hours and minutes\r\n    return date;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xóa thời gian đặc biệt\r\n   * @param index index của thời gian đặc biệt cần xóa\r\n   */\r\n  deleteSpecialTime(index: number) {\r\n    this.specialTimesArray.removeAt(index);\r\n    this.updateUnits();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Chỉnh sửa thời gian đặc biệt\r\n   * @param index index của thời gian đặc biệt cần chỉnh sửa\r\n   */\r\n  editSpecialTime(index: number) {\r\n    const specialTime = this.specialTimesArray.at(index).value;\r\n    this.dataSpecialTimeEdit = JSON.parse(JSON.stringify(specialTime));\r\n    this.dataSpecialTimeEdit.specific_time.from_minute = this.convertMinutesToDate(this.dataSpecialTimeEdit.specific_time.from_minute);\r\n    this.dataSpecialTimeEdit.specific_time.to_minute = this.convertMinutesToDate(this.dataSpecialTimeEdit.specific_time.to_minute);\r\n    this.dataSpecialTimeEdit.index = index;\r\n    \r\n    this.isShowModalSpecialTime = true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Thêm validator vào các trường trong FormGroup\r\n   * \r\n   * @param group FormGroup cần thêm validator.\r\n   * @param fields Mảng tên trường mà validator sẽ được thêm vào.\r\n   * @param validators Mảng các validator cần thêm.\r\n   * \r\n   * @example\r\n   * addValidatorsToFields(this.productServiceForm, ['field1', 'field2'], [Validators.required]);\r\n   * addValidatorsToFields(this.productServiceForm, ['field1', 'field2'], [Validators.required, Validators.minLength(3)]);\r\n   */\r\n  addValidatorsToFields(group: FormGroup, fields: string[], validators: any[]) {\r\n    fields.forEach((field) => {\r\n      const control = group.get(field);\r\n      if (control) {\r\n        control.addValidators(validators);\r\n        control.updateValueAndValidity();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xóa validator khỏi các trường trong FormGroup\r\n   * Nếu không chỉ định validator, tất cả các validator sẽ bị xóa.\r\n   * \r\n   * @param group FormGroup cần xóa validator.\r\n   * @param fields Mảng tên trường mà validator sẽ bị xóa.\r\n   * @param validators (Optional) Các validator cần xóa. Nếu không cung cấp, tất cả các validator sẽ bị xóa.\r\n   * \r\n   * @example\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2']);\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2'], [Validators.required]);\r\n   * removeValidatorsFromFields(this.productServiceForm, ['field1', 'field2'], [Validators.required, Validators.minLength(3)]);\r\n   */\r\n  removeValidatorsFromFields(group: FormGroup, fields: string[], validators?: any[]) {\r\n    fields.forEach((field) => {\r\n      const control = group.get(field);\r\n      if (control) {\r\n        // Xóa các validator đã chỉ định\r\n        if (validators && validators.length > 0) {\r\n          validators.forEach((validator) => {\r\n            control.removeValidators(validator);\r\n          });\r\n        } \r\n        // Xóa tất cả các validator\r\n        else {\r\n          control.clearValidators();\r\n        }\r\n        control.updateValueAndValidity();\r\n      }\r\n    });\r\n  }\r\n      \r\n      \r\n      \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQueryCafe.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.SERVICE)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQueryCafe.addCategory({ name: value, type: VhType.SERVICE }).then((res: any) => {\r\n        console.log(res);\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.productServiceForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<!-- Nút Quay lại -->\r\n<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n\r\n<nz-layout>\r\n  <form nz-form [formGroup]=\"productServiceForm\">\r\n    <div class=\"custom-box\">\r\n\r\n      <!-- Header -->\r\n      <div nz-row>\r\n        <!-- Tiêu đề -->\r\n        <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n          <b>{{\"Service information\"|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"17\" class=\"title center-all-content\"></div>\r\n        <!-- Nút xoá -->\r\n        <div nz-col nzSpan=\"3\" class=\"add-button\">\r\n          <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n            <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <!-- Ảnh -->\r\n        <div nz-row>\r\n          <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <div class=\"bg-img center-all-content\" (click)=\"getFile()\">\r\n              <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\" (change)=\"onUpload($event)\" />\r\n              <img [ngStyle]=\"{width: productServiceForm.value.img ? '100%' : '60px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"productServiceForm.value.img\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div nz-row style=\"padding-top: 20px;\">\r\n          <!-- Tên -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Service name' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                <nz-input-group>\r\n                  <input formControlName=\"name\" nz-input [placeholder]=\"'Enter service name' | translate\" (blur)=\"updateServiceForm('name', {name: productServiceForm.value.name})\" required />\r\n                  <ng-template #combineTplName let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Product name is required' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <!-- Loại dịch vụ -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b>{{'Service type' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"type\">\r\n                <nz-select nzShowSearch [nzPlaceHolder]=\"'Please select service type' | translate\"\r\n                  formControlName=\"type\"\r\n                  (ngModelChange)=\"onServiceTypeChange($event)\">\r\n                  <nz-option *ngFor=\"let option of item_type_list\" [nzLabel]=\"option.name | translate\" [nzValue]=\"option._id\"></nz-option>\r\n                  <ng-template #type let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Service type is required' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-select>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <!-- Danh mục -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Category' | translate}}*</b></div>\r\n            <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n              <!-- Thanh chọn -->\r\n              <nz-select formControlName=\"id_category\" \r\n                (ngModelChange)=\"updateServiceForm('id_category', {id_category: $event})\"\r\n                [nzDropdownRender]=\"addCategoryTemplate\"\r\n                nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n              </nz-select>\r\n              <!-- Thêm danh mục -->\r\n              <ng-template #addCategoryTemplate>\r\n                <nz-divider></nz-divider>\r\n                <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                  <!-- Input nhập tên -->\r\n                  <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                  <!-- Nút thêm -->\r\n                  <button (click)=\"addCategory(categoryName)\" nz-button\r\n                    [nzLoading]=\"isAddingCategory\"\r\n                    [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                    {{'Add' | translate}}\r\n                  </button>\r\n                </div>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </div>\r\n\r\n          <!-- Mã vạch -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Barcode' | translate}}</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group>\r\n                  <input #box formControlName=\"barcode\" nz-input [placeholder]=\"'Enter manually or use the barcode scanner' | translate\" (keyup)=\"checkBarcode(box.value)\" (blur)=\"updateUnits()\" />\r\n                  <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcode()\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                </nz-input-group>\r\n                <div class=\"validation-errors\">\r\n                  <ng-container>\r\n                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                      <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n          <!-- ------------------------------------------------------- TÍNH TIỀN THEO CÔNG ------------------------------------------------------- -->\r\n          <ng-container *ngIf=\"productServiceForm.value.type === VhType.SERVICE\">\r\n            <!-- Đơn vị -->\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b class='label'>{{'Unit' | translate}}</b>*</div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"unit\" nz-input [placeholder]=\"'Enter unit' | translate\" (blur)=\"updateUnits()\" />\r\n                    <ng-template #combineTplUnit let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Giá -->\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b class='label'>{{'Service price' | translate}} *</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                  <nz-input-group>\r\n                      <input class=\"price\" type=\"text\" maxlength=\"15\" formControlName=\"price\" nz-input placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" required pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" (blur)=\"updateUnits()\" />\r\n                      <ng-template #combineTplPriceImport let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                      </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n\r\n            <!-- Giá 2 -->\r\n            <div nz-col nzSpan=\"12\"  *ngIf=\"management_product_price2\">\r\n              <div><b class='label'>{{'Service price' | translate}} 2*</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control [nzErrorTip]=\"combineTplPrice2Import\">\r\n                  <nz-input-group>\r\n                    <input class=\"price2\" type=\"text\" maxlength=\"15\" formControlName=\"price2\" nz-input placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" required pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" (blur)=\"updateUnits()\" />\r\n                    <ng-template #combineTplPrice2Import let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n          </ng-container>\r\n\r\n          <!-- Thời gian cảnh báo -->\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"productServiceForm.value.type === VhType.SERVICE\">\r\n            <ng-container  >\r\n              <div><b>{{'Warning timeout (minute)' | translate}}</b></div>\r\n              <nz-form-item>\r\n                <nz-form-control>\r\n                  <nz-input-group>\r\n                    <input formControlName=\"time_warning\" nz-input type=\"number\" (blur)=\"updateServiceForm('time_warning', {time_warning: productServiceForm.value.time_warning})\"\r\n                      [placeholder]=\"'Enter warning timeout (minutes)'|translate\" />\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </ng-container>\r\n          </div>\r\n\r\n          <div nz-col nzSpan=\"12\">\r\n            <!-- Cho phép bán -->\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"24\">\r\n                <label nz-checkbox formControlName=\"allow_sell\" (ngModelChange)=\"updateServiceForm('allow_sell', {allow_sell: $event})\">{{'Available to sell' | translate}}</label>\r\n              </div>\r\n            </div>\r\n            <!-- Yêu thích -->\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"24\">\r\n                <label nz-checkbox formControlName=\"selling\" (ngModelChange)=\"updateServiceForm('selling', {selling: $event})\">{{'Quick sale' | translate}}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div *ngIf=\"productServiceForm.value.type === VhType.SERVICETIME\" nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n            <b>* {{'_Note' | translate}}:</b> <br>\r\n            <i>- {{'Priority order for calculating charges: First time block => Special time block => Merge block => Regular time.' | translate}}</i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ---------------------------------------------------- TÍNH TIỀN THEO THỜI GIAN ----------------------------------------------------- -->\r\n    <ng-container *ngIf=\"productServiceForm.value.type === VhType.SERVICETIME\">\r\n\r\n      <!-- --------------------------------------------------------- Giờ bán thường ---------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <!-- Giờ bán thường -->\r\n        <div nz-col nzSpan=\"24\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px;\">\r\n            <b>{{'Regular selling time' | translate}}</b>\r\n          </div>\r\n\r\n          <div nz-row>\r\n            <!-- Giá bán -->\r\n            <div nz-col nzSpan=\"6\">\r\n              <div>{{'Selling price' | translate}}*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"price\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price\" class=\"price\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #price let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Giá bán 2 -->\r\n            <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n              <div>{{'Selling price' | translate}} 2*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"price2\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price2\" class=\"price2\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #price2 let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n              <div>{{'Apply for each time block' | translate}}*</div>\r\n              <div nz-row>\r\n                <!-- Áp dụng mỗi khoảng thời gian -->\r\n                <nz-form-item nz-col nzSpan=\"18\">\r\n                  <nz-form-control [nzErrorTip]=\"time_block\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"time_block\" [min]=\"1\" (blur)=\"updateUnits()\" nz-input type=\"number\" [placeholder]=\"'Enter time' | translate\" style=\"width: 98%;\" />\r\n                      <ng-template #time_block let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time block is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid time block' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n                <!-- Đơn vị thời gian -->\r\n                <nz-form-item nz-col nzSpan=\"6\">\r\n                  <nz-form-control [nzErrorTip]=\"time_unit\">\r\n                    <nz-select formControlName=\"unit\" (ngModelChange)=\"updateUnits()\" nzShowSearch>\r\n                      <nz-option *ngFor=\"let option of time_unit_list\" [nzLabel]=\"option.name | translate | titlecase\" [nzValue]=\"option._id\"></nz-option>\r\n                      <ng-template #time_unit let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time unit is required' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-select>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"24\" style=\"margin-bottom: 12px;\">\r\n              <b>* {{'_Note' | translate}}:</b> <br>\r\n              <i>- {{'Usage time, if less than the time set for regular selling price, will be rounded up to the time set for the regular selling price.' | translate}}</i>\r\n            </div>\r\n\r\n            <!-- Gộp block -->\r\n            <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n              <b>{{'Merge block' | translate}}</b>\r\n              <nz-switch formControlName=\"is_merge_block\" (ngModelChange)=\"changeMergeBlock($event)\"></nz-switch>\r\n            </div>\r\n            <!-- Có bật Gộp block -->\r\n            <ng-container *ngIf=\"productServiceForm.value.is_merge_block\" formGroupName=\"merge_block\">\r\n              <!-- Giá bán -->\r\n              <div nz-col nzSpan=\"6\">\r\n                <div>{{'Selling price' | translate}}*</div>\r\n                <nz-form-item nz-col nzSpan=\"24\">\r\n                  <nz-form-control [nzErrorTip]=\"merge_block_price\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"price\" class=\"merge_block_price\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                      <ng-template #merge_block_price let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Giá bán 2 -->\r\n              <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n                <div>{{'Selling price' | translate}} 2*</div>\r\n                <nz-form-item nz-col nzSpan=\"24\">\r\n                  <nz-form-control [nzErrorTip]=\"merge_block_price2\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"price2\" class=\"merge_block_price2\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                      <ng-template #merge_block_price2 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <!-- Số lượng block gộp -->\r\n              <div nz-col nzSpan=\"12\">\r\n                <div>{{'Number of merged blocks' | translate}}*</div>\r\n                <div nz-row>\r\n                  <nz-form-item nz-col nzSpan=\"24\">\r\n                    <nz-form-control [nzErrorTip]=\"number\">\r\n                      <nz-input-group>\r\n                        <input formControlName=\"number\" (blur)=\"updateUnits()\" nz-input type=\"number\" [placeholder]=\"'Enter quantity' | translate\" style=\"width: 98%;\" />\r\n                        <ng-template #number let-control>\r\n                          <ng-container *ngIf=\"control.hasError('required')\">{{'Quantity is required' | translate}}</ng-container>\r\n                          <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid quantity' | translate}}</ng-container>\r\n                        </ng-template>\r\n                      </nz-input-group>\r\n                    </nz-form-control>\r\n                  </nz-form-item>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- ---------------------------------------------------------- Giờ đầu tiên ----------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n            <b>{{'First hour' | translate}}</b>\r\n            <nz-switch formControlName=\"is_first_time\" (ngModelChange)=\"changeFirstTime($event)\"></nz-switch>\r\n          </div>\r\n          <div *ngIf=\"productServiceForm.value.is_first_time\" formGroupName=\"first_time\" nz-row>\r\n            <!-- Giá bán -->\r\n            <div nz-col nzSpan=\"6\">\r\n              <div>{{'Selling price' | translate}}*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"first_time_price\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price\" class=\"first_time_price\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #first_time_price let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Giá bán 2 -->\r\n            <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n              <div>{{'Selling price' | translate}} 2*</div>\r\n              <nz-form-item nz-col nzSpan=\"24\">\r\n                <nz-form-control [nzErrorTip]=\"first_time_price2\">\r\n                  <nz-input-group>\r\n                    <input formControlName=\"price2\" class=\"first_time_price2\" (blur)=\"updateUnits()\" nz-input placeholder=\"0\" required />\r\n                    <ng-template #first_time_price2 let-control>\r\n                      <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                      <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                    </ng-template>\r\n                  </nz-input-group>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n            <!-- Thời gian sử dụng đầu tiên -->\r\n            <div nz-col nzSpan=\"12\">\r\n              <div>{{'First usage time' | translate}}*</div>\r\n              <div nz-row>\r\n                <nz-form-item nz-col nzSpan=\"18\">\r\n                  <nz-form-control [nzErrorTip]=\"first_time_time_block\">\r\n                    <nz-input-group>\r\n                      <input formControlName=\"time_block\" [min]=\"1\"  (blur)=\"updateUnits()\" nz-input type=\"number\" [placeholder]=\"'Enter time' | translate\" style=\"width: 98%;\" />\r\n                      <ng-template #first_time_time_block let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time is required' | translate}}</ng-container>\r\n                        <ng-container *ngIf=\"control.hasError('min')\">{{'Invalid time' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item nz-col nzSpan=\"6\">\r\n                  <nz-form-control [nzErrorTip]=\"first_time_unit\">\r\n                    <nz-select formControlName=\"unit\" (ngModelChange)=\"updateUnits()\" nzShowSearch>\r\n                      <nz-option *ngFor=\"let option of time_unit_list\" [nzLabel]=\"option.name | translate | titlecase\" [nzValue]=\"option._id\"></nz-option>\r\n                      <ng-template #first_time_unit let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Time unit is required' | translate}}</ng-container>\r\n                      </ng-template>\r\n                    </nz-select>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- ---------------------------------------------------------- Giờ đặc biệt ----------------------------------------------------------- -->\r\n      <div class=\"custom-box\" style=\"margin-top: 12px;\">\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 12px;\">\r\n          <div nz-col nzSpan=\"24\" style=\"font-size: 1rem; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;\">\r\n            <b>{{'Special time' | translate}}</b>\r\n            <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 12px;\">\r\n              <!-- Nút thêm -->\r\n              <button *ngIf=\"productServiceForm.value.is_special_times\"\r\n                (click)=\"isShowModalSpecialTime = true; dataSpecialTimeEdit = undefined\"\r\n                 nz-button nzType=\"default\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Add' | translate}}\r\n              </button>\r\n              <!-- Bật tắt -->\r\n              <nz-switch formControlName=\"is_special_times\" (ngModelChange)=\"updateUnits()\"></nz-switch>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Table -->\r\n          <div *ngIf=\"productServiceForm.value.is_special_times\" style=\"height: 83%; overflow: hidden;\">\r\n            <nz-table [nzShowPagination]=\"false\" [nzBordered]=\"true\" [nzData]=\"specialTimesArray.controls\" [nzNoResult]=\"null\">\r\n              <!-- Header -->\r\n              <thead>\r\n                <tr>\r\n                  <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Name' | translate}}</b></th>\r\n                  <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Time block' | translate}}</b></th>\r\n                  <th nzWidth=\"30%\" nzAlign=\"left\"><b>{{'Days of the week' | translate}}</b></th>\r\n                  <th nzWidth=\"20%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n                  <th nzWidth=\"10%\" nzAlign=\"center\"></th>\r\n                </tr>\r\n              </thead>\r\n              <!-- Body -->\r\n              <tbody>\r\n                <ng-container formArrayName=\"special_times\" style=\"cursor: pointer;\">\r\n                  <tr *ngFor=\"let specialTime of specialTimesArray.controls; let i = index\" [formGroupName]=\"i\">\r\n                    <!-- Tên -->\r\n                    <td>{{specialTime.value.time_slot_name}}</td>\r\n                    <!-- Khung giờ -->\r\n                    <td nzAlign='center'>\r\n                      <ng-container *ngIf=\"specialTime.value.specific_time.from_minute === 0 && specialTime.value.specific_time.to_minute === 1440; else timeRange\">\r\n                        {{'Whole day' | translate}}\r\n                      </ng-container>\r\n                      <ng-template #timeRange>\r\n                        {{convertMinutesToTime(specialTime.value.specific_time.from_minute)}} - {{convertMinutesToTime(specialTime.value.specific_time.to_minute)}}\r\n                      </ng-template>\r\n                    </td>\r\n                    <!-- Ngày trong tuần -->\r\n                    <td>\r\n                      <ng-container *ngIf=\"specialTime.value.days_of_week && specialTime.value.days_of_week.length\">\r\n                        <ng-container *ngFor=\"let day of specialTime.value.days_of_week; let last = last\">\r\n                          {{ day | titlecase | translate }}<span *ngIf=\"!last\">, </span>\r\n                        </ng-container>\r\n                      </ng-container>\r\n                    </td>\r\n                    <!-- Giá bán -->\r\n                    <td nzAlign='center'>{{vhAlgorithm.vhcurrencyunit(specialTime.value.price)}} {{currencySymbol}} / {{productServiceForm.value.time_block}} {{productServiceForm.value.unit | translate}}</td>\r\n                    <!-- Icon -->\r\n                    <td nzAlign='center'>\r\n                      <!-- Sửa -->\r\n                      <i (click)=\"editSpecialTime(i)\"\r\n                        class=\"cus-icon\" nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 8px; cursor: pointer;\"></i>\r\n                      <!-- Xóa -->\r\n                      <span nz-button nzType=\"default\" nz-popconfirm nzPopconfirmPlacement=\"top\"\r\n                        [nzPopconfirmTitle]=\"'Are you sure to delete this special time?'| translate\"\r\n                        (nzOnConfirm)=\"deleteSpecialTime(i)\">\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style=\"cursor: pointer;\"></i>\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                </ng-container>\r\n                <!-- Không có dữ liệu -->\r\n                <tr *ngIf=\"specialTimesArray.length === 0\" class=\"ant-table-placeholder\">\r\n                  <td colspan=\"5\">\r\n                    <nz-embed-empty>No special times available</nz-embed-empty>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </nz-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </form>\r\n</nz-layout>\r\n\r\n\r\n\r\n<!-- ------------------------------------------------------- MODAL XÁC NHẬN XÓA -------------------------------------------------------- -->\r\n<nz-modal [(nzVisible)]=\"isVisible\" [nzTitle]=\"'Confirm' | translate\" [nzCancelText]=\"'Cancel' | translate\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"deleteService()\">\r\n  <p *nzModalContent>{{'Are you sure to delete this service?' | translate}}</p>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- --------------------------------------------------- MODAL ADD/EDIT GIỜ ĐẶC BIỆT --------------------------------------------------- -->\r\n<app-special-time *ngIf=\"isShowModalSpecialTime\"\r\n  [data]=\"dataSpecialTimeEdit\"\r\n  [specialTimes]=\"productServiceForm.get('special_times').value\"\r\n  (onClose)=\"isShowModalSpecialTime = false\"\r\n  (onOk)=\"isShowModalSpecialTime = false; onOkSpecialTime($event)\">\r\n</app-special-time>\r\n","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { combineLatest } from 'rxjs';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/cafe/interface/vh-type';\r\nimport * as XLSX from 'xlsx';\r\n\r\n@Component({\r\n  selector: 'app-services-list',\r\n  templateUrl: './services-list.component.html',\r\n  styleUrls: ['./services-list.component.scss']\r\n})\r\nexport class ServicesListComponent {\r\n  list_subservice: any = [];\r\n  list_show_service: any = [];\r\n  list_show_service_not: any = [];\r\n  list_service: any = [];\r\n  list_show: any;\r\n\r\n  /** Danh sách dịch vụ hiển thị trong tab Đã ẩn */\r\n  list_show_service_hidden: any = [];\r\n  /** Danh sách sản phẩm hiển thị trong tab Đã ẩn */\r\n  list_subservice_hidden: any = [];\r\n  list_service_hidden: any = [];\r\n  list_show_hidden: any = [];\r\n\r\n  /** Danh sách tất cả danh mục */\r\n  list_category: any = [];\r\n  /** Danh sách danh mục tìm kiếm */\r\n  list_search_category: any = [];\r\n  stateObj = {\r\n    /** Từ khoá tìm kiếm */\r\n    keySearch: '',\r\n    /** id của danh mục được chọn */\r\n    selectedValue: '1',\r\n    /** Tab được chọn */\r\n    tab: 0\r\n  }\r\n  observableAll: any;\r\n  public VhType = VhType;\r\n  constructor(\r\n    private router: Router,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhComponent:VhComponent\r\n  ) {\r\n    if (this.router.getCurrentNavigation().extras.state) {\r\n      let stateObj = this.router.getCurrentNavigation().extras.state.stateObj;\r\n      this.stateObj.keySearch = stateObj.keySearch;\r\n      this.stateObj.selectedValue = stateObj.selectedValue;\r\n      this.stateObj.tab = stateObj.tab;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.doRefreshData();\r\n\r\n  }\r\n\r\n\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#service-list\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".service-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#service-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".service-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.observableAll.unsubscribe();\r\n  }\r\n\r\n\r\n\r\n  /**get data product, category */\r\n  doRefreshData() {\r\n    this.observableAll = combineLatest([\r\n      this.vhQueryCafe.getObservableLocalProducts(VhType.SERVICE_SERVICETIME),\r\n      this.vhQueryCafe.getObservableLocalCategorys(VhType.SERVICE)\r\n    ]).subscribe((result: any) => {\r\n      console.log(result);\r\n      \r\n      //xử lý dịch vụ\r\n      this.list_service = result[0].map(item => this.processService(item));\r\n      this.list_subservice = this.list_service;\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProducts(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategory(this.stateObj.selectedValue);\r\n      }\r\n      //xử lý category\r\n      this.list_category = result[1].filter(res => res.type == VhType.SERVICE);\r\n      if (!this.list_category.some(item => item._id == '1')) {\r\n        this.list_category.unshift({ name: this.languageService.translate('All'), _id: '1' });\r\n      }\r\n      this.list_search_category = this.list_category;\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lí dữ liệu của sản phẩm (name_category)\r\n   * @param item \r\n   * @returns \r\n   */\r\n  processService(item: any): any {\r\n    return {\r\n      ...item,\r\n      name_category: this.vhQueryCafe.getlocalCategory(item.id_category) ? this.vhQueryCafe.getlocalCategory(item.id_category).name : '',\r\n      unit: item.units[0].unit,\r\n      barcode: item.units[0].barcode,\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy danh sách sản phẩm đã ẩn\r\n   */\r\n  getHiddenProducts() {\r\n    this.vhQueryCafe.refreshLocalProducts_Delete_Hidden(VhType.SERVICE_SERVICETIME).then(() => {\r\n      const hiddenProducts = this.vhQueryCafe.getlocalProducts(VhType.SERVICE_SERVICETIME).filter(item => item.delete_hidden);\r\n\r\n      this.list_service_hidden = hiddenProducts.map(item => this.processService(item));\r\n      this.list_subservice_hidden = this.vhAlgorithm.sortStringbyASC(this.list_service_hidden, 'name');\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProductsHidden(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n      }\r\n      \r\n    });\r\n  }\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(id, value, parent?, is_sub?) {\r\n    console.log('value', value);\r\n    console.log('id', id);\r\n\r\n\r\n    this.vhQueryCafe.updateProduct(id, value).then((res) => {\r\n      console.log(res);\r\n      this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n      if (!value.delete_hidden) {\r\n        this.list_service_hidden = this.list_service_hidden.filter(item => item._id != id);\r\n        this.list_show_service_hidden = this.list_show_service_hidden.filter(item => item._id != id);\r\n      }\r\n    }, error => {\r\n      console.log(error);\r\n    }).catch(e => {\r\n      console.log(e);\r\n    })\r\n\r\n\r\n  }\r\n\r\n\r\n  /** \r\n   * Lọc danh sách sản phẩm theo allow_sell\r\n   */\r\n  filterByAllowSell() {\r\n    this.list_show_service = this.list_show.filter(item => item.delete_hidden == false);\r\n    // this.list_show_service_not = this.list_show.filter(item => !item.delete_hidden == false);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProducts(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_service = this.applySearchFilter(this.list_subservice, this.stateObj.keySearch, ['name']);\r\n    this.searchByCategory(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm (tab đã ẩn) theo tên\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProductsHidden(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_service_hidden = this.applySearchFilter(this.list_subservice_hidden, this.stateObj.keySearch, ['name']);\r\n    this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên, nếu không có giá trị tìm kiếm thì trả về tất cả, ngược lại thì lọc theo tên và barcode\r\n   * @param products \r\n   * @param searchValue \r\n   * @param fields \r\n   * @returns \r\n   */\r\n  applySearchFilter(products: any[], searchValue: string, fields: string[]): any[] {\r\n    return searchValue\r\n      ? this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue.toLowerCase()), products, fields)\r\n      : products;\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Lọc sản phẩm theo danh mục sản phẩm\r\n   */\r\n  searchByCategory(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show = this.applyCategoryFilter(this.list_service, value);\r\n    this.filterByAllowSell();\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Lọc sản phẩm (tab đã ẩn) theo danh mục sản phẩm\r\n   */\r\n  searchByCategoryHidden(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show_hidden = this.applyCategoryFilter(this.list_service_hidden, value);\r\n    this.list_show_service_hidden = this.list_show_hidden;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo danh mục, nếu danh mục là '1' thì trả về tất cả sản phẩm, nếu không thì lọc theo id_category truyền vào\r\n   * @param products \r\n   * @param categoryId \r\n   * @returns \r\n   */\r\n  applyCategoryFilter(products: any[], categoryId: string): any[] {\r\n    return categoryId === '1'\r\n      ? products\r\n      : products.filter(item => item.id_category === categoryId);\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Lọc sản phẩm theo danh mục sản phẩm\r\n   */\r\n  search(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.list_category = this.vhAlgorithm.searchList(tempVal, this.list_search_category, ['name']);\r\n    else this.list_category = this.list_search_category;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi tab\r\n   */\r\n  changeTab(value) {\r\n    this.stateObj.tab = value;\r\n    if (value == '1') {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/cafe/dashboard/management/service']);\r\n  }\r\n\r\n\r\n  gotoAddService() {\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list/add'], { state: { stateObj: this.stateObj } });\r\n  }\r\n\r\n\r\n  gotoCreateDataService() {\r\n    let dataRestore = { keySearch: this.stateObj.keySearch, selectedValue: this.stateObj.selectedValue, selectedIndex: this.stateObj.tab }\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list/create-data-service'], { state: { dataRestore } });\r\n  }\r\n\r\n\r\n  gotoDetailService(data, isFromHidden?: boolean) {\r\n    const state = {\r\n      data: data,\r\n      stateObj: this.stateObj\r\n    }\r\n    if (isFromHidden) {\r\n      state['isFromHidden'] = true;\r\n    }\r\n    console.log(state);\r\n    this.router.navigate(['/cafe/dashboard/management/service/service-list/detail'], {\r\n      state: state\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  name_col = false;          // chọn sort cột tên sản phẩm\r\n  unit_col = false;             // Chọn sắp xếp theo đơn vị\r\n  barcode_col = false;          // Chọn sắp xếp theo barcode\r\n  name_category_col = false;     // Chọn sắp xếp theo tên danh mục\r\n  price_col = false;            // Chọn sắp xếp theo giá\r\n  type_col = false;            // Chọn sắp xếp theo giá\r\n\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   * @param typeList      // Biến dùng để xác định danh sách sắp xếp là cho bán hay không cho bán\r\n   */\r\n  sortTable(colName, typeList: 'not' | 'allow' | 'hidden') {\r\n    let methodName = (colName === 'price' || colName === 'type') ? 'sortNumberby' : 'sortVietnameseby';\r\n    let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n    let listToSort = typeList === 'not'\r\n      ? 'list_show_service_not'\r\n      : typeList === 'allow'\r\n        ? 'list_show_service'\r\n        : 'list_show_service_hidden';\r\n\r\n    this[listToSort] = this.vhAlgorithm[methodName + direction]([...this[listToSort]], colName);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xuất tất cả service\r\n   * xuất ra file excel và tải về\r\n   */\r\n  exportListService() {\r\n    let serviceExcel: Array<any> = [];\r\n    this.list_service.forEach((product, index) => {\r\n      let row: Object = new Object();\r\n      const category: any = this.vhQueryCafe.getlocalCategory(product['id_category']);\r\n      row[this.languageService.translate(\"_name_service\")] = product['name'];\r\n      row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n      row[this.languageService.translate(\"_unit\")] = product['unit'];\r\n      row[this.languageService.translate(\"_price\")] = product['units'][0]['price'];\r\n      row[this.languageService.translate(\"_barcode\")] = product['barcode'];\r\n      serviceExcel.push(row);\r\n      if (index == this.list_service.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(serviceExcel, this.languageService.translate(\"Service list\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xuất service Theo công\r\n   * xuất ra file excel và tải về\r\n   */\r\n  exportListServiceByWork() {\r\n    let serviceExcel: Array<any> = [];\r\n    const serviceToExport = this.list_service.filter(s => s.type === VhType.SERVICE);\r\n    serviceToExport.forEach((product, index) => {\r\n      let row: Object = new Object();\r\n      const category: any = this.vhQueryCafe.getlocalCategory(product['id_category']);\r\n      row[this.languageService.translate(\"_name_service\")] = product['name'];\r\n      row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n      row[this.languageService.translate(\"_unit\")] = product['unit'];\r\n      row[this.languageService.translate(\"_price\")] = product['units'][0]['price'];\r\n      row[this.languageService.translate(\"_barcode\")] = product['barcode'];\r\n      serviceExcel.push(row);\r\n      if (index == serviceToExport.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(serviceExcel, this.languageService.translate(\"Service list\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xuất service Theo thời gian\r\n   * xuất ra file excel và tải về\r\n   */\r\n  exportListServiceByTime() {\r\n    let serviceExcel: Array<any> = [];\r\n    const serviceToExport = this.list_service.filter(s => s.type === VhType.SERVICETIME);\r\n  \r\n    serviceToExport.forEach((product, index) => {\r\n      let row: any = {};\r\n  \r\n      // Tên dịch vụ\r\n      row[this.languageService.translate('_name_service')] = product['name'];\r\n      // Danh mục\r\n      const category: any = this.vhQueryCafe.getlocalCategory(product['id_category']);\r\n      row[this.languageService.translate('_category')] = category ? category['name'] : '';\r\n      // Barcode\r\n      row[this.languageService.translate('_barcode')] = product['barcode'];\r\n      // Giá bán (Giờ bán thường)\r\n      row[this.languageService.translate('_price_regular')] = product['units'][0]?.['price'];\r\n      // Khoảng thời gian (Giờ bán thường)\r\n      row[this.languageService.translate('_time_block_regular')] = product['units'][0]?.['time_block'];\r\n      // Đơn vị (Giờ bán thường)\r\n      row[this.languageService.translate('_unit_regular')] = this.languageService.translate(product['units'][0]?.['unit']);\r\n      // Giá bán (Gộp block)\r\n      row[this.languageService.translate('_price_merge_block')] = product['units'][0]?.['merge_block']?.price;\r\n      // Số lượng block gộp (Gộp block)\r\n      row[this.languageService.translate('_merge_block_quantity')] = product['units'][0]?.['merge_block']?.number;\r\n      // Giá bán (Giờ đầu tiên)\r\n      row[this.languageService.translate('_price_first_time')] = product['units'][0]?.['first_time']?.price;\r\n      // Khoảng thời gian (Giờ đầu tiên)\r\n      row[this.languageService.translate('_time_block_first_time')] = product['units'][0]?.['first_time']?.time_block;\r\n      // Đơn vị (Giờ đầu tiên)\r\n      row[this.languageService.translate('_unit_first_time')] = this.languageService.translate(product['units'][0]?.['first_time']?.unit);\r\n      // Giờ đặc biệt\r\n      if (product['units'][0]?.['special_times'] && product['units'][0]?.['special_times'].length > 0) {\r\n        row[this.languageService.translate('_special_times')] = product['units'][0]?.['special_times']\r\n          .map((special: any) => {\r\n            const translatedDays = special.days_of_week\r\n              .map((day: string) => this.languageService.translate(day))\r\n              .join('-');\r\n      \r\n            return `${special.time_slot_name}, ${special.price}, ${special.specific_time.from_minute}-${special.specific_time.to_minute}, ${translatedDays}`;\r\n          })\r\n          .join('; ');\r\n      }   \r\n      else {\r\n        row[this.languageService.translate('_special_times')] = '';\r\n      }\r\n  \r\n      serviceExcel.push(row);\r\n  \r\n      // Export file nếu là dòng cuối (sau khi thêm tất cả các dòng)\r\n      if (index === serviceToExport.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(serviceExcel, this.languageService.translate('Service list'));\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<!-- ---------------------------------------------------------- Nút quay lại ----------------------------------------------------------- -->\r\n<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n\r\n<nz-layout id=\"service-list\" class=\"height-layout\">\r\n  <!-- ------------------------------------------------------------- Header -------------------------------------------------------------- -->\r\n  <div nz-row class=\"service-list-header\">\r\n    <!-- Tiêu đề -->\r\n    <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n      <b>{{'Services list' | translate}}</b>\r\n    </div>\r\n    <!-- Danh sách nút -->\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <!-- Ô tìm kiếm -->\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input #box [value]=\"stateObj.keySearch\" type=\"text\" nz-input [placeholder]=\"'Search for service' | translate\"\r\n          (keyup)=\"searchProducts(box.value); stateObj.tab === 2 ? searchProductsHidden(box.value) : '';\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n      <!-- Danh mục để tìm kiếm -->\r\n      <nz-select nzShowSearch nzBorderless [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\"\r\n        [(ngModel)]=\"stateObj.selectedValue\"\r\n        (ngModelChange)=\"searchByCategory($event); stateObj.tab === 2 ? searchByCategoryHidden($event) : '';\">\r\n        <nz-option *ngFor=\"let option of list_category\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\"></nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <!-- Danh sách nút -->\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <!-- Xuất dữ liệu -->\r\n      <div>\r\n        <!-- <button (click)=\"exportListService()\" class=\"btn-data\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export data'|translate}}\r\n        </button> -->\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\" class=\"btn-data\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export data' | translate}}</button>\r\n        <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n          <ul nz-menu>\r\n            <li nz-menu-item (click)=\"exportListService()\">{{'Export all service data' | translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListServiceByWork()\">{{'Export data of SERVICE CHARGE BY WORK' | translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListServiceByTime()\">{{'Export data of SERVICE CHARGE BY TIME' | translate}}</li>\r\n          </ul>\r\n        </nz-dropdown-menu>\r\n      </div>\r\n      <!-- Tạo dữ liệu -->\r\n      <div>\r\n        <button class=\"btn-data\" nz-button nzType=\"default\" (click)=\"gotoCreateDataService()\">\r\n          <i nz-icon nzType=\"appstore-add\" nzTheme=\"outline\"></i>\r\n          {{'Create data'|translate}}\r\n        </button>\r\n      </div>\r\n      <!-- Thêm -->\r\n      <div>\r\n        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAddService()\">\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n          {{'Add'|translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- -------------------------------------------------------------- Table -------------------------------------------------------------- -->\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"stateObj.tab\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <!-- Tab Cho bán -->\r\n      <nz-tab nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_service.length}}&nbsp; </span> {{'services' | translate}}\r\n        </div>\r\n\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #allowSale nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'|translate}}\"\r\n          [nzData]=\"list_show_service\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"12%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"25%\" (click)=\"name_col = !name_col; sortTable('name', 'allow')\">\r\n                <b>{{'Service name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\" (click)=\"unit_col = !unit_col; sortTable('unit', 'allow')\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"barcode_col = !barcode_col; sortTable('barcode', 'allow')\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"name_category_col = !name_category_col; sortTable('name_category', 'allow')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"type_col = !type_col; sortTable('type', 'allow')\">\r\n                <b>{{'_Type' | translate}}</b>\r\n                <i nz-icon [nzType]=\"type_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"20%\" nzAlign='right'\r\n                (click)=\"price_col = !price_col; sortTable('price', 'allow')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let data of allowSale.data\" style=\"cursor: pointer;\" (click)=\"gotoDetailService(data)\">\r\n              <td nzAlign='center' style=\"padding: 0;\"> <img style=\"width: 36px;\"\r\n                  onerror=\"this.src='./assets/icon/management/noimage.svg'\" src=\"{{data.img}}\"></td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td>{{ data.type !== VhType.SERVICETIME ? data.unit : (data.unit | translate) }}</td>\r\n              <td>{{ data.barcode }}</td>\r\n              <td>{{ data.name_category }}</td>\r\n              <td>{{(data.type === VhType.SERVICE ? 'Work' : 'Time') | translate}}</td>\r\n              <td class=\"money-right\">{{vhAlgorithm.vhcurrencyunit_symbol(data.units[0].price)}}</td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n\r\n\r\n      <!-- Tab Đã ẩn -->\r\n      <nz-tab [nzTitle]=\"'Hidden not allow sell' | translate\">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}}&nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_service_hidden.length}}&nbsp; </span> {{'services' | translate}}\r\n        </div>\r\n\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #serviceHidden nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'|translate}}\"\r\n          [nzData]=\"list_show_service_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"12%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"25%\" (click)=\"name_col = !name_col; sortTable('name', 'hidden')\">\r\n                <b>{{'Service name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\" (click)=\"unit_col = !unit_col; sortTable('unit', 'hidden')\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"barcode_col = !barcode_col; sortTable('barcode', 'hidden')\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"name_category_col = !name_category_col; sortTable('name_category', 'hidden')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"14%\"\r\n                (click)=\"type_col = !type_col; sortTable('type', 'hidden')\">\r\n                <b>{{'_Type' | translate}}</b>\r\n                <i nz-icon [nzType]=\"type_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"20%\" nzAlign='right'\r\n                (click)=\"price_col = !price_col; sortTable('price', 'hidden')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!serviceHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"9\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <tr *ngFor=\"let data of serviceHidden.data\" style=\"cursor: pointer;\" >\r\n              <td nzAlign='center' style=\"padding: 0;\"> <img style=\"width: 36px;\"\r\n                  onerror=\"this.src='./assets/icon/management/noimage.svg'\" src=\"{{data.img}}\"></td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td>{{ data.units[0].unit }}</td>\r\n              <td>{{ data.units[0].barcode }}</td>\r\n              <td>{{ data.name_category }}</td>\r\n              <td>{{(data.type === VhType.SERVICE ? 'Work' : 'Time') | translate}}</td>\r\n              <td class=\"money-right\">{{vhAlgorithm.vhcurrencyunit_symbol(data.units[0].price)}}</td>\r\n              <td class=\"money-right\">\r\n                <nz-switch  [(ngModel)]=\"data.delete_hidden\"\r\n                  (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                </nz-switch>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ServicesListComponent} from './services-list.component';\r\nimport { NgZorroAntModule} from '../../../../ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AddServiceComponent } from './add-service/add-service.component';\r\nimport { DetailServiceComponent } from './detail-service/detail-service.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CreateDataServiceComponent } from './create-data-service/create-data-service.component';\r\nimport { SpecialTimeComponent } from './special-time/special-time.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ServicesListComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component: AddServiceComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailServiceComponent\r\n  },\r\n  {\r\n    path: 'create-data-service',\r\n    component: CreateDataServiceComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ServicesListComponent,\r\n    AddServiceComponent,\r\n    DetailServiceComponent,\r\n    CreateDataServiceComponent,\r\n    SpecialTimeComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class ServicesListModule { }\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { AbstractControl, FormArray, FormControl, FormGroup, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { VhQueryCafe } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/cafe/components/vh-component/vh-component';\r\nimport { CleaveJsService } from 'src/app/cafe/services/cleave-js.service';\r\nimport { LanguageService } from 'src/app/cafe/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-special-time',\r\n  templateUrl: './special-time.component.html',\r\n  styleUrls: ['./special-time.component.scss']\r\n})\r\nexport class SpecialTimeComponent {\r\n  /** Dữ liệu edit, nếu không có thì sẽ là thêm mới */\r\n  @Input() data: any;\r\n  /** Mảng special_times để check xem có bị trùng hay không */\r\n  @Input() specialTimes: any;\r\n\r\n  /** Khi đóng modal */\r\n  @Output() onClose = new EventEmitter<any>();\r\n  /** Khi submit modal */\r\n  @Output() onOk = new EventEmitter<any>();\r\n\r\n  /** FormGroup của modal */\r\n  specialTimeForm: FormGroup;\r\n  /** Kiểu thời gian đặc biệt */\r\n  specialTimeType: 'day' | 'hour' = 'day';\r\n  /** Ngày trong tuần */\r\n  daysOfWeekList = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\r\n\r\n  /** Validator cho trường giá tiền */\r\n  PRICE_VALIDATOR = [\r\n    Validators.required,\r\n    Validators.pattern('(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'),\r\n  ];\r\n\r\n  management_product_price2: boolean = this.vhQueryCafe.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n\r\n\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQueryCafe: VhQueryCafe,\r\n    private cleaveJsService: CleaveJsService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    if(this.data) {\r\n      // Nếu có data thì sẽ lấy kiểu thời gian đặc biệt từ data\r\n      const fromMinute = this.data?.specific_time?.from_minute\r\n        ? this.data.specific_time.from_minute.getHours() * 60 + this.data.specific_time.from_minute.getMinutes()\r\n        : null;\r\n      const toMinute = this.data?.specific_time?.to_minute\r\n        ? this.data.specific_time.to_minute.getHours() * 60 + this.data.specific_time.to_minute.getMinutes()\r\n        : null;\r\n      this.specialTimeType = fromMinute === 0 && toMinute === 0 ? 'day' : 'hour';\r\n    }\r\n    this.initForm(this.data);\r\n    this.initDaysOfWeek();\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.cleaveJsService.createCleaves(['.special_time_price']);\r\n    if(this.management_product_price2) this.cleaveJsService.createCleaves(['.special_time_price2']);\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.cleaveJsService.destroyCleaves(['.special_time_price']);\r\n    if(this.management_product_price2) this.cleaveJsService.destroyCleaves(['.special_time_price2']);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo form\r\n   * @param data Dữ liệu để khởi tạo form nếu có thì sẽ set theo data, nếu không thì sẽ là mặc định như thêm mới\r\n   */\r\n  initForm(data?: any) {\r\n    this.specialTimeForm = new FormGroup({\r\n      price: new FormControl(\r\n        data?.price ?? 0,\r\n        Validators.compose(this.PRICE_VALIDATOR)\r\n      ),\r\n      price2: new FormControl(\r\n        data?.price2 ?? 0,\r\n        Validators.compose(this.PRICE_VALIDATOR)\r\n      ),\r\n      time_slot_name: new FormControl(data?.time_slot_name ?? null, Validators.required),\r\n      specific_time: new FormGroup({\r\n        from_minute: new FormControl(data?.specific_time?.from_minute && this.specialTimeType === 'hour' ? data?.specific_time?.from_minute : null),\r\n        to_minute: new FormControl(data?.specific_time?.to_minute && this.specialTimeType === 'hour' ? data?.specific_time?.to_minute : null),\r\n      }),\r\n      days_of_week: new FormArray([], atLeastOneCheckboxChecked),\r\n    });\r\n\r\n    // Nếu là Edit và là Khung giờ thì update validator cho các trường from_minute và to_minute\r\n    if(this.data && this.specialTimeType === 'hour') {\r\n      this.specialTimeForm.get('specific_time.from_minute').setValidators(Validators.required);\r\n      this.specialTimeForm.get('specific_time.to_minute').setValidators(\r\n        Validators.compose([\r\n          Validators.required,\r\n          timeRangeValidator(),\r\n        ])\r\n      );\r\n      this.specialTimeForm.get('specific_time.from_minute').updateValueAndValidity();\r\n      this.specialTimeForm.get('specific_time.to_minute').updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khởi tạo thêm checkbox cho các ngày trong tuần vào form\r\n   */\r\n  initDaysOfWeek() {\r\n    const daysOfWeekArray = this.specialTimeForm.get('days_of_week') as FormArray;\r\n    this.daysOfWeekList.forEach(day => {\r\n      daysOfWeekArray.push(new FormControl(this.data?.days_of_week?.includes(day) ?? false));\r\n    });\r\n  }\r\n  \r\n  \r\n  \r\n  /** Getters của days_of_week */\r\n  get daysOfWeekArray(): FormArray {\r\n    return this.specialTimeForm.get('days_of_week') as FormArray;\r\n  }\r\n\r\n  /** Lấy danh sách các ngày đã chọn dựa trên checkbox với giá trị true/false */\r\n  getSelectedDays(): string[] {\r\n    return this.daysOfWeekArray.value\r\n      .map((checked: boolean, index: number) => (checked ? this.daysOfWeekList[index] : null))\r\n      .filter(day => day !== null);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi giá trị của loại thời gian là day hay hour (Cả ngày hay Khung giờ) thì sẽ set lại các validator cho các trường\r\n   * @param event Kiểu thời gian đặc biệt\r\n   */\r\n  changeTimeType(event: 'day' | 'hour') {\r\n    if(event === 'day') {\r\n      this.specialTimeForm.get('specific_time').patchValue({\r\n        from_minute: null,\r\n        to_minute: null,\r\n      });\r\n      this.specialTimeForm.get('specific_time.from_minute').clearValidators();\r\n      this.specialTimeForm.get('specific_time.to_minute').clearValidators();\r\n    }\r\n    else {\r\n      this.specialTimeForm.get('specific_time.from_minute').setValidators(Validators.required);\r\n      this.specialTimeForm.get('specific_time.to_minute').setValidators(\r\n        Validators.compose([\r\n          Validators.required,\r\n          timeRangeValidator(),\r\n        ])\r\n      );\r\n    }\r\n    this.specialTimeForm.get('specific_time.from_minute').updateValueAndValidity();\r\n    this.specialTimeForm.get('specific_time.to_minute').updateValueAndValidity();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Kiểm tra xem khoảng thời gian đã chọn có bị trùng với các khoảng thời gian đã có hay không\r\n   * @param selectedDays Mảng các ngày đã chọn\r\n   * @param from_minute Số phút của from_minute\r\n   * @param to_minute Số phút của to_minute\r\n   * @returns true nếu không bị trùng, false nếu bị trùng\r\n   */\r\n  checkTimeRangeOverlap(selectedDays, from_minute, to_minute): boolean {\r\n    for (const item of this.specialTimes) {\r\n      if (this.data && this.data.index === this.specialTimes.indexOf(item)) {\r\n        // nếu là chính nó thì bỏ qua\r\n        continue;\r\n      }\r\n      const existingFromMinute = item.specific_time.from_minute;\r\n      const existingToMinute = item.specific_time.to_minute;\r\n      if (selectedDays.some(day => item.days_of_week.includes(day))) {\r\n        // nếu from >= existingFromMinute && from < existingToMinute\r\n        // hoặc to > existingFromMinute && to <= existingToMinute\r\n        // thì không hợp lệ\r\n        if ((from_minute >= existingFromMinute && from_minute < existingToMinute) || (to_minute > existingFromMinute && to_minute <= existingToMinute)) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi nhấn nút thêm\r\n   */\r\n  onSubmit() {\r\n    // Nếu form không hợp lệ\r\n    if(!this.specialTimeForm.valid) {\r\n      this.specialTimeForm.markAllAsTouched();\r\n      this.specialTimeForm.markAsDirty();\r\n      this.specialTimeForm.updateValueAndValidity();\r\n      this.vhComponent.showToast(\r\n        2000,\r\n        this.languageService.translate('Please enter all valid required information'),\r\n        'alert-toast'\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Tính toán from to và days_of_week\r\n    let fromMinute = 0;\r\n    let toMinute = 1440;\r\n    if (this.specialTimeType === 'hour') {\r\n      const fromTime: Date = this.specialTimeForm.get('specific_time.from_minute').value;\r\n      const toTime: Date = this.specialTimeForm.get('specific_time.to_minute').value;\r\n      fromMinute = fromTime.getHours() * 60 + fromTime.getMinutes();\r\n      toMinute = toTime.getHours() * 60 + toTime.getMinutes();\r\n    }\r\n    const selectedDays = this.getSelectedDays();\r\n\r\n    // Kiểm tra xem có khung giờ nào bị trùng hay không\r\n    const isTimeRangeValid = this.checkTimeRangeOverlap(selectedDays, fromMinute, toMinute);\r\n    if (!isTimeRangeValid) {\r\n      this.vhComponent.showToast(\r\n        2000,\r\n        this.languageService.translate('There is a time period overlapping with an existing time block'),\r\n        'alert-toast'\r\n      );\r\n      return;\r\n    }\r\n    else {\r\n      const data = {\r\n        ...this.specialTimeForm.value,\r\n        price: this.cleaveJsService.getRawValue('.special_time_price'),\r\n        price2: this.management_product_price2 ? this.cleaveJsService.getRawValue('.special_time_price2') : 0,\r\n        specific_time: {\r\n          from_minute: fromMinute,\r\n          to_minute: toMinute,\r\n        },\r\n        days_of_week: selectedDays,\r\n      };\r\n\r\n      // Nếu có data thì sẽ là edit\r\n      if(this.data) {\r\n        data.index = this.data.index;\r\n      }\r\n\r\n      this.onOk.emit(data);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * Validator để kiểm tra xem có ít nhất một checkbox được chọn hay không\r\n * @param control \r\n * @returns \r\n */\r\nfunction atLeastOneCheckboxChecked(control: AbstractControl): ValidationErrors | null {\r\n  if (control instanceof FormArray) {\r\n    const isChecked = control.controls.some((checkbox) => checkbox.value === true);\r\n    return isChecked ? null : { required: true }; // Trả về lỗi nếu không có checkbox nào được chọn\r\n  }\r\n  return null;\r\n}\r\n\r\n\r\n\r\n/**\r\n * Validator để đảm bảo rằng khoảng thời gian to_minute lớn hơn from_minute\r\n */\r\nexport function timeRangeValidator(): ValidatorFn {\r\n  return (control: AbstractControl): ValidationErrors | null => {\r\n    if (!control.parent) {\r\n      return null; // Nếu không có parent, không cần kiểm tra\r\n    }\r\n\r\n    const fromTime = control.parent.get('from_minute')?.value;\r\n    const toTime = control.value;\r\n\r\n    if (fromTime instanceof Date && toTime instanceof Date) {\r\n      const fromTotalMinutes = fromTime.getHours() * 3600 + fromTime.getMinutes() * 60;\r\n      const toTotalMinutes = toTime.getHours() * 3600 + toTime.getMinutes() * 60;\r\n      if (toTotalMinutes <= fromTotalMinutes) {\r\n        return { timeRangeInvalid: true }; // Validation error\r\n      }\r\n    }\r\n    return null; // Valid\r\n  };\r\n}\r\n","<nz-modal\r\n  (nzOnOk)=\"onSubmit()\"\r\n  (nzOnCancel)=\"onClose.emit()\" \r\n  [nzTitle]=\"((data ? 'Edit' : 'Add') + ' special time block') | translate\" \r\n  nzWidth=\"50vw\" \r\n  [nzMaskClosable]=\"false\"\r\n  [nzFooter]=\"modalFooterSpecialTime\"\r\n  [nzVisible]=\"true\">\r\n\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"specialTimeForm\">\r\n      <div nz-row>\r\n        <!-- Tên -->\r\n        <div nz-col nzSpan=\"12\">\r\n          <div><b>{{'Name' | translate}}*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"time_slot_name\">\r\n              <nz-input-group>\r\n                <input formControlName=\"time_slot_name\" nz-input [placeholder]=\"'Enter name' | translate\" required />\r\n                <ng-template #time_slot_name let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Name is required' | translate}}</ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Giá bán -->\r\n        <div nz-col nzSpan=\"6\">\r\n          <div><b>{{'Price' | translate}}*</b></div>\r\n          <nz-form-item nz-col nzSpan=\"24\">\r\n            <nz-form-control [nzErrorTip]=\"price\">\r\n              <nz-input-group>\r\n                <input formControlName=\"price\" class=\"special_time_price\" nz-input [placeholder]=\"0\" required />\r\n                <ng-template #price let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}</ng-container>\r\n                  <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}</ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Giá bán 2 -->\r\n        <div nz-col nzSpan=\"6\" *ngIf=\"management_product_price2\">\r\n          <div><b>{{'Price' | translate}} 2*</b></div>\r\n          <nz-form-item nz-col nzSpan=\"24\">\r\n            <nz-form-control [nzErrorTip]=\"price2\">\r\n              <nz-input-group>\r\n                <input formControlName=\"price2\" class=\"special_time_price2\" nz-input [placeholder]=\"0\" required />\r\n                <ng-template #price2 let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Price 2 is required' | translate}}</ng-container>\r\n                  <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price 2' | translate}}</ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <!-- Cả ngày hay Khung giờ -->\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 16px;\">\r\n          <nz-form-item>\r\n            <nz-form-control>\r\n              <nz-radio-group [(ngModel)]=\"specialTimeType\" (ngModelChange)=\"changeTimeType($event)\" [ngModelOptions]=\"{standalone: true}\">\r\n                <label nz-radio nzValue=\"day\">{{'Whole day' | translate}}</label>\r\n                <label nz-radio nzValue=\"hour\">{{'Time block' | translate}}</label>\r\n              </nz-radio-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <ng-container formGroupName=\"specific_time\">\r\n          <!-- Từ -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b>{{'From' | translate}}</b>{{specialTimeType === 'hour' ? '*' : ''}}</div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"from_minute\">\r\n                <nz-input-group>\r\n                  <nz-time-picker formControlName=\"from_minute\" nzFormat=\"HH:mm\" [nzMinuteStep]=\"5\" [nzDisabled]=\"specialTimeType === 'day'\"></nz-time-picker>\r\n                  <ng-template #from_minute let-control>\r\n                    <ng-container *ngIf=\"specialTimeType === 'hour' && control.hasError('required')\">{{'From time is required' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <!-- Đến -->\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b>{{'To' | translate}}{{specialTimeType === 'hour' ? '*' : ''}}</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"to_minute\">\r\n                <nz-input-group>\r\n                  <nz-time-picker formControlName=\"to_minute\" nzFormat=\"HH:mm\" [nzMinuteStep]=\"5\" [nzDisabled]=\"specialTimeType === 'day'\"></nz-time-picker>\r\n                  <ng-template #to_minute let-control>\r\n                    <ng-container *ngIf=\"specialTimeType === 'hour' && control.hasError('required')\">{{'To time is required' | translate}}</ng-container>\r\n                    <ng-container *ngIf=\"specialTimeType === 'hour' && control.hasError('timeRangeInvalid')\">{{'To time must be after From time' | translate}}</ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <!-- Thứ -->\r\n        <div nz-col nzSpan=\"24\" style=\"margin-top: 16px;\">\r\n          <div formArrayName=\"days_of_week\" nz-row nzJustify=\"space-between\">\r\n            <div class=\"item-main-sector\" *ngFor=\"let day of daysOfWeekArray.controls; let i = index\" nz-col nzSpan=\"3\">\r\n              <input type=\"checkbox\" [id]=\"'day-' + i\" [formControlName]=\"i\">\r\n              <label [for]=\"'day-' + i\">\r\n                <span>{{ ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'][i] | translate }}</span>\r\n              </label>\r\n            </div>\r\n            <div *ngIf=\"specialTimeForm.get('days_of_week').hasError('required') && specialTimeForm.get('days_of_week').touched\" class=\"ant-form-item-explain ant-form-item-explain-error\">\r\n              {{ 'At least one day must be selected' | translate }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n\r\n  <!-- Danh sách nút -->\r\n  <ng-template #modalFooterSpecialTime>\r\n    <!-- Hủy -->\r\n    <button (click)=\"onClose.emit()\" \r\n      nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\">{{'Cancel' | translate}}</button>\r\n    <!-- Lưu -->\r\n    <button (click)=\"onSubmit()\" \r\n      nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\">{{'Save' | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n","import { Injectable } from '@angular/core';\r\nimport Cleave from 'cleave.js';\r\n\r\n/**\r\n * Quản lý các cleavejs instances để tránh memory leak\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CleaveJsService {\r\n\r\n  private cleaveInstances: Map<string, Cleave> = new Map();\r\n\r\n\r\n\r\n  /**\r\n   * Tạo cleave instance với selector và options được chỉ định\r\n   * @param selector dùng để xác định element cần tạo cleave instance, sẽ được truyền vào `document.querySelector` \r\n   * @param options các options của `cleave.js`, mặc định nếu không truyền vào là `{ numeral: true, numeralThousandsGroupStyle: 'thousand' }`\r\n   */\r\n  createCleave(selector: string, options?: any): void {\r\n    // Kiểm tra xem có trên DOM không\r\n    if(!document.querySelector(selector)) {\r\n      return;\r\n    }\r\n    // Nếu đã tồn tại thì destroy\r\n    if (this.cleaveInstances.has(selector)) {\r\n      this.destroyCleave(selector);\r\n    }\r\n    // Tạo mới\r\n    const defaultOptions = {\r\n      numeral: true,\r\n      numeralThousandsGroupStyle: 'thousand'\r\n    };\r\n    const finalOptions = { ...defaultOptions, ...options };\r\n    this.cleaveInstances.set(selector, new Cleave(document.querySelector(selector), finalOptions));\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo cleave instance với selectors và options được chỉ định\r\n   * @param selectors dùng để xác định element cần tạo cleave instance, sẽ được truyền vào `document.querySelector`. VD: ['.input1', '.input2']\r\n   * @param options các options của `cleave.js`, mặc định nếu không truyền vào là `{ numeral: true, numeralThousandsGroupStyle: 'thousand' }`\r\n   */\r\n  createCleaves(selectors: any[], options?: any): void {\r\n    selectors?.forEach((selector) => {\r\n      // Kiểm tra xem có trên DOM không\r\n      if(!document.querySelector(selector)) {\r\n        // console.log(`CleaveJsService: Not found element with selector ${selector}`);\r\n        return;\r\n      }\r\n      // Nếu đã tồn tại thì destroy\r\n      if (this.cleaveInstances.has(selector)) {\r\n        this.destroyCleave(selector);\r\n      }\r\n      // Tạo mới\r\n      const defaultOptions = {\r\n        numeral: true,\r\n        numeralThousandsGroupStyle: 'thousand'\r\n      };\r\n      const finalOptions = { ...defaultOptions, ...options };\r\n      this.cleaveInstances.set(selector, new Cleave(document.querySelector(selector), finalOptions));\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lấy giá trị khi chưa qua xử lý. Nếu chưa có thì sẽ tự tạo mới\r\n   * @param selector dùng để xác định element cần lấy giá trị, sẽ được truyền vào `document.querySelector`\r\n   * @returns giá trị khi chưa qua xử lý\r\n   */\r\n  getRawValue(selector: string): any {\r\n    if (!this.cleaveInstances.has(selector)) {\r\n      this.createCleave(selector);\r\n    }\r\n    return this.cleaveInstances.get(selector).getRawValue();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Destroy cleave với selector được chỉ định\r\n   * @param selector dùng để xác định element cần destroy, sẽ được truyền vào `document.querySelector` \r\n   */\r\n  destroyCleave(selector: string) {\r\n    if (this.cleaveInstances.has(selector)) {\r\n      this.cleaveInstances.get(selector).destroy();\r\n      this.cleaveInstances.delete(selector);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Destroy danh sách cleave với mảng selector được chỉ định\r\n   * @param selector dùng để xác định các element cần destroy, sẽ được truyền vào `document.querySelector` \r\n   */\r\n  destroyCleaves(selectors: string[]) {\r\n    selectors?.forEach((selector) => {\r\n      if (this.cleaveInstances.has(selector)) {\r\n        this.cleaveInstances.get(selector).destroy();\r\n        this.cleaveInstances.delete(selector);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Destroy tất cả cleave instances\r\n   */\r\n  destroyAllCleave() {\r\n    this.cleaveInstances?.forEach((cleave) => {\r\n      cleave.destroy();\r\n    });\r\n    this.cleaveInstances.clear();\r\n  }\r\n\r\n}\r\n"],"names":["FormGroup","FormControl","Validators","VhType","i0","CreateDataServiceComponent","constructor","vhQueryCafe","vhAlgorithm","vhComponent","router","languageService","nzModalService","platform","vhQuery","getlocalProducts","filter","item","type","SERVICE","getlocalCategorys","translate","getCurrentNavigation","extras","state","dataRestore","required","pattern","_id","name","message","status_barcode","category","status_name","price","time_block","merge_block_price","merge_block_number","first_time_price","first_time_time_block","special_times","initForm","data","index","form","id","unit","getUnitMapping","_a","_b","_c","PRICE_VALIDATOR","barcode","_d","min","is_merge_block","undefined","is_first_time","is_special_times","_e","length","addControl","_f","number","_g","_h","_j","_k","_l","specialTimesValidator","checkModelChange","formData","forEach","status","checkNameAndBarcode","controls","setValue","id_form","checkDBName","localProduct","find","trim","toString","checkDBBarcode","checkName","checkBarcode","openFile","document","getElementById","click","openXLSXFile","events","target","files","file_import_is_servicetime","nameFile","slice","lastIndexOf","importXLSX","then","console","log","alertMessage","showLoading","push","hideLoading","catch","err","exportXLSXFile","XLSXData","row","Object","exportXLSX","_m","_o","_p","_q","_r","_s","downloadSampleFileServiceByWork","is","urlEn","urlVI","appLang","localStorage","getItem","window","open","downloadSampleFileServiceByTime","checkForm","i","invalid","createData","alertConfirm","res","createCategoriesAndProduct","dataCategory","Set","map","createdCategory","localCategory","some","cate","changeAlias","toLowerCase","categories","addCategorys","concat","Error","dataProduct","service","time_warning","img","id_category","tax","delete_hidden","SERVICETIME","units","parseFloat","price2","ratio","default","merge_block","first_time","split","entry","special_time","part","time_slot_name","specific_time","days_of_week","day","daysOfWeekMapping","toLocaleLowerCase","batchSize","addedProducts","batch","promises","product","addProducts","results","asyncPromiseAll","Math","floor","products","error","showLog","showToast","dataSuccess","createdError","phone","nzTitle","nzContent","goBack","navigate","stateObj","value","unitMapping","control","invalidFormat","specialTimeRanges","entries","parts","isNaN","timeParts","time","parseInt","days","every","from_minute","to_minute","currentEntry","j","otherEntry","includes","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}