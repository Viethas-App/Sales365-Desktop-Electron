{"version":3,"file":"src_app_sales_bill-web-app_sales-order_sales-order_module_ts.js","mappings":"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","sources":["./src/app/sales/bill-web-app/sales-order/add/add.component.ts","./src/app/sales/bill-web-app/sales-order/add/add.component.html","./src/app/sales/bill-web-app/sales-order/detail-invoice/detail-invoice.component.ts","./src/app/sales/bill-web-app/sales-order/detail-invoice/detail-invoice.component.html","./src/app/sales/bill-web-app/sales-order/sales-order.component.html","./src/app/sales/bill-web-app/sales-order/sales-order.component.ts","./src/app/sales/bill-web-app/sales-order/sales-order.module.ts"],"sourcesContent":["import { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, HostListener } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhDisplayLEDService, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhSaleDesktopInvoiceDetailCombo, VhSaleInvoiceDetailAdd, VhSaleInvoiceEdit } from 'src/app/sales/components/bill-type/bill-type-1/sales-desktop/sales-desktop-interface';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  root: any; // biến nhận state truyền qua\r\n  invoice: VhSaleInvoiceEdit;\r\n  invoice_detail: VhSaleInvoiceDetailAdd[] = []\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  public showBestSelling: any = this.vhAuth.localStorageGET(\"show_best_selling\");\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  customer: any;\r\n  checkPrinter: boolean = false;\r\n  closerBrower: any;\r\n  default_price_type: number\r\n  showModalChangePriceType: boolean = false;\r\n  // auto_select_lot : boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').auto_select_lot\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  warning_lot_expried: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried\r\n  discount_bill: number = 0;\r\n  percent_discount_bill: number = 0;\r\n  is_discount_bill: boolean = false;\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  customer_group: any = [];\r\n  showModalOtherDiscount: boolean = false;\r\n  id_branch = this.vhQuerySales.getDefaultBranch()._id\r\n  show_modal_select_lots_combo = false;\r\n  customer_online: any;\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private nzModalService: NzModalService,\r\n    private vhQuery: VhQuery,\r\n    private fncService: FunctionService,\r\n    private mess: NzMessageService,\r\n    private plaform: Platform,\r\n    private vhDisplayLEDService: VhDisplayLEDService\r\n  ) {\r\n    this.root = this.router.getCurrentNavigation().extras.state;\r\n    this.customer_online = this.root.customer;\r\n    this.product_codes = this.root.invoice.coupons\r\n    this.getDataInvoice(this.root.invoice);\r\n    \r\n\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n\r\n  private getDataInvoice(bill) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill_details_byId_bill(bill._id)\r\n      ]).then(([invoiceDetail]: any) => {\r\n        \r\n        if (!invoiceDetail.length)\r\n          this.init(bill, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(bill, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  init(invoice: VhSaleInvoiceEdit = null, invoiceDetail: VhSaleInvoiceDetailAdd[] = null) {\r\n    this.invoice = invoice;\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      // set nhân viên mặc định\r\n      this.invoice.id_employee = (this.vhAuth.getUser()._id)\r\n      this.invoice.date = new Date()\r\n      this.invoice.payment = (invoice.total)\r\n      this.note = this.invoice.note;\r\n      if (this.vhAuth.checkMyPermission('default_price_type_1')) this.default_price_type = 1;\r\n      else if (this.vhAuth.checkMyPermission('default_price_type_2')) this.default_price_type = 2;\r\n      this.invoice.price_type = (this.default_price_type)\r\n      this.pickerTime = new Date(this.invoice.date);\r\n      this.invoice.cash = 0\r\n      this.observableCheckBill(this.invoice._id);\r\n      //tính tổng tiền\r\n      let subTotal = 0;\r\n      for (let i of this.invoice_detail) {\r\n        let total_product_gift = 0;\r\n        let total_products = 0;\r\n        if (i.products_gift) {\r\n          total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n        }\r\n        else if (i.products) {\r\n\r\n          total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        }\r\n        subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n      }\r\n      this.subTotal = subTotal;\r\n      this.taxValue = this.invoice.total * (this.invoice.tax / 100);\r\n      this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0\r\n      this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n      // get các loại chương trình tích điểm\r\n      Promise.all([\r\n        this.vhQuerySales.getEarningPointsBills(),\r\n        this.vhQuerySales.getEarningPointsProducts(),\r\n      ])\r\n        .then(([earning_point_bills, earning_points_products]: any) => {\r\n          // this.list_earning_point_bills = this.vhQuerySales.getLocalAppSettingNameStation('sales_program').enable_sales_method_all_branch ? earning_point_bills.filter( item => item.id_branch == this.vhQuerySales.getDefaultBranch()._id) : earning_point_bills;\r\n          // this.list_earning_points_products =  this.vhQuerySales.getLocalAppSettingNameStation('sales_program').enable_sales_method_all_branch ? earning_points_products.filter( item => item.id_branch == this.vhQuerySales.getDefaultBranch()._id) : earning_points_products;\r\n          this.list_earning_point_bills = earning_point_bills\r\n          this.list_earning_points_products = earning_points_products\r\n          this.customer_group = this.vhQuerySales.getlocalCustomerClasss()\r\n          this.getClassAndProgram();\r\n          this.vhAlgorithm.waitingStack().then(() => {\r\n            this.discount_price = document.querySelector(\".discount-price\") ? this.vhAlgorithm.vhnumeral(\".discount-price\") : 0;\r\n            this.invoice_fee = document.querySelector(\".invoice-fee\") ? this.vhAlgorithm.vhnumeral(\".invoice-fee\") : 0\r\n          })\r\n        })\r\n    }\r\n  }\r\n  // sự kiện subscribe bill dc mở ở thiết bị khác\r\n  observableCheckBill(id_bill) {\r\n    this.vhQuerySales.observableSyncOpeningBill(id_bill, 36).subscribe((rsp: any) => {\r\n      this.vhQuerySales.closeSyncOpeningBill();\r\n      if (rsp.vcode === 0) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Hóa đơn này đang được cập nhật ở thiết bị khác!\"),\r\n          nzOkText: \"Thoát\",\r\n          nzOnOk: () => {\r\n            this.goBack();\r\n          },\r\n          nzCancelText: null,\r\n          nzOnCancel: () => {\r\n            this.goBack();\r\n          }\r\n        })\r\n      } else if (rsp.vcode === 1) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Hóa đơn này đã được thanh toán ở thiết bị khác!\"),\r\n          nzOkText: \"Thoát\",\r\n          nzOnOk: () => {\r\n            this.goBack();\r\n          },\r\n          nzCancelText: null,\r\n          nzOnCancel: () => {\r\n            this.goBack();\r\n          }\r\n        })\r\n      } else if (rsp.vcode === 2) {\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Hóa đơn đã bị xóa!\"))\r\n        this.goBack();\r\n      }\r\n    }, error => {\r\n      this.vhComponent.hideLoading(0).then(() => {\r\n        this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n      })\r\n    })\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n    if (this.invoice._id) this.vhQuerySales.closeSyncOpeningBill();\r\n  }\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n          case 112:\r\n            this.payInvoice(1, false);\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(1, true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // //sự kiện f5, close tab...\r\n    // this.closerBrower = (event: BeforeUnloadEvent) => {\r\n    //   (event || window.event).returnValue = 'Changes you made may not be saved';\r\n    //   return 'Changes you made may not be saved';\r\n    // }\r\n    // window.addEventListener('beforeunload', this.closerBrower)\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.id_tax = this.listTax.find(item => item.default)._id;\r\n\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n    if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n\r\n\r\n\r\n    \r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n  }\r\n  ngAfterViewChecked() {\r\n    // if (document.querySelector(\".ant-tabs-nav\") && document.querySelector(\".sales-best-selling\")) {\r\n    //   let height = document.querySelector(\".sales-best-selling\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - 20 + \"px\";\r\n    //   if (document.getElementById(\"carousel-product\")) document.getElementById(\"carousel-product\").style.height = height;\r\n    //   if (document.getElementById(\"carousel-service\")) document.getElementById(\"carousel-service\").style.height = height;\r\n    // }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình\r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee\r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n  getEarningBill() {\r\n    if (this.program_bill && this.subTotal > this.program_bill.bill_total_minimum) {\r\n      let subTotal = this.subTotal;\r\n      if (!this.program_bill.include_promotion_product) { // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion()\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal -= this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.subTotal;\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.discount - this.invoice.discount_bill\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.payment_points) subTotal = subTotal - this.invoice.payment_points\r\n        if (this.program_bill.include_fee) subTotal -= this.invoice.fee;\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.tax / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n  /**\r\n  * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n  * return : number\r\n  */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoice_detail.filter(item => !item.id_promotion).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoice_detail\r\n      .filter(item => item.price_origin == item.price && products_of_program_earnig_product.find(i => i == item.id_product || i == item.id_subproduct))\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct(products) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(this.program_product.products)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = products.filter(item => item.price_origin == item.price && this.program_product.products.find(i => i == item.id_product)).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n  earning_point: number = 0;\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point = this.getEarningProduct(this.invoice_detail) + this.getEarningBill();\r\n    return this.earning_point\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  // hàm xóa sp\r\n  deleteGoods(detail: VhSaleInvoiceDetailAdd) {\r\n    this.removeInvoiceDetail(detail.id_product);\r\n    this.setSubTotal()\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer();\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  deletePromotion() {\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQuerySales.destroyBillDetails_withPromotions(this.invoice_detail)\r\n      this.invoice_detail = bill_details\r\n      this.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true)\r\n    })\r\n\r\n  }\r\n  searchProductList: boolean = false;\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  closeSearchProductList(data) {\r\n    \r\n    if (data.manylot && !data.id_lotproduct) this.openModalChooseLot(data)\r\n    else {\r\n      if (data) {\r\n        if (data.combos && data.combos.filter(e => e.lots && !e.id_lotproduct).length) {\r\n          this.tempDetail = data;\r\n          this.show_modal_select_lots_combo = true;\r\n        }\r\n        else {\r\n          let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n          if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_sales)\r\n            this.addInvoiceDetail(\r\n              {\r\n                ...data,\r\n                price: price,\r\n                earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n              })\r\n          else this.addBill_Detail(\r\n            {\r\n              ...data,\r\n              price: price,\r\n              earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n            })\r\n        }\r\n        this.setSubTotal()\r\n      }\r\n\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n    }\r\n    \r\n    if (!data) this.searchProductList = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param data sản phảm dc chọn\r\n   */\r\n  checkProductHaveLots(data) {\r\n\r\n  }\r\n\r\n  getDiscountBillOfCustomer() {\r\n    this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.subTotal, this.invoice.id_customer).discount : 0;\r\n    this.invoice.discount_bill = (this.discount_bill)\r\n    this.setTotal()\r\n  }\r\n\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    this.showModalChangePriceType = false;\r\n    if (event != null) { // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      this.deletePromotion().then(() => {\r\n        if (this.invoice_detail.length) { // nếu có  length mơi update\r\n          let bill_details = this.invoice_detail\r\n          for (let i in bill_details) {\r\n            let price_update = 0;\r\n            let product = this.vhQuerySales.getlocalDetailProduct(bill_details[i].id_subproduct ? bill_details[i].id_subproduct : bill_details[i].id_product);\r\n            product = { ...product, ...this.vhQuerySales.getUnit_byRatio(product.units, bill_details[i].ratio) }\r\n            if (event == 1) {\r\n              price_update = product.price\r\n            }\r\n            else {\r\n              price_update = product.price2 ? product.price2 : product.price\r\n            }\r\n            bill_details[i].price = price_update;\r\n            bill_details[i].price_origin = price_update;\r\n          }\r\n          this.setSubTotal();;\r\n          if (this.is_discount_bill) {\r\n            setTimeout(() => {\r\n              this.getDiscountBillOfCustomer()\r\n            }, 200);\r\n          }\r\n          else {\r\n            this.invoice.discount_bill = (0);\r\n            this.discount_bill = 0;\r\n          }\r\n        }\r\n        this.invoice.price_type = (event)\r\n      })\r\n\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  goBack() {\r\n    if (!this.invoice_detail.length) {\r\n      this.isExit = true;\r\n      this.router.navigate([\"/bill-web-app/sales-order\"], {state : this.root})\r\n    }\r\n    else\r\n      this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the sales order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n        .then(() => { this.isExit = true; this.router.navigate([\"/bill-web-app/sales-order\"]) }, () => { })\r\n  }\r\n  checkQuantityProduct(product: VhSaleInvoiceDetailAdd, event) {\r\n    if (!event) product.quantity = 1;\r\n    else { product.quantity = product.quantity ? parseFloat(parseFloat(event).toFixed(2)) : 1; }\r\n    this.setSubTotal();\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer()\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.discount_bill = (0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n    this.setSubTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhSaleInvoiceDetailAdd;\r\n  openEditUnitPrice(detail: VhSaleInvoiceDetailAdd) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n\r\n      this.setSubTotal();;\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.discount_bill = (0);\r\n        this.discount_bill = 0;\r\n      }\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Invalid data, please check again\")) }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n\r\n  getDiscountMethodCustomer() {\r\n    let check = this.vhQuerySales.getlocalDiscount_bill(this.customer_class?.id_discount_bill)\r\n    if (check) {\r\n      this.is_discount_bill = true\r\n      this.getDiscountBillOfCustomer()\r\n      this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"This customer applies the discount calculation formula \") + check.name, 5000)\r\n    }\r\n    else {\r\n      this.is_discount_bill = false\r\n      this.invoice.discount_bill = (0)\r\n    }\r\n\r\n\r\n  }\r\n\r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   */\r\n  getClassAndProgram() {\r\n    this.customer = this.customer_online;\r\n    this.customer_class = this.customer_group.find(item => item._id == this.customer_online.id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(item => item._id == this.customer_class.id_earning_points_bill);\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(item => item._id == this.customer_class.id_earning_points_product);\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n    this.point_validity = this.customer_online.earned_points\r\n    this.getDiscountMethodCustomer()\r\n\r\n  }\r\n\r\n  // ----set delivery ------\r\n  closeAndReceiveDelivery(event) {\r\n    if (event) this.invoice.id_delivery = (event)\r\n    else this.invoice.id_delivery = ('');\r\n  }\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0]);\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.payment_type = (type)\r\n    switch (type) {\r\n      case 1: {\r\n        this.invoice.id_wallet = ('id_cash'); this.invoice.payment = (this.invoice.payment ? this.invoice.payment : null);\r\n\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.invoice.payment = (0); this.invoice.id_wallet = (null);\r\n        this.invoice.cash = (0);\r\n\r\n        break;\r\n      }\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.id_wallet = (id_wallet)\r\n          this.invoice.payment = (this.invoice.payment ? this.invoice.payment : null);\r\n\r\n          break;\r\n        }\r\n      }\r\n    };\r\n  }\r\n  isGotPromotion = false\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.date)\r\n      this.invoice.date = (new Date(this.pickerTime));\r\n    }\r\n    else this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.date = (event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.date = (new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n    if (this.isGotPromotion) this.getPromotions()\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  discount_price: any;\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0 && this.discount_price.getRawValue() <= this.subTotal) {\r\n      this.invoice.discount = (parseFloat(this.discount_price.getRawValue()));\r\n      this.percent_discount_bill = this.subTotal ? (this.invoice.discount / this.subTotal) * 100 : 0\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.discount;\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n  }\r\n\r\n  handleOkOtherDiscount() {\r\n    if (this.invoice.payment < this.invoice.payment_points + this.invoice.payment_coupons) this.invoice.payment = (0);\r\n    this.showModalOtherDiscount = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  value_discount_point: number = 0;\r\n  point_validity: number = 0;\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n\r\n      this.invoice.payment_points = ((value / this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoice.use_points = (value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n    else this.percent_discount_bill = value;\r\n    this.invoice.discount = this.subTotal * (this.percent_discount_bill / 100)\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  product_codes: any = [];\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQuerySales.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoice.payment_coupons += (product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoice.payment_coupons -= item.value\r\n  }\r\n  invoice_fee: any;\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.fee = (parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.fee;\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    this.setTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n\r\n  updateCash(cash: any) {\r\n    this.invoice.cash = (cash.replaceAll(',', ''))\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.payment_type != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.id_customer).debt_enable) {\r\n      this.vhComponent.showToast(5000,\r\n        this.languageService.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.getTotalATax()) {\r\n      this.invoice.payment = (parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n  payInvoice(bill_type: 1 = 1, print?) {\r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_payment\")) {\r\n      if (this.getTotalEarningPoint()) {\r\n        let earned_points = this.getTotalEarningPoint() - this.value_discount_point\r\n        this.vhQuerySales.updateCustomer_byEarnedPoints(this.invoice.id_customer, earned_points)\r\n        this.invoice.earning_points_bill = (this.getTotalEarningPoint())\r\n      }\r\n      if (print) {\r\n        if (this.checkPrinter) {\r\n          if (this.vhAuth.localStorageGET(\"show_confirm_pay\"))\r\n            this.nzModalService.confirm({\r\n              nzTitle: !print ? `${this.languageService.translate(\"Pay\")}?` : `${this.languageService.translate(\"Pay & Print\")}?`,\r\n              nzCancelText: this.languageService.translate(\"Cancel\"),\r\n              nzOkText: \"Ok\",\r\n              nzOnOk: () => {\r\n                this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n                  this.createOrUpdate(36).then((bill: any) => {\r\n\r\n                    let promise = new Array();\r\n                    for (let i = 0; i < this.product_codes.length; i++) {\r\n                      promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                    }\r\n                    this.vhQuery.asyncPromiseAll(promise)\r\n                      .then(() => {\r\n                        if (bill.bill_code) this.invoice.bill_code = (bill.bill_code)\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000,\r\n                            `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                          )\r\n                          this.handlePrint()\r\n                        })\r\n                      }, error => {\r\n                        this.vhComponent.hideLoading(0).then(() => {\r\n                          this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                        })\r\n                      })\r\n\r\n                  })\r\n                })\r\n              },\r\n              nzOnCancel: () => { },\r\n            })\r\n          else {\r\n            this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n              this.createOrUpdate(36).then((bill: any) => {\r\n\r\n                let promise = new Array();\r\n                for (let i = 0; i < this.product_codes.length; i++) {\r\n                  promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                }\r\n                this.vhQuery.asyncPromiseAll(promise)\r\n                  .then(() => {\r\n\r\n                    this.vhComponent.hideLoading(0).then(() => {\r\n                      this.vhComponent.showToast(5000,\r\n                        `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                      )\r\n                      this.handlePrint()\r\n                    })\r\n                  }, error => {\r\n                    this.vhComponent.hideLoading(0).then(() => {\r\n                      this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                    })\r\n                  })\r\n\r\n              })\r\n            })\r\n\r\n          }\r\n        }\r\n        else {\r\n          this.nzModalService.confirm({\r\n            nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n            nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n            nzIconType: \"info-circle\",\r\n            nzCancelText: null,\r\n            nzOnOk: () => { }\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        if (this.vhAuth.localStorageGET(\"show_confirm_pay\"))\r\n          this.nzModalService.confirm({\r\n            nzTitle: !print ? `${this.languageService.translate(\"Pay\")}?` : `${this.languageService.translate(\"Pay & Print\")}?`,\r\n            nzCancelText: this.languageService.translate(\"Cancel\"),\r\n            nzOkText: \"Ok\",\r\n            nzOnOk: () => {\r\n              this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n                this.createOrUpdate(36).then((bill: any) => {\r\n\r\n                  let promise = new Array();\r\n                  for (let i = 0; i < this.product_codes.length; i++) {\r\n                    promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n                  }\r\n                  this.vhQuery.asyncPromiseAll(promise)\r\n                    .then(() => {\r\n\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000,\r\n                          `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                        )\r\n                        this.handle()\r\n                      })\r\n                    }, error => {\r\n                      this.vhComponent.hideLoading(0).then(() => {\r\n                        this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                      })\r\n                    })\r\n\r\n                })\r\n              })\r\n            },\r\n            nzOnCancel: () => { },\r\n          })\r\n        else {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.createOrUpdate(36).then((bill: any) => {\r\n\r\n              let promise = new Array();\r\n              for (let i = 0; i < this.product_codes.length; i++) {\r\n                promise[i] = this.vhQuerySales.updateCouponCode(this.product_codes[i]._id, { status: 4, id_bill: bill._id, date_used: new Date(), id_customer_used: bill.id_customer })\r\n              }\r\n              this.vhQuery.asyncPromiseAll(promise)\r\n                .then(() => {\r\n\r\n                  this.vhComponent.hideLoading(0).then(() => {\r\n                    this.vhComponent.showToast(5000,\r\n                      `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                    )\r\n                    this.handle()\r\n                  })\r\n                }, error => {\r\n                  this.vhComponent.hideLoading(0).then(() => {\r\n                    this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n                  })\r\n                })\r\n\r\n            })\r\n          })\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n    else this.vhComponent.showToast(5000, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n\r\n\r\n  deleteInvoice() {\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        this.vhQuerySales.deleteBill_Billdetail(this.invoice._id)\r\n          .then((bool) => {\r\n            if (bool) {\r\n              this.vhComponent.hideLoading(0)\r\n              \r\n              this.goBack()\r\n            } else {\r\n              \r\n            }\r\n          }, (error: any) => {\r\n            \r\n          })\r\n      })\r\n\r\n  }\r\n  createOrUpdate(bill_type: 36) {\r\n    return new Promise(resolve => {\r\n      let invoice = { ...this.getCreateUpdateInvoice(36) }\r\n      this.vhQuerySales.updateBill_Billdetail(this.invoice._id, invoice, this.getCreateUpdateInvoiceDetail())\r\n        .then(() => {\r\n          this.root.invoiceToday = this.root.invoiceToday.filter(e => e._id == this.invoice._id)\r\n          resolve(this.vhQuerySales.saveBill_Billdetail(this.invoice._id, 1))\r\n        })\r\n    })\r\n\r\n\r\n  }\r\n\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(false)\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/bill-web-app/sales-order'])\r\n  }\r\n  handlePrint() {\r\n    this.invoice_detail.forEach(e => {\r\n      if (e.products_gift) e.products_gift = e.products_gift.filter(item => item.choose)\r\n    })\r\n\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: { ...printer, name: \"Sales\" }, invoice: this.invoice, invoice_detail: this.invoice_detail }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n\r\n    }, (err) => {\r\n      this.nzModalService.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => { this.handle() }\r\n      })\r\n    })\r\n  }\r\n  note: string;\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n\r\n\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.languageService.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện nhận barcode\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === \"/sales/bill-web-app/sales-order/add\" && !this.showModalOtherDiscount && !this.isVisibleEditUnitPrice) {\r\n      // if (!this.showSearchBar && !this.showPayInfo) {\r\n      if (_event.key == \"Enter\") {\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        // this.scanBarcode(this.barcode_array.join(\"\"));\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n          let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.barcode);\r\n          if (detailproduct) {\r\n            this.closeSearchProductList({ ...detailproduct, ...this.vhQuerySales.getUnit_byRatio(detailproduct.units, detailproduct.ratio) });\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Not found\"))\r\n          this.barcode_array = [];\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n  //tra cước phí\r\n  visibleCheckFees: boolean = false\r\n\r\n\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n      for (let i in this.product_gift_type7) {\r\n        // this.product_gift_type7[i].products_gift = this.product_gift_type7[i].products_gift.filter(item => item.choose).map(e => { return { ...e } })\r\n        if (this.product_gift_type7[i].products_gift.length) this.invoice_detail.push(this.product_gift_type7[i])\r\n      }\r\n    \r\n    this.gotten_gift_type7 = true;\r\n    this.setSubTotal();\r\n  }\r\n  /**\r\n   * hàm lấy quà\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        this.vhQuerySales.changeBillDetails_withPromotions(this.invoice_detail, this.invoice.date).then((bill_details_display: any) => {\r\n          \r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_0to6)\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_7)\r\n\r\n          this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC([...bill_details_display.bill_details_pmtype_7], 'total_bill_value')\r\n          this.isGotPromotion = true;\r\n          this.vhComponent.hideLoading(0)\r\n          this.invoice_detail = [...bill_details_display.bill_details_pmtype_0to6,]\r\n          // if (bill_details_display.filter(item => item.products_gift).length) this.showProductGift = true;\r\n          this.getEarningpointPromotion();\r\n\r\n          // this.product_gift_type7 = [...bill_details_display.bill_details_pmtype_7]\r\n          this.handlePromotionType7(this.bill_details_pmtype_7)\r\n          this.setSubTotal()\r\n\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    if (bill_details_pmtype_7.length)\r\n      if (bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax()) != -1)\r\n        this.product_gift_type7 = [bill_details_pmtype_7[bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.getTotalATax())]]\r\n      else this.product_gift_type7 = []\r\n    else this.product_gift_type7 = []\r\n    // \r\n\r\n  }\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(product.lots, 'date_exp')\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach(element => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(element.lots, 'date_exp')\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    for (let i of this.invoice_detail) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n        }\r\n      }\r\n      if (i.products) {\r\n        for (let product of i.products) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n        }\r\n      }\r\n      if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n    }\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (data.products_gift.filter(item => item.choose).length == data.promotions_maximum) return true;\r\n    else return false\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  handleChooseLot() {\r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.tempDetail.id_lotproduct)\r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.nzModalService.confirm({\r\n          nzTitle: this.languageService.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.tempDetail.lots = this.list_search_lot;\r\n            if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.tempDetail.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.tempDetail.lots = this.list_search_lot;\r\n        if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.tempDetail.lots = this.list_search_lot;\r\n      if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n\r\n  handleChooseLotCombo() {\r\n    if (this.tempDetail.combos.filter(item => item.lots && !item.id_lotproduct).length)\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Vui lòng chọn lô cho sản phẩm thuộc combo này\"))\r\n    else {\r\n      this.show_modal_select_lots_combo = false;\r\n      this.closeSearchProductList(this.tempDetail)\r\n    }\r\n  }\r\n\r\n\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n\r\n  removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal()\r\n    }\r\n  }\r\n\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      let total_product_gift = 0;\r\n      let total_products = 0;\r\n      if (i.products_gift) {\r\n        total_product_gift = i.products_gift.filter(item => item.choose).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n\r\n      }\r\n      else if (i.products) {\r\n\r\n        total_products = i.products.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n      }\r\n      subTotal += total_products + total_product_gift + (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.setTotal();\r\n  }\r\n\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee > 0 ? this.subTotal - this.invoice.discount - this.invoice.discount_bill - (this.invoice.payment_coupons + this.invoice.payment_points) + this.invoice.fee : 0\r\n    this.setTaxValue()\r\n    if (this.plaform && this.plaform.is('electron')) {\r\n      // this.vhDisplayLEDService.refreshLocalDisplayLEDs()\r\n      //     .then(() => {\r\n      \r\n\r\n      this.vhQuerySales.writeBill_BillDetails_toDisplayLEDScreens(\r\n        this.invoice, this.invoice_detail\r\n      )\r\n      // })\r\n\r\n    }\r\n  }\r\n\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n    this.setPayment()\r\n  }\r\n  setPayment(value?: number) {\r\n\r\n    if (this.invoice.payment_type == 2) {\r\n      this.invoice.payment = 0\r\n    } else {\r\n      if (value != null)\r\n        this.invoice.payment = value\r\n      else\r\n        this.invoice.payment = this.invoice.total + this.taxValue\r\n    }\r\n    this.setCash(this.invoice.cash);\r\n  }\r\n\r\n  setCash(value) {\r\n    if (this.invoice.payment_type == 2) this.invoice.cash = 0\r\n    else {\r\n      if (value) this.invoice.cash = parseFloat(value);\r\n      else this.invoice.cash = 0\r\n    }\r\n  }\r\n  getCreateUpdateInvoice(bill_type: 1 | 4 | 5 | 36 | null = null) {\r\n    if (bill_type) this.invoice.bill_type = (bill_type)\r\n    return this.invoice\r\n  }\r\n\r\n  getCreateUpdateInvoiceDetail(): VhSaleInvoiceDetailAdd[] {\r\n    return this.invoice_detail.map(item => {\r\n      if (!item.pmtype) {\r\n        let detail: VhSaleInvoiceDetailAdd = {\r\n          id_product: item.id_product,\r\n          ptype: item.ptype,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n          earning_points_product: item.earning_points_product,\r\n          ratio: item.ratio,\r\n        }\r\n        if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n        if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n        if (item.price < item.price_origin) detail['price_origin'] = item.price_origin\r\n        if (item.price == item.price_origin) detail['price_origin'] = item.price\r\n\r\n        if (item.ptype == 5) {\r\n          detail['combos'] = item.combos.map(combo => {\r\n            let product: VhSaleDesktopInvoiceDetailCombo = {\r\n              id_product: combo.id_product,\r\n              price: combo.price,\r\n              quantity: combo.quantity,\r\n              ptype: combo.ptype,\r\n              ratio: combo.ratio ? combo.ratio : 1,\r\n            }\r\n            if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n            if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n            return product;\r\n          })\r\n        }\r\n        return detail\r\n      }\r\n      else {\r\n        let detail: any = {\r\n          id_promotion: item.id_promotion,\r\n          pmtype: item.pmtype,\r\n        }\r\n        if (item.products_gift) {\r\n          if (item.products_gift.filter(ele => ele.choose).length) {\r\n            detail['products_gift'] = item.products_gift.filter(ele => ele.choose).map(e => {\r\n              let prod = {\r\n                id_product: e.id_product,\r\n                price: e.price,\r\n                price_origin: e.price_origin,\r\n                quantity: e.quantity,\r\n                ptype: e.ptype,\r\n                earning_points_product: e.earning_points_product,\r\n                ratio: e.ratio\r\n              }\r\n              if (e.ptype == 5) {\r\n                prod['combos'] = e.combos.map(combo => {\r\n                  let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                    id_product: combo.id_product,\r\n                    price: combo.price,\r\n                    quantity: combo.quantity,\r\n                    ptype: combo.ptype,\r\n                    ratio: combo.ratio ? combo.ratio : 1,\r\n                  }\r\n                  if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                  if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                  return product;\r\n                })\r\n              }\r\n              if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n              if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n              return prod\r\n            })\r\n            return detail\r\n          }\r\n        }\r\n        else {\r\n          detail['products'] = item.products.map(e => {\r\n            let prod = {\r\n              id_product: e.id_product,\r\n              price: e.price,\r\n              price_origin: e.price_origin,\r\n              quantity: e.quantity,\r\n              ptype: e.ptype,\r\n              earning_points_product: e.earning_points_product,\r\n              ratio: e.ratio\r\n            }\r\n            if (e.ptype == 5) {\r\n              prod['combos'] = e.combos.map(combo => {\r\n                let product: VhSaleDesktopInvoiceDetailCombo = {\r\n                  id_product: combo.id_product,\r\n                  price: combo.price,\r\n                  quantity: combo.quantity,\r\n                  ptype: combo.ptype,\r\n                  ratio: combo.ratio ? combo.ratio : 1,\r\n                }\r\n                if (combo.id_lotproduct) product['id_lotproduct'] = combo.id_lotproduct\r\n                if (combo.id_subproduct) product['id_subproduct'] = combo.id_subproduct\r\n                return product;\r\n              })\r\n            }\r\n            if (e.id_lotproduct) prod['id_lotproduct'] = e.id_lotproduct\r\n            if (e.id_subproduct) prod['id_subproduct'] = e.id_subproduct\r\n            return prod\r\n          })\r\n          return detail\r\n        }\r\n\r\n      }\r\n    }).filter(item => item)\r\n\r\n  }\r\n\r\n  addInvoiceDetail(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  addBill_Detail(value: any, new_price?: number) {\r\n    let detail: any = {\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      ptype: value.type,\r\n      unit: value.unit,\r\n      units: value.units ? value.units : [],\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      price: new_price != null ? new_price : value.price,\r\n      price2: value.price2,\r\n      price_origin: value.price,\r\n      earning_points_product: value.earning_points_product ? value.earning_points_product : 0,\r\n      percent_discount_product: 0\r\n    }\r\n\r\n    if (value.type == 5) {\r\n      detail['cbtype'] = 5;\r\n      detail['combos'] = [...value.combos.map(item => {\r\n        let product: VhSaleDesktopInvoiceDetailCombo = {\r\n          id_product: item.id_product,\r\n          name: item.name,\r\n          ptype: item.type,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n          unit: item.unit,\r\n          units: item.units,\r\n          ratio: item.ratio ? item.ratio : 1,\r\n          lots: item.lots ? item.lots : [],\r\n          id_lotproduct: item.id_lotproduct,\r\n        }\r\n        if (item.lots) product['lots'] = item.lots;\r\n        if (item.id_lotproduct) product['id_lotproduct'] = item.id_lotproduct;\r\n        if (item.id_subproduct) product['id_subproduct'] = item.id_subproduct;\r\n        return product;\r\n      })]\r\n    }\r\n    if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n    if (value.lots) detail['lots'] = value.lots;\r\n    if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n    this.invoice_detail.unshift(detail)\r\n\r\n    this.setSubTotal()\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n\r\n<nz-layout *ngIf=\"invoice\">\r\n    <div class=\"sales\" [ngClass]=\"showBestSelling ? 'show-best-selling':'hide-best-selling'\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Select product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"showModalChangePriceType = true\">\r\n                            {{'Choose selling price' | translate}}</button>\r\n                    </div>\r\n                    <div>\r\n                        <button style=\"width: 97%;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}</button>\r\n                    </div>\r\n                    <div *ngIf=\"invoice.bill_type == 5\">\r\n                        <button [disabled]=\"  !invoice_detail.length\" (click)=\"payInvoice(5)\"\r\n                            class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                            {{'Temporary' | translate}} (F3)</button>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n\r\n                <ng-container>\r\n                    <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail,index as i\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"24\">\r\n                                <ng-container [ngSwitch]=\"item.pmtype\">\r\n                                    <ng-container *ngSwitchCase=\"1\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\">\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"2\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"3\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"4\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"5\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"6\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGift = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <!-- <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" >\r\n                                                \r\n                                                {{getUnit(data.units,data.ratio)}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                 \r\n                                            </div>\r\n                                            <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\" style=\" margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div> -->\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                        <br>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"7\">\r\n                                        <div nz-row *ngIf=\"item.products_gift.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGiftType7 = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{getUnit(data.units,data.ratio)}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div nz-row>\r\n                                            <div nz-popconfirm\r\n                                                nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                                                (nzOnConfirm)=\"deleteGoods(item)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{item.name}}</p>\r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"item.combos\">\r\n                                                    <span *ngFor=\"let combo of item.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == item.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ' :\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        <ng-container *ngIf=\"combo.id_lotproduct\">\r\n                                                            <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                                (click)=\"openModalChooseLot(combo)\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre>\r\n                                                        </ng-container>\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                                    (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"1\"></nz-option> -->\r\n                                                    <nz-option *ngFor=\"let i of item.units\" [nzLabel]=\"i.unit\"\r\n                                                        [nzValue]=\"i.ratio\"></nz-option>\r\n                                                </nz-select>\r\n                                                <!-- {{item.unit}} -->\r\n                                            </div>\r\n                                            <div nz-col [nzSpan]=\" show_discount_product ? '2' : '4'\"\r\n                                                style=\"text-align: center;\">\r\n                                                <!-- {{item.quantity}} -->\r\n                                                <nz-input-number style=\"width:80%;\" [nzMax]=\"9999999999\" [nzMin]=\"0.1\"\r\n                                                    [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event )\" id=\"quantity\">\r\n                                                </nz-input-number>\r\n                                            </div>\r\n                                            <div class=\"invoiceDetail-item-quantity text-end \" nz-col nzSpan=\"4\"\r\n                                                style=\"padding-top:8px;\" (click)=\"openEditUnitPrice(item)\">\r\n                                                <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                                <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                    *ngIf=\"display_promotion_selling_price\">\r\n                                                    {{item.price_origin > item.price ?\r\n                                                    vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                                                </del>\r\n\r\n                                            </div>\r\n                                            <div *ngIf=\"show_discount_product\" nz-col nzSpan=\"2\"\r\n                                                style=\"text-align: center;align-self: center;padding-top:8px\">\r\n                                                <span style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;\">\r\n                                                    <span nz-icon nzType=\"arrow-down\" nzTheme=\"outline\"\r\n                                                        style=\"font-size: 0.7rem;\"></span> {{(item.price_origin >\r\n                                                    item.price ? ((1 - item.price/item.price_origin)*100) : 0) |\r\n                                                    number:'1.0-2'}}%\r\n                                                </span>\r\n                                                <!-- <nz-input-number style=\"width:80%;\" [nzMax]=\"100\" [nzMin]=\"0\"\r\n                                                [nzStep]=\"1\" [nzFormatter]=\"formatterPercent\"\r\n                                                [nzParser]=\"parserPercent\"\r\n                                                [(ngModel)]=\"item.percent_discount_product\"\r\n                                                (nzBlur)=\"changePercentDiscountBillDetail(item )\">\r\n                                            </nz-input-number> -->\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\"\r\n                                                style=\"border-bottom: 1px var(--ion-color-vh-gray) solid;text-align: end;align-self: center;padding-top:8px\">\r\n                                                <!-- <p class=\"max-width-two-line\"> -->\r\n                                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                                                <!-- </p> -->\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n            <div nz-row>\r\n                <div>\r\n                    <button nz-button nzType=\"primary\" (click)=\"getPromotions()\">\r\n                        <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Promotions' | translate}}</button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-best-selling\" *ngIf=\"showBestSelling\" style=\"padding: 0 8px;\">\r\n            <app-best-selling (chooseBestSelling)=\"closeSearchProductList($event)\"\r\n                [default_price_type]=\"default_price_type\">\r\n            </app-best-selling>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Sales date' | translate}}</b>\r\n                        <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless\r\n                            nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <div class=\"sales-bills-customer-title\">\r\n                    <b>{{'Customer information' | translate}}\r\n                    </b> \r\n                </div>\r\n                <div nz-col nzSpan=\"24\" style=\"margin: 8px 0;\">\r\n                    {{customer_online.name}} - {{customer_online.phone}} {{customer_online.address}}\r\n                </div>  \r\n                <div style=\"align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Delivery' | translate}} <i\r\n                            style=\"color: var(--ion-color-vh-green);cursor: pointer;margin-left: 4px;\" nz-tooltip\r\n                            nzTooltipPlacement=\"top\" [nzTooltipTitle]=\"'Check shipping fee'|translate\"\r\n                            *ngIf=\"invoice.id_delivery\" (click)=\"visibleCheckFees=true\" nz-icon nzType=\"file-search\"\r\n                            nzTheme=\"outline\"></i></b>\r\n                    <app-delivery [id_delivery]=\"invoice.id_delivery\"\r\n                        (closeAndReceiveDelivery)=\"closeAndReceiveDelivery($event)\"></app-delivery>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n                    <b>{{'Payment information' | translate}}</b>\r\n                    <span (click)=\"openModalOtherDiscount()\" style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        {{'Add other payment' |translate}}\r\n                    </span>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n\r\n                <ng-container *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n                    <div class=\"sales-bills-content-discount\"\r\n                        style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                        <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                        <div>\r\n                            <input id=\"percent-discount-price\" style=\"width: 50px;\" #percentDiscount type=\"number\"\r\n                                max=\"100\" min=\"0\" step=\"1\" (blur)=\"editPercentDiscount(percentDiscount.value)\"\r\n                                [ngModel]=\"percent_discount_bill | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                                nz-input />%\r\n                        </div>\r\n                        <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                            class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                            nz-input />\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <div *ngIf=\"discount_bill >0\" class=\"sales-bills-content-discount\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div style=\"width: auto;\">{{'Discount' | translate}}\r\n                    </div>\r\n                    <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}}</span>\r\n                </div>\r\n                <div *ngIf=\"invoice.payment_points\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Point payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}</div>\r\n                </div>\r\n                <div *ngIf=\"invoice.payment_coupons\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Coupon payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"border_bottom invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"7\" style=\"text-align: end;\">\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n                    <div>\r\n                        <b>{{'Pay' | translate}}</b>\r\n                        <ng-container *ngIf=\"product_gift_type7.length && !gotten_gift_type7\">\r\n                            <i style=\"font-size: 1rem;  margin-left: 8px; cursor: pointer;color: var(--ion-color-vh-green)\"\r\n                                nz-icon nzType=\"gift\" nzTheme=\"outline\" (click)=\"showProductGiftType7 = true\"></i>\r\n                        </ng-container>\r\n\r\n                    </div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit(invoice.payment)}}<img (click)=\"showModalEditTotalPay()\"\r\n                            *ngIf=\"invoice.payment_type != 2\" style=\"width: 16px;margin-left:10px\"\r\n                            src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n                </div>\r\n                <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                    <div>{{'Rest' | translate}}</div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit_symbol(getTotalATax() - invoice.payment)}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n                    <app-tax [payment_type]=\"invoice.payment_type\" [id_wallet]=\"invoice.id_wallet\"\r\n                        [id_customer]=\"invoice.id_customer\" (closeAndGetValuePayment)=\"closeAndGetValuePayment($event)\">\r\n                    </app-tax>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\"\r\n                    style=\"margin-top: 10px;\">\r\n                    <div>{{'cash' | translate}}</div>\r\n                    <input style=\"text-align: end;width: 35%;\" type=\"text\" #cash maxlength=\"15\" nz-input\r\n                        [disabled]=\"invoice.payment_type == 2\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.cash)\"\r\n                        class=\"customerPay border_bottom\" (keyup)=\"updateCash(cash.value)\" />\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n                    <div>{{'Change' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.cash - invoice.payment > 0 ? this.invoice.cash -\r\n                        invoice.payment : 0)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"payInvoice(1,true)\" nz-button\r\n                    class=\"order-and-print\">\r\n                    {{\"Save & Print\"|translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"payInvoice(1,false)\" nz-button class=\"order\">\r\n                    {{\"Save\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<!-- Search product -->\r\n<app-search-product [searchProductList]=\"searchProductList\" (closeSearchProductList)=\"closeSearchProductList($event)\"\r\n    [default_price_type]=\"default_price_type\">\r\n</app-search-product>\r\n\r\n<!--Modal edit unit price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'New unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\"\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(tempDetail.price)\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" (keyup.enter)=\"handleEditUnit()\"\r\n                    (blur)=\"getValueDiscount(tempDetail.price_origin);\" />\r\n            </div>\r\n\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\">\r\n            <div nz-col nzSpan=\"8\" style=\"align-self: center;\">{{'Discount value' | translate}}</div>\r\n            <div nz-col nzSpan=\"10\">\r\n                <input class=\"unit_price_discount\" type=\"text\" maxlength=\"15\" [value]=\"discount_price_bill_detail\"\r\n                    nz-input placeholder=\"{{'Enter unit price' | translate}}\"\r\n                    (blur)=\"caculateDiscountPrice_billDetail()\" />\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n                <button style=\"border-radius: 0px !important;width:44px;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount('%');\"\r\n                    [nzType]=\"default_discount_price_type == '%' ? 'primary' : 'default'\">%</button>\r\n                <button style=\"border-radius: 0px !important;\" nz-button nzSize=\"small\"\r\n                    (click)=\"changeValueDiscount(symbol);\"\r\n                    [nzType]=\"default_discount_price_type == symbol ? 'primary' : 'default'\">{{symbol}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!--Modal edit pay-->\r\n<nz-modal [(nzVisible)]=\"edit_pay\" [nzFooter]=\"modalFooterEditPay\" nzTitle=\"{{'Edit' | translate}}\"\r\n    (nzOnCancel)=\"handleCancelEditPay()\" (nzOnOk)=\"handleEditPay()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Pay' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice.payment)\" class=\"edit-pay\" type=\"text\" maxlength=\"15\"\r\n                    nz-input />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditPay>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditPay()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditPay()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal [(nzVisible)]=\"showModalOtherDiscount\" nzTitle=\"{{'Other payment' | translate}}\" nzWidth=\"50vw\"\r\n    (nzOnCancel)=\"showModalOtherDiscount = false\" nzCancelText=\"\" (nzOnOk)=\"handleOkOtherDiscount()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{\"Coupon\" | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n                <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\"\r\n                    (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n                <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                    (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.payment_coupons)}}\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\"></div>\r\n            <div nz-col nzSpan=\"18\">\r\n                <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                    (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n            <div nz-row class=\"center-all-content mt-8\">\r\n                <div nz-col nzSpan=\"6\">\r\n                    {{\"Accumulated points\" | translate}}\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                        nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                        (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n                </div>\r\n                <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                    {{vhAlgorithm.vhcurrencyunit(invoice.payment_points)}}\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"mt-8\">\r\n                <div nz-col nzSpan=\"14\">\r\n                    <label>{{\"Point conversion rate\" | translate}}:\r\n                        {{customer_class.payment.points}} Điểm =\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                    {{'Current accumulated points' | translate}} : {{point_validity }}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div nz-row class=\"mt-8 beetween-all-content\">\r\n            <b>{{'Total discount' | translate}}</b>\r\n            <b>{{vhAlgorithm.vhcurrencyunit(invoice.payment_points + invoice.payment_coupons)}}</b>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGift\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGift = false\" (nzOnOk)=\"showProductGift = false;getEarningpointPromotion()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"invoice_detail\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.pmtype == 6\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                                <span *ngFor=\"let data of item.products\">\r\n                                    {{data.name}}({{data.unit}}) x{{data.quantity}} <br>\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"5\">\r\n                                <b>{{ 'List of gifted products' | translate }} :</b>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n\r\n\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                            [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal nzWidth=\"70vw\" [(nzVisible)]=\"showProductGiftType7\" nzTitle=\"{{'Chọn quà tặng'}}\"\r\n    (nzOnCancel)=\"showProductGiftType7 = false\" (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <!-- <th>{{'Lot number' | translate}}</th> -->\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.products_gift\">\r\n                        <tr>\r\n                            <td colspan=\"5\"><b>{{ item.name }}</b> ({{'_Selected gift quantity' | translate}}: {{\r\n                                item.promotions_maximum }})</td>\r\n                        </tr>\r\n                        <ng-container *ngFor=\"let data of item.products_gift\">\r\n                            <tr>\r\n                                <td>\r\n                                    {{ data.name }}\r\n                                    <ng-container *ngIf=\"data.lots\">\r\n                                        <br> {{'Lot number' | translate}}:\r\n                                        <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                            [(ngModel)]=\"data.id_lotproduct\">\r\n                                            <nz-option *ngFor=\"let element of data.lots\"\r\n                                                nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                [nzValue]=\"element._id\"></nz-option>\r\n                                        </nz-select>\r\n                                    </ng-container>\r\n                                </td>\r\n\r\n                                <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                                <td>\r\n                                    <nz-input-number [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzMax]=\"data.quantity\">\r\n                                    </nz-input-number>\r\n                                </td>\r\n                                <td>\r\n                                    {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                    <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-switch [(ngModel)]=\"data.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                                </td>\r\n                            </tr>\r\n                            <ng-container *ngIf=\"data.ptype == 5\">\r\n                                <tr *ngFor=\"let combo of data.combos\">\r\n                                    <td>- {{ combo.name }}\r\n                                        <ng-container *ngIf=\"combo.lots\">\r\n                                            <br> {{'Lot number' | translate}}:\r\n                                            <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                                [(ngModel)]=\"combo.id_lotproduct\">\r\n                                                <nz-option *ngFor=\"let element of combo.lots\"\r\n                                                    nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp |date : 'dd/MM/yyyy'}}\"\r\n                                                    [nzValue]=\"element._id\"></nz-option>\r\n                                            </nz-select>\r\n                                        </ng-container>\r\n                                    </td>\r\n\r\n                                    <td>{{ getUnit(combo.units, combo.ratio) }}</td>\r\n                                    <td>{{ combo.quantity }}</td>\r\n                                    <td>\r\n                                        {{vhAlgorithm.vhcurrencyunit(combo.price) }}\r\n                                        <!-- <del>{{vhAlgorithm.vhcurrencyunit(combo.price_origin)}}</del> -->\r\n                                    </td>\r\n                                    <td>\r\n                                        <!-- <nz-switch [(ngModel)]=\"combo.choose\"\r\n                                        [nzDisabled]=\"checkDisableChooseProductGift(item) && !combo.choose\"></nz-switch> -->\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\"\r\n            style=\"width:100%;padding: 8px 0;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"6\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\" class=\"ion-text-end\">\r\n                                {{'Stock' | translate}}:\r\n                                <span\r\n                                    style=\" color: var(--ion-color-vh-orange)\">{{item.quantity_branch[id_branch]/tempDetail.ratio\r\n                                    | number : '1.0-2'}}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD cho combo-->\r\n<nz-modal nzWidth=\"70vw\" *ngIf=\"show_modal_select_lots_combo\" [nzFooter]=\"modalFooterEditUnitPrice3\"\r\n    [(nzVisible)]=\"show_modal_select_lots_combo\"\r\n    nzTitle=\"{{'Select lot number for products in combo' | translate}}: {{tempDetail.name}}\"\r\n    (nzOnCancel)=\"show_modal_select_lots_combo = false\" (nzOnOk)=\"handleChooseLotCombo()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"tempDetail.combos\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\">{{\"Product name\" | translate}}</th>\r\n                    <th nzWidth=\"30%\">{{'Lot number' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Unit' | translate}}</th>\r\n                    <th nzWidth=\"10%\">{{'Quantity' | translate}}</th>\r\n                    <th nzWidth=\"20%\" nzAlign=\"right\">{{'Unit price' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let data of basicTable.data\">\r\n                    <ng-container *ngIf=\"data.lots\">\r\n\r\n                        <tr>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\" style=\"width: 100%;\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"\r\n                                        nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date: 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_select_lots_combo = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLotCombo()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n \r\n\r\n<!-- đổi giá bán -->\r\n<app-change-price-type *ngIf=\"showModalChangePriceType\" [showModalChangePriceType]=\"showModalChangePriceType\"\r\n    (changePriceType)=\"changePriceType($event)\" [default_price_type]=\"default_price_type\"></app-change-price-type>\r\n\r\n<app-check-fees *ngIf=\"visibleCheckFees\" [visibleCheckFees]='visibleCheckFees' [id_delivery]=\"invoice.id_delivery\"\r\n    (hideModalCheckFees)=\"visibleCheckFees = $event\" [id_customer]=\"invoice.id_customer\">\r\n</app-check-fees>\r\n","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales, VhQuery } from 'ionic-vhframeworks';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoice, VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-invoice-detail',\r\n  templateUrl: './detail-invoice.component.html',\r\n  styleUrls: ['./detail-invoice.component.scss']\r\n})\r\nexport class DetailInvoiceComponent {\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhSaleInvoices\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  invoiceToday : any = this.router.getCurrentNavigation().extras.state.invoiceToday\r\n  constructor(\r\n    private router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modal: NzModalService,\r\n    private fncService: FunctionService\r\n  ) {\r\n    let bill = this.router.getCurrentNavigation().extras.state.bill\r\n    this.getDataInvoice(bill)\r\n    this.init()\r\n    \r\n    \r\n    this.invoiceInfo = { employee: {}, customer: bill.customer, paymentName: '' }\r\n  }\r\n\r\n  init(invoice: VhSaleInvoice = null, invoiceDetail: VhSaleInvoiceDetail[] = null) {\r\n    this.invoice = new VhSaleInvoices(invoice, invoiceDetail, this.vhQuerySales)\r\n    if (invoice && invoiceDetail) {\r\n      if (this.invoice.getIdDelivery()) this.invoiceInfo['delivery'] = (this.vhQuerySales.getlocalDelivery(this.invoice.getIdDelivery()).name)\r\n    } \r\n  }\r\n\r\n  private getDataInvoice(bill) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill_details_byId_bill(bill._id)\r\n      ]).then(([ invoiceDetail]: any) => {\r\n        \r\n        if (!invoiceDetail.length)\r\n          this.init(bill, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(bill, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice.getID()).then(() => {\r\n              if (this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).earning_point && this.invoice.getBillType() == 1) this.vhQuerySales.updateCustomer(this.invoice.getIdPartner(), { earning_point: this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).earning_point - this.invoice.getEarningPointBill() })\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.router.navigate(['/sales/sales-desktop'], { state: { isSync: true } })\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.getIdWallet()).name\r\n    }\r\n  }\r\n   \r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units,ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id){\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' +  this.fncService.formatDate(lot.date_exp)\r\n  } \r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  public goToCart() {\r\n    this.router.navigate(['/sales/bill-web-app/sales-order/add'], { \r\n      state: { \r\n        invoiceDetail: this.invoice.getInvoiceDetail(), \r\n        invoice: this.invoice.getCreateUpdateInvoice(),\r\n        customer : this.invoiceInfo.customer\r\n       } \r\n      })\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer) resolve(printer)\r\n      else rejects(false)\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    this.checkPrint().then((printer: any) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer.print_size_default), { printer: { ...printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)], name: \"Sales\" }, invoice: this.invoice }, false, false, `modal-print-${printer.print_size_default}`)\r\n    }, (err) => {\r\n      this.modal.confirm({\r\n        nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n        nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n        nzIconType: \"info-circle\",\r\n        nzCancelText: null,\r\n        nzOnOk: () => {}\r\n      });\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/bill-web-app/sales-order'], { state: { isSync: true,invoiceToday : this.invoiceToday } });\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('sales-invoice-detail-today') && document.querySelector(\".sales-cart-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('sales-invoice-detail-today').clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"sales-invoice-detail-today\">\r\n  <div class=\"sales\">\r\n    <div class=\"sales-cart\">\r\n      <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"12\" class=\"title\">\r\n          <b>{{'Sales order' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n          <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n            nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n            {{'Print' | translate}}\r\n          </button>\r\n          <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div>\r\n        <!-- <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n          <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div> -->\r\n      </div>\r\n      <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n        <div class=\"invoiceDetail-item\">\r\n          <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice.getInvoiceDetail()\" #rowSelectionTable\r\n            nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n            <thead>\r\n              <tr>\r\n                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <ng-container *ngFor=\"let item of rowSelectionTable.data\" >\r\n                <ng-container *ngIf=\"item.id_promotion\">\r\n                  <tr style=\"cursor: pointer;\">\r\n                    <td colspan=\"5\"><b>{{item.name}}</b></td>\r\n                  </tr>\r\n                  <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products\">\r\n                    <td><div>{{data.name}}</div> <br>\r\n                      <ng-container *ngIf=\"data.lots\">\r\n                        <pre>{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> <br>\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"data.combos\">\r\n                        <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">\r\n                          {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                          <ng-container *ngIf=\"combo.lots\">\r\n                            <pre style=\"font-size:0.7rem !important; \">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                          </ng-container>, \r\n                        </span>\r\n                      </ng-container>\r\n                    </td>\r\n                    <td nzAlign='center'>\r\n                      {{getUnit(data.units, data.ratio)}}\r\n                    </td>\r\n                    <td nzAlign='center'>{{data.quantity}}</td>\r\n                    <td nzAlign='right'>\r\n                      {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                      <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                        {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                      </del>\r\n                    </td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                  </tr>\r\n                  <tr style=\"cursor: pointer;\"  *ngFor=\"let data of item.products_gift\">\r\n                    <td>{{data.name}} <i>({{'Gift' | translate}})</i><br>\r\n                      <ng-container *ngIf=\"data.lots\">\r\n                        {{getLotNumber(data.lots, data.id_lotproduct)}} <br>\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"data.combos\">\r\n                        <span class=\"sub-name\"  *ngFor=\"let combo of data.combos\">{{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}}) \r\n                          <ng-container *ngIf=\"combo.lots\">\r\n                          <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                        </ng-container>,  </span>\r\n                      </ng-container>\r\n                    </td>\r\n                    <td nzAlign='center'>\r\n                      {{getUnit(data.units, data.ratio)}}\r\n                    </td>\r\n                    <td nzAlign='center'>{{data.quantity}}</td>\r\n                    <td nzAlign='right'>\r\n                      {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                      <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                        {{data.price_origin > data.price ? vhAlgorithm.vhcurrencyunit(data.price_origin) : ''}}\r\n                      </del>\r\n                    </td>\r\n                    <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(data.quantity * data.price)}}</b></td>\r\n                  </tr>\r\n                </ng-container>\r\n                \r\n                <tr style=\"cursor: pointer;\" *ngIf=\"!item.id_promotion\">\r\n                  <td><div>{{item.name}}</div>\r\n                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                      <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                    </ng-container>\r\n                     \r\n                    <ng-container *ngIf=\"item.combos\">\r\n                      <span class=\"sub-name\" *ngFor=\"let combo of item.combos\">\r\n                        {{combo.quantity}}x {{combo.name}} ({{getUnit(combo.units,combo.ratio)}})\r\n                        <ng-container *ngIf=\"combo.lots\">\r\n                          <pre style=\"font-size:0.7rem !important;\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                        </ng-container>,  </span>\r\n                    </ng-container>\r\n\r\n                  </td>\r\n                  <td nzAlign='center'>\r\n                    {{getUnit(item.units, item.ratio)}}\r\n                  </td>\r\n                  <td nzAlign='center'>{{item.quantity}}</td>\r\n                  <td nzAlign='right'>\r\n                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                      {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                    </del>\r\n                  </td>\r\n                  <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b></td>\r\n                </tr>\r\n              </ng-container>\r\n              \r\n              \r\n            </tbody>\r\n          </nz-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"sales-bills continue-sell\" >\r\n      <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n        <div>\r\n          <b>{{'Invoice code' | translate}}</b>\r\n          <div> {{invoice.getBillCode()}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Salesman' | translate}}</b>\r\n          <div>{{invoiceInfo.employee.name}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Sales date' | translate}}</b>\r\n          <div>{{invoice.getDate() | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Delivery' | translate}}</b>\r\n          <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n        <b>{{'Customer information' | translate}}</b>\r\n   \r\n        <div  nz-col nzSpan=\"24\">\r\n          {{invoiceInfo.customer.name | translate}} - {{invoiceInfo.customer.phone}}\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          {{renderAddress(invoiceInfo.customer)}}\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <!-- <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_discount_invoice') && invoice.getDiscountInvoice() >= 0\">\r\n          <div>{{'Discount' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountInvoice())}}</div>\r\n      </div> -->\r\n        <div nz-col nzSpan=\"24\">\r\n          <span>{{'SubTotal' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"invoice.getDiscountBill()\">\r\n          <span>{{'Discount' | translate}}\r\n          </span>\r\n\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n          <span>{{'Discount value' | translate}}\r\n          </span>\r\n          <span>{{(invoice.getDiscount()/invoice.getSubTotal())*100 || 0 | number :'1.0-2'}}%</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscount())}}</div>\r\n        </div>\r\n         \r\n        <div *ngIf=\"invoice.getDiscountPoint()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <div>{{'Point payment' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountPoint())}}</div>\r\n        </div>\r\n        <div *ngIf=\"invoice.getDiscountCoupon()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <div>{{'Coupon payment' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountCoupon())}}</div>\r\n        </div>\r\n\r\n        <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n          <span>{{'Fee' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getFee())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n          <span>{{'Tax' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhpercent(invoice.getTax()/100)}}</div>\r\n          <div>\r\n            {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <span>{{'Total' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n\r\n        </div>\r\n        <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n          <span>{{'Pay' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getPayment())}}</div>\r\n\r\n        </div>\r\n        <!-- <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n          <span>{{'Rest' | translate}}</span>\r\n          <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() -\r\n            invoice.getPayment())}}</div>\r\n        </div> -->\r\n        <!-- <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n          <span>{{'cash' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getCash() )}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n          <span>{{'Change' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getExcessCash() )}}</div>\r\n        </div> -->\r\n        <!-- <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n          <span>{{'Payment method' | translate}}</span>\r\n          <div>{{setPaymentName(this.invoice.getPaymentType())}}</div>\r\n        </div> -->\r\n        <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n          <span>{{'Note' | translate}}</span>\r\n          <div>{{invoice.getNote()}}</div>\r\n        </div>\r\n      </div>\r\n      <div nz-row class=\"sales-bills-button\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <button nz-button class=\"button payment-print\" (click)=\"goToCart()\">{{'Continue to sell...'\r\n            |translate}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>"," \r\n    <nz-layout id=\"sales-invoice-today\" >\r\n        <div class=\"sales-invoice-today-header\" style=\"padding: 8px;  background: white;\" nz-row>\r\n            <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n                <b>{{'Orders' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                    <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input placeholder=\"{{'Search for invoice code, customer name, payment, status,phone' | translate}}\" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconSearch>\r\n                    <i nz-icon nzType=\"search\"></i>\r\n                </ng-template>\r\n               \r\n            </div>\r\n            <div nz-col nzSpan=\"8\" class=\"right-all-content\" style=\"padding-right: 16px;\">\r\n                <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n                <button class=\" btn-add\"   nz-button nzType=\"default\" (click)=\"getInvoiceToday()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" >\r\n               <app-header-account-info></app-header-account-info>\r\n            </div>\r\n        </div>\r\n    \r\n        <div nz-row style=\"height: 100%; margin-top: 8px;\">\r\n            <div nz-col nzSpan=\"24\" style=\"padding: 0 160px;\">\r\n                <div nz-row *ngIf=\"!invoiceShow.length\" style=\"height: 100%;\">\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <p>{{'No invoice today' | translate}}</p>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"invoiceShow.length\" style=\"padding: 8px; background-color: white;height: 100%;border-radius: 5px;\">\r\n                    <div class='total-item'>{{'Total' |translate}}<span style=\"color:var(--ion-color-vh-red)\">\r\n                            {{invoiceShow.length}}\r\n                        </span>{{'invoices today' | translate}}\r\n                    </div>\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceShow\" #tableSales nzShowPagination [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" nzShowSizeChanger [nzNoResult]=\"noBill\" (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"dateCol = !dateCol;sortTable('date')\">\r\n                                    <b>{{'Date' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                                    <b>{{'Invoice code' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"14%\" nzAlign='left' (click)=\"partner_nameCol = !partner_nameCol;sortTable('partner_name')\">\r\n                                    <b>{{'Customer' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"partner_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                                <th nzWidth=\"15%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                                <th style=\"cursor: pointer;\" nzWidth=\"15%\" nzAlign='right' (click)=\"sum_priceCol = !sum_priceCol;sortTable('sum_price')\">\r\n                                    <b>{{'Total' | translate}}</b>\r\n                                    <i nz-icon [nzType]=\"sum_priceCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"goToDetail(invoice)\">\r\n                                <td nzAlign='left'>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                                <td nzAlign='left'>{{invoice.bill_code}} <i (click)=\"$event.stopPropagation();vhComponent.copyValue(invoice.bill_code)\" nz-icon nzType=\"copy\" nzTheme=\"outline\"></i></td>\r\n                                <td nzAlign='left'>{{(invoice.customer ? invoice.customer['name'] : 'Not found') | translate}} \r\n                                </td>\r\n                                \r\n                                <td nzAlign='left'>{{invoice.note}}</td> \r\n                                <td class=\"money-right\">\r\n                                    {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total*(1+invoice.tax/100))}}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                    <ng-template #noBill>\r\n                        <div class=\"pos-content-empty\">\r\n                            <div>\r\n                                <div>\r\n                                    <ion-icon style=\"font-size: 230px;\" src=\"assets/icon/pos/undraw_add_to_cart_vkjp.svg\">\r\n                                    </ion-icon>\r\n                                </div>\r\n                                {{'No data' | translate}}\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n    \r\n                </div>\r\n            </div> \r\n        </div>\r\n    </nz-layout>\r\n   \r\n    ","import { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, HostListener } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhDisplayLEDService, VhQuery, VhQuerySales } from 'ionic-vhframeworks'; \r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport {  VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service'; \r\nimport { Platform } from '@ionic/angular';\r\nimport { NzNotificationService } from 'ng-zorro-antd/notification';\r\n\r\n\r\n@Component({\r\n  selector: 'app-sales-order',\r\n  templateUrl: './sales-order.component.html',\r\n  styleUrls: ['./sales-order.component.scss']\r\n})\r\nexport class SalesOrderComponent implements OnInit {\r\n  useBranch: boolean = this.functionService.checkUsingBranch()\r\n  public searchValue: string = ''\r\n  public invoiceShow: any[] = []\r\n  public invoiceToday: any[];\r\n  tableHeight: string;\r\n  public date: Date[] = [new Date(), new Date()];\r\n\r\n  public invoiceInfo: any;\r\n  public invoice: VhSaleInvoices // bill được chọn để xem chi tiết\r\n\r\n  constructor(\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private notification: NzNotificationService,\r\n    private plaform: Platform,\r\n    private vhDisplayLEDService: VhDisplayLEDService,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    if(this.router.getCurrentNavigation().extras.state){\r\n      this.invoiceToday = this.router.getCurrentNavigation().extras.state.invoiceToday\r\n      this.invoiceShow =  this.invoiceToday \r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0, 0, 0, 0)).getTime() - new Date(event[0].setHours(0, 0, 0, 0)).getTime() <= this.fncService.checkDateReport() * 86000000) {\r\n      //this.getTransferList();\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" + this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n\r\n\r\n  getInvoiceToday() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, bill_type: { $in: [36] }, id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } }, {})\r\n        .then((invoice: any[]) => {\r\n          \r\n          let promise = new Array();\r\n          for (let i = 0; i < invoice.length; i++) {\r\n            promise[i] = this.vhQuerySales.getCustomer(invoice[i].id_customer)\r\n          }\r\n          this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n            this.invoiceToday = invoice.map((item,index) => { \r\n              return { ...item, customer: array[index],  sum_price: item.total * (1 + item.tax / 100),   }\r\n            })\r\n            this.searchBill(this.searchValue)\r\n          }, error => {  })\r\n          this.vhComponent.hideLoading(0);\r\n\r\n        })\r\n    })\r\n  }\r\n  searchBill(value: string) {\r\n    if (value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoiceToday, ['bill_code', 'partner_name', 'employee_name', 'payment_name', 'status', 'phone'])\r\n    } else this.invoiceShow = [...this.invoiceToday]\r\n    \r\n\r\n  }\r\n  /* -----Pagination----- */\r\n  onCurrentPageDataChange(value) {\r\n  }\r\n\r\n  goToDetail(bill) {\r\n    \r\n    \r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_view_bill_today\")) {\r\n      this.router.navigate([\"/bill-web-app/sales-order/add\"], { state: { invoice: bill, invoiceToday :  this.invoiceToday, customer : bill.customer } })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  goToCart() {\r\n\r\n    this.router.navigate(['/sales/sales-desktop/add'])\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-invoice-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-invoice-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-today-header\").clientHeight - 110 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  } \r\n\r\n  deleteBill() {\r\n    let bill: any = { ...this.invoice }\r\n    this.invoiceShow = this.invoiceShow.filter(item => item._id != bill._id)\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  partner_nameCol = false;\r\n  payment_nameCol = false;\r\n  name_employeeCol = false;\r\n  sum_priceCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'date':\r\n        if (this.dateCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if (this.bill_codeCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'partner_name':\r\n        if (this.partner_nameCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'payment_name':\r\n        if (this.payment_nameCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n\r\n      case 'sum_price':\r\n        if (this.sum_priceCol) {\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyASC([...this.invoiceShow], colName);\r\n        } else {\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { DetailInvoiceComponent } from './detail-invoice/detail-invoice.component';\r\nimport { SalesOrderComponent } from './sales-order.component'; \r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core'; \r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { SearchModule } from 'src/app/sales/components/search/search.module'; \r\nimport { HeaderAccountInfoModule } from '../header-account-info/header-account-info.module';\r\nimport { ComponentsModule } from '../components/components.module';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalesOrderComponent,\r\n  }, \r\n  {\r\n    path: 'add',\r\n    component: AddComponent,\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailInvoiceComponent,\r\n  }, \r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SalesOrderComponent,AddComponent,DetailInvoiceComponent\r\n\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule, \r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    SearchModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule,\r\n    HeaderAccountInfoModule\r\n  ]\r\n})\r\nexport class SalesOrderModule { }\r\n"],"names":["SalesA4Component","SalesA5Component","SalesK80Col4Component","SalesK80Col3Component","SalesK57Col3Component","i0","i_r224","item_r33","ctx_r28","ctx_r0","ctx_r1","ctx_r301","data_r319","ctx_r317","data_r348","ctx_r347","ctx_r11","ctx_r12","ctx_r13","AddComponent","constructor","router","vhComponent","languageService","vhQuerySales","vhAlgorithm","vhAuth","cdRef","nzModalService","vhQuery","fncService","mess","plaform","vhDisplayLEDService","getlocalTaxs","filter","tax","status","localStorageGET","Date","getLocalAppSettingNameBranch","display_promotion_selling_price","warning_lot_expried","getDefaultBranch","_id","root","getCurrentNavigation","extras","state","customer_online","customer","product_codes","invoice","coupons","getDataInvoice","ngOnInit","bill","showLoading","then","Promise","all","getBill_details_byId_bill","invoiceDetail","length","init","sortVietnamesebyASC","hideLoading","invoice_detail","id_employee","getUser","date","payment","total","note","checkMyPermission","default_price_type","price_type","pickerTime","cash","observableCheckBill","subTotal","i","total_product_gift","total_products","products_gift","item","choose","reduce","prev","next","quantity","price","products","taxValue","percent_discount_bill","discount","employee","getlocalEmployee","getEarningPointsBills","getEarningPointsProducts","earning_point_bills","earning_points_products","list_earning_point_bills","list_earning_points_products","customer_group","getlocalCustomerClasss","getClassAndProgram","waitingStack","discount_price","document","querySelector","vhnumeral","invoice_fee","id_bill","observableSyncOpeningBill","subscribe","rsp","closeSyncOpeningBill","vcode","confirm","nzTitle","translate","nzOkText","nzOnOk","goBack","nzCancelText","nzOnCancel","alertMessageDesktop","error","showToast","ngOnDestroy","removeEventListener","event","eventKeypress","keycode","keyCode","preventDefault","searchProductList","payInvoice","checkPrinter","addEventListener","ngAfterViewInit","id_tax","listTax","find","default","printer","getLocalPrintPage","print_sizes","findIndex","e","print_size_default","enable","ngAfterViewChecked","detectChanges","getEarningBill","program_bill","bill_total_minimum","include_promotion_product","getSubTotalNotPromotion","include_discount","discount_bill","include_paid_points","payment_points","include_fee","fee","include_tax","exchange","money","points","id_promotion","getSubTotalNotPromotionOFProduct","products_of_program_earnig_product","price_origin","id_product","id_subproduct","getEarningProduct","program_product","getTotalEarningPoint","earning_point","getTotalEarningPointProduct","product","promotion","deleteGoods","detail","removeInvoiceDetail","setSubTotal","is_discount_bill","setTimeout","getDiscountBillOfCustomer","gotten_gift_type7","handlePromotionType7","bill_details_pmtype_7","deletePromotion","resolve","bill_details","destroyBillDetails_withPromotions","product_gift_type7","openSearchProductList","closeSearchProductList","data","manylot","id_lotproduct","openModalChooseLot","combos","lots","tempDetail","show_modal_select_lots_combo","price2","show_product_mutil_line_sales","addInvoiceDetail","Object","earning_points_product","addBill_Detail","checkProductHaveLots","getDiscount_bill_byCustomer","id_customer","setTotal","changePriceType","showModalChangePriceType","price_update","getlocalDetailProduct","getUnit_byRatio","units","ratio","isExit","navigate","alertConfirm","checkQuantityProduct","parseFloat","toFixed","changeUnit","ev","unit","openEditUnitPrice","isVisibleEditUnitPrice","unit_price","handleEditUnit","getRawValue","handleCancelEditUnit","closeAndReceiveEmployee","getDiscountMethodCustomer","check","getlocalDiscount_bill","customer_class","_a","id_discount_bill","name","id_customer_class","id_earning_points_bill","id_earning_points_product","point_validity","earned_points","closeAndReceiveDelivery","id_delivery","closeAndGetValuePayment","setPaymentType","type","id_wallet","payment_type","setPickerTime","getTime","getStore","registrationdate","formatDate","getValidityDate","validitydate","isGotPromotion","getPromotions","changeTax","value","setTaxValue","editDiscount","getElementById","openModalOtherDiscount","showModalOtherDiscount","handleOkOtherDiscount","payment_coupons","calculatePoint2Money","value_discount_point","use_points","editPercentDiscount","getDiscountOfCoupon","code","getCoupon_Code_Name_Release_byCode","date_expire","push","getElementsByTagName","onCloseProductCode","splice","editFee","updateCash","replaceAll","showModalEditTotalPay","getlocalCustomer","debt_enable","edit_paytotal","edit_pay","handleEditPay","getTotalATax","handleCancelEditPay","bill_type","print","updateCustomer_byEarnedPoints","earning_points_bill","createOrUpdate","promise","Array","updateCouponCode","date_used","id_customer_used","asyncPromiseAll","bill_code","handlePrint","nzContent","nzIconType","handle","deleteInvoice","deleteBill_Billdetail","bool","getCreateUpdateInvoice","updateBill_Billdetail","getCreateUpdateInvoiceDetail","invoiceToday","saveBill_Billdetail","checkPrint","rejects","renderPrintPage","forEach","showModal","modal","onWillDismiss","err","edit_note","checkDeactivate","currentRoute","currentState","nextState","url","catch","getKeyUp","_event","key","barcode_array","index","toUpperCase","barcode","join","detailproduct","getlocalDetailProduct_byBarcode","handleAddGiftType7","showProductGiftType7","changeBillDetails_withPromotions","bill_details_display","handleChooseLotForPromotion","bill_details_pmtype_0to6","sortNumberbyASC","getEarningpointPromotion","findLastIndex","total_bill_value","min_date_exp","sortDatebyASC","lot_number","element","checkDisableChooseProductGift","promotions_maximum","getUnit","getLotNumber","lot","searchLot","searchList","changeAlias","list_search_lot","show_modal_select_lots","changeLot","handleChooseLot","lot_select","date_exp","handleCancelChooseLot","handleChooseLotCombo","id","notSetSub","is","writeBill_BillDetails_toDisplayLEDScreens","setPayment","setCash","map","pmtype","ptype","combo","ele","prod","new_price","percent_discount_product","unshift","selectors","hostBindings","ctx","_r3","$event","ctx_r14","ctx_r15","ctx_r16","ctx_r17","ctx_r3","_r6","SalesOrderComponent","functionService","notification","checkUsingBranch","setHours","invoiceShow","changeTime","checkDateReport","getInvoiceToday","getBills_byFields","$gte","$lte","$in","id_branch","$eq","getCustomer","array","sum_price","searchBill","searchValue","val","trim","toLowerCase","onCurrentPageDataChange","goToDetail","goToCart","renderAddress","partner","address","district","province","country","tableHeight","clientHeight","deleteBill","sortTable","colName","dateCol","sortDatebyDESC","bill_codeCol","sortVietnamesebyDESC","partner_nameCol","payment_nameCol","sum_priceCol","sortNumberbyDESC","decls","vars","consts","template"],"sourceRoot":"webpack:///"}