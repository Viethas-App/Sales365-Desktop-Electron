{"version":3,"file":"src_app_sales_menu_developers_history-payment_history-payment_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,MAAM,uBAAuB;IAUlC,YACU,YAA0B,EAC1B,KAAwB,EACxB,MAAc,EACf,WAAwB,EACvB,MAAa;QAJb,iBAAY,GAAZ,YAAY,CAAc;QAC1B,UAAK,GAAL,KAAK,CAAmB;QACxB,WAAM,GAAN,MAAM,CAAQ;QACf,gBAAW,GAAX,WAAW,CAAa;QACvB,WAAM,GAAN,MAAM,CAAO;QAdvB,gBAAW,GAAG;YACZ,cAAc,EAAE,YAAY,EAAE,cAAc;SAC7C;QACD,eAAU,GAAU,EAAE,CAAC;QACvB,iBAAY,GAAU,EAAE,CAAC;QACzB,qBAAgB,GAAU,EAAE,CAAC;QAC7B,cAAS,GAAG,CAAC;QACb,oBAAe,GAAQ,CAAC;QACxB,gBAAW,GAAW,EAAE;QAQrB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/H,CAAC;IAEF,QAAQ;QACN,qGAAqG;QACrG,sCAAsC;QACtC,4IAA4I;QAC5I,uCAAuC;QACvC,6EAA6E;QAC7E,kCAAkC;QAClC,WAAW;QACX,QAAQ;QACR,kFAAkF;QAElF,2FAA2F;QAC3F,OAAO;IACT,CAAC;IAED,UAAU,CAAC,CAAC;QACV,IAAI,CAAC,SAAS,GAAG,CAAC;QAClB,QAAQ,CAAC,EAAE;YACT,KAAK,CAAC,CAAC,CAAC;gBACN,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,eAAe;gBACpG,MAAM;aACP;YACD,KAAK,CAAC,CAAC,CAAC;gBACN,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAa;gBAC7E,MAAM;aACP;YACD,KAAK,CAAC,CAAC,CAAC;gBACN,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAe;gBACpG,MAAM;aACP;SACF;IACH,CAAC;IAED,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,EAAE;YACtI,IAAI,CAAC,WAAW,GAAI,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,YAAY;kBACtE,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC;SAC/H;QACH,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;;8FA3DU,uBAAuB;qHAAvB,uBAAuB;QCTpC,+EAAkC;QAC9B,yEAAY;QACR,yEAAiD;QAC7C,+EAAqG;QAArD,wNAAoD;QAiDhG,4EAA0B;QACtB,4EAA2F;QAC/F,4DAAS;QACb,4DAAY;QAChB,4DAAM;QACV,4DAAM;QACV,4DAAY;;QAvDW,0DAAmC;QAAnC,gGAAmC;QAkDzB,0DAA2B;QAA3B,wFAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDb;AACuB;AAChB;AACS;AACR;AACL;AACa;AACX;AACuC;;;AAG3F,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+EAAuB;KACnC;IACD;QACE,IAAI,EAAC,QAAQ;QACb,SAAS,EAAE,oGAAsB;KAClC;CACF;AAmBM,MAAM,oBAAoB;;wFAApB,oBAAoB;iHAApB,oBAAoB;qHATtB;YACP,yDAAY;YACZ,gEAAe;YACf,yEAAgB;YAChB,kEAAqB,CAAC,MAAM,CAAC;YAC7B,4DAAY;YACZ,8DAAa;SACd;mIAEU,oBAAoB,mBAd7B,+EAAuB;QAEvB,wEAAgB;QAChB,oGAAsB,aAGtB,yDAAY;QACZ,gEAAe;QACf,yEAAgB,6DAEhB,4DAAY;QACZ,8DAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IEhBG,wEAA0D;IACtD,qEAAI;IACA,yEAAsC;IAAA,oEAAG;IAAA,uDAAqB;IAAA,4DAAI;IAAA,4DAAK;IACvE,yEAAqC;IAAA,uDAAsB;IAAA,4DAAK;IAChE,yEAAuB;IACnB,sEAAK;IACD,uEAAM;IAAA,wDAAsC;IAAA,4DAAO;IACvD,4DAAM;IACV,4DAAK;IACL,0EAAuC;IAAA,wDAA2C;IAAA,4DAAK;IACvF,0EAAwB;IACpB,uEAAK;IACD,wEAAM;IAAA,wDAAkB;IAAA,4DAAO;IACnC,4DAAM;IACV,4DAAK;IACL,0EAAuC;IAAA,qEAAG;IAAA,wDACmB;IAAA,4DAAI;IAAA,4DAAK;IAC1E,4DAAK;IAET,qEAAe;;;;IAjBkC,0DAAqB;IAArB,qFAAqB;IACzB,0DAAsB;IAAtB,2FAAsB;IAG7C,0DAAsC;IAAtC,4GAAsC;IAGb,0DAA2C;IAA3C,iHAA2C;IAGpE,0DAAkB;IAAlB,iFAAkB;IAGU,0DACmB;IADnB,oIACmB;;;IA7BjF,yEAA+E;IAC3E,kFAA6F;IACzF,wEAAO;IACH,qEAAI;IACA,yEAAsC;IAAA,oEAAG;IAAA,uDAAgC;;IAAA,4DAAI;IAAA,4DAAK;IAClF,yEAA0C;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IAChF,0EAA0C;IAAA,qEAAG;IAAA,wDAA+B;;IAAA,4DAAI;IAAA,4DAAK;IACrF,0EAA0C;IAAA,qEAAG;IAAA,wDAA2B;;IAAA,4DAAI;IAAA,4DAAK;IACjF,0EAA0C;IAAA,qEAAG;IAAA,wDAAyB;;IAAA,4DAAI;IAAA,4DAAK;IAC/E,0EAA0C;IAAA,qEAAG;IAAA,wDAA6B;;IAAA,4DAAI;IAAA,4DAAK;IACvF,4DAAK;IACT,4DAAQ;IACR,yEAAO;IACH,+IAmBe;IACnB,4DAAQ;IACZ,4DAAW;IACf,4DAAM;;;;IAlCQ,0DAAqB;IAArB,qFAAqB;IAGsB,0DAAgC;IAAhC,oJAAgC;IAC5B,0DAA0B;IAA1B,+IAA0B;IAC1B,0DAA+B;IAA/B,oJAA+B;IAC/B,0DAA2B;IAA3B,gJAA2B;IAC3B,0DAAyB;IAAzB,8IAAyB;IACzB,0DAA6B;IAA7B,kJAA6B;IAI/C,0DAAa;IAAb,6EAAa;;;IAwBpD,0EAA+E;IAC3E,uEAAM;IAAA,wEAA2B;IAAA,uDAAY;IAAA,4DAAI;IACrD,4DAAM;;;IAD+B,0DAAY;IAAZ,gFAAY;;;IAEjD,0EAA+E;IAC3E,iFAAW;IAAA,wEAA4C;IAAC,uDAAiD;IAAA,4DAAI;IACjH,4DAAM;;;IADsD,0DAAiD;IAAjD,sIAAiD;;ADxClH,MAAM,sBAAsB;IAIjC,YACS,MAAc,EACd,YAA0B,EAC1B,WAAuB;QAFvB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAY;QAG9B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;IAC7D,CAAC;IAEF,QAAQ;QACN,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE;IAEvD,CAAC;IACD,iBAAiB;QACf,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,EAAC,UAAU,EAAC,EAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAC,EAAC,EAAE,EAAE,EAAC,EAAE,EAAC,CAAC,CAAC;aAC/E,IAAI,CAAC,CAAC,eAAoB,EAAC,EAAE;YAC5B,IAAI,CAAC,UAAU,GAAI,eAAe;YAClC,KAAK,IAAI,CAAC,IAAI,eAAe,EAAE;gBAC7B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;oBAC5E,eAAe,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;gBACpD,CAAC,CAAC;aACH;QACH,CAAC,CAAC;IACJ,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,6CAA6C,CAAC,EAAC,EAAE,KAAK,EAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAC,CAAC,CAAC;IAC7G,CAAC;IAED,kBAAkB,CAAC,eAAe;QAChC,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAChC,IAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,EAAC;gBACvC,MAAM,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;gBACnF,OAAO,CAAC,WAAW,CAAC,GAAG,MAAM,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;aACrB;QACH,CAAC,CAAC,CAAC;QACH,OAAO,MAAM,CAAC;IAChB,CAAC;IAGD,qEAAqE;IACrE,YAAY,CAAC,UAAiB;QAC5B,IAAI,GAAG,GAAI,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnC,QAAO,GAAG,EAAC;YACT,KAAK,MAAM,CAAC;gBACV,OAAO,IAAI,CAAC;gBAAC,MAAM;aACpB;YACD,OAAO,CAAC;gBACN,OAAO,KAAK,CAAC;gBAAA,MAAM;aACpB;SACF;IACH,CAAC;IAEA,oBAAoB;IACpB,iBAAiB,CAAC,SAAS;QAC1B,IAAI,IAAI,CAAC;QACT,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAChC,IAAG,OAAO,CAAC,GAAG,IAAI,SAAS,EAAC;gBAC1B,IAAI,GAAI,OAAO,CAAC,IAAI;aACrB;QACH,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;;4FApEU,sBAAsB;oHAAtB,sBAAsB;QCTnC,yEAA4D;QAAnB,2IAAS,YAAQ,IAAC;QACvD,kEAA+C;QAAA,uDACnD;;QAAA,4DAAM;QACN,+EAAwB;QACpB,yEAAkC;QAC9B,yEAAmE;QAC/D,oEAAG;QAAA,uDAAmC;;QAAA,4DAAI;QAC9C,4DAAM;QACN,sHAmCM;QACN,0EAAqB;QACjB,oHAEM;QACN,oHAEM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAY;;QApDuC,0DACnD;QADmD,mJACnD;QAIe,0DAAmC;QAAnC,qJAAmC;QAEmB,0DAAgB;QAAhB,gFAAgB;QAqCZ,0DAAgB;QAAhB,gFAAgB;QAGhB,0DAAgB;QAAhB,gFAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IEhCjF,wEAAgF;IAA3B,mXAA0B;IAC3E,qEAAI;IAAA,oEAAG;IAAA,uDAAU;IAAA,4DAAI;IAAA,4DAAK;IAC1B,qEAAI;IAAA,oEAAG;IAAA,uDAAqB;IAAA,4DAAI;IAAA,4DAAK;IACrC,qEAAI;IAAA,uDAAwC;;IAAA,4DAAK;IACjD,sEAAI;IAAA,wDAAqB;IAAA,4DAAK;IAC9B,yEAAoB;IAAA,qEAAG;IAAA,wDAA2C;IAAA,4DAAI;IAAA,4DAAK;IAO/E,4DAAK;;;;;IAXM,0DAAU;IAAV,yEAAU;IACV,0DAAqB;IAArB,qFAAqB;IACxB,0DAAwC;IAAxC,kKAAwC;IACxC,0DAAqB;IAArB,qFAAqB;IACF,0DAA2C;IAA3C,iHAA2C;;;;ADZvE,MAAM,gBAAgB;IAK3B,YACS,MAAc,EACd,YAA0B,EAC1B,MAAc,EACd,WAAwB;QAHxB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QAR1B,gBAAW,GAAS,EAAE,CAAC;IAS1B,CAAC;IAGL,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAC,YAAY,EAAC,EAAC,GAAG,EAAE,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAC,EAAC,EAAE,EAAC,EAAE,EAAC,CAAC,CAAC;aACrE,IAAI,CAAC,CAAC,QAAa,EAAC,EAAE;YACrB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;gBAE3E,uCACK,CAAC,KACJ,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,YAAY,CAAC,IAElD;YACH,CAAC,CAAC;QAGJ,CAAC,CAAC;IACJ,CAAC;IAED;;;;OAIG;IACH,cAAc,CAAC,IAAI;QACjB,QAAQ,IAAI,EAAE;YACV,KAAK,CAAC;gBACJ,OAAO,sBAAsB,CAAC;YAChC,KAAK,CAAC;gBACJ,OAAO,qBAAqB,CAAC;YAC/B,KAAK,CAAC;gBACJ,OAAO,sBAAsB,CAAC;YAChC,KAAK,CAAC;gBACJ,OAAO,EAAE,CAAC;YACZ,KAAK,CAAC;gBACJ,OAAO,gBAAgB,CAAC;YAC1B;gBACE,OAAO,EAAE,CAAC;SACb;IACL,CAAC;IACD,UAAU,CAAC,IAAQ;QACjB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,oDAAoD,CAAC,EAC3E,EAAE,KAAK,kCAAM,IAAI,KAAC,eAAe,EAAG,IAAI,CAAC,eAAe,GAAE,EAAE,CAC3D;IACH,CAAC;;gFAvDU,gBAAgB;8GAAhB,gBAAgB;QCT7B,yEAAmB;QACf,oEAAG;QAAA,uDAAiC;;QAAA,4DAAI;QAC5C,4DAAM;QACN,iFAEgE;;QAC5D,wEAAO;QACH,qEAAI;QACA,wEAAkB;QAAA,qEAAG;QAAA,wDAA+B;;QAAA,4DAAI;QAAA,4DAAK;QAC7D,sEAAI;QAAA,qEAAG;QAAA,wDAAoC;;QAAA,4DAAI;QAAA,4DAAK;QACpD,sEAAI;QAAA,qEAAG;QAAA,wDAA8B;;QAAA,4DAAI;QAAA,4DAAK;QAC9C,sEAAI;QAAA,qEAAG;QAAA,wDAAgC;;QAAA,4DAAI;QAAA,4DAAK;QAChD,yEAAoB;QAAA,qEAAG;QAAA,wDAAqB;;QAAA,4DAAI;QAAA,4DAAK;QACzD,4DAAK;QACT,4DAAQ;QACR,yEAAO;QACH,6GAYK;QACT,4DAAQ;QACZ,4DAAW;;QA7BJ,0DAAiC;QAAjC,oJAAiC;QAItB,0DAA6C;QAA7C,qKAA6C;QAFrD,0EAAiB;QAKM,0DAA+B;QAA/B,mJAA+B;QAC7C,0DAAoC;QAApC,wJAAoC;QACpC,0DAA8B;QAA9B,kJAA8B;QAC9B,0DAAgC;QAAhC,oJAAgC;QAChB,0DAAqB;QAArB,yIAAqB;QAI3B,0DAAgB;QAAhB,oFAAgB","sources":["./src/app/sales/menu/developers/history-payment/history-payment.component.ts","./src/app/sales/menu/developers/history-payment/history-payment.component.html","./src/app/sales/menu/developers/history-payment/history-payment.module.ts","./src/app/sales/menu/developers/history-payment/history/detail-history/detail-history.component.ts","./src/app/sales/menu/developers/history-payment/history/detail-history/detail-history.component.html","./src/app/sales/menu/developers/history-payment/history/history.component.ts","./src/app/sales/menu/developers/history-payment/history/history.component.html"],"sourcesContent":["import { VhQuerySales, VhAuth, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-history-payment',\r\n  templateUrl: './history-payment.component.html',\r\n  styleUrls: ['./history-payment.component.scss']\r\n})\r\nexport class HistoryPaymentComponent implements OnInit {\r\n  listSubTabs = [\r\n    \"Đang sử dụng\", \"Đã sử dụng\", \"Chưa sử dụng\"\r\n  ]\r\n  list_datas: any[] = [];\r\n  list_package: any[] = [];\r\n  list_data_unused: any[] = [];\r\n  indexTabs = 0\r\n  indexParentTabs : any= 0\r\n  tableHeight: string = ''\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhAuth: VhAuth,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private router:Router\r\n  ) {\r\n     this.indexParentTabs = this.router.getCurrentNavigation().extras.state ? this.router.getCurrentNavigation().extras.state : 0;\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    // this.vhQuerySales.getPayment_details({ package_type : { $eq: 1 }, payment_type : {$in: [1,2,3]} })\r\n    //   .then((payment_details: any) => {\r\n    //     payment_details= payment_details.map(item => {return {...item, branch_name: this.vhQuerySales.getlocalBranch(item.id_branch).name }})\r\n    //     for (let i of payment_details) {\r\n    //       this.vhQuerySales.getPackage(i.id_package).then((packages: any) => {\r\n    //         i.name = packages?.name\r\n    //       })\r\n    //     }\r\n    //     this.list_package = this.vhAlgorithm.sortDatebyDESC(payment_details,'date')\r\n        \r\n    //     this.list_datas = payment_details.filter(item => item.activating && !item.invalid)  \r\n    //   })\r\n  }\r\n\r\n  changeTabs(e) {\r\n    this.indexTabs = e\r\n    switch (e) {\r\n      case 0: {\r\n        this.list_datas = this.list_package.filter(item => item.activating && !item.invalid) // đang sử dụng\r\n        break;\r\n      }\r\n      case 1: {\r\n        this.list_datas = this.list_package.filter(item => item.invalid)// đã sử dụng\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.list_datas = this.list_package.filter(item => !item.activating && !item.invalid)// chưa sử dụng\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-tabs-nav\") && document.querySelector(\".ant-table-body\")) {\r\n      this.tableHeight =  document.querySelector(\".ant-table-body\").clientHeight\r\n        - document.querySelector(\".ant-table-thead\").clientHeight - document.querySelector(\".ant-tabs-nav\").clientHeight - 140 + \"px\";\r\n      }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<nz-layout class=\"ant-table-body\">\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\" class=\"left-all-content\">\r\n            <nz-tabset [nzSelectedIndex]=\"indexParentTabs\"  (nzSelectedIndexChange)=\"indexParentTabs =  $event \">\r\n                <!-- <nz-tab nzTitle=\"Thông tin các gói\">\r\n                    <nz-tabset [nzSelectedIndex]=\"indexTabs\"  (nzSelectedIndexChange)=\"changeTabs($event)\">\r\n                        <nz-tab *ngFor=\"let tab of listSubTabs\" nzTitle=\"{{tab | translate}}\">\r\n                            <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n                                [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"list_datas\" #tableSales nzShowPagination\r\n                                nzShowSizeChanger nzNoResult=\"{{'No package yet' | translate}}\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th nzWidth=\"25%\" nzAlign='left'><b>{{'Used package' | translate}}</b></th>\r\n                                        <th  nzAlign='center'><b>{{'Payment date' | translate}}</b></th> \r\n                                        <th  nzAlign='center'><b>{{'Used time' | translate}}</b></th>\r\n                                        <th  nzAlign='center'><b>{{'Branch' | translate}}</b></th>\r\n                                        <th  nzAlign='center'><b>{{'Activation date' | translate}}</b></th>\r\n                                        <th  nzAlign='center'><b>{{'Expiration date' | translate}}</b></th>\r\n                                        <th  nzAlign='right'><b>{{'Pay' | translate}}</b></th> \r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody  *ngFor=\"let data of tableSales.data\" >\r\n                                    <tr>\r\n                                        \r\n                                        <td nzAlign='left'>\r\n                                            {{data.name}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{(data.date | date:'dd/MM/yyyy')}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{data.day}} {{'days' | translate}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{data.branch_name}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{(data.activate_date  | date:'dd/MM/yyyy') || '_No data' | translate}}\r\n                                        </td>\r\n                                        <td nzAlign='center'>\r\n                                            {{(data.deactivate_date | date:'dd/MM/yyyy')|| '_No data' | translate}}\r\n                                        </td>\r\n                                        <td nzAlign='right'>\r\n                                            {{vhAlgorithm.vhcurrencyunit(data.price)}}\r\n                                        </td>\r\n                                    </tr>\r\n                                    \r\n                                </tbody>\r\n                            </nz-table>\r\n                        </nz-tab>\r\n                    </nz-tabset>\r\n                </nz-tab> -->\r\n                <nz-tab nzTitle=\"Lịch sử\">\r\n                    <app-history [tableHeight]=\"tableHeight\" [indexParentTabs]=\"indexParentTabs\"></app-history>\r\n                </nz-tab>\r\n            </nz-tabset>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HistoryPaymentComponent } from './history-payment.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NzTabsModule } from 'ng-zorro-antd/tabs'; \r\nimport { HistoryComponent } from './history/history.component';\r\nimport { NzTableModule } from 'ng-zorro-antd/table';\r\nimport { DetailHistoryComponent } from './history/detail-history/detail-history.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HistoryPaymentComponent\r\n  },\r\n  {\r\n    path:'detail',\r\n    component: DetailHistoryComponent\r\n  }\r\n]\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HistoryPaymentComponent,\r\n     \r\n    HistoryComponent,\r\n    DetailHistoryComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule,\r\n    NgZorroAntModule,\r\n    RouterModule.forChild(routes),\r\n    NzTabsModule,\r\n    NzTableModule\r\n  ]\r\n})\r\nexport class HistoryPaymentModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-detail-history',\r\n  templateUrl: './detail-history.component.html',\r\n  styleUrls: ['./detail-history.component.scss']\r\n})\r\nexport class DetailHistoryComponent implements OnInit {\r\n  public item;                                          // paymet được chọn\r\n  public listDetail;\r\n  public listBranch: any[];\r\n  constructor(\r\n    public router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm:VhAlgorithm,\r\n\r\n  ) {\r\n    this.item = this.router.getCurrentNavigation().extras.state;\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.getPaymentDetails();\r\n    this.listBranch = this.vhQuerySales.getlocalBranchs()\r\n\r\n  }\r\n  getPaymentDetails() {\r\n    this.vhQuerySales.getPayment_details({id_payment:{$eq: this.item._id}}, {},{},0)\r\n    .then((payment_details: any)=>{\r\n      this.listDetail =  payment_details\r\n      for (let i in payment_details) {\r\n        this.vhQuerySales.getPackage(payment_details[i].id_package).then((packages) => {\r\n          payment_details[i].name_package = packages['name']\r\n        })\r\n      }\r\n    })\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/developers/history-payment'],{ state : this.item.indexParentTabs});\r\n  }\r\n\r\n  sortPaymentDetails(payment_details){\r\n    let newArr = [];\r\n    payment_details.forEach(element => {\r\n      if(this.checkPackage(element.id_package)){\r\n        const result = payment_details.filter(item => item.id_main_package == element._id);\r\n        element[\"promotion\"] = result;\r\n        newArr.push(element)\r\n      }\r\n    });\r\n    return newArr;\r\n  }\r\n\r\n\r\n  // kiểm tra chi nhánh nếu là gói chính thì true, promotions thì false\r\n  checkPackage(id_package:string){\r\n    let arr =  id_package.split('_')[0]\r\n    switch(arr){\r\n      case 'main':{\r\n        return true; break;\r\n      }\r\n      default:{\r\n        return false;break;\r\n      }\r\n    }\r\n  }\r\n\r\n   // Lấy tên chi nhánh\r\n   getNameBranchById(id_branch){\r\n    let name;\r\n    this.listBranch.forEach(element => {\r\n      if(element._id == id_branch){\r\n        name =  element.name\r\n      }\r\n    });\r\n    return name;\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout id=\"content\">\r\n    <div nz-row style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\" class=\"title left-all-content\" id=\"header\">\r\n            <b>{{'Order information' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\" class=\"table-detail ant-table-body\" *ngIf=\"listDetail\">\r\n            <nz-table [nzData]=\"listDetail\" #data [nzFrontPagination]=\"false\" [nzShowPagination]=\"false\">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=\"width: 15%\" nzAlign=\"left\"><b>{{'Payment package'| translate}}</b></th>\r\n                        <th style=\"width: 20%\" class=\"text-align\"><b>{{'Used time'| translate}}</b></th>\r\n                        <th style=\"width: 20%\" class=\"text-align\"><b>{{'Branch applied'| translate}}</b></th>\r\n                        <th style=\"width: 15%\" class=\"text-align\"><b>{{'Unit price'| translate}}</b></th>\r\n                        <th style=\"width: 10%\" class=\"text-align\"><b>{{'Quantity'| translate}}</b></th>\r\n                        <th style=\"width: 25%\" class=\"text-align\"><b>{{'Total_amount'| translate}}</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of data.data;let i= index\">\r\n                        <tr>\r\n                            <td nzAlign=\"left\" style=\"width: 20%\"><b>{{item.name_package}}</b></td>\r\n                            <td style=\"width: 15%\" class=\"green\">{{item.day + ' ngày'}}</td>\r\n                            <td style=\"width: 20%\">\r\n                                <div>\r\n                                    <span>{{ getNameBranchById(item.id_branch)}}</span>\r\n                                </div>\r\n                            </td>\r\n                            <td nzAlign=\"right\" style=\"width: 15%\">{{ vhAlgorithm.vhcurrencyunit(item.price)}}</td>\r\n                            <td style=\"width: 10%;\">\r\n                                <div>\r\n                                    <span>{{ item.quantity}}</span>\r\n                                </div>\r\n                            </td>\r\n                            <td nzAlign=\"right\" style=\"width: 25%\"><b>{{\r\n                                  vhAlgorithm.vhcurrencyunit(item.quantity*item.price) }}</b></td>\r\n                        </tr>\r\n\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n        <div class=\"payment\">\r\n            <div id=\"total\" style=\"text-align: end;padding-right: 16px\" *ngIf=\"item.total\">\r\n                Thuế: <b style=\"margin-left:8px\">{{item.tax}}</b>\r\n            </div>\r\n            <div id=\"total\" style=\"text-align: end;padding-right: 16px\" *ngIf=\"item.total\">\r\n                Tổng tiền: <b style=\"margin-left:8px; color: #00a859;\"> {{vhAlgorithm.vhcurrencyunit_symbol(item.total)}}</b>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n","import { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-history',\r\n  templateUrl: './history.component.html',\r\n  styleUrls: ['./history.component.scss']\r\n})\r\nexport class HistoryComponent implements OnInit {\r\n  public listHistory:any[] = [];\r\n  @Input() tableHeight;\r\n  @Input() indexParentTabs;\r\n  \r\n  constructor(\r\n    public router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAuth: VhAuth,\r\n    public vhAlgorithm: VhAlgorithm,\r\n  ) { }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.vhQuerySales.getPayments({payment_type:{$in: [1,2,3,4]}},{},{},0)\r\n    .then((payments: any)=>{\r\n      console.log(payments);\r\n      this.listHistory = this.vhAlgorithm.sortDatebyDESC(payments, 'date').map(e =>{\r\n        \r\n        return {\r\n          ...e,\r\n          payment_name: this.getPaymentName(e.payment_type),\r\n          \r\n        }\r\n      })\r\n      \r\n      \r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về tên thanh toán theo payment_type\r\n   * @param {number} type 1: vnpay, 2: tiền mặt, 3: casso, 4: chưa có, 5: chờ thanh toán\r\n   * @returns {string} t n thanh to n\r\n   */\r\n  getPaymentName(type){\r\n    switch (type) {\r\n        case 1:\r\n          return 'thanh toán qua vnpay';\r\n        case 2:\r\n          return 'thanh toán tiền mặt';\r\n        case 3:\r\n          return 'thanh toán qua casso';\r\n        case 4:\r\n          return '';\r\n        case 5:\r\n          return 'chờ thanh toán';\r\n        default:\r\n          return '';\r\n      }\r\n  }\r\n  chooseItem(item:any){\r\n    this.router.navigate(['/sales/dashboard/developers/history-payment/detail'],\r\n    { state: {...item,indexParentTabs : this.indexParentTabs } }\r\n    )\r\n  }\r\n}\r\n","<div class=\"title\">\r\n    <b>{{'Payment history' | translate}}</b>\r\n</div>\r\n<nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n[nzScroll]=\"{ y: tableHeight }\" [nzData]=\"listHistory\" #tableSales nzShowPagination\r\nnzShowSizeChanger nzNoResult=\"{{'No package yet' | translate}}\">\r\n    <thead>\r\n        <tr>\r\n            <th nzWidth=\"10%\"><b>{{'Serial number' | translate}}</b></th>\r\n            <th><b>{{'Payment order code' | translate}}</b></th>\r\n            <th><b>{{'Payment time' | translate}}</b></th>\r\n            <th><b>{{'Payment method' | translate}}</b></th>\r\n            <th nzAlign=\"right\"><b>{{'Pay' | translate}}</b></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr *ngFor=\"let item of listHistory; let i = index \" (click)=\"chooseItem(item)\">\r\n            <td><b>{{ i + 1}}</b></td>\r\n            <td><b>{{item.payment_code}}</b></td>\r\n            <td>{{item.date | date:'dd/MM/yyyy  HH:mm'}}</td>\r\n            <td>{{item.payment_name}}</td>\r\n            <td nzAlign=\"right\"><b>{{ vhAlgorithm.vhcurrencyunit(item.total)}}</b></td>\r\n\r\n            <!-- <td>\r\n              <a>Action 一 {{data.name}}</a>\r\n              <nz-divider nzType=\"vertical\"></nz-divider>\r\n              <a>Delete</a>\r\n          </td> -->\r\n        </tr>\r\n    </tbody>\r\n</nz-table>\r\n"],"names":[],"sourceRoot":"webpack:///"}