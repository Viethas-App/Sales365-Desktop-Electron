{"version":3,"file":"src_app_sales_menu_developers_manage-keys_manage-keys_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/developers/manage-keys/manage-keys.component.ts","./src/app/sales/menu/developers/manage-keys/manage-keys.component.html","./src/app/sales/menu/developers/manage-keys/manage-keys.module.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatPaginator, PageEvent } from '@angular/material/paginator';\r\n\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-manage-keys',\r\n  templateUrl: './manage-keys.component.html',\r\n  styleUrls: ['./manage-keys.component.scss']\r\n})\r\nexport class ManageKeysComponent implements OnInit {\r\n\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  /// panigatior ///\r\n\r\n  pageIndex: number = 0;\r\n  pageSize: number = 20;\r\n  lowValue: number = 0;\r\n  highValue: number = 20;\r\n  pageSizeOption: any = [20, 50, 100, 200, 500];\r\n  data: any = [];\r\n  startTime: any = new Date();\r\n  endTime: any = new Date();\r\n\r\n  loading: boolean = false;\r\n  isVisibleExtendUse = false;\r\n  key_code: any\r\n  customer: any\r\n  constructor(\r\n\r\n    public dialog: MatDialog,\r\n    private _snackBar: MatSnackBar,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhAlgorithm: VhAlgorithm,\r\n    private nzModalService: NzModalService,\r\n    private vhComponent: VhComponent\r\n    , private languageService: LanguageService,\r\n    private vhAuth: VhAuth\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.startTime.setHours(0, 0, 0, 0);\r\n    this.endTime.setHours(23, 59, 59, 59);\r\n    this.getLicenseKEYs(true)\r\n  }\r\n\r\n  getBranchName(id_branch) {\r\n    return this.vhQuerySales.getlocalBranch(id_branch)?.name || this.languageService.translate('No branch')\r\n  }\r\n  getLicenseKEYs(loading) {\r\n    if (loading) this.loading = true;\r\n    this.data = [];\r\n    this.vhQuerySales.getLicenseKEYs({}, {}, {}, 0)\r\n      .then((data: any) => {\r\n        this.loading = false;\r\n        if (data) {\r\n          this.data = data.map((item, index) => {\r\n            return { ...item, no: (index += 1) };\r\n          });\r\n          this.sortTable('date')\r\n          console.log(this.data);\r\n\r\n        }\r\n      },\r\n        (err) => {\r\n          console.log(err), (this.loading = false);\r\n        }\r\n      );\r\n  }\r\n\r\n  selectStartTime(event) {\r\n    this.startTime = new Date(event).setHours(0, 0, 0, 0);\r\n  }\r\n  selectEndTime(event) {\r\n    this.endTime = new Date(event).setHours(23, 59, 59, 59);\r\n  }\r\n\r\n\r\n\r\n  openZalo(customer) {\r\n    window.open(`https://zalo.me/${customer}`);\r\n  }\r\n  // slice panigator\r\n  getPaginatorData(event: PageEvent): PageEvent {\r\n    this.lowValue = event.pageIndex * event.pageSize;\r\n    this.highValue = this.lowValue + event.pageSize;\r\n    return event;\r\n  }\r\n\r\n  public copyValue(value) {\r\n    navigator.clipboard.writeText(value);\r\n    this._snackBar.open('Copied', value, {\r\n      horizontalPosition: 'center',\r\n      verticalPosition: 'top',\r\n      duration: 2000\r\n    });\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'activate_date':\r\n      case 'date':\r\n        if (this.dateCol) {\r\n          this.data = this.vhAlgorithm.sortDatebyASC([...this.data], colName);\r\n        } else {\r\n          this.data = this.vhAlgorithm.sortDatebyDESC([...this.data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  customer_branchs = []\r\n  id_branch = ''\r\n  openModalExtendedUse(code) {\r\n    if (this.vhAuth.getUser().owner == 'boss') {\r\n      this.customer_branchs = this.vhQuerySales.getlocalBranchs()\r\n\r\n      this.isVisibleExtendUse = true;\r\n      this.key_code = code\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n    }\r\n  }\r\n  handleExtendUse() {\r\n    this.nzModalService.confirm({\r\n      nzTitle: this.languageService.translate(\"Xác nhận kích hoạt gia hạn?\"),\r\n      nzContent: this.languageService.translate(`\"Xác nhận kích hoạt gia hạn cho chi nhánh ${this.customer_branchs.find(e => e._id == this.id_branch).name}?\"`),\r\n      nzOnOk: () => {\r\n        this.vhComponent.showLoading('').then(() => {\r\n          this.vhQuerySales.extendLicenseValidaty_byLicenseKEY(this.id_branch, this.key_code._id)\r\n            .then((response: any) => {\r\n              console.log('updateLicenseKEY', response);\r\n              this.vhComponent.hideLoading(0)\r\n              if (response.vcode == 0) {\r\n                this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Kích hoạt thành công\"))\r\n\r\n                this.isVisibleExtendUse = false;\r\n                this.key_code.id_branch = this.id_branch\r\n                this.key_code.activated = true\r\n                this.key_code.activate_date = new Date().toISOString()\r\n\r\n              }\r\n              if (response.vcode == 1) {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Mã kích hoạt không thuộc tài khoản này!\"))\r\n              }\r\n              if (response.vcode == 2) {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Mã này đã được kich hoạt!\"))\r\n              }\r\n              if (response.vcode == 3) {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Mã này đã bị vô hiệu hóa!\"))\r\n              }\r\n\r\n\r\n            }, error => {\r\n              this.isVisibleExtendUse = false;\r\n              this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(`\"Kích hoạt thất bại! Lỗi: ${error.error}\"`), 5000)\r\n              this.vhComponent.hideLoading(0)\r\n              console.log('error', error);\r\n            }).catch(() => {\r\n              this.isVisibleExtendUse = false;\r\n              this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Kích hoạt thất bại vui lòng thử lại\"), 5000)\r\n              this.vhComponent.hideLoading(0)\r\n            })\r\n        })\r\n      }\r\n\r\n    })\r\n  }\r\n}\r\n","<div style=\"height: 100%;\">\r\n    <div style=\"height: 8%;display: flex; width: 100%; align-items: center;justify-content: space-between;\">\r\n\r\n        <b>Quản lý KEY bản quyền</b>\r\n\r\n    </div>\r\n    <div style=\"height: 91%; margin-top: 1%; overflow-y: hidden;\">\r\n        <div class=\"body-tab\" style=\"height: 92%;\">\r\n            <mat-spinner color=\"warn\" *ngIf=\"loading\" style=\"top: 50%; left: 50%; position: absolute;\"></mat-spinner>\r\n            <div style=\"top: 50%; left: 50%; position: absolute;\" *ngIf=\"!data.length && !loading\">Không có dữ liệu\r\n            </div>\r\n\r\n            <table class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\" (click)=\"dateCol = !dateCol;sortTable('date')\">Ngày mua <i nz-icon\r\n                                [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i></th>\r\n                        <th scope=\"col\" (click)=\"dateCol = !dateCol;sortTable('activate_date')\">Ngày kích hoạt <i nz-icon\r\n                                [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i></th>\r\n                        <th scope=\"col\">Chi nhánh</th>\r\n                        <th scope=\"col\">Trạng thái</th>\r\n                        <th scope=\"col\">Gói mua</th>\r\n                        <!-- <th scope=\"col\">Ngày hết hạn</th> -->\r\n                        <th scope=\"col\">Chú thích</th>\r\n\r\n                        <!-- <th style=\"width: 20%\" style=\"text-align: center;\" scope=\"col\">Chức năng</th> -->\r\n                        <!-- <th style=\"text-align: center;\" scope=\"col\">Đại lý</th> -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let customer of data | slice: lowValue : highValue; let i = index\">\r\n                        <td style=\"word-break: break-word;\">{{customer.no}}</td>\r\n                        <td style=\"word-break: break-word;\">{{customer.date | date:'dd/MM/yyyy,HH:mm'}}</td>\r\n                        <td style=\"word-break: break-word;\">{{customer.activate_date | date:'dd/MM/yyyy,HH:mm'}}</td>\r\n                        <td style=\"word-break: break-word; cursor: pointer;\">{{getBranchName(customer.id_branch)}}</td>\r\n                        <td style=\"word-break: break-word;\"\r\n                            [style.color]=\"customer.activated ? 'var(--ion-color-vh-green)' : 'black'\">\r\n                            {{(customer.activated ? 'Đã kích hoạt' : 'Chưa kích hoạt' ) | translate}}</td>\r\n\r\n                        <td style=\"word-break: break-word;\">{{customer.day}} {{ 'day'| translate}}</td>\r\n                        <!-- <td style=\"word-break: break-word;\">{{(customer.deactivate_date | date:'dd/MM/yyyy,HH:mm') ||\r\n                            ('_No data' | translate)}}</td> -->\r\n\r\n                        <td style=\"word-break: break-word;width: 20%;\">\r\n                            {{customer.note || ('_No data' | translate)}}\r\n                            <!-- <button *ngIf=\"!customer.activated\" nz-button nzType=\"primary\" (click)=\"openModalExtendedUse(customer)\">Gia hạn</button> -->\r\n                            <!-- <button nz-button nzType=\"default\">Xem lịch sử</button> -->\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div style=\"height: 8%;width: 100%;\">\r\n            <mat-paginator [length]=\"data.length\" [pageSizeOptions]=\"pageSizeOption\" [pageSize]=\"pageSize\"\r\n                showFirstLastButtons=\"false\" (page)=\"getPaginatorData($event)\">\r\n            </mat-paginator>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<nz-modal [(nzVisible)]=\"isVisibleExtendUse\" nzTitle=\"{{'Renew software' | translate}}\"\r\n    (nzOnCancel)=\"isVisibleExtendUse = false\" (nzOnOk)=\"handleExtendUse()\">\r\n    <ng-container *nzModalContent>\r\n        <div>{{'Select branch to renew' | translate}}</div>\r\n        <nz-select nzPlaceHolder=\"{{'Select one branch' | translate}}\" style=\"width : 100%\" [(ngModel)]=\"id_branch\">\r\n            <nz-option *ngFor=\"let item of customer_branchs\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\"></nz-option>\r\n        </nz-select>\r\n    </ng-container>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { NgZorroAntModule } from 'src/app/cafe/desktop/ng-zorro-ant.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ManageKeysComponent,\r\n  },\r\n\r\n]\r\n\r\nimport { ManageKeysComponent } from './manage-keys.component';\r\nimport { MaterialModule } from 'src/app/dealer/material.module';\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ManageKeysComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    MaterialModule,\r\n    RouterModule.forChild(routes)\r\n  ]\r\n})\r\nexport class ManageKeysModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}