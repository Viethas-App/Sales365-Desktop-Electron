{"version":3,"file":"src_app_sales_menu_manage_cashflow_expenses_expenses_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/cashflow/expenses/add/add.component.ts","./src/app/sales/menu/manage/cashflow/expenses/add/add.component.html","./src/app/sales/menu/manage/cashflow/expenses/detail/detail.component.ts","./src/app/sales/menu/manage/cashflow/expenses/detail/detail.component.html","./src/app/sales/menu/manage/cashflow/expenses/expenses.component.ts","./src/app/sales/menu/manage/cashflow/expenses/expenses.component.html","./src/app/sales/menu/manage/cashflow/expenses/expenses.module.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { NavController } from '@ionic/angular';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { ExpenseA4Component } from 'src/app/sales/components/print/expenses/expense-a4/expense-a4.component';\r\nimport { ExpensesA5Component } from 'src/app/sales/components/print/expenses/expenses-a5/expenses-a5.component';\r\nimport { ExpenseK80Col4Component } from 'src/app/sales/components/print/expenses/expense-k80-col4/expense-k80-col4.component';\r\nimport { ExpenseK80Col3Component } from 'src/app/sales/components/print/expenses/expense-k80-col3/expense-k80-col3.component';\r\nimport { ExpenseK57Col3Component } from 'src/app/sales/components/print/expenses/expense-k57-col3/expense-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  @ViewChild('nameGroup') nameGroup; // biến lấy tên nhóm (form kg cho dùng ngmodel)\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state;\r\n  listPaymentBank: any = [];\r\n  list_suppliers: any = [];\r\n  money_currency: any;\r\n  radioValue: any = 'A';\r\n  addExpensesForm: FormGroup;\r\n  type: any = 12; // Biến lưu loại phiếu chi được chọn -> 12: Phiếu chi công nợ nhà cung cấp\r\n  nzOptions: any;\r\n  billInfo: any = { employee: this.vhAuth.getUser() };\r\n  expendGroup: any = this.vhQuerySales.getlocalSpending_groups() // nhóm chi\r\n  /**Giới hạn thời gian cho tạo bill */\r\n  disabledDate = (current: Date): boolean => {\r\n    if (current.getTime() < (new Date(this.vhAuth.getStore().registrationdate).getTime() - 24 * 60 * 60 * 1000)) return true\r\n    return false\r\n  }\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery,\r\n    public languageService: LanguageService,\r\n    private navCtrl: NavController,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.getPaymentBankList();\r\n    let options = [\r\n      {\r\n        value: '1',\r\n        label: this.languageService.translate('Cash'),\r\n        isLeaf: true\r\n      },\r\n      {\r\n        value: '3',\r\n        label: this.languageService.translate('Account'),\r\n        children: this.listPaymentBank\r\n      }\r\n    ]\r\n    this.nzOptions = options;\r\n  }\r\n  checkPrinter: boolean = false;\r\n  ngOnInit(): void {\r\n    this.list_suppliers = this.vhQuerySales.getlocalSuppliers();\r\n    this.initForm();\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_expense')\r\n\r\n    if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n    this.expendGroup = this.vhQuerySales.getlocalSpending_groups()\r\n  }\r\n  ngAfterViewInit() {\r\n    // tạo cleavejs cho input price\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.money_currency = this.vhAlgorithm.vhnumeral(\".price\");\r\n    });\r\n  }\r\n\r\n  /**\r\n   * khởi tạo form có các trường được required trong bill\r\n   * @example initForm()\r\n   */\r\n  initForm() {\r\n    let id_group_default: any = this.expendGroup.length ? this.expendGroup.filter(item => item.default == true) : []\r\n    let required: any = this.type == 8 ? Validators.compose([Validators.required]) : \"\"\r\n    this.addExpensesForm = new FormGroup({\r\n      date: new FormControl(new Date().toISOString()),\r\n      customer: new FormControl(\"\", Validators.compose([Validators.required])),\r\n      total: new FormControl(\"\", Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      content: new FormControl(\"\"),\r\n      payment_type: new FormControl('1'),\r\n      id_branch: new FormControl(this.vhQuerySales.getDefaultBranch()._id),\r\n      wallet: new FormControl(null),\r\n      type_receipt: new FormControl(this.type),\r\n      id_group: new FormControl(id_group_default.length ? id_group_default[0]._id : null, required)\r\n    });\r\n  }\r\n  /**\r\n   * check validate hợp lệ\r\n   * @param $event date\r\n   */\r\n  changeDate(event) {\r\n    this.vhQuerySales.getValidityDate(event)\r\n      .then((validitydate: any) => {\r\n        if (validitydate) {\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n          this.addExpensesForm.controls['date'].setValue(new Date())\r\n        }\r\n      })\r\n  }\r\n\r\n   /**Get tk ngân hàng và gán váo biến listPaymentBank\r\n   * @example this.getPaymentBankList()\r\n  */\r\n  getPaymentBankList() {\r\n    let listPayment = this.vhQuerySales.getlocalWallets().filter(item => item._id != 'id_cash' && item.id_branch == this.vhQuerySales.getDefaultBranch()._id);\r\n    this.listPaymentBank = listPayment.map(item => {\r\n      return { value: item._id, label: item.name, isLeaf: true }\r\n    })\r\n  }\r\n\r\n  /**bắt sk thay đổi loại phiếu chi, khởi tạo lại các giá trị mặc định của form\r\n   * @example this.chooseType(1)\r\n  */\r\n  chooseType(value) {\r\n    this.initForm();\r\n  }\r\n\r\n\r\n \r\n  /**Khởi tạo các trường chuẩn của bill để lưu DB\r\n   * @example  const bill = this.exportBill(bill, '070623F001')\r\n   * @returns bill\r\n  */\r\n  exportBill(formValue, bill_code) {\r\n    const bill: any = {\r\n      bill_code: bill_code,\r\n      date: new Date(formValue[\"date\"]),\r\n      id_employee: this.billInfo['employee']._id,\r\n      id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n      bill_type: parseInt(this.type),\r\n      content: formValue[\"content\"],\r\n      payment_type: formValue[\"payment_type\"],\r\n      tax: 0,\r\n      total: parseFloat(this.money_currency.getRawValue()),\r\n      payment: parseFloat(this.money_currency.getRawValue())\r\n    }\r\n    if (bill['payment_type'][0] == '3') {\r\n      bill['id_wallet'] = bill['payment_type'][1];\r\n      bill['payment_type'] = 3;\r\n    } else {\r\n      bill['payment_type'] = 1;\r\n      bill['id_wallet'] = 'id_cash';\r\n    }\r\n    if (this.type == 12) {\r\n      bill['id_supplier'] = formValue['customer'],\r\n        this.billInfo['supplier'] = this.vhQuerySales.getlocalSupplier(formValue['customer'])\r\n    }\r\n    else {\r\n      bill.name = formValue[\"customer\"]\r\n      bill.id_group = formValue[\"id_group\"]\r\n    }\r\n    return bill;\r\n\r\n\r\n  }\r\n\r\n  /**Hàm tạo phiếu chi */\r\n  addExpenses(print) {\r\n    \r\n    \r\n    Promise.all([\r\n      this.vhQuerySales.createBillCode(new Date(this.addExpensesForm['value'][\"date\"]),this.type),\r\n      this.vhComponent.showLoading(\"\")\r\n    ]).then(([bill_code, loading]) => {\r\n      const bill = this.exportBill(this.addExpensesForm['value'],bill_code)\r\n      this.vhQuerySales\r\n        .createBill(bill)\r\n        .then((res: any) => {\r\n          this.billInfo = { ...this.billInfo, ...bill, id: res._id }\r\n          this.vhComponent.showToast(1500, (this.languageService.translate(\"Expenses has been created successfully\")));\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            if (print) this.showPrint();\r\n            else setTimeout(() => this.goBack(true), 200)\r\n          })\r\n        }, err => { })\r\n    })\r\n  }\r\n\r\n  /** trở về trang danh sách phiếu chi\r\n   * @example this.goBack()\r\n   */\r\n  goBack(value?) {\r\n    let data = { ...this.dataRestore }\r\n    data.check = true\r\n    this.router.navigate(['/sales/dashboard/manage/cashflow/expenses'], {\r\n      state: value ? data : this.dataRestore\r\n    });\r\n  }\r\n\r\n  /**Zorro modal save*/\r\n  isPrint: boolean\r\n  isVisible = false;\r\n  /**\r\n   * mở modal hiển thị xác nhận tạo phiếu chi\r\n   * @param value : biến cờ check in hay ko\r\n   * @example this.showModal(true)\r\n   */\r\n  showModal(value): void {\r\n    this.isVisible = true;\r\n    this.isPrint = value\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok của modal\r\n   * @example this.showModal(true)\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    this.addExpenses(this.isPrint);\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút hủy của modal\r\n   * @example this.showModal(true)\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n   /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n   * @example this.showPrint() \r\n   */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer) {\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { billInfo: this.billInfo, printer: printer }, false, false, `modal-print-${printer['_id']}`)\r\n          .then(modal => {\r\n            modal.onWillDismiss().then(dataReturn => { this.goBack(true) })\r\n          })\r\n      }\r\n    }, err => { this.goBack(true) })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExpenseK57Col3Component\r\n      case 'print_size_k80_3c': return ExpenseK80Col3Component\r\n      case 'print_size_k80_4c': return ExpenseK80Col4Component\r\n      case 'print_size_a5': return ExpensesA5Component\r\n      case 'print_size_a4': return ExpenseA4Component\r\n      default: return ExpenseA4Component\r\n    }\r\n  }\r\n\r\n  /*----------Print------------------*/\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_expense')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n\r\n  /***********Thêm xóa sủa nhóm chi********** */\r\n  isVisiblelist: boolean = false; // popup danh sách nhóm\r\n  activeButton: boolean = false\r\n  /**\r\n   * tạo nhóm chi lên DB\r\n   * @param nameGroup : tên nhóm chi khác\r\n   * @example this.addGroup('Tiền mua nội thất')\r\n   */\r\n  addGroup(nameGroup): void {\r\n    this.activeButton = true\r\n    let index = this.expendGroup.findIndex(item => item.default)\r\n    let value = {\r\n      name: nameGroup.value,\r\n      default: index != -1 ? false : true\r\n    }\r\n    if (value.name != \"\") {\r\n      this.vhQuerySales.addSpending_group(value).then((res) => {\r\n        this.expendGroup = [...this.expendGroup, res];\r\n        this.nameGroup.nativeElement.value = ' ';\r\n        this.activeButton = false\r\n      })\r\n    } else this.vhComponent.alertMessageDesktop(\"warning\", \"Chưa nhập tên nhóm\")\r\n  }\r\n\r\n  /**\r\n   * Cập nhật trường default của nhóm chi\r\n   * @param item : nhóm chi đã chọn\r\n   * @example this.setDefault(spending_group)\r\n   */\r\n  setDefault(item) {\r\n    let index = this.expendGroup.findIndex(item => item.default)\r\n    item.default = true\r\n    if (index != -1) {\r\n      this.expendGroup[index].default = false;\r\n      Promise.all([this.vhQuerySales.updateSpending_group(item._id, item), this.vhQuerySales.updateSpending_group(this.expendGroup[index]._id, this.expendGroup[index])])\r\n        .then(() => { })\r\n    } else {\r\n      this.vhQuerySales.updateSpending_group(item._id, item).then(() => { })\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở modal chọn nhóm chi\r\n   * @example this.openLisGroup()\r\n   */\r\n  openLisGroup() {\r\n    let id = this.expendGroup.length ? this.expendGroup.filter(item => item.default == true) : []\r\n    this.isVisiblelist = true\r\n    this.addExpensesForm['value'].id_group = id.length ? id[0]._id : null\r\n  }\r\n\r\n  /**\r\n   * tắt modal chọn nhóm chi\r\n   * @example this.handleCancellist()\r\n   */\r\n  handleCancellist() {\r\n    this.isVisiblelist = false;\r\n  }\r\n\r\n  changeEdit: any = ''\r\n  /**\r\n   * gán _id của nhóm chi đã chọn vào biến changeEdit để update css ở giao diện\r\n   * @param _id : _id của nhóm chi đã chọn\r\n   */\r\n  editGroup(_id) {\r\n    this.changeEdit = _id\r\n  }\r\n  /**\r\n   * cập nhật tên nhóm chi\r\n   * @param item nhóm chi đã chọn\r\n   * @example this.saveEditGroup(item)\r\n   */\r\n  saveEditGroup(item) {\r\n    let value = {\r\n      name: item.name\r\n    }\r\n    this.vhQuerySales.updateSpending_group(item._id, value).then(() => {\r\n      this.changeEdit = \"\"\r\n    })\r\n  }\r\n\r\n  /**\r\n   * xóa nhóm chi lên DB và local\r\n   * @param _id : _id của nhóm chi đã chọn\r\n   * @param index : vị trí của nhóm chi trong mảng local\r\n   * @example this.deleteGroup('BDUWYHDIWUFRIWUHDE', 1)\r\n   */\r\n  deleteGroup(_id, index) {\r\n    this.vhQuerySales.deleteSpending_group(_id).then((bool) => {\r\n      if (bool) {\r\n        this.expendGroup.splice(index, 1)\r\n        this.initForm()\r\n      }\r\n      else this.vhComponent.alertMessageDesktop(\"error\", \"Không xóa được nhóm này\")\r\n    })\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"12\" class=\"title left-all-content\">\r\n            <b>{{'Expenses'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content margin\">\r\n            <div>\r\n                <button [disabled]=\"addExpensesForm.invalid || !checkPrinter\" class=\"btn-data center-all-content\"\r\n                    nz-button nzType=\"default\" (click)=\"showModal(true)\">\r\n                    <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                    {{'Create & Print'|translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"showModal(false)\"\r\n                    [disabled]=\"addExpensesForm.invalid\" [ngStyle]=\"{opacity: addExpensesForm.invalid ? 0.5 : 1}\">\r\n                    <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                    {{'Create'|translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"padding-top: 20px;\">\r\n        <form nz-form [formGroup]=\"addExpensesForm\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div class=\"large-size\"><b>{{'Expenses type'|translate}}</b></div>\r\n                    <nz-form-item style=\"margin-top: 5px;\">\r\n                        <nz-radio-group formControlName=\"type_receipt\" [(ngModel)]=\"type\"\r\n                            (ngModelChange)=\"chooseType($event)\">\r\n                            <label nz-radio [nzValue]=\"12\">{{'Pay for supplier liabilities'|translate}}</label>\r\n                            <label nz-radio [nzValue]=\"8\">{{'Other expenses'|translate}}</label>\r\n                        </nz-radio-group>\r\n                    </nz-form-item>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div class=\"large-size\"><b>{{'Payment method'|translate}}</b></div>\r\n                    <nz-cascader [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" formControlName=\"payment_type\"\r\n                        nzPlaceHolder=\"{{'Payment method'|translate}}\"> </nz-cascader>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"large-size\"><b> {{'Expenses information'|translate}}</b></div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Date'|translate}}</b></div>\r\n                        <nz-date-picker [nzDisabledDate]=\"disabledDate\" formControlName=\"date\" nzShowTime nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n                            nzPlaceHolder=\"{{'Select date' | translate}}\" (ngModelChange)=\"changeDate($event)\">\r\n                        </nz-date-picker>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Amount'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control nzErrorTip=\"{{'Please enter amount of money' | translate}}\">\r\n                                <nz-input-group>\r\n                                    <input class=\"price\" type=\"text\" maxlength=\"15\" formControlName=\"total\" nz-input\r\n                                        placeholder=\"{{'Enter amount' | translate}}\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Particulars' | translate}}</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input type=\"text\" formControlName=\"content\" nz-input\r\n                                        placeholder=\"{{'Enter particulars' | translate}}\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" *ngIf=\"type == 12\">\r\n                        <div class=\"medium-size\"><b>{{'Supplier name'|translate}}*</b></div>\r\n                        <nz-form-control nzErrorTip=\"{{'Supplier name is required' | translate}}\">\r\n                            <nz-select nzShowSearch [nzAllowClear]=\"false\" formControlName=\"customer\"\r\n                                nzPlaceHolder=\"{{'Select supplier' | translate}}\" required>\r\n                                <nz-option *ngFor=\"let option of list_suppliers\" nzLabel=\"{{option.name}}\"\r\n                                    nzValue=\"{{option._id}}\">\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </nz-form-control>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" *ngIf=\"type == 8\">\r\n                        <div class=\"medium-size\"><b>{{'Receiver'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control nzErrorTip=\"{{'Receiver name is required' | translate}}\">\r\n                                <nz-input-group>\r\n                                    <input type=\"text\" formControlName=\"customer\" nz-input required />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                </div>\r\n                <div nz-row *ngIf=\"type == 8\">\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Expenditure group'|translate}}*</b></div>\r\n                        <nz-form-control>\r\n                            <nz-select [nzDropdownRender]=\"renderTemplate\" nzShowSearch [nzAllowClear]=\"false\"\r\n                                formControlName=\"id_group\">\r\n                                <nz-option *ngFor=\"let item of expendGroup\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                                </nz-option>\r\n                            </nz-select>\r\n                            <ng-template #renderTemplate>\r\n                                <nz-divider></nz-divider>\r\n                                <div class=\"container\">\r\n                                    <input type=\"text\" placeholder=\"{{'Enter expense group name' | translate}}\" nz-input\r\n                                        #nameGroup />\r\n                                    <a class=\"add-item\" (click)=\"addGroup(nameGroup);\">\r\n                                        <button class=\"button\" nz-button\r\n                                            [disabled]=\"nameGroup.value =='' || activeButton\">\r\n                                            <i style=\"padding: 0;\" nz-icon nzType=\"plus\"></i>{{\"Add\" | translate}}\r\n                                        </button>\r\n                                    </a>\r\n                                    <a>\r\n                                        <button nz-button class=\"button\">\r\n                                            <i (click)=\"openLisGroup()\" nz-icon nzType=\"menu\" nzTheme=\"outline\"></i>\r\n                                        </button>\r\n\r\n                                    </a>\r\n                                </div>\r\n                            </ng-template>\r\n\r\n                        </nz-form-control>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!--Modal save-->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm' | translate}}\" (nzOnCancel)=\"handleCancel()\"\r\n    nzCancelText=\"{{'Cancel' | translate}}\" (nzOnOk)=\"handleOk()\">\r\n    <ng-container *nzModalContent>\r\n        <div>{{'Create this expenses?' | translate}}</div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n<!-- danh sách nhóm chi -->\r\n<nz-modal [nzFooter]=\"modalFooterList\" *ngIf=\"isVisiblelist\" [(nzVisible)]=\"isVisiblelist\"\r\n    nzTitle=\"{{'Expenditure group'|translate}}\" (nzOnCancel)=\"handleCancellist()\" [nzMaskClosable]=\"false\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"20\" class=\"infinite-container\">\r\n                    <nz-list>\r\n                        <nz-list-item *ngFor=\"let item of expendGroup; let i =index\">\r\n                            <ng-container>\r\n                                <nz-list-item-meta-title style=\"width: 100%;\">\r\n                                    <input (blur)=\"saveEditGroup(item)\" *ngIf=\"item._id == changeEdit\"\r\n                                        style=\"border: none; border-bottom: 1px solid gray; font-weight: 600; width: 80%;\"\r\n                                        type=\"text\" [(ngModel)]=\"item.name\" nz-input />\r\n                                    <nz-radio-group *ngIf=\"item._id != changeEdit\"\r\n                                        [(ngModel)]=\"addExpensesForm.value.id_group\" (ngModelChange)=\"setDefault(item)\">\r\n                                        <label [nzTooltipPlacement]=\"'left'\"\r\n                                            [nzTooltipColor]=\"'var(--ion-color-vh-green)'\" [nzValue]=\"item._id\"\r\n                                            nzTooltipTitle=\"{{item.default ? '': ('Set default' | translate)}}\"\r\n                                            nzTooltipPlacement=\"top\" nz-button nz-tooltip nz-radio>\r\n                                            <b\r\n                                                style=\"font-size: 0.9rem; color: var(--ion-color-vh-black) ;\">{{item.name}}</b>\r\n\r\n                                        </label>\r\n                                    </nz-radio-group>\r\n                                </nz-list-item-meta-title>\r\n                                <ul nz-list-item-actions>\r\n                                    <nz-list-item-action>\r\n                                        <a>\r\n                                            <i *ngIf=\"item._id != changeEdit\" (click)=\"editGroup(item._id)\"\r\n                                                class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                                                style=\"color: var(--ion-color-vh-black)\"></i>\r\n                                            <!-- <label [nzTooltipPlacement]=\"'left'\" [nzTooltipColor]=\"'var(--ion-color-vh-green)'\" nzTooltipTitle=\"{{item.default ? '': ('Set default' | translate)}}\" nzTooltipPlacement=\"top\" nz-button nz-tooltip [disabled]=\"item.default\" *ngIf=\"item._id == changeEdit\"\r\n                                                nz-checkbox (ngModelChange)=\"setDefault(item)\" [(ngModel)]=\"item.default\"></label> -->\r\n\r\n                                        </a>\r\n                                    </nz-list-item-action>\r\n                                    <nz-list-item-action>\r\n                                        <a nz-popconfirm nzPopconfirmTitle=\"{{'Delete' | translate}}\"\r\n                                            nzCancelText=\"{{'Cancel' | translate}}\"\r\n                                            (nzOnConfirm)=\"deleteGroup(item._id,i)\">\r\n                                            <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                                                style=\"color: var(--ion-color-vh-red)\"></i>\r\n                                        </a>\r\n                                    </nz-list-item-action>\r\n                                </ul>\r\n                            </ng-container>\r\n                        </nz-list-item>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterList>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancellist()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { ExpenseA4Component } from 'src/app/sales/components/print/expenses/expense-a4/expense-a4.component';\r\nimport { ExpensesA5Component } from 'src/app/sales/components/print/expenses/expenses-a5/expenses-a5.component';\r\nimport { ExpenseK80Col4Component } from 'src/app/sales/components/print/expenses/expense-k80-col4/expense-k80-col4.component';\r\nimport { ExpenseK80Col3Component } from 'src/app/sales/components/print/expenses/expense-k80-col3/expense-k80-col3.component';\r\nimport { ExpenseK57Col3Component } from 'src/app/sales/components/print/expenses/expense-k57-col3/expense-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  @ViewChild('nameGroup') nameGroup; // biến lấy tên nhóm (form kg cho dùng ngmodel)\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state;\r\n  data: any;\r\n  check: boolean = false; // biến bắt load dữ liệu khi xóa hoặc cập nhật phiếu chi\r\n  type_expense: any;\r\n  radioValue: any;\r\n  detailExpensesForm: FormGroup;\r\n  money_currency: any;\r\n  list_suppliers: any = [];\r\n  listPaymentBank: any = [];\r\n  disabled = true;\r\n  isDisabled: boolean = false; //biến cờ true khi phiếu ở trạng thái đã hủy\r\n  expendGroup: any = this.vhQuerySales.getlocalSpending_groups() // nhóm chi\r\n  /**Giới hạn thời gian cho tạo bill */\r\n  disabledDate = (current: Date): boolean => {\r\n    if (current.getTime() < (new Date(this.vhAuth.getStore().registrationdate).getTime() - 24 * 60 * 60 * 1000)) return true\r\n    return false\r\n  }\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhQuery: VhQuery,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state.data;\r\n    this.type_expense = this.data.bill_type;\r\n    if (this.type_expense == 26 || this.type_expense == 28) {\r\n      this.isDisabled = true;\r\n    }\r\n    if (this.data) this.initForm()\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.list_suppliers = this.vhQuerySales.getlocalSuppliers();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.money_currency = this.vhAlgorithm.vhnumeral(\".price\");\r\n    });\r\n  }\r\n\r\n  /**\r\n   * lấy các giá trị của bill khởi tạo cho form\r\n   * @example initForm()\r\n   */\r\n  initForm() {\r\n    this.detailExpensesForm = new FormGroup({\r\n      date: new FormControl(this.data.date),\r\n      customer: new FormControl({ value: this.data.bill_type == 12 || this.data.bill_type == 28 ? this.data.id_supplier : this.data.name, disabled: this.isDisabled }, Validators.compose([Validators.required])),\r\n      total: new FormControl({ value: this.data.total, disabled: this.isDisabled }, Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      content: new FormControl({ value: this.data.content, disabled: this.isDisabled }),\r\n      payment_type: new FormControl(this.data.payment_type),\r\n      wallet: new FormControl(this.vhQuerySales.getlocalWallet(this.data['id_wallet'])),\r\n      type_receipt: new FormControl(this.data.bill_type),\r\n      id_group: new FormControl({ value: this.data.bill_type == 8 || this.data.bill_type == 26 ? this.data.id_group : null, disabled: this.isDisabled }),\r\n    });\r\n    this.radioValue = this.data.payment_type.toString();\r\n  }\r\n  /**\r\n * bắt sk chọn ngày tạo bill và check validate hợp lệ\r\n * @param $event date\r\n * @example this.changeDate('2023-06-18T16:27:16.276Z')\r\n */\r\n  changeDate(event) {\r\n    this.vhQuerySales.getValidityDate(event)\r\n      .then((validitydate: any) => {\r\n        if (validitydate) {\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n          this.detailExpensesForm.controls['date'].setValue(new Date())\r\n        }\r\n        else {\r\n          this.updateBill({ date: this.detailExpensesForm.value.date })\r\n          this.data.date = event\r\n        }\r\n      })\r\n  }\r\n\r\n  \r\n  /** trở về trang danh sách phiếu chi\r\n   * @example this.goBack()\r\n   */\r\n  goBack() {\r\n    let data = { ...this.dataRestore.dataRestore }\r\n    data.check = true\r\n    this.router.navigate(['/sales/dashboard/manage/cashflow/expenses'], {\r\n      state: this.check ? data : this.dataRestore.dataRestore\r\n    });\r\n  }\r\n\r\n\r\n  /**Zorro modal */\r\n  isVisible = false;\r\n  /**\r\n   * mở modal hiển thị xác nhận xóa phiếu chi\r\n   * @param value : biến cờ check in hay ko\r\n   * @example this.showModal(true)\r\n   */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok của modal\r\n   * @example this.showModal(true)\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    if (this.vhAuth.checkMyPermission(\"cashflow_cancel_expenses\")) this.deleteExpenses();\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút hủy của modal\r\n   * @example this.showModal(true)\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  /**Xóa phiếu chi khỏi DB\r\n   * @example this.deleteExpenses()\r\n  */\r\n  deleteExpenses() {\r\n    this.vhComponent.showLoading(\"\").then(() => {\r\n      this.vhQuerySales\r\n        .deleteBill(this.data['_id'])\r\n        .then((res: any) => {\r\n          this.check = true\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.showToast(1000,\r\n            (this.languageService.translate(\"Expense has been deleted successfully\")) + \" \" + this.data.bill_code, \"success-toast\"\r\n          );\r\n          setTimeout(() => {\r\n            this.goBack();\r\n          }, 200);\r\n        }, err => { })\r\n    })\r\n  }\r\n\r\n  /** \r\n   * bắt thay đổi input total, cập nhật lại total và payment trong bill\r\n   * @example this.updateTotal()\r\n  */\r\n  updateTotal() {\r\n    if (this.money_currency.getRawValue() != \"\")\r\n      this.updateBill({ total: parseInt(this.money_currency.getRawValue()), payment: parseInt(this.money_currency.getRawValue()) })\r\n\r\n  }\r\n\r\n  /**Update bill trên DB\r\n   * @param data : các trường cần cập nhật\r\n   * @example this.updateBill({total : 100000})\r\n   */\r\n  updateBill(data) {\r\n    this.vhQuerySales.getValidityDate(this.detailExpensesForm.value.date)\r\n      .then((validitydate: any) => {\r\n        if (validitydate) {\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n          this.initForm()\r\n        }\r\n        else {\r\n          if (this.type_expense == 12) data['id_supplier'] = data['customer']\r\n          else { data['name'] = data['customer'] }\r\n          this.check = true\r\n          data['payment_type'] = this.data.payment_type;\r\n          data['total'] = parseInt(this.money_currency.getRawValue());\r\n          data['payment'] = parseInt(this.money_currency.getRawValue());\r\n          if (this.detailExpensesForm.valid) {\r\n            this.vhQuerySales.updateBill(this.data['_id'], data)\r\n              .then(res => {\r\n              })\r\n              .catch(err => console.error('update failed => ' + err))\r\n          }\r\n        }\r\n      })\r\n\r\n\r\n  }\r\n\r\n  /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n  * @example this.showPrint() \r\n  */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer) {\r\n        this.data['content'] = this.detailExpensesForm['value'].content\r\n        this.data['supplier'] = [12, 28].includes(this.type_expense) ? this.vhQuerySales.getlocalSupplier(this.data['id_supplier']) : this.detailExpensesForm['value'].customer\r\n        this.data['employee'] = this.vhAuth.getlocalEmployee(this.data['id_employee'])\r\n        this.data['total'] = parseInt(this.money_currency.getRawValue())\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), {\r\n          billInfo: this.data,\r\n          printer: printer,\r\n        }, false, false, `modal-print-${printer['_id']}`)\r\n          .then(modal => {\r\n            modal.onWillDismiss().then(dataReturn => { })\r\n          })\r\n      }\r\n    }, (err) => {\r\n      let name: any = 'Pay for liabilities / others'\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.router.navigate(['/sales/dashboard/manage/printer', 'page_desktop_expense'], { state: name }))\r\n    })\r\n  }\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExpenseK57Col3Component\r\n      case 'print_size_k80_3c': return ExpenseK80Col3Component\r\n      case 'print_size_k80_4c': return ExpenseK80Col4Component\r\n      case 'print_size_a5': return ExpensesA5Component\r\n      case 'print_size_a4': return ExpenseA4Component\r\n      default: return ExpenseA4Component\r\n    }\r\n  }\r\n  /*----------Print------------------*/\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_expense')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n\r\n  /***********Thêm xóa sủa nhóm chi********** */\r\n  isVisiblelist: boolean = false; // popup danh sách nhóm\r\n  activeButton: boolean = false\r\n  id_group_default: any = this.expendGroup.length ? this.expendGroup.filter(item => item.default == true) : []\r\n  defaultGroup = this.id_group_default.length ? this.id_group_default[0]._id : null\r\n  /**\r\n  * tạo nhóm chi lên DB\r\n  * @param nameGroup : tên nhóm chi khác\r\n  * @example this.addGroup('Tiền mua nội thất')\r\n  */\r\n  addGroup(nameGroup): void {\r\n    let index = this.expendGroup.findIndex(item => item.default)\r\n    this.activeButton = true\r\n    let value = {\r\n      name: nameGroup.value,\r\n      default: index != -1 ? false : true\r\n    }\r\n    if (value.name != \"\") {\r\n      this.vhQuerySales.addSpending_group(value).then((res) => {\r\n        this.expendGroup = [...this.expendGroup, res];\r\n        this.nameGroup.nativeElement.value = ' ';\r\n        this.activeButton = false\r\n      })\r\n    } else this.vhComponent.alertMessageDesktop(\"warning\", \"Chưa nhập tên nhóm\")\r\n  }\r\n  /**\r\n   * Cập nhật trường default của nhóm chi\r\n   * @param item : nhóm chi đã chọn\r\n   * @example this.setDefault(spending_group)\r\n   */\r\n  setDefault(item) {\r\n    let index = this.expendGroup.findIndex(item => item.default)\r\n    item.default = true\r\n    if (index != -1) {\r\n      this.expendGroup[index].default = false;\r\n      Promise.all([this.vhQuerySales.updateSpending_group(item._id, item), this.vhQuerySales.updateSpending_group(this.expendGroup[index]._id, this.expendGroup[index])])\r\n        .then(() => { })\r\n    } else {\r\n      this.vhQuerySales.updateSpending_group(item._id, item).then(() => { })\r\n    }\r\n  }\r\n  /**\r\n   * mở modal chọn nhóm chi\r\n   * @example this.openLisGroup()\r\n   */\r\n  openLisGroup() {\r\n    this.id_group_default = this.expendGroup.length ? this.expendGroup.filter(item => item.default == true) : []\r\n    this.defaultGroup = this.id_group_default.length ? this.id_group_default[0]._id : null\r\n    this.isVisiblelist = true\r\n  }\r\n  /**\r\n   * tắt modal chọn nhóm chi\r\n   * @example this.handleCancellist()\r\n   */\r\n  handleCancellist() {\r\n    this.isVisiblelist = false;\r\n  }\r\n\r\n  changeEdit: any = ''\r\n  /**\r\n  * gán _id của nhóm chi đã chọn vào biến changeEdit để update css ở giao diện\r\n  * @param _id : _id của nhóm chi đã chọn\r\n  */\r\n  editGroup(_id) {\r\n    this.changeEdit = _id\r\n  }\r\n  /**\r\n   * cập nhật tên nhóm chi\r\n   * @param item nhóm chi đã chọn\r\n   * @example this.saveEditGroup(item)\r\n   */\r\n  saveEditGroup(item) {\r\n    let value = {\r\n      name: item.name\r\n    }\r\n    this.vhQuerySales.updateSpending_group(item._id, value).then(() => {\r\n      this.changeEdit = \"\"\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * xóa nhóm chi lên DB và local\r\n   * @param _id : _id của nhóm chi đã chọn\r\n   * @param index : vị trí của nhóm chi trong mảng local\r\n   * @example this.deleteGroup('BDUWYHDIWUFRIWUHDE', 1)\r\n   */\r\n  deleteGroup(_id, index) {\r\n    this.vhQuerySales.deleteSpending_group(_id).then((bool) => {\r\n      if (bool) this.expendGroup.splice(index, 1)\r\n      else this.vhComponent.alertMessageDesktop(\"error\", \"Không xóa được nhóm này\")\r\n    })\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"10\" class=\"title left-all-content\">\r\n            <b>{{data.status_bill}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\" center-all-content\">\r\n\r\n        </div>\r\n        <div *ngIf=\"![26,28].includes(data.bill_type)\" nz-col nzSpan=\"7\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-data center-all-content\" nz-button nzType=\"default\" (click)=\"showPrint()\">\r\n                    <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                    {{'Print' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-data center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n                    <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                    {{'Delete' | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"padding-top: 20px;\">\r\n        <form nz-form [formGroup]=\"detailExpensesForm\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"large-size\"><b>{{'Payment method' | translate}}</b></div>\r\n                    <nz-form-item style=\"margin-top: 5px;\">\r\n                        <nz-radio-group formControlName=\"payment_type\" [(ngModel)]=\"radioValue\">\r\n                            <label nz-radio [nzDisabled]=\"disabled\" nzValue=\"1\">{{'Cash' | translate}}</label>\r\n                            <label nz-radio [nzDisabled]=\"disabled\" nzValue=\"3\"><b>{{'Account' |\r\n                                    translate}}:</b>{{radioValue == 3 ?\r\n                                data.payment_name : ''}}</label>\r\n                        </nz-radio-group>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"large-size\"><b>{{'Expenses information' | translate}}</b></div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Date' | translate}}</b></div>\r\n                        <nz-date-picker [nzDisabledDate]=\"disabledDate\" formControlName=\"date\" nzShowTime nzFormat=\"dd/MM/yyyy HH:mm:ss\"\r\n                        (ngModelChange)=\"changeDate($event)\" [nzDisabled]=\"isDisabled\">\r\n                        </nz-date-picker>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Amount'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control nzErrorTip=\"{{'Please enter amount of money' | translate}}\">\r\n                                <nz-input-group>\r\n                                    <input type=\"text\" maxlength=\"15\" class=\"price\" formControlName=\"total\" nz-input\r\n                                        placeholder=\"{{'Enter amount' | translate}}\" (blur)=\"updateTotal()\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Particulars' | translate}}</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input type=\"text\" formControlName=\"content\" nz-input\r\n                                        placeholder=\"{{'Enter particulars' | translate}}\"\r\n                                        (blur)=\"updateBill(detailExpensesForm.value)\" />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" *ngIf=\"type_expense == 12 || type_expense == 28\">\r\n                        <div class=\"medium-size\"><b>{{'Supplier name'|translate}}*</b></div>\r\n                        <nz-form-control nzErrorTip=\"{{'Select supplier' | translate}}\">\r\n                            <nz-select nzShowSearch [nzAllowClear]=\"false\" formControlName=\"customer\"\r\n                                (ngModelChange)=\"updateBill(detailExpensesForm.value)\" [nzDisabled]=\"isDisabled\"\r\n                                nzPlaceHolder=\"{{'Select supplier' | translate}}\" required>\r\n                                <nz-option *ngFor=\"let option of list_suppliers\" nzLabel=\"{{option.name}}\"\r\n                                    nzValue=\"{{option._id}}\">\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </nz-form-control>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\" *ngIf=\"type_expense == 8 || type_expense == 26\">\r\n                        <div class=\"medium-size\"><b>{{'Receiver'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <input type=\"text\" formControlName=\"customer\" nz-input\r\n                                        placeholder=\"{{'Enter particulars'}}\"\r\n                                        (blur)=\"updateBill(detailExpensesForm.value)\" required />\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n\r\n                </div>\r\n                <div nz-row *ngIf=\"type_expense == 8 || type_expense == 26\">\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div class=\"medium-size\"><b>{{'Expenditure group'|translate}}</b></div>\r\n                        <nz-form-control>\r\n                            <nz-select (ngModelChange)=\"updateBill(detailExpensesForm.value)\"\r\n                                [nzDropdownRender]=\"renderTemplate\" nzShowSearch [nzAllowClear]=\"false\"\r\n                                formControlName=\"id_group\">\r\n                                <nz-option *ngFor=\"let item of expendGroup\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                                </nz-option>\r\n                            </nz-select>\r\n                            <ng-template #renderTemplate>\r\n                                <nz-divider></nz-divider>\r\n                                <div class=\"container\">\r\n                                    <input type=\"text\" placeholder=\"{{'Enter expense group name' | translate}}\" nz-input\r\n                                        #nameGroup />\r\n                                    <a class=\"add-item\" (click)=\"addGroup(nameGroup);\">\r\n                                        <button class=\"button\" nz-button\r\n                                            [disabled]=\"nameGroup.value =='' || activeButton\">\r\n                                            <i style=\"padding: 0;\" nz-icon nzType=\"plus\"></i>{{\"Add\" | translate}}\r\n                                        </button>\r\n                                    </a>\r\n                                    <a>\r\n                                        <button nz-button class=\"button\">\r\n                                            <i (click)=\"openLisGroup()\" nz-icon nzType=\"menu\" nzTheme=\"outline\"></i>\r\n                                        </button>\r\n\r\n                                    </a>\r\n                                </div>\r\n                            </ng-template>\r\n\r\n                        </nz-form-control>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!--Modal delete-->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm' | translate}}\" (nzOnCancel)=\"handleCancel()\"\r\n    nzCancelText=\"{{'Cancel' | translate}}\" (nzOnOk)=\"handleOk()\">\r\n    <ng-container *nzModalContent>\r\n        <div>{{'Are you sure to cancel this expenses?' | translate}}</div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<!-- danh sách Expenditure group -->\r\n<nz-modal [nzFooter]=\"modalFooterList\" *ngIf=\"isVisiblelist\" [(nzVisible)]=\"isVisiblelist\"\r\n    nzTitle=\"{{'Expenditure group'|translate}}\" (nzOnCancel)=\"handleCancellist()\" [nzMaskClosable]=\"false\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"20\" class=\"infinite-container\">\r\n                    <nz-list>\r\n                        <nz-list-item *ngFor=\"let item of expendGroup; let i =index\">\r\n                            <ng-container>\r\n                                <nz-list-item-meta-title style=\"width: 100%;\">\r\n                                    <input (blur)=\"saveEditGroup(item)\" *ngIf=\"item._id == changeEdit\"\r\n                                        style=\"border: none; border-bottom: 1px solid gray; font-weight: 600; width: 80%;\"\r\n                                        type=\"text\" [(ngModel)]=\"item.name\" nz-input />\r\n                                    <nz-radio-group *ngIf=\"item._id != changeEdit\" [(ngModel)]=\"defaultGroup\"\r\n                                        (ngModelChange)=\"setDefault(item)\">\r\n                                        <label [nzTooltipPlacement]=\"'left'\"\r\n                                            [nzTooltipColor]=\"'var(--ion-color-vh-green)'\" [nzValue]=\"item._id\"\r\n                                            nzTooltipTitle=\"{{item.default ? '': ('Set default' | translate)}}\"\r\n                                            nzTooltipPlacement=\"top\" nz-button nz-tooltip nz-radio>\r\n                                            <b\r\n                                                style=\"font-size: 0.9rem; color: var(--ion-color-vh-black) ;\">{{item.name}}</b>\r\n\r\n                                        </label>\r\n                                    </nz-radio-group>\r\n                                </nz-list-item-meta-title>\r\n                                <ul nz-list-item-actions>\r\n                                    <nz-list-item-action>\r\n                                        <a>\r\n                                            <i *ngIf=\"item._id != changeEdit\" (click)=\"editGroup(item._id)\"\r\n                                                class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                                                style=\"color: var(--ion-color-vh-black)\"></i>\r\n                                            <label [nzTooltipPlacement]=\"'left'\"\r\n                                                [nzTooltipColor]=\"'var(--ion-color-vh-green)'\"\r\n                                                nzTooltipTitle=\"{{item.default ? '': ('Set default' | translate)}}\"\r\n                                                nzTooltipPlacement=\"top\" nz-button nz-tooltip [disabled]=\"item.default\"\r\n                                                *ngIf=\"item._id == changeEdit\" nz-checkbox\r\n                                                (ngModelChange)=\"setDefault(item)\" [(ngModel)]=\"item.default\"></label>\r\n\r\n                                        </a>\r\n                                    </nz-list-item-action>\r\n                                    <nz-list-item-action>\r\n                                        <a nz-popconfirm nzPopconfirmTitle=\"{{'Delete' | translate}}\"\r\n                                            nzCancelText=\"{{'Cancel' | translate}}\"\r\n                                            (nzOnConfirm)=\"deleteGroup(item._id,i)\">\r\n                                            <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                                                style=\"color: var(--ion-color-vh-red)\"></i>\r\n                                        </a>\r\n                                    </nz-list-item-action>\r\n                                </ul>\r\n                            </ng-container>\r\n                        </nz-list-item>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterList>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancellist()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NavController, Platform } from '@ionic/angular';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { DatePipe } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-expenses',\r\n  templateUrl: './expenses.component.html',\r\n  styleUrls: ['./expenses.component.scss']\r\n})\r\nexport class ExpensesComponent implements OnInit {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  type: any;\r\n  keySearch: any = \"\"\r\n  expenses: any = [];\r\n  expensesShow: any = [];\r\n  title: any;\r\n  value_sort: any = '1';\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state // biến lấy lại giá trị khi chuyền stage qua lại\r\n  radioValue = 'all'\r\n  filter_type: any = [];\r\n  expensesTotal = 0;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public navCtr: NavController,\r\n    public platform: Platform,\r\n    public languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private datePipe: DatePipe,\r\n    private vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    this.filterTitle = \"Latest\"\r\n\r\n    if (this.dataRestore) {\r\n      this.value_sort = this.dataRestore.value_sort;\r\n      this.date = [new Date(this.dataRestore.startTime), new Date(this.dataRestore.endTime)];\r\n      this.keySearch = this.dataRestore.keySearch;\r\n      this.radioValue = this.dataRestore.radioValue ? this.dataRestore.radioValue : 'all';\r\n      if (!this.dataRestore.check) this.expenses = this.dataRestore.expenses;\r\n      else this.getExpenses()\r\n      this.sortFilter(this.value_sort);\r\n      this.searchBill(this.keySearch)\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // làm mới nhóm chi trong local\r\n    this.vhQuerySales.refreshLocalSpending_groups().then(() => {\r\n      this.filterTitle = \"Latest\"\r\n      this.date[0].setHours(0, 0, 0, 0)\r\n      this.date[1].setHours(23, 59, 59, 59)\r\n      // lấy dữ liệu nhóm chi và gán vô biến filter_type\r\n      this.filter_type = [\r\n        {\r\n          name: this.languageService.translate(\"All\"),\r\n          value: 'all',\r\n          bill_type: [8, 26, 12, 28],\r\n          type: 'all'\r\n        },\r\n        {\r\n          name: this.languageService.translate(\"Pay for supplier liabilities\"),\r\n          value: '1',\r\n          bill_type: [12, 28],\r\n          type: 'supplier'\r\n        }\r\n      ]\r\n        .concat(this.vhQuerySales.getlocalSpending_groups().map(item => {\r\n          return {\r\n            name: item.name,\r\n            value: item._id,\r\n            bill_type: [8, 26],\r\n            type: 'other'\r\n          }\r\n        }))\r\n      \r\n    })\r\n\r\n\r\n  }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    // tính chiều cao của table để scroll\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 180 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * get danh sách hóa đơn thuộc bill-type của phiếu chi [8, 26, 12, 28]\r\n   * @example this.getExpenses() \r\n   */\r\n  getExpenses() {\r\n    this.expensesTotal = 0;\r\n    let data = this.filter_type.find(e => e.value == this.radioValue)\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0]), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, bill_type: { $in: data ? data.bill_type : [8, 26, 12, 28] }, id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } }, {})\r\n        .then((res: any) => {\r\n          if (data && data.type == 'other') res = res.filter(item => item.id_group == data.value)\r\n          this.vhComponent.hideLoading(0);\r\n          // gán danh sách hóa đơn get dc vào biến expenses\r\n          this.expenses = res.map(item => {\r\n            this.expensesTotal = this.expensesTotal + item.total\r\n            // xử lý các trường của hóa đơn để show ra giao diện\r\n            let element = {\r\n              ...item, status_bill: this.checkBillType(item),\r\n              payment_name: this.checkPayment(item.payment_type, item.payment_type == 3 ? item.id_wallet : null),\r\n              partner_name: this.vhAuth.getlocalEmployee(item.id_employee).name,\r\n              name: ([12, 28].includes(item.bill_type)) ? this.vhQuerySales.getlocalSupplier(item.id_supplier).name : item.name\r\n            }\r\n            return element\r\n          })\r\n          this.sortFilter(this.value_sort);\r\n          this.searchBill(this.keySearch)\r\n        })\r\n    })\r\n\r\n  }\r\n\r\n   /**\r\n   * lọc expenses theo các trường ['bill_code', 'partner_name', 'employee_name', 'payment_name', 'status', 'phone'] của bill so với giá trị truyền vào, gán vào biến expensesShow để hiển thị\r\n   * @param value \r\n   * @example this.searchBill('040623A001')\r\n   */\r\n  searchBill(value: string) {\r\n    this.keySearch = value;\r\n    if (this.keySearch.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(this.keySearch.trim().toLowerCase())\r\n      this.expensesShow = this.vhAlgorithm.searchList(val, this.expenses, ['bill_code', 'partner_name', 'payment_name', 'name', 'status_bill'])\r\n    } else this.expensesShow = [...this.expenses]\r\n  }\r\n\r\n  /**\r\n   * trả vê tên phương thức thanh toán \r\n   * @param payment_type \r\n   * @param id_wallet \r\n   * @example this.checkPayment(1)\r\n   * @returns string\r\n   */\r\n  checkPayment(payment_type, id_wallet?) {\r\n    switch (payment_type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return `${this.vhQuerySales.getlocalWallet(id_wallet)['name']}`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trả vê tên hóa đơn theo bill_type tương ứng \r\n   * @param bill_type  \r\n   * @example this.checkBillType(8)\r\n   * @returns string\r\n   */\r\n  checkBillType(item) {\r\n    //kiểm tra loại hóa đơn\r\n    switch (item.bill_type) {\r\n      case 8: {\r\n        return (this.languageService.translate(\"Other expenses\") + ' (' +  this.vhQuerySales.getlocalSpending_group(item.id_group)?.name+')');\r\n      }\r\n      case 12: {\r\n        return (this.languageService.translate(\"Pay for supplier liabilities\"));\r\n      }\r\n      case 26: {\r\n        return (this.languageService.translate(\"Other expenses (cancelled)\"));\r\n      }\r\n      case 28: {\r\n        return (this.languageService.translate(\"Pay for supplier liabilities (cancelled)\"));\r\n      }\r\n    }\r\n  }\r\n  \r\n  public filterTitle: 'High to Low value' | 'Low to High value' | 'Oldest' | 'Latest' = \"Oldest\"\r\n\r\n  /**\r\n   * sort biến expenses theo giá trị của filterTitle\r\n   * @param value : 1 | 2 | 3 | 4\r\n   * @example this.sortFilter(1)\r\n   */\r\n  sortFilter(value) {\r\n    this.value_sort = value;\r\n    switch (parseInt(value)) {\r\n      case 1:\r\n        this.expenses.sort((prev, next) => {\r\n          return Date.parse(next.date) - Date.parse(prev.date)\r\n        });\r\n        this.filterTitle = \"Latest\";\r\n        break;\r\n      case 2:\r\n        this.expenses.sort((prev, next) => {\r\n          return Date.parse(prev.date) - Date.parse(next.date)\r\n        });\r\n        this.filterTitle = \"Oldest\";\r\n        break;\r\n      case 3:\r\n        this.expenses.sort((prev, next) => {\r\n          return (prev.total * (1 + prev.tax / 100)) - (next.total * (1 + next.tax / 100))\r\n        });\r\n        this.filterTitle = \"Low to High value\";\r\n        break;\r\n      case 4:\r\n        this.expenses.sort((prev, next) => {\r\n          return (next.total * (1 + next.tax / 100)) - (prev.total * (1 + prev.tax / 100))\r\n        });\r\n        this.filterTitle = \"High to Low value\";\r\n        break;\r\n    }\r\n    this.searchBill(this.keySearch);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n  * bắt sk khi thay đổi ngày xem báo cáo , kiểm tra hợp lệ và gán vào trường startTime,endTime của cashbook\r\n  * @example this.changeTime(['2023-06-07T01:33:38.033Z','2023-06-07T01:33:38.033Z'])\r\n  */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0, 0, 0, 0)).getTime() - new Date(event[0].setHours(0, 0, 0, 0)).getTime() <= this.fncService.checkDateReport() * 86000000) {\r\n      //this.getExpenses(new Date(this.date[0].setHours(0, 0, 0, 0)), new Date(this.date[1].setHours(23, 59, 59, 59)));\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"))\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * router về trang dòng tiền\r\n   * @example this.goBack()\r\n   */\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/cashflow']);\r\n  }\r\n\r\n\r\n  /* -----Pagination----- */\r\n  list_show_receipts_pagination: any;\r\n  onCurrentPageDataChange(value) {\r\n    this.list_show_receipts_pagination = value;\r\n  }\r\n  /**--------------------- */\r\n\r\n  /**\r\n   * router qua trang thêm phiếu chi\r\n   * @example this.addExpense()\r\n   */\r\n  addExpense() {\r\n    // các state truyền qua là dữ liệu hiện tại của trang danh sách để khi back lại vãn giữ các giá trị cũ\r\n    let dataRestore = { startTime: this.date[0], endTime: this.date[1], keySearch: this.keySearch, expenses: this.expenses, value_sort: this.value_sort , radioValue :this.radioValue}\r\n    this.router.navigate(['/sales/dashboard/manage/cashflow/expenses/add'], {\r\n      state: dataRestore\r\n    });\r\n  }\r\n\r\n  \r\n  /**\r\n   * router qua trang chi tiết phiếu chi\r\n   * @param data : phiếu chi được chọn\r\n   * @example this.gotoDetailExpense(data)\r\n   */\r\n  gotoDetailExpense(data) {\r\n    let dataRestore = { startTime: this.date[0], endTime: this.date[1], keySearch: this.keySearch, expenses: this.expenses, value_sort: this.value_sort, radioValue : this.radioValue }\r\n    this.router.navigate(['/sales/dashboard/manage/cashflow/expenses/detail'], {\r\n      state: {\r\n        data: data,\r\n        dataRestore\r\n      }\r\n    })\r\n  }\r\n  /** Zorro modal */\r\n  isVisible = false;\r\n  /**\r\n   * mở modal chọn bộ lọc phiếu chi\r\n   * @example this.showModal()\r\n   */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal bộ lọc phiếu chi\r\n   * @example this.handleOk()\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    // this.checkTypeBill(this.radioValueInvoice);\r\n    // this.datafilter['id_wallet'] = this.radioValueAccount;\r\n    // this.datafilter['id_employee'] = this.radioValueCashier;\r\n    //this.getData();\r\n  }\r\n  \r\n  /**\r\n   * bắt sk nhấn nút hủy của modal bộ lọc phiếu chi\r\n   * @example this.handleCancel()\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  nameCol = false;\r\n  payment_nameCol = false;\r\n  partner_nameCol = false;\r\n  status_billCol = false;\r\n  totalCol = false;\r\n   /** Hàm thực hiện sắp xếp theo tên trường cần sort\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   * @example this.sortTable('name')\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'date':\r\n        if (this.dateCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortDatebyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortDatebyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if (this.bill_codeCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortStringbyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortStringbyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'payment_name':\r\n        if (this.payment_nameCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'partner_name':\r\n        if (this.partner_nameCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'status_bill':\r\n        if (this.status_billCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n      case 'total':\r\n        if (this.totalCol) {\r\n          this.expensesShow = this.vhAlgorithm.sortNumberbyASC([...this.expensesShow], colName);\r\n        } else {\r\n          this.expensesShow = this.vhAlgorithm.sortNumberbyDESC([...this.expensesShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////EXPORT REPORT/////////////////////////////////////////\r\n  /**\r\n   * chuyển dạng date '2023-06-07T01:33:38.033Z' sang string với format '07_06_2023'\r\n   * @param date \r\n   * @returns string date dạng dd_MM_yyyy\r\n   * @example this.format_date('2023-06-07T01:33:38.033Z')\r\n   */\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd_MM_yyyy\")\r\n  }\r\n  /**--------------------- */\r\n  /** biến cờ để check mỗi lần chỉ tải về 1 lần  */\r\n  status: boolean = false;\r\n  /**\r\n   * Xuát ra file .xlxs và tải xuống máy\r\n   * @example this.exportCSV()\r\n   */\r\n  exportCSV() {\r\n    this.status = true;\r\n    let data = [];\r\n    // tên file tải xuống \r\n    let name = `${this.languageService.translate('Expenses')}_${this.languageService.translate(this.filter_type.find(e => e.value == this.radioValue).name)}_${this.languageService.translate(\"_from\")}_${this.format_date(this.date[0])}_${this.languageService.translate(\"_to\")}_${this.format_date(this.date[1])}_${this.vhAlgorithm.changeAlias(this.vhQuerySales.getDefaultBranch().name).replace(/\\s/g, \"_\")}`;\r\n\r\n    // dòng đầu tiên của file\r\n    let total: any = new Object();\r\n    total[this.languageService.translate('No.')] = \"\";\r\n    total[this.languageService.translate('Date')] = this.languageService.translate('Total');\r\n\r\n    total[this.languageService.translate('Bill code')] = \"\";\r\n    total[this.languageService.translate('Content')] = \"\";\r\n    total[this.languageService.translate('Payer')] = \"\";\r\n    total[this.languageService.translate('Payment method')] = \"\";\r\n    total[this.languageService.translate('Employee')] = \"\";\r\n    total[this.languageService.translate('Method')] = \"\";\r\n    total[this.languageService.translate('Total')] = this.expensesTotal;\r\n\r\n    data.push(total);\r\n\r\n    // danh sách dữ liệu cho các dòng tiếp theo\r\n    for (let i in this.list_show_receipts_pagination) {\r\n      let item: any = new Object();\r\n      item[this.languageService.translate('No.')] = i;\r\n      item[this.languageService.translate('Date')] = this.format_date(this.list_show_receipts_pagination[i].date);\r\n\r\n      item[this.languageService.translate('Bill code')] = this.list_show_receipts_pagination[i].bill_code;\r\n      item[this.languageService.translate('Content')] = this.list_show_receipts_pagination[i].content;\r\n      item[this.languageService.translate('Payer')] = this.list_show_receipts_pagination[i].name;\r\n      item[this.languageService.translate('Payment method')] = this.list_show_receipts_pagination[i].payment_name;\r\n      item[this.languageService.translate('Employee')] = this.list_show_receipts_pagination[i].partner_name;\r\n      item[this.languageService.translate('Method')] = this.list_show_receipts_pagination[i].status_bill;\r\n      item[this.languageService.translate('Total')] = this.list_show_receipts_pagination[i].total;\r\n      data.push(item);\r\n    }\r\n\r\n    // xuất ra file xlxs và tải xuống\r\n    this.vhAlgorithm.exportXLSX(data, name).then(() => this.status = false).catch(err => this.status = false)\r\n    if (!this.list_show_receipts_pagination.length) this.vhAlgorithm.exportXLSX(data, name).then(() => this.status = false).catch(err => this.status = false)\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"3\" class=\"title left-all-content\">\r\n            <b>{{'Expenses' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"center-all-content\">\r\n            <nz-select nzShowSearch nzBorderless [(ngModel)]=\"value_sort\" (ngModelChange)=\"sortFilter($event)\">\r\n                <nz-option nzLabel=\"{{'Latest' | translate}}\" nzValue=\"1\"></nz-option>\r\n                <nz-option nzLabel=\"{{'Oldest' | translate}}\" nzValue=\"2\"></nz-option>\r\n                <nz-option nzLabel=\"{{'Low to High value' | translate}}\" nzValue=\"3\"></nz-option>\r\n                <nz-option nzLabel=\"{{'High to Low value' | translate}}\" nzValue=\"4\"></nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div class=\"center-all-content\" nz-col nzSpan=\"5\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box [value]=\"keySearch ? keySearch : ''\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for receipts code, payer, payment, status' | translate}}\"\r\n                    (keyup)=\"searchBill(box.value)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <div style=\"margin-right: 5px;\">\r\n                <div class=\"center-all-content date-picker-cus\">\r\n                    <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\">\r\n                    </nz-range-picker>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <button   class=\" center-all-content\" nz-button\r\n                    nzType=\"default\" (click)=\"showModal()\">\r\n                    <i nz-icon nzType=\"filter\" nzTheme=\"outline\"></i>\r\n                    {{'Filter' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"getExpenses()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n            <div>\r\n                <button (click)=\"addExpense()\" class=\"btn-add\" nz-button nzType=\"default\">\r\n                    <i style=\"padding-top: 3px;\" nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Create expenses' | translate}}\r\n                </button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"exportCSV()\">\r\n                    <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                    {{'Download' | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"padding-top: 20px; height: 85%;\">\r\n        <div class=\"medium-size\">{{'Total' | translate}} <span class=\"medium-size\"\r\n                style=\"color: red\">{{expensesShow.length}}</span> {{'expenses' | translate}}</div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n            #rowSelectionTable nzShowPagination nzShowSizeChanger\r\n            (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\" nzNoResult=\"{{'Not expenses yet'| translate}}\"\r\n            [nzData]=\"expensesShow\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\" (click)=\"dateCol = !dateCol;sortTable('date')\">\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\"\r\n                        (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                        <b>{{\"Invoice code\" | translate}}</b>\r\n                        <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th class=\"medium-size\"><b>{{'Content' | translate}}</b></th>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Receiver' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\"\r\n                        (click)=\"payment_nameCol = !payment_nameCol;sortTable('payment_name')\">\r\n                        <b>{{'Payment method' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"payment_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\"\r\n                        (click)=\"partner_nameCol = !partner_nameCol;sortTable('partner_name')\">\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"partner_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" class=\"medium-size\"\r\n                        (click)=\"status_billCol = !status_billCol;sortTable('status_bill')\">\r\n                        <b>{{'Method' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"status_billCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='right' class=\"medium-size\"\r\n                        (click)=\"totalCol = !totalCol;sortTable('total')\">\r\n                        <b>{{'Total' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"totalCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_show_receipts_pagination\" style=\"cursor: pointer;\"\r\n                    (click)=\"gotoDetailExpense(data)\">\r\n                    <td class=\"medium-size\">{{ data.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                    <td class=\"medium-size\">{{ data.bill_code}}</td>\r\n                    <td class=\"medium-size\">{{ data.content }}</td>\r\n                    <td class=\"medium-size\">{{ data.name}}</td>\r\n                    <td class=\"medium-size\">{{ data.payment_name}}</td>\r\n                    <td class=\"medium-size\">{{ data.partner_name }}</td>\r\n                    <td class=\"medium-size\" [ngStyle]=\"{'color': [26,28].includes(data.bill_type) ? 'var(--ion-color-vh-red)':\r\n            'var(--ion-color-vh-black)'}\">\r\n                        {{data.status_bill}}</td>\r\n                    <td class=\"money-right\">{{ vhAlgorithm.vhcurrencyunit_symbol(data.total)}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n    <div nz-row class=\"bg-footer\" id=\"footer-cashbook\" *ngIf=\"expensesShow.length\">\r\n      <div nz-col nzSpan=\"24\" class=\"center-left small-size\">\r\n        {{'Expense total'|translate}}:\r\n        <b style=\"color: var(--ion-color-vh-green);\">&nbsp;\r\n          {{vhAlgorithm.vhcurrencyunit_symbol(expensesTotal)}}\r\n        </b>\r\n      </div>\r\n    </div>\r\n</nz-layout>\r\n<!-- Zorro modal filter-->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Please select the filter' | translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\" [nzBodyStyle]=\"{height: '450px'}\">\r\n\r\n    <ng-container *nzModalContent>\r\n        <nz-collapse>\r\n            <nz-collapse-panel nzHeader=\"{{'Expense type' | translate}}\" [nzActive]=\"true\">\r\n                <nz-radio-group [(ngModel)]=\"radioValue\">\r\n                    <label *ngFor=\"let item of filter_type\" nz-radio nzValue=\"{{item.value}}\">{{item.name | translate}}</label>\r\n                </nz-radio-group>\r\n            </nz-collapse-panel>\r\n        </nz-collapse>\r\n    </ng-container>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ExpensesComponent } from './expenses.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ExpensesComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component: AddComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component:  DetailComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ExpensesComponent, AddComponent, DetailComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    TranslateModule,\r\n    IonicModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class ExpensesModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}