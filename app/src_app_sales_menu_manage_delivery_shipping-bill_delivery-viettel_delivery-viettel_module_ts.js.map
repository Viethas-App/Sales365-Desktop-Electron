{"version":3,"file":"src_app_sales_menu_manage_delivery_shipping-bill_delivery-viettel_delivery-viettel_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/create-bill-customer-viettel/create-bill-customer-viettel.component.ts","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/create-bill-customer-viettel/create-bill-customer-viettel.component.html","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/create-bill-retail-viettel/create-bill-retail-viettel.component.ts","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/create-bill-retail-viettel/create-bill-retail-viettel.component.html","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/delivery-viettel.component.ts","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/delivery-viettel.component.html","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/delivery-viettel.module.ts","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/detail-bill-viettel/detail-bill-viettel.component.ts","./src/app/sales/menu/manage/delivery/shipping-bill/delivery-viettel/detail-bill-viettel/detail-bill-viettel.component.html"],"sourcesContent":["import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuerySales, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { DeliveryA45Component } from 'src/app/sales/components/print/delivery/A45/delivery-a45/delivery-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { ViettelService } from '../../../services/viettelService/viettel.service';\r\n\r\n@Component({\r\n  selector: 'app-create-bill-customer-viettel',\r\n  templateUrl: './create-bill-customer-viettel.component.html',\r\n  styleUrls: ['./create-bill-customer-viettel.component.scss']\r\n})\r\nexport class CreateBillCustomerViettelComponent implements OnInit {\r\n\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  billDetails: Array<any> = []\r\n  addInformation: FormGroup\r\n  deliveryInfo: FormGroup\r\n  productInfo: FormGroup\r\n  data_delivery: any\r\n  serviceSelected: any = {}\r\n  data_delivery_recei: any = {}\r\n  MONEY_COLLECTION: any\r\n  PRODUCT_PRICE: any\r\n  invoice: VhSaleInvoices\r\n  listProvinceViettel: Array<any> = []\r\n  listDistrictViettel: Array<any> = []\r\n  listWardViettel: Array<any> = []\r\n  listServiceViettel: Array<any> = []\r\n  listServiceAddViettel: Array<any> = []\r\n  isLoading: boolean = false\r\n  dataAddress: any = { SENDER_FULLNAME: '', SENDER_ADDRESS: '', SENDER_PHONE: '', SENDER_WARD: '', SENDER_DISTRICT: '', SENDER_PROVINCE: '', WARDS_NAME: '', DISTRICT_NAME: '', PROVINCE_NAME: '' }\r\n  heightScroll: any = '100px'\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private vhQuerySales: VhQuerySales,\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private viettelPost: ViettelService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modalService: NzModalService,\r\n    private datePipe: DatePipe\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n  initForm() {\r\n    let customer = this.vhQuerySales.getlocalCustomer(this.dataRestore.billInfo.id_customer)\r\n    this.addInformation = new FormGroup({\r\n      RECEIVER_FULLNAME: new FormControl(customer.name, [Validators.required, Validators.minLength(6)]),\r\n      RECEIVER_PHONE: new FormControl(customer.phone, [Validators.required, Validators.minLength(10), Validators.maxLength(10)]),\r\n      RECEIVER_ADDRESS: new FormControl('', Validators.required),\r\n      RECEIVER_PROVINCE: new FormControl('', Validators.required),\r\n      RECEIVER_DISTRICT: new FormControl('', Validators.required),\r\n      RECEIVER_WARD: new FormControl('', Validators.required),\r\n    })\r\n    this.deliveryInfo = new FormGroup({\r\n      ORDER_PAYMENT: new FormControl('2', Validators.required),\r\n      ORDER_SERVICE: new FormControl('', Validators.required),\r\n      ORDER_SERVICE_ADD: new FormControl(''),\r\n      PRODUCT_PRICE: new FormControl(0),\r\n      MONEY_COLLECTION: new FormControl(0),\r\n      ORDER_NOTE: new FormControl(''),\r\n    })\r\n    this.productInfo = new FormGroup({\r\n      PRODUCT_WEIGHT: new FormControl('', [Validators.required, Validators.min(0.0000000000000000000001), Validators.max(99999999999)]),\r\n      PRODUCT_LENGTH: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n      PRODUCT_WIDTH: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n      PRODUCT_HEIGHT: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n    })\r\n\r\n    this.getData();\r\n  }\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.MONEY_COLLECTION = this.vhAlgorithm.vhnumeral('.MONEY_COLLECTION');\r\n      this.PRODUCT_PRICE = this.vhAlgorithm.vhnumeral('.PRODUCT_PRICE');\r\n    });\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector('productInfo'))\r\n      this.heightScroll = document.querySelector('productInfo').clientHeight - 156 + 'px'\r\n\r\n    this.cdRef.detectChanges()\r\n  }\r\n  //lấy dữ liệu billDetail\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill_details_byId_bill(this.dataRestore.billInfo._id),\r\n        this.viettelPost.getListInventory(this.dataRestore.data_delivery.token),\r\n        this.vhQuerySales.refreshLocalAddresss(),\r\n      ]).\r\n        then(([invoice, stores, address]: any) => {\r\n          this.vhComponent.hideLoading(0)\r\n          this.billDetails = invoice.map(item => {\r\n            let name_product = this.vhQuerySales.getlocalDetailProduct(item.id_subproduct ? item.id_subproduct : item.id_product).name;\r\n            return { ...item, name_product: name_product, }\r\n          })\r\n          this.invoice = new VhSaleInvoices(this.dataRestore.billInfo, this.billDetails, this.vhQuerySales);\r\n          let listAddresssRecei: Array<any> = this.vhQuerySales.getlocalAddresss().filter(item => item.id_delivery == this.dataRestore.data_delivery._id && item.type == 7 && item.id_customer == this.dataRestore.billInfo.id_customer);\r\n\r\n          this.data_delivery_recei = listAddresssRecei.sort((a, b) => Date.parse(b.date) - Date.parse(a.date))[0]\r\n          this.data_delivery_recei && this.attatchDataAddressToForm(this.data_delivery_recei)\r\n\r\n          if (!stores.error) this.addDataStore(stores.data, this.dataRestore.data_delivery.GROUPADDRESS_ID)\r\n          let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n        if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n\r\n        }).catch(err => { console.error(err); this.vhComponent.hideLoading(0) })\r\n    })\r\n  }\r\n\r\n  addDataStore(stores: Array<any>, GROUPADDRESS_ID) {\r\n    let store = stores.find(item => item.groupaddressId == GROUPADDRESS_ID)\r\n    if (store)\r\n      this.dataAddress = {\r\n        ...this.dataAddress,\r\n        SENDER_FULLNAME: store.name, SENDER_ADDRESS: store.address, SENDER_PHONE: store.phone,\r\n        SENDER_WARD: store.wardsId, SENDER_DISTRICT: store.districtId, SENDER_PROVINCE: store.provinceId,\r\n\r\n      }\r\n  }\r\n  checkPrinter: boolean = false;\r\n  goBack(success?) {\r\n    this.router.navigate([\"/sales/dashboard/manage/delivery/shipping-bill/delivery-viettel\"], {\r\n      state: { dataRestore: this.dataRestore }\r\n    })\r\n  }\r\n  createOrder(print?) {\r\n    \r\n    this.modalService.confirm({\r\n      nzTitle: this.lang.translate(\"Do you want to create order ?\"),\r\n      nzCancelText: this.lang.translate(\"Cancel\"),\r\n      nzOnOk: () => {\r\n        return new Promise<any>((resolve) => {\r\n          this.viettelPost.createOrderViettelPost(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue(), ...this.dataRestore.data_delivery, DELIVERY_DATE: this.datePipe.transform(new Date(), 'dd/MM/yyyy HH:mm:ss') }, this.billDetails, this.invoice.getBillCode()).then((res: any) => {\r\n            if (!res.error) {\r\n              this.invoice.setOrderCode(res.data.ORDER_NUMBER)\r\n              this.invoice.setDeliveryViettelData({ created: new Date().toISOString(), ...res.data, RECEIVER_FULLNAME: this.addInformation.value.RECEIVER_FULLNAME, RECEIVER_PHONE: this.addInformation.value.RECEIVER_PHONE, ORDER_PAYMENT: this.deliveryInfo.value.ORDER_PAYMENT })\r\n              this.vhQuerySales.updateBill_Billdetail(this.invoice.getID(), this.invoice.getCreateUpdateInvoice(1), this.invoice.getCreateUpdateInvoiceDetail()).then((data: any) => {\r\n                resolve(true)\r\n                this.dataRestore.reload = true\r\n                this.vhComponent.alertMessageDesktop('success', this.lang.translate('Create order successfully !'))\r\n                if (print) this.showPrint(this.invoice.getDeliveryViettelData())\r\n                else this.goBack()\r\n              })\r\n            } else this.vhComponent.alertMessageDesktop('error', res.message)\r\n          }).catch(err => this.vhComponent.alertMessageDesktop('error', err.message))\r\n        })\r\n      },\r\n      nzOnCancel: () => { },\r\n    })\r\n  }\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  showPrint(res) {\r\n    this.checkPrint().then((printer) => {\r\n      this.vhComponent.showModal(this.renderPrintPage(printer['_id']), {\r\n        billInfo: {\r\n          ...this.dataRestore.billInfo, data: this.viettelPost.renderFormatPrintOrder({ ...this.dataAddress, ...res, ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, MONEY_COLLECTION: this.deliveryInfo.value.MONEY_COLLECTION }), order_code: res.ORDER_NUMBER\r\n        },\r\n        billDetails: this.billDetails,\r\n        data_delivery: { ...this.data_delivery, type: 5 },\r\n        printer\r\n      }, false, false, \"modal-print\").then(modal => {\r\n        modal.onWillDismiss().then(() => {\r\n          this.goBack(true);\r\n        })\r\n      })\r\n\r\n    }, (err) => {\r\n      this.goBack(true)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'A4') {\r\n    switch (type) {\r\n      default: return DeliveryA45Component\r\n    }\r\n  }\r\n  customDataBillInfo(res) {\r\n\r\n  }\r\n  //------------------------------------Xã huyện tỉnh------------------------------------\r\n\r\n  getAllService() {\r\n    if (this.addInformation.valid && this.productInfo.valid) {\r\n      this.viettelPost.getServiceViettel(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue() }).then((result: any) => {\r\n        if (result.length) this.listServiceViettel = result\r\n        else this.vhComponent.alertMessageDesktop('error', result.message)\r\n        this.getPriceOfServiceSelected()\r\n      })\r\n    }\r\n  }\r\n  changeService(event) {\r\n    this.serviceSelected = {}\r\n    this.listServiceAddViettel = this.listServiceViettel.find(item => item.MA_DV_CHINH == event).EXTRA_SERVICE\r\n    this.getPriceOfServiceSelected()\r\n  }\r\n  getPriceSpecially() {\r\n    let ORDER_SERVICE_ADD: string = ''\r\n    this.listServiceAddViettel.forEach(item => {\r\n      if (item.checked) ORDER_SERVICE_ADD += `${item.SERVICE_CODE},`\r\n    })\r\n    ORDER_SERVICE_ADD = ORDER_SERVICE_ADD.slice(0, ORDER_SERVICE_ADD.lastIndexOf(','))\r\n    this.deliveryInfo.controls.ORDER_SERVICE_ADD.setValue(ORDER_SERVICE_ADD)\r\n    this.getPriceOfServiceSelected()\r\n  }\r\n\r\n  getPriceOfServiceSelected() {\r\n    if (this.addInformation.valid && this.productInfo.valid && this.deliveryInfo.value.ORDER_SERVICE) {\r\n      this.viettelPost.getPriceSpeciallyViettel(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue() }).then((result: any) => {\r\n        if (result.error) this.vhComponent.alertMessageDesktop('error', result.message)\r\n        else this.serviceSelected = result.data\r\n        \r\n      })\r\n    }\r\n  }\r\n  /**Thay đổi cân nặng */\r\n  changePRODUCT_WEIGHT() {\r\n    if (this.productInfo.value.PRODUCT_WEIGHT) this.getAllService()\r\n  }\r\n  //Viết hoa chữ cái đầu của mỗi từ\r\n  uppercaseFirstChar(str: string) {\r\n    let array = str.toLowerCase().split(' ');\r\n    let newStr = '';\r\n    array.forEach((item) => {\r\n      newStr += item.charAt(0).toUpperCase() + item.slice(1) + ' ';\r\n    });\r\n    return newStr\r\n  }\r\n  // ----------modal list address pickup---------\r\n  pickupAdresssViettel: boolean = false;\r\n  dataPickupAddressViettel: any;\r\n  cancelListViettel(event) {\r\n    if (event && event._id) {\r\n      this.data_delivery_recei = event;\r\n      this.listServiceViettel = []\r\n      this.listServiceAddViettel = []\r\n      this.deliveryInfo.controls.ORDER_SERVICE.setValue('')\r\n      this.deliveryInfo.controls.ORDER_SERVICE_ADD.setValue('')\r\n      this.attatchDataAddressToForm(event)\r\n    }\r\n    else if (event && !event._id) {\r\n      this.data_delivery_recei = {}\r\n      this.addInformation.controls.RECEIVER_WARD.setValue('')\r\n    }\r\n    this.pickupAdresssViettel = false;\r\n  }\r\n  /**\r\n   * Hàm này để chuyển đưa dữ liệu vào form nếu có\r\n   * @param receive \r\n   */\r\n  attatchDataAddressToForm(receive: any) {\r\n    this.addInformation.controls.RECEIVER_ADDRESS.setValue(receive.RECEIVER_ADDRESS)\r\n    this.addInformation.controls.RECEIVER_PROVINCE.setValue(receive.RECEIVER_PROVINCE)\r\n    this.addInformation.controls.RECEIVER_DISTRICT.setValue(receive.RECEIVER_DISTRICT)\r\n    this.addInformation.controls.RECEIVER_WARD.setValue(receive.RECEIVER_WARD)\r\n    this.dataAddress.WARDS_NAME = receive.WARDS_NAME\r\n    this.dataAddress.DISTRICT_NAME = receive.DISTRICT_NAME\r\n    this.dataAddress.PROVINCE_NAME = receive.PROVINCE_NAME\r\n    \r\n    this.getAllService()\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"delivery-viettel\">\r\n        <div class=\"addInformation\">\r\n            <form [formGroup]=\"addInformation\">\r\n                <h6>{{\"Receiver Information\" | translate}}</h6>\r\n                <div nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Name'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" [disabled]=\"true\"\r\n                                        formControlName=\"RECEIVER_FULLNAME\" nz-input\r\n                                        placeholder=\"{{'Enter full name' | translate}}\" minlength=\"6\" required />\r\n                                    <ng-template #combineTplName let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is required' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Phone number'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" [disabled]=\"true\" formControlName=\"RECEIVER_PHONE\"\r\n                                        nz-input placeholder=\"{{'Enter your phone number' | translate}}\" required />\r\n                                    <ng-template #combineTplPhone let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required'\r\n                                            |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div class=\"addInformation-address\" nz-col nzSpan=\"24\">\r\n                        <div><b>{{'Address'|translate}}*</b>\r\n                            <button (click)=\"pickupAdresssViettel = true\" nzType=\"text\" nz-tooltip\r\n                                [nzTooltipTitle]=\"(data_delivery_recei?.RECEIVER_WARD ? 'Edit Address':'Create Address')|translate\"\r\n                                nz-button>\r\n                                <ion-icon name=\"create-outline\"></ion-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"data_delivery_recei?.RECEIVER_WARD;else no_address\" class=\"addInformation-address\"\r\n                        nz-col nzSpan=\"24\">\r\n                        <div class=\"current-address-choose\">\r\n                            <div>\r\n                                {{data_delivery_recei.RECEIVER_ADDRESS}}, {{data_delivery_recei.WARDS_NAME}},\r\n                                {{data_delivery_recei.DISTRICT_NAME}} , {{data_delivery_recei.PROVINCE_NAME}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <ng-template #no_address>\r\n                        <div style=\"margin-left:12px\">{{'No data' | translate}}</div>\r\n                    </ng-template>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class=\"productInfo ant-table-body\">\r\n            <h6 class=\"productInfo-title\">{{\"Products information\" | translate}}</h6>\r\n            <div nz-row nzGutter=\"16\" class=\"productInfo-table\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <nz-table [nzScroll]=\"{ y: heightScroll }\" #rowSelectionTable [nzShowPagination]=\"false\"\r\n                        nzNoResult=\"{{'Not data'| translate}}\" [nzData]=\"billDetails\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"text-align: left;\"  nzWidth=\"50%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th style=\"text-align: center;\"  ><b>{{'Quantity' | translate}}</b></th>\r\n                                <th style=\"text-align: right;\"  ><b>{{'Amount' | translate}}</b></th>\r\n\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of billDetails\" class=\"choose-product\">\r\n                                <td style=\"text-align: left;\"  >\r\n                                    {{item.name_product}}\r\n                                </td><td style=\"text-align: center;\"  >\r\n                                    {{item.quantity}}\r\n                                </td>\r\n                                <td style=\"text-align: right;\" >\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n            <div nz-row nzGutter=\"16\" class=\"productInfo-form\">\r\n                <form style=\"width: 100%;\" [formGroup]=\"productInfo\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div nz-row nzGutter=\"8\">\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Weight'|translate}} (gram)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"'1 -> 99.999.999.999 (gram)'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplWeight\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_WEIGHT\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplWeight let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Weight is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"control.hasError('min')\">{{'Weight must be greater than 0'|translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Length'|translate}} (cm)*</b><i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplLength\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_LENGTH\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplLength let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Length is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Width'|translate}} (cm)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplWidth\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_WIDTH\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplWidth let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Width is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Height'|translate}} (cm)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplHeight\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_HEIGHT\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplHeight let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Height is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"deliveryInfo\">\r\n            <form class=\"deliveryInfo-form ant-table-body\" [formGroup]=\"deliveryInfo\">\r\n                <h6>{{\"Delivery\" | translate}}</h6>\r\n                <div nz-row nzGutter=\"8\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div><b>{{'COD'|translate}}*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                [nzTooltipTitle]=\"('Maximum' | translate) + ' 100.000.000 VND'\" nz-icon\r\n                                nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplCod\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" class=\"MONEY_COLLECTION\" type=\"text\" maxlength=\"11\"\r\n                                        formControlName=\"MONEY_COLLECTION\" nz-input required />\r\n                                    <ng-template #combineTplCod let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Cod is required' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div><b>{{'Order value'|translate}}*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                [nzTooltipTitle]=\"('Maximum' | translate) + ' 100.000.000.000 VND'\" nz-icon\r\n                                nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplOrder\">\r\n                                <nz-input-group>\r\n                                    <input class=\"PRODUCT_PRICE\" type=\"text\" maxlength=\"15\"\r\n                                        formControlName=\"PRODUCT_PRICE\" nz-input\r\n                                        placeholder=\"{{'Enter order value' | translate}}\" required />\r\n                                    <ng-template #combineTplOrder let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Order value is required'\r\n                                            |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <b style=\"display: block;\">{{'Fee payer'| translate}} : </b>\r\n                        <nz-radio-group formControlName=\"ORDER_PAYMENT\">\r\n                            <label nz-radio nzValue=2>{{'Receiver' | translate}}</label>\r\n                            <label nz-radio nzValue=3>{{'Sender' | translate}}</label>\r\n                        </nz-radio-group>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\" class=\"deliveryInfo-service\">\r\n                        <div (click)=\"getAllService()\"><b>{{'Service'|translate}}*</b></div>\r\n                        <nz-radio-group formControlName=\"ORDER_SERVICE\" (ngModelChange)=\"changeService($event)\">\r\n                            <label *ngFor=\"let item of listServiceViettel\" nz-radio\r\n                                [nzValue]=\"item.MA_DV_CHINH\">{{item.TEN_DICHVU}}</label>\r\n                        </nz-radio-group>\r\n                        <div><b>{{'Extra service'|translate}}*</b></div>\r\n                        <label class=\"extra\" *ngFor=\"let item of listServiceAddViettel\" nz-checkbox\r\n                            [(ngModel)]=\"item.checked\" [ngModelOptions]=\"{standalone: true}\"\r\n                            (ngModelChange)=\"getPriceSpecially()\">{{item.SERVICE_NAME}}</label>\r\n                    </div>\r\n                    <div>{{'Note' | translate}}</div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <textarea clas placeholder=\"{{'Enter note' | translate}}\"\r\n                                        formControlName=\"ORDER_NOTE\" rows=\"2\" nz-input></textarea>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"deliveryInfo-totalDelivery\">\r\n                <div class=\"sub-table\">\r\n                    <h6>{{\"Payment information\" | translate}}</h6>\r\n                    <table>\r\n                        <tr>\r\n                            <td style=\"width: 70%\">{{'Total freight' | translate}}</td>\r\n                            <td style=\"width: 30%\" class=\"ion-text-end\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(serviceSelected.MONEY_TOTAL || 0)}}</b>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"deliveryInfo-button-order all-content-center\">\r\n                <button\r\n                    [disabled]=\"addInformation.invalid || productInfo.invalid || deliveryInfo.invalid || !checkPrinter\"\r\n                    (click)=\"createOrder(true)\" nz-button class=\"order-and-print\">\r\n                    {{\"Create bill & Print\"|translate}}\r\n                </button>\r\n                <button (click)=\"createOrder(false)\"\r\n                    [disabled]=\"addInformation.invalid || productInfo.invalid || deliveryInfo.invalid\" nz-button\r\n                    class=\"order\"> {{\"Create bill\"|translate}}</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>\r\n<!-- list address -->\r\n<app-list-address-viettel *ngIf=\"pickupAdresssViettel\" [id_delivery]=\"dataRestore.data_delivery._id\"\r\n    [pickupAdresssViettel]=\"pickupAdresssViettel\" [customer]=\"dataRestore.billInfo.id_customer\"\r\n    (cancelListViettel)=\"cancelListViettel($event)\">\r\n</app-list-address-viettel>","import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuerySales, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { DeliveryA45Component } from 'src/app/sales/components/print/delivery/A45/delivery-a45/delivery-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { ViettelService } from '../../../services/viettelService/viettel.service';\r\n\r\n@Component({\r\n  selector: 'app-create-bill-retail-viettel',\r\n  templateUrl: './create-bill-retail-viettel.component.html',\r\n  styleUrls: ['./create-bill-retail-viettel.component.scss']\r\n})\r\nexport class CreateBillRetailViettelComponent implements OnInit {\r\n\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  billDetails: Array<any> = []\r\n  addInformation: FormGroup\r\n  deliveryInfo: FormGroup\r\n  productInfo: FormGroup\r\n  data_delivery: any\r\n  serviceSelected: any = {}\r\n  MONEY_COLLECTION: any\r\n  PRODUCT_PRICE: any\r\n  invoice: VhSaleInvoices\r\n  listProvinceViettel: Array<any> = []\r\n  listDistrictViettel: Array<any> = []\r\n  listWardViettel: Array<any> = []\r\n  listServiceViettel: Array<any> = []\r\n  listServiceAddViettel: Array<any> = []\r\n  isLoading: boolean = false\r\n  dataAddress: any = { SENDER_FULLNAME: '', SENDER_ADDRESS: '', SENDER_PHONE: '', SENDER_WARD: '', SENDER_DISTRICT: '', SENDER_PROVINCE: '' }\r\n  heightScroll: any = '100px'\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private vhQuerySales: VhQuerySales,\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private viettelPost: ViettelService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modalService: NzModalService,\r\n    private datePipe: DatePipe\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n  initForm() {\r\n    this.addInformation = new FormGroup({\r\n      RECEIVER_FULLNAME: new FormControl(this.dataRestore.billInfo?.retail_name || '', [Validators.required, Validators.minLength(2)]),\r\n      RECEIVER_PHONE: new FormControl(this.dataRestore.billInfo?.retail_phone || '', [Validators.minLength(10), Validators.maxLength(12)]),\r\n      RECEIVER_ADDRESS: new FormControl('', Validators.required),\r\n      RECEIVER_PROVINCE: new FormControl('', Validators.required),\r\n      RECEIVER_DISTRICT: new FormControl('', Validators.required),\r\n      RECEIVER_WARD: new FormControl('', Validators.required),\r\n    })\r\n    this.deliveryInfo = new FormGroup({\r\n      ORDER_PAYMENT: new FormControl('2', Validators.required),\r\n      ORDER_SERVICE: new FormControl('', Validators.required),\r\n      ORDER_SERVICE_ADD: new FormControl(''),\r\n      PRODUCT_PRICE: new FormControl(0),\r\n      MONEY_COLLECTION: new FormControl(0),\r\n      ORDER_NOTE: new FormControl(''),\r\n    })\r\n    this.productInfo = new FormGroup({\r\n      PRODUCT_WEIGHT: new FormControl('', [Validators.required, Validators.min(0.0000000000000000000001), Validators.max(99999999999)]),\r\n      PRODUCT_LENGTH: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n      PRODUCT_WIDTH: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n      PRODUCT_HEIGHT: new FormControl('', [Validators.required, Validators.max(999999999)]),\r\n    })\r\n    this.getData();\r\n  }\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.MONEY_COLLECTION = this.vhAlgorithm.vhnumeral('.MONEY_COLLECTION');\r\n      this.PRODUCT_PRICE = this.vhAlgorithm.vhnumeral('.PRODUCT_PRICE');\r\n    });\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector('productInfo'))\r\n      this.heightScroll = document.querySelector('productInfo').clientHeight - document.querySelector('productInfo-title').clientHeight - document.querySelector('productInfo-form').clientHeight + 'px'\r\n\r\n    this.cdRef.detectChanges()\r\n  }\r\n  //lấy dữ liệu billDetail\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill_details_byId_bill(this.dataRestore.billInfo._id),\r\n        this.viettelPost.getListInventory(this.dataRestore.data_delivery.token)\r\n      ]).\r\n        then(([invoice, stores]: any) => {\r\n          this.vhComponent.hideLoading(0)\r\n          this.billDetails = invoice.map(item => {\r\n            let name_product = this.vhQuerySales.getlocalDetailProduct(item.id_subproduct ? item.id_subproduct : item.id_product).name;\r\n            return { ...item, name_product: name_product, }\r\n          })\r\n          this.invoice = new VhSaleInvoices(this.dataRestore.billInfo, this.billDetails, this.vhQuerySales);\r\n          \r\n          \r\n          if (!stores.error) this.addDataStore(stores.data, this.dataRestore.data_delivery.GROUPADDRESS_ID)\r\n          let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n        if (printer) this.checkPrinter = printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable;\r\n        }).catch(err => { console.error(err); this.vhComponent.hideLoading(0) })\r\n    })\r\n  }\r\n\r\n  addDataStore(stores: Array<any>, GROUPADDRESS_ID) {\r\n    let store = stores.find(item => item.groupaddressId == GROUPADDRESS_ID)\r\n    if (store)\r\n      this.dataAddress = {\r\n        SENDER_FULLNAME: store.name, SENDER_ADDRESS: store.address, SENDER_PHONE: store.phone,\r\n        SENDER_WARD: store.wardsId, SENDER_DISTRICT: store.districtId, SENDER_PROVINCE: store.provinceId\r\n      }\r\n  }\r\n  checkPrinter: boolean = false;\r\n  goBack(success?) {\r\n    this.router.navigate([\"/sales/dashboard/manage/delivery/shipping-bill/delivery-viettel\"], {\r\n      state: { dataRestore: this.dataRestore }\r\n    })\r\n  }\r\n  createOrder(print?) {\r\n    this.modalService.confirm({\r\n      nzTitle: this.lang.translate(\"Do you want to create order ?\"),\r\n      nzCancelText: this.lang.translate(\"Cancel\"),\r\n      nzOnOk: () => {\r\n        return new Promise<any>((resolve) => {\r\n          this.viettelPost.createOrderViettelPost(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue(), ...this.dataRestore.data_delivery, DELIVERY_DATE: this.datePipe.transform(new Date(), 'dd/MM/yyyy HH:mm:ss') }, this.billDetails, this.invoice.getBillCode()).then((res: any) => {\r\n            if (!res.error) {\r\n              this.invoice.setOrderCode(res.data.ORDER_NUMBER)\r\n              this.invoice.setDeliveryViettelData({ created: new Date().toISOString(), ...res.data, RECEIVER_FULLNAME: this.addInformation.value.RECEIVER_FULLNAME, RECEIVER_PHONE: this.addInformation.value.RECEIVER_PHONE, ORDER_PAYMENT: this.deliveryInfo.value.ORDER_PAYMENT })\r\n              this.vhQuerySales.updateBill_Billdetail(this.invoice.getID(), this.invoice.getCreateUpdateInvoice(1), this.invoice.getCreateUpdateInvoiceDetail()).then((data: any) => {\r\n                resolve(true)\r\n                this.dataRestore.reload = true\r\n                this.vhComponent.alertMessageDesktop('success', this.lang.translate('Create order successfully !'))\r\n                if (print) this.showPrint(this.invoice.getDeliveryViettelData())\r\n                else this.goBack()\r\n              })\r\n            } else this.vhComponent.alertMessageDesktop('error', res.message)\r\n          }).catch(err => this.vhComponent.alertMessageDesktop('error', err.message))\r\n        })\r\n      },\r\n      nzOnCancel: () => { },\r\n    })\r\n  }\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  showPrint(res) {\r\n    this.checkPrint().then((printer) => {\r\n      this.vhComponent.showModal(this.renderPrintPage(printer['_id']), {\r\n        billInfo: {\r\n          ...this.dataRestore.billInfo, data: this.viettelPost.renderFormatPrintOrder({ ...res, ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress }), order_code: res.ORDER_NUMBER\r\n        },\r\n        billDetails: this.billDetails,\r\n        data_delivery: { ...this.data_delivery, type: 5 },\r\n        printer \r\n      }, false, false, \"modal-print\").then(modal => {\r\n        modal.onWillDismiss().then(() => {\r\n          this.goBack(true);\r\n        })\r\n      })\r\n\r\n    }, (err) => {\r\n      this.goBack(true)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'A4') {\r\n    switch (type) {\r\n      default: return DeliveryA45Component\r\n    }\r\n  }\r\n  customDataBillInfo(res) {\r\n\r\n  }\r\n\r\n  //------------------------------------Xã huyện tỉnh------------------------------------\r\n  /**Lấy tỉnh thành phố */\r\n  getProvinceViettel() {\r\n    this.isLoading = true\r\n    this.viettelPost.getProvinceViettel().then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.error) this.vhComponent.alertMessageDesktop('error', res.message)\r\n      else this.listProvinceViettel = res.data\r\n    })\r\n  }\r\n  /**\r\n   * Sự kiện thay đổi tỉnh => reset huyện xã\r\n   * @param event \r\n   */\r\n  changeProvinceViettel(event) {\r\n    if (event) {\r\n      this.listDistrictViettel = []\r\n      this.listWardViettel = []\r\n      this.addInformation.controls.RECEIVER_DISTRICT.setValue('')\r\n      this.addInformation.controls.RECEIVER_WARD.setValue('')\r\n      this.dataAddress.PROVINCE_NAME = this.listProvinceViettel.find(item => item.PROVINCE_ID == event).PROVINCE_NAME\r\n    }\r\n  }\r\n  /**Lấy quận, huyện */\r\n  getDistrictViettel() {\r\n    this.isLoading = true\r\n    this.viettelPost.getDistrictViettel(this.addInformation.value.RECEIVER_PROVINCE).then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.error) this.vhComponent.alertMessageDesktop('error', res.message)\r\n      else this.listDistrictViettel = res.data.map(item => {\r\n        item.DISTRICT_NAME = this.uppercaseFirstChar(item.DISTRICT_NAME)\r\n        return item\r\n      })\r\n    })\r\n  }\r\n  /**\r\n  * Sự kiện thay đổi huyện => reset xã\r\n  * @param event \r\n  */\r\n  changeDistrictViettel(event) {\r\n    if (event) {\r\n      this.listWardViettel = []\r\n      this.addInformation.controls.RECEIVER_WARD.setValue('')\r\n      this.dataAddress.DISTRICT_NAME = this.listDistrictViettel.find(item => item.DISTRICT_ID == event).DISTRICT_NAME\r\n    }\r\n  }\r\n\r\n  /**Lấy phường, xã */\r\n  getWardViettel() {\r\n    this.isLoading = true\r\n    this.viettelPost.getWardViettel(this.addInformation.value.RECEIVER_DISTRICT).then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.error) this.vhComponent.alertMessageDesktop('error', res.message)\r\n      else this.listWardViettel = res.data.map(item => {\r\n        item.WARDS_NAME = this.uppercaseFirstChar(item.WARDS_NAME)\r\n        return item\r\n      })\r\n    })\r\n  }\r\n  /**\r\n  * Sự kiện thay đổi phường, xã\r\n  * @param event \r\n  */\r\n  changeWardViettel(event) {\r\n    if (event) {\r\n      this.dataAddress.WARDS_NAME = this.listWardViettel.find(item => item.WARDS_ID == event).WARDS_NAME\r\n      this.listServiceViettel = []\r\n      this.listServiceAddViettel = []\r\n      this.deliveryInfo.controls.ORDER_SERVICE.setValue('')\r\n      this.deliveryInfo.controls.ORDER_SERVICE_ADD.setValue('')\r\n    } this.getAllService()\r\n  }\r\n  //------------------------------------Xã huyện tỉnh------------------------------------\r\n\r\n  getAllService() {\r\n    if (this.addInformation.valid && this.productInfo.valid) {\r\n      this.viettelPost.getServiceViettel(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue() }).then((result: any) => {\r\n        if (result.length) this.listServiceViettel = result\r\n        else this.vhComponent.alertMessageDesktop('error', result.message)\r\n        this.getPriceOfServiceSelected();\r\n        \r\n        \r\n      })\r\n    }\r\n  }\r\n  changeService(event) {\r\n    this.serviceSelected = {}\r\n    this.listServiceAddViettel = this.listServiceViettel.find(item => item.MA_DV_CHINH == event)?.EXTRA_SERVICE\r\n    this.getPriceOfServiceSelected()\r\n  }\r\n  getPriceSpecially() {\r\n    let ORDER_SERVICE_ADD: string = ''\r\n    this.listServiceAddViettel.forEach(item => {\r\n      if (item.checked) ORDER_SERVICE_ADD += `${item.SERVICE_CODE},`\r\n    })\r\n    ORDER_SERVICE_ADD = ORDER_SERVICE_ADD.slice(0, ORDER_SERVICE_ADD.lastIndexOf(','))\r\n    this.deliveryInfo.controls.ORDER_SERVICE_ADD.setValue(ORDER_SERVICE_ADD)\r\n    this.getPriceOfServiceSelected()\r\n  }\r\n\r\n  getPriceOfServiceSelected() {\r\n    if (this.addInformation.valid && this.productInfo.valid && this.deliveryInfo.value.ORDER_SERVICE) {\r\n      this.viettelPost.getPriceSpeciallyViettel(this.dataRestore.data_delivery.token, { ...this.addInformation.value, ...this.productInfo.value, ...this.deliveryInfo.value, ...this.dataAddress, MONEY_COLLECTION: this.MONEY_COLLECTION.getRawValue(), PRODUCT_PRICE: this.PRODUCT_PRICE.getRawValue() }).then((result: any) => {\r\n        if (result.error) this.vhComponent.alertMessageDesktop('error', result.message)\r\n        else this.serviceSelected = result.data\r\n      })\r\n    }\r\n\r\n  }\r\n  /**Thay đổi cân nặng */\r\n  changePRODUCT_WEIGHT() {\r\n    if (this.productInfo.value.PRODUCT_WEIGHT) this.getAllService()\r\n  }\r\n  //Viết hoa chữ cái đầu của mỗi từ\r\n  uppercaseFirstChar(str: string) {\r\n    let array = str.toLowerCase().split(' ');\r\n    let newStr = '';\r\n    array.forEach((item) => {\r\n      newStr += item.charAt(0).toUpperCase() + item.slice(1) + ' ';\r\n    });\r\n    return newStr\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"delivery-viettel\">\r\n        <div class=\"addInformation\">\r\n            <form [formGroup]=\"addInformation\">\r\n                <h6>{{\"Receiver Information\" | translate}}</h6>\r\n                <div nz-row [nzGutter]=\"16\">\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Name'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" formControlName=\"RECEIVER_FULLNAME\" nz-input\r\n                                        placeholder=\"{{'Enter full name' | translate}}\" minlength=\"2\" required />\r\n                                    <ng-template #combineTplName let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 2 characters' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is required' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Phone number'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" formControlName=\"RECEIVER_PHONE\" nz-input\r\n                                        placeholder=\"{{'Enter your phone number' | translate}}\" required />\r\n                                    <ng-template #combineTplPhone let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required'\r\n                                            |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Address'|translate}}*</b></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplAddress\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" formControlName=\"RECEIVER_ADDRESS\" nz-input\r\n                                        placeholder=\"{{'Enter your address' | translate}}\" required />\r\n                                    <ng-template #combineTplAddress let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Address is required' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Province'|translate}}*</b></div>\r\n                        <nz-select [nzShowSearch]=\"true\" (nzFocus)=\"getProvinceViettel()\"\r\n                            formControlName=\"RECEIVER_PROVINCE\" (ngModelChange)=\"changeProvinceViettel($event)\"\r\n                            nzPlaceHolder=\"{{'Select province' | translate}}\">\r\n                            <ng-container *ngFor=\"let item of listProvinceViettel\">\r\n                                <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.PROVINCE_ID\"\r\n                                    [nzLabel]=\"item.PROVINCE_NAME\">\r\n                                </nz-option>\r\n                            </ng-container>\r\n                            <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                {{'Loading...'|translate}}\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'District'|translate}}*</b></div>\r\n                        <nz-select [nzDisabled]=\"!addInformation.value.RECEIVER_PROVINCE\" [nzShowSearch]=\"true\"\r\n                            (nzFocus)=\"getDistrictViettel()\" formControlName=\"RECEIVER_DISTRICT\"\r\n                            (ngModelChange)=\"changeDistrictViettel($event)\"\r\n                            nzPlaceHolder=\"{{'Select district' | translate}}\">\r\n                            <ng-container *ngFor=\"let item of listDistrictViettel\">\r\n                                <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.DISTRICT_ID\"\r\n                                    [nzLabel]=\"item.DISTRICT_NAME\">\r\n                                </nz-option>\r\n                            </ng-container>\r\n                            <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                {{'Loading...'|translate}}\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"12\">\r\n                        <div><b>{{'Ward'|translate}}*</b></div>\r\n                        <nz-select [nzDisabled]=\"!addInformation.value.RECEIVER_DISTRICT\" [nzShowSearch]=\"true\"\r\n                            (nzFocus)=\"getWardViettel()\" formControlName=\"RECEIVER_WARD\"\r\n                            (ngModelChange)=\"changeWardViettel($event)\" nzPlaceHolder=\"{{'Select ward' | translate}}\">\r\n                            <ng-container *ngFor=\"let item of listWardViettel\">\r\n                                <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.WARDS_ID\" [nzLabel]=\"item.WARDS_NAME\">\r\n                                </nz-option>\r\n                            </ng-container>\r\n                            <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                {{'Loading...'|translate}}\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class=\"productInfo ant-table-body\">\r\n            <h6 class=\"productInfo-title\">{{\"Products information\" | translate}}</h6>\r\n            <div nz-row nzGutter=\"16\" class=\"productInfo-table\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <nz-table [nzScroll]=\"{ y: heightScroll }\" #rowSelectionTable [nzShowPagination]=\"false\"\r\n                        nzNoResult=\"{{'Not data'| translate}}\" [nzData]=\"billDetails\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"text-align: left;\"  nzWidth=\"50%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th style=\"text-align: center;\"  ><b>{{'Quantity' | translate}}</b></th>\r\n                                <th style=\"text-align: right;\"  ><b>{{'Amount' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of billDetails\" class=\"choose-product\">\r\n                                <td style=\"text-align: left;\"  >\r\n                                    {{item.name_product}}\r\n                                </td><td style=\"text-align: center;\"  >\r\n                                    {{item.quantity}}\r\n                                </td>\r\n                                <td style=\"text-align: right;\" >\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n            <div nz-row nzGutter=\"16\" class=\"productInfo-form\">\r\n                <form style=\"width: 100%;\" [formGroup]=\"productInfo\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div nz-row nzGutter=\"8\">\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Weight'|translate}} (gram)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"'1 -> 99.999.999.999 (gram)'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplWeight\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_WEIGHT\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplWeight let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Weight is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                                <ng-container *ngIf=\"control.hasError('min')\">{{'Weight must be greater than 0'|translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Length'|translate}} (cm)*</b><i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplLength\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_LENGTH\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplLength let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Length is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Width'|translate}} (cm)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplWidth\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_WIDTH\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplWidth let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Width is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                            <div nz-col nzSpan=\"6\">\r\n                                <div><b>{{'Height'|translate}} (cm)*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                        [nzTooltipTitle]=\"('Maximum' | translate) + ' 999.999.999cm'\" nz-icon\r\n                                        nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"combineTplHeight\">\r\n                                        <nz-input-group>\r\n                                            <input (blur)=\"getAllService()\" formControlName=\"PRODUCT_HEIGHT\" nz-input\r\n                                                required type=\"number\" />\r\n                                            <ng-template #combineTplHeight let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Height is\r\n                                                    required'\r\n                                                    |\r\n                                                    translate}}\r\n                                                </ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"deliveryInfo\">\r\n            <form class=\"deliveryInfo-form ant-table-body\" [formGroup]=\"deliveryInfo\">\r\n                <h6>{{\"Delivery\" | translate}}</h6>\r\n                <div nz-row nzGutter=\"8\">\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div><b>{{'COD'|translate}}*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                [nzTooltipTitle]=\"('Maximum' | translate) + ' 100.000.000 VND'\" nz-icon\r\n                                nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplCod\">\r\n                                <nz-input-group>\r\n                                    <input (blur)=\"getAllService()\" class=\"MONEY_COLLECTION\" type=\"text\" maxlength=\"11\"\r\n                                        formControlName=\"MONEY_COLLECTION\" nz-input required />\r\n                                    <ng-template #combineTplCod let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Cod is required' |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <div><b>{{'Order value'|translate}}*</b> <i class=\"icon-explain\" nz-tooltip\r\n                                [nzTooltipTitle]=\"('Maximum' | translate) + ' 100.000.000.000 VND'\" nz-icon\r\n                                nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></div>\r\n                        <nz-form-item>\r\n                            <nz-form-control [nzErrorTip]=\"combineTplOrder\">\r\n                                <nz-input-group>\r\n                                    <input class=\"PRODUCT_PRICE\" type=\"text\" maxlength=\"15\"\r\n                                        formControlName=\"PRODUCT_PRICE\" nz-input\r\n                                        placeholder=\"{{'Enter order value' | translate}}\" required />\r\n                                    <ng-template #combineTplOrder let-control>\r\n                                        <ng-container *ngIf=\"control.hasError('required')\">{{'Order value is required'\r\n                                            |\r\n                                            translate}}\r\n                                        </ng-container>\r\n                                    </ng-template>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <b style=\"display: block;\">{{'Fee payer'| translate}} : </b>\r\n                        <nz-radio-group formControlName=\"ORDER_PAYMENT\">\r\n                            <label nz-radio nzValue=2>{{'Receiver' | translate}}</label>\r\n                            <label nz-radio nzValue=3>{{'Sender' | translate}}</label>\r\n                        </nz-radio-group>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\" class=\"deliveryInfo-service\">\r\n                        <div><b>{{'Service'|translate}}*</b></div>\r\n                        <nz-radio-group formControlName=\"ORDER_SERVICE\" (ngModelChange)=\"changeService($event)\">\r\n                            <label *ngFor=\"let item of listServiceViettel\" nz-radio\r\n                                [nzValue]=\"item.MA_DV_CHINH\">{{item.TEN_DICHVU}}</label>\r\n                        </nz-radio-group>\r\n                        <div><b>{{'Extra service'|translate}}*</b></div>\r\n                        <label class=\"extra\" *ngFor=\"let item of listServiceAddViettel\" nz-checkbox\r\n                            [(ngModel)]=\"item.checked\" [ngModelOptions]=\"{standalone: true}\"\r\n                            (ngModelChange)=\"getPriceSpecially()\">{{item.SERVICE_NAME}}</label>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"24\">\r\n                        <nz-form-item>\r\n                            <nz-form-control>\r\n                                <nz-input-group>\r\n                                    <textarea clas placeholder=\"{{'Enter note' | translate}}\"\r\n                                        formControlName=\"ORDER_NOTE\" rows=\"2\" nz-input></textarea>\r\n                                </nz-input-group>\r\n                            </nz-form-control>\r\n                        </nz-form-item>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"deliveryInfo-totalDelivery\">\r\n                <div class=\"sub-table\">\r\n                    <h6>{{\"Payment information\" | translate}}</h6>\r\n                    <table>\r\n                        <tr>\r\n                            <td style=\"width: 70%\">{{'Total freight' | translate}}</td>\r\n                            <td style=\"width: 30%\" class=\"ion-text-end\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(serviceSelected.MONEY_TOTAL || 0)}}</b>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"deliveryInfo-button-order all-content-center\">\r\n                <button\r\n                    [disabled]=\"addInformation.invalid || productInfo.invalid || deliveryInfo.invalid || !checkPrinter\"\r\n                    (click)=\"createOrder(true)\" nz-button class=\"order-and-print\">\r\n                    {{\"Create bill & Print\"|translate}}\r\n                </button>\r\n                <button (click)=\"createOrder(false)\"\r\n                    [disabled]=\"addInformation.invalid || productInfo.invalid || deliveryInfo.invalid\" nz-button\r\n                    class=\"order\"> {{\"Create bill\"|translate}}</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales, VhQuery, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { ViettelService } from '../../services/viettelService/viettel.service';\r\n\r\n@Component({\r\n  selector: 'app-delivery-viettel',\r\n  templateUrl: './delivery-viettel.component.html',\r\n  styleUrls: ['./delivery-viettel.component.scss']\r\n})\r\nexport class DeliveryViettelComponent implements OnInit {\r\n\r\n  bills: Array<any> = [];\r\n  show_bills: any = [];\r\n  //Hôm nay 0h- 23h59\r\n  public date: Date[] = [new Date(), new Date()];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state?.dataRestore\r\n  //biến cờ show\r\n  status_open: boolean = false;\r\n  data_delivery: any;\r\n  search: string = '';\r\n  disabledDate = (current: Date): boolean => {\r\n    if (current.getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime() - 24 * 60 * 60 * 1000) return true\r\n    return false\r\n  }\r\n  constructor(\r\n    public lang: LanguageService,\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private viettelPost: ViettelService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhQuery: VhQuery,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.dataRestore) {\r\n      this.search = this.dataRestore.dataRestore.search\r\n      this.date = [new Date(this.dataRestore.dataRestore.date[0]), new Date(this.dataRestore.dataRestore.date[1])];\r\n      this.bills = this.dataRestore.dataRestore.bills\r\n      this.show_bills = [...this.dataRestore.dataRestore.bills]\r\n      this.data_delivery = this.dataRestore.data_delivery\r\n      if (this.dataRestore.reload) this.getInvoices();\r\n    }\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/delivery/shipping-bill\"]);\r\n  }\r\n  /**\r\n    * Hàm lấy bill trong khoăng thời gian được set\r\n    */\r\n  getInvoices() {\r\n    this.bills = []\r\n    this.status_open = false;\r\n    this.data_delivery = this.vhQuerySales.getlocalDeliverys().filter(item => item.active && item.type == 5)[0];\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, bill_type: { $eq: 1 }, id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } }, {}).then((result: Array<any>) => {\r\n        result.forEach(item => {\r\n          if (item.id_delivery == this.data_delivery._id) this.bills.unshift({ ...item, customer_name: this.vhQuerySales.getlocalCustomer(item.id_customer).name })\r\n        })\r\n        \r\n        this.show_bills = [...this.bills]\r\n        this.vhComponent.hideLoading(0)\r\n      }).catch(err => { console.error(err); this.vhComponent.hideLoading(0) })\r\n    })\r\n  }\r\n  changeTime(event) {\r\n    if (event[1].getTime() - event[0].getTime() <= 2678400000) {\r\n    } else {\r\n      this.vhComponent.showToast(2000, this.lang.translate(\"The time to view no more than 30 days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + 2678313600)]\r\n    }\r\n  }\r\n  //searchbill\r\n  searchBill(value) {\r\n    this.show_bills = this.vhAlgorithm.searchList(\r\n      this.vhAlgorithm.changeAlias(value).toLowerCase(),\r\n      this.bills,\r\n      [\"bill_code\", \"order_code\"]\r\n    );\r\n  }\r\n  gotoCreateOrder(bill) {\r\n    let state = { billInfo: bill, data_delivery: this.data_delivery, dataRestore: { search: this.search, date: this.date, bills: this.bills } }\r\n    this.router.navigate([`/sales/dashboard/manage/delivery/shipping-bill/delivery-viettel/create-order-${bill.id_customer != \"id_retail\" ? 'customer' : 'retail'}`], { state: state });\r\n  }\r\n  gotoBillDetail(bill) {\r\n    let state = { billInfo: bill, data_delivery: this.data_delivery, dataRestore: { search: this.search, date: this.date, bills: this.bills } }\r\n    this.router.navigate([\"/sales/dashboard/manage/delivery/shipping-bill/delivery-viettel/detail-bill\"], { state: state })\r\n  }\r\n  /**\r\n  * filter các trạng thái của bill \r\n  * */\r\n  // filterStatus(value) {\r\n  //   this.searchBill(this.search)\r\n  //   if (value != 0) this.show_bills = [...this.show_bills].filter(item => item.delivery && item.delivery.OrderStatusId == this.getStatusOfOrder(value))\r\n  //   // this.searchBill(this.search)\r\n  // }\r\n  onCurrentPageDataChange(event) { }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById(\"delivery-viettel\") && document.querySelector(\".delivery-viettel-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.getElementById(\"delivery-viettel\").clientHeight - document.querySelector(\".delivery-viettel-header\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 135 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"delivery-viettel\">\r\n    <div nzGutter=\"16\" class=\"delivery-viettel delivery-viettel-header\" nz-row>\r\n        <div nz-col nzSpan=\"4\">\r\n            <h3 class=\"title nz-no-margin\">{{'Viettel Post'|translate}}</h3>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"title center-all-content\">\r\n            <nz-input-group class=\"nz-hover-border\" [nzSuffix]=\"suffixIconSearch\">\r\n                <input class=\"medium-size\" type=\"text\" nz-input [(ngModel)]=\"search\"\r\n                    (ngModelChange)=\"searchBill($event)\"\r\n                    placeholder=\"{{'Search for bill code, order code'|translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\">\r\n            <!-- <nz-select nzBorderless class=\"nz-hover-border medium-size\" (ngModelChange)=\"filterStatus($event)\"\r\n                [(ngModel)]=\"indexSelected\">\r\n                <nz-option *ngFor=\"let option of list_status;let i = index\" [nzLabel]=\"option | translate\"\r\n                    [nzValue]=\"i\">\r\n                </nz-option>\r\n            </nz-select> -->\r\n        </div>\r\n        <div class=\"center-all-content date-picker-cus\" nz-col nzSpan=\"6\">\r\n             <nz-range-picker nzFormat='dd/MM/yyyy'  [nzDisabledDate]=\"disabledDate\" [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\">\r\n            </nz-range-picker>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content button-group\">\r\n            <div>\r\n                <button class=\"btn-green center-all-content ml-3\" nz-button nzType=\"default\" (click)=\"getInvoices()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-col nzSpan=\"24\">\r\n        <div class=\"table-delivery-viettel\" nz-col nzSpan=\"24\">\r\n            <div class=\"medium-size\">{{'Total' |translate}}<span style=\"color: red;\"> {{show_bills.length}}\r\n                </span>{{'shipping bills' | translate}}\r\n            </div>\r\n            <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" #tableDelvieryviettel\r\n                [nzScroll]=\"{ y: heightScroll }\" nzShowPagination nzShowSizeChanger\r\n                (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\" [nzData]=\"show_bills\"\r\n                nzNoResult=\"{{'No data'| translate}}\">\r\n                <thead>\r\n                    <tr>\r\n                        <th><b>{{'Time' | translate}}</b></th>\r\n                        <th><b>{{'Invoice code' | translate}}</b></th>\r\n                        <th><b>{{'Order code' | translate}}</b></th>\r\n                        <th><b>{{'Customer' | translate}}</b></th>\r\n                        <th><b>{{'COD' | translate}}<i class=\"icon-explain\" nz-tooltip\r\n                                    [nzTooltipTitle]=\"'COD amount excluding freight' | translate\" nz-icon\r\n                                    nzType=\"exclamation-circle\" nzTheme=\"outline\"></i></b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr (click)=\"item.order_code? gotoBillDetail(item) : gotoCreateOrder(item)\"\r\n                        *ngFor=\"let item of show_bills\" style=\"cursor: pointer;\">\r\n                        <td>{{item.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                        <td>{{item.bill_code}}</td>\r\n                        <td>{{item.delivery_viettel_data ? item.delivery_viettel_data.ORDER_NUMBER : \"\"}}</td>\r\n                        <td>{{(item.customer_name ? item.customer_name :\"Customer retail\") | translate}}</td>\r\n                        <td>{{item.delivery_viettel_data ?\r\n                            vhAlgorithm.vhcurrencyunit(item.delivery_viettel_data.MONEY_COLLECTION):''}} <span\r\n                                class=\"color-orange\" *ngIf=\"item.delivery_viettel_data?.deleted\">\r\n                                <b>({{'cancelled' |translate}})</b></span>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DeliveryViettelComponent } from './delivery-viettel.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { ViettelModule } from '../../carrier-partner/components/viettel-component/viettel.module';\r\nimport { CreateBillCustomerViettelComponent } from './create-bill-customer-viettel/create-bill-customer-viettel.component';\r\nimport { CreateBillRetailViettelComponent } from './create-bill-retail-viettel/create-bill-retail-viettel.component';\r\nimport { DetailBillViettelComponent } from './detail-bill-viettel/detail-bill-viettel.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    children: [\r\n      {\r\n        path: \"\",\r\n        component: DeliveryViettelComponent\r\n      },\r\n      {\r\n        path: \"create-order-retail\",\r\n        component: CreateBillRetailViettelComponent\r\n      },\r\n      {\r\n        path: \"create-order-customer\",\r\n        component: CreateBillCustomerViettelComponent\r\n      },\r\n      {\r\n        path: \"detail-bill\",\r\n        component: DetailBillViettelComponent\r\n      }\r\n    ]\r\n  }\r\n\r\n]\r\n\r\n@NgModule({\r\n  declarations: [DeliveryViettelComponent, CreateBillCustomerViettelComponent, CreateBillRetailViettelComponent, DetailBillViettelComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    TranslateModule,\r\n    ReactiveFormsModule,\r\n    ViettelModule\r\n  ]\r\n})\r\nexport class DeliveryViettelModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales, VhAuth } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { DeliveryA45Component } from 'src/app/sales/components/print/delivery/A45/delivery-a45/delivery-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoice, VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { ViettelService } from '../../../services/viettelService/viettel.service';\r\n\r\n@Component({\r\n  selector: 'app-detail-bill-viettel',\r\n  templateUrl: './detail-bill-viettel.component.html',\r\n  styleUrls: ['./detail-bill-viettel.component.scss']\r\n})\r\nexport class DetailBillViettelComponent implements OnInit {\r\n\r\n  billInfo: any;\r\n  inforCustomer: any;\r\n  billDetail: any;\r\n  dataSearchAndDate: any;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  dataAddress: any = {}\r\n  loading: boolean = false\r\n  public invoiceInfo: any;\r\n  public invoice: VhSaleInvoices\r\n  constructor(\r\n    private lang: LanguageService,\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhAuth: VhAuth,\r\n    private modalService: NzModalService,\r\n    private viettelPost: ViettelService\r\n  ) {\r\n    this.billInfo = this.dataRestore.billInfo\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n  }\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(this.dataRestore.billInfo._id),\r\n        this.vhQuerySales.getBill_details_byId_bill(this.dataRestore.billInfo._id),\r\n        this.viettelPost.getProvinceViettel(),\r\n        this.viettelPost.getDistrictViettel(this.billInfo.delivery_viettel_data.RECEIVER_PROVINCE),\r\n        this.viettelPost.getWardViettel(this.billInfo.delivery_viettel_data.RECEIVER_DISTRICT),\r\n      ]).then((res: Array<any>) => {\r\n        this.vhComponent.hideLoading(0)\r\n        let invoiceDetailFresh: VhSaleInvoiceDetail[] = res[1].map(item => {\r\n          if (item.combos) {\r\n            let combo: any = {\r\n              ...item,\r\n              ... this.getNameProduct(item.id_product, item.id_subproduct),\r\n              combos: item.combos.map(element => {\r\n                return { ...element, ... this.getNameProduct(element.id_product, element.id_subproduct) }\r\n              })\r\n            }\r\n\r\n            return { ...combo, subComboName: this.getSubCombo(combo.combos) }\r\n          } else\r\n            return {\r\n              ...item,\r\n              ... this.getNameProduct(item.id_product, item.id_subproduct)\r\n            }\r\n        })\r\n        this.init(res[0], invoiceDetailFresh)\r\n        \r\n        this.loading = true\r\n        this.dataAddress.PROVINCE_NAME = res[2].data.find(item => item.PROVINCE_ID == this.billInfo.delivery_viettel_data.RECEIVER_PROVINCE).PROVINCE_NAME\r\n        this.dataAddress.DISTRICT_NAME = this.uppercaseFirstChar(res[3].data.find(item => item.DISTRICT_ID == this.billInfo.delivery_viettel_data.RECEIVER_DISTRICT).DISTRICT_NAME)\r\n        this.dataAddress.WARDS_NAME = this.uppercaseFirstChar(res[4].data.find(item => item.WARDS_ID == this.billInfo.delivery_viettel_data.RECEIVER_WARDS).WARDS_NAME)\r\n      })\r\n    })\r\n  }\r\n  getNameProduct(id_prod: string, id_subProd: string) {\r\n    let product = this.vhQuerySales.getlocalProduct(id_prod)\r\n    let subFood: any\r\n    if (id_subProd) subFood = product.subs.find(item => item._id == id_subProd)\r\n    return { name: `${product ? product.name : ''} ${subFood ? '(' + subFood.name + ')' : ''}`, unit: product.unit }\r\n  }\r\n  /**Render các thành phần combo */\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity} ${item.name}`\r\n      else subName += `${item.quantity} ${item.name}`\r\n    })\r\n    return subName\r\n  }\r\n  init(invoice: VhSaleInvoice = null, invoiceDetail: VhSaleInvoiceDetail[] = null) {\r\n    this.invoice = new VhSaleInvoices(invoice, invoiceDetail, this.vhQuerySales)\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee()),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()),\r\n      }\r\n\r\n      if (this.invoice.getIdDelivery()) this.invoiceInfo['delivery'] = (this.vhQuerySales.getlocalDelivery(this.invoice.getIdDelivery()).name)\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n  }\r\n  cancelOrder() {\r\n    if (this.vhAuth.checkMyPermission(\"shipping_enable_cancel_bill\")) {\r\n      this.modalService.confirm({\r\n        nzTitle: this.lang.translate(\"Do you want to delete shipping bill ?\"),\r\n        nzCancelText: this.lang.translate(\"Cancel\"),\r\n        nzOnOk: () => {\r\n          return new Promise<any>((resolve) => {\r\n            let json = this.billInfo.delivery_viettel_data\r\n            json.deleted = true\r\n            this.invoice.setDeliveryViettelData(json)\r\n            this.viettelPost.cancelOrderViettel(this.dataRestore.data_delivery.token, this.billInfo.delivery_viettel_data?.ORDER_NUMBER).then(res => {\r\n              this.vhQuerySales.updateBill_Billdetail(this.invoice.getID(), this.invoice.getCreateUpdateInvoice(1), this.invoice.getCreateUpdateInvoiceDetail()).then(res => {\r\n                this.vhComponent.alertMessageDesktop('success', this.lang.translate('Delete bill successfully'))\r\n                this.dataRestore.reload = true\r\n                this.goBack()\r\n                resolve(true)\r\n              })\r\n            }).catch(err => this.vhComponent.alertMessageDesktop('error', err))\r\n          })\r\n        },\r\n        nzOnCancel: () => { },\r\n      })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.lang.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/delivery/shipping-bill/delivery-viettel\"], {\r\n      state: { dataRestore: this.dataRestore }\r\n    })\r\n  }\r\n  /*----------Print------------------*/\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n   /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n   * @example this.showPrint() \r\n   */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      this.vhComponent.showModal(this.renderPrintPage(printer['_id']), {\r\n        billInfo: {\r\n          ...this.dataRestore.billInfo, data: this.viettelPost.renderFormatPrintOrder({ ...this.billInfo.delivery_viettel_data, ...this.dataAddress, MONEY_COLLECTION: this.billInfo.delivery_viettel_data.MONEY_COLLECTION.toString() }), order_code: this.billInfo.delivery_viettel_data?.ORDER_NUMBER\r\n        },\r\n        billDetails: this.invoice.getInvoiceDetail(),\r\n        printer,\r\n        data_delivery: { ...this.dataRestore.data_delivery, type: 5 }\r\n      }, false, false, `modal-print-${printer['type']}`)\r\n    }, (err) => {\r\n      let name :any= 'Sales'\r\n      this.vhComponent.alertMessage(this.lang.translate(\"Function\"), \"\", this.lang.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.router.navigate(['/sales/dashboard/manage/printer','page_desktop_sales'],{state : name}))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'A4') {\r\n    switch (type) {\r\n      default: return DeliveryA45Component\r\n    }\r\n  }\r\n  //Viết hoa chữ cái đầu của mỗi từ\r\n  uppercaseFirstChar(str: string) {\r\n    let array = str.toLowerCase().split(' ');\r\n    let newStr = '';\r\n    array.forEach((item) => {\r\n      newStr += item.charAt(0).toUpperCase() + item.slice(1) + ' ';\r\n    });\r\n    return newStr\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"delivery-ghn\">\r\n        <div class=\"addInformation\">\r\n            <div nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"7\">\r\n                    <h3>{{\"Shipment bill\" | translate}}</h3>\r\n                </div>\r\n                <div nz-col nzSpan=\"17\" class=\"addInformation-button\">\r\n                    <button (click)=\"showPrint()\" nz-button class=\"nz-hover-border\">\r\n                        <ion-icon style=\"font-size: 0.9rem; margin-right: 4px; margin-bottom: -2px;\"\r\n                            src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                        {{\"Print shipping bill\"|translate}}\r\n                    </button>\r\n                    <button [disabled]=\"billInfo.delivery_viettel_data?.deleted == true\" (click)=\"cancelOrder()\"\r\n                        nz-button class=\"nz-hover-border\">\r\n                        <ion-icon style=\"font-size: 0.9rem; margin-right: 4px; margin-bottom: -2px;\"\r\n                            name=\"trash-outline\"></ion-icon>\r\n                        {{\"Cancel\"|translate}}\r\n                    </button>\r\n                </div>\r\n                <div class=\"addInformation-info\" nz-col nzSpan=\"24\">\r\n                    <h6>{{\"Receiver Information\" | translate}} / <a target=\"_blank\" style=\"font-weight: 500;\"\r\n                            href=\"https://viettelpost.vn/thong-tin-don-hang?peopleTracking=sender&orderNumber={{billInfo.delivery_viettel_data?.ORDER_NUMBER}}\">\r\n                            {{'Track order status' | translate}}</a></h6>\r\n                    <p><b>{{\"Invoice code\" | translate}}</b>: {{billInfo.bill_code}}</p>\r\n                    <p><b>{{\"Order code\" | translate}}</b>: {{billInfo.delivery_viettel_data?.ORDER_NUMBER}}</p>\r\n                    <p><b>{{\"Name\" | translate}}</b>: {{billInfo.delivery_viettel_data?.RECEIVER_FULLNAME}}</p>\r\n                    <p><b>{{\"Phone number\" | translate}}</b>: {{billInfo.delivery_viettel_data?.RECEIVER_PHONE}}</p>\r\n                    <p><b>{{'Delivery address' | translate}}</b>: {{dataAddress.WARDS_NAME}},\r\n                        {{dataAddress.DISTRICT_NAME}}, {{dataAddress.PROVINCE_NAME}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"productInfo ant-table-body\">\r\n            <h6>{{\"Products information\" | translate}}</h6>\r\n            <nz-table *ngIf=\"loading\" [nzScroll]=\"{ y: '200px' }\" #rowSelectionTable [nzShowPagination]=\"false\"\r\n                nzNoResult=\"{{'Not data'| translate}}\" [nzData]=\"invoice.getInvoiceDetail()\">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=\"text-align: left;\" colspan=\"7\"><b>{{'Product name' | translate}}</b></th>\r\n                        <th style=\"text-align: right;\" colspan=\"3\"><b>{{'Quantity' | translate}}</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let item of rowSelectionTable.data\" class=\"choose-product\">\r\n                        <td style=\"text-align: left;\" colspan=\"7\">\r\n                            {{item.name}}\r\n                        </td>\r\n                        <td style=\"text-align: right;\" colspan=\"7\">\r\n                            {{item.quantity}}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </nz-table>\r\n            <div nz-row>\r\n                <div style=\"margin-top:5px\" nz-col nzSpan=\"24\">\r\n                    <p><b>{{\"Weight converted\" | translate}}</b>: {{billInfo.delivery_viettel_data?.EXCHANGE_WEIGHT}}\r\n                        (gram)</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"deliveryInfo notReuseInfo\">\r\n            <div class=\"deliveryInfo-form ant-table-body\">\r\n                <h6>{{\"Delivery\" | translate}}</h6>\r\n                <p><b>{{\"COD\" | translate}}</b>:\r\n                    {{vhAlgorithm.vhcurrencyunit(billInfo.delivery_viettel_data?.MONEY_COLLECTION)}}\r\n                </p>\r\n                <p><b>{{\"COD Fee\" | translate}}</b>:\r\n                    {{vhAlgorithm.vhcurrencyunit(billInfo.delivery_viettel_data?.MONEY_COLLECTION_FEE || 0)}}\r\n                </p>\r\n                <p><b>{{\"VAT Fee\" | translate}}</b>:\r\n                    {{vhAlgorithm.vhcurrencyunit(billInfo.delivery_viettel_data?.MONEY_VAT || 0)}}\r\n                </p>\r\n                <p><b>{{'Other fees' | translate}}</b>:\r\n                    {{vhAlgorithm.vhcurrencyunit(billInfo.delivery_viettel_data?.MONEY_OTHER_FEE || 0)}}\r\n                </p>\r\n                <p><b>{{'Total freight' | translate}}</b>:\r\n                    {{vhAlgorithm.vhcurrencyunit(billInfo.delivery_viettel_data?.MONEY_TOTAL || 0)}}\r\n                </p>\r\n                <p><b>{{\"Fee payer\" | translate}}</b>:\r\n                    {{(billInfo.delivery_viettel_data?.MONEY_TOTAL == '3'? 'Sender':'Receiver')|translate}}\r\n                </p>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>"],"names":[],"sourceRoot":"webpack:///"}