{"version":3,"file":"src_app_sales_menu_manage_ecommerce_sendo_affiliate-product_affiliate-product_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/ecommerce/sendo/affiliate-product/affiliate-product.component.ts","./src/app/sales/menu/manage/ecommerce/sendo/affiliate-product/affiliate-product.component.html","./src/app/sales/menu/manage/ecommerce/sendo/affiliate-product/affiliate-product.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-affiliate-product',\r\n  templateUrl: './affiliate-product.component.html',\r\n  styleUrls: ['./affiliate-product.component.scss']\r\n})\r\nexport class AffiliateProductComponent implements OnInit {\r\n  listProduct: Array<any> = [] //danh sách product theo từng id_shop\r\n  listSubProduct: Array<any> = [] //danh sách product theo từng id_shop\r\n  listProductApp: Array<any> = [] //sp của app chứa sendos[]\r\n  listSubProductApp: Array<any> = [] //sp của app chứa sendos[]\r\n  /**----------------------------------- */\r\n  infoShop: any = {}\r\n  searchValue: string = '';\r\n  heightScroll: any;\r\n  /**\r\n   * Modal chọn sản phẩm liên kết\r\n   */\r\n  visible_affiliate: boolean = false;\r\n  isLoading: boolean = false;\r\n  searchOnSendo: string = ''\r\n  listProductSelected: Array<any> = []\r\n  id_product_selected: string = ''\r\n  setHeight = { \"max-height\": \"500px\", \"height\": \"500px\", \"overflow-y\": \"hidden\" }\r\n  id_branch = this.vhQuerySales.getDefaultBranch()._id\r\n  arrayHidden: Array<any> = [] //mảng này chứa id của những sp đang tạm ẩn\r\n  filterAffiliate: 1 | 2 | 3 = 1 // filter những sp đã liên kết 1 : tất cả , 2: sp chưa liên kết , 3 : sp đã liên kết\r\n  constructor(\r\n    private router: Router,\r\n    public lang: LanguageService,\r\n    public vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhQuerySales: VhQuerySales,\r\n    private cdRef: ChangeDetectorRef,\r\n  ) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.getData()\r\n  }\r\n  getData() {\r\n    this.infoShop = this.vhQuerySales.getlocalShopListSendo()[0];\r\n    this.changeShop(this.infoShop._id)\r\n  }\r\n  /**\r\n   * Hàm này để get những sp từ từ sàn ra, đồng thời get những sản phẩm từ app ra, merge lại\r\n   * sau đó show ra theo sp cha là sp của app, trong đó bao gồm những sp con là sản phẩm của sàn\r\n   * Note : những sp liên kết rồi hoặc sp tạm ẩn sẽ không nằm trong listProduct\r\n   * @param id : id_shop đã chọn\r\n   * @example  this.changeShop('FEHIUFHSJVMVNELOUWHUIR')\r\n   */\r\n  changeShop(id) {\r\n    let localProducts: Array<any> = this.vhQuerySales.getlocalDetailProducts(VhType.PRODUCT).filter(e => !e.delete_hidden)\r\n    this.listProductApp = localProducts.map(item => {\r\n      if (item[this.id_branch] && item[this.id_branch].sendos && item[this.id_branch].sendos.length) { //filter những sp sendo thuộc id sendo đã chọn\r\n        item[this.id_branch].sendos = [...item[this.id_branch].sendos.filter(prod => prod.id_shop == id)]\r\n      }\r\n      return {...item, ...this.vhQuerySales.getUnit_byRatio(item.units, 1)}\r\n    })\r\n    this.listSubProductApp = [...this.listProductApp]\r\n    this.returnArrayHiddenProduct()\r\n    this.listProduct = this.clearProductShow([...this.vhQuerySales.getlocalProductListSendo(id).filter(item => !this.arrayHidden.includes(item.id))], this.listProductApp)\r\n    this.listSubProduct = this.cloneDeepProducts()\r\n    this.search(this.searchValue)\r\n  }\r\n  /**Xóa những sp đã được liên kết rồi ra khỏi mảng của modal danh sách sp liên kết\r\n   * @examplethis.clearProductShow(listProductSendo, listProductApp)\r\n   */\r\n  clearProductShow(listProduct, listProductApp) {\r\n    for (let prodApp of listProductApp) {\r\n      if (prodApp[this.id_branch] && prodApp[this.id_branch].sendos && prodApp[this.id_branch].sendos.length) {\r\n        for (let item of prodApp[this.id_branch].sendos) {\r\n          if (!item.variants.length) {\r\n            let index = listProduct.findIndex(data => data.id == item.id)\r\n            if (index >= 0) listProduct.splice(index, 1)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return listProduct\r\n  }\r\n  /**\r\n   * Lấy ra những id của các sản phẩm bị tận ẩn\r\n   * @example this.returnArrayHiddenProduct() \r\n   */\r\n  returnArrayHiddenProduct() {\r\n    let arr: Array<any> = []\r\n    this.arrayHidden = []\r\n    let localProduct: Array<any> = this.vhQuerySales.getlocalDetailProducts(VhType.PRODUCT).filter(e => !e.delete_hidden)\r\n    for (let product of localProduct) {\r\n      if (product[this.id_branch] && product[this.id_branch].sendos && product[this.id_branch].sendos.length) {\r\n        for (let prod of product[this.id_branch].sendos)\r\n          if (prod.hidden == true && prod.id_shop == this.infoShop['_id']) arr.push(prod.id);\r\n      }\r\n    }\r\n    this.arrayHidden = arr;\r\n  }\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/ecommerce/sendo'])\r\n  }\r\n  \r\n  /**\r\n   * search tên sản phẩm trong app viethas\r\n   * @param value \r\n   * @example this.search('')\r\n   */\r\n  search(value: string) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n    this.listProductApp = this.vhAlgorithm.searchList(val, [...this.listSubProductApp], ['name'])\r\n    this.filterAffilateProduct()\r\n  }\r\n\r\n  /**\r\n   * Lọc sản phẩm đã liên kết/ chưa liên kết\r\n   * @example this.filterAffilateProduct()\r\n   */\r\n  filterAffilateProduct() {\r\n    switch (this.filterAffiliate) {\r\n      case 1: break;\r\n      case 2: this.listProductApp = this.listProductApp.filter(prodApp => {\r\n        if (!prodApp[this.id_branch]?.sendos?.length) return true\r\n        else return !prodApp[this.id_branch]?.sendos.some(item => item.id_shop == this.infoShop['_id'])\r\n      }); break;\r\n      case 3: this.listProductApp = this.listProductApp.filter(prodApp => {\r\n        if (prodApp[this.id_branch]?.sendos?.length)\r\n          return prodApp[this.id_branch].sendos.some(item => item.id_shop == this.infoShop['_id'])\r\n        else return false\r\n      }); break;\r\n    }\r\n  }\r\n  /**\r\n   * Mở modal lên để liên kết những sản phẩm trên sàn vào sp được truyền vào\r\n   * @param product \r\n   * @example this.openModelSelectProductsSendo(product)\r\n   */\r\n  openModelSelectProductsSendo(product) {\r\n    this.id_product_selected = product['id_subproduct'] ? product['id_subproduct'] : product['_id']\r\n    this.visible_affiliate = true;\r\n  }\r\n  /**\r\n   * Thêm/xóa những sp cần liên kết vào mảng\r\n   * @param bool \r\n   * @param product : sp sendo đã chọn\r\n   * @param subProd : sp con của sendo\r\n   * @example this.addProductAffilate(bool, product, subProd?)\r\n   */\r\n  addProductAffilate(bool, product, subProd?) {\r\n    let indexProduct = this.listProductSelected.findIndex(item => item.id == product.id)\r\n    if (bool) {\r\n      if (indexProduct >= 0 && subProd) {\r\n        if (!this.listProductSelected[indexProduct].variants)\r\n          this.listProductSelected[indexProduct].variants = []\r\n        this.listProductSelected[indexProduct].variants.push({ variant_attribute_hash: subProd.variant_attribute_hash })\r\n      } else {\r\n        this.listProductSelected.push({\r\n          id: product.id,\r\n          variants: subProd ? [{ variant_attribute_hash: subProd.variant_attribute_hash }] : []\r\n        })\r\n      }\r\n    } else {\r\n      if (indexProduct >= 0 && subProd) {\r\n        this.listProductSelected[indexProduct].variants.splice(this.listProductSelected[indexProduct].variants.findIndex(sub => sub.variant_attribute_hash == subProd.variant_attribute_hash), 1)\r\n        if (this.listProductSelected[indexProduct].variants.length == 0) this.listProductSelected.splice(indexProduct, 1)\r\n      } else this.listProductSelected.splice(indexProduct, 1)\r\n    }\r\n  }\r\n  /**\r\n   * Thêm liên kết lần lượt cho sản phẩm\r\n   * @example this.accceptAfiliate() \r\n   */\r\n  accceptAfiliate() {\r\n    this.visible_affiliate = false\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.affilateMultipleProduct(this.listProductSelected).then(res => {\r\n        this.vhComponent.hideLoading().then(() => {\r\n          setTimeout(() => {\r\n            this.listProductSelected = []\r\n            this.changeShop(this.infoShop._id)\r\n            this.vhComponent.showToast(1500, this.lang.translate(\"Product linked successfully\"), \"success-toast\")\r\n          }, 500)\r\n        })\r\n      }).catch(err => {\r\n        this.listProductSelected = []\r\n        this.vhComponent.showToast(1500, this.lang.translate(\"The product link failed\"), \"alert-toast\")\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * Liên kết nhiều sản phẩm\r\n   * @example this.affilateMultipleProduct(products) \r\n   */\r\n  affilateMultipleProduct(products) {\r\n    return new Promise((resolve, reject) => {\r\n      let action = async () => {\r\n        for (let index in products) {\r\n          try {\r\n            let bool = await this.vhQuerySales.addMergeSendoProduct_variants(this.id_product_selected, products[index].id, products[index]['variants'], this.infoShop['_id'])\r\n            if (!bool) reject(false)\r\n          } catch (err) {\r\n            reject(false)\r\n          }\r\n          if (+index == products.length - 1) resolve(true)\r\n        }\r\n      }\r\n      action()\r\n    })\r\n  }\r\n  /**\r\n   * Clone mảng product ra để tránh bị ghi đè dữ liệu\r\n   * @param subProducts \r\n   * @returns let arr_products = this.cloneDeepProducts([])\r\n   */\r\n  cloneDeepProducts(subProducts?) {\r\n    let products = []\r\n    products = (subProducts || this.listProduct).map(item => {\r\n      item.expandLoading = false\r\n      item.expandModal = false\r\n      item.isChecked = false\r\n      if (item.variants && item.variants.length) {\r\n        item.variants = item.variants.map(data => {\r\n          data.isChecked = false\r\n          return data\r\n        })\r\n      }\r\n      return item\r\n    })\r\n    return [...products]\r\n  }\r\n  /**\r\n   * tắt modal thêm sản phẩm và clone lại mảng product mới , nếu k sẽ dẫn đến khi mở modal khác sẽ có những sp bị check\r\n   * @example this.cancelAffiliate()\r\n   */\r\n  cancelAffiliate() {\r\n    this.listProductSelected = []\r\n    this.searchOnSendo = ''\r\n    this.visible_affiliate = false\r\n    this.listProduct = this.cloneDeepProducts(this.listSubProduct)\r\n  }\r\n  /**\r\n   * Tìm kiếm sản phẩm trên modal\r\n   * @param value \r\n   * @example this.searchSendo('')\r\n   */\r\n  searchSendo(value) {\r\n    if (value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.listProduct = this.vhAlgorithm.searchList(val, [...this.listSubProduct], ['name'])\r\n    } else this.listProduct = [...this.listSubProduct]\r\n  }\r\n  /**\r\n   * Gỡ liên kết sản phẩm trên sàn với sp trong app\r\n   * @param id_product \r\n   * @param id \r\n   * @param variant_attribute_hash \r\n   */\r\n  removeAffiliate(id_product, id, variant_attribute_hash?) {\r\n    this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Are you sure to remove this product\") + \"?\", \"Ok\", this.lang.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        this.vhQuerySales.deleteMergeSendoProduct_variants(id_product, id, variant_attribute_hash || null, this.infoShop['_id']).then((bool) => {\r\n          if (bool) {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              setTimeout(() => {\r\n                this.changeShop(this.infoShop._id)\r\n                this.vhComponent.showToast(1500, this.lang.translate(\"The product has been successfully unlinked\"), 'success-toast')\r\n              }, 500)\r\n            });\r\n          }\r\n        }).catch((err) => { console.error(err); this.vhComponent.hideLoading(0) })\r\n      })\r\n    }).catch(() => { })\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#affiliate-product\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".affiliate-product-header\")) {\r\n      this.heightScroll = document.querySelector(\"#affiliate-product\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".affiliate-product-header\").clientHeight - 90 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**Load detail sp của sendo vào trong sp viethas\r\n   * Trường hợp có trường variants rồi thì tức là sp đã được get về rồi không cần get nữa\r\n   * @example this.loadProductSendo(product)\r\n  */\r\n  loadProductSendo(product: any) {\r\n    let localProductSendo: Array<any> = this.vhQuerySales.getlocalProductListSendo(this.infoShop['_id']);\r\n    product.expand = !product.expand\r\n    if (!product.loaded) {\r\n      let existData: boolean = true\r\n      for (let item of product[this.id_branch].sendos) {\r\n        let index = localProductSendo.findIndex(data => item.id == data.id)\r\n        if (index >= 0 && !localProductSendo[index].hasOwnProperty('variants')) {\r\n          existData = false;\r\n          this.loadingDataDetailSendo(product)\r\n          break;\r\n        }\r\n      }\r\n      if (existData) {\r\n        for (let index in product[this.id_branch].sendos)\r\n          product[this.id_branch].sendos[index] = this.renderProdSendo(product[this.id_branch].sendos[index], localProductSendo)\r\n        product.loaded = true\r\n      }\r\n    }\r\n  }\r\n  /**Load dữ liệu từ sendo về \r\n   * @example this.loadingDataDetailSendo(product)\r\n   */\r\n  loadingDataDetailSendo(product) {\r\n    let idArray: Array<any> = []\r\n    product[this.id_branch].sendos.forEach(item => {\r\n      idArray.push(item.id)\r\n    })\r\n    if (idArray.length >= 1) {\r\n      this.vhQuerySales.getProductDetailSendo(idArray, this.infoShop['token'], this.infoShop['_id']).then((details: any) => {\r\n        for (let index in product[this.id_branch].sendos) {\r\n          product[this.id_branch].sendos[index] = this.renderProdSendo(product[this.id_branch].sendos[index], details)\r\n        }\r\n        product.loaded = true\r\n      })\r\n    }\r\n  }\r\n  /**render tên của những sản phẩm sendo\r\n   * @param prod : product trong mảng sendos của product app\r\n   * @param details : product của sendo get về\r\n   *  @example this.renderProdSendo(product_sendos_app, product_sendo)\r\n   */\r\n  renderProdSendo(prod, details) {\r\n    let findProd: any = this.vhQuerySales.getlocalProductListSendo(this.infoShop['_id']).find(item => item.id == prod.id)\r\n    if (!prod.variants.length) {//th không có sp con;\r\n      return prod = {\r\n        ...prod, name: findProd.name, price: findProd.price,\r\n        stock_quantity: findProd.stock_quantity, image: findProd.stock_quantity,\r\n        sku: findProd.sku, status: findProd.status, stock_availability: findProd.stock_availability\r\n      }\r\n    } else { //th có sp con\r\n      for (let prodLazada in prod.variants) {\r\n        let findProduct = findProd.variants.find(data => data.variant_attribute_hash == prod.variants[prodLazada].variant_attribute_hash)\r\n        if (findProduct)\r\n          prod.variants[prodLazada] = { ...prod.variants[prodLazada], ...findProduct }\r\n      }\r\n      return prod = { ...findProd, variants: prod.variants }\r\n    }\r\n  }\r\n  /**Lấy chi tiết từng sản phẩm con show modal\r\n   * @example this.loadProdShowModal(product)\r\n  */\r\n  loadProdShowModal(product) {\r\n    product.expandModal = !product.expandModal\r\n    product.expandLoading = false\r\n    if (!product.loaded) {\r\n      if (product.variants && product.variants.length) {\r\n        product.variants = this.clearChildProduct(product.variants, product.id)\r\n        product.loaded = true\r\n      } else {\r\n        product.expandLoading = true\r\n        this.vhQuerySales.getProductDetailSendo([product.id], this.infoShop['token'], this.infoShop['_id']).then((details: any) => {\r\n          product.expandLoading = false\r\n          if (details.length && details[0].variants) {\r\n            product.variants = this.clearChildProduct(details[0].variants, product.id)\r\n            product.loaded = true;\r\n          }\r\n        }).catch(err => console.error(err))\r\n      }\r\n    } else {\r\n      if (product.variants && product.variants.length)\r\n        product.variants = this.clearChildProduct(product.variants, product.id)\r\n    }\r\n  }\r\n  /**Xóa những sp con đã được liên kết ra khỏi modal \r\n   * @param variants\r\n   * @param id : id của sp trên sendo đã chọn\r\n   *  @example this.clearChildProduct(variants, id_product_sendo)\r\n  */\r\n  clearChildProduct(variants: Array<any>, id: string) {\r\n    let list: Array<any> = []\r\n    for (let prodSendo of variants) {\r\n      let exist: boolean = false;\r\n      for (let prodApp of this.listSubProductApp) {\r\n        if (prodApp[this.id_branch] && prodApp[this.id_branch].sendos && prodApp[this.id_branch].sendos.length) {\r\n          for (let item of prodApp[this.id_branch].sendos) {\r\n            if (item.id == id) {\r\n              for (let sub of item.variants) {\r\n                if (sub.variant_attribute_hash == prodSendo.variant_attribute_hash) {\r\n                  exist = true;\r\n                  break;\r\n                }\r\n              }\r\n              if (exist) break;\r\n            }\r\n          }\r\n          if (exist) break;\r\n        }\r\n      }\r\n      if (!exist) list.push(prodSendo)\r\n    }\r\n    return list\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"affiliate-product\">\r\n    <div nz-row nzGutter=\"8\" class=\"affiliate-product-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title\">\r\n            <b>{{'Link products in the store with products on Sendo' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\">\r\n            <!-- <nz-select nzPlaceHolder=\"{{'Select shop on Sendo' | translate}}\" nzShowSearch\r\n                [(ngModel)]=\"id_shop_selected\" (ngModelChange)=\"changeShop($event)\">\r\n                <nz-option *ngFor=\"let option of listShop\" nzLabel=\"{{option.data.name}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select> -->\r\n            {{'Shop name' | translate}} : <b class=\"color-green\">{{infoShop.data?.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\">\r\n            <nz-select [(ngModel)]=\"filterAffiliate\" (ngModelChange)=\"search(searchValue)\">\r\n                <nz-option nzLabel=\"{{'All products' | translate}}\" [nzValue]=1>\r\n                </nz-option>\r\n                <nz-option nzLabel=\"{{'Unlinked products' | translate}}\" [nzValue]=2>\r\n                </nz-option>\r\n                <nz-option nzLabel=\"{{'Linked products' | translate}}\" [nzValue]=3>\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"search($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for product Sales Viethas' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n    <div nz-row nzGutter=\"16\" class=\"affiliate-product-body\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n                [nzScroll]=\"{ y: heightScroll }\" #list_product_show nzShowPagination nzShowSizeChanger\r\n                nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"listProductApp\">\r\n                <thead>\r\n                    <tr>\r\n                        <th nzWidth=\"3%\"><b></b></th>\r\n                        <th nzWidth=\"10%\"><b>{{'Image' | translate}}</b></th>\r\n                        <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\"><b>{{'Status on Sendo' | translate}}</b></th>\r\n                        <th nzAlign=\"right\" nzWidth=\"15%\"><b>{{\"Selling price\"| translate}}</b></th>\r\n                        <th nzWidth=\"12%\"><b>{{\"Functions\" | translate}}</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of list_product_show.data;index as i;trackBy: trackByFn\">\r\n                        <tr>\r\n                            <td><i class=\"icon-expand\"\r\n                                    *ngIf=\"item[id_branch] && item[id_branch].sendos && item[id_branch].sendos.length\"\r\n                                    (click)=\"loadProductSendo(item)\" nz-icon [nzType]=\"item.expand ? 'up' : 'down'\"\r\n                                    nzTheme=\"outline\"></i></td>\r\n                            <td>\r\n                                <img [ngStyle]=\"{width: item.img ? '40px' : '30px'}\"\r\n                                    onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"item.img\"\r\n                                    width=\"40px\" height=\"40px\" />\r\n                            </td>\r\n                            <td><b>{{item.name}}</b></td>\r\n                            <td>{{item.status}}</td>\r\n                            <td nzAlign=\"right\"><b>{{vhAlgorithm.vhcurrencyunit(item.price)}}</b></td>\r\n                            <td nzAlign=\"center\"><i (click)=\"openModelSelectProductsSendo(item)\" class=\"icon-link green\"\r\n                                    nz-icon nzType=\"link\" nzTheme=\"outline\"></i>\r\n                            </td>\r\n                        </tr>\r\n                        <nz-spin style=\"color: var(--ion-color-vh-green);\" nzTip=\"{{'Loading...' | translate}}\"\r\n                            [nzSpinning]=\"item.expand && !item.loaded\" nzSimple></nz-spin>\r\n                        <ng-container *ngIf=\"item.expand && item.loaded\">\r\n                            <ng-container *ngFor=\"let product of item[id_branch].sendos\">\r\n                                <tr *ngIf=\"!product.variants.length\">\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td style=\"padding-left: 24px;\">\r\n                                        <span *ngIf=\"product.name\">{{product.name}}</span>\r\n                                        <span class=\"color-red\" *ngIf=\"!product.name\">{{'Error products, please delete the link' | translate}}</span>\r\n                                    </td>\r\n                                    <td>{{(product.stock_availability ?'Active' : 'Not active') | translate}}</td>\r\n                                    <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(product.price)}}\r\n                                    </td>\r\n                                    <td nzAlign=\"center\"><i (click)=\"removeAffiliate(item.id_subproduct ? item.id_subproduct : item._id,product.id)\"\r\n                                            class=\"icon-link red\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i></td>\r\n                                </tr>\r\n                                <ng-container *ngIf=\"product.variants.length\">\r\n                                    <tr *ngFor=\"let variant of product.variants\">\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td style=\"padding-left: 24px;\">\r\n                                            <span *ngIf=\"variant.variant_sku\">{{product.name}}</span>\r\n                                            <span class=\"color-red\" *ngIf=\"!variant.variant_sku\">{{'Error products, please delete the link' | translate}}</span>\r\n                                            <p *ngIf=\"variant.variant_attribute_hash\">{{'Subproduct code' | translate}}:\r\n                                                <span class=\"color-green\">{{variant.variant_sku}}</span>\r\n                                            </p>\r\n                                        </td>\r\n                                        <td>{{(product.stock_availability ?'Active' : 'Not active') | translate}}</td>\r\n                                        <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(variant.variant_price)}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\"><i\r\n                                                (click)=\"removeAffiliate(item.id_subproduct ? item.id_subproduct : item._id,product.id,variant.variant_attribute_hash)\"\r\n                                                class=\"icon-link red\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i></td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </ng-container>\r\n\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n    </div>\r\n\r\n</nz-layout>\r\n\r\n\r\n<!-- --------------modal chọn sản phẩm liên kết--------------- -->\r\n<nz-modal class=\"model-link-product-ecommerce\" [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooter\" [nzWidth]=\"650\"\r\n    [nzBodyStyle]=\"setHeight\" [(nzVisible)]=\"visible_affiliate\" nzTitle=\"{{'Select Sendo linked products' | translate}}\"\r\n    (nzOnCancel)=\"cancelAffiliate()\" (nzOnOk)=\"accceptAfiliate()\" [nzOkLoading]=\"isLoading\">\r\n    <div *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"title center-all-content\">\r\n                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                    <input [(ngModel)]=\"searchOnSendo\" (ngModelChange)=\"searchSendo($event)\" type=\"text\" nz-input\r\n                        placeholder=\"{{'Search for product name' | translate}}\" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconSearch>\r\n                    <i nz-icon nzType=\"search\"></i>\r\n                </ng-template>\r\n            </div>\r\n            <nz-table class=\"product-table-modal-ecommerce\" [nzPageSize]=\"20\"\r\n                [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: '400px' }\" #list_product_sendo\r\n                nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"listProduct\">\r\n                <thead>\r\n                    <tr>\r\n                        <th nzWidth=\"10%\"></th>\r\n                        <th nzWidth=\"15%\"></th>\r\n                        <th nzWidth=\"45%\"></th>\r\n                        <th nzWidth=\"30%\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody class=\"product\">\r\n                    <ng-container *ngFor=\"let item of list_product_sendo.data;index as i;trackBy: trackByFn\">\r\n                        <tr class=\"product-item\">\r\n                            <td>\r\n                                <label *ngIf=\"item.variants_length==0\" [(ngModel)]=\"item.isChecked\"\r\n                                    (ngModelChange)=\"addProductAffilate($event,item)\" class=\"product-item-checkbox\"\r\n                                    nz-checkbox></label>\r\n                                <i *ngIf=\"item.variants_length>0\" class=\"icon-expand\" (click)=\"loadProdShowModal(item)\"\r\n                                    nz-icon [nzType]=\"item.expandModal ? 'up' : 'down'\" nzTheme=\"outline\"></i>\r\n                            </td>\r\n                            <td>\r\n                                <img [ngStyle]=\"{width: item.image ? '40px' : '30px'}\"\r\n                                    onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"item.image\"\r\n                                    width=\"40px\" height=\"40px\" />\r\n                            </td>\r\n                            <td class=\"product-item-name\">\r\n                                <span>{{item.name}}</span>\r\n                                <span>SKU :{{item.sku}}</span>\r\n                            </td>\r\n                            <td><b>{{vhAlgorithm.vhcurrencyunit(item.price ||\r\n                                    item.final_price_min)}}</b></td>\r\n                        </tr>\r\n                        <nz-spin style=\"color: var(--ion-color-vh-green);\" nzTip=\"{{'Loading...' | translate}}\"\r\n                            [nzSpinning]=\"item.expandLoading && !item.loaded\" nzSimple>\r\n                        </nz-spin>\r\n                        <ng-container *ngIf=\"item.expandModal && item.loaded\">\r\n                            <tr *ngFor=\"let data of item.variants\" class=\"product-item-sub\">\r\n                                <td></td>\r\n                                <td class=\"product-item-sub-checkbox\">\r\n                                    <label [(ngModel)]=\"data.isChecked\"\r\n                                        (ngModelChange)=\"addProductAffilate($event,item,data)\" nz-checkbox></label>\r\n                                </td>\r\n                                <td class=\"product-item-sub-name\">\r\n                                    <span>{{item.name}}</span>\r\n                                    <span>{{\"Subproduct code\" | translate}} : {{data.variant_sku}}</span>\r\n                                </td>\r\n                                <td class=\"product-item-sub-price\">\r\n                                    <b>{{vhAlgorithm.vhcurrencyunit(data.variant_price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td colSpan=\"4\"><span class=\"color-red\" *ngIf=\"!item.variants.length\">\r\n                                        {{\"Tất cả các sản phẩm con đều đã được liên kết\"}}</span>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-container>\r\n\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n\r\n        </div>\r\n        <ng-template #no_data>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"24\" class=\"no-data\">{{'No data'|translate}}\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n    <ng-template #modalFooter>\r\n        <div class=\"footerModal\">\r\n            <div class=\"footerModal-button center-all-content\">\r\n                <button (click)=\"cancelAffiliate()\" class=\"btn-white\" nz-button>{{\"Cancel\" | translate}}</button>\r\n                <button [disabled]=\"!listProductSelected.length\" (click)=\"accceptAfiliate()\" nz-button\r\n                    class=\"btn-green\">{{\"Confirm\" | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AffiliateProductComponent } from './affiliate-product.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AffiliateProductComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [AffiliateProductComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class AffiliateProductModule { }\r\n"],"names":["VhType","i0","item_r7","item_r49","ctx_r4","AffiliateProductComponent","constructor","router","lang","vhComponent","vhAlgorithm","vhQuerySales","cdRef","getDefaultBranch","_id","ngOnInit","getData","infoShop","getlocalShopListSendo","changeShop","id","localProducts","getlocalDetailProducts","PRODUCT","filter","e","delete_hidden","listProductApp","map","item","id_branch","sendos","length","prod","id_shop","getUnit_byRatio","units","listSubProductApp","returnArrayHiddenProduct","listProduct","clearProductShow","getlocalProductListSendo","arrayHidden","includes","listSubProduct","cloneDeepProducts","search","searchValue","prodApp","variants","index","findIndex","data","splice","arr","localProduct","product","hidden","push","trackByFn","goBack","navigate","value","val","changeAlias","trim","toLowerCase","searchList","filterAffilateProduct","filterAffiliate","_a","_b","_c","some","openModelSelectProductsSendo","id_product_selected","visible_affiliate","addProductAffilate","bool","subProd","indexProduct","listProductSelected","variant_attribute_hash","sub","accceptAfiliate","showLoading","then","affilateMultipleProduct","res","hideLoading","setTimeout","showToast","translate","catch","err","products","Promise","resolve","reject","action","addMergeSendoProduct_variants","subProducts","expandLoading","expandModal","isChecked","cancelAffiliate","searchOnSendo","searchSendo","removeAffiliate","id_product","alertConfirm","deleteMergeSendoProduct_variants","console","error","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","loadProductSendo","localProductSendo","expand","loaded","existData","hasOwnProperty","loadingDataDetailSendo","renderProdSendo","idArray","forEach","getProductDetailSendo","details","findProd","find","name","price","stock_quantity","image","sku","status","stock_availability","prodLazada","findProduct","Object","loadProdShowModal","clearChildProduct","list","prodSendo","exist","selectors","decls","vars","consts","template","ctx","_r5"],"sourceRoot":"webpack:///"}