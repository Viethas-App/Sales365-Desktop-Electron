{"version":3,"file":"src_app_sales_menu_manage_ecommerce_shopee_affiliate-product_affiliate-product_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/ecommerce/shopee/affiliate-product/affiliate-product.component.ts","./src/app/sales/menu/manage/ecommerce/shopee/affiliate-product/affiliate-product.component.html","./src/app/sales/menu/manage/ecommerce/shopee/affiliate-product/affiliate-product.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhEcommerce, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { platform } from 'os';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-affiliate-product',\r\n  templateUrl: './affiliate-product.component.html',\r\n  styleUrls: ['./affiliate-product.component.scss']\r\n})\r\nexport class AffiliateProductComponent implements OnInit {\r\n  listProduct: Array<any> = []; //danh sách product theo từng id_shop\r\n  listSubProduct: Array<any> = []; //danh sách product theo từng id_shop\r\n  listProductApp: Array<any> = []; //sp của app chứa shopees[]\r\n  listSubProductApp: Array<any> = []; //sp của app chứa shopees[]\r\n  /**----------------------------------- */\r\n  infoShop: any = {};\r\n  searchValue: any = '';\r\n  heightScroll: any;\r\n  /**\r\n   * Modal chọn sản phẩm liên kết\r\n   */\r\n  visible_affiliate: boolean = false;\r\n  isLoading: boolean = false;\r\n  searchOnShopee: string = '';\r\n  listProductSelected: Array<any> = [];\r\n  id_product_selected: string = '';\r\n  setHeight = { \"max-height\": \"500px\", \"height\": \"500px\", \"overflow-y\": \"hidden\" };\r\n  loading: boolean = false;\r\n  id_branch: string = this.vhQuerySales.getDefaultBranch()._id;\r\n  filterAffiliate: 1 | 2 | 3 = 1; // filter những sp đã liên kết 1 : tất cả , 2: sp chưa liên kết , 3 : sp đã liên kết\r\n  constructor(\r\n    private router: Router,\r\n    public lang: LanguageService,\r\n    public vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhQuerySales: VhQuerySales,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhEcommerce: VhEcommerce\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n\r\n  }\r\n  getData() {\r\n    this.infoShop = this.vhEcommerce.getlocalShopListShopee()[0];\r\n    this.changeShop(this.infoShop._id);\r\n  }\r\n  /**\r\n   * Hàm này để get những sp từ  sàn ra, đồng thời get những sản phẩm từ app ra, merge lại\r\n   * sau đó show ra theo sp cha là sp của app, sp con là sản phẩm của sàn\r\n   * Note : những sp liên kết rồi hoặc sp tạm ẩn sẽ không nằm trong listProduct\r\n   * @param id : id_shop đã chọn\r\n   * @example this.changeShop('FENIWDKASDWIUOYHWIDD')\r\n   */\r\n  changeShop(id) {\r\n    let localProducts: Array<any> = this.vhQuerySales.getlocalDetailProducts(35).filter(e => !e.delete_hidden);\r\n\r\n    this.listProductApp = localProducts.map(item => {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, 1);\r\n      if (item[this.id_branch] && item[this.id_branch].shopees && item[this.id_branch].shopees.length) { //filter những sp shopee thuộc id shopee đã chọn\r\n        item[this.id_branch].product_shopees = [...item[this.id_branch].shopees.filter(prod => prod.id_shop == id)];\r\n      }\r\n      return { ...item, ...unit };\r\n    });\r\n    this.listSubProductApp = this.listProductApp;\r\n\r\n    this.listProduct = this.clearProductShow(this.vhEcommerce.getlocalProductListShopee(this.infoShop['_id']).filter(item => item.item_status == 'NORMAL'), this.listProductApp);\r\n    this.listSubProduct = this.cloneDeepProducts();\r\n    this.search(this.searchValue);\r\n\r\n  }\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n  /**Xóa những sp đã được liên kết rồi ra khỏi mảng của modal danh sách sp liên kết\r\n   * @example this.clearProductShow(listProductShopee, listProductApp)\r\n   */\r\n  clearProductShow(listProduct, listProductApp) {\r\n    for (let prodApp of listProductApp) {\r\n      if (prodApp[this.id_branch] && prodApp[this.id_branch].shopees && prodApp[this.id_branch].shopees.length) {\r\n        let arrayProdShopee = prodApp[this.id_branch].shopees;\r\n        for (let item of arrayProdShopee) {\r\n          let indexProd = listProduct.findIndex(prod => prod.item_id == item.item_id);\r\n          if (indexProd >= 0) {\r\n            if (listProduct[indexProd].model && item.model && item.model.length) {\r\n              for (let model of item.model) {\r\n                let index = listProduct[indexProd].model.findIndex(data => data.model_id == model?.model_id);\r\n                if (index >= 0) listProduct[indexProd].model.splice(index, 1);\r\n              }\r\n              if (!listProduct[indexProd].model.length) listProduct.splice(indexProd, 1);\r\n            } else listProduct.splice(indexProd, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return listProduct;\r\n  }\r\n  /**\r\n   * trở về trang quản lý shopee\r\n   * @example this.goBack()\r\n   */\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/ecommerce/shopee']);\r\n  }\r\n\r\n  /**\r\n   * search tên sản phẩm trong app viethas\r\n   * @example this.search('Sản phẩm A')\r\n   */\r\n  search(value: string) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase());\r\n    this.listProductApp = this.vhAlgorithm.searchList(val, [...this.listSubProductApp],  ['name','barcode','item_code']);\r\n    this.filterAffilateProduct();\r\n  }\r\n  /**\r\n * Lọc sản phẩm đã liên kết/ chưa liên kết\r\n * @example this.filterAffilateProduct()\r\n */\r\n  filterAffilateProduct() {\r\n    switch (this.filterAffiliate) {\r\n      case 1: break;\r\n      case 2: this.listProductApp = this.listProductApp.filter(prodApp => {\r\n        if (!prodApp[this.id_branch]?.shopees?.length) return true;\r\n        else return !prodApp[this.id_branch]?.shopees.some(item => item.id_shop == this.infoShop['_id']);\r\n      }); break;\r\n      case 3: this.listProductApp = this.listProductApp.filter(prodApp => {\r\n        if (prodApp[this.id_branch]?.shopees?.length)\r\n          return prodApp[this.id_branch].shopees.some(item => item.id_shop == this.infoShop['_id']);\r\n        else return false;\r\n      }); break;\r\n    }\r\n  }\r\n  /**\r\n   * Mở modal và gán id_product của sp app để sau khi click button ok sẽ lấy id_product nào đem đi liên kết\r\n   * @param product\r\n   * @example  this.openModelSelectProductsShopee(product)\r\n   */\r\n  openModelSelectProductsShopee(product) {\r\n    this.id_product_selected = product.id_subproduct ? product.id_subproduct : product['_id'];\r\n    this.visible_affiliate = true;\r\n  }\r\n  /**\r\n   * Thêm sản phẩm vào mảng chuẩn bị liên kết\r\n   * @param bool\r\n   * @param product\r\n   * @param model\r\n   *  @example this.addProductAffilate(true, product, model)\r\n   */\r\n  addProductAffilate(bool, product, model?) {\r\n\r\n\r\n    let indexItem = this.listProductSelected.findIndex(item => item.item_id == product.item_id);\r\n    if (bool) {\r\n      if (indexItem >= 0 && product.has_model) {\r\n        !this.listProductSelected[indexItem].models && (this.listProductSelected[indexItem].models = []);\r\n        this.listProductSelected[indexItem].models.push(model);\r\n      } else {\r\n        this.listProductSelected.push({\r\n          item_id: product.item_id,\r\n          models: model ? [model] : []\r\n        });\r\n      }\r\n    } else {\r\n      if (model) {\r\n        this.listProductSelected[indexItem].models.splice(this.listProductSelected[indexItem].models.findIndex(data => data.model_id == model.model_id), 1);\r\n        if (this.listProductSelected[indexItem].models.length == 0) this.listProductSelected.splice(indexItem, 1);\r\n      }\r\n      else this.listProductSelected.splice(indexItem, 1);\r\n    }\r\n\r\n  }\r\n  /**\r\n   * Thêm lần lượt các sản phẩm liên kết trong mảng listProductSelected, sau khi liên kết xong sẽ refresh lại sp\r\n   * @example this.acceptAfiliate()\r\n   */\r\n  acceptAfiliate() {\r\n    this.visible_affiliate = false;\r\n\r\n    const product = this.vhQuerySales.getlocalDetailProduct(this.id_product_selected);\r\n    const isZeroPriceCombo = product.type === VhType.COMBO && product.units[0].price === 0;\r\n\r\n    const confirmZeroPriceComboMessage = this.lang.translate(\"This product is a combo with a price of 0. Do you still want to link it with the product\", {platform : 'Shopee'}) + \"?\";\r\n\r\n    const linkProducts = () => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        this.affilateMultipleProduct(this.listProductSelected).then(() => {\r\n          this.vhComponent.hideLoading().then(() => {\r\n            setTimeout(() => {\r\n              this.listProductSelected = [];\r\n              this.changeShop(this.infoShop._id);\r\n              this.vhComponent.alertMessageDesktop('success', this.lang.translate(\"Product linked successfully\"));\r\n            }, 300);\r\n          });\r\n        }).catch(err => {\r\n          console.error(err);\r\n          this.listProductSelected = [];\r\n          this.vhComponent.alertMessageDesktop('error', this.lang.translate(\"The product link failed\"));\r\n          this.vhComponent.hideLoading(0);\r\n        });\r\n      });\r\n    };\r\n\r\n    if (isZeroPriceCombo) {\r\n      this.vhComponent.alertConfirm(\r\n        this.lang.translate(\"Confirm\"),\r\n        \"\",\r\n        confirmZeroPriceComboMessage,\r\n        \"Ok\",\r\n        this.lang.translate(\"Cancel\")\r\n      ).then(() => {\r\n        linkProducts();\r\n      }).catch(() => {\r\n      });\r\n    } else {\r\n      linkProducts();\r\n    }\r\n  }\r\n  /**\r\n   * Hàm này sẽ thêm lần lượt các sản phẩm cần được liên kết, sau khi liên kết xong sẽ resolve về kết quả\r\n   * @param products\r\n   * @returns\r\n   */\r\n  affilateMultipleProduct(products) {\r\n    return new Promise((resolve, reject) => {\r\n      let action = async () => {\r\n        for (let index = 0; index < products.length; index++) {\r\n          try {\r\n\r\n\r\n\r\n\r\n            this.vhEcommerce.addMergeShopeesProduct_model(this.vhQuerySales.getlocalDetailProduct(this.id_product_selected), products[index].item_id, products[index].models, this.infoShop['_id'], this.id_branch)\r\n              .then((bool) => {\r\n\r\n                if (!bool) reject(false);\r\n                if (index == products.length - 1) resolve(true);\r\n              }, error => {\r\n\r\n              });\r\n          } catch (err) { reject(false); }\r\n          if (+index == products.length - 1) resolve(true);\r\n        }\r\n      };\r\n      action();\r\n    });\r\n  }\r\n  /**\r\n   * Tắt modal và clone mảng product ra một mảng mới để tránh nhớ lại product cũ bị checked\r\n   */\r\n  cancelAffiliate() {\r\n    this.listProductSelected = [];\r\n    this.visible_affiliate = false;\r\n    this.searchOnShopee = '';\r\n    this.listProduct = this.cloneDeepProducts(this.listSubProduct);\r\n  }\r\n  /**\r\n   * Hàm tìm kiếm sản phẩm trong modal của shopee, với value truyền vào là dữ liệu search\r\n   * @param value\r\n   */\r\n  searchShopee(value) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase());\r\n    this.listProduct = this.vhAlgorithm.searchList(val, [...this.listSubProduct], ['item_name', 'item_sku']);\r\n  }\r\n  /**\r\n   * Gỡ liên kết sp của app với sản phẩm trên sản, hàm cần 3 tham số\r\n   * @param id_product của sp trong app\r\n   * @param item_id định danh của sp cha\r\n   * @param model_id định danh của sản phẩm con\r\n   */\r\n  removeAffiliate(id_product, item_id, model_id?) {\r\n\r\n\r\n    this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Are you sure to remove this product\") + \"?\", \"Ok\", this.lang.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        this.vhEcommerce.deleteMergeShopeeProduct_model(this.vhQuerySales.getlocalDetailProduct(id_product), item_id, model_id || null, this.infoShop['_id'], this.id_branch).then((bool) => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            if (bool) {\r\n              setTimeout(() => {\r\n                this.changeShop(this.infoShop._id);\r\n                this.vhComponent.alertMessageDesktop('success', this.lang.translate(\"The product has been successfully unlinked\"));\r\n              }, 500);\r\n            } else this.vhComponent.alertMessageDesktop('error', this.lang.translate(\"The product link failed\"));\r\n          });\r\n        }).catch((err) => { console.error(err); this.vhComponent.hideLoading(0); });\r\n      });\r\n    }).catch(() => { });\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#affiliate-product\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".affiliate-product-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#affiliate-product\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".affiliate-product-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**\r\n   * Show/hide sản phẩm con liên kết với sp của app\r\n   * @param productApp\r\n   */\r\n  renderProductShopees(productApp) {\r\n    if (!productApp.expand && !productApp.loaded) {\r\n      let productShopee = this.vhEcommerce.getlocalProductListShopee(this.infoShop['_id']);\r\n      if (productApp[this.id_branch] && productApp[this.id_branch].shopees && productApp[this.id_branch].shopees.length) {\r\n        for (let indexProd in productApp[this.id_branch].shopees) {\r\n          let prodShopee = productShopee.find(item => item.item_id == productApp[this.id_branch].shopees[indexProd].item_id);\r\n          if (prodShopee && productApp[this.id_branch].shopees[indexProd].model.length) {\r\n            for (let index in productApp[this.id_branch].shopees[indexProd].model) {\r\n              let findModel = prodShopee.model.find(item => item.model_id == productApp[this.id_branch].shopees[indexProd].model[index]?.model_id);\r\n              if (findModel) productApp[this.id_branch].shopees[indexProd].model[index] = { ...findModel };\r\n            }\r\n            productApp[this.id_branch].product_shopees[indexProd] = { ...prodShopee, ...productApp[this.id_branch].shopees[indexProd] };\r\n          } else if (prodShopee && !productApp[this.id_branch].shopees[indexProd].model.length)\r\n            productApp[this.id_branch].product_shopees[indexProd] = { ...prodShopee, ...productApp[this.id_branch].shopees[indexProd] };\r\n        }\r\n        productApp.loaded = true;\r\n      }\r\n    }\r\n    productApp.expand = !productApp.expand;\r\n  }\r\n  /**Clone mảng subproduct trong những sp được show ra */\r\n  cloneDeepProducts(subProducts?) {\r\n    let products = [];\r\n    products = (subProducts || this.listProduct).map(item => {\r\n      item.expandLoading = false;\r\n      item.expandModal = false;\r\n      item.isChecked = false;\r\n      if (item.model && item.model.length) {\r\n        item.model = item.model.map(data => {\r\n          data.isChecked = false;\r\n          return data;\r\n        });\r\n      }\r\n      return item;\r\n    });\r\n    return [...products];\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"affiliate-product\">\r\n    <div nz-row nzGutter=\"8\" class=\"affiliate-product-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title\">\r\n            <b>{{'Link products in the store with products on Shopee' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\">\r\n            <!-- <nz-select nzPlaceHolder=\"{{'Select shop on Shopee' | translate}}\" nzShowSearch\r\n                [(ngModel)]=\"id_shop_selected\" (ngModelChange)=\"changeShop($event)\">\r\n                <nz-option *ngFor=\"let option of listShop\" nzLabel=\"{{option.data.name}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select> -->\r\n            {{'Shop name' | translate}} : <b class=\"color-green\">{{infoShop.data?.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\">\r\n            <nz-select [(ngModel)]=\"filterAffiliate\" (ngModelChange)=\"search(searchValue)\">\r\n                <nz-option nzLabel=\"{{'All products' | translate}}\" [nzValue]=1>\r\n                </nz-option>\r\n                <nz-option nzLabel=\"{{'Unlinked products' | translate}}\" [nzValue]=2>\r\n                </nz-option>\r\n                <nz-option nzLabel=\"{{'Linked products' | translate}}\" [nzValue]=3>\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"search($event)\" type=\"text\" nz-input placeholder=\"{{'Search for product Sales Viethas' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n    <div nz-row nzGutter=\"16\" class=\"affiliate-product-body\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #list_product_show nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"listProductApp\">\r\n                <thead>\r\n                    <tr>\r\n                        <th nzWidth=\"3%\"><b></b></th>\r\n                        <th nzWidth=\"10%\"><b>{{'Image' | translate}}</b></th>\r\n                        <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\"><b>{{'Status on Shopee' | translate}}</b></th>\r\n                        <th nzAlign=\"right\" nzWidth=\"15%\"><b>{{\"Selling price\"| translate}}</b></th>\r\n                        <th nzWidth=\"12%\"><b>{{\"Functions\" | translate}}</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of list_product_show.data;trackBy: trackByFn\">\r\n                        <tr>\r\n                            <td>\r\n                                <i class=\"icon-expand\" *ngIf=\"item[id_branch] && item[id_branch].product_shopees && item[id_branch].product_shopees.length\" (click)=\"renderProductShopees(item)\" nz-icon [nzType]=\"item.expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                              </i>\r\n                            </td>\r\n                            <td>\r\n                                <img [ngStyle]=\"{width: item.img ? '40px' : '30px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"item.img\" width=\"40px\" height=\"40px\" />\r\n                            </td>\r\n                            \r\n                            <td>\r\n                                <b>{{item.name}}</b><br>\r\n                                <span>{{'Item code' | translate}}: {{item.item_code}}</span>\r\n\r\n                            </td>\r\n                            <td>{{item.status}}</td>\r\n                            <td nzAlign=\"right\"><b>{{vhAlgorithm.vhcurrencyunit(item.price)}}</b></td>\r\n                            <td nzAlign=\"center\"><i (click)=\"openModelSelectProductsShopee(item)\" class=\"icon-link green\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngIf=\"item.expand && item.loaded\">\r\n                            <ng-container *ngFor=\"let product of item[id_branch].product_shopees\">\r\n                                <tr *ngIf=\"!product.has_model\">\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td style=\"padding-left: 24px;\">\r\n                                        <span *ngIf=\"product.item_name\">{{product.item_name}} <i\r\n                                (click)=\"$event.stopPropagation();vhComponent.copyValue(product.item_name)\" nz-icon\r\n                                nzType=\"copy\" nzTheme=\"outline\"></i></span>\r\n                                        <span class=\"color-red\" *ngIf=\"!product.item_name\">\r\n                                            {{'Error products, please delete the link' | translate}}</span>\r\n                                        <p>{{'SKU' | translate}}:\r\n                                            <span class=\"color-green\">{{product.item_sku}} <i\r\n                                (click)=\"$event.stopPropagation();vhComponent.copyValue(product.item_sku)\" nz-icon\r\n                                nzType=\"copy\" nzTheme=\"outline\"></i></span>\r\n                                        </p>\r\n                                    </td>\r\n                                    <td>{{product.item_status | translate}}</td>\r\n                                    <td nzAlign=\"right\">\r\n                                        <span *ngIf=\"product.item_name\">{{vhAlgorithm.vhcurrencyunit(product.price_info[0]?.current_price)}}</span>\r\n                                    </td>\r\n                                    <td nzAlign=\"center\"><i (click)=\"removeAffiliate(item.id_subproduct ? item.id_subproduct : item._id,product.item_id,null)\" class=\"icon-link red\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i></td>\r\n                                </tr>\r\n                                <ng-container *ngIf=\"product.has_model\">\r\n                                    <tr *ngFor=\"let model of product.model\">\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td style=\"padding-left: 24px;\">\r\n                                            <span *ngIf=\"product.item_name\">{{product.item_name}}</span>\r\n                                            <span class=\"color-red\" *ngIf=\"!product.item_name\">\r\n                                                {{'Error products, please delete the link' | translate}}</span>\r\n                                            <p>{{'SKU' | translate}}:\r\n                                                <span class=\"color-green\">{{model.model_sku}}</span>\r\n                                            </p>\r\n                                        </td>\r\n                                        <td>{{product.item_status | translate}}</td>\r\n                                        <td nzAlign=\"right\">\r\n                                            <span *ngIf=\"product.item_name\">\r\n                                                {{vhAlgorithm.vhcurrencyunit(model.price_info ? model.price_info[0].current_price : 0)}}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td nzAlign=\"center\"><i (click)=\"removeAffiliate(item.id_subproduct ? item.id_subproduct : item._id,product.item_id,model.model_id)\" class=\"icon-link red\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i></td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n    </div>\r\n\r\n</nz-layout>\r\n\r\n\r\n<!-- --------------modal chọn sản phẩm liên kết--------------- -->\r\n<nz-modal class=\"model-link-product-ecommerce\" [nzMaskClosable]=\"false\" [nzFooter]=\"modalFooter\" [nzWidth]=\"650\" [nzBodyStyle]=\"setHeight\" [(nzVisible)]=\"visible_affiliate\" nzTitle=\"{{'Select Shopee linked products' | translate}}\" (nzOnCancel)=\"cancelAffiliate()\"\r\n    (nzOnOk)=\"acceptAfiliate()\" [nzOkLoading]=\"isLoading\">\r\n    <div *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"title center-all-content\">\r\n                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                    <input [(ngModel)]=\"searchOnShopee\" (ngModelChange)=\"searchShopee($event)\" type=\"text\" nz-input placeholder=\"{{'Search for product name' | translate}}\" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconSearch>\r\n                    <i nz-icon nzType=\"search\"></i>\r\n                </ng-template>\r\n            </div>\r\n            <nz-table class=\"product-table-modal-ecommerce\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" nzShowPagination nzShowSizeChanger [nzScroll]=\"{ y: '400px' }\" #list_product_shopee nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"listProduct\">\r\n                <thead>\r\n                    <tr>\r\n                        <th nzWidth=\"10%\"></th>\r\n                        <th nzWidth=\"15%\"></th>\r\n                        <th nzWidth=\"45%\"></th>\r\n                        <th nzWidth=\"30%\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody class=\"product\">\r\n                    <ng-container *ngFor=\"let item of list_product_shopee.data;trackBy: trackByFn\">\r\n                        <tr class=\"product-item\">\r\n                            <td>\r\n                                <label *ngIf=\"!item.has_model\" class=\"product-item-checkbox\" [(ngModel)]=\"item.isChecked\" (ngModelChange)=\"addProductAffilate($event,item)\" nz-checkbox></label>\r\n                                <i *ngIf=\"item.has_model\" class=\"icon-expand\" (click)=\"item.expandModal = !item.expandModal\" nz-icon [nzType]=\"item.expandModal ? 'up' : 'down'\" nzTheme=\"outline\"></i>\r\n                            </td>\r\n                            <td class=\"product-item-name\">\r\n                                <img [ngStyle]=\"{width: item.image?.image_url_list ? '40px' : '30px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"item.image?.image_url_list[0]\" width=\"40px\" height=\"40px\" />\r\n                            </td>\r\n                            <td class=\"product-item-name\">\r\n                                <span>{{item.item_name}}</span>\r\n                                <span>{{\"SKU\"}} :{{item.item_sku}}</span>\r\n                            </td>\r\n                            <td class=\"product-item-price\">\r\n                                <span *ngIf=\"!item.has_model\">\r\n                                    <del *ngIf=\"item.price_info[0]?.original_price !=item.price_info[0]?.current_price\">\r\n                                        {{vhAlgorithm.vhcurrencyunit(item.price_info[0]?.original_price)}}\r\n                                    </del>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price_info[0]?.current_price)}}\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngIf=\"item.expandModal\">\r\n                            <tr *ngFor=\"let data of item.model\" class=\"product-item-sub\">\r\n                                <td>\r\n\r\n                                </td>\r\n                                <td>\r\n                                    <div class=\"product-item-sub-checkbox\">\r\n                                        <label [(ngModel)]=\"data.isChecked\" (ngModelChange)=\"addProductAffilate($event,item,data)\" nz-checkbox></label>\r\n                                    </div>\r\n                                </td>\r\n\r\n                                <td>\r\n                                    <div class=\"product-item-sub-name\">\r\n                                        <span>{{item.item_name}}</span>\r\n                                        <span>{{'SKU classification' | translate}} : {{data.model_sku}}</span>\r\n                                    </div>\r\n                                </td>\r\n                                <td>\r\n                                    <div class=\"product-item-sub-price\">\r\n                                        <span>\r\n                                            <del\r\n                                                *ngIf=\"data.price_info[0]?.original_price !=data.price_info[0]?.current_price\">\r\n                                                {{vhAlgorithm.vhcurrencyunit(data.price_info[0]?.original_price)}}\r\n                                            </del>\r\n                                            {{vhAlgorithm.vhcurrencyunit(data.price_info[0]?.current_price)}}\r\n                                        </span>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n        <ng-template #no_data>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"24\" class=\"no-data\">{{'No data'|translate}}\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n    <ng-template #modalFooter>\r\n        <div class=\"footerModal\">\r\n            <div class=\"footerModal-button center-all-content\">\r\n                <button (click)=\"cancelAffiliate()\" class=\"btn-white\" nz-button>{{\"Cancel\" | translate}}</button>\r\n                <button [nzLoading]=\"loading\" [disabled]=\"!listProductSelected.length\" (click)=\"acceptAfiliate()\" nz-button class=\"btn-green\">{{\"Confirm\" | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AffiliateProductComponent } from './affiliate-product.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AffiliateProductComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [AffiliateProductComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class AffiliateProductModule { }\r\n"],"names":["VhType","i0","$event","ctx_r21","ctx_r26","item_r7","item_r55","ctx_r4","AffiliateProductComponent","constructor","router","lang","vhComponent","vhAlgorithm","vhQuerySales","cdRef","vhEcommerce","getDefaultBranch","_id","ngOnInit","getData","infoShop","getlocalShopListShopee","changeShop","id","localProducts","getlocalDetailProducts","filter","e","delete_hidden","listProductApp","map","item","unit","getUnit_byRatio","units","id_branch","shopees","length","product_shopees","prod","id_shop","listSubProductApp","listProduct","clearProductShow","getlocalProductListShopee","item_status","listSubProduct","cloneDeepProducts","search","searchValue","trackByFn","index","prodApp","arrayProdShopee","indexProd","findIndex","item_id","model","data","model_id","splice","goBack","navigate","value","val","changeAlias","trim","toLowerCase","searchList","filterAffilateProduct","filterAffiliate","_a","_b","_c","some","openModelSelectProductsShopee","product","id_product_selected","id_subproduct","visible_affiliate","addProductAffilate","bool","indexItem","listProductSelected","has_model","models","push","acceptAfiliate","getlocalDetailProduct","isZeroPriceCombo","type","COMBO","price","confirmZeroPriceComboMessage","translate","platform","linkProducts","showLoading","then","affilateMultipleProduct","hideLoading","setTimeout","alertMessageDesktop","catch","err","console","error","alertConfirm","products","Promise","resolve","reject","action","addMergeShopeesProduct_model","cancelAffiliate","searchOnShopee","searchShopee","removeAffiliate","id_product","deleteMergeShopeeProduct_model","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","renderProductShopees","productApp","expand","loaded","productShopee","prodShopee","find","findModel","Object","subProducts","expandLoading","expandModal","isChecked","selectors","decls","vars","consts","template","ctx","_r5"],"sourceRoot":"webpack:///"}