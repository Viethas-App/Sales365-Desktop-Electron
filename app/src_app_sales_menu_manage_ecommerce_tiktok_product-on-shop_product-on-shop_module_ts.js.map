{"version":3,"file":"src_app_sales_menu_manage_ecommerce_tiktok_product-on-shop_product-on-shop_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/ecommerce/tiktok/product-on-shop/product-on-shop.component.ts","./src/app/sales/menu/manage/ecommerce/tiktok/product-on-shop/product-on-shop.component.html","./src/app/sales/menu/manage/ecommerce/tiktok/product-on-shop/product-on-shop.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhEcommerce, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-product-on-shop',\r\n  templateUrl: './product-on-shop.component.html',\r\n  styleUrls: ['./product-on-shop.component.scss']\r\n})\r\nexport class ProductOnShopComponent implements OnInit {\r\n  listProduct: Array<any> = []; //danh sách product theo từng id_shop\r\n  listSubProduct: Array<any> = []; //danh sách product theo từng id_shop\r\n  /**----------------------------------- */\r\n  infoShop: any = {};\r\n  searchValue: any = '';\r\n  heightScroll: any;\r\n  setHeight = { \"max-height\": \"500px\", \"height\": \"500px\" };\r\n  sortQuantity: 'asc' | 'desc' = 'asc';\r\n  sortName: 'asc' | 'desc' = 'asc';\r\n  listTabs: Array<any> = [\"Status\", \"Temporarily hidden\"];\r\n  indexSegment: number = 0;\r\n  id_branch: string = this.vhQuerySales.getDefaultBranch()._id;\r\n  arrayHidden: Array<any> = []; //mảng này chứa id của những sp đang tạm ẩn\r\n  constructor(\r\n    private router: Router,\r\n    public lang: LanguageService,\r\n    public vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modal: NzModalService,\r\n    private vhEcommerce: VhEcommerce\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n  getData() {\r\n    this.infoShop = this.vhEcommerce.getlocalShopListTiktok()[0];\r\n    this.changeShop(this.infoShop._id);\r\n  }\r\n  /**Chọn shop và lọc sản phẩm theo shop đó */\r\n  changeShop(id) {\r\n    this.listProductOfBranch = this.vhQuerySales.getlocalDetailProducts(35).filter(e => !e.delete_hidden).filter(item => item[this.id_branch] && item[this.id_branch].tiktoks && item[this.id_branch].tiktoks.length >= 0);\r\n    let localProducts: Array<any> = this.vhQuerySales.getlocalDetailProducts(35).filter(e => !e.delete_hidden);\r\n    this.listProductApp = localProducts.map(item => {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, 1);\r\n      if (item[this.id_branch] && item[this.id_branch].tiktoks && item[this.id_branch].tiktoks.length) { //filter những sp tiktok thuộc id tiktok đã chọn\r\n        item[this.id_branch].product_tiktoks = [...item[this.id_branch].tiktoks.filter(prod => prod.id_shop == id)];\r\n      }\r\n      return { ...item, ...unit };\r\n    });\r\n    this.listSubProductApp = this.listProductApp;\r\n\r\n    this.listProduct = [];\r\n    this.vhEcommerce.getlocalProductListTiktok(this.infoShop._id).forEach(item => {\r\n      item.total_stock = 0;\r\n\r\n      // if (!item.has_model) {\r\n      //   item.stock_info.forEach(data => {\r\n      //     item.total_stock += data.normal_stock\r\n      //   })\r\n      // } else item.model.forEach(model => { model.stock_info.forEach(data => item.total_stock += data.normal_stock) })\r\n      item.hidden = item.status == 'ACTIVATE' ? false : true;\r\n      this.listProduct.push(item);\r\n    });\r\n\r\n    this.listSubProduct = [...this.listProduct];\r\n    this.segmentChanged(this.indexSegment);\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/ecommerce/tiktok']);\r\n  }\r\n  searchTiktok(value, products?) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase());\r\n    this.listProduct = this.vhAlgorithm.searchList(val, products ? [...products] : [...this.listSubProduct], ['title']);\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-on-shop\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-on-shop-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-on-shop\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-on-shop-header\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 100 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  sortStatusTable() {\r\n    this.searchTiktok(this.searchValue);\r\n    if (this.sortQuantity == 'asc') {\r\n      this.listProduct = this.vhAlgorithm.sortNumberbyASC([...this.listProduct], 'total_stock');\r\n      this.sortQuantity = 'desc';\r\n    } else {\r\n      this.listProduct = this.vhAlgorithm.sortNumberbyDESC([...this.listProduct], 'total_stock');\r\n      this.sortQuantity = 'asc';\r\n    }\r\n  }\r\n  /**\r\n   * sắp xếp theo tên\r\n   */\r\n  sortNameTable() {\r\n    this.searchTiktok(this.searchValue);\r\n    if (this.sortName == \"asc\") {\r\n      this.listProduct = [...this.listProduct].sort((a, b): any => {\r\n        return a.item_name > b.item_name ? 1 : -1;\r\n      });\r\n      this.sortName = \"desc\";\r\n    } else {\r\n      this.listProduct = [...this.listProduct].sort((a, b): any => {\r\n        return a.item_name > b.item_name ? -1 : 1;\r\n      });\r\n      this.sortName = \"asc\";\r\n    }\r\n  }\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n  segmentChanged(event) {\r\n    this.indexSegment = event;\r\n    if (event == 0)\r\n      this.listProduct = this.listSubProduct.filter(item => !item.hidden);\r\n    else this.listProduct = this.listSubProduct.filter(item => item.hidden);\r\n\r\n    this.searchTiktok(this.searchValue, this.listProduct);\r\n  }\r\n  /**\r\n   * modal hide product\r\n   */\r\n  hiddenProduct(product, hidden) {\r\n    this.modal.confirm({\r\n      nzTitle: this.lang.translate(\"Confirm\"),\r\n      nzContent: `<p>${hidden ? this.lang.translate('Tạm ẩn sản phẩm này') : this.lang.translate('Hủy tạm ẩn sản phẩm này')}?${!hidden ? '</p><p>Sản phẩm được chỉnh sửa sẽ cần chờ Tiktok xét duyệt trong vòng 24 tiếng trước khi hiển thị trên trang chủ Shop</p>' : ''}`,\r\n      nzClosable: false,\r\n      nzOnOk: () => new Promise((resolve) => {\r\n        // this.vhEcommerce.updateProductInfoByJSONshopee(this.renderFormUpdate(product, hidden), this.infoShop['access_token'], this.infoShop['_id']).then((bool: boolean) => {\r\n        //   this.vhEcommerce.getProductByItem_idTiktok(this.infoShop['access_token'], product.item_id, this.infoShop['_id']).then((productshopee: any) => {\r\n        //     if (bool && productshopee)\r\n        //       this.vhComponent.alertMessageDesktop('success', hidden ? this.lang.translate('Sản phẩm được tạm ẩn thành công') : this.lang.translate('Hủy tạm ẩn thành công'))\r\n        //     else {\r\n        //       product.hidden = !product.hidden\r\n        //       this.vhComponent.alertMessageDesktop('error', this.lang.translate('An error occurred while updating'))\r\n        //     }\r\n        //     this.changeShop(this.infoShop._id)\r\n        //     resolve(true)\r\n        //   })\r\n        // })\r\n      }),\r\n      nzOnCancel: () => {\r\n        product.hidden = !product.hidden;\r\n        this.modal.closeAll();\r\n      }\r\n    });\r\n  }\r\n  /**Render chuỗi json để bật tắt sản phẩm */\r\n  renderFormUpdate(product: any, hidden: boolean) {\r\n    let json = {\r\n      \"item_id\": product.item_id,\r\n      \"item_status\": hidden ? 'UNLIST' : 'NORMAL'\r\n    };\r\n\r\n    return json;\r\n  }\r\n\r\n\r\n  /** Liên kết sản phẩm */\r\n\r\n  visible_affiliate: boolean = false;\r\n  listProductApp: Array<any> = []; // sp trong phần mềm chứa tiktok[]\r\n  listSubProductApp: Array<any> = []; //sp của app để search\r\n  productTiktokSelected: any = null;\r\n  listProductOfBranch: Array<any> = []; // sp của phần mềm có liên kết với sp tiktok\r\n  searchProductAppValue: any = '';\r\n\r\n  /**\r\n   * search tên sản phẩm trong app viethas\r\n   * @example this.search('Sản phẩm A')\r\n   */\r\n  searchProductApp(value: string) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase());\r\n    this.listProductApp = this.vhAlgorithm.searchList(val, [...this.listSubProductApp], ['name', 'barcode', 'item_code']);\r\n  }\r\n\r\n  findProductLinked(item_id, sku_id) {\r\n    for (let productOfBranch of this.listProductOfBranch) {\r\n      const tiktoks = productOfBranch[this.id_branch]?.tiktoks || [];\r\n\r\n      const found = tiktoks.find(data => {\r\n        if (data.id !== item_id) return false;\r\n\r\n        if (data.skus?.length) {\r\n          return data.skus.some(skus => skus.id === sku_id);\r\n        }\r\n\r\n        return data.skus?.length ? false : true;\r\n      });\r\n\r\n      if (found) {\r\n        return productOfBranch;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Kiểm tra sản phẩm đã được lien kết hay chưa\r\n   *\r\n   */\r\n  isLinkedToProduct(item_id, sku_id): boolean {\r\n    if (!item_id || !sku_id) return false;\r\n\r\n    for (let productOfBranch of this.listProductOfBranch) {\r\n      let findProduct = productOfBranch[this.id_branch].tiktoks.find(data => data.id === item_id);\r\n      if (findProduct) {\r\n        if (findProduct.skus && findProduct.skus.length) {\r\n          let indexSku = findProduct.skus.findIndex(sku => sku.id === sku_id);\r\n          if (indexSku >= 0) {\r\n            return true;\r\n          }\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    };\r\n    return false;\r\n  }\r\n\r\n\r\n  openModelSelectProductsTiktok(productTiktok) {\r\n    this.productTiktokSelected = productTiktok;\r\n    this.visible_affiliate = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * Tắt modal và clone mảng product ra một mảng mới để tránh nhớ lại product cũ bị checked\r\n   */\r\n  cancelAffiliate() {\r\n    this.visible_affiliate = false;\r\n  }\r\n\r\n\r\n  /**\r\n    * Liên kết sản phẩm từ lazada với sản phẩm tại cửa hàng.\r\n    * @param product Sản phẩm của cửa hàng\r\n    */\r\n  acceptAfiliate(product) {\r\n    const isZeroPriceCombo = product.type === VhType.COMBO && product.units[0].price === 0;\r\n    const confirmZeroPriceComboMessage = this.lang.translate(\"This product is a combo with a price of 0. Do you still want to link it with the product\", { platform: 'Tiktok' }) + \"?\";\r\n\r\n    this.modal.confirm({\r\n      nzTitle: '<i>' + (isZeroPriceCombo ? confirmZeroPriceComboMessage : this.lang.translate(\"Confirm\")) + '</i>',\r\n      nzIconType: \"info-circle\",\r\n      nzCancelText: this.lang.translate(\"Cancel\"),\r\n      nzOnOk: () => {\r\n        this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n          // Tìm sản phẩm tiktok\r\n          const currentProductTiktok = this.listProduct.find(product =>\r\n            product.skus?.some(sku => sku.id === this.productTiktokSelected.id)\r\n          );\r\n          const id_product_selected = product.id_subproduct ? product.id_subproduct : product['_id'];\r\n\r\n          if (!currentProductTiktok) {\r\n            this.vhComponent.hideLoading().then(() => {\r\n              this.vhComponent.alertMessageDesktop('error', this.lang.translate(\"The product link failed\"));\r\n            });\r\n            return;\r\n          }\r\n\r\n          let productTiktok = {\r\n            id: currentProductTiktok.id,\r\n            id_shop: this.infoShop._id,\r\n            SkuIds: [],\r\n          };\r\n\r\n          // Nếu sản phẩm tiktok có model thì thêm vào mảng\r\n          if (currentProductTiktok && currentProductTiktok.skus.length > 0) {\r\n            const sku = currentProductTiktok.skus.find(item => item.id == this.productTiktokSelected.id);\r\n            productTiktok.SkuIds.push({ id: sku.id });\r\n          }\r\n\r\n          this.vhEcommerce.addMergeTiktokProduct_skus(this.vhQuerySales.getlocalDetailProduct(id_product_selected), productTiktok.id, productTiktok.SkuIds, this.infoShop['_id'], this.id_branch).then((bool) => {\r\n            this.vhComponent.hideLoading().then(() => {\r\n              setTimeout(() => {\r\n                this.visible_affiliate = false;\r\n                this.listProductOfBranch = this.vhQuerySales.getlocalDetailProducts(35).filter(e => !e.delete_hidden).filter(item => item[this.id_branch] && item[this.id_branch].tiktoks && item[this.id_branch].tiktoks.length >= 0);\r\n                this.vhComponent.alertMessageDesktop('success', this.lang.translate(\"Product linked successfully\"));\r\n              }, 300);\r\n            });\r\n          }).catch(err => {\r\n            console.error(err);\r\n            this.visible_affiliate = false;\r\n            this.vhComponent.alertMessageDesktop('error', this.lang.translate(\"The product link failed\"));\r\n            this.vhComponent.hideLoading(0);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Gỡ sản phẩm liên kết trên sàn mới sản phẩm trong app sales\r\n   * @param id_product\r\n   * @param item_id\r\n   * @param SkuId\r\n   */\r\n  removeAffiliate(item_id, SkuId) {\r\n    const productLinked = this.findProductLinked(item_id, SkuId);\r\n\r\n    if (!productLinked) {\r\n      this.vhComponent.alertMessageDesktop('error', this.lang.translate(\"The product link failed\"));\r\n      return;\r\n    }\r\n\r\n    this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Are you sure to remove this product\") + \"?\", \"Ok\", this.lang.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        this.vhEcommerce.deleteMergeTiktokProduct_skus(productLinked, item_id, SkuId, this.infoShop['_id'], this.id_branch).then((bool) => {\r\n          if (bool) {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              setTimeout(() => {\r\n                this.changeShop(this.infoShop._id);\r\n                this.vhComponent.showToast(1500, this.lang.translate(\"The product has been successfully unlinked\"), 'success-toast');\r\n              }, 500);\r\n            });\r\n          } else { this.vhComponent.showToast(1500, this.lang.translate(\"The product link failed\"), 'alert-toast'); this.vhComponent.hideLoading(0); }\r\n        }).catch((err) => { console.error(err); this.vhComponent.hideLoading(0); });\r\n      });\r\n    }).catch(() => { });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-on-shop\">\r\n    <div nz-row nzGutter=\"8\" class=\"product-on-shop-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title\">\r\n            <b>{{'Product on Tiktok'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\">\r\n            {{'Shop name' | translate}} : <b class=\"color-green\">{{infoShop.data?.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchTiktok($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for product name' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n    <div nz-row nzGutter=\"16\" class=\"product-on-shop-body\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-tabset [(nzSelectedIndex)]=\"indexSegment\" (nzSelectChange)=\"segmentChanged($event.index)\">\r\n                <nz-tab *ngFor=\"let item of listTabs\" nzTitle=\"{{item | translate}}\">\r\n                </nz-tab>\r\n            </nz-tabset>\r\n            <nz-table *ngIf=\"indexSegment == 0 || indexSegment == 1\" [nzPageSize]=\"20\"\r\n                [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #list_product_show\r\n                nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"listProduct\">\r\n                <thead>\r\n                    <tr>\r\n                        <th nzWidth=\"3%\"></th>\r\n                        <th nzWidth=\"10%\"><b>{{'Image' | translate}}</b></th>\r\n                        <th nzAlign=\"left\" nzWidth=\"27%\">\r\n                            <div class=\"sortTable\">\r\n                                <b>{{'Product information' | translate}}</b>\r\n                                <i (click)=\"sortNameTable()\" nz-icon\r\n                                    [nzType]=\"sortName =='asc' ? 'arrow-down':'arrow-up'\" nzTheme=\"outline\"></i>\r\n                            </div>\r\n                        </th>\r\n                        <th nzAlign=\"right\" nzWidth=\"15%\"><b>{{'Selling price' | translate}}</b></th>\r\n                        <th nzWidth=\"15%\"><b>{{\"Status\" | translate}}</b></th>\r\n                        <th nzAlign=\"right\" nzWidth=\"20%\">\r\n                            <div class=\"sortTable\">\r\n                                <b>{{\"Quantity\" | translate}}\r\n                                    <i (click)=\"sortStatusTable()\" nz-icon\r\n                                        [nzType]=\"sortQuantity =='asc' ? 'arrow-down':'arrow-up'\" nzTheme=\"outline\"></i>\r\n                                </b>\r\n                            </div>\r\n                        </th>\r\n                        <th nzWidth=\"10%\"><b>{{\"Temporarily hidden\" | translate}}</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <ng-container *ngFor=\"let item of list_product_show.data;trackBy : trackByFn\">\r\n                        <tr>\r\n                            <td><i *ngIf=\"item.skus\" class=\"icon-expand\"\r\n                                    (click)=\"item.expandModal = !item.expandModal\" nz-icon\r\n                                    [nzType]=\"item.expand ? 'up' : 'down'\" nzTheme=\"outline\"></i></td>\r\n                            <td>\r\n                                <img nz-tooltip nzTooltipColor=\"white\" [nzTooltipTitle]=\"zoomImage\"\r\n                                    nzPopoverTrigger=\"hover\"\r\n                                    [ngStyle]=\"{width: item.image?.image_url_list ? '40px' : '30px'}\"\r\n                                    onerror=\"this.src='./assets/icon/management/image_default.svg'\"\r\n                                    [src]=\"item.image?.image_url_list[0]\" width=\"40px\" height=\"40px\" />\r\n                                <ng-template #zoomImage>\r\n                                    <div>\r\n                                        <img onerror=\"this.src='./assets/icon/management/image_default.svg'\"\r\n                                            [src]=\"item.image?.image_url_list[0]\" width=\"150px\" height=\"150px\" />\r\n                                    </div>\r\n                                </ng-template>\r\n                            </td>\r\n                            <td class=\"product-info\">\r\n                                <span><b>{{item.title}}</b>  <i\r\n                                (click)=\"$event.stopPropagation();vhComponent.copyValue(item.title)\" nz-icon\r\n                                nzType=\"copy\" nzTheme=\"outline\"></i></span>\r\n                                <span>{{\"SKU\"}}: <b class=\"color-green\">{{item.id}}</b>  <i\r\n                                (click)=\"$event.stopPropagation();vhComponent.copyValue(item.id)\" nz-icon\r\n                                nzType=\"copy\" nzTheme=\"outline\"></i></span>\r\n                            </td>\r\n                            <td nzAlign=\"right\" class=\"product-price\">\r\n                                <div *ngIf=\"!item.skus\">\r\n                                    <del *ngIf=\"item.price_info[0]?.original_price !=item.price_info[0]?.current_price\">\r\n                                        {{vhAlgorithm.vhcurrencyunit(item.price_info[0]?.original_price)}}\r\n                                    </del>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price_info[0]?.current_price)}}\r\n                                </div>\r\n                            </td>\r\n                            <td class=\"product-status\">\r\n                                <span\r\n                                    [ngClass]=\"{'product-status-success' : item.status == 'ACTIVATE'}\">{{item.status  | translate}}</span>\r\n                            </td>\r\n                            <td nzAlign=\"left\" class=\"product-stock\">\r\n                                <!-- <div>{{'Kho nhà bán'}} : {{item.stock_info_v2?.summary_info.total_available_stock}} </div>\r\n                                <div>{{'Kho shopee'}} : {{item.stock_info_v2?.summary_info.total_reserved_stock}} </div> -->\r\n                                <!-- <div *ngIf=\"item.skus\" class=\"product-stock-has-model\">\r\n                                    {{\"Total stock\" | translate}}: <b>{{item.total_stock}}</b>\r\n                                </div>\r\n                                <div *ngIf=\"!item.skus\" class=\"product-stock-no-model\">\r\n                                    <div *ngFor=\"let stock of item.stock_info\" class=\"product-stock-no-model-item\">\r\n                                        <span>{{(stock.stock_type == 2 ? 'Kho nhà bán' : 'Kho Tiktok') |\r\n                                            translate}}: <b>{{stock.normal_stock}}</b></span>\r\n                                        <span>{{\"Total stock\" | translate}}:<b> {{item.total_stock}}</b></span>\r\n                                    </div>\r\n                                </div> -->\r\n                            </td>\r\n                            <td>\r\n                                <nz-switch [(ngModel)]=\"item.hidden\" (ngModelChange)=\"hiddenProduct(item,$event)\">\r\n                                </nz-switch>\r\n                            </td>\r\n                        </tr>\r\n                        <ng-container *ngIf=\"item.expandModal\">\r\n                            <tr *ngFor=\"let product of item.skus\">\r\n                                <td></td>\r\n                                <td></td>\r\n                                <td class=\"product-info\">\r\n                                    <span>\r\n                                        <b>{{item.title}} </b>\r\n                                        <i *ngIf=\"!isLinkedToProduct(item.id, product.id) && !item.hidden\" (click)=\"$event.stopPropagation();openModelSelectProductsTiktok(product)\" class=\"icon-link green\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i>\r\n                                        <i *ngIf=\"isLinkedToProduct(item.id, product.id) && !item.hidden\" (click)=\"$event.stopPropagation();removeAffiliate(item.id, product.id)\" class=\"icon-link red\" nz-icon nzType=\"link\" nzTheme=\"outline\"></i>\r\n                                    </span>\r\n                                    <span *ngIf=\"isLinkedToProduct(item.id, product.id) && !item.hidden\">{{'Sản phẩm liên kết' | translate}}: <b\r\n                                            class=\"color-green\">{{findProductLinked(item.id, product.id).name}}</b></span>\r\n                                    <span>{{\"SKU phân loại\"}}: <b class=\"color-green\">{{product.id}}</b></span>\r\n                                </td>\r\n                                <td nzAlign=\"right\">\r\n                                    <del\r\n                                        *ngIf=\"product.price.tax_exclusive_price !=product.price.tax_exclusive_price\">\r\n                                        {{vhAlgorithm.vhcurrencyunit(product.price.tax_exclusive_price)}}\r\n                                    </del>\r\n                                    {{vhAlgorithm.vhcurrencyunit(product.price.tax_exclusive_price)}}\r\n                                </td>\r\n                                <td></td>\r\n                                <td nzAlign=\"left\">\r\n                                    <div *ngFor=\"let stock of product.inventory\" class=\"product-stock-no-model-item\">\r\n                                        <span>{{( 'Kho Tiktok') |  translate}}: <b>{{stock.quantity}}</b></span>\r\n                                    </div>\r\n                                </td>\r\n                                <td nzAlign=\"center\">\r\n                                </td>\r\n                            </tr>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<app-modal-link-product-ecommerce\r\n    [title]=\"'Select Tiktok linked products' | translate\"\r\n    [visible_affiliate]=\"visible_affiliate\"\r\n    [listProductApp]=\"listProductApp\"\r\n    [searchProductAppValue]=\"searchProductAppValue\"\r\n    (cancelAffiliate)=\"cancelAffiliate()\"\r\n    (searchProductApp)=\"searchProductApp($event)\"\r\n    (acceptAfiliate)=\"acceptAfiliate($event)\"\r\n></app-modal-link-product-ecommerce>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ProductOnShopComponent } from './product-on-shop.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { ModalLinkProductEcommerceModule } from 'src/app/sales/menu/manage/ecommerce/components/modal-link-product-ecommerce/modal-link-product-ecommerce.module';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductOnShopComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ProductOnShopComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ScrollingModule,\r\n    ModalLinkProductEcommerceModule\r\n  ]\r\n})\r\nexport class ProductOnShopModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}