{"version":3,"file":"src_app_sales_menu_manage_invoices_opening-stock_opening-stock_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGgH;AACA;AACiB;AACA;AACA;AAI7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICYpD,2EAAoD;IAChD,qEAAG;IAAA,wDAAyC;;IAAA,6DAAI;IACpD,6DAAM;;IADC,2DAAyC;IAAzC,6JAAyC;;;;IAahC,yEAAyC;IACrC,2EACuC;IAAnC,+aAAkC;IAClC,wDACA;IAAA,yEAAoK;IAApD,oYAAS,wBAAwB,yCAAkB;;IAAC,6DAAI;IAC5K;IAAA,6DAAM;IAEV,sEAAe;;;;IAJP,2DACA;IADA,wNACA;IAA0D,2DAAqD;IAArD,8KAAqD;;;IAUvH,4EACoC;;;IADiB,gFAAkB;;;;IAvBvF,2EAA+E;IAC3E,2EAAY;IACR,2EAAwE;IAAnE,kaAA6B;IAC9B,oEAC+D;IACnE,6DAAM;IACN,2EAA0C;IACtC,yEAA8B;IAC1B,qEAAG;IAAA,wDAAa;IAAA,6DAAI;IAAC,iEAAI;IACzB,mIAOe;IACnB,6DAAI;IACR,6DAAM;IACN,4EAAmD;IAC/C,kFAC8C;IADd,iUAAwB;IAGpD,+HACoC;IACxC,6DAAY;IAChB,6DAAM;IACN,4EAA+C;IAG3C,kFACqG;IAAjG,gUAA2B;IAD/B,6DACqG;IACzG,6DAAM;IACN,4EACe;IADV,iYAAiC;IAElC,0EAA8B;IAAA,yEAAM;IAAA,yDAA0C;IAAA,6DAAO;IACjF,4EAAgC;IAC5B,yDAEJ;IAAA,6DAAM;IACV,6DAAI;IACR,6DAAM;IACN,4EAAyC;IACrC,0EAA8B;IAC1B,sEAAG;IAAA,yDAAwD;IAAA,6DAAI;IACnE,6DAAI;IACR,6DAAM;IACV,6DAAM;IACV,6DAAM;;;;IAxCa,2DAAa;IAAb,+EAAa;IACD,2DAAwB;IAAxB,yFAAwB;IAWX,2DAAwB;IAAxB,oFAAwB;IAG3B,2DAAc;IAAd,oFAAc;IAOZ,2DAAW;IAAX,qEAAW;IAKN,2DAA0C;IAA1C,mHAA0C;IAEtE,2DAEJ;IAFI,mLAEJ;IAKG,2DAAwD;IAAxD,uIAAwD;;;IAwC/D,4EAEY;;;;IAF4B,6FAAsB;IAC1D,oIAAmD;;;;IAH3D,iFACiB;IADiB,iWAAoB;IAElD,yIAEY;IAChB,6DAAY;;;IALsB,oFAAoB;IAEtB,2DAAU;IAAV,qFAAU;;;IAI1C,4EAAgD;IAAA,iEAAK;IAAA,6DAAO;;;IATpE,2EAAoF;IAChF,uEAAK;IAAA,wDAAqB;;IAAA,6DAAM;IAChC,uEAAK;IACD,6HAKY;IACZ,mHAA4D;IAChE,6DAAM;IACN,uEAAK;IACD,wDAAwC;IAAA,6DAAM;IACtD,6DAAM;;;IAZG,2DAAqB;IAArB,yIAAqB;IAEV,2DAAoB;IAApB,wFAAoB;IAMP,2DAAqB;IAArB,yFAAqB;IAG9C,2DAAwC;IAAxC,8HAAwC;;;;;IAOhD,2EAAsF;IAClF,gFAE8C;IAFZ,yVAA0B;;IAEd,6DAAW;IAC7D,6DAAM;;;IAFE,2DAA6C;IAA7C,sKAA6C;IADf,yFAA0B;;;IAyB5E,yEAA8B;IAC1B,2EAAY;IACR,2EAA0C;IAAA,wDAA4B;;IAAA,6DAAM;IAC5E,2EAAwB;IACpB,wEACuD;;IAC3D,6DAAM;IACV,6DAAM;IACV,sEAAe;;;IANmC,2DAA4B;IAA5B,gJAA4B;IAG9D,2DAAgD;IAAhD,yKAAgD;IADC,4FAA0B;;;;IAMvF,8EAEqC;IAAjC,sVAAgC;IAAC,wDACrB;;IAAA,6DAAS;IACzB,8EAE6D;IAA3B,gVAA0B;IAAC,wDAAsB;;IAAA,6DAAS;;IAJvD,2DACrB;IADqB,4IACrB;IAG6C,2DAAsB;IAAtB,0IAAsB;;;;IAlB3F,gFACkH;IADnC,4WAAsC;;IAEjH,wIAQe;IACf,mNAQc;IAClB,6DAAW;;;;IAnBP,oKAA2C;IADrC,2EAAqC;;;IA+B/B,oEAA+B;;;IAInC,2EAAiD;IAC7C,2EAAwB;IACpB,6EAA+F;IAC3F,2EAAY;IACR,2EAAuB;IACnB,wDACJ;IAAA,6DAAM;IAEN,2EAAuB;IACnB,wDACJ;;IAAA,6DAAM;IACN,2EAAuB;IACnB,yDACJ;;IAAA,6DAAM;IACV,6DAAM;IAEV,6DAAQ;IACZ,6DAAM;IAEV,6DAAM;;;IAjByC,2DAAoB;IAApB,kFAAoB;IAG/C,2DACJ;IADI,gGACJ;IAGI,2DACJ;IADI,mLACJ;IAEI,2DACJ;IADI,oLACJ;;;IAQpB,2EAAiE;IAAA,wDAAyB;;IAAA,6DAAM;;IAA/B,2DAAyB;IAAzB,6IAAyB;;;;IAhC9F,yEAA8B;IAC1B,2EAAY;IACR,sFAA8C;IAC1C,iFAC8C;IAA1C,qZAAuC;;IAD3C,6DAC8C;IAClD,6DAAiB;IACjB,uNAEc;IAClB,6DAAM;IACN,sFAA+G;IAA/F,oXAAsC;IAClD,4HAmBM;IACV,6DAAiB;IACjB,4HAAgG;IACpG,sEAAe;;;;IA/BS,2DAA6B;IAA7B,2EAA6B;IACb,2DAA+C;IAA/C,wKAA+C;IAOnE,2DAAsC;IAAtC,qGAAsC;IACrB,2DAAkB;IAAlB,4FAAkB;IAqB7C,2DAA6B;IAA7B,iGAA6B;;;;IAGnC,2EAA0D;IACtD,8EAAkF;IAAvB,gUAAsB;IAAC,wDAClE;;IAAA,6DAAS;IACzB,uEAAK;IACD,8EAEuD;IAAlC,2UAAiC;IAAC,wDACvC;;IAAA,6DAAS;IACzB,8EAE8D;IAA5B,qUAA2B;IAAC,wDAAoB;;IAAA,6DAAS;IAC/F,6DAAM;IACV,6DAAM;;;IAXgF,2DAClE;IADkE,yIAClE;IAI2C,2DACvC;IADuC,4IACvC;IAC0B,2DAAsC;IAAtC,uGAAsC;IAElB,2DAAoB;IAApB,yIAAoB;;;IAoBlE,yEAAmD;IAAA,wDACnD;;IAAA,sEAAe;;IADoC,2DACnD;IADmD,uKACnD;;;IADA,sKACe;;;IADA,mGAAkC;;;IAoCrD,yEAAoC;IAChC,wEAAM;IAAA,wDAA6C;;IAAA,6DAAO;IAC9D,sEAAe;;IADL,2DAA6C;IAA7C,iKAA6C;;;;IA9C/E,yEAA8B;IAC1B,4EAAuC;IACnC,2EAAY;IACR,2EAA0B;IACtB,oFAAsC;IAClC,qFAA6B;IAAA,qEAAG;IAAA,wDAA6B;;IAAA,6DAAI;IAAA,6DAAgB;IACjF,uFAA4D;IACxD,yEAAgG;;IAChG,oOAGc;IACd,4EAAmD;IAC/C,0EAAc;IACV,4EAA2B;IACvB,iFAAyB;IAAA,yDACzB;;IAAA,6DAAW;IACf,6DAAM;IACV,sEAAe;IACnB,6DAAM;IACV,6DAAkB;IACtB,6DAAe;IACf,4EAAY;IACR,4EAA0B;IACtB,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAsC;;IAAA,6DAAI;IAAA,6DAAgB;IAC1F,wFAA+B;IAC3B,kFAA4D;IAChE,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACN,4EAA0B;IACtB,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAkC;;IAAA,6DAAI;IAAA,6DAAgB;IACtF,wFAA+B;IAC3B,kFAA4D;IAChE,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACV,6DAAM;IACN,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAyB;;IAAA,6DAAI;IAAA,6DAAgB;IAC7E,wFAA+B;IAC3B,8EAC+B;IAA3B,+UAAwB;;IAD5B,6DAC+B;IAC/B,yJAEe;IAEnB,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACV,6DAAM;IACV,6DAAO;IACX,sEAAe;;;;IArDG,2DAAwB;IAAxB,0FAAwB;IAElB,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAA6B;IAA7B,2JAA6B;IAC5C,2DAAa;IAAb,uEAAa;IACmB,2DAAgD;IAAhD,2KAAgD;IAQxD,2DACzB;IADyB,2KACzB;IAOJ,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAAsC;IAAtC,qKAAsC;IACrD,2DAAa;IAAb,uEAAa;IAK1B,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAAkC;IAAlC,iKAAkC;IACjD,2DAAa;IAAb,uEAAa;IAOvB,2DAAa;IAAb,uEAAa;IAAI,2DAAyB;IAAzB,+IAAyB;IACxC,2DAAa;IAAb,uEAAa;IACgB,2DAA6C;IAA7C,wKAA6C;IAExE,2DAAmB;IAAnB,wFAAmB;;;;IAWtD,8EAEyC;IAArC,iVAA8B,KAAK,IAAC;IAAC,wDACzB;;IAAA,6DAAS;IACzB,8EAGsD;IADpB,8UAAwB;IACJ,wDAAsB;;IAAA,6DAAS;;;IAL5C,2DACzB;IADyB,4IACzB;IAIZ,2DAAiD;IAAjD,2HAAiD;IAAC,2DAAsB;IAAtB,0IAAsB;;;;IAjEpF,gFACgH;IADpC,wWAAkC,qRAC/B,KAAK,IAD0B;;IAE1G,0IAsDe;IACf,mNASc;IAClB,6DAAW;;;;IAlEP,gKAAuC;IADjC,2EAAsC;;;IAqE5C,wFACwB;;;IADwC,4FAA2B;;;IAE3F,wFACwB;;;IADwC,6FAA2B;;;IAE3F,0FAC0B;;;IADwC,6FAA2B;;;IAE7F,yFACyB;;;IADwC,6FAA2B;;;IAE5F,yFACyB;;;IADwC,6FAA2B;;AD9RzF,MAAM,YAAY;IAsBvB,YACU,MAAc,EACd,WAAwB,EACxB,eAAgC,EAChC,YAA0B,EAC3B,WAAwB,EACvB,MAAc,EACd,UAA2B,EAC3B,KAAwB,EACxB,OAAgB,EAChB,cAA8B;QAT9B,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACvB,WAAM,GAAN,MAAM,CAAQ;QACd,eAAU,GAAV,UAAU,CAAiB;QAC3B,UAAK,GAAL,KAAK,CAAmB;QACxB,YAAO,GAAP,OAAO,CAAS;QAChB,mBAAc,GAAd,cAAc,CAAgB;QA9BxC,YAAO,GAAmB;YACxB,SAAS,EAAE,CAAC;YACZ,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG;YACnD,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG;YACtC,IAAI,EAAE,IAAI,IAAI,EAAE;YAChB,KAAK,EAAE,CAAC;YACR,GAAG,EAAE,CAAC;YACN,GAAG,EAAE,CAAC;YACN,QAAQ,EAAE,CAAC;YACX,OAAO,EAAE,CAAC;YACV,IAAI,EAAE,EAAE;SACT;QACD,mBAAc,GAA2B,EAAE;QAC3C,aAAQ,GAAG,CAAC,CAAC;QACb,aAAQ,GAAG,CAAC;QACZ,YAAO,GAAU,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC5E,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW;QAC9E,aAAQ,GAAQ,EAAE,CAAC;QAEnB,mBAAc,GAAG,EAAE,CAAC;QAyCpB,iBAAY,GAAY,KAAK,CAAC;QAgD9B,sBAAiB,GAAY,KAAK,CAAC;QAkEnC,sCAAsC;QACtC,2BAAsB,GAAY,KAAK,CAAC;QA0ExC,gBAAW,GAAG,IAAI,CAAC;QAyFnB,yBAAyB;QACzB,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAW,EAAE;QACpB,kBAAa,GAAG,EAAE,CAAC;QA6CnB,2BAAsB,GAAG,KAAK,CAAC;QAC/B,uBAAkB,GAAG,KAAK,CAAC;QAE3B,mBAAc,GAAG,KAAK,CAAC;QACvB,oBAAe,GAAG,EAAE,CAAC;QAsFrB,kBAAa,GAAG,KAAK;QA6DrB,qBAAgB,GAAQ,EAAE,CAAC;QAC3B,gBAAW,GAAG,KAAK,CAAC;QA6LpB,+BAA0B,GAAY,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,0BAA0B,CAAC;IAtrBrI,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,gBAAgB;QAC3D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACvE,wCAAwC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClD,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;YACrB,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;SACnC;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,uBAAuB,CAAC;QAC1E,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;QAEjO,oBAAoB;QACpB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;aAChI,IAAI,CAAC,CAAC,QAAa,EAAE,EAAE;YAGtB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,yBAAY,IAAI,EAAE,CAAC,CAAC,CAAC;QAC9I,CAAC,CAAC;IACN,CAAC;IAED,WAAW;QACT,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAGD;;;OAGG;IACH,aAAa;QACX,IAAI,CAAC,KAAK,GAAG,CAAC,KAAU,EAAE,EAAE;YAC1B,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;YAC9B,IAAI,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG;gBAAE,KAAK,CAAC,cAAc,EAAE,CAAC;YAClF,IAAI,OAAO,KAAK,GAAG;gBAAE,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;iBACjE,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvC,QAAQ,OAAO,EAAE;oBAEf,KAAK,GAAG;wBAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC;wBACjC,MAAM;oBACR,KAAK,GAAG,CAAC,CAAC;wBACR,IAAI,IAAI,CAAC,YAAY;4BAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC;wBAC/C,MAAM;qBACP;iBACF;aACF;QACH,CAAC;QACD,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC1D,CAAC;IACD,eAAe;QACb,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IAC1C,CAAC;IAED,kBAAkB;QAEhB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IACD;;;;OAIG;IACH,WAAW,CAAC,MAA4B,EAAE,KAAM;QAC9C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aACjJ,IAAI,CAAC,GAAG,EAAE;YACT,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,gCAAgC;gBACvG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,UAAU,CAAC;;gBAE3C,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACjB,CAAC;IAED;;;KAGC;IACD,qBAAqB;QACnB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IACD;;;;OAIG;IACH,sBAAsB,CAAC,IAAI;QACzB,IAAI,IAAI,EAAE;YAGR,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,aAAa;gBAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC;iBACjE;gBACH,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,gCAAgC;oBACvG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;;oBAE5B,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;aACxC;SAEF;;YAEC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAEnC,CAAC;IACD;;;OAGG;IACH,MAAM;QACJ,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2CAA2C,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aACjN,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+CAA+C,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,EAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACxJ,CAAC;IACD;;;;;OAKG;IACH,oBAAoB,CAAC,OAA6B,EAAE,KAAK;QACvD,IAAI,CAAC,KAAK;YAAE,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;QACjC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED;;;;;OAKG;IACH,UAAU,CAAC,EAAE,EAAE,IAAI;QACjB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC7D,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;YACrB,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC;YAC1C,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;YACnC,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC;SAClD;QACD,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IAMD;;;;MAIE;IACF,iBAAiB,CAAC,MAA4B;QAC5C,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACL,CAAC;IACD;;;OAGG;IACH,cAAc;QACZ,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,EAAE;YAC7E,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;YAClE,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;SACrC;aAAM;YAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kCAAkC,CAAC,EAAE,aAAa,CAAC;SAAE;IAChI,CAAC;IACD;;;OAGG;IACH,oBAAoB,KAAK,IAAI,CAAC,sBAAsB,GAAG,KAAK,EAAC,CAAC;IAC9D,6BAA6B;IAC7B;;;MAGE;IACF,uBAAuB,CAAC,KAAK;QAC3B,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,CAAC;SACpC;IACH,CAAC;IAID;;;;OAIG;IACH,SAAS,CAAC,KAAK;QACb,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAGD;;;OAGG;IACH,MAAM;QACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+CAA+C,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;IACtG,CAAC;IAED;;;MAGE;IACF,SAAS;QACP,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;SAChC;IACH,CAAC;IAED;;;;;QAKI;IACJ,UAAU,CAAC,SAAY,EAAE,KAAM;QAC7B,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK;QACzC,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,EAAE;YAC5D,IAAI,CAAC,WAAW,CAAC,YAAY,CAC3B,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,GAAG,EAC5C,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CACvD,CAAC,IAAI,CAAC,GAAG,EAAE;gBACV,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBACzB,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBAC3E,IAAI,YAAY,GAAU,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;wBAE3D,sBAAsB;wBACtB,0GAA0G;wBAE1G,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;4BACpC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gCACxC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAC7B,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,+BAA+B,CAAC,EAAE,EAAE,eAAe,CAC3L;gCACD,IAAI,KAAK;oCAAE,IAAI,CAAC,WAAW,EAAE;;oCACxB,IAAI,CAAC,MAAM,EAAE;4BACpB,CAAC,CAAC;wBACJ,CAAC,CAAC;oBACJ,CAAC,CAAC;iBACH;YACH,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;SACd;;YACI,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6BAA6B,CAAC,EAAE,aAAa,CAAC;IACrH,CAAC;IACD;;;;OAIG;IACH,cAAc,CAAC,SAAY;QACzB,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,4BAA4B,EAAE,CAAC;IAC7H,CAAC;IAGD;;;;MAIE;IACF,UAAU;QACR,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;YACtC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,uBAAuB,CAAC;YAC1E,IAAI,OAAO,IAAI,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM;gBAAE,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;;gBACpN,OAAO,CAAC,IAAI,CAAC;QACpB,CAAC,CAAC;IACJ,CAAC;IACD;;;OAGG;IACH,WAAW;QACT,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YACjC,IAAI,OAAO;gBACT,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAC,cAAc,EAAE,IAAI,CAAC,cAAc,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,eAAe,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;oBAC/M,KAAK,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACjD,CAAC,CAAC;QACN,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CACT,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,qCAAqC,CAAC,EAAE,IAAI,CAAC;aACvJ,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAC7B;IACH,CAAC;IACD;;;;OAIG;IACK,eAAe,CAAC,IAAyG;QAC/H,QAAQ,IAAI,EAAE;YACZ,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,eAAe,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;YAClD,KAAK,eAAe,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;YAClD,OAAO,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;SACtC;IACH,CAAC;IAMD;;OAEG;IACH,QAAQ,CAAC,MAAqB;QAC5B,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,iEAAiE,EAAE;YACzF,kDAAkD;YAClD,IAAI,MAAM,CAAC,GAAG,IAAI,OAAO,EAAE;gBACzB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;oBACtC,IAAI,CAAC,IAAI,OAAO,EAAE;wBAChB,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAChD,KAAK,GAAG,CAAC,CACV,CAAC,WAAW,EAAE,CAAC;wBAChB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBACrC;gBACH,CAAC,CAAC,CAAC;gBACH,iDAAiD;gBACjD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3C,UAAU,CAAC,GAAG,EAAE;;oBAGd,IAAI,IAAI,CAAC,OAAO,EAAE;wBAChB,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,+BAA+B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACpF,IAAI,aAAa,EAAE;4BACjB,IAAI,CAAC,sBAAsB,iCAAM,aAAa,GAAK,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC,EAAG,CAAC;yBACnI;6BACI;4BACH,UAAI,CAAC,QAAQ,0CAAE,aAAa,CAAC,IAAI,EAAE,CAAC;4BACpC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC;gCAAE,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;yBACxH;qBACF;;wBACC,UAAI,CAAC,QAAQ,0CAAE,aAAa,CAAC,IAAI,EAAE,CAAC;oBACtC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;gBAC1B,CAAC,EAAE,GAAG,CAAC,CAAC;aAET;iBAAM;gBACL,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aACrC;YACD,IAAI;SACL;IACH,CAAC;IAUD;;;;;;OAMG;IACH,YAAY,CAAC,IAAI,EAAE,GAAG;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;QAC5C,OAAO,GAAG,CAAC,UAAU;IACvB,CAAC;IACD;;;OAGG;IACH,SAAS,CAAC,KAAK;QACb,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,YAAY,CAAC,CAAC;IAC/H,CAAC;IACD;;;;OAIG;IACH,kBAAkB,CAAC,IAAI;QACrB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;IAC7C,CAAC;IAED;;;;OAIG;IACH,SAAS,CAAC,CAAC;QACT,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU;IAC1F,CAAC;IAED;;;OAGG;IACH,eAAe;QAEb,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU;YAAE,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;IACtC,CAAC;IACD;;;WAGO;IACP,cAAc,CAAC,KAAK,EAAE,KAAK;QACzB,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACpI,CAAC;IAGD;;;OAGG;IACH,qBAAqB;QACnB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe;IAC7C,CAAC;IAED;;OAEG;IACH,UAAU;QACR,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,sDAAS,CAAC;YAC9B,QAAQ,EAAE,IAAI,wDAAW,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAC7G,QAAQ,EAAE,IAAI,wDAAW,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAE,CAAC,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAChH,UAAU,EAAE,IAAI,wDAAW,CAAC,EAAE,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAC1E,MAAM,EAAE,IAAI,wDAAW,CAAC,KAAK,CAAC;YAC9B,OAAO,EAAE,IAAI,wDAAW,CAAC,EAAE,CAAC;SAC7B,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACxC,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACnE,CAAC,CAAC;IACJ,CAAC;IAGD;;;OAGG;IACH,YAAY;QACV,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,+BAA+B,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACrG,IAAI,aAAa,EAAE;YACjB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC5B;aACI;YACH,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;IACH,CAAC;IAED;;;OAGG;IACH,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC1E,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAEhC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YACzE,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE;gBACjC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;qBAClF,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACjB,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG;wBAC/D,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;wBAE9D,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,GAAG;wBACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;oBAC7C,CAAC,EAAE,GAAG,CAAC,CAAC;gBACV,CAAC,EAAE,KAAK,CAAC,EAAE;gBAEX,CAAC,CAAC;aACL;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;qBAC/E,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACjB,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG;wBAC/D,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;wBAE9D,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,GAAG;wBACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;oBAC7C,CAAC,EAAE,GAAG,CAAC,CAAC;gBAEV,CAAC,EAAE,KAAK,CAAC,EAAE;gBAEX,CAAC,CAAC;aACL;SACF;aACI;YACH,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YAClE,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;SACtG;IACH,CAAC;IAID;;;;OAIG;IACH,UAAU,CAAC,IAAI;QACb,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;QAChH,IAAI,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC;QAClE,IAAI,CAAC,gBAAgB,GAAG,OAAO;QAC/B,IAAI,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,qBAAqB,CAAC;QAC5F,IAAI,gBAAgB,EAAE;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,IAAI,GAAG;gBACT,WAAW,kBACT,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,IAC7B,QAAQ,CACZ;gBACD,OAAO,EAAE,gBAAgB;gBACzB,GAAG,EAAE,IAAI,CAAC,gBAAgB,CAAC,iBAAiB;gBAC5C,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,gBAAgB;aAC/C;YAED,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;SACV;aACI;YACH,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yCAAyC,CAAC,CAAC;SACzH;IACH,CAAC;IAGD;;;;OAIG;IACH,YAAY;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ;IAC3C,CAAC;IAED;;;;OAIG;IACH,mBAAmB,CAAC,EAAU,EAAE,SAAmB;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAC/E,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;YACf,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,WAAW,EAAE;SACnC;IACH,CAAC;IAED;;;OAGG;IACH,WAAW;QACT,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,IAAY,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzG,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED;;;OAGG;IACH,QAAQ;QACN,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ;QAClC,IAAI,CAAC,WAAW,EAAE;IAEpB,CAAC;IAED;;;OAGG;IACH,WAAW;QACT,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;IAE/D,CAAC;IACD,kCAAkC;IAC3B,gBAAgB,CAAC,KAAU;QAChC,IAAI,KAAK,CAAC,eAAe,CAAC,EAAE;YAC1B,IAAI,KAAK,CAAC,UAAU,EAAE;gBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;gBACrJ,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;iBACI;gBACH,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC3I,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;SACF;aACI;YACH,IAAI,KAAK,CAAC,UAAU,EAAE;gBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;gBACrJ,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;iBACI;gBACH,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC9H,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;SACF;IAGH,CAAC;IAED;;;;SAIK;IACL,cAAc,CAAC,KAAK;QAClB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YAC1B,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,GAAG;YACrB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpC,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,KAAK,CAAC,YAAY;YACzB,YAAY,EAAE,KAAK,CAAC,YAAY;YAChC,aAAa,EAAE,KAAK,CAAC,aAAa;YAClC,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,aAAa,EAAE,KAAK,CAAC,aAAa;SACnC,CAAC;QAEF,IAAI,IAAI,CAAC,0BAA0B,EAAE;YACnC,UAAU,CAAC,GAAG,EAAE;gBAEd,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;gBACpC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;YACvC,CAAC,EAAE,CAAC,CAAC,CAAC;SACP;QACD,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IACD,kCAAkC;IAC3B,yBAAyB,CAAC,KAAU;QACzC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;YACvB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,GAAG;YACrB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpC,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,KAAK,CAAC,YAAY;YACzB,YAAY,EAAE,KAAK,CAAC,YAAY;YAChC,aAAa,EAAE,KAAK,CAAC,aAAa;YAClC,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,aAAa,EAAE,KAAK,CAAC,aAAa;SACnC,CAAC;QAEF,IAAI,IAAI,CAAC,0BAA0B,EAAE;YACnC,UAAU,CAAC,GAAG,EAAE;gBAEd,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;gBACpC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;YACvC,CAAC,EAAE,CAAC,CAAC,CAAC;SACP;QACD,IAAI,CAAC,WAAW,EAAE;IAEpB,CAAC;IAGD,wCAAwC;IACjC,sBAAsB,CAAC,SAAY;QACxC,IAAI,SAAS;YAAE,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,SAAS,CAAC;QACnD,OAAO,IAAI,CAAC,OAAO;IACrB,CAAC;IACD,iDAAiD;IAC1C,4BAA4B;QACjC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACpC,IAAI,MAAM,GAAyB;gBACjC,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAClC,YAAY,EAAE,IAAI,CAAC,YAAY;aAChC;YACD,IAAI,IAAI,CAAC,eAAe,CAAC;gBAAE,MAAM,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC,aAAa;YACvE,IAAI,IAAI,CAAC,eAAe,CAAC;gBAAE,MAAM,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC,aAAa;YAEvE,OAAO,MAAM;QACf,CAAC,CAAC;IACJ,CAAC;;wEAhvBU,YAAY;2GAAZ,YAAY;;;;;;iJAAZ,oBAAgB;;QCnB7B,0EAA4D;QAAnB,kIAAS,YAAQ,IAAC;QACvD,mEAA+C;QAAA,wDAA0B;;QAAA,qEAAG;QAAC,wDAAsC;;QAAA,6DAAI;QAC3H,6DAAM;QAEN,6EAAW;QACP,0EAAmB;QACf,0EAAwB;QACpB,2EAAsD;QAClD,2EAAsC;QAClC,sEAAG;QAAA,yDAAgC;;QAAA,6DAAI;QAC3C,6DAAM;QACN,2EAAkD;QAE9C,wEAAK;QACD,8EACsC;QAAlC,sIAAS,2BAAuB,IAAC;QACjC,oEAAiD;QACjD,yDACJ;;QAAA,6DAAS;QACb,6DAAM;QAEV,6DAAM;QAEN,2GAEM;QACV,6DAAM;QACN,4EAAoD;QAChD,8GAgDM;QACV,6DAAM;QACV,6DAAM;QACN,4EAAyB;QACrB,4EAAoD;QAChD,4EAAwB;QACpB,4EAAoC;QAChC,sEAAG;QAAA,yDAA0B;;QAAA,6DAAI;QACjC,kFACgE;QAA5D,mLAA2B,mCAA+B,IAAC;QAAC,6DAAY;QAChF,6DAAM;QAEV,6DAAM;QACV,6DAAM;QAEN,4EAAsD;QAClD,sEAAG;QAAA,yDAAqC;;QAAA,6DAAI;QAC5C,4EAAwB;QACpB,wEAAK;QAAA,yDAA0B;;QAAA,6DAAM;QACrC,wEAAK;QAAA,yDAAwC;QAAA,6DAAM;QACvD,6DAAM;QAWN,4GAaM;QACN,4EAA0D;QACtD,wEAAK;QAAA,yDAAuB;;QAAA,6DAAM;QAClC,wEAAK;QAAA,yDAA8C;QAAA,6DAAM;QAC7D,6DAAM;QAEN,4GAIM;QACV,6DAAM;QACN,4EAAuC;QACnC,+EAC4B;QADkC,sIAAS,eAAW,CAAC,EAAC,IAAI,CAAC,IAAC;QAEtF,yDACJ;;QAAA,6DAAS;QACT,+EAAmG;QAAtD,sIAAS,eAAW,CAAC,EAAC,KAAK,CAAC,IAAC;QACtE,yDAAyB;;QAAA,6DAAS;QAC1C,6DAAM;QACV,6DAAM;QACV,6DAAM;QACV,6DAAY;QAGZ,kGAC8D;QAA1D,iMAA0B,kCAA8B,IAAC;QAC7D,6DAA4B;QAG5B,sHAoBW;QAEX,iFACsH;QADrE,yMAAsC,yFACvB,2BAAuB,IADA,iFACY,qBAAiB,IAD7B;;QAEnF,+HAiCe;QACf,2MAgBc;QAClB,6DAAW;QAGX,sHAmEW;QACX,8EAA0D;QACtD,gJACwB;QACxB,gJACwB;QACxB,oJAC0B;QAC1B,kJACyB;QACzB,kJACyB;QAC7B,sEAAe;;;QAlToC,2DAA0B;QAA1B,uJAA0B;QAAI,2DAAsC;QAAtC,qKAAsC;QAMrE,2DAAe;QAAf,yEAAe;QAE1C,2DAAgC;QAAhC,sJAAgC;QAQ3B,2DACJ;QADI,8JACJ;QAKF,2DAA4B;QAA5B,6FAA4B;QAKe,2DAAkB;QAAlB,wFAAkB;QAuDxD,2DAA0B;QAA1B,gJAA0B;QAClB,2DAAmC;QAAnC,iGAAmC;QAQnD,2DAAqC;QAArC,2JAAqC;QAE/B,2DAA0B;QAA1B,gJAA0B;QAC1B,2DAAwC;QAAxC,8GAAwC;QAYQ,2DAAyB;QAAzB,0FAAyB;QAezE,2DAAuB;QAAvB,6IAAuB;QACvB,2DAA8C;QAA9C,oHAA8C;QAGG,2DAA0B;QAA1B,2FAA0B;QAO5E,2DAAqD;QAArD,sHAAqD;QAEzD,2DACJ;QADI,oKACJ;QACQ,2DAAoC;QAApC,iGAAoC;QACxC,2DAAyB;QAAzB,2JAAyB;QAOlB,2DAAuC;QAAvC,qGAAuC;QAKjB,2DAA4B;QAA5B,6FAA4B;QAuBzE,2DAA6C;QAA7C,wKAA6C;QADvC,0EAAsC;QAwDE,2DAAwB;QAAxB,yFAAwB;QAoE5D,2DAA2C;QAA3C,yGAA2C;QACN,2DAAe;QAAf,4EAAe;QAEf,2DAAe;QAAf,4EAAe;QAEb,2DAAe;QAAf,4EAAe;QAEhB,2DAAe;QAAf,4EAAe;QAEf,2DAAe;QAAf,4EAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;AChTpB;AACI;AACG;AACM;AACG;AACT;AACT;AACA;AACgC;AACwC;;AAyB9G,MAAM,eAAe;;8EAAf,eAAe;4GAAf,eAAe;gHAfjB;YACP,yDAAY;YACZ,yEAAgB;YAChB,+HAAyB;YACzB,gEAAe;YACf,uDAAW;YACX,wDAAW;YACX,uFAAY;SACb;mIAOU,eAAe,mBAnBxB,4DAAY;QACZ,+DAAa;QACb,qEAAe,aAGf,yDAAY;QACZ,yEAAgB;QAChB,+HAAyB;QACzB,gEAAe;QACf,uDAAW;QACX,wDAAW;QACX,uFAAY,aAGZ,4DAAY;QACZ,+DAAa;QACb,qEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IEQoB,wEAAyC;IAC5D,2EAAkC;IAChC,uDACA;IAAA,wEAEsD;IAApD,+YAAS,wBAAwB,yCAAkB;;IAAC,4DAAI;IAC5D,4DAAO;IACP,2EAAkC;IAChC,gEAAI;IAAC,uDACP;IAAA,4DAAO;IACT,qEAAe;;;;IARX,0DACA;IADA,uIACA;IACE,0DAAqD;IAArD,4KAAqD;IAIlD,0DACP;IADO,2IACP;;;IAVN,yEAAyE;IACvE,qEAAI;IAAA,uDAAc;IAAA,gEAAI;IAAC,gJAUN;IAAA,4DAAK;IACtB,yEAAqB;IAAA,uDAAmC;IAAA,4DAAK;IAC7D,yEAAqB;IAAA,uDAAiB;IAAA,4DAAK;IAC3C,yEAAoB;IAClB,wDACA;IAAA,2EAAgC;IAC9B,wDAEF;IAAA,4DAAM;IACR,4DAAK;IACL,0EAAoB;IAAA,qEAAG;IAAA,wDAA0D;IAAA,4DAAI;IACrF,4DAAK;IACP,4DAAK;;;;IAtBC,0DAAc;IAAd,wFAAc;IAAoB,0DAAwB;IAAxB,wFAAwB;IAWzC,0DAAmC;IAAnC,+GAAmC;IACnC,0DAAiB;IAAjB,kFAAiB;IAEpC,0DACA;IADA,6HACA;IACE,0DAEF;IAFE,kLAEF;IAEqB,0DAA0D;IAA1D,sIAA0D;;;IAyBzF,0EAAoD;IAClD,sEAAK;IACH,oEAAG;IAAA,uDAAoF;;;IAAA,4DAAI;IAC3F,oEAAG;IAAA,uDAAsC;IAAA,4DAAI;IAC/C,4DAAM;IACR,4DAAM;;;IAHC,0DAAoF;IAApF,oRAAoF;IACpF,0DAAsC;IAAtC,iHAAsC;;;IAW7C,0EAAoF;IAClF,uEAAM;IAAA,uDAAqB;;IAAA,4DAAO;IAClC,sEAAK;IAAA,uDAA0C;IAAA,4DAAM;IACrD,sEAAK;IACH,uDAAmE;IAAA,4DAAM;IAC7E,4DAAM;;;IAJE,0DAAqB;IAArB,uIAAqB;IACtB,0DAA0C;IAA1C,uHAA0C;IAE7C,0DAAmE;IAAnE,+JAAmE;;;IAQvE,0EAAsF;IACpF,uEAAM;IAAA,uDAAsB;;IAAA,4DAAO;IACnC,sEAAK;IAAA,uDAAgB;IAAA,4DAAM;IAC7B,4DAAM;;;IAFE,0DAAsB;IAAtB,wIAAsB;IACvB,0DAAgB;IAAhB,qFAAgB;;;;;IA9G/B,+EAA8D;IAC5D,yEAAmB;IACjB,yEAAwB;IACtB,yEAAwF;IACtF,yEAAsC;IACpC,oEAAG;IAAA,uDAA+B;;IAAA,4DAAI;IACxC,4DAAM;IACN,0EAAmD;IACjD,6EACqB;IADb,2TAAoB;IAExB,uEAAqD;IACrD,wDACF;;IAAA,4DAAS;IAEX,8EACiF;IADxE,iUAAyB;IAEhC,2EAAqE;IACrE,wDACF;;IAAA,4DAAS;IACX,4DAAM;IAER,4DAAM;IACN,2EAAoD;IAClD,2EAAgC;IAC9B,oFACyC;;IACvC,yEAAO;IACL,sEAAI;IACF,0EAAkB;IAAA,qEAAG;IAAA,wDAA8B;;IAAA,4DAAI;IAAA,4DAAK;IAC5D,0EAAmC;IAAA,qEAAG;IAAA,wDAAsB;;IAAA,4DAAI;IAAA,4DAAK;IACrE,0EAAmC;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IACzE,0EAAkC;IAAA,qEAAG;IAAA,wDAA4B;;IAAA,4DAAI;IAAA,4DAAK;IAC1E,0EAAkC;IAAA,qEAAG;IAAA,wDAAuB;;IAAA,4DAAI;IAAA,4DAAK;IACvE,4DAAK;IACP,4DAAQ;IACR,yEAAO;IACL,yHAuBK;IACP,4DAAQ;IACV,4DAAW;IACb,4DAAM;IACR,4DAAM;IACR,4DAAM;IACN,2EAAwC;IACtC,2EAAoD;IAClD,uEAAK;IACH,qEAAG;IAAA,wDAA8B;;IAAA,4DAAI;IACrC,uEAAK;IAAC,wDAAqB;IAAA,4DAAM;IACnC,4DAAM;IACN,uEAAK;IACH,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IACjC,uEAAK;IAAA,wDAA6B;IAAA,4DAAM;IAC1C,4DAAM;IACN,uEAAK;IACH,qEAAG;IAAA,wDAA+B;;IAAA,4DAAI;IACtC,uEAAK;IAAA,wDAA2C;;IAAA,4DAAM;IACxD,4DAAM;IACR,4DAAM;IACN,2EAAuD;IACrD,qEAAG;IAAA,wDAAsC;;IAAA,4DAAI;IAC7C,0HAKM;IACR,4DAAM;IACN,2EAAsD;IACpD,qEAAG;IAAA,wDAAqC;;IAAA,4DAAI;IAC5C,2EAAwB;IACtB,wEAAM;IAAA,wDAA0B;;IAAA,4DAAO;IACvC,uEAAK;IAAA,wDAAwC;IAAA,4DAAM;IACrD,4DAAM;IAEN,0HAKM;IACN,2EAA0D;IACxD,wEAAM;IAAA,wDAAuB;;IAAA,4DAAO;IACpC,uEAAK;IAAA,wDAA6C;IAAA,4DAAM;IAE1D,4DAAM;IAEN,0HAGM;IACR,4DAAM;IACN,2EAAwC;IACtC,2EAAwB;IACtB,8EAA6D;IAArB,4TAAoB;IAAC,wDAChD;;IAAA,4DAAS;IACxB,4DAAM;IACR,4DAAM;IACR,4DAAM;IACR,4DAAM;IACR,4DAAY;;;;IAtHkE,0DAAe;IAAf,wEAAe;IAEhF,0DAA+B;IAA/B,kJAA+B;IAM9B,0DACF;IADE,qJACF;IAKA,0DACF;IADE,uJACF;IAOE,0DAAsC;IAAtC,+JAAsC;IAD9B,gKAA+B;IAId,0DAA8B;IAA9B,kJAA8B;IACb,0DAAsB;IAAtB,0IAAsB;IACtB,0DAA0B;IAA1B,8IAA0B;IAC3B,0DAA4B;IAA5B,gJAA4B;IAC5B,0DAAuB;IAAvB,2IAAuB;IAIzC,0DAAyB;IAAzB,6EAAyB;IAgC/C,0DAA8B;IAA9B,kJAA8B;IAC3B,0DAAqB;IAArB,mGAAqB;IAGxB,0DAA0B;IAA1B,8IAA0B;IACxB,0DAA6B;IAA7B,iGAA6B;IAG/B,0DAA+B;IAA/B,mJAA+B;IAC7B,0DAA2C;IAA3C,2KAA2C;IAI/C,0DAAsC;IAAtC,0JAAsC;IACnC,0DAAyB;IAAzB,4FAAyB;IAQ5B,0DAAqC;IAArC,yJAAqC;IAEhC,0DAA0B;IAA1B,8IAA0B;IAC3B,0DAAwC;IAAxC,mHAAwC;IAGU,0DAAyB;IAAzB,4FAAyB;IAO1E,0DAAuB;IAAvB,2IAAuB;IACxB,0DAA6C;IAA7C,wHAA6C;IAIM,0DAA0B;IAA1B,6FAA0B;IAOrB,0DAChD;IADgD,0IAChD;;;IAQrB,uFACwB;;;IADwC,2FAA2B;;;IAE3F,uFACwB;;;IADwC,2FAA2B;;;IAE3F,yFAC0B;;;IADwC,2FAA2B;;;IAE7F,wFACyB;;;IADwC,2FAA2B;;;IAE5F,wFACyB;;;IADwC,2FAA2B;;AD1HvF,MAAM,eAAe;IAU1B,YACU,MAAc,EACd,YAA0B,EAC1B,eAAgC,EAChC,MAAc,EACd,WAAwB,EACzB,WAAwB,EACvB,KAAwB,EACxB,eAAgC,EAChC,OAAgB;QARhB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACzB,gBAAW,GAAX,WAAW,CAAa;QACvB,UAAK,GAAL,KAAK,CAAmB;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,YAAO,GAAP,OAAO,CAAS;QAlB1B,QAAG,GAAG,+CAA+C,CAAC;QACtD,mBAAc,GAA8B,EAAE;QAI9C,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC;QAE/E,mBAAc,GAAG,EAAE,CAAC;QACpB,aAAQ,GAAG,CAAC;QA6IZ,qBAAgB,GAAQ,EAAE,CAAC;QAC3B,gBAAW,GAAG,KAAK,CAAC;QAlIlB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC;QAEvE,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;QAC3E,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;IACxL,CAAC;IAED;;;OAGG;IACH,IAAI,CAAC,UAA2B,IAAI,EAAE,gBAAyC,IAAI;QACjF,IAAI,CAAC,OAAO,mCAAO,OAAO,KAAG,GAAG,EAAE,CAAC,EAAG,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,OAAO,CAAC,KAAK,GAAC;QAC1E,IAAI,CAAC,cAAc,GAAG,aAAa;QACnC,IAAI,OAAO,IAAI,aAAa,EAAE;YAC5B,IAAI,CAAC,WAAW,GAAG;gBACjB,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;aAEjE;SACF;;YAAM,IAAI,CAAC,WAAW,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE;QACxE,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IACD;;;OAGG;IACH,WAAW;QACT,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,EAAE;YACjC,QAAQ,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SACjD;QACD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;IAGD;;;;OAIG;IACK,cAAc,CAAC,EAAE;QACvB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChE,OAAO,CAAC,GAAG,CAAC;gBACV,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,yBAAyB,CAAC,EAAE,CAAC;gBAC/C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;aACpI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,aAAa,EAAE,YAAY,CAAM,EAAE,EAAE;gBACtD,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,yBAAY,IAAI,EAAE,CAAC,CAAC,CAAC;gBAEhJ,IAAI,CAAC,aAAa,CAAC,MAAM;oBACvB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC;qBACnB;oBACH,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;oBAC5E,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC;iBAClC;gBAED,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;YACjC,CAAC,CAAC;QACJ,CAAC,CAAC;IAEJ,CAAC;IAED;;;;;;OAMG;IACH,OAAO,CAAC,KAAY,EAAE,KAAK;QACzB,OAAO,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,IAAI;IAC7D,CAAC;IACD;;;;;;OAMG;IACH,YAAY,CAAC,IAAI,EAAE,GAAG;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;QAC5C,OAAO,GAAG,CAAC,UAAU;IACvB,CAAC;IAED;;;;;;OAMG;IACH,gBAAgB,CAAC,IAAI,EAAE,GAAG;QACxB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;QAC5C,OAAO,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC;IAC9G,CAAC;IACD;;;OAGG;IACH,aAAa;QACX,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,6BAA6B,CAAC,EAAE;YAChE,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6CAA6C,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;iBAC9M,IAAI,CAAC,GAAG,EAAE;gBACT,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBAChE,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBAClE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACxC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAC7B,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,iCAAiC,CAAC,EAAE,EAAE,eAAe,CAAC;4BAC1K,IAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC,CAAC;oBACJ,CAAC,CAAC;gBACJ,CAAC,CAAC;YACJ,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;SAChB;;YACI,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6BAA6B,CAAC,EAAE,aAAa,CAAC;IACrH,CAAC;IACM,QAAQ;QACb,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,aAAa,EAAE,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;IACrJ,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;IAChE,CAAC;IACD,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,gCAAgC,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,oCAAoC,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE;YAC7N,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,gCAAgC,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY;kBAC9I,QAAQ,CAAC,aAAa,CAAC,oCAAoC,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;SAC1J;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IAKD;;;;OAIG;IACH,UAAU,CAAC,IAAI;QACb,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;QAChH,IAAI,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC;QAClE,IAAI,CAAC,gBAAgB,GAAG,OAAO;QAC/B,IAAI,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,qBAAqB,CAAC;QAC5F,IAAI,gBAAgB,EAAE;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG;gBAChB,WAAW,kBACT,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,IAC7B,QAAQ,CACZ;gBACD,OAAO,EAAE,gBAAgB;gBACzB,GAAG,EAAE,IAAI,CAAC,gBAAgB,CAAC,aAAa;gBACxC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,YAAY;aAC3C;YACD,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;SACV;aACI;YACH,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yCAAyC,CAAC,CAAC;SACzH;IAEH,CAAC;;8EAtLU,eAAe;6GAAf,eAAe;QCb5B,yEAA4D;QAAnB,oIAAS,YAAQ,IAAC;QACzD,kEAA+C;QAAA,uDACjD;;QAAA,4DAAM;QACN,yHAyHY;QAEZ,2EAA0D;QACxD,+IACwB;QACxB,+IACwB;QACxB,mJAC0B;QAC1B,iJACyB;QACzB,mJACyB;QAC3B,qEAAe;;QAxIkC,0DACjD;QADiD,mJACjD;QAC+C,0DAAa;QAAb,6EAAa;QA2H9C,0DAA2C;QAA3C,wGAA2C;QACR,0DAAe;QAAf,2EAAe;QAEf,0DAAe;QAAf,2EAAe;QAEb,0DAAe;QAAf,2EAAe;QAEhB,0DAAe;QAAf,2EAAe;QAEf,0DAAe;QAAf,2EAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnI+C;AACA;AACiB;AACA;AACA;AAI7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICUpD,2EAAoD;IAChD,qEAAG;IAAA,wDAAyC;;IAAA,6DAAI;IACpD,6DAAM;;IADC,2DAAyC;IAAzC,6JAAyC;;;;IAahC,yEAAyC;IACrC,2EAAmG;IAAnC,gbAAkC;IAC9F,wDACA;IAAA,yEAAoK;IAApD,qYAAS,wBAAwB,yCAAkB;;IAAC,6DAAI;IAC5K;IAAA,6DAAM;IAER,sEAAe;;;;IAJT,2DACA;IADA,wNACA;IAA0D,2DAAqD;IAArD,8KAAqD;;;IAUvH,4EACoC;;;IADiB,gFAAkB;;;;IAtBvF,2EAA+E;IAC3E,2EAAY;IACR,2EAAwE;IAAnE,maAA6B;IAC9B,oEAC+D;IACnE,6DAAM;IACN,2EAA0C;IACtC,yEAA8B;IAC1B,qEAAG;IAAA,wDAAa;IAAA,6DAAI;IAAE,iEAAI;IAC1B,oIAMiB;IACrB,6DAAI;IACR,6DAAM;IACN,4EAAmD;IAC/C,kFAC8C;IADd,kUAAwB;IAGpD,gIACoC;IACxC,6DAAY;IAChB,6DAAM;IACN,4EAA+C;IAC3C,wFACwD;IADS,2UAA2B;IACpC,6DAAkB;IAC9E,6DAAM;IACN,4EACe;IADV,kYAAiC;IAElC,0EAA8B;IAAA,yEAAM;IAAA,yDAA0C;IAAA,6DAAO;IACjF,4EAAgC;IAC5B,yDAEJ;IAAA,6DAAM;IACV,6DAAI;IACR,6DAAM;IACN,4EAAyC;IACrC,0EAA8B;IAC1B,sEAAG;IAAA,yDAAwD;IAAA,6DAAI;IACnE,6DAAI;IACR,6DAAM;IACV,6DAAM;IACV,6DAAM;;;;IArCa,2DAAa;IAAb,+EAAa;IACD,2DAAwB;IAAxB,yFAAwB;IAUX,2DAAwB;IAAxB,oFAAwB;IAG3B,2DAAc;IAAd,oFAAc;IAK1B,2DAAoB;IAApB,8EAAoB;IAKD,2DAA0C;IAA1C,mHAA0C;IAEtE,2DAEJ;IAFI,mLAEJ;IAKG,2DAAwD;IAAxD,uIAAwD;;;IAwC/D,4EAEY;;;;IAF4B,6FAAsB;IAC1D,oIAAmD;;;;IAH3D,iFACiB;IADiB,kWAAoB;IAElD,0IAEY;IAChB,6DAAY;;;IALsB,oFAAoB;IAEtB,2DAAU;IAAV,qFAAU;;;IAI1C,4EAAgD;IAAA,iEAAK;IAAA,6DAAO;;;IATpE,2EAAoF;IAChF,uEAAK;IAAA,wDAAqB;;IAAA,6DAAM;IAChC,uEAAK;IACD,8HAKY;IACZ,oHAA4D;IAChE,6DAAM;IACN,uEAAK;IACD,wDAAwC;IAAA,6DAAM;IACtD,6DAAM;;;IAZG,2DAAqB;IAArB,yIAAqB;IAEV,2DAAoB;IAApB,wFAAoB;IAMP,2DAAqB;IAArB,yFAAqB;IAG9C,2DAAwC;IAAxC,8HAAwC;;;;;IAOhD,2EAAsF;IAClF,gFAE8C;IAFZ,0VAA0B;;IAEd,6DAAW;IAC7D,6DAAM;;;IAFE,2DAA6C;IAA7C,sKAA6C;IADf,yFAA0B;;;IA0B5E,yEAA8B;IAC1B,2EAAY;IACR,2EAA0C;IAAA,wDAA4B;;IAAA,6DAAM;IAC5E,2EAAwB;IACpB,wEACuD;;IAC3D,6DAAM;IACV,6DAAM;IACV,sEAAe;;;IANmC,2DAA4B;IAA5B,gJAA4B;IAG9D,2DAAgD;IAAhD,yKAAgD;IADC,4FAA0B;;;;IAMvF,8EAEqC;IAAjC,uVAAgC;IAAC,wDACrB;;IAAA,6DAAS;IACzB,8EAE6D;IAA3B,iVAA0B;IAAC,wDAAsB;;IAAA,6DAAS;;IAJvD,2DACrB;IADqB,4IACrB;IAG6C,2DAAsB;IAAtB,0IAAsB;;;;IAlB3F,gFACkH;IADnC,6WAAsC;;IAEjH,yIAQe;IACf,oNAQc;IAClB,6DAAW;;;;IAnBP,oKAA2C;IADrC,2EAAqC;;;IA8B/B,oEAA+B;;;IAInC,2EAAkD;IAC9C,2EAAwB;IACpB,6EAA+F;IAC3F,2EAAY;IACR,2EAAuB;IACnB,wDACJ;IAAA,6DAAM;IAEN,2EAAuB;IACnB,wDACH;;IAAA,6DAAM;IACN,2EAAuB;IACpB,yDACH;;IAAA,6DAAM;IACX,6DAAM;IAEV,6DAAQ;IACZ,6DAAM;IAEV,6DAAM;;;IAjByC,2DAAoB;IAApB,kFAAoB;IAG/C,2DACJ;IADI,gGACJ;IAGI,2DACH;IADG,mLACH;IAEG,2DACH;IADG,oLACH;;;IAQrB,2EAAkE;IAAA,wDAAyB;;IAAA,6DAAM;;IAA/B,2DAAyB;IAAzB,6IAAyB;;;;IA/B/F,yEAA8B;IAC1B,2EAAY;IACR,sFAA8C;IAC1C,iFAAmI;IAA1C,sZAAuC;;IAAhI,6DAAmI;IACvI,6DAAiB;IACjB,wNAEc;IAClB,6DAAM;IACN,sFAA+G;IAA/F,qXAAsC;IAClD,6HAmBM;IACV,6DAAiB;IACjB,6HAAiG;IACrG,sEAAe;;;;IA9BS,2DAA6B;IAA7B,2EAA6B;IACb,2DAA+C;IAA/C,wKAA+C;IAMnE,2DAAsC;IAAtC,qGAAsC;IACrB,2DAAkB;IAAlB,4FAAkB;IAqB5C,2DAA6B;IAA7B,iGAA6B;;;;IAGpC,2EAA0D;IACtD,8EAAkF;IAAvB,iUAAsB;IAAC,wDAClE;;IAAA,6DAAS;IACzB,uEAAK;IACD,8EAEuD;IAAlC,4UAAiC;IAAC,wDACvC;;IAAA,6DAAS;IACzB,8EAE8D;IAA5B,sUAA2B;IAAC,wDAAoB;;IAAA,6DAAS;IAC/F,6DAAM;IACV,6DAAM;;;IAXgF,2DAClE;IADkE,yIAClE;IAI2C,2DACvC;IADuC,4IACvC;IAC0B,2DAAsC;IAAtC,uGAAsC;IAElB,2DAAoB;IAApB,yIAAoB;;;IAoBlE,yEAAmD;IAAA,wDACnD;;IAAA,sEAAe;;IADoC,2DACnD;IADmD,uKACnD;;;IADA,uKACe;;;IADA,mGAAkC;;;IAoCrD,yEAAoC;IAChC,wEAAM;IAAA,wDAA6C;;IAAA,6DAAO;IAC9D,sEAAe;;IADL,2DAA6C;IAA7C,iKAA6C;;;;IA9C/E,yEAA8B;IAC1B,4EAAuC;IACnC,2EAAY;IACR,2EAA0B;IACtB,oFAAsC;IAClC,qFAA6B;IAAA,qEAAG;IAAA,wDAA6B;;IAAA,6DAAI;IAAA,6DAAgB;IACjF,uFAA4D;IACxD,yEAAgG;;IAChG,qOAGc;IACd,4EAAmD;IAC/C,0EAAc;IACV,4EAA2B;IACvB,iFAAyB;IAAA,yDACzB;;IAAA,6DAAW;IACf,6DAAM;IACV,sEAAe;IACnB,6DAAM;IACV,6DAAkB;IACtB,6DAAe;IACf,4EAAY;IACR,4EAA0B;IACtB,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAsC;;IAAA,6DAAI;IAAA,6DAAgB;IAC1F,wFAA+B;IAC3B,kFAA4D;IAChE,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACN,4EAA0B;IACtB,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAkC;;IAAA,6DAAI;IAAA,6DAAgB;IACtF,wFAA+B;IAC3B,kFAA4D;IAChE,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACV,6DAAM;IACN,qFAAsC;IAClC,sFAA6B;IAAA,sEAAG;IAAA,yDAAyB;;IAAA,6DAAI;IAAA,6DAAgB;IAC7E,wFAA+B;IAC3B,8EAC+B;IAA3B,gVAAwB;;IAD5B,6DAC+B;IAC/B,0JAEe;IAEnB,6DAAkB;IACtB,6DAAe;IACnB,6DAAM;IACV,6DAAM;IACV,6DAAO;IACX,sEAAe;;;;IArDG,2DAAwB;IAAxB,0FAAwB;IAElB,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAA6B;IAA7B,2JAA6B;IAC5C,2DAAa;IAAb,uEAAa;IACmB,2DAAgD;IAAhD,2KAAgD;IAQxD,2DACzB;IADyB,2KACzB;IAOJ,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAAsC;IAAtC,qKAAsC;IACrD,2DAAa;IAAb,uEAAa;IAK1B,2DAAa;IAAb,uEAAa;IAEF,2DAAa;IAAb,uEAAa;IAAI,2DAAkC;IAAlC,iKAAkC;IACjD,2DAAa;IAAb,uEAAa;IAOvB,2DAAa;IAAb,uEAAa;IAAI,2DAAyB;IAAzB,+IAAyB;IACxC,2DAAa;IAAb,uEAAa;IACgB,2DAA6C;IAA7C,wKAA6C;IAExE,2DAAmB;IAAnB,wFAAmB;;;;IAWtD,8EAEyC;IAArC,kVAA8B,KAAK,IAAC;IAAC,wDACzB;;IAAA,6DAAS;IACzB,8EAGsD;IADpB,+UAAwB;IACJ,wDAAsB;;IAAA,6DAAS;;;IAL5C,2DACzB;IADyB,4IACzB;IAIZ,2DAAiD;IAAjD,2HAAiD;IAAC,2DAAsB;IAAtB,0IAAsB;;;;IAjEpF,gFACgH;IADpC,yWAAkC,sRAC/B,KAAK,IAD0B;;IAE1G,2IAsDe;IACf,oNASc;IAClB,6DAAW;;;;IAlEP,gKAAuC;IADjC,2EAAsC;;;IAqE5C,wFACwB;;;IADwC,4FAA2B;;;IAE3F,wFACwB;;;IADwC,6FAA2B;;;IAE3F,0FAC0B;;;IADwC,6FAA2B;;;IAE7F,yFACyB;;;IADwC,6FAA2B;;;IAE5F,yFACyB;;;IADwC,6FAA2B;;ADxRzF,MAAM,aAAa;IAWxB,YACU,MAAc,EACd,WAAwB,EACxB,eAAgC,EAChC,YAA0B,EAC3B,WAAwB,EACvB,MAAc,EACd,UAA2B,EAC3B,KAAwB,EACxB,OAAgB,EAChB,cAA8B;QAT9B,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACvB,WAAM,GAAN,MAAM,CAAQ;QACd,eAAU,GAAV,UAAU,CAAiB;QAC3B,UAAK,GAAL,KAAK,CAAmB;QACxB,YAAO,GAAP,OAAO,CAAS;QAChB,mBAAc,GAAd,cAAc,CAAgB;QApBxC,QAAG,GAAG,+CAA+C,CAAC;QACtD,YAAO,GAAoB,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO;QAClF,mBAAc,GAA4B,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa;QACvG,aAAQ,GAAG,CAAC,CAAC;QACb,aAAQ,GAAG,CAAC;QACZ,YAAO,GAAU,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC5E,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW;QAC9E,aAAQ,GAAQ,EAAE,CAAC;QAEnB,mBAAc,GAAG,EAAE,CAAC;QAgDpB,iBAAY,GAAY,KAAK,CAAC;QAuC9B,sBAAiB,GAAY,KAAK,CAAC;QAyCnC,sCAAsC;QACtC,2BAAsB,GAAY,KAAK,CAAC;QA4GxC,yBAAyB;QACzB,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAW,EAAE;QACpB,kBAAa,GAAG,EAAE,CAAC;QAqCnB,2BAAsB,GAAG,KAAK,CAAC;QAC/B,uBAAkB,GAAG,KAAK,CAAC;QAE3B,mBAAc,GAAG,KAAK,CAAC;QACvB,oBAAe,GAAG,EAAE,CAAC;QAsDrB,kBAAa,GAAG,KAAK;QAqDrB,qBAAgB,GAAQ,EAAE,CAAC;QAC3B,gBAAW,GAAG,KAAK,CAAC;IAvXpB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAEvE,wCAAwC;QACxC,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACpE,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;SACtB;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,uBAAuB,CAAC;QAC1E,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;QAEjO,oBAAoB;QACpB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;aAChI,IAAI,CAAC,CAAC,QAAa,EAAE,EAAE;YAGtB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,yBAAY,IAAI,EAAE,CAAC,CAAC,CAAC;QAC9I,CAAC,CAAC;QAEJ,gBAAgB;QAChB,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,EAAE;YACjC,QAAQ,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SACjD;QACD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;IAC/D,CAAC;IAED,WAAW;QACT,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAED,aAAa;QACX,IAAI,CAAC,KAAK,GAAG,CAAC,KAAU,EAAE,EAAE;YAC1B,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;YAC9B,IAAI,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG,IAAI,OAAO,KAAK,GAAG;gBAAE,KAAK,CAAC,cAAc,EAAE,CAAC;YAClF,IAAI,OAAO,KAAK,GAAG;gBAAE,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;iBACjE,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvC,QAAQ,OAAO,EAAE;oBAEf,KAAK,GAAG;wBAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC;wBACjC,MAAM;oBACR,KAAK,GAAG,CAAC,CAAC;wBACR,IAAI,IAAI,CAAC,YAAY;4BAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC;wBAC/C,MAAM;qBACP;iBACF;aACF;QACH,CAAC;QACD,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC1D,CAAC;IACD,eAAe;QACb,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IAE1C,CAAC;IAED,kBAAkB;QAEhB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IACD,WAAW,CAAC,MAA6B,EAAE,KAAM;QAC/C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aACjJ,IAAI,CAAC,GAAG,EAAE;YACT,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,gCAAgC;gBACvG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,UAAU,CAAC;;gBAE3C,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACjB,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IACD,sBAAsB,CAAC,IAAI;QACzB,IAAI,IAAI,EAAE;YAGR,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,aAAa;gBAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC;iBACjE;gBACH,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,CAAC,gCAAgC;oBACvG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;;oBAE5B,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;aACxC;SAEF;;YAEC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAEnC,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2CAA2C,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aACjN,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,EAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACjH,CAAC;IACD,oBAAoB,CAAC,OAA8B,EAAE,KAAK;QACxD,IAAI,CAAC,KAAK;YAAE,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;QACjC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,UAAU,CAAC,EAAE,EAAE,IAAI;QACjB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC7D,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;YACrB,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC;YAC1C,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;YACnC,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC;SAClD;QACD,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IAMD,iBAAiB,CAAC,MAA6B;QAC7C,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACL,CAAC;IACD,cAAc;QACZ,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,EAAE;YAC7E,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;YAClE,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;SACrC;aAAM;YAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kCAAkC,CAAC,EAAE,aAAa,CAAC;SAAE;IAChI,CAAC;IACD,oBAAoB,KAAK,IAAI,CAAC,sBAAsB,GAAG,KAAK,EAAC,CAAC;IAC9D,6BAA6B;IAC7B,uBAAuB,CAAC,KAAK;QAC3B,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,CAAC;SACpC;IACH,CAAC;IAGD,SAAS,CAAC,KAAK;QACb,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;IAC/D,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;SAChC;IACH,CAAC;IAED,UAAU,CAAC,SAAY,EAAE,KAAM;QAC7B,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,EAAE;YAC5D,IAAI,CAAC,WAAW,CAAC,YAAY,CAC3B,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,EACtC,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CACvD,CAAC,IAAI,CAAC,GAAG,EAAE;gBACV,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAE,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBAC3E,IAAI,YAAY,GAAU,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC3D,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;wBACpC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACxC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAC7B,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,+BAA+B,CAAC,EAAE,EAAE,eAAe,CAC3L;4BACD,IAAI,KAAK;gCAAE,IAAI,CAAC,WAAW,EAAE;;gCACxB,IAAI,CAAC,MAAM,EAAE;wBACpB,CAAC,CAAC;oBACJ,CAAC,CAAC;gBACJ,CAAC,CAAC;YACJ,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;SACd;;YACI,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6BAA6B,CAAC,EAAE,aAAa,CAAC;IACrH,CAAC;IACD,cAAc,CAAC,SAAW;QACxB,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,4BAA4B,EAAE,CAAC;IAC/I,CAAC;IAGA;;;;MAIE;IACH,UAAU;QACR,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;YACtC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,uBAAuB,CAAC;YAC1E,IAAI,OAAO,IAAI,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM;gBAAE,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;;gBACpN,OAAO,CAAC,IAAI,CAAC;QACpB,CAAC,CAAC;IACJ,CAAC;IACD,WAAW;QACT,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YACjC,IAAI,OAAO;gBACT,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAG,cAAc,EAAE,IAAI,CAAC,cAAc,GAAE,EAAE,KAAK,EAAE,KAAK,EAAE,eAAe,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;oBAChN,KAAK,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACjD,CAAC,CAAC;QACN,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CACT,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,qCAAqC,CAAC,EAAE,IAAI,CAAC;aACvJ,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAC7B;IACH,CAAC;IACD;;;;OAIG;IACK,eAAe,CAAC,IAAyG;QAC/H,QAAQ,IAAI,EAAE;YACZ,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,mBAAmB,CAAC,CAAC,OAAO,CAAC,2IAAwB,CAAC;YAC3D,KAAK,eAAe,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;YAClD,KAAK,eAAe,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;YAClD,OAAO,CAAC,CAAC,OAAO,CAAC,0HAAmB,CAAC;SACtC;IACH,CAAC;IAMD;;OAEG;IACH,QAAQ,CAAC,MAAqB;QAC5B,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,GAAG,eAAe,EAAE;YAClD,kDAAkD;YAClD,IAAI,MAAM,CAAC,GAAG,IAAI,OAAO,EAAE;gBACzB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;oBACtC,IAAI,CAAC,IAAI,OAAO,EAAE;wBAChB,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAChD,KAAK,GAAG,CAAC,CACV,CAAC,WAAW,EAAE,CAAC;wBAChB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBACrC;gBACH,CAAC,CAAC,CAAC;gBACH,iDAAiD;gBACjD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3C,UAAU,CAAC,GAAG,EAAE;oBACd,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,+BAA+B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACpF,IAAI,aAAa,EAAE;wBACjB,IAAI,CAAC,sBAAsB,iCAAM,aAAa,GAAK,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC,EAAG,CAAC;qBACnI;;wBACI,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;oBAC/F,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;gBAC1B,CAAC,EAAE,GAAG,CAAC,CAAC;aAET;iBAAM;gBACL,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aACrC;YACD,IAAI;SACL;IACH,CAAC;IAUD,YAAY,CAAC,IAAI,EAAE,GAAG;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;QAC5C,OAAO,GAAG,CAAC,UAAU;IACvB,CAAC;IACD,SAAS,CAAC,KAAK;QACb,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,YAAY,CAAC,CAAC;IAC/H,CAAC;IACD,kBAAkB,CAAC,IAAI;QACrB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;IAC7C,CAAC;IAED,SAAS,CAAC,CAAC;QACT,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU;IAC1F,CAAC;IAED,eAAe;QAEb,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU;YAAE,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;IACtC,CAAC;IACD;;;WAGO;IACP,cAAc,CAAC,KAAK,EAAE,KAAK;QACzB,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACpI,CAAC;IAGD,qBAAqB;QACnB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe;IAC7C,CAAC;IAED,UAAU;QACR,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,sDAAS,CAAC;YAC9B,QAAQ,EAAE,IAAI,wDAAW,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAC7G,QAAQ,EAAE,IAAI,wDAAW,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAE,CAAC,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAChH,UAAU,EAAE,IAAI,wDAAW,CAAC,EAAE,EAAE,+DAAkB,CAAC,CAAC,gEAAmB,CAAC,CAAC,CAAC;YAC1E,MAAM,EAAE,IAAI,wDAAW,CAAC,KAAK,CAAC;YAC9B,OAAO,EAAE,IAAI,wDAAW,CAAC,EAAE,CAAC;SAC7B,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACxC,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACnE,CAAC,CAAC;IACJ,CAAC;IAGD,YAAY;QACV,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,+BAA+B,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACrG,IAAI,aAAa,EAAE;YACjB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC5B;aACI;YACH,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC5B;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC1E,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAEhC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YACzE,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE;gBACjC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;qBAClF,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACjB,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG;wBAC/D,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;wBAE9D,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,GAAG;wBACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;oBAC7C,CAAC,EAAE,GAAG,CAAC,CAAC;gBACV,CAAC,EAAE,KAAK,CAAC,EAAE;gBAEX,CAAC,CAAC;aACL;iBACI;gBACH,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;qBAC/E,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;oBACjB,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG;wBAC/D,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;wBAE9D,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,GAAG;wBACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI;oBAC7C,CAAC,EAAE,GAAG,CAAC,CAAC;gBAEV,CAAC,EAAE,KAAK,CAAC,EAAE;gBAEX,CAAC,CAAC;aACL;SACF;aACI;YACH,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YAClE,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;SACtG;IACH,CAAC;IAID,UAAU,CAAC,IAAI;QACb,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;QAChH,IAAI,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC;QAClE,IAAI,CAAC,gBAAgB,GAAG,OAAO;QAC/B,IAAI,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,qBAAqB,CAAC;QAC5F,IAAI,gBAAgB,EAAE;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,IAAI,GAAG;gBACT,WAAW,kBACT,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,IAC7B,QAAQ,CACZ;gBACD,OAAO,EAAE,gBAAgB;gBACzB,GAAG,EAAE,IAAI,CAAC,gBAAgB,CAAC,iBAAiB;gBAC5C,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,gBAAgB;aAC/C;YAED,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;SACV;aACI;YACH,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yCAAyC,CAAC,CAAC;SACzH;IACH,CAAC;IAGD,YAAY;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ;IAC3C,CAAC;IAED,mBAAmB,CAAC,EAAU,EAAE,SAAmB;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAC/E,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;YACf,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,WAAW,EAAE;SACnC;IACH,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,IAAY,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzG,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ;QAClC,IAAI,CAAC,WAAW,EAAE;IAEpB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;IAE/D,CAAC;IACD,kCAAkC;IAC3B,gBAAgB,CAAC,KAAU;QAChC,IAAI,KAAK,CAAC,eAAe,CAAC,EAAE;YAC1B,IAAI,KAAK,CAAC,UAAU,EAAE;gBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;gBACrJ,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;iBACI;gBACH,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC3I,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;SACF;aACI;YACH,IAAI,KAAK,CAAC,UAAU,EAAE;gBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;gBACrJ,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;iBACI;gBACH,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC9H,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACf,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,GAAG,UAAU;wBAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,IAAI,CAAC,WAAW,EAAE;iBACnB;qBAAM;oBACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;iBAC3B;aACF;SACF;IAGH,CAAC;IAED,cAAc,CAAC,KAAK;QAClB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;YAC1B,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,GAAG;YACrB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpC,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,KAAK,CAAC,YAAY;YACzB,YAAY,EAAE,KAAK,CAAC,YAAY;YAChC,aAAa,EAAE,KAAK,CAAC,aAAa;YAClC,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,aAAa,EAAE,KAAK,CAAC,aAAa;SACnC,CAAC;QAEF,IAAI,CAAC,WAAW,EAAE;IACpB,CAAC;IACD,kCAAkC;IAC3B,yBAAyB,CAAC,KAAU;QACzC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;YACvB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,GAAG;YACrB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpC,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,KAAK,CAAC,YAAY;YACzB,YAAY,EAAE,KAAK,CAAC,YAAY;YAChC,aAAa,EAAE,KAAK,CAAC,aAAa;YAClC,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,aAAa,EAAE,KAAK,CAAC,aAAa;SACnC,CAAC;QAEF,IAAI,CAAC,WAAW,EAAE;IAEpB,CAAC;IACD,wCAAwC;IACjC,sBAAsB,CAAC,SAAY;QACxC,IAAI,SAAS;YAAE,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,SAAS,CAAC;QACnD,OAAO,IAAI,CAAC,OAAO;IACrB,CAAC;IACD,iDAAiD;IAC1C,4BAA4B;QACjC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACpC,IAAI,MAAM,GAA0B;gBAClC,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAClC,YAAY,EAAE,IAAI,CAAC,YAAY;aAChC;YACD,IAAI,IAAI,CAAC,eAAe,CAAC;gBAAE,MAAM,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC,aAAa;YACvE,IAAI,IAAI,CAAC,eAAe,CAAC;gBAAE,MAAM,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC,aAAa;YAEvE,OAAO,MAAM;QACf,CAAC,CAAC;IACJ,CAAC;;0EAnjBU,aAAa;4GAAb,aAAa;kJAAb,oBAAgB;;QCrB7B,0EAA4D;QAAnB,mIAAS,YAAQ,IAAC;QACvD,mEAA+C;QAAA,wDAA0B;;QAAA,qEAAG;QAAC,wDAAoC;;QAAA,6DAAI;QACzH,6DAAM;QAEN,6EAAW;QACP,0EAAmB;QACf,0EAAwB;QACpB,2EAAsD;QAClD,2EAAsC;QAClC,sEAAG;QAAA,yDAAgC;;QAAA,6DAAI;QAC3C,6DAAM;QACN,2EAAkD;QAC9C,wEAAK;QACD,8EACsC;QAAlC,uIAAS,2BAAuB,IAAC;QACjC,oEAAiD;QACjD,yDACJ;;QAAA,6DAAS;QACb,6DAAM;QAEV,6DAAM;QAEN,4GAEM;QACV,6DAAM;QACN,4EAAoD;QAChD,+GA6CM;QACV,6DAAM;QACV,6DAAM;QACN,4EAAyB;QACrB,4EAAoD;QAChD,4EAAwB;QACpB,4EAAoC;QAChC,sEAAG;QAAA,yDAA0B;;QAAA,6DAAI;QACjC,kFACgE;QAA5D,oLAA2B,mCAA+B,IAAC;QAAC,6DAAY;QAChF,6DAAM;QAEV,6DAAM;QACV,6DAAM;QAEN,4EAAsD;QAClD,sEAAG;QAAA,yDAAqC;;QAAA,6DAAI;QAC5C,4EAAwB;QACpB,wEAAK;QAAA,yDAA0B;;QAAA,6DAAM;QACrC,wEAAK;QAAA,yDAAwC;QAAA,6DAAM;QACvD,6DAAM;QAWN,6GAaM;QACN,4EAA0D;QACtD,wEAAK;QAAA,yDAAuB;;QAAA,6DAAM;QAClC,wEAAK;QAAA,yDAA8C;QAAA,6DAAM;QAC7D,6DAAM;QAEN,6GAIM;QACV,6DAAM;QACN,4EAAuC;QACnC,+EACmE;QAA/D,uIAAS,eAAW,CAAC,EAAC,IAAI,CAAC,IAAC;QAC5B,yDACJ;;QAAA,6DAAS;QACT,+EAC0D;QAAtD,uIAAS,eAAW,CAAC,EAAC,KAAK,CAAC,IAAC;QAC7B,yDAAyB;;QAAA,6DAAS;QAC1C,6DAAM;QACV,6DAAM;QACV,6DAAM;QACV,6DAAY;QAGZ,kGAC8D;QAA1D,kMAA0B,kCAA8B,IAAC;QAC7D,6DAA4B;QAG5B,uHAoBW;QAEX,iFACsH;QADrE,0MAAsC,0FACvB,2BAAuB,IADA,kFACY,qBAAiB,IAD7B;;QAEnF,gIAgCe;QACf,4MAgBc;QAClB,6DAAW;QAGX,uHAmEW;QACX,8EAA0D;QACtD,iJACwB;QACxB,iJACwB;QACxB,qJAC0B;QAC1B,mJACyB;QACzB,mJACyB;QAC7B,sEAAe;;;QA9SoC,2DAA0B;QAA1B,uJAA0B;QAAI,2DAAoC;QAApC,mKAAoC;QAMnE,2DAAe;QAAf,yEAAe;QAE1C,2DAAgC;QAAhC,sJAAgC;QAO3B,2DACJ;QADI,8JACJ;QAKF,2DAA4B;QAA5B,6FAA4B;QAKe,2DAAkB;QAAlB,wFAAkB;QAoDxD,2DAA0B;QAA1B,gJAA0B;QAClB,2DAAmC;QAAnC,iGAAmC;QAQnD,2DAAqC;QAArC,2JAAqC;QAE/B,2DAA0B;QAA1B,gJAA0B;QAC1B,2DAAwC;QAAxC,8GAAwC;QAYQ,2DAAyB;QAAzB,0FAAyB;QAezE,2DAAuB;QAAvB,6IAAuB;QACvB,2DAA8C;QAA9C,oHAA8C;QAGG,2DAA0B;QAA1B,2FAA0B;QAO5E,2DAAoD;QAApD,sHAAoD;QAExD,2DACJ;QADI,oKACJ;QACQ,2DAAoC;QAApC,iGAAoC;QAExC,2DAAyB;QAAzB,2JAAyB;QAOlB,2DAAuC;QAAvC,qGAAuC;QAKjB,2DAA4B;QAA5B,6FAA4B;QAuBzE,2DAA6C;QAA7C,wKAA6C;QADvC,0EAAsC;QAuDE,2DAAwB;QAAxB,yFAAwB;QAoE5D,2DAA2C;QAA3C,yGAA2C;QACN,2DAAe;QAAf,4EAAe;QAEf,2DAAe;QAAf,4EAAe;QAEb,2DAAe;QAAf,4EAAe;QAEhB,2DAAe;QAAf,4EAAe;QAEf,2DAAe;QAAf,4EAAe;;;;;;;;;;;;;;;;;;;;ACtS5D,MAAM,wBAAwB;;gGAAxB,wBAAwB;sHAAxB,wBAAwB;QCPrC,4EAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCmC;AAMX;;;;;;;;;;;;;;;;;;;;;;IC0C7B,yEAAmF;IAAA,uDAAyB;;IAAA,4DAAK;;IAA9B,0DAAyB;IAAzB,4IAAyB;;;IAC5G,yEAAkF;IAAA,uDAA4B;;IAAA,4DAAK;;IAAjC,0DAA4B;IAA5B,+IAA4B;;;IAYlG,0EACmE;IAC/D,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAAyE;IACrE,2JAGM;IACV,qEAAe;;;IAHN,0DAA4D;IAA5D,gIAA4D;;;IASjE,0EAC+D;IAC3D,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAA0E;IACtE,2JAGM;IACV,qEAAe;;;;IAHN,0DAAwD;IAAxD,4HAAwD;;;IAS7D,0EAAkF;IAC9E,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAF9D,wEAAsE;IAClE,4JAEM;IACV,qEAAe;;;;IAHiB,0DAAoD;IAApD,wHAAoD;;;;IAzB5F,yEAAoF;IAChF,yEAAiD;IAAA,uDAAQ;IAAA,4DAAK;IAC9D,yEAAmD;IAC/C,4EAAyE;IAA/B,uVAA4B;IAAtE,4DAAyE;IACzE,8JAKe;IACnB,4DAAK;IACL,yEAAmD;IAC/C,4EACqC;IAD9B,6UAAmB;IAA1B,4DACqC;IACrC,8JAKe;IACnB,4DAAK;IACL,yEAAmD;IAC/C,6EACiC;IAD1B,8UAAmB;IAA1B,4DACiC;IACjC,gKAIe;IACnB,4DAAK;IACT,4DAAK;;;;;IA9B4D,+EAAkB;IAC9B,0DAAQ;IAAR,0EAAQ;IAGhB,0DAAkC;IAAlC,4GAAkC;IAUlC,0DAAmC;IAAnC,6GAAmC;IAUnC,0DAA+B;IAA/B,yGAA+B;;;;IAzBhF,wEAA6E;IACzE,sIA8BK;IAET,qEAAe;;;IAhCU,0DAA6B;IAA7B,8KAA6B;;;IAuCtC,0EACsC;IAClC,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAAyE;IACrE,2JAGM;IACV,qEAAe;;;IAHN,0DAA+B;IAA/B,+FAA+B;;;IAQpC,0EACsE;IAClE,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAA4E;IACxE,gKAGM;IACV,qEAAe;;;IAHN,0DAA+D;IAA/D,mIAA+D;;;;IAJ5E,yEAAmF;IAC/E,4EAAgF;IAAnC,iWAAgC;IAA7E,4DAAgF;IAChF,mKAKe;IACnB,4DAAK;;;IANoC,0DAAqC;IAArC,+GAAqC;;;IAqBtE,0EAC+D;IAC3D,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAA0E;IACtE,2JAGM;IACV,qEAAe;;;;IAHN,0DAAwD;IAAxD,4HAAwD;;;IAS7D,0EAAkF;IAC9E,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAF9D,wEAAsE;IAClE,4JAEM;IACV,qEAAe;;;;IAHiB,0DAAoD;IAApD,wHAAoD;;;;IA5C5F,yEAAoF;IAChF,yEAAiD;IAAA,uDAAQ;IAAA,4DAAK;IAC9D,yEAAmD;IAC/C,4EAA8E;IAApC,4VAAgC;IAA1E,4DAA8E;IAC9E,8JAKe;IACnB,4DAAK;IACL,0IAQK;IAWL,yEAAmD;IAC/C,4EACqC;IAD9B,6UAAmB;IAA1B,4DACqC;IACrC,8JAKe;IACnB,4DAAK;IACL,0EAAmD;IAC/C,6EACiC;IAD1B,8UAAmB;IAA1B,4DACiC;IACjC,gKAIe;IACnB,4DAAK;IACT,4DAAK;;;;;IAjD4D,+EAAkB;IAC9B,0DAAQ;IAAR,0EAAQ;IAGhB,0DAAkC;IAAlC,4GAAkC;IAOvB,0DAA6B;IAA7B,iGAA6B;IAsBxC,0DAAmC;IAAnC,6GAAmC;IAUnC,0DAA+B;IAA/B,yGAA+B;;;IA5ChF,wEAA4E;IACxE,sIAiDK;IAET,qEAAe;;;IAnDU,0DAA6B;IAA7B,8KAA6B;;;IA0DtC,0EACsC;IAClC,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAAyE;IACrE,2JAGM;IACV,qEAAe;;;IAHN,0DAA+B;IAA/B,+FAA+B;;;IAkBpC,0EAC4E;IACxE,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAA+E;IAC3E,gKAGM;IACV,qEAAe;;;IAHN,0DAAqE;IAArE,yIAAqE;;;;IALlF,yEAAkF;IAE9E,4EAAsF;IAApC,kWAAiC;IAAnF,4DAAsF;IACtF,mKAKe;IACnB,4DAAK;;;IANoC,0DAAwC;IAAxC,kHAAwC;;;IAWzE,0EAC+D;IAC3D,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAH9D,wEAA0E;IACtE,2JAGM;IACV,qEAAe;;;;IAHN,0DAAwD;IAAxD,4HAAwD;;;IAS7D,0EAAkF;IAC9E,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,uFAAwB;;;IAF9D,wEAAsE;IAClE,4JAEM;IACV,qEAAe;;;;IAHiB,0DAAoD;IAApD,wHAAoD;;;;IA5C5F,yEAAoF;IAChF,yEAAiD;IAAA,uDAAQ;IAAA,4DAAK;IAC9D,yEAAmD;IAC/C,4EAA+E;IAArC,6VAAiC;IAA3E,4DAA+E;IAC/E,8JAKe;IACnB,4DAAK;IAUL,0IASK;IACL,yEAAmD;IAC/C,4EACqC;IAD9B,6UAAmB;IAA1B,4DACqC;IACrC,8JAKe;IACnB,4DAAK;IACL,0EAAmD;IAC/C,6EACiC;IAD1B,8UAAmB;IAA1B,4DACiC;IACjC,gKAIe;IACnB,4DAAK;IACT,4DAAK;;;;;IAjD4D,+EAAkB;IAC9B,0DAAQ;IAAR,0EAAQ;IAGhB,0DAAkC;IAAlC,4GAAkC;IAgBvB,0DAA4B;IAA5B,gGAA4B;IAavC,0DAAmC;IAAnC,6GAAmC;IAUnC,0DAA+B;IAA/B,yGAA+B;;;IA5ChF,wEAA4E;IACxE,sIAiDK;IAET,qEAAe;;;IAnDU,0DAA6B;IAA7B,8KAA6B;;;IA0DtC,0EACsC;IAClC,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,wFAAwB;;;IAH9D,wEAAyE;IACrE,2JAGM;IACV,qEAAe;;;IAHN,0DAA+B;IAA/B,+FAA+B;;;IAQpC,0EACyC;IACrC,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,wFAAwB;;;IAH9D,wEAA4E;IACxE,gKAGM;IACV,qEAAe;;;IAHN,0DAAkC;IAAlC,kGAAkC;;;;IAJ/C,yEAAmF;IAC/E,4EAAoF;IAAvC,wWAAoC;IAAjF,4DAAoF;IACpF,mKAKe;IACnB,4DAAK;;;IANoC,0DAAqC;IAArC,+GAAqC;;;IAWtE,0EAC4E;IACxE,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,wFAAwB;;;IAH9D,wEAA+E;IAC3E,gKAGM;IACV,qEAAe;;;IAHN,0DAAqE;IAArE,yIAAqE;;;;IALlF,yEAAkF;IAC9E,4EAAyF;IAAvC,wWAAoC;IAAtF,4DAAyF;IAEzF,mKAKe;IACnB,4DAAK;;;IANoC,0DAAwC;IAAxC,kHAAwC;;;IAWzE,0EAC+D;IAC3D,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,wFAAwB;;;IAH9D,wEAA0E;IACtE,4JAGM;IACV,qEAAe;;;;IAHN,0DAAwD;IAAxD,6HAAwD;;;IAS7D,0EAAkF;IAC9E,+EAA8B;IAAA,uDAAwB;IAAA,4DAAW;IACrE,4DAAM;;;IAD4B,0DAAwB;IAAxB,wFAAwB;;;IAF9D,wEAAsE;IAClE,4JAEM;IACV,qEAAe;;;;IAHiB,0DAAoD;IAApD,yHAAoD;;;;IA5C5F,yEAAoF;IAChF,yEAAiD;IAAA,uDAAQ;IAAA,4DAAK;IAC9D,yEAAmD;IAC/C,4EAAkF;IAAxC,mWAAoC;IAA9E,4DAAkF;IAClF,8JAKe;IACnB,4DAAK;IACL,0IAQK;IACL,0IASK;IACL,yEAAmD;IAC/C,4EACqC;IAD9B,gVAAmB;IAA1B,4DACqC;IACrC,gKAKe;IACnB,4DAAK;IACL,0EAAmD;IAC/C,6EACiC;IAD1B,iVAAmB;IAA1B,4DACiC;IACjC,gKAIe;IACnB,4DAAK;IACT,4DAAK;;;;;IAjD4D,+EAAkB;IAC9B,0DAAQ;IAAR,0EAAQ;IAGhB,0DAAkC;IAAlC,4GAAkC;IAOvB,0DAA6B;IAA7B,iGAA6B;IAS7B,0DAA4B;IAA5B,gGAA4B;IAavC,0DAAmC;IAAnC,6GAAmC;IAUnC,0DAA+B;IAA/B,yGAA+B;;;IA5ChF,wEAA2E;IACvE,sIAiDK;IAET,qEAAe;;;IAnDU,0DAA6B;IAA7B,8KAA6B;;;IAgElD,2EACY;;;IAD8B,6FAAsB;IAAC,8FAAuB;;;IAmBxF,2EAEY;;;;IAF4B,6FAAsB;IAC1D,qIAAmD;;;;IAH3D,gFACiB;IADiB,wWAAoB;IAElD,gJAEY;IAChB,4DAAY;;;IALsB,kFAAoB;IAEtB,0DAAU;IAAV,mFAAU;;;IAI1C,2EAAgD;IAAA,gEAAK;IAAA,4DAAO;;;AD7Q7E,MAAM,0BAA0B;IAiBrC,YACU,MAAc,EACd,WAAwB,EACxB,eAAgC,EAChC,YAA0B,EAC3B,WAAwB,EACvB,MAAc,EACd,QAAkB;QANlB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,iBAAY,GAAZ,YAAY,CAAc;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACvB,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAU;QAvB5B,cAAS,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE;QAE3C,YAAO,GAAU,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC5E,aAAQ,GAAQ,EAAE,CAAC;QACnB,aAAQ,GAAgB,EAAE,CAAC,CAAE,qBAAqB;QAClD,cAAS,GAAgB,EAAE,CAAC,CAAC,yBAAyB;QACtD,iBAAY,GAAU,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,2EAAc,CAAC;QACxE,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK;QAClE,aAAQ,GAAW,EAAE,CAAC;QAEtB,QAAG,GAAQ,kCAAkC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,OAAO;QACzG,YAAO,GAAQ,kCAAkC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yBAAyB,CAAC,GAAG,OAAO;QACvH,aAAQ,GAAQ,kCAAkC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yBAAyB,CAAC,GAAG,OAAO;QACxH,iBAAY,GAAQ,kCAAkC,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kCAAkC,CAAC,GAAG,OAAO;QACrI,4BAAuB,GAAG,KAAK,CAAC;QAChC,2BAAsB,GAAG,KAAK;QA8J9B,4CAA4C;QAC5C,WAAM,GAAY,KAAK,CAAC;QAkExB,wBAAmB,GAAG;YACpB,WAAW,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,iCAAiC,CAAC,EAAE,CAAC;YAC7F,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2CAA2C,CAAC,EAAE,CAAC;YAC1G,iBAAiB,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,+BAA+B,CAAC,EAAE,CAAC;YACjG,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE;gBAChG,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE,CAAC;YAC9E,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,sBAAsB,CAAC,EAAE;gBAChG,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,CAAC;SAClF,CAAC;QA/NA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC;QACxE,IAAI,CAAC,QAAQ,GAAG;YACd,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG;YACtC,SAAS,EAAE,CAAC;YACZ,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,CAAC;YACN,QAAQ,EAAE,CAAC;YACX,OAAO,EAAE,CAAC;YACV,KAAK,EAAE,CAAC;YACR,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG;YACnD,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAChG,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,gBAAgB;SAE9C;IACH,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC;IACjC,CAAC;IAED,WAAW;QACT,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IACD,qBAAqB;IACrB,QAAQ;QACN,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC;YACxF,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;aACxF;QACH,CAAC,CAAC;IACJ,CAAC;IACD,6BAA6B;IAC7B,uBAAuB,CAAC,KAAK;QAC3B,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,KAAK,CAAC;SACtC;IACH,CAAC;IAGD,SAAS,CAAC,KAAK;QACb,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;IAC1F,CAAC;IAID,SAAS;QACP,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;SACnC;IACH,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+CAA+C,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;IACtG,CAAC;IACD,eAAe;IACf,QAAQ;QACN,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QAC9C,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE;IACzC,CAAC;IACD,gBAAgB;IAChB,YAAY,CAAC,MAAM;QACjB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,EAAE;QAClB,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzC,eAAe;gBACf,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBAExG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAS,EAAE,EAAE;oBAGrE,sCAAsC;oBACtC,IAAI,CAAC,QAAQ,GAAG,EAAE;oBAClB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;oBAChC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAC3B,IAAI,IAAI,CAAC,MAAM,GAAG,GAAG,EAAE;wBACrB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;wBAC/B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,6CAA6C,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACnI,IAAI,CAAC,QAAQ,GAAG,EAAE;wBACpB,CAAC,CAAC;qBACH;yBAAM;wBAEL,aAAa;wBACb,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;4BACxB,IAAI,CAAC,QAAQ,GAAG,EAAE;4BAClB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;yBACjC;wBAED,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,EAAE;4BAG5K,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gCAC3B,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oCACrG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;oCAC9C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;iCACzI;gCACD,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;oCAC5B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;oCACvF,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oCAChC,IAAI,CAAC,gBAAgB,EAAE,CAAC;iCACzB;4BACH,CAAC,CAAC;yBACH;wBACD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,EAAE;4BAE1K,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gCAG3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gCAC9C,OAAO,CAAC,GAAG,CAAC,eAAe,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gCAG9C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;gCACxI,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;oCAE5B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;oCACvF,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oCAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE;wCAAE,IAAI,CAAC,mBAAmB,EAAE,CAAC;wCAAC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;qCAAE;oCAC9I,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE;wCAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC;wCAAC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;qCAAE;oCAC9I,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE;wCAAE,IAAI,CAAC,uBAAuB,EAAE,CAAC;wCAAC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;wCAAC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;qCAAE;iCAItL;4BACH,CAAC,CAAC;yBACH;qBAGF;gBACH,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBAIb,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBACjL,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;wBACnB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;wBAChC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAC7B,CAAC,CAAC;gBACJ,CAAC,CAAC;YACJ,CAAC,CAAC;SAEH;IACH,CAAC;IAGD,cAAc;QACZ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YACxB,IAAI,QAAQ,GAAU,EAAE,CAAC;YACzB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gBACpC,IAAI,GAAG,GAAW,IAAI,MAAM,CAAC;gBAC7B,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;gBACpE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC;oBAAE,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC;gBACzG,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC;gBACpF,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC;gBAC5E,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC;oBAAE,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC;gBACjH,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC;gBAClB,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;oBACrC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBACrH;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,mBAAmB;IACnB,kBAAkB;QAChB,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,KAAK,GAAG,mHAAmH;YAC/H,IAAI,KAAK,GAAG,gHAAgH;YAC5H,IAAI,OAAO,GAAQ,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC;YAC5D,IAAI,OAAO,IAAI,IAAI;gBAAE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;;gBAC1H,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;SAChH;aAAM;YACL,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,KAAK,EAAE;SACzD;IACH,CAAC;IAED,qBAAqB;QACnB,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,KAAK,GAAG,6HAA6H;YACzI,IAAI,KAAK,GAAG,uIAAuI;YACnJ,IAAI,OAAO,GAAQ,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC;YAC5D,IAAI,OAAO,IAAI,IAAI;gBAAE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;;gBAC1H,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;SAChH;aAAM;YACL,QAAQ,CAAC,cAAc,CAAC,2BAA2B,CAAC,CAAC,KAAK,EAAE;SAC7D;IACH,CAAC;IACD,sBAAsB;QACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,KAAK,GAAG,6HAA6H;YACzI,IAAI,KAAK,GAAG,wIAAwI;YACpJ,IAAI,OAAO,GAAQ,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC;YAC5D,IAAI,OAAO,IAAI,IAAI;gBAAE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;;gBAC1H,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;SAChH;aAAM;YACL,QAAQ,CAAC,cAAc,CAAC,4BAA4B,CAAC,CAAC,KAAK,EAAE;SAC9D;IACH,CAAC;IACD,yBAAyB;QACvB,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,KAAK,GAAG,sIAAsI;YAClJ,IAAI,KAAK,GAAG,yJAAyJ;YACrK,IAAI,OAAO,GAAQ,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC;YAC5D,IAAI,OAAO,IAAI,IAAI;gBAAE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;;gBAC1H,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,4EAA4E,CAAC;SAChH;aAAM;YACL,QAAQ,CAAC,cAAc,CAAC,gCAAgC,CAAC,CAAC,KAAK,EAAE;SAClE;IACH,CAAC;IAYD,QAAQ,CAAC,IAAI,EAAE,KAAK;QAClB,OAAO,IAAI,qDAAS,CAAC;YACnB,EAAE,EAAE,IAAI,uDAAW,CAAC,KAAK,GAAG,CAAC,CAAC;YAC9B,IAAI,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YACpE,OAAO,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/H,UAAU,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAChF,aAAa,EAAE,IAAI,uDAAW,CAAC,EAAE,CAAC;YAClC,WAAW,EAAE,IAAI,uDAAW,CAAC,KAAK,CAAC;YACnC,cAAc,EAAE,IAAI,uDAAW,CAAC,KAAK,CAAC;YACtC,iBAAiB,EAAE,IAAI,uDAAW,CAAC,KAAK,CAAC;YACzC,UAAU,EAAE,IAAI,uDAAW,CAAC,EAAE,CAAC;YAC/B,aAAa,EAAE,IAAI,uDAAW,CAAC,EAAE,CAAC;YAClC,YAAY,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,+DAAmB,EAAE,8DAAkB,CAAC,6CAA6C,CAAC,CAAC,CAAC;YAC9K,QAAQ,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,+DAAmB,EAAE,8DAAkB,CAAC,iBAAiB,CAAC,CAAC,CAAC;SAC3I,CAAC;IACJ,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,MAAM,GAAQ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;YAE5E,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAElD,CAAC,CAAC;IACJ,CAAC;IACD,mBAAmB;QACjB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,MAAM,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;YAGzG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAErD,CAAC,CAAC;IACJ,CAAC;IACD,oBAAoB;QAClB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,MAAM,GAAQ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;YAC7G,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC;IACJ,CAAC;IACD,uBAAuB;QACrB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,MAAM,GAAQ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;YAE1I,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAExD,CAAC,CAAC;IACJ,CAAC;IAED,4CAA4C;IAC5C,SAAS,CAAC,IAAI,EAAE,OAAa;QAC3B,IAAI,IAAI,IAAI,EAAE,EAAE;YACd,kBAAkB;YAClB,2BAA2B;YAC3B,IAAI,QAAQ,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC1G,uBAAuB;YACvB,IAAI,SAAS,GAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;YAExK,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC;SACtD;;YAAM,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IACD,4CAA4C;IAC5C,aAAa,CAAC,IAAI,EAAE,UAAU,EAAE,OAAa;;QAC3C,IAAI,IAAI,IAAI,EAAE,EAAE;YACd,kBAAkB;YAClB,2BAA2B;YAC3B,IAAI,QAAQ,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC/F,IAAI,gBAAgB,GAAG,QAAQ,CAAC,CAAC,CAAC,cAAQ,CAAC,IAAI,0CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;YACjI,uBAAuB;YACvB,IAAI,SAAS,GAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;YAEpL,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC;SACtG;;YAAM,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IACD,4CAA4C;IAC5C,YAAY,CAAC,IAAI,EAAE,OAAO,EAAE,OAAa;;QAIvC,IAAI,IAAI,IAAI,EAAE,EAAE;YACd,kBAAkB;YAClB,2BAA2B;YAC3B,IAAI,QAAQ,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAG1G,IAAI,UAAU,GAAQ,QAAQ,CAAC,CAAC,CAAC,cAAQ,CAAC,IAAI,0CAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAK9H,uBAAuB;YACvB,IAAI,SAAS,GAAQ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;YAIzO,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC;SAC1F;;YAAM,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IACD,4CAA4C;IAC5C,gBAAgB,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,OAAa;;QACvD,IAAI,IAAI,IAAI,EAAE,EAAE;YACd,kBAAkB;YAClB,2BAA2B;YAC3B,IAAI,QAAQ,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC/F,IAAI,UAAU,GAAQ,QAAQ,CAAC,CAAC,CAAC,cAAQ,CAAC,IAAI,0CAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC9H,IAAI,gBAAgB,GAAG,UAAU,CAAC,CAAC,CAAC,gBAAU,CAAC,IAAI,0CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;YACrI,uBAAuB;YACvB,IAAI,SAAS,GAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;YAGpL,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC;SAC1I;;YAAM,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAED,yCAAyC;IACzC,SAAS;QACP,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,IAAI,IAAI,EAAE;gBACzH,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5K,OAAO,KAAK,CAAC;aACd;YACD,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,IAAI,CAAC;SAChD;IACH,CAAC;IACD,yCAAyC;IACzC,aAAa;QACX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,iBAAiB,IAAI,IAAI,EAAE;gBAC9K,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5K,OAAO,KAAK,CAAC;aACd;YACD,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,IAAI,CAAC;SAChD;IACH,CAAC;IACD,yCAAyC;IACzC,YAAY;QACV,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,cAAc,IAAI,IAAI,EAAE;gBAC3K,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5K,OAAO,KAAK,CAAC;aACd;YACD,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,IAAI,CAAC;SAChD;IACH,CAAC;IACD,yCAAyC;IACzC,gBAAgB;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,cAAc,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,iBAAiB,IAAI,IAAI,EAAE;gBACjR,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5K,OAAO,KAAK,CAAC;aACd;YACD,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,IAAI,CAAC;SAChD;IACH,CAAC;IACD,wBAAwB;IACxB,iBAAiB;QACf,IAAI,IAAI,GAAQ;YACd,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG;YACtC,SAAS,EAAE,CAAC;YACZ,QAAQ,EAAE,CAAC;YACX,GAAG,EAAE,CAAC;YACN,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;YAClC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG;YACnD,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YACzB,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,gBAAgB;SAC9C;QACD,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,uBAAuB;YAC/D,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;gBACpB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC;aACjC;QACH,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChE,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;gBACvB,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC;aACrC;SACF;QACD,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,uBAAuB;YAC9D,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBACxB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC;aACjC;QACH,IAAI,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,uBAAuB;YAC7D,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAAE;gBAC3B,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC;aACrC;IACL,CAAC;IAED,qBAAqB,CAAC,IAAI;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK;QACzB,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2BAA2B,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACnM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzC,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;oBACxE,IAAI,IAAI,GAAG;wBACT,UAAU,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC;wBAC1C,KAAK,EAAE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,CAAC;wBACnD,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,CAAC;wBAClD,KAAK,EAAE,CAAC;wBACR,KAAK,EAAE,CAAC;qBACT;oBACD,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC;wBAAE,IAAI,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC;oBAChG,OAAO,IAAI;gBACb,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBACb,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,uDAAuD,CAAC,EAAE,eAAe,CAAC;oBAC1I,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,MAAM,EAAE;oBACf,CAAC,EAAE,GAAG,CAAC,CAAC;gBACV,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBACb,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;gBACpB,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACf,CAAC;IACD,yBAAyB,CAAC,IAAI;QAC5B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2BAA2B,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACnM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzC,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;oBACxE,IAAI,IAAI,GAAG;wBACT,UAAU,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC;wBAC1C,aAAa,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC;wBAChD,KAAK,EAAE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,CAAC;wBACnD,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,CAAC;wBAClD,KAAK,EAAE,CAAC;wBACR,KAAK,EAAE,CAAC;qBACT;oBACD,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC;wBAAE,IAAI,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC;oBAChG,OAAO,IAAI;gBACb,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBACb,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,uDAAuD,CAAC,EAAE,eAAe,CAAC;oBAC1I,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,MAAM,EAAE;oBACf,CAAC,EAAE,GAAG,CAAC,CAAC;gBACV,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBACb,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;gBACpB,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACf,CAAC;;oGAjfU,0BAA0B;wHAA1B,0BAA0B;QCfvC,yEAA4D;QAAnB,+IAAS,YAAQ,IAAC;QACvD,kEAA+C;QAAA,uDACnD;;QAAA,4DAAM;QAEN,4EAAW;QACP,yEAAmB;QACf,yEAAwB;QACpB,yEAAsD;QAClD,yEAAsC;QAClC,oEAAG;QAAA,wDAA8C;;QAAA,4DAAI;QACzD,4DAAM;QACN,0EAAkD;QAC9C,uEAAK;QACD,6EACqB;QACjB,mEAAmD;QACnD,wDAAsC;;QAAA,4DAAS;QACnD,6FAAyC;QACrC,0EAAY;QACR,0EAAgD;QAA/B,+IAAS,wBAAoB,IAAC;QAAC,wDAChD;;QAAA,4DAAK;QACL,0EAAmD;QAAlC,+IAAS,2BAAuB,IAAC;QAAC,wDACnD;;QAAA,4DAAK;QACL,0EAAoD;QAAnC,+IAAS,4BAAwB,IAAC;QAAC,wDACpD;;QAAA,4DAAK;QACL,0EAAuD;QAAtC,+IAAS,+BAA2B,IAAC;QAAC,wDACvD;;QAAA,4DAAK;QACT,4DAAK;QACT,4DAAmB;QACvB,4DAAM;QACN,uEAAK;QACD,8EACqB;QADb,mJAAS,oBAAgB,IAAC;QAE9B,oEAAiD;QACjD,wDAA2B;;QAAA,4DAAS;QAC5C,4DAAM;QACN,uEAAK;QACD,8EAA4F;QAApF,mJAAS,cAAU,IAAC;QACxB,oEAAiD;QACjD,wDAA2B;;QAAA,4DAAS;QAC5C,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,2EAA0B;QACtB,yEAAO;QACH,yEAAO;QACH,0EAA0B;QACtB,0EAAiD;QAAA,6DAAC;QAAA,4DAAK;QACvD,0EAAmD;QAAA,wDAAsB;;QAAA,4DAAK;QAC9E,uHAAiH;QACjH,uHAAmH;QACnH,0EAAmD;QAAA,wDAA8B;;QAAA,4DAAK;QACtF,0EAAmD;QAAA,wDAA0B;;QAAA,4DAAK;QACtF,4DAAK;QACT,4DAAQ;QACR,6EAA2B;QACvB,2IAiCe;QACf,2IAoDe;QACf,2IAoDe;QACf,2IAoDe;QAEnB,4DAAQ;QACZ,4DAAQ;QACZ,4DAAM;QACV,4DAAM;QACN,2EAAyB;QACrB,2EAAoD;QAChD,2EAAwB;QACpB,2EAAoC;QAChC,qEAAG;QAAA,wDAA0B;;QAAA,4DAAI;QACjC,iFACmG;QAA/F,4KAAiB,mCAA+B,IAAC;;QACjD,qIACY;QAChB,4DAAY;QAGhB,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,2EAAsD;QAClD,qEAAG;QAAA,wDAAqC;;QAAA,4DAAI;QAC5C,2EAAwB;QACpB,uEAAK;QAAA,wDAA0B;;QAAA,4DAAM;QACrC,uEAAK;QAAA,wDAAsD;QAAA,4DAAM;QACrE,4DAAM;QACN,2EAAwD;QACpD,uEAAK;QAAA,wDAAqB;;QAAA,4DAAM;QAChC,uEAAK;QACD,qIAKY;QACZ,2HAA4D;QAChE,4DAAM;QACN,uEAAK;QACD,wDAA0E;QAAA,4DAAM;QACxF,4DAAM;QACN,2EAA0D;QACtD,qEAAG;QAAA,wDAAuB;;QAAA,4DAAI;QAC9B,2EAA+D;QAC3D,wDAAiD;QAAA,4DAAM;QAC/D,4DAAM;QAEN,uEAEM;QACN,4EAAyD;QACrD,iFAE8C;QAFZ,iMAAkB,4FAAS,eAAW,IAApB;;QAEN,4DAAW;QAC7D,4DAAM;QACV,4DAAM;QACN,4EAAuC;QACnC,+EAAsG;QAApF,oJAAS,uBAAmB,IAAC;QAC3C,yDACJ;;QAAA,4DAAS;QACb,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAY;QACZ,8EAEsC;QAAlC,2JAAU,wBAAoB,IAAC;QAFnC,4DAEsC;QACtC,qEAA+E;QAC/E,qEAAuF;QACvF,qEAAyF;QACzF,qEAAiG;;;QA7T9C,0DACnD;QADmD,oJACnD;QAKkD,0DAAe;QAAf,wEAAe;QAE1C,0DAA8C;QAA9C,kKAA8C;QAIzB,0DAAuB;QAAvB,+EAAuB;QAGvC,0DAAsC;QAAtC,oKAAsC;QAGc,0DAChD;QADgD,yKAChD;QACmD,0DACnD;QADmD,sKACnD;QACoD,0DACpD;QADoD,8LACpD;QACuD,0DACvD;QADuD,2LACvD;QAQJ,0DAA2B;QAA3B,2JAA2B;QAK3B,0DAA2B;QAA3B,2JAA2B;QASwB,0DAAsB;QAAtB,2IAAsB;QACpE,0DAA6B;QAA7B,6FAA6B;QAC7B,0DAA4B;QAA5B,4FAA4B;QACkB,0DAA8B;QAA9B,mJAA8B;QAC9B,0DAA0B;QAA1B,+IAA0B;QAIjE,0DAA0D;QAA1D,6HAA0D;QAkC1D,0DAAyD;QAAzD,4HAAyD;QAqDzD,0DAAyD;QAAzD,4HAAyD;QAqDzD,0DAAwD;QAAxD,2HAAwD;QA8DrE,0DAA0B;QAA1B,8IAA0B;QAClB,0DAAiD;QAAjD,0KAAiD;QAAC,6FAAgC;QAE7D,0DAAY;QAAZ,kFAAY;QASjD,0DAAqC;QAArC,yJAAqC;QAE/B,0DAA0B;QAA1B,8IAA0B;QAC1B,0DAAsD;QAAtD,2HAAsD;QAGtD,0DAAqB;QAArB,yIAAqB;QAEV,0DAAoB;QAApB,oFAAoB;QAMP,0DAAqB;QAArB,qFAAqB;QAG9C,0DAA0E;QAA1E,iKAA0E;QAG3E,0DAAuB;QAAvB,2IAAuB;QAEtB,0DAAiD;QAAjD,gIAAiD;QAQjD,0DAA6C;QAA7C,uKAA6C;QADf,6EAAkB;QAMR,0DAA6B;QAA7B,0FAA6B;QACzE,0DACJ;QADI,sJACJ;QAQqC,0DAAY;QAAZ,sIAAY;QACR,0DAAgB;QAAhB,0IAAgB;QACf,0DAAiB;QAAjB,2IAAiB;QACb,0DAAqB;QAArB,+IAAqB;;;;;;;;;;;;;;;;;;;;ACvT5E,MAAM,eAAe;;8EAAf,eAAe;6GAAf,eAAe;QCP5B,+EAAuC;;;;;;;;;;;;;;;;;;;;ACOhC,MAAM,yBAAyB;IAEpC,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;kGALU,yBAAyB;uHAAzB,yBAAyB;QCPtC,6EAAmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IEcnB,mEAA+B;;;IAG/B,2EACY;;;;IAD+B,kFAAsB;;;IAyB7E,0EAA8D;IAC1D,0EAAmD;IAC/C,oEAAG;IAAA,uDAAiC;;IAAA,4DAAI;IAC5C,4DAAM;IACV,4DAAM;;IAFK,0DAAiC;IAAjC,mJAAiC;;;;IAmBhC,yEAAuG;IAAlC,2YAAiC;IAClG,yEAAiC;IAAA,uDAAqB;IAAA,4DAAK;IAC3D,yEAAiC;IAAA,uDAAyB;IAAA,4DAAK;IAC/D,yEAAiC;IAAA,uDAAgB;IAAA,4DAAK;IACtD,yEAAsC;IAClC,uDACJ;IAAA,4DAAK;IACT,4DAAK;;;;IANgC,0DAAqB;IAArB,qFAAqB;IACrB,0DAAyB;IAAzB,yFAAyB;IACzB,0DAAgB;IAAhB,gFAAgB;IAE7C,0DACJ;IADI,mKACJ;;;;IAtBhB,0EAA0D;IACtD,0EAAwB;IAAA,uDAAsB;;IAAA,2EAA6C;IACnF,uDACJ;IAAA,4DAAO;IAAA,uDACX;;IAAA,4DAAM;IACN,mFACoD;;IAChD,yEAAO;IACH,sEAAI;IACA,0EAAiC;IAAA,qEAAG;IAAA,wDAA8B;;IAAA,4DAAI;IAAA,4DAAK;IAC3E,0EAAiC;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IACvE,0EAAiC;IAAA,qEAAG;IAAA,wDAAsB;;IAAA,4DAAI;IAAA,4DAAK;IACnE,0EAAkC;IAAA,qEAAG;IAAA,wDAAuB;;IAAA,4DAAI;IAAA,4DAAK;IACzE,4DAAK;IACT,4DAAQ;IACR,yEAAO;IACH,yHAOK;IACT,4DAAQ;IACZ,4DAAW;IACf,4DAAM;;;;IAzBsB,0DAAsB;IAAtB,0IAAsB;IACtC,0DACJ;IADI,qGACJ;IAAO,0DACX;IADW,uJACX;IAEI,0DAA8C;IAA9C,uKAA8C;IADxC,gKAA+B;IAIO,0DAA8B;IAA9B,kJAA8B;IAC9B,0DAA0B;IAA1B,8IAA0B;IAC1B,0DAAsB;IAAtB,0IAAsB;IACrB,0DAAuB;IAAvB,2IAAuB;IAIxC,0DAAkB;IAAlB,6EAAkB;;ADnDnD,MAAM,qBAAqB;IAQhC,YACU,OAAgB,EAChB,MAAc,EACd,YAA0B,EAC3B,WAAwB,EACvB,WAAwB,EACxB,MAAc,EACd,KAAwB;QANxB,YAAO,GAAP,OAAO,CAAS;QAChB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACvB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAmB;QAb3B,gBAAW,GAAW,EAAE;QACxB,gBAAW,GAA4B,EAAE;QAEhD,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK;QAClE,eAAU,GAAe,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,mBAAmB,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;QAwEpG,eAAU,GAAU,CAAC,CAAC;IA7D7B,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW;YAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU;SAC9C;aACI;YAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAAG;QAC9B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;IAClC,CAAC;IAGD;;;;OAIG;IACH,UAAU,CAAC,KAAa;QACtB,IAAI,KAAK,CAAC,MAAM,EAAE;YAChB,IAAI,GAAG,GAAW,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YAC1E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;SAClG;;YAAM,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IAC7C,CAAC;IAED;;;OAGG;IACH,UAAU,CAAC,UAAW;QACpB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChF,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;iBAC9H,IAAI,CAAC,CAAC,OAAgC,EAAE,EAAE;gBACzC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBAChC,uCAAY,IAAI,KAAE,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,IAAE;gBACxF,CAAC,CAAC;gBAEF,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,IAAI,UAAU;oBAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;;oBACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;YACxC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC;IACJ,CAAC;IAED;;;OAGG;IACH,QAAQ;QACN,IAAI,WAAW,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE;QAChF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iEAAiE,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,EAAE,CAAC;IACvH,CAAC;IAED;;;OAGG;IACH,UAAU,CAAC,EAAE;QACX,IAAI,WAAW,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE;QAChF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,sDAAsD,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,CAAC;IAChH,CAAC;IAID;;;OAGG;IACH,UAAU,CAAC,UAAiB;QAC1B,QAAQ,UAAU,EAAE;YAClB,KAAK,CAAC;gBAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;gBAAG,MAAM;YAC9H,KAAK,CAAC;gBAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;gBAAE,MAAM;SAC9H;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;IACnC,CAAC;IAED,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,gCAAgC,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uCAAuC,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE;YAChO,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,gCAAgC,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY;kBAC9I,QAAQ,CAAC,aAAa,CAAC,uCAAuC,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;SAC7J;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iCAAiC,CAAC,CAAC;IAC3D,CAAC;IACD;;;OAGG;IACH,qBAAqB;QACnB,IAAI,WAAW,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE;QAEhF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,mEAAmE,CAAC,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC;IACrH,CAAC;;0FA/GU,qBAAqB;mHAArB,qBAAqB;QCZlC,yEAA4D;QAAnB,0IAAS,YAAQ,IAAC;QACvD,kEAA+C;QAAA,uDACnD;;QAAA,4DAAM;QACN,+EAA8C;QAC1C,yEAAyD;QACrD,yEAAsD;QAClD,oEAAG;QAAA,uDAA+B;;QAAA,4DAAI;QAC1C,4DAAM;QACN,0EAAkD;QAC9C,qFAA8C;QAC1C,4EAC6E;QADtE,+LAAyB,2GAAkB,sBAAkB,IAApC;;QAAhC,4DAC6E;QACjF,4DAAiB;QACjB,+MAEc;QACd,gFAAsF;QAA3E,kMAAwB,+GAAkB,sBAAkB,IAApC;QAC/B,gIACY;QAChB,4DAAY;QAChB,4DAAM;QACN,2EAAiD;QAC7C,uEAAK;QACD,8EAAsF;QAAlC,8IAAS,2BAAuB,IAAC;QACjF,oEAAuD;QACvD,wDACJ;;QAAA,4DAAS;QACb,4DAAM;QACN,uEAAK;QACD,8EAA0F;QAArB,8IAAS,cAAU,IAAC;QACrF,2EAAyF;QACzF,wDACJ;;QAAA,4DAAS;QACb,4DAAM;QACV,4DAAM;QAOV,4DAAM;QACN,oHAIM;QACN,sHA0BM;QACV,4DAAY;;;QAzEuC,0DACnD;QADmD,oJACnD;QAIe,0DAA+B;QAA/B,kJAA+B;QAGlB,0DAA6B;QAA7B,yEAA6B;QAErC,0DAAsE;QAAtE,+LAAsE;QADnE,oFAAyB;QAMzB,0DAAwB;QAAxB,mFAAwB;QACH,0DAAa;QAAb,mFAAa;QAQrC,0DACJ;QADI,4JACJ;QAKI,0DACJ;QADI,qKACJ;QAUC,0DAAyB;QAAzB,yFAAyB;QAKhC,0DAAwB;QAAxB,wFAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CmD;AAEtC;AACmB;AACyB;AAC/B;AACL;AACQ;AAClB;AACqB;AACZ;AAEG;AACwC;AACE;AACL;;;AAC9F,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,2EAAqB;aACjC;YACD;gBACE,IAAI,EAAE,QAAQ;gBACd,SAAS,EAAE,qEAAe;aAC3B;YACD;gBACE,IAAI,EAAE,qBAAqB;gBAC3B,SAAS,EAAE,0GAA0B;aACtC;YACD;gBACE,IAAI,EAAE,mBAAmB;gBACzB,SAAS,EAAE,oGAAwB;aAEpC;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,SAAS,EAAE,uGAAyB;aACrC;SAEF;KACF;CACF;AAiBM,MAAM,kBAAkB;;oFAAlB,kBAAkB;+GAAlB,kBAAkB;mHAbpB;YACP,yDAAY;YACZ,mEAAqB,CAAC,MAAM,CAAC;YAC7B,yEAAgB;YAChB,wDAAW;YACX,wDAAW;YACX,iEAAe;YACf,oEAAe;YACf,gEAAmB;YACnB,6GAAe;YACf,kFAAc;SACf;mIAEU,kBAAkB,mBAdd,2EAAqB,EAAE,0GAA0B,EAAE,oGAAwB,EAAE,qEAAe,EAAE,uGAAyB,aAEpI,yDAAY,8DAEZ,yEAAgB;QAChB,wDAAW;QACX,wDAAW;QACX,iEAAe;QACf,oEAAe;QACf,gEAAmB;QACnB,6GAAe;QACf,kFAAc","sources":["./src/app/sales/components/bill-type/bill-type-9/add/add.component.ts","./src/app/sales/components/bill-type/bill-type-9/add/add.component.html","./src/app/sales/components/bill-type/bill-type-9/bill-type9.module.ts","./src/app/sales/components/bill-type/bill-type-9/detail/detail.component.ts","./src/app/sales/components/bill-type/bill-type-9/detail/detail.component.html","./src/app/sales/components/bill-type/bill-type-9/edit/edit.component.ts","./src/app/sales/components/bill-type/bill-type-9/edit/edit.component.html","./src/app/sales/menu/manage/invoices/opening-stock/add-opening-stock/add-opening-stock.component.ts","./src/app/sales/menu/manage/invoices/opening-stock/add-opening-stock/add-opening-stock.component.html","./src/app/sales/menu/manage/invoices/opening-stock/create-opening-data/create-opening-data.component.ts","./src/app/sales/menu/manage/invoices/opening-stock/create-opening-data/create-opening-data.component.html","./src/app/sales/menu/manage/invoices/opening-stock/detail/detail.component.ts","./src/app/sales/menu/manage/invoices/opening-stock/detail/detail.component.html","./src/app/sales/menu/manage/invoices/opening-stock/edit-opening-stock/edit-opening-stock.component.ts","./src/app/sales/menu/manage/invoices/opening-stock/edit-opening-stock/edit-opening-stock.component.html","./src/app/sales/menu/manage/invoices/opening-stock/opening-stock.component.ts","./src/app/sales/menu/manage/invoices/opening-stock/opening-stock.component.html","./src/app/sales/menu/manage/invoices/opening-stock/opening-stock.module.ts"],"sourcesContent":["import { Component, OnInit, HostListener, ChangeDetectorRef, ViewChild, ElementRef } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { PurchaseA4Component } from 'src/app/sales/components/print/purchase/purchase-a4/purchase-a4.component';\r\nimport { PurchaseA5Component } from 'src/app/sales/components/print/purchase/purchase-a5/purchase-a5.component';\r\nimport { PurchaseK80Col4Component } from 'src/app/sales/components/print/purchase/purchase-k80-col4/purchase-k80-col4.component';\r\nimport { PurchaseK80Col3Component } from 'src/app/sales/components/print/purchase/purchase-k80-col3/purchase-k80-col3.component';\r\nimport { PurchaseK57Col3Component } from 'src/app/sales/components/print/purchase/purchase-k57-col3/purchase-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhBillType9Add, VhBillType9DetailAdd } from '../bill-type9-interface';\r\n@Component({\r\n  selector: 'bill-type9-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n\r\n  invoice: VhBillType9Add = {\r\n    bill_type: 9,\r\n    id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n    id_employee: this.vhAuth.getUser()._id,\r\n    date: new Date(),\r\n    total: 0,\r\n    tax: 0,\r\n    fee: 0,\r\n    discount: 0,\r\n    payment: 0,\r\n    note: '',\r\n  }\r\n  invoice_detail: VhBillType9DetailAdd[] = []\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  employee: any = {};\r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private nzModalService: NzModalService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.invoice.date = this.vhAuth.getStore().registrationdate\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n    let tax = this.listTax.find(item => item.default);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n      this.invoice.tax = (tax['value']);\r\n    }\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_purchase')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n\r\n    // get dữ liệu in lô\r\n    this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      .then((response: any) => {\r\n        \r\n\r\n        this.listBarcodeLot = response.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n      })\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n\r\n  /**\r\n   * lắng nghe sk nhấn f1 f2 f3 f4 trên bàn phím\r\n   * @example \r\n   */\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n\r\n          case 112: this.payInvoice(9, false)\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(9, true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.checkPrinter = this.printer.enable;\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**\r\n   *  hàm xóa sp\r\n   * @param detail\r\n   * @example  this.deleteGoods(bill_detail_selected)\r\n   */\r\n  deleteGoods(detail: VhBillType9DetailAdd, index?) {\r\n    this.vhComponent.alertConfirm(\"\", \"\", `${this.languageService.translate(\"Delete\")} ${detail.name}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n      .then(() => {\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_purchase)\r\n          this.removeInvoiceDetail(detail.id_product)\r\n        else\r\n          this.invoice_detail.splice(index, 1);\r\n        this.setSubTotal();\r\n      }, () => { })\r\n  }\r\n  searchProductList: boolean = false;\r\n  /**\r\n * mở component chọn sp\r\n * @example this.openSearchProductList()\r\n */\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product-import)\r\n   * @param data sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(data) {\r\n    if (data) {\r\n      \r\n\r\n      if (data.manylot && !data.id_lotproduct) this.openModalChooseLot(data)\r\n      else {\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_purchase)\r\n          this.addInvoiceDetail(data);\r\n        else\r\n          this.addInvoiceDetailMutilLine(data);\r\n      }\r\n\r\n    }\r\n    else\r\n      this.searchProductList = false;\r\n\r\n  }\r\n  /**\r\n   * trở về trang danh sách hóa đơn\r\n   * @example this.goBack() \r\n   */\r\n  goBack() {\r\n    this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n      .then(() => { this.isExit = true; this.router.navigate([\"/sales/dashboard/manage/invoice/opening-stock\"], { state: this.dataRestore }) }, () => { })\r\n  }\r\n  /**\r\n   * bắt sk thay đổi số lượng sp trong bill\r\n   * @param product \r\n   * @param event : giá trị thay đổi\r\n   * @example this.checkQuantityProduct(bill_detail_selected, 1)\r\n   */\r\n  checkQuantityProduct(product: VhBillType9DetailAdd, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi đơn vị của bill_detail\r\n   * @param ev  ratio được chọn\r\n   * @param item\r\n   * @example  this.changeUnit(24, bill_detail_selected)\r\n   */\r\n  changeUnit(ev, item) {\r\n    let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n    if (unit) {\r\n      item.unit = unit.unit\r\n      item.price = parseFloat(unit.price_import)\r\n      item.ratio = parseFloat(unit.ratio)\r\n      item.price_origin = parseFloat(unit.price_import)\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhBillType9DetailAdd;\r\n  /**\r\n  * mở modal thay đổi giá bán sản phẩm trong bill\r\n  * @param detail \r\n  * @example this.openEditUnitPrice(bilL_detail_selected)\r\n  */\r\n  openEditUnitPrice(detail: VhBillType9DetailAdd) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút Ok modal giảm giá sp\r\n   * @example this.handleEditUnit()\r\n   */\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(2000, this.languageService.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  /**\r\n   * tắt modal giảm giá sp\r\n   * @example this.handleCancelEditUnit()\r\n   */\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  /**\r\n  * bắt sk thay đổi nv bán hàng\r\n  * @param event id_employee selected\r\n  */\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n\r\n  // -------change tax------\r\n  id_tax: string;\r\n  /**\r\n   * bắt sk thay đổi thuế và cập nhật lại trong bill local\r\n   * @param event id_tax selected\r\n   * @example this.changeTax(10)\r\n   */\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n  }\r\n\r\n\r\n  /**\r\n   * trờ về trang danh sách hóa đơn sau khi đã thanh toán xong\r\n   * @example this.handle()\r\n   */\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/dashboard/manage/invoice/opening-stock'], { state: this.dataRestore })\r\n  }\r\n  note: string;\r\n  /**\r\n  * bắt sk thay đổi note của bill\r\n  * @example this.edit_note()\r\n  */\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n  save_enable = true;\r\n  /**\r\n    * xử lý sk nhấn nút thanh toán hoặc lưu tạm\r\n    * @param bill_type \r\n    * @param print biến cờ để check in hay ko\r\n    * @example this.payInvoice(9)\r\n    */\r\n  payInvoice(bill_type: 9, print?) {\r\n    this.invoice.payment = this.invoice.total\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_payment\")) {\r\n      this.vhComponent.alertConfirm(\r\n        this.languageService.translate(\"Save\") + \"?\",\r\n        \"\", \"\", \"OK\", this.languageService.translate(\"Cancel\")\r\n      ).then(() => {\r\n        if (this.save_enable) {\r\n          this.save_enable = false;\r\n          this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n            var arrayProcess: any[] = [this.createOrUpdate(bill_type)];\r\n\r\n            // if (bill_type == 2)\r\n            //   this.updateProduct(this.invoice_detail.filter(item => item.price != item.price_origin), arrayProcess)\r\n\r\n            Promise.all(arrayProcess).then(bill => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${bill[0].bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                )\r\n                if (print) this.handlePrint()\r\n                else this.handle()\r\n              })\r\n            })\r\n          })\r\n        }\r\n      }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  /**\r\n   * tạo bill lên DB\r\n   * @param bill_type \r\n   * @returns \r\n   */\r\n  createOrUpdate(bill_type: 9) {\r\n    return this.vhQuerySales.createBill_Billdetail(this.getCreateUpdateInvoice(bill_type), this.getCreateUpdateInvoiceDetail())\r\n  }\r\n\r\n\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_purchase')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n  /**\r\n   * kiểm tra dữ liệu thông tin máy in và mở component in\r\n   * @example this.handlePrint()\r\n   */\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice,invoice_detail: this.invoice_detail, }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n    }, (err) =>\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.handle())\r\n    )\r\n  }\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (PurchaseK57Col3Component)\r\n      case 'print_size_k80_3c': return (PurchaseK80Col3Component)\r\n      case 'print_size_k80_4c': return (PurchaseK80Col4Component)\r\n      case 'print_size_a5': return (PurchaseA5Component)\r\n      case 'print_size_a4': return (PurchaseA4Component)\r\n      default: return (PurchaseA4Component)\r\n    }\r\n  }\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện nhận barcode\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === \"/sales/dashboard/manage/invoice/opening-stock/add-opening-stock\") {\r\n      // if (!this.showSearchBar && !this.showPayInfo) {\r\n      if (_event.key == \"Enter\") {\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        // this.scanBarcode(this.barcode_array.join(\"\"));\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n          \r\n\r\n          if (this.barcode) {\r\n            let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.barcode);\r\n            if (detailproduct) {\r\n              this.closeSearchProductList({ ...detailproduct, ...this.vhQuerySales.getUnit_byRatio(detailproduct.units, detailproduct.ratio) });\r\n            }\r\n            else {\r\n              this.quantity?.nativeElement.blur();\r\n              if (this.barcode.length > 3) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Not found\"))\r\n            }\r\n          } else\r\n            this.quantity?.nativeElement.blur();\r\n          this.barcode_array = [];\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  show_modal_add_lot = false;\r\n  formAddLot: FormGroup;\r\n  disabledAddLot = false;\r\n  list_search_lot = [];\r\n\r\n  /**\r\n   * trả về tên lô theo id_lot được chọn\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n  /**\r\n   * lọc danh sách lô của sp theo số lô (lot_number)\r\n   * @param value \r\n   */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n    this.show_modal_select_lots = true;\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi id_lotnumber của bill-detail\r\n   * @param e id_lotnumber thay đổi\r\n   * @example this.changeLot('DNIUHWIDCHBIQOHSDOIHW')\r\n   */\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    \r\n    this.tempDetail.lots = this.list_search_lot;\r\n    if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n    this.show_modal_select_lots = false;\r\n  }\r\n  /**\r\n     * trả về khoảng cách giữa 2 ngày \r\n     * vd : getNumberOfDay(15/02/2022, 10/02/2022) => return 5\r\n     * */\r\n  getNumberOfDay(date1, date2) {\r\n    return (date1.getTime() - date2.getTime()) / (24 * 3600 * 1000) > 0 ? (date1.getTime() - date2.getTime()) / (24 * 3600 * 1000) : 0\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  /**\r\n   * mở modal thêm lô sản phẩm\r\n   */\r\n  openAddLot() {\r\n    this.disabledAddLot = false;\r\n    this.show_modal_add_lot = true;\r\n    this.formAddLot = new FormGroup({\r\n      date_mfg: new FormControl(new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n      date_exp: new FormControl(new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n      lot_number: new FormControl('', Validators.compose([Validators.required])),\r\n      hidden: new FormControl(false),\r\n      barcode: new FormControl(''),\r\n    })\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      document.getElementById('lotNumberError').style.display = 'none';\r\n    })\r\n  }\r\n\r\n  exist_barcode = false\r\n  /**\r\n   * kiểm tra barcode ở form tạo có trùng hay ko\r\n   * @example this.checkBarcode()\r\n   */\r\n  checkBarcode() {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.formAddLot.value.barcode);\r\n    if (detailproduct) {\r\n      this.exist_barcode = true;\r\n      this.disabledAddLot = true;\r\n    }\r\n    else {\r\n      this.disabledAddLot = false;\r\n      this.exist_barcode = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal tạo lô sp, dùng các trường trong form để tạo lô lên DB\r\n   * @example this.handleAddLot()\r\n   */\r\n  handleAddLot() {\r\n    if (!this.fncService.checkExitsLotNumber(this.formAddLot.value.lot_number)) {\r\n      this.show_modal_add_lot = false;\r\n      \r\n      this.tempDetail.lots = this.tempDetail.lots.concat(this.formAddLot.value)\r\n      if (this.tempDetail.id_subproduct) {\r\n        this.vhQuerySales.addLotProduct(this.tempDetail.id_subproduct, this.formAddLot.value)\r\n          .then((lot: any) => {\r\n            setTimeout(() => {\r\n              this.tempDetail.lots[this.tempDetail.lots.length - 1]._id = lot\r\n              this.tempDetail.lot_number = this.formAddLot.value.lot_number;\r\n              \r\n              this.tempDetail.id_lotproduct = lot\r\n              this.list_search_lot = this.tempDetail.lots\r\n            }, 200);\r\n          }, error => {\r\n            \r\n          })\r\n      }\r\n      else {\r\n        this.vhQuerySales.addLotProduct(this.tempDetail.id_product, this.formAddLot.value)\r\n          .then((lot: any) => {\r\n            setTimeout(() => {\r\n              this.tempDetail.lots[this.tempDetail.lots.length - 1]._id = lot\r\n              this.tempDetail.lot_number = this.formAddLot.value.lot_number;\r\n              \r\n              this.tempDetail.id_lotproduct = lot\r\n              this.list_search_lot = this.tempDetail.lots\r\n            }, 200);\r\n\r\n          }, error => {\r\n            \r\n          })\r\n      }\r\n    }\r\n    else {\r\n      document.getElementById('lotNumberError').style.display = 'block';\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Số lô này đã tồn tại\"))\r\n    }\r\n  }\r\n  product_selected: any = {};\r\n  start_print = false;\r\n  data_print: any;\r\n  /**\r\n   * in tem lô\r\n   * @param item product_selected\r\n   * @example  this.printLabel(product_selected)\r\n   */\r\n  printLabel(item) {\r\n    let product = this.vhQuerySales.getlocalDetailProduct(item.id_subproduct ? item.id_subproduct : item.id_product)\r\n    let lot_data = product.lots.find(e => e._id == item.id_lotproduct)\r\n    this.product_selected = product\r\n    let barcode_selected = this.listBarcodeLot.find(e => e._id == product.id_design_barcode_lot)\r\n    if (barcode_selected) {\r\n      this.start_print = true;\r\n      let data = {\r\n        formProduct: {\r\n          name: this.product_selected.name,\r\n          ...lot_data\r\n        },\r\n        barcode: barcode_selected,\r\n        col: this.product_selected.number_column_lot,\r\n        number: this.product_selected.number_print_lot\r\n      }\r\n      \r\n      this.data_print = data\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 2000);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn chưa chọn mẫu tem cho sản phẩm này!\"))\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * trả về tổng tiền \r\n   * @returns number\r\n   * @example let total = this.getTotalATax()\r\n   */\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n\r\n  /**\r\n   * xóa 1 bill_detail trong local\r\n   * @param id id_bill_detail selected\r\n   * @param notSetSub \r\n   */\r\n  removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tính lại cộng tiền của bill khi có sự thay đổi (thêm xóa sửa bill_detail, đổi giá bán, khuyến mãi, phí ,thuế ,...)\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    this.subTotal = this.invoice_detail.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n    this.setTotal();\r\n  }\r\n\r\n  /**\r\n   * tính lại tổng tiền của bill để lưu trường total\r\n   * @example this.setTotal();\r\n   */\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal\r\n    this.setTaxValue()\r\n\r\n  }\r\n\r\n  /**\r\n   * tính giá trị thuế ra tiền\r\n   * @example this.setTaxValue()\r\n   */\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n\r\n  }\r\n  /**Thêm sản phẩm vô bill detail */\r\n  public addInvoiceDetail(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /**\r\n     * xử lý các trường của sp được chọn và thêm vào mảng local\r\n     * @param value \r\n     * @example  this.addBill_Detail(product_selected)\r\n     */\r\n  addBill_Detail(value) {\r\n    this.invoice_detail.unshift({\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      unit: value.unit,\r\n      units: value.units,\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      ptype: value.type,\r\n      price: value.price_import,\r\n      price_origin: value.price_import,\r\n      id_subproduct: value.id_subproduct,\r\n      lots: value.lots,\r\n      lot_number: value.lot_number,\r\n      id_lotproduct: value.id_lotproduct,\r\n    })\r\n\r\n    if (this.auto_active_quantity_input) {\r\n      setTimeout(() => {\r\n\r\n        this.quantity.nativeElement.focus();\r\n        this.quantity.nativeElement.select();\r\n      }, 0);\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n  /**Thêm sản phẩm vô bill detail */\r\n  public addInvoiceDetailMutilLine(value: any) {\r\n    this.invoice_detail.push({\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      unit: value.unit,\r\n      units: value.units,\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      ptype: value.type,\r\n      price: value.price_import,\r\n      price_origin: value.price_import,\r\n      id_subproduct: value.id_subproduct,\r\n      lots: value.lots,\r\n      lot_number: value.lot_number,\r\n      id_lotproduct: value.id_lotproduct,\r\n    })\r\n\r\n    if (this.auto_active_quantity_input) {\r\n      setTimeout(() => {\r\n\r\n        this.quantity.nativeElement.focus();\r\n        this.quantity.nativeElement.select();\r\n      }, 0);\r\n    }\r\n    this.setSubTotal()\r\n\r\n  }\r\n  auto_active_quantity_input: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').auto_active_quantity_input;\r\n  @ViewChild('quantity') quantity: ElementRef;\r\n  /** Lấy bill dùng để tạo cho database */\r\n  public getCreateUpdateInvoice(bill_type: 9) {\r\n    if (bill_type) this.invoice.bill_type = (bill_type)\r\n    return this.invoice\r\n  }\r\n  /** Lấy tất cả bill detail để tạo cho database */\r\n  public getCreateUpdateInvoiceDetail(): VhBillType9DetailAdd[] {\r\n    return this.invoice_detail.map(item => {\r\n      let detail: VhBillType9DetailAdd = {\r\n        id_product: item.id_product,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype,\r\n        ratio: item.ratio ? item.ratio : 1,\r\n        price_origin: item.price_origin\r\n      }\r\n      if (item['id_lotproduct']) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item['id_subproduct']) detail['id_subproduct'] = item.id_subproduct\r\n\r\n      return detail\r\n    })\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} |  <b> {{'Create opening stock' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Select product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n\r\n                    <div>\r\n                        <button class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail,index as i\">\r\n                    <div nz-row>\r\n                        <div (click)=\"deleteGoods(item,i)\" nz-col nzSpan=\"1\" class=\"center-col\">\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\" class=\"center-col\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{item.name}}</b> <br>\r\n                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                        (click)=\"openModalChooseLot(item)\">\r\n                                        {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                                        <i nz-icon nzType=\"printer\" nzTheme=\"outline\"  nz-tooltip nzTooltipTitle=\"{{'_Print batch label' | translate}}\" (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                                    </pre>\r\n\r\n                                </ng-container>\r\n                            </p>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"3\" style=\"align-self: center;\">\r\n                            <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                (ngModelChange)=\"changeUnit($event,item)\">\r\n                                <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option> -->\r\n                                <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\"\r\n                                    [nzValue]=\"i.ratio\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div class=\"text-align-self\" nz-col nzSpan=\"4\">\r\n                            <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number> -->\r\n                            <input id=\"quantity\" #quantity [min]=\"0.1\" [max]=\"9999999999\" placeholder=\"Nhập số lượng\"\r\n                                [(ngModel)]=\"item.quantity\"  (ngModelChange)=\"checkQuantityProduct(item,$event)\" type=\"number\" />\r\n                        </div>\r\n                        <div (click)=\"openEditUnitPrice(item)\" class=\"invoiceDetail-item-quantity text-end\" nz-col\r\n                            nzSpan=\"4\">\r\n                            <p class=\"max-width-two-line\"><span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                <del style=\"font-size: 0.7rem;\">\r\n                                    {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                    : ''}}\r\n                                </del>\r\n                            </p>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <!-- <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                        class=\"nz-no-border discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"nz-no-border invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div> -->\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"invoice.note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length  || !checkPrinter\" (click)=\"payInvoice(9,true)\" nz-button\r\n                    class=\"order-and-print\">\r\n                    {{\"Save & Print\"|translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length \" (click)=\"payInvoice(9,false)\" nz-button class=\"order\">\r\n                    {{\"Save\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<app-search-product-import [searchProductList]=\"searchProductList\"\r\n    (closeSearchProductList)=\"closeSearchProductList($event)\">\r\n</app-search-product-import>\r\n\r\n<!--Modal edit inut price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\" [value]=\"tempDetail.price\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;padding: 8px 0;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"8\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <div style=\"display:flex;justify-content: space-between;\">\r\n            <button nz-button class=\"nz-hover-border\" nzType=\"default\" (click)=\"openAddLot()\">{{\"Add\"\r\n                |translate}}</button>\r\n            <div>\r\n                <button nz-button class=\"nz-hover-border\"\r\n                    style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\"\r\n                    nzType=\"default\" (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n                    |translate}}</button>\r\n                <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n                    style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n                    class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal add lô -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice3\" *ngIf=\"show_modal_add_lot\" [(nzVisible)]=\"show_modal_add_lot\"\r\n    nzTitle=\"{{'Add new lot' | translate}}\" (nzOnCancel)=\"show_modal_add_lot = false\" (nzOnOk)=\"handleAddLot()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"formAddLot\">\r\n            <div nz-row>\r\n                <div nz-col [nzSpan]=\"24\">\r\n                    <nz-form-item style=\"margin:0 0 4px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Lot number' | translate}}*</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n                            <input nz-input formControlName=\"lot_number\" placeholder=\"{{'Enter lot number' | translate}}\" />\r\n                            <ng-template #errorSubsName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Please enter lot number' | translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                            <div class=\"validation-errors\" id=\"lotNumberError\">\r\n                                <ng-container>\r\n                                    <div class=\"error-message\">\r\n                                        <ion-text color=\"vh-red\">{{'Lot number already exists'|translate}}\r\n                                        </ion-text>\r\n                                    </div>\r\n                                </ng-container>\r\n                            </div>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <div nz-row>\r\n                        <div nz-col [nzSpan]=\"12\">\r\n                            <nz-form-item style=\"margin:0 0 4px;\">\r\n                                <nz-form-label [nzSpan]=\"24\"><b>{{'Date of manufacture' | translate}}*</b></nz-form-label>\r\n                                <nz-form-control [nzSpan]=\"24\">\r\n                                    <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col [nzSpan]=\"12\">\r\n                            <nz-form-item style=\"margin:0 0 4px;\">\r\n                                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}*</b></nz-form-label>\r\n                                <nz-form-control [nzSpan]=\"24\">\r\n                                    <nz-date-picker formControlName=\"date_exp\"></nz-date-picker>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <nz-form-item style=\"margin:0 0 4px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input nz-input formControlName=\"barcode\" placeholder=\"{{'Enter barcode' | translate}}\"\r\n                                (keyup)=\"checkBarcode()\" />\r\n                            <ng-container *ngIf=\"exist_barcode\">\r\n                                <span>{{'This barcode already exists' | translate}}</span>\r\n                            </ng-container>\r\n\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_add_lot = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleAddLot()\"\r\n            [disabled]=\"disabledAddLot || formAddLot.invalid\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<ng-container [ngSwitch]=\"product_selected.number_column\">\r\n    <app-print-one-col-lot style=\"display: none;\" *ngSwitchCase=\"1\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-one-col-lot>\r\n    <app-print-two-col-lot style=\"display: none;\" *ngSwitchCase=\"2\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-two-col-lot>\r\n    <app-print-three-col-lot style=\"display: none;\" *ngSwitchCase=\"3\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-three-col-lot>\r\n    <app-print-four-col-lot style=\"display: none;\" *ngSwitchCase=\"4\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-four-col-lot>\r\n    <app-print-five-col-lot style=\"display: none;\" *ngSwitchCase=\"5\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-five-col-lot>\r\n</ng-container>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module'; \r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SearchModule } from 'src/app/sales/components/search/search.module';\r\nimport { ComponentsBillType2Module } from 'src/app/sales/menu/manage/invoices/purchase/components/components.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    ComponentsBillType2Module,\r\n    TranslateModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DetailComponent\r\n  ],\r\n})\r\nexport class BillType9Module { }\r\n","\r\nimport { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component'; \r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { VhBillType9DetailEdit, VhBillType9Edit } from '../bill-type9-interface';\r\n@Component({\r\n  selector: 'bill-type9-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent { \r\n  url = '/sales/dashboard/manage/invoice/opening-stock';\r\n  invoice_detail  : VhBillType9DetailEdit[] = []\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType9Edit\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore;\r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  subTotal = 0\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.getDataInvoice(this.router.getCurrentNavigation().extras.state.id)\r\n     \r\n    let print = this.vhQuerySales.getlocalPrinters().find(item => item.desktop)\r\n    this.printer = print ? print.desktop.purchase[print.desktop.purchase.type] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n  }\r\n\r\n  /**\r\n   * gán bill và bill-detail get được vào biến và get các thông tin của nv, khách hàng, phương thức thanh toán\r\n   * @example this.init(bill, bill-deails)\r\n   */\r\n  init(invoice: VhBillType9Edit = null, invoiceDetail: VhBillType9DetailEdit[] = null) {\r\n    this.invoice = {...invoice,  fee: 0,  discount: 0, payment: invoice.total}\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      \r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.setSubTotal()\r\n  }\r\n  /**\r\n   * tính cộng tiền hóa đơn\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n\r\n\r\n  /**\r\n   * get dữ liệu bill từ DB\r\n   * @param id : nhận từ state truyền qua\r\n   * @example this.getDataInvoice('DHIWHNXDIWODUHIWDHOWID')\r\n   */\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      ]).then(([invoice, invoiceDetail, list_barcode]: any) => {\r\n        this.listBarcodeLot = list_barcode.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit của sản phẩm theo ratio truyền vào\r\n   * @param units \r\n   * @param ratio \r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([object], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  /**\r\n   * trả về chuỗi thông tin lô theo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let lot = this.getLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n\r\n  /**\r\n   * trả về chuỗi ngày sx - ngày hết hạn của lôtheo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let date_lot = this.getDateLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getDateLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return this.functionService.formatDate(lot.date_mfg) + ' - ' + this.functionService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n   * xóa hóa đơn lên DB\r\n   * @example this.deleteInvoice()\r\n   */\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Purchase invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.goBack();\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public goToCart() {\r\n    this.router.navigate([this.url + '/edit'], { state: { invoiceDetail: this.invoice_detail, invoice: this.invoice, dataRestore :this.dataRestore } })\r\n  }\r\n  goBack() {\r\n    this.router.navigate([this.url], { state: this.dataRestore });\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#purchase-invoice-detail-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-invoice-detail-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#purchase-invoice-detail-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-invoice-detail-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  product_selected: any = {};\r\n  start_print = false;\r\n  data_print: any;\r\n  /**\r\n   * in tem lô của sản phẩm được chọn\r\n   * @param item \r\n   * @example this.printLabel(product_selected)\r\n   */\r\n  printLabel(item) {\r\n    let product = this.vhQuerySales.getlocalDetailProduct(item.id_subproduct ? item.id_subproduct : item.id_product)\r\n    let lot_data = product.lots.find(e => e._id == item.id_lotproduct)\r\n    this.product_selected = product\r\n    let barcode_selected = this.listBarcodeLot.find(e => e._id == product.id_design_barcode_lot)\r\n    if (barcode_selected) {\r\n      this.start_print = true;\r\n      this.data_print = {\r\n        formProduct: {\r\n          name: this.product_selected.name,\r\n          ...lot_data\r\n        },\r\n        barcode: barcode_selected,\r\n        col: this.product_selected.number_column,\r\n        number: this.product_selected.number_print\r\n      }\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 2000);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn chưa chọn mẫu tem cho sản phẩm này!\"))\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"purchase-invoice-detail-today\" *ngIf=\"invoice\">\r\n  <div class=\"sales\">\r\n    <div class=\"sales-cart\">\r\n      <div class=\"sales-cart-header sales-invoice-detail-today-header\" nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"12\" class=\"title\">\r\n          <b>{{'Opening stock' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n          <button (click)=\"goToCart()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n              nzType=\"default\">\r\n              <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n              {{'Edit' | translate}}\r\n            </button>\r\n          \r\n          <button  (click)=\"deleteInvoice()\"\r\n            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div>\r\n       \r\n      </div>\r\n      <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n        <div class=\"invoiceDetail-item\">\r\n          <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger\r\n            nzNoResult=\"{{'No data' | translate}}\">\r\n            <thead>\r\n              <tr>\r\n                <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                <td>{{item.name}} <br> <ng-container *ngIf=\"item.id_lotproduct\">\r\n                    <span style=\"font-size: 0.85rem;\">\r\n                      {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                      <i style=\"font-size: 1rem;\" nz-icon nzType=\"printer\" nzTheme=\"outline\" nz-tooltip\r\n                        nzTooltipTitle=\"{{'_Print batch label' | translate}}\"\r\n                        (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                    </span>\r\n                    <span style=\"font-size: 0.85rem;\">\r\n                      <br> {{getDateLotNumber(item.lots, item.id_lotproduct)}}\r\n                    </span>\r\n                  </ng-container></td>\r\n                <td nzAlign='center'>{{getUnit(item.units, item.ratio)}}</td>\r\n                <td nzAlign='center'>{{item.quantity}}</td>\r\n                <td nzAlign='right'>\r\n                  {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                  <del style=\"font-size: 0.7rem;\">\r\n                    {{item.price_origin > item.price ?\r\n                    vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                  </del>\r\n                </td>\r\n                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </nz-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"sales-bills continue-sell\" >\r\n      <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n        <div>\r\n          <b>{{'Invoice code' | translate}}</b>\r\n          <div> {{invoice.bill_code}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Employee' | translate}}</b>\r\n          <div>{{invoiceInfo.employee.name}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Purchase date' | translate}}</b>\r\n          <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n        <b>{{'Supplier information' | translate}}</b>\r\n        <div *ngIf=\"invoiceInfo.partner\" nz-col nzSpan=\"24\">\r\n          <div>\r\n            <p>{{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone | translate}}</p>\r\n            <p>{{renderAddress(invoiceInfo.partner)}}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <div nz-col nzSpan=\"24\">\r\n          <span>{{'SubTotal' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n        </div>\r\n        \r\n        <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n          <span>{{'Tax' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n          <div>\r\n            {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <span>{{'Total' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n\r\n        </div>\r\n         \r\n        <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n          <span>{{'Note' | translate}}</span>\r\n          <div>{{invoice.note}}</div>\r\n        </div>\r\n      </div>\r\n      <div  nz-row class=\"sales-bills-button\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <button nz-button class=\"payment-print\" (click)=\"goToCart()\">{{'Edit' |\r\n            translate}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>\r\n\r\n<ng-container [ngSwitch]=\"product_selected.number_column\">\r\n  <app-print-one-col-lot style=\"display: none;\" *ngSwitchCase=\"1\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n  </app-print-one-col-lot>\r\n  <app-print-two-col-lot style=\"display: none;\" *ngSwitchCase=\"2\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n  </app-print-two-col-lot>\r\n  <app-print-three-col-lot style=\"display: none;\" *ngSwitchCase=\"3\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n  </app-print-three-col-lot>\r\n  <app-print-four-col-lot style=\"display: none;\" *ngSwitchCase=\"4\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n  </app-print-four-col-lot>\r\n  <app-print-five-col-lot style=\"display: none;\" *ngSwitchCase=\"5\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n  </app-print-five-col-lot>\r\n</ng-container>","\r\nimport { Component, OnInit, HostListener, ChangeDetectorRef, Input } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { PurchaseA4Component } from 'src/app/sales/components/print/purchase/purchase-a4/purchase-a4.component';\r\nimport { PurchaseA5Component } from 'src/app/sales/components/print/purchase/purchase-a5/purchase-a5.component';\r\nimport { PurchaseK80Col4Component } from 'src/app/sales/components/print/purchase/purchase-k80-col4/purchase-k80-col4.component';\r\nimport { PurchaseK80Col3Component } from 'src/app/sales/components/print/purchase/purchase-k80-col3/purchase-k80-col3.component';\r\nimport { PurchaseK57Col3Component } from 'src/app/sales/components/print/purchase/purchase-k57-col3/purchase-k57-col3.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhBillType9Edit, VhBillType9DetailEdit } from '../bill-type9-interface';\r\n\r\n@Component({\r\n  selector: 'bill-type9-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent {\r\n  url = '/sales/dashboard/manage/invoice/opening-stock';\r\n  invoice: VhBillType9Edit = this.router.getCurrentNavigation().extras.state.invoice\r\n  invoice_detail: VhBillType9DetailEdit[] = this.router.getCurrentNavigation().extras.state.invoiceDetail\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  employee: any = {};  \r\n  printer: any;\r\n  listBarcodeLot = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private nzModalService: NzModalService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    \r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n    let tax = this.listTax.find(item => item.value == this.invoice.tax);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n    }\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_purchase')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n\r\n    // get dữ liệu in lô\r\n    this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $eq: 5 } })\r\n      .then((response: any) => {\r\n        \r\n\r\n        this.listBarcodeLot = response.map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n      })\r\n\r\n    //tính tổng tiền\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n\r\n          case 112: this.payInvoice(9, false)\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(9, true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.checkPrinter = this.printer.enable;\r\n\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n  deleteGoods(detail: VhBillType9DetailEdit, index?) {\r\n    this.vhComponent.alertConfirm(\"\", \"\", `${this.languageService.translate(\"Delete\")} ${detail.name}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n      .then(() => {\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_purchase)\r\n          this.removeInvoiceDetail(detail.id_product)\r\n        else\r\n          this.invoice_detail.splice(index, 1);\r\n        this.setSubTotal();\r\n      }, () => { })\r\n  }\r\n  searchProductList: boolean = false;\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  closeSearchProductList(data) {\r\n    if (data) {\r\n      \r\n\r\n      if (data.manylot && !data.id_lotproduct) this.openModalChooseLot(data)\r\n      else {\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_purchase)\r\n          this.addInvoiceDetail(data);\r\n        else\r\n          this.addInvoiceDetailMutilLine(data);\r\n      }\r\n\r\n    }\r\n    else\r\n      this.searchProductList = false;\r\n\r\n  }\r\n  goBack() {\r\n    this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the purchase order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n      .then(() => { this.isExit = true; this.router.navigate([this.url], { state: this.dataRestore }) }, () => { })\r\n  }\r\n  checkQuantityProduct(product: VhBillType9DetailEdit, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.setSubTotal();\r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n    if (unit) {\r\n      item.unit = unit.unit\r\n      item.price = parseFloat(unit.price_import)\r\n      item.ratio = parseFloat(unit.ratio)\r\n      item.price_origin = parseFloat(unit.price_import)\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhBillType9DetailEdit;\r\n  openEditUnitPrice(detail: VhBillType9DetailEdit) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(2000, this.languageService.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n  }\r\n\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate([this.url], { state: this.dataRestore })\r\n  }\r\n  note: string;\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n\r\n  payInvoice(bill_type: 9, print?) {\r\n    if (this.vhAuth.checkMyPermission(\"purchase_enable_payment\")) {\r\n      this.vhComponent.alertConfirm(\r\n        this.languageService.translate(\"Save\"),\r\n        \"\", \"\", \"OK\", this.languageService.translate(\"Cancel\")\r\n      ).then(() => {\r\n        this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n          var arrayProcess: any[] = [this.createOrUpdate(bill_type)];\r\n          Promise.all(arrayProcess).then(bill => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(2000,\r\n                `${this.languageService.translate(\"Purchase invoice\")} ${bill[0].bill_code || this.invoice.bill_code} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n              )\r\n              if (print) this.handlePrint()\r\n              else this.handle()\r\n            })\r\n          })\r\n        })\r\n      }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  createOrUpdate(bill_type:9) {\r\n    return this.vhQuerySales.updateBill_Billdetail(this.invoice._id, this.getCreateUpdateInvoice(bill_type), this.getCreateUpdateInvoiceDetail())\r\n  }\r\n\r\n\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_purchase')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice , invoice_detail: this.invoice_detail,}, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n    }, (err) =>\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n        .then(() => this.handle())\r\n    )\r\n  }\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return (PurchaseK57Col3Component)\r\n      case 'print_size_k80_3c': return (PurchaseK80Col3Component)\r\n      case 'print_size_k80_4c': return (PurchaseK80Col4Component)\r\n      case 'print_size_a5': return (PurchaseA5Component)\r\n      case 'print_size_a4': return (PurchaseA4Component)\r\n      default: return (PurchaseA4Component)\r\n    }\r\n  }\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện nhận barcode\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === this.url + \"/add-purchase\") {\r\n      // if (!this.showSearchBar && !this.showPayInfo) {\r\n      if (_event.key == \"Enter\") {\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        // this.scanBarcode(this.barcode_array.join(\"\"));\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n          let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.barcode);\r\n          if (detailproduct) {\r\n            this.closeSearchProductList({ ...detailproduct, ...this.vhQuerySales.getUnit_byRatio(detailproduct.units, detailproduct.ratio) });\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Not found\"))\r\n          this.barcode_array = [];\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  show_modal_add_lot = false;\r\n  formAddLot: FormGroup;\r\n  disabledAddLot = false;\r\n  list_search_lot = [];\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number\r\n  }\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.show_modal_select_lots = true;\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n  }\r\n\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  handleChooseLot() {\r\n    \r\n    this.tempDetail.lots = this.list_search_lot;\r\n    if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n    this.show_modal_select_lots = false;\r\n  }\r\n  /**\r\n     * trả về khoảng cách giữa 2 ngày \r\n     * vd : getNumberOfDay(15/02/2022, 10/02/2022) => return 5\r\n     * */\r\n  getNumberOfDay(date1, date2) {\r\n    return (date1.getTime() - date2.getTime()) / (24 * 3600 * 1000) > 0 ? (date1.getTime() - date2.getTime()) / (24 * 3600 * 1000) : 0\r\n  }\r\n\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  openAddLot() {\r\n    this.disabledAddLot = false;\r\n    this.show_modal_add_lot = true;\r\n    this.formAddLot = new FormGroup({\r\n      date_mfg: new FormControl(new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n      date_exp: new FormControl(new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n      lot_number: new FormControl('', Validators.compose([Validators.required])),\r\n      hidden: new FormControl(false),\r\n      barcode: new FormControl(''),\r\n    })\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      document.getElementById('lotNumberError').style.display = 'none';\r\n    })\r\n  }\r\n\r\n  exist_barcode = false\r\n  checkBarcode() {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(this.formAddLot.value.barcode);\r\n    if (detailproduct) {\r\n      this.exist_barcode = true;\r\n      this.disabledAddLot = true;\r\n    }\r\n    else {\r\n      this.disabledAddLot = false;\r\n      this.exist_barcode = false;\r\n    }\r\n  }\r\n\r\n  handleAddLot() {\r\n    if (!this.fncService.checkExitsLotNumber(this.formAddLot.value.lot_number)) {\r\n      this.show_modal_add_lot = false;\r\n      \r\n      this.tempDetail.lots = this.tempDetail.lots.concat(this.formAddLot.value)\r\n      if (this.tempDetail.id_subproduct) {\r\n        this.vhQuerySales.addLotProduct(this.tempDetail.id_subproduct, this.formAddLot.value)\r\n          .then((lot: any) => {\r\n            setTimeout(() => {\r\n              this.tempDetail.lots[this.tempDetail.lots.length - 1]._id = lot\r\n              this.tempDetail.lot_number = this.formAddLot.value.lot_number;\r\n              \r\n              this.tempDetail.id_lotproduct = lot\r\n              this.list_search_lot = this.tempDetail.lots\r\n            }, 200);\r\n          }, error => {\r\n            \r\n          })\r\n      }\r\n      else {\r\n        this.vhQuerySales.addLotProduct(this.tempDetail.id_product, this.formAddLot.value)\r\n          .then((lot: any) => {\r\n            setTimeout(() => {\r\n              this.tempDetail.lots[this.tempDetail.lots.length - 1]._id = lot\r\n              this.tempDetail.lot_number = this.formAddLot.value.lot_number;\r\n              \r\n              this.tempDetail.id_lotproduct = lot\r\n              this.list_search_lot = this.tempDetail.lots\r\n            }, 200);\r\n\r\n          }, error => {\r\n            \r\n          })\r\n      }\r\n    }\r\n    else {\r\n      document.getElementById('lotNumberError').style.display = 'block';\r\n      this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Số lô này đã tồn tại\"))\r\n    }\r\n  }\r\n  product_selected: any = {};\r\n  start_print = false;\r\n  data_print: any;\r\n  printLabel(item) {\r\n    let product = this.vhQuerySales.getlocalDetailProduct(item.id_subproduct ? item.id_subproduct : item.id_product)\r\n    let lot_data = product.lots.find(e => e._id == item.id_lotproduct)\r\n    this.product_selected = product\r\n    let barcode_selected = this.listBarcodeLot.find(e => e._id == product.id_design_barcode_lot)\r\n    if (barcode_selected) {\r\n      this.start_print = true;\r\n      let data = {\r\n        formProduct: {\r\n          name: this.product_selected.name,\r\n          ...lot_data\r\n        },\r\n        barcode: barcode_selected,\r\n        col: this.product_selected.number_column_lot,\r\n        number: this.product_selected.number_print_lot\r\n      }\r\n      \r\n      this.data_print = data\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 2000);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn chưa chọn mẫu tem cho sản phẩm này!\"))\r\n    }\r\n  }\r\n\r\n\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n\r\n  removeInvoiceDetail(id: string, notSetSub?: boolean) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      if (!notSetSub) this.setSubTotal()\r\n    }\r\n  }\r\n\r\n  setSubTotal() {\r\n    this.subTotal = this.invoice_detail.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n    this.setTotal();\r\n  }\r\n\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal \r\n    this.setTaxValue()\r\n\r\n  }\r\n\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n     \r\n  } \r\n  /**Thêm sản phẩm vô bill detail */\r\n  public addInvoiceDetail(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  addBill_Detail(value) {\r\n    this.invoice_detail.unshift({\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      unit: value.unit,\r\n      units: value.units,\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      ptype: value.type,\r\n      price: value.price_import,\r\n      price_origin: value.price_import,\r\n      id_subproduct: value.id_subproduct,\r\n      lots: value.lots,\r\n      lot_number: value.lot_number,\r\n      id_lotproduct: value.id_lotproduct, \r\n    })\r\n\r\n    this.setSubTotal()\r\n  }\r\n  /**Thêm sản phẩm vô bill detail */\r\n  public addInvoiceDetailMutilLine(value: any) {\r\n    this.invoice_detail.push({\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: 1,\r\n      unit: value.unit,\r\n      units: value.units,\r\n      ratio: value.ratio ? value.ratio : 1,\r\n      ptype: value.type,\r\n      price: value.price_import,\r\n      price_origin: value.price_import,\r\n      id_subproduct: value.id_subproduct,\r\n      lots: value.lots,\r\n      lot_number: value.lot_number,\r\n      id_lotproduct: value.id_lotproduct, \r\n    })\r\n\r\n    this.setSubTotal()\r\n\r\n  }\r\n  /** Lấy bill dùng để tạo cho database */\r\n  public getCreateUpdateInvoice(bill_type: 9) {\r\n    if (bill_type) this.invoice.bill_type = (bill_type)\r\n    return this.invoice\r\n  }\r\n  /** Lấy tất cả bill detail để tạo cho database */\r\n  public getCreateUpdateInvoiceDetail(): VhBillType9DetailEdit[] {\r\n    return this.invoice_detail.map(item => {\r\n      let detail: VhBillType9DetailEdit = {\r\n        id_product: item.id_product,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype,\r\n        ratio: item.ratio ? item.ratio : 1,\r\n        price_origin: item.price_origin\r\n      }\r\n      if (item['id_lotproduct']) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item['id_subproduct']) detail['id_subproduct'] = item.id_subproduct\r\n\r\n      return detail\r\n    })\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} |  <b> {{'Edit opening stock' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Select product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n                            (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}\r\n                        </button>\r\n                    </div>\r\n                   \r\n                </div>\r\n\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail,index as i\">\r\n                    <div nz-row>\r\n                        <div (click)=\"deleteGoods(item,i)\" nz-col nzSpan=\"1\" class=\"center-col\">\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\" class=\"center-col\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{item.name}}</b>  <br>\r\n                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                    <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(item)\">\r\n                                        {{getLotNumber(item.lots, item.id_lotproduct)}}\r\n                                        <i nz-icon nzType=\"printer\" nzTheme=\"outline\"  nz-tooltip nzTooltipTitle=\"{{'_Print batch label' | translate}}\" (click)=\"$event.stopPropagation();printLabel(item)\"></i>\r\n                                    </pre>\r\n                                    \r\n                                  </ng-container>\r\n                            </p> \r\n                        </div>\r\n                        <div nz-col nzSpan=\"3\" style=\"align-self: center;\">\r\n                            <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                (ngModelChange)=\"changeUnit($event,item)\">\r\n                                <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option> -->\r\n                                <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\"\r\n                                    [nzValue]=\"i.ratio\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div class=\"text-align-self\" nz-col nzSpan=\"4\">\r\n                            <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number>\r\n                        </div>\r\n                        <div (click)=\"openEditUnitPrice(item)\" class=\"invoiceDetail-item-quantity text-end\" nz-col\r\n                            nzSpan=\"4\">\r\n                            <p class=\"max-width-two-line\"><span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                <del style=\"font-size: 0.7rem;\">\r\n                                    {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                    : ''}}\r\n                                </del>\r\n                            </p>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                  \r\n                </div>\r\n            </div>\r\n           \r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <!-- <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                        class=\"nz-no-border discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"nz-no-border invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div> -->\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n              \r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"invoice.note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length || !checkPrinter\"\r\n                    (click)=\"payInvoice(9,true)\" nz-button class=\"order-and-print\">\r\n                    {{\"Save & Print\"|translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length \"\r\n                    (click)=\"payInvoice(9,false)\" nz-button class=\"order\">\r\n                    {{\"Save\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<app-search-product-import [searchProductList]=\"searchProductList\"\r\n    (closeSearchProductList)=\"closeSearchProductList($event)\">\r\n</app-search-product-import>\r\n\r\n<!--Modal edit inut price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\" [value]=\"tempDetail.price\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\" >\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;padding: 8px 0;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n                            \r\n                            <div nz-col nzSpan=\"8\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                             </div>\r\n                             <div nz-col nzSpan=\"8\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                             </div>\r\n                        </div>\r\n                        \r\n                    </label>\r\n                </div>\r\n                \r\n            </div>\r\n        </nz-radio-group>\r\n        <div  *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <div style=\"display:flex;justify-content: space-between;\">\r\n            <button nz-button class=\"nz-hover-border\" nzType=\"default\" (click)=\"openAddLot()\">{{\"Add\"\r\n                |translate}}</button>\r\n            <div>\r\n                <button nz-button class=\"nz-hover-border\"\r\n                    style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\"\r\n                    nzType=\"default\" (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n                    |translate}}</button>\r\n                <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n                    style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n                    class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal add lô -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice3\" *ngIf=\"show_modal_add_lot\" [(nzVisible)]=\"show_modal_add_lot\"\r\n    nzTitle=\"{{'Add new lot' | translate}}\" (nzOnCancel)=\"show_modal_add_lot = false\" (nzOnOk)=\"handleAddLot()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"formAddLot\">\r\n            <div nz-row>\r\n                <div nz-col [nzSpan]=\"24\">\r\n                    <nz-form-item style=\"margin:0 0 4px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Lot number' | translate}}*</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n                            <input nz-input formControlName=\"lot_number\" placeholder=\"{{'Enter lot number' | translate}}\" />\r\n                            <ng-template #errorSubsName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Please enter lot number' | translate}}\r\n                                </ng-container> \r\n                            </ng-template>\r\n                            <div class=\"validation-errors\" id=\"lotNumberError\">\r\n                                <ng-container>\r\n                                    <div class=\"error-message\">\r\n                                        <ion-text color=\"vh-red\">{{'Lot number already exists'|translate}}\r\n                                        </ion-text>\r\n                                    </div>\r\n                                </ng-container>\r\n                            </div>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <div nz-row>\r\n                        <div nz-col [nzSpan]=\"12\">\r\n                            <nz-form-item style=\"margin:0 0 4px;\">\r\n                                <nz-form-label [nzSpan]=\"24\"><b>{{'Date of manufacture' | translate}}*</b></nz-form-label>\r\n                                <nz-form-control [nzSpan]=\"24\">\r\n                                    <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col [nzSpan]=\"12\">\r\n                            <nz-form-item style=\"margin:0 0 4px;\">\r\n                                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}*</b></nz-form-label>\r\n                                <nz-form-control [nzSpan]=\"24\">\r\n                                    <nz-date-picker formControlName=\"date_exp\"></nz-date-picker>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <nz-form-item style=\"margin:0 0 4px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input nz-input formControlName=\"barcode\" placeholder=\"{{'Enter barcode' | translate}}\"\r\n                                (keyup)=\"checkBarcode()\" />\r\n                            <ng-container *ngIf=\"exist_barcode\">\r\n                                <span>{{'This barcode already exists' | translate}}</span>\r\n                            </ng-container>\r\n                            \r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_add_lot = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleAddLot()\"\r\n            [disabled]=\"disabledAddLot || formAddLot.invalid\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<ng-container [ngSwitch]=\"product_selected.number_column\">\r\n    <app-print-one-col-lot style=\"display: none;\" *ngSwitchCase=\"1\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-one-col-lot>\r\n    <app-print-two-col-lot style=\"display: none;\" *ngSwitchCase=\"2\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-two-col-lot>\r\n    <app-print-three-col-lot style=\"display: none;\" *ngSwitchCase=\"3\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-three-col-lot>\r\n    <app-print-four-col-lot style=\"display: none;\" *ngSwitchCase=\"4\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-four-col-lot>\r\n    <app-print-five-col-lot style=\"display: none;\" *ngSwitchCase=\"5\" [start_print]=\"start_print\" [stamp]=\"data_print\">\r\n    </app-print-five-col-lot>\r\n</ng-container>","import { Component, OnInit, HostListener, ChangeDetectorRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-add-opening-stock',\r\n  templateUrl: './add-opening-stock.component.html',\r\n  styleUrls: ['./add-opening-stock.component.scss']\r\n})\r\nexport class AddOpeningStockComponent   { \r\n}\r\n","<bill-type9-add></bill-type9-add>","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhBillType9Add } from 'src/app/sales/components/bill-type/bill-type-9/bill-type9-interface';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-create-opening-data',\r\n  templateUrl: './create-opening-data.component.html',\r\n  styleUrls: ['./create-opening-data.component.scss']\r\n})\r\nexport class CreateOpeningDataComponent implements OnInit {\r\n  employees = this.vhAuth.getlocalEmployees()\r\n\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  employee: any = {};\r\n  formData: FormGroup[] = [];  // mảng chứa các form\r\n  formError: FormGroup[] = []; // mảng chứa các form lỗi\r\n  localProduct: any[] = this.vhQuerySales.getlocalProducts(VhType.PRODUCT)\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  nameFile: string = \"\";\r\n  billInfo: VhBillType9Add;\r\n  url: any = \"/assets/documents/opening-stock/\" + this.languageService.translate(\"Opening stock\") + \".xlsx\"\r\n  url_sub: any = \"/assets/documents/opening-stock/\" + this.languageService.translate(\"Opening stock have subs\") + \".xlsx\"\r\n  url_lots: any = \"/assets/documents/opening-stock/\" + this.languageService.translate(\"Opening stock have lots\") + \".xlsx\"\r\n  url_sub_lots: any = \"/assets/documents/opening-stock/\" + this.languageService.translate(\"Opening stock have subs and lots\") + \".xlsx\"\r\n  file_import_is_manysize = false;\r\n  file_import_is_manylot = false\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private platform: Platform,\r\n  ) {\r\n    this.employee = this.vhAuth.getlocalEmployee(this.vhAuth.getUser()._id);\r\n    this.billInfo = {\r\n      id_employee: this.vhAuth.getUser()._id,\r\n      bill_type: 9,\r\n      note: '',\r\n      fee: 0,\r\n      discount: 0,\r\n      payment: 0,\r\n      total: 0,\r\n      id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n      tax: this.listTax.find(item => item.default) ? this.listTax.find(item => item.default).value : 0,\r\n      date: this.vhAuth.getStore().registrationdate,\r\n\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.billInfo['root_total'] = 0\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  /** Tinh toan tong */\r\n  calTotal() {\r\n    this.billInfo['root_total'] = 0\r\n    this.formData.forEach((item, index) => {\r\n      this.billInfo['root_total'] += item['value']['price_import'] * item['value'][\"quantity\"]\r\n      if (index == this.formData.length - 1) {\r\n        this.billInfo['total'] = this.billInfo['root_total'] * (1 + this.billInfo['tax'] / 100)\r\n      }\r\n    })\r\n  }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.billInfo['id_employee'] = event;\r\n    }\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.billInfo['tax'] = tax['value'];\r\n    this.billInfo['total'] = this.billInfo['root_total'] * (1 + this.billInfo['tax'] / 100);\r\n  }\r\n  discount_price: any;\r\n  invoice_fee: any;\r\n  note: string;\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.billInfo['note'] = this.note;\r\n    }\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/invoice/opening-stock\"], { state: this.dataRestore })\r\n  }\r\n  /**Chọn file */\r\n  openFile() {\r\n    document.getElementById(\"file\")['value'] = '';\r\n    document.getElementById(\"file\").click()\r\n  }\r\n  /**Mở CSVFile */\r\n  openXLSXFile(events) {\r\n    this.file_import_is_manylot = false;\r\n    this.file_import_is_manysize = false;\r\n    this.formData = []\r\n    if (events.target.files[0]) {\r\n      this.vhComponent.showLoading(\"\").then(() => {\r\n        // lưu tên file\r\n        this.nameFile = events.target.files[0]['name'].slice(0, events.target.files[0]['name'].lastIndexOf(\".\"))\r\n\r\n        this.vhAlgorithm.importXLSX(events.target.files[0]).then((data: any) => {\r\n\r\n\r\n          // khởi tạo các giá trị thành mặc định\r\n          this.formData = []\r\n          this.billInfo['root_total'] = 0;\r\n          this.billInfo['total'] = 0;\r\n          if (data.length > 200) {\r\n            this.vhComponent.hideLoading(0)\r\n            this.vhComponent.alertMessage(\"\", this.languageService.translate(\"Only 200 products can be imported at a time\"), \"\", \"OK\").then(() => {\r\n              this.formData = []\r\n            })\r\n          } else {\r\n\r\n            //reset value\r\n            if (this.formData.length) {\r\n              this.formData = []\r\n              this.billInfo['root_total'] = 0;\r\n            }\r\n\r\n            if (!data[0][this.languageService.translate(\"Size name\")] && !data[0][this.languageService.translate(\"_subname\")] && !data[0][this.languageService.translate(\"_lot_number\")]) {\r\n\r\n\r\n              data.forEach((item, index) => {\r\n                if (this.formData.findIndex(i => i.value.name == item[this.languageService.translate(\"_name\")]) == -1) {\r\n                  this.formData.push(this.initForm(item, index))\r\n                  this.billInfo['root_total'] += item[this.languageService.translate(\"_price_import\")] * item[this.languageService.translate(\"_quantity\")]\r\n                }\r\n                if (index == data.length - 1) {\r\n                  this.billInfo['total'] = this.billInfo['root_total'] * (1 + this.billInfo['tax'] / 100)\r\n                  this.vhComponent.hideLoading(0);\r\n                  this.checkModelChange();\r\n                }\r\n              })\r\n            }\r\n            if (!data[0][this.languageService.translate(\"Size name\")] && data[0][this.languageService.translate(\"_subname\")] || data[0][this.languageService.translate(\"_lot_number\")]) {\r\n\r\n              data.forEach((item, index) => {\r\n\r\n\r\n                this.formData.push(this.initForm(item, index))\r\n                console.log('this.formData',this.formData[0]);\r\n                \r\n\r\n                this.billInfo['root_total'] += item[this.languageService.translate(\"_price_import\")] * item[this.languageService.translate(\"_quantity\")]\r\n                if (index == data.length - 1) {\r\n\r\n                  this.billInfo['total'] = this.billInfo['root_total'] * (1 + this.billInfo['tax'] / 100)\r\n                  this.vhComponent.hideLoading(0);\r\n                  if (this.formData[0].value.subname && !this.formData[0].value.lot_number) { this.checkModelChangeSub(); this.file_import_is_manysize = true; }\r\n                  if (!this.formData[0].value.subname && this.formData[0].value.lot_number) { this.checkModelChangeLots(); this.file_import_is_manylot = true; }\r\n                  if (this.formData[0].value.subname && this.formData[0].value.lot_number) { this.checkModelChangeSubLots(); this.file_import_is_manysize = true; this.file_import_is_manylot = true; }\r\n\r\n\r\n\r\n                }\r\n              })\r\n            }\r\n\r\n\r\n          }\r\n        }).catch(err => {\r\n\r\n\r\n\r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), this.languageService.translate(\"Fail file format\"), \"\", this.languageService.translate(\"Cancel\")).then(() => {\r\n            this.formData = [];\r\n            this.billInfo['root_total'] = 0;\r\n            this.billInfo['total'] = 0;\r\n          })\r\n        })\r\n      })\r\n\r\n    }\r\n  }\r\n  /** Xuất ra file CSV hoặc tải về file mẫu */\r\n  status: boolean = false;\r\n  exportXLSXFile() {\r\n    if (this.formData.length) {\r\n      let XLSXData: any[] = [];\r\n      this.formData.forEach((item, index) => {\r\n        let row: Object = new Object;\r\n        row[this.languageService.translate(\"_name\")] = item['value']['name']\r\n        if (item['value']['subname']) row[this.languageService.translate(\"Size name\")] = item['value']['subname']\r\n        row[this.languageService.translate(\"_price_import\")] = item['value']['price_import']\r\n        row[this.languageService.translate(\"_quantity\")] = item['value']['quantity']\r\n        if (item['value']['lot_number']) row[this.languageService.translate(\"_lot_number\")] = item['value']['lot_number']\r\n        XLSXData.push(row)\r\n        if (index == this.formData.length - 1) {\r\n          this.vhAlgorithm.exportXLSX(XLSXData, this.nameFile).then(() => this.status = true).catch(err => this.status = true)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /** Tải file mẫu */\r\n  downloadSampleFile() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Opening-stock-new.xlsx\"\r\n      let urlVI = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Ton-dau-ky-new.xlsx\"\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\")\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n    } else {\r\n      document.getElementById(\"download_openingstock\").click()\r\n    }\r\n  }\r\n\r\n  downloadSampleFileSub() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Opening-stock-have-subs-new.xlsx\"\r\n      let urlVI = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Ton-dau-ky-san-pham-co-thuoc-tinh-new.xlsx\"\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\")\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n    } else {\r\n      document.getElementById(\"download_openingstock_sub\").click()\r\n    }\r\n  }\r\n  downloadSampleFileLots() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Opening-stock-have-lots-new.xlsx\"\r\n      let urlVI = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Ton-dau-ky-san-pham-co-han-su-dung-new.xlsx\"\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\")\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n    } else {\r\n      document.getElementById(\"download_openingstock_lots\").click()\r\n    }\r\n  }\r\n  downloadSampleFileSubLots() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Opening-stock-have-subs-and-lots-new.xlsx\"\r\n      let urlVI = \"https://github.com/Viethas-App/Download-Sample-File/releases/download/Download-Sample-File/Ton-dau-ky-co-thuoc-tinh-va-san-pham-co-han-su-dung-new.xlsx\"\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\")\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download')\r\n    } else {\r\n      document.getElementById(\"download_openingstock_sub_lots\").click()\r\n    }\r\n  }\r\n\r\n  validation_messages = {\r\n    status_name: [{ message: this.languageService.translate(\"Product name does not exist yet\") }],\r\n    status_subname: [{ message: this.languageService.translate(\"Size name does not exist yet or duplicate\") }],\r\n    status_lot_number: [{ message: this.languageService.translate(\"Lot number does not exist yet\") }],\r\n    price_import: [{ type: \"required\", message: this.languageService.translate(\"Cost is required\") },\r\n    { type: \"pattern\", message: this.languageService.translate(\"Invalid price\") }],\r\n    quantity: [{ type: \"required\", message: this.languageService.translate(\"Quantity is required\") },\r\n    { type: \"pattern\", message: this.languageService.translate(\"Invalid quantity\") }],\r\n  };\r\n\r\n  initForm(data, index) {\r\n    return new FormGroup({\r\n      id: new FormControl(index + 1),\r\n      name: new FormControl(data[this.languageService.translate(\"_name\")]),\r\n      subname: new FormControl(data[this.languageService.translate(\"Size name\")] || data[this.languageService.translate(\"_subname\")]),\r\n      lot_number: new FormControl(data[this.languageService.translate(\"_lot_number\")]),\r\n      id_lotproduct: new FormControl(\"\"),\r\n      status_name: new FormControl(false),\r\n      status_subname: new FormControl(false),\r\n      status_lot_number: new FormControl(false),\r\n      id_product: new FormControl(\"\"), // trạng thái barcode true: trùng / false: oke\r\n      id_subproduct: new FormControl(\"\"), // trạng thái barcode true: trùng / false: oke\r\n      price_import: new FormControl(data[this.languageService.translate(\"_price_import\")], [Validators.required, Validators.pattern(\"^[^0.-][0-9]*(([.](?=[0-9]){1}[0-9]{0,5})|)\")]),\r\n      quantity: new FormControl(data[this.languageService.translate(\"_quantity\")], [Validators.required, Validators.pattern(/^-?\\d+(\\.\\d+)?$/)])\r\n    })\r\n  }\r\n\r\n  checkModelChange() {\r\n    this.formData.forEach((form, index) => {\r\n      let status: any = this.checkName(form['value']['name'], form['value']['id'])\r\n\r\n      form.controls['id_product'].setValue(status[0])\r\n      form.controls['status_name'].setValue(status[1])\r\n\r\n    })\r\n  }\r\n  checkModelChangeSub() {\r\n    this.formData.forEach((form, index) => {\r\n      let status: any = this.checkNameSub(form['value']['name'], form['value']['subname'], form['value']['id'])\r\n\r\n\r\n      form.controls['id_product'].setValue(status[0])\r\n      form.controls['id_subproduct'].setValue(status[1])\r\n      form.controls['status_subname'].setValue(status[2])\r\n\r\n    })\r\n  }\r\n  checkModelChangeLots() {\r\n    this.formData.forEach((form, index) => {\r\n      let status: any = this.checkNameLots(form['value']['name'], form['value']['lot_number'], form['value']['id'])\r\n      form.controls['id_product'].setValue(status[0])\r\n      form.controls['id_lotproduct'].setValue(status[1])\r\n      form.controls['status_lot_number'].setValue(status[2])\r\n    })\r\n  }\r\n  checkModelChangeSubLots() {\r\n    this.formData.forEach((form, index) => {\r\n      let status: any = this.checkNameSubLots(form['value']['name'], form['value']['subname'], form['value']['lot_number'], form['value']['id'])\r\n\r\n      form.controls['id_product'].setValue(status[0])\r\n      form.controls['id_subproduct'].setValue(status[1])\r\n      form.controls['id_lotproduct'].setValue(status[2])\r\n      form.controls['status_lot_number'].setValue(status[3])\r\n\r\n    })\r\n  }\r\n\r\n  /**Check name và barcode và lấy id_product*/\r\n  checkName(name, id_form?: any) {\r\n    if (name != \"\") {\r\n      // điều kiện check\r\n      //-----CHECK NGANG-------//\r\n      let checkOne: any = this.localProduct.find(item => item.name.toString().trim() == name.toString().trim());\r\n      //-----CHECK DỌC-----//\r\n      let checkName: any = this.formData.filter(item => item['value'].name.toString() == name.toString().trim() && item['value']['id'] != id_form).length == 0 ? false : true;\r\n\r\n      return [checkOne ? checkOne['_id'] : null, checkName]\r\n    } else return [null];\r\n  }\r\n  /**Check name và barcode và lấy id_product*/\r\n  checkNameLots(name, lot_number, id_form?: any) {\r\n    if (name != \"\") {\r\n      // điều kiện check\r\n      //-----CHECK NGANG-------//\r\n      let checkOne: any = this.localProduct.find(item => item.name.trim() == name.toString().trim());\r\n      let check_lot_number = checkOne ? checkOne.lots?.find(e => e.lot_number.toString().trim() == lot_number.toString().trim()) : null\r\n      //-----CHECK DỌC-----//\r\n      let checkName: any = this.formData.filter(item => item['value'].lot_number.toString() == lot_number.toString().trim() && item['value']['id'] != id_form).length == 0 ? false : true;\r\n\r\n      return [checkOne ? checkOne['_id'] : null, check_lot_number ? check_lot_number._id : null, checkName]\r\n    } else return [null];\r\n  }\r\n  /**Check name và barcode và lấy id_product*/\r\n  checkNameSub(name, subname, id_form?: any) {\r\n\r\n\r\n\r\n    if (name != \"\") {\r\n      // điều kiện check\r\n      //-----CHECK NGANG-------//\r\n      let checkOne: any = this.localProduct.find(item => item.name.toString().trim() == name.toString().trim());\r\n\r\n\r\n      let checkIDSub: any = checkOne ? checkOne.subs?.find(item => item.name.toString().trim() == subname.toString().trim()) : null;\r\n\r\n\r\n\r\n\r\n      //-----CHECK DỌC-----//\r\n      let checkName: any = this.formData.find(item => item['value'].name.toString().trim() == name.toString().trim() && item['value'].subname.toString().trim() == subname.toString().trim() && item['value']['id'] != id_form) ? true : false;\r\n\r\n\r\n\r\n      return [checkOne ? checkOne['_id'] : null, checkIDSub ? checkIDSub._id : null, checkName]\r\n    } else return [null];\r\n  }\r\n  /**Check name và barcode và lấy id_product*/\r\n  checkNameSubLots(name, subname, lot_number, id_form?: any) {\r\n    if (name != \"\") {\r\n      // điều kiện check\r\n      //-----CHECK NGANG-------//\r\n      let checkOne: any = this.localProduct.find(item => item.name.trim() == name.toString().trim());\r\n      let checkIDSub: any = checkOne ? checkOne.subs?.find(item => item.name.toString().trim() == subname.toString().trim()) : null;\r\n      let check_lot_number = checkIDSub ? checkIDSub.lots?.find(e => e.lot_number.toString().trim() == lot_number.toString().trim()) : null\r\n      //-----CHECK DỌC-----//\r\n      let checkName: any = this.formData.filter(item => item['value'].lot_number.toString() == lot_number.toString().trim() && item['value']['id'] != id_form).length == 0 ? false : true;\r\n\r\n\r\n      return [checkOne ? checkOne['_id'] : null, checkIDSub ? checkIDSub._id : null, check_lot_number ? check_lot_number._id : null, checkName]\r\n    } else return [null];\r\n  }\r\n\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkForm(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid || !this.formData[i]['value']['id_product'] || this.formData[i]['value'].status_name == true) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, this.languageService.translate(\"Cancel\"))\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) return true;\r\n    }\r\n  }\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkFormLots(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid || !this.formData[i]['value']['id_product'] || !this.formData[i]['value']['id_lotproduct'] || this.formData[i]['value'].status_lot_number == true) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, this.languageService.translate(\"Cancel\"))\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) return true;\r\n    }\r\n  }\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkFormSub(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid || !this.formData[i]['value']['id_product'] || !this.formData[i]['value']['id_subproduct'] || this.formData[i]['value'].status_subname == true) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, this.languageService.translate(\"Cancel\"))\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) return true;\r\n    }\r\n  }\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkFormSubLots(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid || !this.formData[i]['value']['id_product'] || !this.formData[i]['value']['id_subproduct'] || this.formData[i]['value'].status_subname == true || !this.formData[i]['value']['id_lotproduct'] || this.formData[i]['value'].status_lot_number == true) {\r\n        this.vhComponent.alertMessage(this.languageService.translate(\"Error\"), `${this.languageService.translate(\"Error line\")} ${i + 1}`, this.languageService.translate(\"Cancel\"))\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) return true;\r\n    }\r\n  }\r\n  /**Tạo dữ liệu đầu kỳ */\r\n  createDataProduct() {\r\n    let bill: any = {\r\n      id_employee: this.vhAuth.getUser()._id,\r\n      bill_type: 9,\r\n      discount: 0,\r\n      fee: 0,\r\n      total: this.billInfo['root_total'],\r\n      id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n      tax: this.billInfo['tax'],\r\n      date: this.vhAuth.getStore().registrationdate\r\n    }\r\n    if (!this.file_import_is_manylot && !this.file_import_is_manysize)\r\n      if (this.checkForm()) {\r\n        this.createBill_BillDetail(bill)\r\n      }\r\n    if (!this.file_import_is_manylot && this.file_import_is_manysize) {\r\n      if (this.checkFormSub()) {\r\n        this.createBill_BillDetail_sub(bill)\r\n      }\r\n    }\r\n    if (this.file_import_is_manylot && !this.file_import_is_manysize)\r\n      if (this.checkFormLots()) {\r\n        this.createBill_BillDetail(bill)\r\n      }\r\n    if (this.file_import_is_manylot && this.file_import_is_manysize)\r\n      if (this.checkFormSubLots()) {\r\n        this.createBill_BillDetail_sub(bill)\r\n      }\r\n  }\r\n\r\n  createBill_BillDetail(bill) {\r\n    bill.payment = bill.total\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Create opening stock data\"), \"OK\", this.languageService.translate(\"Cancel\")).then(res => {\r\n      this.vhComponent.showLoading(\"\").then(() => {\r\n        this.vhQuerySales.createBill_Billdetail(bill, this.formData.map(element => {\r\n          let data = {\r\n            id_product: element['value']['id_product'],\r\n            price: parseFloat(element['value']['price_import']),\r\n            quantity: parseFloat(element['value']['quantity']),\r\n            ptype: 3,\r\n            ratio: 1,\r\n          }\r\n          if (element['value']['id_lotproduct']) data['id_lotproduct'] = element['value']['id_lotproduct']\r\n          return data\r\n        })).then(res => {\r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.showToast(1500, this.languageService.translate(\"Opening stock invoices have been created successfully\"), \"success-toast\")\r\n          setTimeout(() => {\r\n            this.goBack()\r\n          }, 200);\r\n        }).catch(err => {\r\n          this.vhComponent.hideLoading(0)\r\n          console.error(err)\r\n        })\r\n      })\r\n    }, () => { })\r\n  }\r\n  createBill_BillDetail_sub(bill) {\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Create opening stock data\"), \"OK\", this.languageService.translate(\"Cancel\")).then(res => {\r\n      this.vhComponent.showLoading(\"\").then(() => {\r\n        this.vhQuerySales.createBill_Billdetail(bill, this.formData.map(element => {\r\n          let data = {\r\n            id_product: element['value']['id_product'],\r\n            id_subproduct: element['value']['id_subproduct'],\r\n            price: parseFloat(element['value']['price_import']),\r\n            quantity: parseFloat(element['value']['quantity']),\r\n            ratio: 1,\r\n            ptype: 3\r\n          }\r\n          if (element['value']['id_lotproduct']) data['id_lotproduct'] = element['value']['id_lotproduct']\r\n          return data\r\n        })).then(res => {\r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.showToast(1500, this.languageService.translate(\"Opening stock invoices have been created successfully\"), \"success-toast\")\r\n          setTimeout(() => {\r\n            this.goBack()\r\n          }, 200);\r\n        }).catch(err => {\r\n          this.vhComponent.hideLoading(0)\r\n          console.error(err)\r\n        })\r\n      })\r\n    }, () => { })\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"10\" class=\"title\">\r\n                    <b>{{\"Select opening stock product\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"14\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button nz-dropdown [nzDropdownMenu]=\"menu\" class=\"btn-data center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                            {{'Download sample file' | translate}}</button>\r\n                        <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n                            <ul nz-menu>\r\n                                <li nz-menu-item (click)=\"downloadSampleFile()\">{{'Product WITHOUT ATTRIBUTE' | translate}}\r\n                                </li>\r\n                                <li nz-menu-item (click)=\"downloadSampleFileSub()\">{{'Product WITH ATTRIBUTE' | translate}}\r\n                                </li>\r\n                                <li nz-menu-item (click)=\"downloadSampleFileLots()\">{{'Product WITHOUT ATTRIBUTE and WITH EXPIRY DATE' | translate}}\r\n                                </li>\r\n                                <li nz-menu-item (click)=\"downloadSampleFileSubLots()\">{{'Product WITH ATTRIBUTE and WITH EXPIRY DATE' | translate}}\r\n                                </li>\r\n                            </ul>\r\n                        </nz-dropdown-menu>\r\n                    </div>\r\n                    <div>\r\n                        <button (click)=\"exportXLSXFile()\" class=\"btn-data center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n                            {{'Export file'|translate}}</button>\r\n                    </div>\r\n                    <div>\r\n                        <button (click)=\"openFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n                            <i nz-icon nzType=\"upload\" nzTheme=\"outline\"></i>\r\n                            {{'Import file'|translate}}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"table\">\r\n                <table>\r\n                    <thead>\r\n                        <tr id=\"importCSV-header\">\r\n                            <th style=\"max-width: 3% !important; width: 3%;\">#</th>\r\n                            <th style=\"max-width: 25% !important; width: 25%;\">{{\"_name\"| translate}}</th>\r\n                            <th *ngIf=\"file_import_is_manysize\" style=\"max-width: 25% !important; width: 25%;\">{{\"_subname\"| translate}}</th>\r\n                            <th *ngIf=\"file_import_is_manylot\" style=\"max-width: 25% !important; width: 25%;\">{{\"_lot_number\"| translate}}</th>\r\n                            <th style=\"max-width: 10% !important; width: 10%;\">{{\"_price_import\"| translate}}</th>\r\n                            <th style=\"max-width: 10% !important; width: 10%;\">{{\"_quantity\"| translate}}</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody id=\"importCSV-body\">\r\n                        <ng-container  *ngIf=\"!file_import_is_manysize  && !file_import_is_manylot\" >\r\n                            <tr *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n                                <td style=\"max-width: 3% !important; width: 3%;\">{{i+ 1}}</td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\">\r\n                                    <input type=\"text\" formControlName=\"name\" (keyup)=\"checkModelChange()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_name\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_product'] || form.value['status_name']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"price_import\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.price_import\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"form.get('price_import').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"quantity\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.quantity\">\r\n                                        <div class=\"error-message\" *ngIf=\"form.get('quantity').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </ng-container>\r\n                        <ng-container  *ngIf=\"file_import_is_manysize  && !file_import_is_manylot\" >\r\n                            <tr *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n                                <td style=\"max-width: 3% !important; width: 3%;\">{{i+ 1}}</td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\">\r\n                                    <input type=\"text\" formControlName=\"name\" (change)=\"checkModelChangeSub()\"  />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_name\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_product']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manysize\">\r\n                                    <input type=\"text\" formControlName=\"subname\" (change)=\"checkModelChangeSub()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_subname\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_subproduct'] || form.value.status_subname\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <!-- <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manylot\">\r\n                                    <input type=\"text\" *ngIf=\"file_import_is_manysize\" formControlName=\"lot_number\" (change)=\"checkModelChangeSubLots()\" />\r\n                                    <input type=\"text\" *ngIf=\"!file_import_is_manysize\" formControlName=\"lot_number\" (change)=\"checkModelChangeLots()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_lot_number\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_lotproduct'] || form.value['status_lot_number']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td> -->\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"price_import\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.price_import\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"form.get('price_import').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"quantity\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.quantity\">\r\n                                        <div class=\"error-message\" *ngIf=\"form.get('quantity').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </ng-container>\r\n                        <ng-container  *ngIf=\"!file_import_is_manysize  && file_import_is_manylot\" >\r\n                            <tr *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n                                <td style=\"max-width: 3% !important; width: 3%;\">{{i+ 1}}</td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\">\r\n                                    <input type=\"text\" formControlName=\"name\" (change)=\"checkModelChangeLots()\"  />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_name\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_product']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <!-- <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manysize\">\r\n                                    <input type=\"text\" formControlName=\"subname\" (change)=\"checkModelChangeSub()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_subname\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_subproduct'] || form.value.status_subname\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td> -->\r\n                                <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manylot\">\r\n                                    <!-- <input type=\"text\" *ngIf=\"file_import_is_manysize\" formControlName=\"lot_number\" (change)=\"checkModelChangeSubLots()\" /> -->\r\n                                    <input type=\"text\"   formControlName=\"lot_number\" (change)=\"checkModelChangeLots()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_lot_number\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_lotproduct'] || form.value['status_lot_number']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"price_import\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.price_import\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"form.get('price_import').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"quantity\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.quantity\">\r\n                                        <div class=\"error-message\" *ngIf=\"form.get('quantity').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </ng-container>\r\n                        <ng-container  *ngIf=\"file_import_is_manysize  && file_import_is_manylot\" >\r\n                            <tr *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n                                <td style=\"max-width: 3% !important; width: 3%;\">{{i+ 1}}</td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\">\r\n                                    <input type=\"text\" formControlName=\"name\" (change)=\"checkModelChangeSubLots()\"  />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_name\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_product']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manysize\">\r\n                                    <input type=\"text\" formControlName=\"subname\" (change)=\"checkModelChangeSubLots()\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_subname\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_subproduct']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 25% !important; width: 25%;\" *ngIf=\"file_import_is_manylot\">\r\n                                    <input type=\"text\"   formControlName=\"lot_number\" (change)=\"checkModelChangeSubLots()\" />\r\n                                     \r\n                                    <ng-container *ngFor=\"let validation of validation_messages.status_lot_number\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"!form.value['id_lotproduct'] || form.value['status_lot_number']\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"price_import\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.price_import\">\r\n                                        <div class=\"error-message\"\r\n                                            *ngIf=\"form.get('price_import').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td style=\"max-width: 10% !important; width: 10%;\">\r\n                                    <input (blur)=\"calTotal()\" style=\"text-align: end;\" type=\"number\"\r\n                                        formControlName=\"quantity\" />\r\n                                    <ng-container *ngFor=\"let validation of validation_messages.quantity\">\r\n                                        <div class=\"error-message\" *ngIf=\"form.get('quantity').hasError(validation.type)\">\r\n                                            <ion-text color=\"default_red\">{{ validation.message }}</ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </ng-container>\r\n                        \r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <nz-select nzPlaceHolder=\"{{'Select employee' | translate}}\" [ngModel]=\"billInfo.id_employee\"\r\n                            (ngModelChange)=\"closeAndReceiveEmployee($event)\" nzBorderless class=\"cus-select\" nzShowSearch>\r\n                            <nz-option *ngFor=\"let item of employees\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <!-- <app-staff [id_employee]=\"invoice.getIdEmployee()\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff> -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(billInfo['root_total'])}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(billInfo['root_total']*billInfo['tax']/100)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Total' | translate}}</b>\r\n                    <div style=\"font-size: 1rem; color: var(--ion-color-vh-green)\">\r\n                        {{vhAlgorithm.vhcurrencyunit(billInfo['total'])}}</div>\r\n                </div>\r\n\r\n                <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button nz-button (click)=\"createDataProduct()\" [disabled]=\"!formData.length\" class=\"order-and-print\">\r\n                    {{\"Save\"|translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n<input type=\"file\" style=\"display: none;\" id=\"file\"\r\n    accept=\".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n    (change)=\"openXLSXFile($event)\" />\r\n<a style=\"display: none;\" id=\"download_openingstock\" [href]=\"url\" download></a>\r\n<a style=\"display: none;\" id=\"download_openingstock_sub\" [href]=\"url_sub\" download></a>\r\n<a style=\"display: none;\" id=\"download_openingstock_lots\" [href]=\"url_lots\" download></a>\r\n<a style=\"display: none;\" id=\"download_openingstock_sub_lots\" [href]=\"url_sub_lots\" download></a>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent {\r\n \r\n}\r\n","<bill-type9-detail></bill-type9-detail>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit-opening-stock.component.html',\r\n  styleUrls: ['./edit-opening-stock.component.scss']\r\n})\r\nexport class EditOpeningStockComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<bill-type9-edit></bill-type9-edit>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhOpeningStockInvoice } from 'src/app/sales/interface/vh-opening-stock-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-opening-stock',\r\n  templateUrl: './opening-stock.component.html',\r\n  styleUrls: ['./opening-stock.component.scss']\r\n})\r\nexport class OpeningStockComponent implements OnInit {\r\n\r\n  public searchValue: string = ''\r\n  public invoiceShow: VhOpeningStockInvoice[] = []\r\n  public invoice: VhOpeningStockInvoice[];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  listFilter: Array<any> = [{ value: 3, name: \"Low to High value\" }, { value: 4, name: \"High to Low value\" }]\r\n  tableHeight: string;\r\n  constructor(\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.dataRestore) {\r\n      this.searchValue = this.dataRestore.searchValue\r\n      this.filterType = this.dataRestore.filterType \r\n    }\r\n    else { this.filterType = 3;  }\r\n    this.getInvoice(this.filterType)\r\n  }\r\n  \r\n\r\n  /**\r\n   * lọc bill theo bill_code hoặc tên nv tạo bill\r\n   * @param value \r\n   * @example this.searchBill('')\r\n   */\r\n  searchBill(value: string) {\r\n    if (value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoice, ['bill_code', 'employee_name'])\r\n    } else this.invoiceShow = [...this.invoice]\r\n  }\r\n\r\n  /**\r\n   * get danh sách hóa đơn khách trả từ DB\r\n   * @example this.getInvoiceToday(1)\r\n   */\r\n  getInvoice(filterType?) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\", null, 0, false).then(() => {\r\n      this.vhQuerySales.getBills_byFields( { bill_type: { $eq: 9 }, id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } }, {})\r\n        .then((invoice: VhOpeningStockInvoice[]) => {\r\n          this.invoice = invoice.map(item => {\r\n            return { ...item, employee_name: this.vhAuth.getlocalEmployee(item.id_employee).name }\r\n          })\r\n          \r\n          this.vhComponent.hideLoading(0)\r\n          if (filterType) this.sortFilter(filterType)\r\n          else this.searchBill(this.searchValue)\r\n        }).catch(() => this.vhComponent.hideLoading(0))\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * router qua trang tạo bill\r\n   * @example this.goToCart()\r\n   */\r\n  goToCart() {\r\n    let dataRestore = { searchValue: this.searchValue, filterType: this.filterType }\r\n    this.router.navigate([\"/sales/dashboard/manage/invoice/opening-stock/add-opening-stock\"], { state: { dataRestore } })\r\n  }\r\n\r\n  /**\r\n   * router qua trang tạo bill\r\n   * @example this.goToCart()\r\n   */\r\n  goToDetail(id) {\r\n    let dataRestore = { searchValue: this.searchValue, filterType: this.filterType }\r\n    this.router.navigate([\"/sales/dashboard/manage/invoice/opening-stock/detail\"], { state: { id, dataRestore } })\r\n  }\r\n\r\n  public filterType: 3 | 4 = 3;\r\n   \r\n  /**\r\n   * lọc hóa đơn theo date hoặc total\r\n   * @example this.sortFilter(3)\r\n   */\r\n  sortFilter(filterType: 3 | 4) {\r\n    switch (filterType) {\r\n      case 3: this.invoice.sort((prev, next) => (prev.total * (1 + prev.tax / 100)) - (next.total * (1 + next.tax / 100)));   break;\r\n      case 4: this.invoice.sort((prev, next) => (next.total * (1 + next.tax / 100)) - (prev.total * (1 + prev.tax / 100)));  break;\r\n    }\r\n\r\n    this.searchBill(this.searchValue)\r\n  }\r\n  \r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#supplier-return-invoice-today\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".supplier-return-invoice-today-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#supplier-return-invoice-today\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".supplier-return-invoice-today-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/invoice\"])\r\n  }\r\n  /**\r\n   * router qua trang tạo bill bằng excel\r\n   * @example this.goToCart()\r\n   */\r\n  gotoCreateDataOpening() {\r\n    let dataRestore = { searchValue: this.searchValue, filterType: this.filterType }\r\n\r\n    this.router.navigate([\"/sales/dashboard/manage/invoice/opening-stock/create-opening-data\"], { state: dataRestore })\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"supplier-return-invoice-today\">\r\n    <div class=\"supplier-return-invoice-today-header\" nz-row>\r\n        <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n            <b>{{'Opening stock' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search for invoice code, employee name' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n            <nz-select [(ngModel)]=\"filterType\" (ngModelChange)=\"sortFilter($event)\" nzBorderless>\r\n                <nz-option *ngFor=\"let item of listFilter\" [nzValue]=\"item.value\" [nzLabel]=\"item.name | translate\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-data\" nz-button nzType=\"default\" (click)=\"gotoCreateDataOpening()\">\r\n                    <i nz-icon nzType=\"appstore-add\" nzTheme=\"outline\"></i>\r\n                    {{'Create data'|translate}}\r\n                </button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-add right-all-content\" nz-button nzType=\"default\" (click)=\"goToCart()\">\r\n                    <ion-icon style=\"color: var(--ion-color-vh-white);\" src=\"assets/icon/add.svg\"></ion-icon>\r\n                    {{'Create opening stock' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <!-- <div nz-col style=\"display: flex;justify-content: flex-end;\" nzSpan=\"4\" class=\"title\">\r\n            <button class=\"btn-add right-all-content\" nz-button nzType=\"default\" (click)=\"goToCart()\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);\" src=\"assets/icon/add.svg\"></ion-icon>\r\n                {{'Create opening stock' | translate}}\r\n            </button>\r\n        </div> -->\r\n    </div>\r\n    <div nz-row *ngIf=\"!invoiceShow.length\" style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <p>{{'Not invoice yet' | translate}}</p>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"invoiceShow.length\" style=\"margin-top: 20px;\">\r\n        <div class='total-item'>{{'Total' |translate}}<span style=\"color:var(--ion-color-vh-red);\">\r\n                {{invoiceShow.length}}\r\n            </span>{{'invoices' |translate}}\r\n        </div>\r\n        <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceShow\" #tableSales nzShowPagination nzShowSizeChanger\r\n            nzNoResult=\"{{'Not invoice yet' | translate}}\" >\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"20%\" nzAlign='left'><b>{{'Invoice code' | translate}}</b></th>\r\n                    <th nzWidth=\"25%\" nzAlign='left'><b>{{'Employee' | translate}}</b></th>\r\n                    <th nzWidth=\"25%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                    <th nzWidth=\"30%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"goToDetail(invoice._id)\">\r\n                    <td nzWidth=\"20%\" nzAlign='left'>{{invoice.bill_code}}</td>\r\n                    <td nzWidth=\"20%\" nzAlign='left'>{{invoice.employee_name}}</td>\r\n                    <td nzWidth=\"20%\" nzAlign='left'>{{invoice.note}}</td>\r\n                    <td nzWidth=\"20%\" class=\"money-right\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(invoice.total*(1+invoice.tax/100))}}\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { PrintLotModule } from './../../../../components/print-lot/print-lot.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OpeningStockComponent } from './opening-stock.component';\r\nimport { AddOpeningStockComponent } from './add-opening-stock/add-opening-stock.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CanLeavePage } from 'src/app/canLeavePage';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { CreateOpeningDataComponent } from './create-opening-data/create-opening-data.component';\r\nimport { BillType9Module } from 'src/app/sales/components/bill-type/bill-type-9/bill-type9.module';\r\nimport { EditOpeningStockComponent } from './edit-opening-stock/edit-opening-stock.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    children: [\r\n      {\r\n        path: \"\",\r\n        component: OpeningStockComponent\r\n      },\r\n      {\r\n        path: \"detail\",\r\n        component: DetailComponent\r\n      },\r\n      {\r\n        path: \"create-opening-data\",\r\n        component: CreateOpeningDataComponent\r\n      },\r\n      {\r\n        path: \"add-opening-stock\",\r\n        component: AddOpeningStockComponent,\r\n      \r\n      },\r\n      {\r\n        path: \"edit\",\r\n        component: EditOpeningStockComponent\r\n      },\r\n\r\n    ]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [OpeningStockComponent, CreateOpeningDataComponent, AddOpeningStockComponent, DetailComponent, EditOpeningStockComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    TranslateModule,\r\n    ScrollingModule,\r\n    ReactiveFormsModule,\r\n    BillType9Module,\r\n    PrintLotModule\r\n  ]\r\n})\r\nexport class OpeningStockModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}