{"version":3,"file":"src_app_sales_menu_manage_partner_customer-group_customer-group_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/partner/customer-group/customer-group.component.ts","./src/app/sales/menu/manage/partner/customer-group/customer-group.component.html","./src/app/sales/menu/manage/partner/customer-group/customer-group.module.ts","./src/app/sales/menu/manage/partner/customer-group/detail-group/detail-group.component.html","./src/app/sales/menu/manage/partner/customer-group/detail-group/detail-group.component.ts","./src/app/sales/menu/manage/partner/customer-group/edit-group/edit-group.component.ts","./src/app/sales/menu/manage/partner/customer-group/edit-group/edit-group.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'app-customer-group',\r\n  templateUrl: './customer-group.component.html',\r\n  styleUrls: ['./customer-group.component.scss']\r\n})\r\nexport class CustomerGroupComponent implements OnInit {\r\n  newNameGroup: any;\r\n  customer_group: any = this.vhQuerySales.getlocalCustomerClasss();\r\n  list_discount_bills: any[] = [];\r\n  list_discount_saless: any = [];\r\n  list_earning_point_bills: any = [];\r\n  list_earning_points_products: any = [];\r\n  formAdd: FormGroup;\r\n  formEdit: FormGroup;\r\n  earned_points_clear_auto = {\r\n    enable: false,\r\n    month_of_year: '12'\r\n  }\r\n  payment: any = {\r\n    points: '1',\r\n    money: '1000',\r\n    enable: false\r\n  }\r\n  symbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhQuery: VhQuery,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n    this.initFormAdd()\r\n  }\r\n\r\n  /**\r\n   * khởi tạo các trường cho form để lưu hạng khách hàng\r\n   * @example this.initFormAdd()\r\n   */\r\n  initFormAdd() {\r\n    this.formAdd = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      id_discount_bill: new FormControl(null),\r\n      id_discount_sales: new FormControl(null),\r\n      id_earning_points_bill: new FormControl(null),\r\n      id_earning_points_product: new FormControl(null),\r\n      exchange_coupon_enable: new FormControl(false),\r\n      exchange_voucher_enable: new FormControl(false),\r\n      exchange_payment_card_enable: new FormControl(false),\r\n    })\r\n    this.earned_points_clear_auto = {\r\n      enable: false,\r\n      month_of_year: '12'\r\n    }\r\n\r\n    this.payment = {\r\n      points: '1',\r\n      money: '1000',\r\n      enable: false\r\n    }\r\n\r\n  }\r\n  /**\r\n   * gán các giá trị của hạng được chọn vào form để cập nhật\r\n   * @param data \r\n   * @example this.initFormEdit(customer_class_selected)\r\n   */\r\n  initFormEdit(data) {\r\n    this.formEdit = new FormGroup({\r\n      name: new FormControl(data.name, Validators.required),\r\n      id_discount_bill: new FormControl(data.id_discount_bill),\r\n      id_discount_sales: new FormControl(data.id_discount_sales),\r\n      id_earning_points_bill: new FormControl(data.id_earning_points_bill),\r\n      id_earning_points_product: new FormControl(data.id_earning_points_product),\r\n      exchange_coupon_enable: new FormControl(data.exchange_coupon_enable),\r\n      exchange_voucher_enable: new FormControl(data.exchange_voucher_enable),\r\n      exchange_payment_card_enable: new FormControl(data.exchange_payment_card_enable),\r\n    })\r\n    this.earned_points_clear_auto = {\r\n      enable: data.earned_points_clear_auto['enable'],\r\n      month_of_year: data.earned_points_clear_auto['month_of_year']\r\n    }\r\n    this.payment = {\r\n      points: data.payment.points,\r\n      money: data.payment.money,\r\n      enable: data.payment.enable,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    Promise.all([\r\n      this.vhQuerySales.getDiscount_saless(),\r\n      this.vhQuerySales.getEarningPointsBills(),\r\n      this.vhQuerySales.getEarningPointsProducts(),\r\n    ])\r\n      .then(([discount_saless, earning_point_bills, earning_points_products]) => {\r\n        this.customer_group = this.vhAlgorithm.sortStringbyASC(this.vhQuerySales.getlocalCustomerClasss(), 'name').map(item => {\r\n          return {\r\n            ...item,\r\n            id_discount_bill: item.id_discount_bill ? item.id_discount_bill : '',\r\n            id_discount_sales: item.id_discount_sales ? item.id_discount_sales : '',\r\n            id_earning_points_bill: item.id_earning_points_bill ? item.id_earning_points_bill : '',\r\n            id_earning_points_product: item.id_earning_points_product ? item.id_earning_points_product : '',\r\n            number_customer: this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(i => i.id_customer_class == item._id).length\r\n          }\r\n        })\r\n        this.list_discount_bills = this.vhAlgorithm.sortStringbyASC(this.vhQuerySales.getlocalDiscount_bills(), 'name')\r\n        this.list_discount_saless = discount_saless;\r\n        this.list_earning_point_bills = earning_point_bills;\r\n        this.list_earning_points_products = earning_points_products;\r\n      })\r\n\r\n  }\r\n\r\n  sort() {\r\n    this.customer_group.sort((a, b) =>\r\n      this.vhAlgorithm.changeAlias(a.name).toLowerCase() >\r\n        this.vhAlgorithm.changeAlias(b.name).toLowerCase()\r\n        ? 1\r\n        : -1\r\n    );\r\n  }\r\n\r\n  /**Kiểm tra tồn tại tên danh mục */\r\n  checkExistGroup(groupName: string): Promise<boolean> {\r\n    return new Promise<any>((resolve, reject) => {\r\n      let index = this.customer_group.findIndex(item =>\r\n        this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(groupName).toLowerCase())\r\n      if (index == -1) resolve(false)\r\n      else resolve(true);\r\n    });\r\n  }\r\n\r\n\r\n  /*----Add group product----*/\r\n  addGroupForm: FormGroup;\r\n  visible_add = false; //biến cờ trạng thái show/hide popup thêm danh mục\r\n\r\n  openAdd(): void {\r\n    this.visible_add = true;\r\n    this.formAdd.reset();\r\n  }\r\n  closeAdd(): void {\r\n    this.visible_add = false;\r\n  }\r\n  getValue(value) {\r\n    this.newNameGroup = value;\r\n  }\r\n  addGroup() {\r\n    if (this.newNameGroup) {\r\n      this.checkExistGroup(this.newNameGroup)\r\n        .then((res) => {\r\n          if (res) {\r\n            this.vhComponent.showToast(1500, this.languageService.translate(\"Group existed\"), 'alert-toast');\r\n            return;\r\n          } else {\r\n            let data = this.formAdd.value\r\n            data['earned_points_clear_auto'] = {\r\n              enable: this.earned_points_clear_auto.enable,\r\n              month_of_year: parseInt(this.earned_points_clear_auto.month_of_year)\r\n            }\r\n            data['payment'] = {\r\n              points: parseFloat(this.payment.points),\r\n              money: parseFloat(this.payment.money),\r\n              enable: this.payment.enable\r\n            }\r\n            this.vhQuerySales.addCustomerClass(data).then((response: any) => {\r\n              this.customer_group.push({ ...response, number_customer: 0 });\r\n              this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Thêm hạng khách hàng thành công\"))\r\n              this.closeAdd();\r\n            }, error => {\r\n              \r\n            })\r\n          }\r\n        }, err => { })\r\n    }\r\n    else this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Vui lòng nhập tên\"))\r\n  }\r\n\r\n  /** ----Edit group product----- */\r\n  visible_detail = false;\r\n  data_selected: any;\r\n  _id: any;\r\n  /**\r\n   * mở drawer cập nhật hạng khách hàng\r\n   * @param item \r\n   * @example openEdit(customer_class_selected)\r\n   */\r\n  openEdit(item): void {\r\n    this.visible_detail = true;\r\n    this._id = item._id;\r\n    this.initFormEdit(item);\r\n    this.data_selected = item\r\n  }\r\n  /**\r\n   * đóng drawer cập nhật hạng khách hàng\r\n   * @example this.closeEdit()\r\n   */\r\n  closeEdit(): void {\r\n    this.visible_detail = false;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút lưu trong drawer cập nhật hạng khách hàng\r\n   * @example this.editGroup()\r\n   */\r\n  editGroup() {\r\n    if (this.formEdit.valid) {\r\n      let data = this.formEdit.value;\r\n      data.id_discount_bill = data.id_discount_bill ? data.id_discount_bill : null;\r\n      data.id_discount_sales = data.id_discount_sales ? data.id_discount_sales : null;\r\n      data.id_earning_points_bill = data.id_earning_points_bill ? data.id_earning_points_bill : null;\r\n      data.id_earning_points_product = data.id_earning_points_product ? data.id_earning_points_product : null;\r\n\r\n      data['earned_points_clear_auto'] = {\r\n        enable: this.earned_points_clear_auto.enable,\r\n        month_of_year: parseInt(this.earned_points_clear_auto.month_of_year)\r\n      }\r\n      data['payment'] = {\r\n        points: parseFloat(this.payment.points),\r\n        money: parseFloat(this.payment.money),\r\n        enable: this.payment.enable\r\n      }\r\n      this.vhQuerySales.updateCustomerClass(this._id, data)\r\n        .then((bool) => {\r\n          if (bool) {\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].name = this.formEdit.value.name;\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].id_discount_bill = this.formEdit.value.id_discount_bill ? this.formEdit.value.id_discount_bill : '';\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].id_discount_sales = this.formEdit.value.id_discount_sales ? this.formEdit.value.id_discount_sales : '';\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].id_earning_points_bill = this.formEdit.value.id_earning_points_bill ? this.formEdit.value.id_earning_points_bill : '';\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].id_earning_points_product = this.formEdit.value.id_earning_points_product ? this.formEdit.value.id_earning_points_product : '';\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].earned_points_clear_auto = this.earned_points_clear_auto;\r\n\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].exchange_coupon_enable = this.formEdit.value.exchange_coupon_enable;\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].exchange_voucher_enable = this.formEdit.value.exchange_voucher_enable;\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].exchange_payment_card_enable = this.formEdit.value.exchange_payment_card_enable;\r\n            this.customer_group[this.customer_group.findIndex(item => item._id == this._id)].payment = this.payment;\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Cập nhật hạng khách hàng thành công\"))\r\n          }\r\n\r\n          this.closeEdit();\r\n        }, error => {\r\n          \r\n        })\r\n    } else this.closeEdit()\r\n  }\r\n\r\n  /** ------------------------- */\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/partner']);\r\n  }\r\n\r\n  /**\r\n   * xóa hạng khách hàng\r\n   * @param data \r\n   * @example  this.deleteGroup(data)\r\n   */\r\n  deleteGroup(data) {\r\n    if (data.number_customer) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: this.languageService.translate(\"Nhóm này đang có khách hàng! Đồng ý xóa?\"),\r\n        nzOnOk: () => {\r\n          this.vhComponent.showLoading('').then(() => {\r\n            this.vhQuerySales.deleteCustomerClass(data._id).then(bool => {\r\n              if (bool) {\r\n                let customers = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(i => i.id_customer_class == data._id);\r\n                let promise = [];\r\n                for (let i in customers) {\r\n                  promise[i] = this.vhQuerySales.updateCustomer(customers[i]._id, { id_customer_class: '' })\r\n                }\r\n                this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n                  this.customer_group.splice(this.customer_group.indexOf(data), 1)\r\n                  this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Xóa hạng khách hàng thành công\"))\r\n                  this.vhComponent.hideLoading(0)\r\n                }, error => {  })\r\n              }\r\n            })\r\n          })\r\n        },\r\n        nzCancelText: this.languageService.translate(\"Cancel\")\r\n      })\r\n    }\r\n    else {\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.deleteCustomerClass(data._id).then(bool => {\r\n          if (bool) {\r\n            this.customer_group.splice(this.customer_group.indexOf(data), 1)\r\n            this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Xóa hạng khách hàng thành công\"))\r\n          }\r\n        }).finally(() => this.vhComponent.hideLoading(0))\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  gotoDetailGroup(data) {\r\n    this.router.navigate(['/sales/dashboard/manage/partner/customer-group/detail'], { state: { group: data } });\r\n  }\r\n\r\n\r\n  changePaymentBill(field, value) {\r\n    this.payment[field] = value.replaceAll(/[.*+?^${}()|[\\]\\\\,a-zA-Z]/g, '')\r\n  }\r\n\r\n  gotoAddDiscountInvoice() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/invoice-discount/list-discount'])\r\n  }\r\n  gotoAddDiscountSales() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/sales-discount/list-discount'])\r\n  }\r\n\r\n  gotoAddPointInvoice() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-bill'])\r\n  }\r\n\r\n  gotoAddPointProduct() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-product'])\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"21\" class=\"title left-all-content\">\r\n            <b>{{'Customer tier' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"3\" class=\"add-button\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"openAdd()\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Add'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"12\" *ngFor=\"let data of customer_group\">\r\n            <nz-list style=\"width: 95%;\">\r\n                <nz-list-item style=\"cursor: pointer;\">\r\n                    <ng-container>\r\n                        <nz-list-item-meta-title style=\"width:95%; overflow: hidden;\" (click)=\"gotoDetailGroup(data)\">\r\n                            <b>{{data.name |slice : 0 : 100}} {{data.name.length>100 ? \"...\" : \"\"}}</b>\r\n                            <div class=\"quantity\">\r\n                                {{'Quantity' | translate}}: <span>{{data.number_customer}}</span>\r\n                            </div>\r\n                        </nz-list-item-meta-title>\r\n                        <ul nz-list-item-actions>\r\n                            <nz-list-item-action>\r\n                                <i class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                                    (click)=\"openEdit(data)\"></i>\r\n                            </nz-list-item-action>\r\n                            <nz-list-item-action>\r\n                                <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm\r\n                                    nzPopconfirmTitle=\"{{'Delete' | translate}}?\" (nzOnConfirm)=\"deleteGroup(data)\"\r\n                                    nzPopconfirmPlacement=\"top\"></i>\r\n                            </nz-list-item-action>\r\n                        </ul>\r\n                    </ng-container>\r\n                </nz-list-item>\r\n                <nz-divider></nz-divider>\r\n            </nz-list>\r\n        </div>\r\n    </div>\r\n    <div nz-row *ngIf=\"!customer_group.length\">\r\n        <div nz-col nzSpan=\"24\" style=\"text-align: center;margin-top: 100px;\">\r\n            <div>{{'Not group yet'| translate}}</div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n\r\n    </div>\r\n</nz-layout>\r\n\r\n<!----------------------------- Add group product ------------------------->\r\n<nz-drawer [nzBodyStyle]=\"{ overflow: 'auto' }\" [nzWidth]=\"'40vw'\" [nzVisible]=\"visible_add\"\r\n    nzTitle=\"{{'Add customer tier' | translate}}\" [nzFooter]=\"footerTplAdd\" (nzOnClose)=\"closeAdd()\">\r\n    <form nz-form *nzDrawerContent [formGroup]=\"formAdd\">\r\n        <div nz-row [nzGutter]=\"8\">\r\n            <div nz-col nzSpan=\"24\">\r\n\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Tier name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input (blur)=\"getValue(box.value)\" formControlName=\"name\" #box nz-input\r\n                                placeholder=\"{{'Enter tier name' | translate}}\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <div>\r\n                    <b style=\"font-size: 0.9rem;\">{{'Invoice discount formula' | translate}}</b>\r\n                    <span nz-icon nzType=\"plus\" nzTheme=\"outline\" (click)=\"gotoAddDiscountInvoice()\"></span>\r\n                </div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_discount_bill\"\r\n                            nzPlaceHolder=\"{{'Select invoice discount formula' | translate}}\">\r\n                            <nz-option *ngFor=\"let item of list_discount_bills\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div>\r\n                    <b style=\"font-size: 0.9rem;\">{{'Sales discount formula' | translate}}</b>\r\n                    <span nz-icon nzType=\"plus\" nzTheme=\"outline\" (click)=\"gotoAddDiscountSales()\"></span>\r\n                </div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_discount_sales\"\r\n                            nzPlaceHolder=\"{{'Select sales discount formula' | translate}}\">\r\n                            <nz-option *ngFor=\"let item of list_discount_saless\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div>\r\n                    <b style=\"font-size: 0.9rem;\">{{'Invoice point accumulation formula' | translate}}</b>\r\n                    <span nz-icon nzType=\"plus\" nzTheme=\"outline\" (click)=\"gotoAddPointInvoice()\"></span>\r\n                </div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_earning_points_bill\"\r\n                            nzPlaceHolder=\"{{'Select invoice point accumulation formula' | translate}}\">\r\n                            <nz-option *ngFor=\"let item of list_earning_point_bills\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div>\r\n                    <b style=\"font-size: 0.9rem;\">{{'Product point accumulation formula' | translate}}</b>\r\n                    <span nz-icon nzType=\"plus\" nzTheme=\"outline\" (click)=\"gotoAddPointProduct()\"></span>\r\n                </div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_earning_points_product\"\r\n                            nzPlaceHolder=\"{{'Select product point accumulation formula' | translate}}\">\r\n                            <nz-option *ngFor=\"let item of list_earning_points_products\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_coupon_enable\">\r\n                            {{'Allow exchange points for coupon' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_voucher_enable\">\r\n                            {{'Allow exchange points for voucher' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_payment_card_enable\">\r\n                            {{'Allow exchange points for prepaid card' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox [(ngModel)]=\"payment.enable\"\r\n                            [ngModelOptions]=\"{standalone: true}\">\r\n                            {{'Allow payment by points' | translate}}\r\n                        </label>\r\n                        <input class=\"price\" style=\"text-align: start;width: 30%;\" nz-input\r\n                            [value]=\"payment.points\" placeholder=\"{{'Enter point' | translate}}\"\r\n                            #points1 (keyup)=\"changePaymentBill('points',points1.value)\" /> {{'point' | translate}}\r\n                        =\r\n                        <input #box1 class=\"price\" style=\"text-align: start;width: 30%;\" nz-input\r\n                            (keyup)=\"changePaymentBill('money',box1.value)\"\r\n                            [value]=\"vhAlgorithm.vhcurrencyunit(payment.money)\"\r\n                            placeholder=\"{{'Enter money' | translate}}\" /> {{symbol}}\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\" style=\"display:flex ;\">\r\n                        <label nz-checkbox [(ngModel)]=\"earned_points_clear_auto.enable\"\r\n                            [ngModelOptions]=\"{standalone: true}\">\r\n                            {{'Delete all accumulated points of customers at the end of the month' | translate}}\r\n                        </label> \r\n                        <input #box [value]=\"earned_points_clear_auto.month_of_year\"\r\n                            (keyup)=\"earned_points_clear_auto.month_of_year = box.value\" class=\"price\"\r\n                            style=\"text-align: start;width: 20%;\" nz-input\r\n                            placeholder=\"{{'Enter value' | translate}}\" /> {{'each year' | translate}}\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <ng-template #footerTplAdd>\r\n        <div style=\"float: right\">\r\n            <button nz-button class=\"btn-cancel\" style=\"margin-right: 8px;\" (click)=\"closeAdd()\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button class=\"btn-add\" nz-button (click)=\"addGroup()\">OK</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n\r\n<!----------------------------- Edit group product ------------------------->\r\n<nz-drawer *ngIf=\"visible_detail\" [nzBodyStyle]=\"{ overflow: 'auto' }\" [nzWidth]=\"'40vw'\" [nzVisible]=\"visible_detail\"\r\n    nzTitle=\"{{'Update customer tier' | translate}}\" [nzFooter]=\"footerTplDetail\" (nzOnClose)=\"closeEdit()\">\r\n    <form nz-form *nzDrawerContent [formGroup]=\"formEdit\">\r\n        <div nz-row [nzGutter]=\"8\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Tier name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input formControlName=\"name\" #box nz-input placeholder=\"{{'Enter tier name' | translate}}\"\r\n                                (blur)=\"getValue(box.value)\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Invoice discount formula' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_discount_bill\"\r\n                            nzPlaceHolder=\"{{'Select invoice discount formula' | translate}}\">\r\n                            <nz-option nzValue=\"\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of list_discount_bills\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Sales discount formula' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_discount_sales\"\r\n                            nzPlaceHolder=\"{{'Select sales discount formula' | translate}}\">\r\n                            <nz-option nzValue=\"\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of list_discount_saless\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Invoice point accumulation formula' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_earning_points_bill\"\r\n                            nzPlaceHolder=\"{{'Select invoice point accumulation formula' | translate}}\">\r\n                            <nz-option nzValue=\"\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of list_earning_point_bills\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <div><b style=\"font-size: 0.9rem;\">{{'Product point accumulation formula' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-select formControlName=\"id_earning_points_product\"\r\n                            nzPlaceHolder=\"{{'Select product point accumulation formula' | translate}}\">\r\n                            <nz-option nzValue=\"\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of list_earning_points_products\" [nzValue]=\"item._id\"\r\n                                [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_coupon_enable\">\r\n                            {{'Allow exchange points for coupon' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_voucher_enable\">\r\n                            {{'Allow exchange points for voucher' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox formControlName=\"exchange_payment_card_enable\">\r\n                            {{'Allow exchange points for prepaid card' | translate}}\r\n                        </label>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <label nz-checkbox [(ngModel)]=\"payment.enable\"\r\n                            [ngModelOptions]=\"{standalone: true}\">\r\n                            {{'Allow payment by points' | translate}}\r\n                        </label>\r\n                        <input class=\"price\" style=\"text-align: start;width: 30%;\" nz-input\r\n                            [value]=\"payment.points\" placeholder=\"{{'Enter point' | translate}}\"\r\n                            #points3 (keyup)=\"changePaymentBill('points',points3.value)\" /> {{'point' | translate}}\r\n                        =\r\n                        <input #box3 class=\"price\" style=\"text-align: start;width: 30%;\" nz-input\r\n                            (keyup)=\"changePaymentBill('money',box3.value)\"\r\n                            [value]=\"vhAlgorithm.vhcurrencyunit(payment.money)\"\r\n                            placeholder=\"{{'Enter money' | translate}}\" /> {{symbol}}\r\n                    </nz-form-control>\r\n                </nz-form-item> \r\n                <nz-form-item style=\"margin:0 0 8px;\">\r\n                    <nz-form-control [nzSpan]=\"24\" style=\"display: flex;\">\r\n                        <label nz-checkbox [(ngModel)]=\"earned_points_clear_auto.enable\"\r\n                            [ngModelOptions]=\"{standalone: true}\">\r\n                            {{'Delete all accumulated points of customers at the end of the month' | translate}}\r\n                        </label> \r\n                        <input #box5 [value]=\"earned_points_clear_auto.month_of_year\"\r\n                            (keyup)=\"earned_points_clear_auto.month_of_year = box5.value\" class=\"price\"\r\n                            style=\"text-align: start;width: 20%;\" nz-input\r\n                            placeholder=\"{{'Enter value' | translate}}\" /> {{'each year' | translate}}\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <ng-template #footerTplDetail>\r\n        <div style=\"float: right\">\r\n            <button nz-button class=\"btn-cancel\" style=\"margin-right: 8px;\" (click)=\"closeEdit()\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button class=\"btn-add\" nz-button (click)=\"editGroup()\">OK</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { CustomerGroupComponent } from './customer-group.component';\r\nimport { DetailGroupComponent } from './detail-group/detail-group.component';\r\nimport { EditGroupComponent } from './edit-group/edit-group.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerGroupComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailGroupComponent\r\n  },\r\n  {\r\n    path: 'edit',\r\n    component: EditGroupComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CustomerGroupComponent,\r\n    DetailGroupComponent,\r\n    EditGroupComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ScrollingModule,\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TranslateModule,\r\n    IonicModule\r\n  ]\r\n})\r\nexport class CustomerGroupModule { }\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"detail-group-customers\">\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"8\" class=\"title max-width-overflow detail-group-customers-header\">\r\n            <b>{{group.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" (keyup)=\"searchCustomer(box.value)\" nz-input [value]=\"keySearch ? keySearch : ''\" placeholder=\"{{'Search for customer name, phone number' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"openModal();\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Select customer' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <div nz-row class='total-item'>\r\n            {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n        {{list_customer.length}}&nbsp; </span> {{'Customer' | translate}}\r\n        </div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" [nzData]=\"list_customer\" #dataCustomer nzShowPagination nzShowSizeChanger [nzNoResult]=\"'Not customer yet' |translate\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth='10%' nzAlign=\"center\"><b>{{'Image' | translate}}</b></th>\r\n                    <th style=\"cursor: pointer;\" nzWidth='25%' (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Customer name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzWidth='20%' (click)=\"phoneCol = !phoneCol;sortTable('phone')\">\r\n                        <b>{{ 'Phone number' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"phoneCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzWidth='20%' (click)=\"emailCol = !emailCol;sortTable('email')\">\r\n                        <b>{{ 'Email' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"emailCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzWidth='25%' (click)=\"addressCol = !addressCol;sortTable('address')\">\r\n                        <b>{{ 'Address' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"addressCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth='25%'>\r\n                        <b>{{ 'Customer tier' | translate}}</b>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataCustomer.data\" style=\"cursor: pointer;\">\r\n                    <td nzAlign=\"center\" style=\"padding: 0;\">\r\n                        <img style=\"width: 40px; border-radius: 100%;\" src=\"{{data.img?data.img:'assets/icon/management/noavatar.svg'}}\">\r\n                    </td>\r\n                    <td>{{ data.name }}</td>\r\n                    <td>{{ data.phone }}</td>\r\n                    <td>{{ data.email }}</td>\r\n                    <td>{{ data.address }}</td>\r\n                    <td (click)=\"$event.stopPropagation()\">\r\n                        <nz-select nzShowSearch [nzAllowClear]=\"false\" [(ngModel)]=\"data.id_customer_class\" (ngModelChange)=\"groupChange($event,data)\" style=\"width: 100%;\">\r\n                            <nz-option [nzValue]=\"''\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of customerGroups\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n\r\n<nz-modal [nzStyle]=\"{'top' : '20px'}\" [(nzVisible)]=\"isVisibleModalAdd\" nzTitle=\"{{'Select customer' | translate}}\" nzCancelText=\"{{'Cancel'| translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\" nzWidth=\"70vw\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row style=\"padding: 8px 0;\">\r\n            <div nz-col nzSpan=\"12\">\r\n                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                    <input #search (keyup)=\"searchCustomerModal(search.value)\" type=\"text\" nz-input placeholder=\"{{'Search for customer name, phone number'| translate}}\" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconSearch>\r\n                    <i nz-icon nzType=\"search\"></i>\r\n                </ng-template>\r\n            </div>\r\n            <div nz-col nzSpan=\"1\"></div>\r\n\r\n        </div>\r\n        <!-- <nz-checkbox-group style=\"display: grid;\" [(ngModel)]=\"list_customer\"></nz-checkbox-group> -->\r\n        <nz-table [nzBordered]=\"true\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: '350px' }\" #allowSale nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_customer_valid\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth='25%'><b>{{'Customer name' | translate}} </b></th>\r\n                    <th nzWidth='20%'><b>{{ 'Phone number' | translate}}</b></th>\r\n                    <th nzWidth='20%'><b>{{ 'Email' | translate}}</b></th>\r\n                    <th nzWidth='20%'><b>{{ 'Address' | translate}}</b></th>\r\n                    <th nzWidth='15%' nzAlign=\"center\"><b>{{ 'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of allowSale.data\">\r\n                    <td>{{ data.name }}</td>\r\n                    <td>{{ data.phone }}</td>\r\n                    <td>{{ data.email }}</td>\r\n                    <td>{{ data.address }}</td>\r\n                    <td nzAlign=\"center\">\r\n                        <nz-switch [(ngModel)]=\"data.checked\"></nz-switch>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-detail-group',\r\n  templateUrl: './detail-group.component.html',\r\n  styleUrls: ['./detail-group.component.scss']\r\n})\r\n/** component này để chọn khách hàng vào hạng */\r\nexport class DetailGroupComponent {\r\n\r\n  list_customer: any = [];\r\n  list_search_customer: any = [];\r\n  isVisibleModalAdd = false;\r\n  group: any;\r\n  keySearch: any; //biến lưu tạm key search\r\n  customerGroups: any[] = [];\r\n  list_customer_valid = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(item => !item.id_customer_class || item._id != 'id_retail')\r\n  list_search_customer_valid: any = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private lang: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private vhComponent: VhComponent\r\n\r\n  ) {\r\n    this.group = this.router.getCurrentNavigation().extras.state.group\r\n  }\r\n  ngAfterViewInit() {\r\n    this.doRefreshData()\r\n    this.customerGroups = this.vhAlgorithm.sortStringbyASC(this.vhQuerySales.getlocalCustomerClasss(), 'name')\r\n  }\r\n  /**\r\n   * get các khách hàng thuộc hạng nhận dc từ state truyền qua\r\n   * @example this.doRefreshData()\r\n  */\r\n  doRefreshData() {\r\n    this.list_customer = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(item => item.id_customer_class == this.group._id )\r\n    this.list_search_customer = this.list_customer\r\n  }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#detail-group-customers\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".detail-group-customers-header\")) {\r\n      this.heightScroll = document.querySelector(\"#detail-group-customers\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".detail-group-customers-header\").clientHeight - 110 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**\r\n   * quay về trang danh sách hạng kh\r\n   */\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/partner/customer-group']);\r\n  }\r\n\r\n  // gotoDetailCustomer(data){\r\n  //   this.router.navigate(['/sales/dashboard/manage/partner/customer-group/edit'],{state:{data:data, group : this.group}});\r\n  // }\r\n\r\n  /*---tìm kiếm khách hàng theo tên và email---*/\r\n  searchCustomer(event) {\r\n    let value = this.vhAlgorithm.changeAlias(event.toLowerCase());\r\n    this.keySearch = value;\r\n    this.list_customer = this.vhAlgorithm.searchList(\r\n      value,\r\n      this.list_search_customer,\r\n      [\"name\", \"phone\", \"email\"]\r\n    );\r\n  }\r\n  /*---tìm kiếm khách hàng theo tên và email---*/\r\n  searchCustomerModal(event) {\r\n    let value = this.vhAlgorithm.changeAlias(event.toLowerCase());\r\n    this.list_customer_valid = this.vhAlgorithm.searchList(\r\n      value,\r\n      this.list_search_customer_valid,\r\n      [\"name\", \"phone\", \"email\"]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * cập nhật lại hạng của khách hàng được chọn\r\n   * @param ev id_customerclass được chọn\r\n   * @param data khách được chọn\r\n   * @example this.groupChange('DNWJHDBHUYWGDWGDUWY',customer_selected)\r\n   */\r\n  groupChange(ev, data) {\r\n    this.vhQuerySales.updateCustomer(data._id, { id_customer_class: ev ? ev : null })\r\n      .catch((err) => { console.error(err) })\r\n  }\r\n\r\n  /**\r\n   * tắt modal chọn khách hàng vào hạng\r\n   * @example this.handleCancel()\r\n   */\r\n  handleCancel() {\r\n    this.isVisibleModalAdd = false;\r\n  }\r\n\r\n  /**\r\n   * xử lý sk nhấn nút ok modal chọn khách hàng vào hạng\r\n   * @example this.handleOk() \r\n   */\r\n  handleOk() {\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        let promise = new Array();\r\n        let arr = this.list_customer_valid.filter(item => item.checked)\r\n        for (let i = 0; i < arr.length; i++) {\r\n          promise[i] = this.vhQuerySales.updateCustomer(arr[i]._id, { id_customer_class: this.group._id })\r\n        }\r\n        this.vhQuery.asyncPromiseAll(promise)\r\n          .then((array) => {\r\n            this.vhComponent.hideLoading(0)\r\n            this.doRefreshData()\r\n            this.isVisibleModalAdd = false;\r\n          }, error => {  })\r\n      })\r\n\r\n  }\r\n\r\n  /**\r\n   * mở modal chọn khách hàng vào hạng\r\n   * @example this.openModal()\r\n   */\r\n  openModal() {\r\n    this.isVisibleModalAdd = true;\r\n    this.list_customer_valid = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(item => !item.id_customer_class && item._id != 'id_retail').map(ele => { return { ...ele, checked: false } })\r\n    this.list_search_customer_valid = this.list_customer_valid\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  phoneCol = false;\r\n  emailCol = false;\r\n  addressCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'phone':\r\n        if(this.phoneCol){\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'email':\r\n        if(this.emailCol){\r\n          this.list_customer = this.vhAlgorithm.sortStringbyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortStringbyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'address':\r\n        if(this.addressCol){\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-group',\r\n  templateUrl: './edit-group.component.html',\r\n  styleUrls: ['./edit-group.component.scss']\r\n})\r\nexport class EditGroupComponent implements OnInit {\r\n\r\n  detailCustomer: FormGroup;\r\n  data: any;\r\n  selectedValue: any;\r\n  customerGroups :any = []\r\n  group : any;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhImage: VhImage,\r\n    private vhQuery:VhQuery,\r\n    private vhAlgorithm:VhAlgorithm,\r\n    private functionService: FunctionService,\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state.data;\r\n    this.group = this.router.getCurrentNavigation().extras.state.group;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.data.phone, this.countryCode as CountryCode);\r\n    this.countryCode = this.data.countryCode ?? this.functionService.defaultCountryCode;\r\n    this.callingCode = this.functionService.getCallingCodeFromCountryCode(this.countryCode) ?? this.functionService.defaultCallingCode;\r\n\r\n    this.detailCustomer = new FormGroup({\r\n      img: new FormControl(this.data.img),\r\n      name: new FormControl(this.data.name, Validators.required),\r\n      email: new FormControl(this.data.email),\r\n      gender: new FormControl(this.data.gender),\r\n      datebirth: new FormControl(this.data.datebirth),\r\n      phone: new FormControl(this.formattedPhone, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.countryCode),\r\n      ]),\r\n      address: new FormControl(this.data.address),\r\n      country: new FormControl(this.data.country),\r\n      province: new FormControl(this.data.province),\r\n      district: new FormControl(this.data.district),\r\n      note: new FormControl(this.data.note),\r\n      debt_enable: new FormControl(this.data.debt_enable),\r\n      id_customer_class : new FormControl(this.data.id_customer_class ? this.data.id_customer_class : null ),\r\n      isBusiness: new FormControl(this.data.isBusiness),\r\n      taxcode: new FormControl(this.data.taxcode),\r\n    });\r\n    this.selectedValue = this.data.gender\r\n    // taxcode required khi isBusiness = true\r\n    if(this.data.isBusiness) {\r\n      this.detailCustomer.get('taxcode').setValidators([Validators.required]);\r\n      this.detailCustomer.get('taxcode').updateValueAndValidity();\r\n    }\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n    this.vhQuery.getDocs('customer_classs').then((response) => {\r\n      this.customerGroups = this.vhAlgorithm.sortStringbyASC(response, 'name')\r\n    })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/partner/customer-group/detail'],{state: {group :this.group}});\r\n  }\r\n\r\n  deleteCustomer() {\r\n    this.vhQuerySales.deleteCustomer(this.data._id)\r\n      .then(bool => {\r\n        if (bool) {\r\n          if (this.detailCustomer.value[\"img\"]) {\r\n            this.vhImage.deleteThumbnail([this.detailCustomer.value[\"img\"]]).then(() => {\r\n              this.vhComponent.showToast(2000, (this.languageService.translate(\"Customer has been deleted successfully\")), 'success-toast');\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            })\r\n          } else {\r\n            this.vhComponent.showToast(2000, (this.languageService.translate(\"Customer has been deleted successfully\")), 'success-toast');\r\n            setTimeout(() => {\r\n              this.isVisible = false;\r\n              this.goBack();\r\n            }, 300);\r\n          }\r\n\r\n        } else {\r\n          this.vhComponent.showToast(2000, (this.languageService.translate(\"Can't delete this customer\")), 'alert-toast');\r\n        }\r\n      });\r\n  }\r\n\r\n  groupChange(value){\r\n    this.selectedValue = value;\r\n    this.detailCustomer.value.id_customer_class = this.selectedValue;\r\n    this.updateCustomer(this.detailCustomer.value);\r\n  }\r\n\r\n  genderChange(value) {\r\n    this.selectedValue = value;\r\n    this.detailCustomer.value.gender = this.selectedValue;\r\n    this.updateCustomer(this.detailCustomer.value);\r\n  }\r\n  changeDebtEnable(value) {\r\n    this.detailCustomer.value.debt_enable = value;\r\n    this.updateCustomer(this.detailCustomer.value);\r\n  }\r\n  onChangeDatePicker(value) {\r\n    this.detailCustomer.value.datebirth = value;\r\n    this.updateCustomer(this.detailCustomer.value);\r\n  }\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n\r\n  handleOk(): void {\r\n    this.deleteCustomer();\r\n  }\r\n\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n\r\n  updateCustomer(value) {\r\n    if (this.detailCustomer.valid) {\r\n      let customer = { ...value };\r\n\r\n      const phoneNumberValue = customer.phone;\r\n      customer.countryCode = this.countryCode;\r\n      customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n      customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n\r\n      if(customer.isBusiness) {\r\n        delete customer.gender;\r\n        delete customer.datebirth;\r\n      }\r\n      else {\r\n        delete customer.taxcode;\r\n      }\r\n\r\n      this.vhQuerySales.updateCustomer(this.data._id, customer)\r\n        .then((res: any) => {\r\n          if(res.vcode == 1) {\r\n            //This phone number is already in use with another customer\r\n            this.isExitsPhone = true;\r\n            this.vhComponent.showToast(1500, this.languageService.translate('This phone number is already in use with another customer'), 'alert-toast');\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 256, 256, \"customers\", this.detailCustomer.value[\"img\"] || '').then(\r\n      photoURL => {\r\n        this.detailCustomer.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), 'success-toast');\r\n        this.updateCustomer(this.detailCustomer.value);\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), 'success-toast');\r\n      }\r\n    );\r\n  }\r\n  \r\n  \r\n  \r\n  /** Kiểm tra số điện thoại đã tồn tại ha chưa để hiển thị thông báo */\r\n  isExitsPhone: boolean = false;\r\n\r\n  /** Mã quốc gia */\r\n  countryCode: string = this.functionService.defaultCountryCode;\r\n  \r\n  /** Calling code */\r\n  callingCode: string = this.functionService.defaultCallingCode;\r\n  \r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chọn mã quốc gia\r\n   */\r\n  openSearchCountryCode() {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.detailCustomer.value.phone, this.countryCode as CountryCode);\r\n      this.detailCustomer.get('phone')?.markAsTouched();\r\n      this.detailCustomer.get('phone')?.markAsDirty();\r\n      this.detailCustomer.get('phone')?.updateValueAndValidity();\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   */\r\n  formatPhoneNumber(event: Event): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this.detailCustomer.get('phone')?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"21\" class=\"title left-all-content\">\r\n            <b>{{'Customer information' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"3\" class=\"add-button\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n        <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n        {{'Delete'|translate}}</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <form nz-form [formGroup]=\"detailCustomer\">\r\n            <div nz-row style=\"padding-top: 8px;\">\r\n                <div nz-col nzSpan=\"24\" class=\"center-all-content\" style=\"padding-bottom:8px;\">\r\n                    <div class=\"bg-img center-all-content\" (click)=\"getFile()\">\r\n                        <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\" (change)=\"onUpload($event)\" />\r\n                        <img [ngStyle]=\"{width: detailCustomer.value.img ? '100%' : '60px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"detailCustomer.value.img\" />\r\n                    </div>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div><b class='label'>{{'Customer name' | translate}}*</b></div>\r\n                    <nz-form-item>\r\n                        <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                            <nz-input-group>\r\n                                <input formControlName=\"name\" nz-input placeholder=\"{{'Enter customer name' | translate}}\" required (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                                <ng-template #combineTplName let-control>\r\n                                    <!-- <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' | translate}}\r\n                  </ng-container> -->\r\n                                    <ng-container *ngIf=\"control.hasError('required')\">{{'Customer name is required' | translate}}\r\n                                    </ng-container>\r\n                                </ng-template>\r\n                            </nz-input-group>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                    <nz-form-item>\r\n                        <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                            <nz-input-group>\r\n                                <div (click)=\"openSearchCountryCode()\" class=\"calling-code\">\r\n                                    <span>+{{callingCode}}</span>\r\n                                    <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n                                </div>\r\n                                <input formControlName=\"phone\"\r\n                                    (input)=\"formatPhoneNumber($event)\"\r\n                                    [value]=\"formattedPhone\"\r\n                                    [placeholder]=\"'Enter customer phone' | translate\" type=\"tel\" nz-input required\r\n                                    (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                                <ng-template #combineTplPhone let-control>\r\n                                    <ng-container *ngIf=\"control.hasError('invalidPhone')\">{{'_Invalid phone number' | translate}}</ng-container>\r\n                                    <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' | translate}}</ng-container>\r\n                                </ng-template>\r\n                            </nz-input-group>\r\n                            <div *ngIf=\"isExitsPhone\"\r\n                                class=\"ng-tns-c300-27 ant-form-item-explain ant-form-item-explain-error ng-star-inserted\"\r\n                                ng-reflect-ng-class=\"ant-form-item-explain,ant-form\">\r\n                                <div class=\"ng-tns-c300-27 ng-trigger ng-trigger-helpMotion\">\r\n                                    {{'Phone number already exists' | translate}}\r\n                                </div>\r\n                            </div>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n            <div nz-row>\r\n                <!-- <div nz-col nzSpan=\"12\">\r\n                    <div nz-row>\r\n                        <div nz-col nzSpan=\"12\">\r\n                            <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"{{'Select gender' | translate}}\" formControlName=\"gender\" (ngModelChange)=\"genderChange($event)\">\r\n                                <nz-option nzLabel=\"{{'Female'|translate}}\" nzValue=\"Female\"></nz-option>\r\n                                <nz-option nzLabel=\"{{'Male'|translate}}\" nzValue=\"Male\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"12\">\r\n                            <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n                            <nz-date-picker formControlName=\"datebirth\" nzPlaceHolder=\"{{'Select date of birth' | translate}}\" (ngModelChange)=\"onChangeDatePicker($event)\"></nz-date-picker>\r\n                        </div>\r\n                    </div>\r\n                </div> -->\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div><b class='label'>{{'Email' | translate}}</b></div>\r\n                    <nz-form-item>\r\n                        <nz-form-control nzErrorTip=\"{{'Email is not correct' | translate}}\">\r\n                            <nz-input-group>\r\n                                <input formControlName=\"email\" nz-input placeholder=\"{{'Enter customer mail' | translate}}\" (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                            </nz-input-group>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div><b class='label'>{{'Address' | translate}}</b></div>\r\n                    <nz-form-item>\r\n                        <nz-form-control>\r\n                            <nz-input-group>\r\n                                <input formControlName=\"address\" nz-input placeholder=\"{{'Enter address' | translate}}\" (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                            </nz-input-group>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div nz-row>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'Country' | translate}}</b></div>\r\n                            <nz-form-item>\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input style=\"width: 80%;\" formControlName=\"country\" nz-input placeholder=\"{{'Enter country' | translate}}\" (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'Province' | translate}}</b></div>\r\n                            <nz-form-item>\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input style=\"width: 80%;\" formControlName=\"province\" nz-input placeholder=\"{{'Enter province' | translate}}\" (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'District' | translate}}</b></div>\r\n                            <nz-form-item>\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input style=\"width: 70%;\" formControlName=\"district\" nz-input placeholder=\"{{'Enter district' | translate}}\" (blur)=\"updateCustomer(detailCustomer.value)\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div nz-row>\r\n          \r\n                        <!-- Loại khách hàng -->\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'Customer type' | translate}}</b></div>\r\n                            <nz-select nzDisabled nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select customer type' | translate\"\r\n                                formControlName=\"isBusiness\">\r\n                                <nz-option [nzLabel]=\"'Individual' | translate\" [nzValue]=\"false\"></nz-option>\r\n                                <nz-option [nzLabel]=\"'Business/Business household' | translate\" [nzValue]=\"true\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n            \r\n                        <!-- Mã số thuế -->\r\n                        <ng-container *ngIf=\"detailCustomer.value.isBusiness\">\r\n                            <div nz-col nzSpan=\"15\">\r\n                                <div><b class='label'>{{'Tax code' | translate}}*</b></div>\r\n                                <nz-form-item>\r\n                                    <nz-form-control [nzErrorTip]=\"taxcode\">\r\n                                        <nz-input-group>\r\n                                            <input formControlName=\"taxcode\" (blur)=\"updateCustomer(detailCustomer.value)\" nz-input [placeholder]=\"'Enter tax code' | translate\" />\r\n                                            <ng-template #taxcode let-control>\r\n                                                <ng-container *ngIf=\"control.hasError('required')\">{{'Tax code is required' | translate}}</ng-container>\r\n                                            </ng-template>\r\n                                        </nz-input-group>\r\n                                    </nz-form-control>\r\n                                </nz-form-item>\r\n                            </div>\r\n                        </ng-container>\r\n            \r\n                        <ng-container *ngIf=\"!detailCustomer.value.isBusiness\">\r\n                            <!-- Giới tính -->\r\n                            <div nz-col nzSpan=\"8\">\r\n                                <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n                                <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"{{'Select gender' | translate}}\" formControlName=\"gender\" (ngModelChange)=\"genderChange($event)\">\r\n                                    <nz-option nzLabel=\"{{'Female'|translate}}\" nzValue=\"Female\"></nz-option>\r\n                                    <nz-option nzLabel=\"{{'Male'|translate}}\" nzValue=\"Male\"></nz-option>\r\n                                </nz-select>\r\n                            </div>\r\n                            <!-- Ngày sinh -->\r\n                            <div nz-col nzSpan=\"8\">\r\n                                <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n                                <nz-date-picker formControlName=\"datebirth\" nzPlaceHolder=\"{{'Select date of birth' | translate}}\" (ngModelChange)=\"onChangeDatePicker($event)\"></nz-date-picker>\r\n                            </div>\r\n                        </ng-container>\r\n            \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div class=\"medium-size\"><b>{{'Member tier' | translate}}</b></div>\r\n                    <nz-form-control>\r\n                        <nz-select nzShowSearch [nzAllowClear]=\"false\" formControlName=\"id_customer_class\" (ngModelChange)=\"groupChange($event)\">\r\n                            <nz-option [nzValue]=\"null\" nzLabel=\"{{'Undefined' | translate}}\">\r\n                            </nz-option>\r\n                            <nz-option *ngFor=\"let item of customerGroups\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n\r\n                    </nz-form-control>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <div><b class='label'>{{'Note' | translate}}</b></div>\r\n                    <textarea nz-input placeholder=\"{{'Enter note' | translate}}\" [nzAutosize]=\"{ minRows: 3, maxRows: 5 }\" formControlName=\"note\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row>\r\n\r\n                <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n                    <div></div>\r\n                    <label nz-checkbox (ngModelChange)=\"changeDebtEnable($event)\" formControlName=\"debt_enable\">{{'Debit permission' | translate}}</label>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n    <p *nzModalContent>{{'Are you sure to delete this customer?' | translate}}</p>\r\n</nz-modal>\r\n"],"names":["FormGroup","FormControl","Validators","i0","item_r19","item_r20","item_r21","item_r22","_r16","_r17","item_r48","item_r49","item_r50","item_r51","_r45","_r46","ctx_r5","_r38","CustomerGroupComponent","constructor","router","vhQuerySales","vhQuery","vhAlgorithm","vhComponent","languageService","nzModalService","getlocalCustomerClasss","enable","month_of_year","points","money","JSON","parse","localStorage","getItem","symbol","text","ngOnInit","getData","initFormAdd","formAdd","name","required","id_discount_bill","id_discount_sales","id_earning_points_bill","id_earning_points_product","exchange_coupon_enable","exchange_voucher_enable","exchange_payment_card_enable","earned_points_clear_auto","payment","initFormEdit","data","formEdit","Promise","all","getDiscount_saless","getEarningPointsBills","getEarningPointsProducts","then","discount_saless","earning_point_bills","earning_points_products","customer_group","sortStringbyASC","map","item","number_customer","getlocalCustomers","filter","type","i","id_customer_class","_id","length","list_discount_bills","getlocalDiscount_bills","list_discount_saless","list_earning_point_bills","list_earning_points_products","sort","a","b","changeAlias","toLowerCase","checkExistGroup","groupName","resolve","reject","index","findIndex","openAdd","visible_add","reset","closeAdd","getValue","value","newNameGroup","addGroup","res","showToast","translate","parseInt","parseFloat","addCustomerClass","response","push","Object","alertMessageDesktop","error","err","openEdit","visible_detail","data_selected","closeEdit","editGroup","valid","updateCustomerClass","bool","goBack","navigate","deleteGroup","confirm","nzTitle","nzOnOk","showLoading","deleteCustomerClass","customers","promise","updateCustomer","asyncPromiseAll","array","splice","indexOf","hideLoading","nzCancelText","finally","gotoDetailGroup","state","group","changePaymentBill","field","replaceAll","gotoAddDiscountInvoice","gotoAddDiscountSales","gotoAddPointInvoice","gotoAddPointProduct","selectors","decls","vars","consts","template","ctx","_r3","item_r8","$event","data_r6","DetailGroupComponent","lang","cdRef","getCurrentNavigation","extras","ngAfterViewInit","doRefreshData","customerGroups","list_customer","list_search_customer","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","searchCustomer","event","keySearch","searchList","searchCustomerModal","list_customer_valid","list_search_customer_valid","groupChange","ev","catch","console","handleCancel","isVisibleModalAdd","handleOk","Array","arr","checked","openModal","ele","sortTable","colName","nameCol","sortVietnamesebyASC","sortVietnamesebyDESC","phoneCol","sortNumberbyASC","sortNumberbyDESC","emailCol","sortStringbyDESC","addressCol"],"sourceRoot":"webpack:///"}