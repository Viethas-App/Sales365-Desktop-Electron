{"version":3,"file":"src_app_sales_menu_manage_products_combo_combo_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiCoDI,IAAAA,qEAAAA;AACIA,IAAAA,oDAAAA;;AACJA,IAAAA,mEAAAA;;;;AADIA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA,MAAAA,yDAAAA;;;;;;AADJA,IAAAA,wDAAAA;;;;;AAAeA,IAAAA,wDAAAA;;;;;;AAkBfA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAyBA,IAAAA,oDAAAA;;AAAsCA,IAAAA,0DAAAA;AACnEA,IAAAA,0DAAAA;;;;AAD6BA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;AAkB/CA,IAAAA,uDAAAA;;;;;AAAgDA,IAAAA,wDAAAA,4BAAsB,SAAtB,EAAsBC,eAAtB;;;;;;;;AAIhDD,IAAAA,uDAAAA;AACAA,IAAAA,4DAAAA;AAEIA,IAAAA,uDAAAA;;AAEAA,IAAAA,4DAAAA;AAAQA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;;AAAA;;AAAA;AAAA;AAAA;AAGNA,IAAAA,oDAAAA;;AACFA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;;;;;;;AAPyBA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA,gBAAAA,yDAAAA;AAGnBA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA,uCAA8B,UAA9B,EAA8B,kEAA9B;AAEAA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA,MAAAA,yDAAAA;;;;;;AAaIA,IAAAA,qEAAAA;AACIA,IAAAA,oDAAAA;;AACJA,IAAAA,mEAAAA;;;;AADIA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA,MAAAA,yDAAAA;;;;;;AADJA,IAAAA,wDAAAA;;;;;AAAeA,IAAAA,wDAAAA;;;;;;AA4C/CA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAAyBA,IAAAA,0DAAAA;AAChCA,IAAAA,0DAAAA;AAGJA,IAAAA,0DAAAA;;;;AAJWA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;AAwCaA,IAAAA,uDAAAA;;;;;AAAgEA,IAAAA,mEAAAA;AAAwBA,IAAAA,wDAAAA;;;;;;;;AAQ5FA,IAAAA,4DAAAA;AAAqJA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA;AAAA;AAArJA,IAAAA,0DAAAA;;;;;;AAAkCA,IAAAA,wDAAAA,8DAAgD,SAAhD,EAAgD,mCAAhD;;;;;;;;AAClCA,IAAAA,4DAAAA;AAA4IA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA;AAAA;AAA5IA,IAAAA,0DAAAA;;;;;;AAAmCA,IAAAA,wDAAAA,8DAAgD,SAAhD,EAAgD,yBAAhD;;;;;;;;AAhB3CA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AAAIA,IAAAA,oDAAAA;AAAeA,IAAAA,0DAAAA;AACnBA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAA+BA,IAAAA,wDAAAA;AAAA;AAAA;AAAA;AAAA,OAAwB,eAAxB,EAAwB;AAAA;AAAA;AAAA;AAAA;AAAA,KAAxB;;AAC3BA,IAAAA,wDAAAA;AAEJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAiBA,IAAAA,wDAAAA;AAAA;AAAA;AAAA;AAAAE;AAAA;AAAA,OAAqD,eAArD,EAAqD;AAAA;AAAA;AAAA;AAAA,KAArD;AAAyJF,IAAAA,0DAAAA;AAC9KA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,wDAAAA;AACAA,IAAAA,wDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,oDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAA8DA,IAAAA,wDAAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2BA,IAAAA,0DAAAA;AAC7FA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;;;;;;AAtBkCA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA,8EAAAA,2DAAAA;AAE1BA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA;AAEiHA,IAAAA,uDAAAA;AAAAA,IAAAA,mEAAAA,kBAAAA,yDAAAA;AAAlFA,IAAAA,wDAAAA;AACCA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AAKuCA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA,cAAY,SAAZ,EAAYE,iBAAZ,EAAY,OAAZ,EAAY,GAAZ,EAAY,OAAZ,EAAY,UAAZ;AAG/DF,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AACAA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AAGRA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA;;;;;;;;;;;;AA/CpBA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAmCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAAuBA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AACjEA,IAAAA,4DAAAA;AAAiCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAAgCA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AACxEA,IAAAA,4DAAAA;AAAiCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAAsBA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AAC9DA,IAAAA,4DAAAA;AAAmCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAA0BA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AACpEA,IAAAA,4DAAAA;AAAmCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAA+BA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AACzEA,IAAAA,4DAAAA;AAAkCA,IAAAA,4DAAAA;AAAGA,IAAAA,oDAAAA;;AAA6BA,IAAAA,0DAAAA;AAAIA,IAAAA,0DAAAA;AACtEA,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,uDAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,oDAAAA;;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,uDAAAA;AACAA,IAAAA,uDAAAA;AACAA,IAAAA,uDAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,oDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,uDAAAA;AAEJA,IAAAA,0DAAAA;AACAA,IAAAA,wDAAAA;AAyBJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;;;;;AAtDmDA,IAAAA,uDAAAA;AAAAA,IAAAA,mEAAAA,eAAAA,yDAAAA;AAArCA,IAAAA,wDAAAA,aAAAA,6DAAAA,iCAAgC,QAAhC,EAAgCG,YAAhC,EAAgC,kBAAhC,EAAgC,KAAhC;AAGwCH,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AACFA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AACAA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AACEA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AACAA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AACDA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AAQjCA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA,MAAAA,yDAAAA;AAMAA,IAAAA,uDAAAA;AAAAA,IAAAA,gEAAAA;AAKaA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;;;;;;;;;;;;;;AA4CrBA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAmBA,IAAAA,wDAAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AAAmBA,IAAAA,wDAAAA;AAAA;AAAA;AAAA;AAAA;AAA0BA,IAAAA,0DAAAA;AACjDA,IAAAA,0DAAAA;;;;;AAJ8EA,IAAAA,wDAAAA,YAAAA,6DAAAA;AAClBA,IAAAA,uDAAAA;AAAAA,IAAAA,mEAAAA;AAA0EA,IAAAA,mEAAAA;AAE/GA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;;;;;;AAEvBA,IAAAA,uDAAAA;;;;;;;;;;;;;;AAdpBA,IAAAA,qEAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAwBA,IAAAA,4DAAAA;AAAsDA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA,OAAqB,eAArB,EAAqB;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA,KAArB;;AAAtDA,IAAAA,0DAAAA;AACxBA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,wDAAAA;AAKAA,IAAAA,wDAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;AACJA,IAAAA,mEAAAA;;;;;AAjBgMA,IAAAA,uDAAAA;AAAAA,IAAAA,mEAAAA,gBAAAA,yDAAAA;AAA1GA,IAAAA,wDAAAA,6BAAqB,gBAArB,EAAqBA,6DAAAA,QAArB;AAK7CA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AAEkBA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AAKvBA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;;;;;;;;AAOhCA,IAAAA,4DAAAA;AAAiJA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA;AAAkCA,IAAAA,oDAAAA;;AACnKA,IAAAA,0DAAAA;AAChBA,IAAAA,4DAAAA;AAA8JA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA;AAA4BA,IAAAA,oDAAAA;;AAAsBA,IAAAA,0DAAAA;;;;AAF7BA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;AAEOA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;;;AAzBlMA,IAAAA,4DAAAA;AAA8EA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA,OAAqC,QAArC,EAAqC;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA,KAArC,EAAqC,YAArC,EAAqC;AAAAA,MAAAA,2DAAAA;AAAA;AAAA;AAAA,KAArC;AAE1EA,IAAAA,wDAAAA;AAoBAA,IAAAA,wDAAAA,qFAAAA,oEAAAA;AAKJA,IAAAA,0DAAAA;;;;;;;AA3BoHA,IAAAA,mEAAAA;AAA1GA,IAAAA,wDAAAA,mBAAqC,WAArC,EAAqCI,6BAArC,EAAqC,gBAArC,EAAqC,KAArC;;;;;;;;;;;;;;;;;;;;;;;ADvMJ,MAAOC,YAAP,CAAmB;AAgBvBC,cACUC,MADV,EAEUC,OAFV,EAGUC,WAHV,EAISC,eAJT,EAKUC,YALV,EAMSC,WANT,EAOUC,KAPV,EAOkC;AANxB;AACA;AACA;AACD;AACC;AACD;AACC;AAtBH,oBAAkB,EAAlB;AACA,sBAAoB,EAApB;AACA,qBAAmB,EAAnB;AACA,0BAAwB,EAAxB;AAEP,gBAAY,EAAZ;AACA,iBAAa,CAAb;AACA,iBAAgB,CAAhB;AAEA,mBAAmB,IAAnB;AACA,uBAAmB,KAAKN,MAAL,CAAYO,oBAAZ,GAAmCC,MAAnC,CAA0CC,KAA1C,CAAgDC,WAAnE;AACA,qBAAiB,EAAjB;AACA,sBAAsB,KAAtB;AAEA,yBAAgB,KAAKN,YAAL,CAAkBO,iBAAlB,CAAoCnB,yEAApC,CAAhB,CAQkC,CA8DlC;;AACA,iCAAwB,KAAxB;AA2BA,mBAAkB,EAAlB;AA2LA;;AACA,4BAA4B,KAA5B;AArRK;;AAELqB,UAAQ;AACN,SAAKC,QAAL;AACA,SAAKC,YAAL;AAED;;AACDC,aAAW;AACT;AACA,QAAI,CAAC,KAAKC,UAAN,IAAoB,KAAKC,SAAL,CAAeC,KAAf,CAAqB,KAArB,CAAxB,EACE,KAAKlB,OAAL,CAAamB,eAAb,CAA6B,CAAC,KAAKF,SAAL,CAAeC,KAAf,CAAqB,KAArB,CAAD,CAA7B,EAA4DE,IAA5D,CAAiE,MAAK,CAAI,CAA1E;AACH;;AACDC,oBAAkB;AAChB,QAAIC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAJ,EACE,KAAKC,YAAL,GAAoBF,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCE,YAAvC,GAAsDH,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CE,YAAjG,GAAgH,IAApI;AAEF,SAAKpB,KAAL,CAAWqB,aAAX;AACD;AAED;;;;;;AAIAb,UAAQ;AACN,SAAKI,SAAL,GAAiB,IAAI5B,qDAAJ,CAAc;AAC7BsC,UAAI,EAAE,IAAIvC,uDAAJ,CAAgB,EAAhB,EAAoB,CAACE,+DAAD,CAApB,CADuB;AAE7BuC,SAAG,EAAE,IAAIzC,uDAAJ,CAAgB,EAAhB,CAFwB;AAG7B0C,aAAO,EAAE,IAAI1C,uDAAJ,CAAgB,EAAhB,CAHoB;AAI7B;AACA2C,mBAAa,EAAE,IAAI3C,uDAAJ,CAAgB,KAAhB,CALc;AAM7B4C,cAAQ,EAAE,IAAI5C,uDAAJ,CAAgB,EAAhB,CANmB;AAO7B6C,WAAK,EAAE,IAAI7C,uDAAJ,CAAgB,CAAhB,CAPsB;AAQ7B8C,UAAI,EAAE,IAAI9C,uDAAJ,CAAgB,EAAhB,EAAoB,CAACE,+DAAD,CAApB,CARuB;AAS7B6C,iBAAW,EAAE,IAAI/C,uDAAJ,CAAgB,EAAhB,EAAoB,CAACE,+DAAD,CAApB;AATgB,KAAd,CAAjB;AAWD,GA3DsB,CA6DvB;;;AACA8C,YAAU;AACR,QAAIC,UAAU,GAAG,EAAjB;;AACA,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,EAA5B,EAAgCA,KAAK,EAArC,EAAyC;AACvCD,gBAAU,IAAIE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,CAAd;AACD;;AACD,SAAKC,YAAL,CAAkBL,UAAlB;;AACA,QAAI,KAAKP,OAAT,EAAkB;AAChB,WAAKb,SAAL,CAAe0B,QAAf,CAAwB,SAAxB,EAAmCC,QAAnC,CAA4CP,UAA5C;AACD;AACF;AAED;;;;;;AAIAK,cAAY,CAACZ,OAAD,EAAgB;AAC1B,QAAIe,aAAa,GAAG,KAAK1C,YAAL,CAAkB2C,+BAAlB,CAAkDhB,OAAlD,CAApB;;AACA,QAAIe,aAAa,IAAI,IAArB,EAA2B;AACzB,WAAKf,OAAL,GAAe,IAAf;AACD,KAFD,MAEO;AACL,WAAKA,OAAL,GAAe,KAAf;AACD;AACF;;AAGDiB,eAAa;AACX,SAAKC,qBAAL,GAA6B,IAA7B;AACD;;AAEDC,uBAAqB;AACnB,SAAKD,qBAAL,GAA6B,KAA7B;AACD;AAGD;;;;;;AAIAlC,cAAY;AACVoC,WAAO,CAACC,GAAR,CAAY,KAAKhD,YAAL,CAAkBiD,sBAAlB,EAAZ;AAEA,SAAKC,QAAL,GAAgB,KAAKlD,YAAL,CAAkBiD,sBAAlB,CAAyC7D,mFAAzC,EAAiEgE,MAAjE,CAAwEC,CAAC,IAAI,CAACA,CAAC,CAACzB,aAAhF,EAA+F0B,GAA/F,CAAmGC,IAAI,IAAG;AACxH,UAAIxB,IAAI,GAAG,KAAK/B,YAAL,CAAkBwD,eAAlB,CAAkCD,IAAI,CAACE,KAAvC,EAA8C,CAA9C,CAAX;AACA,2DAAYF,IAAZ,GAAgB;AAAEG,cAAM,EAAE,KAAV;AAAiBC,eAAO,EAAE;AAA1B,OAAhB,GAAqD5B,IAArD;AACD,KAHe,CAAhB;AAIA,SAAK6B,UAAL,GAAkB,KAAKV,QAAvB;AACAH,WAAO,CAACC,GAAR,CAAY,KAAKE,QAAjB;AAEA,SAAKW,SAAL,GAAiB,KAAKD,UAAtB;AACD;AAGD;;;;;;AAIAE,YAAU,CAAC/C,KAAD,EAAc;AACtB,QAAIgD,OAAO,GAAW,KAAK9D,WAAL,CAAiB+D,WAAjB,CAA6BjD,KAAK,CAACkD,WAAN,EAA7B,CAAtB;AACA,QAAIlD,KAAK,CAACmD,MAAV,EAAkB,KAAKL,SAAL,GAAiB,KAAK5D,WAAL,CAAiB2D,UAAjB,CAA4BG,OAA5B,EAAqC,KAAKH,UAA1C,EAAsD,CAAC,MAAD,CAAtD,CAAjB,CAAlB,KACK,KAAKC,SAAL,GAAiB,KAAKD,UAAtB;AACN;AAED;;;;;;AAIAO,iBAAe;AACb,SAAKC,cAAL,GAAsB,KAAKR,UAAL,CAAgBR,MAAhB,CAAuBG,IAAI,IAAIA,IAAI,CAACG,MAApC,EAA4CJ,GAA5C,CAAgDD,CAAC,IAAG;AAAE,6CAAWA,CAAX,GAAY;AAAEgB,gBAAQ,EAAE,CAAZ;AAAeC,oBAAY,EAAGjB,CAAC,CAACvB;AAAhC,OAAZ;AAAmD,KAAzG,CAAtB;AACA,SAAKyC,IAAL,GAAY,KAAKH,cAAjB;AACAI,cAAU,CAAC,MAAM,KAAKC,WAAL,CAAiB,KAAKL,cAAtB,CAAP,EAA8C,GAA9C,CAAV;AACA,SAAKM,UAAL;AACA,SAAK7B,qBAAL,GAA6B,KAA7B;AACD;AAED;;;;;;AAIA4B,aAAW,CAACE,GAAD,EAAW;AACpBA,OAAG,CAACC,OAAJ,CAAYrB,IAAI,IAAG;AACjB,UAAI,CAACA,IAAI,CAACsB,aAAV,EAAyB,KAAKC,SAAL,CAAe,aAAavB,IAAI,CAACwB,GAAjC,IAAwC,KAAK9E,WAAL,CAAiB+E,SAAjB,CAA2B,cAAczB,IAAI,CAACwB,GAA9C,CAAxC,CAAzB,KACK,KAAKD,SAAL,CAAe,aAAavB,IAAI,CAACsB,aAAjC,IAAkD,KAAK5E,WAAL,CAAiB+E,SAAjB,CAA2B,cAAczB,IAAI,CAACsB,aAA9C,CAAlD;AACN,KAHD;AAID;AAED;;;;;;AAIAH,YAAU,CAACO,IAAD,EAAW;AACnB,QAAIA,IAAJ,EAAU;AACR,UAAInD,KAAK,GAAW,EAApB;;AACA,UAAImD,IAAI,CAACJ,aAAT,EAAwB;AAAE/C,aAAK,GAAG,KAAKgD,SAAL,CAAe,aAAaG,IAAI,CAACJ,aAAjC,EAAgDK,WAAhD,EAAR;AAAwE,OAAlG,MACK;AAAEpD,aAAK,GAAG,KAAKgD,SAAL,CAAe,aAAaG,IAAI,CAACF,GAAjC,EAAsCG,WAAtC,EAAR;AAA8D;;AACrED,UAAI,CAACnD,KAAL,GAAaqD,UAAU,CAACrD,KAAD,CAAvB;AACD;;AACD,SAAKsD,KAAL,GAAa,KAAKb,IAAL,CAAUc,MAAV,CAAiB,CAACC,IAAD,EAAeC,IAAf,KAAwBD,IAAI,GAAGC,IAAI,CAAClB,QAAL,GAAgBkB,IAAI,CAACzD,KAArE,EAA4E,CAA5E,CAAb;AAGA,SAAKhB,SAAL,CAAe0B,QAAf,CAAwB,OAAxB,EAAiCC,QAAjC,CAA0C,KAAK2C,KAA/C;AACD,GAlKsB,CAoKvB;;;AACAI,YAAU,CAACC,IAAD,EAAK;AACb,SAAK3F,WAAL,CAAiB4F,YAAjB,CAA8B,KAAK3F,eAAL,CAAqB4F,SAArB,CAA+B,SAA/B,CAA9B,EAAyE,EAAzE,EAA6E,GAAG,KAAK5F,eAAL,CAAqB4F,SAArB,CAA+B,sCAA/B,CAAsE,EAAtJ,EAA0J,IAA1J,EAAgK,KAAK5F,eAAL,CAAqB4F,SAArB,CAA+B,QAA/B,CAAhK,EAA0M1E,IAA1M,CAA+M,MAAK;AAClN,WAAKmD,cAAL,CAAoBwB,MAApB,CAA2B,KAAKxB,cAAL,CAAoByB,SAApB,CAA8BtC,IAAI,IAAIA,IAAI,CAAC/B,IAAL,IAAaiE,IAAI,CAACjE,IAAxD,CAA3B,EAA0F,CAA1F;AACA,WAAKqC,SAAL,CAAeP,GAAf,CAAmBC,IAAI,IAAG;AACxB,YAAIA,IAAI,CAAC/B,IAAL,IAAaiE,IAAI,CAACjE,IAAtB,EAA4B;AAC1B+B,cAAI,CAACI,OAAL,GAAe,MAAf;AACAJ,cAAI,CAACzB,KAAL,GAAa2D,IAAI,CAACnB,YAAlB;AACAf,cAAI,CAACG,MAAL,GAAc,KAAd;AACD;AACF,OAND;AAOA,WAAKa,IAAL,GAAY,KAAKH,cAAjB;AACA,WAAKM,UAAL;AACA,WAAKI,SAAL,CAAe,aAAaW,IAAI,CAACV,GAAjC,IAAwC,IAAxC;AACAe,aAAO,CAACC,GAAR,CAAY,CAAC,KAAKjG,WAAL,CAAiBkG,WAAjB,CAA6B,EAA7B,EAAiC,qBAAjC,EAAwD,IAAxD,EAA8D,IAA9D,EAAoE,KAApE,CAAD,CAAZ,EACGC,OADH,CACW,MAAM,KAAKnG,WAAL,CAAiBoG,WAAjB,CAA6B,CAA7B,CADjB;AAED,KAdD,EAcG,MAAK,CAAI,CAdZ;AAeD;;AAEDC,QAAM;AACJ,SAAKvG,MAAL,CAAYwG,QAAZ,CAAqB,CAAC,wCAAD,CAArB,EAAiE;AAAE/F,WAAK,EAAE,KAAKC;AAAd,KAAjE;AACD;AAED;;;;;;AAIA+F,WAAS;AAAA;;AACP,QAAIC,MAAM,GAAG,KAAKC,SAAL,CAAe,KAAKzF,SAApB,EAA+BC,KAA5C;AACAuF,UAAM,CAAC,OAAD,CAAN,GAAkB,CAAC;AACjB3E,aAAO,EAAE2E,MAAM,CAAC3E,OADC;AAEjBG,WAAK,EAAEwE,MAAM,CAACxE,KAFG;AAGjBC,UAAI,EAAEuE,MAAM,CAACvE,IAHI;AAIjByE,WAAK,EAAE,CAJU;AAKjBC,aAAO,EAAE;AALQ,KAAD,CAAlB;AAOA,WAAOH,MAAM,CAAC3E,OAAd;AACA,WAAO2E,MAAM,CAACxE,KAAd;AACA,WAAOwE,MAAM,CAACvE,IAAd;AACA,SAAKjC,WAAL,CAAiBkG,WAAjB,CAA6B,EAA7B,EAAiC,qBAAjC,EAAwD/E,IAAxD,CAA6D,MAAK;AAChE,UAAI,CAAC,KAAKU,OAAV,EAAmB;AACjB,aAAK7B,WAAL,CAAiBoG,WAAjB,CAA6B,CAA7B,EAAgCjF,IAAhC,CAAqC,MAAM,KAAKnB,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,wBAA/B,CAAjC,EAA2F,aAA3F,CAA3C;AACD,OAFD,MAEO;AACL,aAAK3F,YAAL,CAAkB2G,UAAlB,CAA4BC,gCAAMN,MAAN,GAAY;AAAEO,cAAI,EAAEzH,yEAAYoB;AAApB,SAAZ,CAA5B,EAAgES,IAAhE;AAAA,gJAAqE,WAAO;AAAE8D,eAAF;AAAOvD;AAAP,WAAP,EAA6B;AAChG,iBAAI,CAACX,UAAL,GAAkB,IAAlB;;AACA,gBAAI,KAAI,CAAC0D,IAAL,CAAUL,MAAd,EAAsB;AACpB,oBAAM,KAAI,CAAC4C,iBAAL,CAAuB/B,GAAvB,EAA4B,KAAI,CAACR,IAAjC,CAAN;AACD;;AACD,iBAAI,CAACzE,WAAL,CAAiBoG,WAAjB,CAA6B,CAA7B,EAAgCjF,IAAhC,CAAqC,MAAK;AACxC,mBAAI,CAACnB,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiClF,IAAI,GAAG,GAAP,GAAc,KAAI,CAACzB,eAAL,CAAqB4F,SAArB,CAA+B,6BAA/B,CAA/C,EAA+G,eAA/G;;AACA,mBAAI,CAACQ,MAAL;AACD,aAHD;AAID,WATD;;AAAA;AAAA;AAAA;AAAA,aASGY,KATH,CASSC,GAAG,IAAG;AACb,eAAKlH,WAAL,CAAiBoG,WAAjB,CAA6B,CAA7B,EAAgCjF,IAAhC,CAAqC,MAAM,KAAKnB,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,0DAA/B,CAAjC,EAA6H,aAA7H,CAA3C;AACD,SAXD;AAYD;AACF,KAjBD;AAkBD;AAED;;;;;;;;AAMAsB,aAAW,CAACC,IAAD,EAAOC,KAAP,EAAY;AACrB,QAAIpF,IAAI,GAAG,KAAK/B,YAAL,CAAkBwD,eAAlB,CAAkC0D,IAAI,CAACzD,KAAvC,EAA8C0D,KAA9C,CAAX;AACAD,QAAI,CAACpF,KAAL,GAAaC,IAAI,CAACD,KAAlB;AACAoF,QAAI,CAACV,KAAL,GAAaW,KAAb;AACA3C,cAAU,CAAC,MAAK;AACd,WAAKE,UAAL,CAAgBwC,IAAhB;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GA5OsB,CA8OvB;;;AACOX,WAAS,CAACa,SAAD,EAAqB;AACnCR,UAAM,CAACS,IAAP,CAAYD,SAAS,CAAC5E,QAAtB,EAAgCoC,OAAhC,CAAyC0C,GAAD,IAAQ;AAC9C,UAAIA,GAAG,KAAK,MAAR,IAAkBA,GAAG,KAAK,SAA1B,IAAuCA,GAAG,KAAK,OAA/C,IAA0DA,GAAG,KAAK,MAAtE,EAA8E;AAC5E,YAAIF,SAAS,CAACG,GAAV,CAAcD,GAAd,EAAmBvG,KAAvB,EAA8B;AAC5B,cAAIA,KAAK,GAAGqG,SAAS,CAACG,GAAV,CAAcD,GAAd,EAAmBvG,KAAnB,CAAyByG,QAAzB,GAAoCC,IAApC,EAAZ;AACAL,mBAAS,CAACG,GAAV,CAAcD,GAAd,EAAmB7E,QAAnB,CAA4B1B,KAA5B;AACD;AACF;AACF,KAPD;AAQA,WAAOqG,SAAP;AACD;AAED;;;;;;AAIAN,mBAAiB,CAAC/B,GAAD,EAAM2C,KAAN,EAAkB;AACjC,WAAO,IAAI5B,OAAJ,CAAkB6B,OAAD,IAAY;AAClC,WAAK3H,YAAL,CAAkB4H,gBAAlB,CAAmC7C,GAAnC,EAAwC2C,KAAK,CAACpE,GAAN,CAAUmC,IAAI,IAAG;AACvD,YAAIyB,IAAI,GAAG;AACTW,oBAAU,EAAEpC,IAAI,CAACV,GADR;AAET8B,cAAI,EAAEpB,IAAI,CAACoB,IAFF;AAGTxC,kBAAQ,EAAEoB,IAAI,CAACpB,QAHN;AAITvC,eAAK,EAAE2D,IAAI,CAAC3D,KAJH;AAKT0E,eAAK,EAAEf,IAAI,CAACe;AALH,SAAX;AAOA,YAAIf,IAAI,CAACZ,aAAT,EAAwBqC,IAAI,CAAC,eAAD,CAAJ,GAAwBzB,IAAI,CAACZ,aAA7B;AACxB,eAAOqC,IAAP;AACD,OAVuC,CAAxC,EAUIjG,IAVJ,CAUU6G,MAAD,IAAW;AAClB,YAAIA,MAAJ,EAAYH,OAAO,CAAC,IAAD,CAAP;AACb,OAZD,EAYGI,KAAK,IAAG;AAETJ,eAAO,CAAC,KAAD,CAAP;AACD,OAfD;AAgBD,KAjBM,CAAP;AAkBD;AAED;;;;;;AAIAK,SAAO;AACL7G,YAAQ,CAAC8G,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC;AACD;AAED;;;AACAC,UAAQ,CAAC9E,CAAD,EAAG;AACT,UAAM+E,IAAI,GAAG/E,CAAC,CAACgF,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACA,SAAKzI,OAAL,CAAa0I,uBAAb,CAAqCH,IAArC,EAA2C,GAA3C,EAAgD,GAAhD,EAAqD,UAArD,EAAiE,KAAKtH,SAAL,CAAeC,KAAf,CAAqBW,GAArB,IAA4B,EAA7F,EAAiGT,IAAjG,CACEuH,QAAQ,IAAG;AACT,WAAK1H,SAAL,CAAe0B,QAAf,CAAwB,KAAxB,EAA+BC,QAA/B,CAAwC+F,QAAxC;AACA,WAAK1I,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAkC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,+BAA/B,CAAlC,EAAoG,eAApG;AACD,KAJH,EAKE,MAAK;AACH,WAAK7F,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAkC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,kBAA/B,CAAlC,EAAuF,aAAvF;AACD,KAPH;AASD;AASD;;;;;AAGA8C,aAAW,CAACC,YAAD,EAAkB;;;AAC3B,UAAM3H,KAAK,GAAG2H,YAAY,CAAC3H,KAAb,GAAqB,wBAAY,CAACA,KAAb,MAAkB,IAAlB,IAAkB4H,aAAlB,GAAkB,MAAlB,GAAkBA,GAAEnB,QAAF,EAAlB,MAA8B,IAA9B,IAA8BoB,aAA9B,GAA8B,MAA9B,GAA8BA,GAAEnB,IAAF,EAAnD,GAA8D,EAA5E;;AACA,QAAI1G,KAAJ,EAAW;AACT;AACA,UAAIoB,KAAK,GAAG,KAAKnC,YAAL,CAAkBO,iBAAlB,GACG6C,MADH,CACUyF,GAAG,IAAIA,GAAG,CAAChC,IAAJ,IAAYzH,yEAD7B,EAEGyG,SAFH,CAEatC,IAAI,IAAI,KAAKtD,WAAL,CAAiB+D,WAAjB,CAA6BT,IAAI,CAAC/B,IAAlC,EAAwCyC,WAAxC,MAAyD,KAAKhE,WAAL,CAAiB+D,WAAjB,CAA6BjD,KAA7B,EAAoCkD,WAApC,EAF9E,CAAZ,CAFS,CAMT;;AACA,UAAI9B,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,aAAKrC,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,kBAA/B,CAAjC,EAAqF,aAArF;AACA;AACD,OAVQ,CAYT;;;AACA,WAAKmD,gBAAL,GAAwB,IAAxB;AACA,WAAK9I,YAAL,CAAkByI,WAAlB,CAA8B;AAAEjH,YAAI,EAAET,KAAR;AAAe8F,YAAI,EAAEzH,yEAAYoB;AAAjC,OAA9B,EAAmES,IAAnE,CAAyE4H,GAAD,IAAa;AACnF,aAAKH,YAAL,CAAkBK,aAAlB,CAAgChI,KAAhC,GAAwC,EAAxC,CADmF,CACvC;;AAC5C,aAAKiI,aAAL,CAAmBC,OAAnB,CAA2BJ,GAA3B,EAFmF,CAElD;;AACjC,aAAK/H,SAAL,CAAe0B,QAAf,CAAwB,aAAxB,EAAuCC,QAAvC,CAAgDoG,GAAG,CAAC9D,GAApD,EAHmF,CAGzB;;AAC1D,aAAKjF,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAkC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,sCAA/B,CAAlC,EAA2G,eAA3G;AACD,OALD,EAKGqB,GAAG,IAAG;AACPjE,eAAO,CAACC,GAAR,CAAYgE,GAAZ;AACA,aAAKlH,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,yDAA/B,CAAjC,EAA4H,aAA5H;AACD,OARD,EAQGM,OARH,CAQW,MAAK;AACd,aAAK6C,gBAAL,GAAwB,KAAxB;AACD,OAVD;AAWD,KAzBD,MA0BK;AACH,WAAKhJ,WAAL,CAAiB4G,SAAjB,CAA2B,IAA3B,EAAiC,KAAK3G,eAAL,CAAqB4F,SAArB,CAA+B,2BAA/B,CAAjC,EAA8F,aAA9F;AACD;AACF;;AAnVsB;;;mBAAZjG,cAAYL,+DAAAA,CAAAA,mDAAAA,GAAAA,+DAAAA,CAAAA,uDAAAA,GAAAA,+DAAAA,CAAAA,2FAAAA,GAAAA,+DAAAA,CAAAA,oFAAAA,GAAAA,+DAAAA,CAAAA,4DAAAA,GAAAA,+DAAAA,CAAAA,2DAAAA,GAAAA,+DAAAA,CAAAA,4DAAAA;AAAA;;;QAAZK;AAAYwJ;AAAAC;AAAA;;;;;;;;;;;;;;;;;ACbzB9J,MAAAA,4DAAAA;AAAwCA,MAAAA,wDAAAA;AAAA,eAAS+J,YAAT;AAAiB,OAAjB;AACpC/J,MAAAA,uDAAAA;AAA+CA,MAAAA,oDAAAA;;AACnDA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAAyBA,MAAAA,0DAAAA;AAChCA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAsEA,MAAAA,wDAAAA;AAAA,eAAS+J,eAAT;AAAoB,OAApB;AAClE/J,MAAAA,uDAAAA;AACAA,MAAAA,oDAAAA;;AAAsBA,MAAAA,0DAAAA;AAC9BA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAuCA,MAAAA,wDAAAA;AAAA,eAAS+J,aAAT;AAAkB,OAAlB;AACnC/J,MAAAA,4DAAAA;AAA+EA,MAAAA,wDAAAA;AAAA,eAAU+J,oBAAV;AAA0B,OAA1B;AAA/E/J,MAAAA,0DAAAA;AACAA,MAAAA,uDAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAKA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAA6BA,MAAAA,0DAAAA;AAAIA,MAAAA,0DAAAA;AACzCA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,uDAAAA;;AACAA,MAAAA,wDAAAA,0EAAAA,oEAAAA;AAKJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAKA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAAyBA,MAAAA,0DAAAA;AAAIA,MAAAA,0DAAAA;AACrCA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAwHA,MAAAA,wDAAAA;AAAAA,QAAAA,2DAAAA;;AAAA;;AAAA,eAAS+J,2BAAT;AAA+B,OAA/B;;AAAxH/J,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AAA6CA,MAAAA,wDAAAA;AAAA,eAAS+J,gBAAT;AAAqB,OAArB;;AAAiI/J,MAAAA,0DAAAA;AAClLA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,qEAAAA;AACIA,MAAAA,wDAAAA;AAGJA,MAAAA,mEAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAKA,MAAAA,4DAAAA;AAAiBA,MAAAA,oDAAAA;;AAA0BA,MAAAA,0DAAAA;AAAIA,MAAAA,0DAAAA;AACpDA,MAAAA,4DAAAA;;AAEIA,MAAAA,4DAAAA;;AAGEA,MAAAA,wDAAAA;AACFA,MAAAA,0DAAAA;AAEAA,MAAAA,wDAAAA,0EAAAA,oEAAAA;AAaJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAKA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAAsBA,MAAAA,0DAAAA;AAAIA,MAAAA,oDAAAA;AAACA,MAAAA,0DAAAA;AACnCA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,uDAAAA;;AACAA,MAAAA,wDAAAA,0EAAAA,oEAAAA;AAKJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAKA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAA6BA,MAAAA,0DAAAA;AAAIA,MAAAA,0DAAAA;AACzCA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,uDAAAA;;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AAEAA,MAAAA,uDAAAA;AAKJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AAEJA,MAAAA,0DAAAA;AAEAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAwBA,MAAAA,4DAAAA;AAAGA,MAAAA,oDAAAA;;AAAkCA,MAAAA,0DAAAA;AAAIA,MAAAA,0DAAAA;AACrEA,MAAAA,0DAAAA;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAmDA,MAAAA,wDAAAA;AAAA,eAAS+J,mBAAT;AAAwB,OAAxB;AAC/C/J,MAAAA,uDAAAA;AACAA,MAAAA,oDAAAA;;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,wDAAAA;AAOAA,MAAAA,wDAAAA;AAwDJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AAGAA,MAAAA,wDAAAA;;;;;;;;;;AAnNmDA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA,KAAAA,yDAAAA;AAK3BA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAEDA,MAAAA,uDAAAA;AAAAA,MAAAA,+DAAAA,CAAAA,yDAAAA;AAGyFA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,kEAAwD,SAAxD,EAAwDA,6DAAAA,wEAAxD;AAExFA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA,MAAAA,yDAAAA;AAIMA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAOeA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,YAAAA,6DAAAA,sDAA0D,KAA1D,EAA0D+J,uBAA1D,EAA0D/J,2DAA1D;AAQDA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA,KAAAA,yDAAAA;AAEaA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAE8BA,MAAAA,uDAAAA;AAAAA,MAAAA,mEAAAA,gBAAAA,yDAAAA;AAW3CA,MAAAA,uDAAAA;AAAAA,MAAAA,+DAAAA,CAAAA,yDAAAA;AAI8CA,MAAAA,uDAAAA;AAAAA,MAAAA,mEAAAA,gBAAAA,yDAAAA;AACqCA,MAAAA,uDAAAA;AAAAA,MAAAA,mEAAAA,mBAAAA,yDAAAA;AAI/CA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAa9BA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA,KAAAA,yDAAAA;AACLA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,eAAAA,yDAAAA;AAGXA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,0BAAwC,eAAxC,EAAwCA,yDAAAA,kCAAxC;AAE8BA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAmB5BA,MAAAA,uDAAAA;AAAAA,MAAAA,+DAAAA,CAAAA,yDAAAA;AAEaA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAE8BA,MAAAA,uDAAAA;AAAAA,MAAAA,mEAAAA,gBAAAA,yDAAAA;AAW3CA,MAAAA,uDAAAA;AAAAA,MAAAA,+DAAAA,CAAAA,yDAAAA;AAIkDA,MAAAA,uDAAAA;AAAAA,MAAAA,mEAAAA,gBAAAA,yDAAAA;AAA4CA,MAAAA,wDAAAA,eAAAA,6DAAAA;AAoBnFA,MAAAA,uDAAAA;AAAAA,MAAAA,+DAAAA,CAAAA,yDAAAA;AAMnBA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA,MAAAA,yDAAAA;AAKyCA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAO/BA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AA6DWA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChNQ;;;;;;;;;;;;;;;;;;;;ICUjD,mEAA+B;;;;IAyC3B,yEAAmH;IAA3E,kYAAuC,QAAQ,KAAE;IACvF,yEAAyC;IACvC,qEAA+F;IACjG,4DAAK;IACL,yEAA8C;IAAA,uDAAe;IAAA,4DAAK;IAClE,yEAAqB;IAAA,uDAAsB;IAAA,4DAAK;IAChD,yEAAoB;IAAA,uDAAmD;IAAA,4DAAK;IAC9E,4DAAK;;;;IALyB,0DAAoE;IAApE,gMAAoE;IAElD,0DAAe;IAAf,6EAAe;IACxC,0DAAsB;IAAtB,sFAAsB;IACvB,0DAAmD;IAAnD,0HAAmD;;;;IA2CzE,yEAAqE;IACnE,yEAAyC;IACvC,qEAA+F;IACjG,4DAAK;IACL,yEAA8C;IAAA,uDAAe;IAAA,4DAAK;IAClE,yEAAqB;IAAA,uDAAsB;IAAA,4DAAK;IAChD,yEAAoB;IAAA,uDAAmD;IAAA,4DAAK;IAC5E,yEAAwB;IACtB,iFACuF;IAD1E,sUAAgC;IAE7C,4DAAY;IACd,4DAAK;IACP,4DAAK;;;;IAVyB,0DAAoE;IAApE,gMAAoE;IAElD,0DAAe;IAAf,6EAAe;IACxC,0DAAsB;IAAtB,sFAAsB;IACvB,0DAAmD;IAAnD,0HAAmD;IAExD,0DAAgC;IAAhC,0FAAgC;;;;ADpGtD,MAAM,cAAc;IAczB,YACU,MAAc,EACf,WAAwB,EACvB,YAA0B,EAC3B,eAAgC,EAC/B,KAAwB,EACxB,WAAwB;QALxB,WAAM,GAAN,MAAM,CAAQ;QACf,gBAAW,GAAX,WAAW,CAAa;QACvB,iBAAY,GAAZ,YAAY,CAAc;QAC3B,oBAAe,GAAf,eAAe,CAAiB;QAC/B,UAAK,GAAL,KAAK,CAAmB;QACxB,gBAAW,GAAX,WAAW,CAAa;QAlBlC,2BAAsB,GAAQ,EAAE,CAAC;QACjC,cAAS,GAAQ,EAAE,CAAC;QACpB,mBAAc,GAAQ,EAAE,CAAC;QACzB,cAAS,GAAQ,EAAE,CAAC;QACpB,kBAAa,GAAQ,GAAG,CAAC,CAAC,WAAW;QACrC,kBAAa,GAAW,CAAC,CAAC,CAAC,qBAAqB;QAEhD,aAAQ,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QACpC,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QA0CnE,sBAAiB,GAAG,EAAE;QA4HtB,2BAA2B;QAC3B,aAAQ,GAAG,KAAK,CAAC,CAAa,6BAA6B;QAC3D,iBAAY,GAAG,KAAK,CAAC,CAAS,2BAA2B;QACzD,cAAS,GAAG,KAAK,CAAC,CAAY,wBAAwB;IA9JlD,CAAC;IAIL,QAAQ;QACN,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAID,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAE;YACrO,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY;kBAC5H,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC;SACjM;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IAID,gCAAgC;IAChC,OAAO;QACL,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;YAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;YACpD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;SACrD;QACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACrC,CAAC;IAID;;OAEG;IACH,iBAAiB;QACf,IAAI,CAAC,YAAY,CAAC,kCAAkC,CAAC,yEAAY,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAC3E,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,yEAAY,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;YACvJ,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,sBAAsB;YACpD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,sBAAsB,EAAE,MAAM,CAAC,CAAC;YAC5F,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEpC,CAAC,CAAC,CAAC;IACL,CAAC;IAID;;;;OAIG;IACH,YAAY,CAAC,IAAS;QACpB,uCACK,IAAI,KACP,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAC5B,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,IAC3B;IACH,CAAC;IAGD;;;OAGG;IACH,oBAAoB,CAAC,EAAE,EAAE,KAAK,EAAE,MAAO,EAAE,MAAO;QAC9C,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC5B,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAGtB,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACtD,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,IAAI,CAAC,CAAC;YAC7G,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;gBACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;gBAC/E,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;aAC1F;QACH,CAAC,EAAE,KAAK,CAAC,EAAE;YACT,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC;IAGJ,CAAC;IAED;;;OAGG;IACH,SAAS,CAAC,KAAK;QACb,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,KAAK,IAAI,GAAG,EAAE;YAChB,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;IACH,CAAC;IAID;;OAEG;IACH,iBAAiB,CAAC,KAAK;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,yEAAY,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;QACvG,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,KAAK,IAAI,CAAC;gBAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,IAAI,KAAK,CAAC,CAAC;YAC5F,6GAA6G;YAC7G,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC;YACrC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACnC;IACH,CAAC;IAID;;;OAGG;IACH,YAAY,CAAC,KAAK;QAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAC1C,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,EACjD,IAAI,CAAC,cAAc,EACnB,CAAC,MAAM,CAAC,CACT,CAAC;IACJ,CAAC;IAID,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,kCAAkC,CAAC,CAAC,CAAC;IAC7D,CAAC;IAGD,OAAO;QACL,IAAI,WAAW,GAAG,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE;QACrH,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4CAA4C,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC;IACnG,CAAC;IAGD,eAAe,CAAC,IAAI,EAAE,YAAsB;QAC1C,IAAI,WAAW,GAAG,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC;QACtH,MAAM,KAAK,GAAG;YACZ,IAAI,EAAE,IAAI;YACV,WAAW;SACZ;QACD,IAAI,YAAY,EAAE;YAChB,KAAK,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;SAC9B;QACD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+CAA+C,CAAC,EAAE;YACtE,KAAK,EAAE,KAAK;SACb,CAAC,CAAC;IACL,CAAC;IASD;;;;OAIG;IACH,SAAS,CAAC,OAAO;QACf,IAAI,UAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,cAAc,CAAC;QAC1E,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC;QACxD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;IAC1F,CAAC;;4EA9LU,cAAc;4GAAd,cAAc;QCZ3B,yEAA2D;QAAnB,mIAAS,YAAQ,IAAC;QACxD,kEAA+C;QAAA,uDACjD;;QAAA,4DAAM;QACN,+EAAiD;QAC/C,yEAAsC;QACpC,yEAAsD;QACpD,oEAAG;QAAA,uDAA8B;;QAAA,4DAAI;QACvC,4DAAM;QACN,0EAAkD;QAChD,qFAA8C;QAC5C,4EACsC;QAD/B,sLAAuB,8EACnB,+BAAuB,IADJ;;QAA9B,4DACsC;QACxC,4DAAiB;QACjB,wMAEc;QAChB,4DAAM;QACN,0EAAiD;QAC/C,uEAAK;QACH,8EAAuE;QAApB,uIAAS,aAAS,IAAC;QACpE,oEAA+C;QAC/C,wDACF;;QAAA,4DAAS;QACX,4DAAM;QACR,4DAAM;QACR,4DAAM;QACN,uEAAK;QACH,iFAA0F;QAA/E,8MAAmC,0GAAmB,2BAAuB,IAA1C;QAC5C,8EAAgD;;QAC9C,2EAA0C;QACxC,wDAA8B;;QAAA,4EAA8C;QAC1E,wDAA2B;QAAA,4DAAO;QAAC,wDACvC;;QAAA,4DAAM;QACN,oFACyG;;QACvG,yEAAO;QACL,sEAAI;QACF,0EAAmC;QAAA,gEAAO;QAAA,4DAAK;QAC/C,0EAA6F;QAAlD,iKAA+B,cAAU,MAAM,CAAC,IAAC;QAC1F,qEAAG;QAAA,wDAA4B;;QAAA,4DAAI;QACnC,oEAAyF;QAC3F,4DAAK;QACL,0EACsE;QAApE,yKAAuC,cAAU,gBAAgB,CAAC,IAAC;QACnE,qEAAG;QAAA,wDAAsC;;QAAA,4DAAI;QAC7C,oEAA6F;QAC/F,4DAAK;QACL,0EACuD;QAArD,mKAAiC,cAAU,OAAO,CAAC,IAAC;QACpD,qEAAG;QAAA,wDAA+B;;QAAA,4DAAI;QACtC,oEAA0F;QAC5F,4DAAK;QACP,4DAAK;QACP,4DAAQ;QACR,yEAAO;QACL,2GAOK;QACP,4DAAQ;QACV,4DAAW;QACb,4DAAS;QACT,8EAA2D;;QACzD,2EAA0C;QACxC,wDAA8B;;QAAA,4EAA8C;QAC1E,wDAAwC;QAAA,4DAAO;QAAC,wDACpD;;QAAA,4DAAM;QACN,oFACwH;;QACtH,yEAAO;QACL,sEAAI;QACF,0EAAmC;QAAA,gEAAO;QAAA,4DAAK;QAC/C,0EAA6F;QAAlD,iKAA+B,cAAU,MAAM,CAAC,IAAC;QAC1F,qEAAG;QAAA,wDAA4B;;QAAA,4DAAI;QACnC,oEAAyF;QAC3F,4DAAK;QACL,0EACsE;QAApE,yKAAuC,cAAU,gBAAgB,CAAC,IAAC;QACnE,qEAAG;QAAA,wDAAsC;;QAAA,4DAAI;QAC7C,oEAA6F;QAC/F,4DAAK;QACL,0EACuD;QAArD,mKAAiC,cAAU,OAAO,CAAC,IAAC;QACpD,qEAAG;QAAA,wDAA+B;;QAAA,4DAAI;QACtC,oEAA0F;QAC5F,4DAAK;QACL,0EAAkC;QAChC,qEAAG;QAAA,wDAAqC;;QAAA,4DAAI;QAC9C,4DAAK;QACP,4DAAK;QACP,4DAAQ;QACR,yEAAO;QASL,4GAYK;QACP,4DAAQ;QACV,4DAAW;QACb,4DAAS;QACX,4DAAY;QACd,4DAAM;QACR,4DAAY;;;;;QAzHqC,0DACjD;QADiD,oJACjD;QAIS,0DAA8B;QAA9B,mJAA8B;QAGjB,0DAA6B;QAA7B,yEAA6B;QACpC,0DAAuB;QAAvB,kFAAuB;QAW5B,0DACF;QADE,oJACF;QAKO,0DAAmC;QAAnC,8FAAmC;QACnC,0DAAsC;QAAtC,+JAAsC;QAE3C,0DAA8B;QAA9B,4JAA8B;QAC5B,0DAA2B;QAA3B,sGAA2B;QAAQ,0DACvC;QADuC,uJACvC;QACU,0DAAiB;QAAjB,0EAAiB;QAMhB,0DAA4B;QAA5B,gJAA4B;QACpB,0DAAuD;QAAvD,oHAAuD;QAI/D,0DAAsC;QAAtC,0JAAsC;QAC9B,0DAA2D;QAA3D,wHAA2D;QAInE,0DAA+B;QAA/B,mJAA+B;QACvB,0DAAwD;QAAxD,qHAAwD;QAKlD,0DAAiB;QAAjB,6EAAiB;QAWnC,0DAAiD;QAAjD,0KAAiD;QAEtD,0DAA8B;QAA9B,4JAA8B;QAC5B,0DAAwC;QAAxC,mHAAwC;QAAQ,0DACpD;QADoD,uJACpD;QACU,0DAAiB;QAAjB,0EAAiB;QAMhB,0DAA4B;QAA5B,gJAA4B;QACpB,0DAAuD;QAAvD,oHAAuD;QAI/D,0DAAsC;QAAtC,0JAAsC;QAC9B,0DAA2D;QAA3D,wHAA2D;QAInE,0DAA+B;QAA/B,mJAA+B;QACvB,0DAAwD;QAAxD,qHAAwD;QAGhE,0DAAqC;QAArC,yJAAqC;QAavB,0DAAmB;QAAnB,6EAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGL;AACQ;AACW;AACZ;AACT;AACY;AACN;AACA;AACS;AACG;;;AAE/D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4DAAc;KAC1B;IACD;QACE,IAAI,EAAE,KAAK;QACX,SAAS,EAAE,4DAAY;KACxB;IACD;QACE,IAAI,EAAE,QAAQ;QACd,SAAS,EAAE,qEAAe;KAC3B;CACF;AAmBM,MAAM,WAAW;;sEAAX,WAAW;wGAAX,WAAW;4GAXb;YACP,yDAAY;YACZ,kEAAqB,CAAC,MAAM,CAAC;YAC7B,mEAAe;YACf,yEAAgB;YAChB,uDAAW;YACX,+DAAmB;YACnB,gEAAe;YACf,wDAAW;SACZ;mIAEU,WAAW,mBAfpB,4DAAc;QACd,4DAAY;QACZ,qEAAe,aAGf,yDAAY,6DAEZ,mEAAe;QACf,yEAAgB;QAChB,uDAAW;QACX,+DAAmB;QACnB,gEAAe;QACf,wDAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCqD;AAIX;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICiCL,wEAAmD;IAAA,uDACnD;;IAAA,qEAAe;;IADoC,0DACnD;IADmD,oKACnD;;;IADA,6IACe;;;IADA,kGAAkC;;;IAuBjD,0EAA4C;IACxC,+EAAyB;IAAA,uDAAsC;;IAAA,4DAAW;IAC9E,4DAAM;;IADuB,0DAAsC;IAAtC,0JAAsC;;;;IASvF,0EAA6C;IACzC,0EAA8E;IAC1E,gFAAkG;IAAvD,2WAAsD;IACjG,4DAAY;IACZ,2EAAoB;IAAA,uDAA+B;;IAAA,4DAAO;IAC9D,4DAAM;IACV,4DAAM;;IAFsB,0DAA+B;IAA/B,iJAA+B;;;IAezD,2EAA2G;;;IAA3D,mFAAsB;;;;IAItE,wEAAyB;IACzB,0EAAqH;IAEnH,2EAA8F;;IAE9F,6EAE2F;IAFnF,gZAAmC;IAGzC,uDACF;;IAAA,4DAAS;IACX,4DAAM;;;;IAPiB,0DAAiD;IAAjD,+JAAiD;IAGpE,0DAA8B;IAA9B,8FAA8B;IAE9B,0DACF;IADE,kJACF;;;IAmDxB,0EAA6E;IACzE,0EAAqB;IACjB,oEAAG;IAAA,uDAAyB;;IAAA,4DAAI;IACpC,4DAAM;IACV,4DAAM;;IAFK,0DAAyB;IAAzB,2IAAyB;;;IAmCZ,2EACY;;;IADgC,6FAAuB;IAAC,mFAAsB;;;;IAQ9F,4EAAoL;IAA5B,2aAA2B;IAAnL,4DAAoL;;;;IAAjJ,sHAAiD;;;;IACpF,4EAA2K;IAA5B,2aAA2B;IAA1K,4DAA2K;;;;IAAvI,sHAAiD;;;;IAhB7F,qEAAkD;IAC9C,yEAAyC;IACrC,qEAAiG;IACrG,4DAAK;IACL,qEAAI;IAAA,uDAAqE;IAAA,4DAAK;IAC9E,qEAAI;IACA,gFAA+J;IAAhI,uaAA0C;;IACrE,sIACY;IAChB,4DAAY;IAChB,4DAAK;IACL,yEAAqB;IACjB,wDACJ;IAAA,4DAAK;IACL,sEAAI;IACA,gIAAoL;IACpL,gIAA2K;IAC/K,4DAAK;IACL,0EAAoB;IAChB,wDACJ;IAAA,4DAAK;IACT,4DAAK;;;;IAnB6B,0DAAsE;IAAtE,oMAAsE;IAEhG,0DAAqE;IAArE,wJAAqE;IAE4C,0DAA6C;IAA7C,qKAA6C;IAApF,oFAAyB;IACnE,0DAAc;IAAd,oFAAc;IAK9C,0DACJ;IADI,8FACJ;IAEY,0DAAyB;IAAzB,yFAAyB;IACzB,0DAA0B;IAA1B,0FAA0B;IAGlC,0DACJ;IADI,oJACJ;;;;IA7ChB,0EAAmF;IAC/E,mFAAyJ;;IACrJ,wEAAO;IACH,qEAAI;IACA,yEAAmC;IAAA,oEAAG;IAAA,uDAAuB;;IAAA,4DAAI;IAAA,4DAAK;IACtE,0EAAiC;IAAA,qEAAG;IAAA,wDAAgC;;IAAA,4DAAI;IAAA,4DAAK;IAC7E,0EAAiC;IAAA,qEAAG;IAAA,wDAAsB;;IAAA,4DAAI;IAAA,4DAAK;IACnE,0EAAmC;IAAA,qEAAG;IAAA,wDAA0B;;IAAA,4DAAI;IAAA,4DAAK;IACzE,0EAAmC;IAAA,qEAAG;IAAA,wDAA+B;;IAAA,4DAAI;IAAA,4DAAK;IAC9E,0EAAkC;IAAA,qEAAG;IAAA,wDAA6B;;IAAA,4DAAI;IAAA,4DAAK;IAC/E,4DAAK;IACT,4DAAQ;IACR,yEAAO;IACH,sEAAI;IACA,iEAAS;IACT,0EAAgE;IAC5D,wDACJ;;IAAA,4DAAK;IACL,iEAAS;IACT,iEAAS;IACT,iEAAS;IACT,0EAAgF;IAC5E,wDACJ;IAAA,4DAAK;IACT,4DAAK;IACL,sHAqBK;IACT,4DAAQ;IACZ,4DAAW;IACf,4DAAM;;;IAhD6C,0DAAqC;IAArC,8JAAqC;IAA1E,iKAAgC;IAGQ,0DAAuB;IAAvB,0IAAuB;IACzB,0DAAgC;IAAhC,oJAAgC;IAChC,0DAAsB;IAAtB,0IAAsB;IACpB,0DAA0B;IAA1B,8IAA0B;IAC1B,0DAA+B;IAA/B,mJAA+B;IAChC,0DAA6B;IAA7B,iJAA6B;IAO9D,0DACJ;IADI,4JACJ;IAKI,0DACJ;IADI,2IACJ;IAEkB,0DAAgB;IAAhB,uFAAgB;;;IA+B1D,oEAAmB;IAAA,uDAAoD;;IAAA,4DAAI;;IAAxD,0DAAoD;IAApD,sKAAoD;;;;ADzMpE,MAAM,eAAe;IAgB1B,YACU,MAAc,EACd,OAAgB,EAChB,WAAwB,EACzB,eAAgC,EAC/B,YAA0B,EAC3B,WAAwB,EACvB,KAAwB,EACxB,eAAgC;QAPhC,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAS;QAChB,gBAAW,GAAX,WAAW,CAAa;QACzB,oBAAe,GAAf,eAAe,CAAiB;QAC/B,iBAAY,GAAZ,YAAY,CAAc;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACvB,UAAK,GAAL,KAAK,CAAmB;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAvB1C,YAAO,GAAY,IAAI,CAAC;QAExB,cAAS,GAAU,EAAE;QAIrB,cAAS,GAAU,EAAE,CAAC;QAEtB,gBAAW,GAAQ,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW;QAC9E,kBAAa,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,yEAAY,CAAC,CAAC;QAsLlE,6BAA6B;QAC7B,cAAS,GAAG,KAAK,CAAC;QAwHlB,0GAA0G;QAC1G,qBAAgB,GAAY,KAAK,CAAC;QAhShC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;QACjE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC;IACnF,CAAC;IAID,QAAQ;QACN,IAAI,CAAC,QAAQ,EAAE;QAEf,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAChD,qBAAqB;gBACrB,IAAI,OAAO,CAAC;gBACZ,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,aAAa,EAAE;oBACrC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;iBACtF;qBAAM;oBACL,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;iBACnF;gBACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;aAC3C;YACD,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrC,CAAC,EAAE,GAAG,CAAC;SACR;IACH,CAAC;IAID,kBAAkB;QAChB,IAAI,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC;YACxC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;QAC3I,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IAID,0DAA0D;IAC1D,WAAW,CAAC,GAAU;QACpB,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YACnB,IAAI,CAAC,IAAI,CAAC,aAAa;gBAAE,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;;gBAC/G,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;QACtH,CAAC,CAAC;IACJ,CAAC;IAID,uCAAuC;IACvC,UAAU,CAAC,KAAK,EAAE,IAAI;QACpB,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,CAAC;QAC/J,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAID;;;OAGG;IACH,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,IAAI,qDAAS,CAAC;YAC7B,IAAI,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,+DAAmB,CAAC,CAAC;YAC5D,GAAG,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACnC,UAAU,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;YACnE,aAAa,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YACvD,KAAK,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAChD,OAAO,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACpD,QAAQ,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC7C,IAAI,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC9C,WAAW,EAAE,IAAI,uDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,+DAAmB,CAAC;SACzE,CAAC,CAAC;IACL,CAAC;IAID,6BAA6B;IAC7B,UAAU;QACR,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,EAAE,KAAK,EAAE,EAAE;YACvC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;SAC9C;QACD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAC9B,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YACxD,IAAI,CAAC,WAAW,CAAC;gBACf,KAAK,EAAE,CAAC;wBACN,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC;wBACxC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC;wBACpC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;wBAClC,KAAK,EAAE,CAAC;wBACR,OAAO,EAAE,IAAI;qBACd,CAAC;aACH,CAAC,CAAC;SACJ;IACH,CAAC;IAID,+EAA+E;IAC/E,YAAY,CAAC,OAAe;QAC1B,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,+BAA+B,CAAC,OAAO,CAAC,CAAC;QAC/E,IAAI,aAAa,IAAI,IAAI,EAAE;YACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACrB;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SACtB;IACH,CAAC;IAID,iBAAiB;IACjB,WAAW,CAAC,MAAM;QAEhB,IAAI,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE;YACvC,MAAM,GAAG,EAAE,aAAa,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE;SAC/C;QACD,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK;YACtB,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC;iBACnD,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC/D,CAAC,EAAE,KAAK,CAAC,EAAE;YAEX,CAAC,CAAC;IACR,CAAC;IAID,mCAAmC;IACnC,UAAU,CAAC,IAAU;QACnB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACpC,KAAK,GAAG,KAAK,GAAG,CAAC,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;SACpD;QACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC;QAChD,IAAI,CAAC,WAAW,CAAC;YACf,KAAK,EAAE,CAAC;oBACN,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC;oBACxC,KAAK,EAAE,KAAK;oBACZ,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;oBAClC,KAAK,EAAE,CAAC;oBACR,OAAO,EAAE,IAAI;iBACd,CAAC;SACH,CAAC,CAAC;QACH,IAAI,IAAI;YAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAID,uDAAuD;IACvD,WAAW,CAAC,IAAI;QACd,IAAI,IAAI,EAAE;YACR,IAAI,KAAK,GAAW,EAAE,CAAC;YACvB,IAAI,IAAI,CAAC,aAAa,EAAE;gBAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,WAAW,EAAE,CAAC;aAAE;iBAC7F;gBAAE,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;aAAE;YACrE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;SAC5D;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACxB,CAAC;IAMD;;;OAGG;IACH,SAAS;QACP,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IACD;;;OAGG;IACH,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IACD;;;OAGG;IACH,YAAY;QACV,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAID;;;OAGG;IACH,WAAW;QACT,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACzC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;iBAC3C,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACjB,IAAI,GAAG,CAAC,KAAK,KAAK,CAAC,EAAE;oBACnB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;wBAC/B,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC3D,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,uCAAuC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;wBAC7H,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;wBAChC,UAAU,CAAC,GAAG,EAAE;4BACd,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;4BACvB,IAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC,EAAE,GAAG,CAAC,CAAC;qBACT;yBAAM;wBACL,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;wBAChC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,uCAAuC,CAAC,CAAC,CAAC,CAAC;wBAC3H,UAAU,CAAC,GAAG,EAAE;4BACd,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;4BACvB,IAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC,EAAE,GAAG,CAAC,CAAC;qBACT;iBACF;qBAAM,IAAI,GAAG,CAAC,KAAK,KAAK,CAAC,EAAE;oBAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBAChC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,sEAAsE,CAAC,CAAC,CAAC,CAAC;oBACxJ,IAAI,CAAC,MAAM,EAAE,CAAC;iBACf;qBAAM,IAAI,GAAG,CAAC,KAAK,KAAK,CAAC,EAAE;oBAC1B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBAChC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yDAAyD,CAAC,CAAC,CAAC,CAAC;oBAC3I,iEAAiE;oBACjE,yFAAyF;oBACzF,mHAAmH;oBACnH,yBAAyB;oBACzB,uBAAuB;oBACvB,eAAe;oBACf,wBAAwB;oBACxB,wBAAwB;oBACxB,QAAQ;oBACR,uBAAuB;iBACxB;YAEH,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IACJ,CAAC;IAGD;;;OAGG;IACH,UAAU,CAAC,GAAG,EAAE,IAAI;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE;YACzD,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,IAAI,CAAC,KAAK;SAClB,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;QACjB,CAAC,EAAE,KAAK,CAAC,EAAE;QAEX,CAAC,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,wCAAwC,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;IAChG,CAAC;IAED;;;OAGG;IACH,OAAO;QACL,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;IACjD,CAAC;IAGD,8BAA8B;IAC9B,QAAQ,CAAC,CAAE;QACT,MAAM,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,IAAI,CACnG,QAAQ,CAAC,EAAE;YACT,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAClD,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,+BAA+B,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;QACvH,CAAC,EACD,GAAG,EAAE;YACH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC;QACxG,CAAC,CACF,CAAC;IACJ,CAAC;IASD;;OAEG;IACH,WAAW,CAAC,YAAiB;;QAC3B,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,wBAAY,CAAC,KAAK,0CAAE,QAAQ,EAAE,0CAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/E,IAAI,KAAK,EAAE;YACT,4CAA4C;YAC5C,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE;iBAClC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,yEAAY,CAAC;iBACvC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;YAE7I,aAAa;YACb,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,aAAa,CAAC,CAAC;gBACpG,OAAO;aACR;YAED,wBAAwB;YACxB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,yEAAY,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACnF,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,cAAc;gBAC1D,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,yBAAyB;gBAC1D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,oBAAoB;gBAC9E,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,sCAAsC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;YAC9H,CAAC,EAAE,GAAG,CAAC,EAAE;gBACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,yDAAyD,CAAC,EAAE,aAAa,CAAC,CAAC;YAC7I,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAChC,CAAC,CAAC,CAAC;SACJ;aACI;YACH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,2BAA2B,CAAC,EAAE,aAAa,CAAC,CAAC;SAC9G;IACH,CAAC;;8EAjWU,eAAe;6GAAf,eAAe;;;;;;;QCd5B,yEAA2D;QAAnB,oIAAS,YAAQ,IAAC;QACtD,kEAA+C;QAAA,uDACnD;;QAAA,4DAAM;QACN,4EAAW;QACP,yEAAmB;QACf,yEAAwB;QACpB,yEAA4B;QACxB,yEAAuD;QACnD,oEAAG;QAAA,wDAA4B;;QAAA,4DAAI;QACvC,4DAAM;QACN,0EAA0C;QACtC,6EAAoF;QAAtB,wIAAS,eAAW,IAAC;QAC3F,mEAA+C;QAC/C,wDAAwB;;QAAA,4DAAS;QAC7B,4DAAM;QACV,4DAAM;QACN,0EAAuF;QACnF,4EAA2D;QACvD,2EAAwC;QACpC,2EAAuB;QACnB,2EAAY;QACR,2EAAwB;QACpB,2EAAoF;QAA7C,qIAAS,aAAS,IAAC;QACtD,6EAA6G;QAA9B,+IAAU,oBAAgB,IAAC;QAA1G,4DAA6G;QAC7G,sEAA8J;QAClK,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,2EAAwB;QACpB,2EAAiE;QAC7D,2EAAsE;QAClE,uEAAK;QAAA,qEAAG;QAAA,wDAA6B;;QAAA,4DAAI;QAAA,4DAAM;QAC/C,oFAAwC;QACpC,uFAA+C;QAC3C,kFAAgB;QACZ,6EAAsJ;QAArD,qIAAQ,mDAAyC,IAAC;;QAAnJ,4DAAsJ;QACtJ,0MAGc;QAClB,4DAAiB;QACrB,4DAAkB;QACtB,4DAAe;QACnB,4DAAM;QACN,2EAAkD;QAC9C,uEAAK;QAAA,qEAAG;QAAA,wDAAyB;;QAAA,4DAAI;QAAA,4DAAM;QAC3C,oFAAwC;QACpC,mFAAiB;QACb,sFAAsC;QAClC,iFAM+C;QANqE,qIAAQ,yDAChG,SAAS,8BACX,OAAO,6BACT,MAAM,UACtB,CAAC,WACA,IAAI,MACb,IAAO,6NAAc,2BAAsB,IAApC;;QANP,4DAM+C;QAC/C,yEAA8K;QAAjI,mIAAS,gBAAY,IAAC;;QAA2G,4DAAI;QACtL,4DAAiB;QACjB,2EAA+B;QAC3B,yEAAc;QACV,8GAEM;QACV,qEAAe;QACnB,4DAAM;QACV,4DAAkB;QACtB,4DAAe;QACnB,4DAAM;QAGN,8GAMM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,2EAAoD;QAChD,2EAAuB;QACnB,uEAAK;QAAA,yEAAiB;QAAA,wDAA0B;;QAAA,4DAAI;QAAA,4DAAM;QAC1D,uFAAqE;;QAEjE,iFAGmF;QAFjF,iKAAiB,wCAAkC,IAAC;;QAGpD,0HAA2G;QAC7G,4DAAY;QAEZ,0MAYc;QAClB,4DAAkB;QACtB,4DAAM;QACN,2EAAuB;QACnB,uEAAK;QAAA,qEAAG;QAAA,wDAAsB;;QAAA,4DAAI;QAAA,6DAAC;QAAA,4DAAM;QACzC,oFAAyC;QACrC,mFAAiB;QACb,kFAAgB;QACZ,6EAMU;QANwE,qIAAQ,yDAC9D,SAAS,8BACX,OAAO,6BACT,MAAM,UACtB,CAAC,WACA,IAAI,MACb,IAAO;;QANP,4DAMU;QACd,4DAAiB;QACrB,4DAAkB;QACtB,4DAAe;QACnB,4DAAM;QACN,2EAAuB;QACnB,uEAAK;QAAA,qEAAG;QAAA,wDAA6B;;QAAA,4DAAI;QAAA,4DAAM;QAC/C,oFAAyC;QACrC,mFAAiB;QACb,kFAAgB;QACZ,gFAA2N;QAAvF,wIAAQ,2DAAiD,IAAC;;QAA6B,4DAAW;QAC1O,4DAAiB;QACrB,4DAAkB;QACtB,4DAAe;QACnB,4DAAM;QACN,2EAAwB;QACpB,6EAAoG;QAApD,6JAAiB,uCAAiC,IAAC;QAC/G,wDACF;;QAAA,4DAAQ;QACE,4DAAM;QAEV,4DAAM;QACV,4DAAO;QACX,4DAAM;QAEV,4DAAM;QAEN,2EAA6B;QACzB,2EAA0C;QACtC,2EAAwB;QACpB,2EAAwB;QAAA,qEAAG;QAAA,yDAAkC;;QAAA,4DAAI;QAAA,4DAAM;QAC3E,4DAAM;QACN,uEACM;QACV,4DAAM;QACN,gHAIM;QACN,kHAiDM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAY;QAGZ,iFAAkK;QAAxJ,+LAAyB,6FAAyF,kBAAc,IAAvG,qFAAmH,cAAU,IAA7H;;;QAC/B,4GAA2E;QAC/E,4DAAW;;;;QAvNwC,0DACnD;QADmD,oJACnD;QAIwB,0DAAe;QAAf,wEAAe;QAEhB,0DAA4B;QAA5B,kJAA4B;QAKvC,0DAAwB;QAAxB,sJAAwB;QAIN,0DAAuB;QAAvB,oFAAuB;QAOR,0DAA0D;QAA1D,sLAA0D;QAQ3D,0DAA6B;QAA7B,0JAA6B;QAEhB,0DAA6B;QAA7B,2EAA6B;QAEC,0DAAgD;QAAhD,yKAAgD;QAU3F,0DAAyB;QAAzB,6IAAyB;QAIqB,0DAAyE;QAAzE,kMAAyE;QAOpC,0DAAkE;QAAlE,2LAAkE;QAIjH,0DAAc;QAAd,8EAAc;QAUxD,0DAAkB;QAAlB,kFAAkB;QAYN,0DAA0B;QAA1B,wJAA0B;QAC/B,0DAAmD;QAAnD,mKAAmD;QAI9D,0DAAwC;QAAxC,iFAAwC;QAEV,0DAAgB;QAAhB,sFAAgB;QAmB5C,0DAAsB;QAAtB,0IAAsB;QAIqB,0DAA0C;QAA1C,mKAA0C;QAYrF,0DAA6B;QAA7B,iJAA6B;QAIqB,0DAA2C;QAA3C,oKAA2C;QAAC,8IAAyC;QAO3J,0DACF;QADE,kKACF;QAYiC,0DAAkC;QAAlC,uJAAkC;QAKZ,0DAAkB;QAAlB,kFAAkB;QAKjD,0DAAiB;QAAjB,iFAAiB;QAuDnB,0DAAiC;QAAjC,6JAAiC;QAAC,iKAAuC;QAAnG,oFAAyB","sources":["./src/app/sales/menu/manage/products/combo/add/add.component.ts","./src/app/sales/menu/manage/products/combo/add/add.component.html","./src/app/sales/menu/manage/products/combo/combo.component.ts","./src/app/sales/menu/manage/products/combo/combo.component.html","./src/app/sales/menu/manage/products/combo/combo.module.ts","./src/app/sales/menu/manage/products/combo/detail/detail.component.ts","./src/app/sales/menu/manage/products/combo/detail/detail.component.html"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  public foodList: any[] = [];\r\n  public searchList: any[] = [];\r\n  public finalList: any[] = [];\r\n  public componentFoods: any[] = [];\r\n  comboForm: FormGroup;\r\n  show: any = []\r\n  value: any = 0;\r\n  total: number = 0;\r\n  public price: any;\r\n  barcode: boolean = true;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  editPrice: any = {}\r\n  createProd: boolean = false;\r\n  heightScroll: string;\r\n  list_category = this.vhQuerySales.getlocalCategorys(VhType.COMBO)\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm()\r\n    this.getFoodLList()\r\n    \r\n  }\r\n  ngOnDestroy() {\r\n    // xóa hỉnh ảnh đã tải lên trên firestore nếu ko lưu  mà back về để tránh làm rác DB \r\n    if (!this.createProd && this.comboForm.value['img'])\r\n      this.vhImage.deleteThumbnail([this.comboForm.value['img']]).then(() => { })\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".combo-table\"))\r\n      this.heightScroll = document.querySelector(\".combo-table\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight + \"px\";\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * khỡi tạo form với các trường để tạo combo lên DB\r\n   * @example this.initForm()\r\n   */\r\n  initForm() {\r\n    this.comboForm = new FormGroup({\r\n      name: new FormControl(\"\", [Validators.required]),\r\n      img: new FormControl(\"\"),\r\n      barcode: new FormControl(''),\r\n      // allow_sell: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      describe: new FormControl(''),\r\n      price: new FormControl(0),\r\n      unit: new FormControl('', [Validators.required]),\r\n      id_category: new FormControl('', [Validators.required]),\r\n    })\r\n  }\r\n\r\n  // set barcode tự động\r\n  setBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.comboForm.controls['barcode'].setValue(newbarcode)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @example this.checkBarcode('123456')\r\n   */\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n    } else {\r\n      this.barcode = false\r\n    }\r\n  }\r\n  // modal component dishes/beverage\r\n  isVisibleAddComponent = false;\r\n  showComponent() {\r\n    this.isVisibleAddComponent = true\r\n  }\r\n\r\n  handleCancelComponent() {\r\n    this.isVisibleAddComponent = false;\r\n  }\r\n\r\n\r\n  /**\r\n   * get danh sách sp và dịch vụ để chọn vào thành phần cho combo\r\n   * @example this.getFoodLList()\r\n   */\r\n  getFoodLList() {\r\n    console.log(this.vhQuerySales.getlocalDetailProducts());\r\n    \r\n    this.foodList = this.vhQuerySales.getlocalDetailProducts(VhType.PRODUCT_SERVICE).filter(e => !e.delete_hidden).map(item => {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, 1)\r\n      return { ...item, choose: false, display: 'flex', ...unit }\r\n    });\r\n    this.searchList = this.foodList;\r\n    console.log(this.foodList);\r\n    \r\n    this.finalList = this.searchList\r\n  }\r\n \r\n  tempVal: string = ''\r\n  /**\r\n   * lọc tên sp theo tên\r\n   * @example this.searchFood('')\r\n   */\r\n  searchFood(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length) this.finalList = this.vhAlgorithm.searchList(tempVal, this.searchList, ['name'])\r\n    else this.finalList = this.searchList\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn sp vào combo, xử lý các sp đã chọn vào thành phần của combo\r\n   * @example this.handleComponent()\r\n   */\r\n  handleComponent() {\r\n    this.componentFoods = this.searchList.filter(item => item.choose).map(e => {return {...e, quantity :1 ,price_origin : e.price}});\r\n    this.show = this.componentFoods\r\n    setTimeout(() => this.renderPrice(this.componentFoods), 100)\r\n    this.comboPrice()\r\n    this.isVisibleAddComponent = false\r\n  }\r\n\r\n  /**\r\n   * cleavejs cho các sp trong combo để xử lý giá sp\r\n   * @example this.renderPrice([])\r\n   */\r\n  renderPrice(arr: any[]) {\r\n    arr.forEach(item => {\r\n      if (!item.id_subproduct) this.editPrice['product-' + item._id] = this.vhAlgorithm.vhnumeral('.product-' + item._id)\r\n      else this.editPrice['product-' + item.id_subproduct] = this.vhAlgorithm.vhnumeral('.product-' + item.id_subproduct)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * tính lại giá tổng combo\r\n   * @example this.comboPrice()\r\n   */\r\n  comboPrice(dish?: any) {\r\n    if (dish) {\r\n      let price: string = '';\r\n      if (dish.id_subproduct) { price = this.editPrice['product-' + dish.id_subproduct].getRawValue(); }\r\n      else { price = this.editPrice['product-' + dish._id].getRawValue(); }\r\n      dish.price = parseFloat(price)\r\n    }\r\n    this.total = this.show.reduce((prev: number, next) => prev + next.quantity * next.price, 0);\r\n    \r\n    \r\n    this.comboForm.controls['price'].setValue(this.total);\r\n  }\r\n\r\n  // Thực hiện xóa sản phẩm trong combo\r\n  deleteFood(food) {\r\n    this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate('Are you sure to delete this product?')}`, \"OK\", this.languageService.translate('Cancel')).then(() => {\r\n      this.componentFoods.splice(this.componentFoods.findIndex(item => item.name == food.name), 1);\r\n      this.finalList.map(item => {\r\n        if (item.name == food.name) {\r\n          item.display = 'flex';\r\n          item.price = food.price_origin;\r\n          item.choose = false\r\n        }\r\n      })\r\n      this.show = this.componentFoods;\r\n      this.comboPrice()\r\n      this.editPrice['product-' + food._id] = null\r\n      Promise.all([this.vhComponent.showLoading(\"\", \"transparent-loading\", null, null, false),])\r\n        .finally(() => this.vhComponent.hideLoading(0))\r\n    }, () => { })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/combo'], { state: this.dataRestore });\r\n  }\r\n\r\n  /**\r\n   * tạo combo lên DB\r\n   * @example this.saveCombo()\r\n   */\r\n  saveCombo() {\r\n    let update = this.cleanForm(this.comboForm).value;\r\n    update['units'] = [{\r\n      barcode: update.barcode,\r\n      price: update.price,\r\n      unit: update.unit,\r\n      ratio: 1,\r\n      default: true\r\n    }]\r\n    delete update.barcode;\r\n    delete update.price;\r\n    delete update.unit;\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      if (!this.barcode) {\r\n        this.vhComponent.hideLoading(0).then(() => this.vhComponent.showToast(1500, this.languageService.translate(\"Barcode already exists\"), \"alert-toast\"))\r\n      } else {\r\n        this.vhQuerySales.addProduct({ ...update, type: VhType.COMBO }).then(async ({ _id, name }: any) => {\r\n          this.createProd = true\r\n          if (this.show.length) {\r\n            await this.addComponentFoods(_id, this.show)\r\n          }\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(1000, name + \" \" + (this.languageService.translate(\"has been added successfully\")), \"success-toast\");\r\n            this.goBack();\r\n          })\r\n        }).catch(err => {\r\n          this.vhComponent.hideLoading(0).then(() => this.vhComponent.showToast(1500, this.languageService.translate(\"An error occurred while adding product. Please try again\"), \"alert-toast\"))\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi đơn vị của sp trong combo\r\n   * @param data sp trong combo\r\n   * @param event giá trị ratio của đơn vị\r\n   * @example this.changeRatio(combo_prodct, 1)\r\n   */\r\n  changeRatio(data, event){\r\n    let unit = this.vhQuerySales.getUnit_byRatio(data.units, event);\r\n    data.price = unit.price;\r\n    data.ratio = event;\r\n    setTimeout(() => {\r\n      this.comboPrice(data)\r\n    }, 100);\r\n  }\r\n\r\n  // Hàm thực hiện xóa space (TRIM) các control trong form\r\n  public cleanForm(formGroup: FormGroup) {\r\n    Object.keys(formGroup.controls).forEach((key) => {\r\n      if (key === 'name' || key === 'barcode' || key === 'brand' || key === 'unit') {\r\n        if (formGroup.get(key).value) {\r\n          let value = formGroup.get(key).value.toString().trim();\r\n          formGroup.get(key).setValue(value)\r\n        }\r\n      }\r\n    });\r\n    return formGroup;\r\n  }\r\n\r\n  /**\r\n   * thêm danh sách thành phần combo lên DB\r\n   * @example this.addComponentFoods(id_combo, [])\r\n   */\r\n  addComponentFoods(_id, foods: any[]) {\r\n    return new Promise<any>((resolve) => {\r\n      this.vhQuerySales.addCombosProduct(_id, foods.map(food => {\r\n        let data = {\r\n          id_product: food._id,\r\n          type: food.type,\r\n          quantity: food.quantity,\r\n          price: food.price,\r\n          ratio: food.ratio\r\n        }\r\n        if (food.id_subproduct) data['id_subproduct'] = food.id_subproduct;\r\n        return data;\r\n      })).then((combos) => {\r\n        if (combos) resolve(true)\r\n      }, error => {\r\n        \r\n        resolve(false)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * mở giao diện chọn file để upload ảnh\r\n   * @example getFile()\r\n   */\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 128, 128, \"products\", this.comboForm.value.img || '').then(\r\n      photoURL => {\r\n        this.comboForm.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), \"success-toast\");\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), \"alert-toast\");\r\n      }\r\n    );\r\n  }\r\n  \r\n  \r\n  \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQuerySales.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.COMBO)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQuerySales.addCategory({ name: value, type: VhType.COMBO }).then((res: any) => {\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.comboForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"combo\">\r\n        <div class=\"combo-name\">\r\n            <div nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"20\" class=\"title left-all-content\">\r\n                    <b>{{'Add combo'|translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"add-button\">\r\n                    <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"saveCombo()\" [disabled]=\"comboForm.invalid || !componentFoods.length\" [ngStyle]=\"{opacity: (comboForm.invalid || !componentFoods.length) ? 0.5 : 1}\">\r\n                        <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                        {{'Save' | translate}}</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"custom-scroll-bar\" style=\"padding-top: 16px;height: 87%;overflow-y: auto;\">\r\n                <form nz-form [formGroup]=\"comboForm\" style=\"height: 100%\">\r\n                    <div nz-row style=\"margin-bottom: 1.6%\">\r\n                        <div nz-col nzSpan=\"3\">\r\n                            <div nz-row>\r\n                                <div nz-col nzSpan=\"24\">\r\n                                    <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n                                        <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\" (change)=\"onUpload($event)\" />\r\n                                        <img [ngStyle]=\"{width: comboForm.value.img ? '100%' : '60px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"comboForm.value.img\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"21\">\r\n                            <div nz-row style=\"justify-content: space-between\">\r\n                                <div nz-col nzSpan=\"12\" class=\"combo-name-input\">\r\n                                    <div><b>{{'Combo name' | translate}}*</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                            <nz-input-group>\r\n                                                <input formControlName=\"name\" nz-input placeholder=\"{{'Enter combo name' | translate}}\" required />\r\n                                                <ng-template #combineTplName let-control>\r\n                                                    <ng-container *ngIf=\"control.hasError('required')\">\r\n                                                        {{'Combo name is required' | translate}}\r\n                                                    </ng-container>\r\n                                                </ng-template>\r\n                                            </nz-input-group>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n                                <div nz-col nzSpan=\"12\" class=\"combo-price-input\">\r\n                                    <div><b>{{'Barcode' | translate}}</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control>\r\n                                            <nz-input-group style=\"display: flex\">\r\n                                                <input formControlName=\"barcode\" nz-input placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" #qr (keyup)=\"checkBarcode(qr.value)\" />\r\n                                                <i nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcode()\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                            </nz-input-group>\r\n                                            <div class=\"validation-errors\">\r\n                                                <ng-container>\r\n                                                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                                                        <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                                                    </div>\r\n                                                </ng-container>\r\n                                            </div>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div nz-row style=\"justify-content: space-between;\">\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'Category'| translate}}*</b></div>\r\n                            <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                                <!-- Thanh chọn -->\r\n                                <nz-select formControlName=\"id_category\" \r\n                                  [nzDropdownRender]=\"addCategoryTemplate\"\r\n                                  nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                                  <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                                </nz-select>\r\n                                <!-- Thêm danh mục -->\r\n                                <ng-template #addCategoryTemplate>\r\n                                  <nz-divider></nz-divider>\r\n                                  <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                                      <!-- Input nhập tên -->\r\n                                      <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                                      <!-- Nút thêm -->\r\n                                      <button (click)=\"addCategory(categoryName)\" nz-button\r\n                                        [nzLoading]=\"isAddingCategory\"\r\n                                        [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                                        {{'Add' | translate}}\r\n                                      </button>\r\n                                  </div>\r\n                                </ng-template>\r\n                            </nz-form-control>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b>{{'Unit' | translate}}</b>*</div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                                    <nz-input-group>\r\n                                        <input formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit' | translate}}\" />\r\n                                        <ng-template #combineTplUnit let-control>\r\n                                            <ng-container *ngIf=\"control.hasError('required')\">\r\n                                                {{'Unit can not be empty' | translate}}\r\n                                            </ng-container>\r\n                                        </ng-template>\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"7\">\r\n                            <div><b>{{'Description' | translate}}</b></div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <textarea nz-input formControlName=\"describe\" placeholder=\"{{'Description' | translate}}\" [nzAutosize]=\"{ minRows: 1, maxRows: 2 }\" style=\"border-radius: 5px;\"></textarea>\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        \r\n                        <div nz-col nzSpan=\"24\">\r\n                            <!-- <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell' |\r\n                                translate}}</label> -->\r\n                        </div>\r\n\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"combo-component\">\r\n            <div nz-row style=\"padding-bottom: 15px;\">\r\n                <div nz-col nzSpan=\"20\">\r\n                    <div class=\"large-size\"><b>{{'Combo components' | translate}}</b></div>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"showComponent()\">\r\n                            <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                            {{'Add'|translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"content-Component custom-scroll-bar\" *ngIf=\"!componentFoods.length\">\r\n                <div class=\"no-data\">\r\n                    <p>{{'No data' | translate}}</p>\r\n                </div>\r\n\r\n\r\n            </div>\r\n            <div class=\"combo-table\" *ngIf=\"componentFoods.length\" style=\"height: 83%;overflow: hidden;\">\r\n                <nz-table [nzScroll]=\"{ y: heightScroll }\" #cf nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"show\" [nzShowPagination]=\"false\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Image' | translate}}</b></th>\r\n                            <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Component name' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"left\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Quantity' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"right\"><b>{{'Price total' | translate}}</b></th>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{'Combo price' |translate}}\r\n                            </td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td nzAlign=\"right\" style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{vhAlgorithm.vhcurrencyunit(total)}}\r\n                            </td>\r\n                            <td></td>\r\n\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of show; let i = index\" style=\"cursor: pointer;\">\r\n                            <td style=\"padding: 0;\" nzAlign='center'>\r\n                                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                            </td>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select style=\"width:100%;\" [(ngModel)]=\"data.ratio\" (ngModelChange)=\"changeRatio(data, $event)\" nzShowSearch nzPlaceHolder=\"{{'Select unit' | translate}}\">\r\n                                    <nz-option *ngFor=\"let item of data.units;index as index_units\" nzLabel=\"{{item.unit}}\" [nzValue]=\"item.ratio\">\r\n                                    </nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>\r\n                                <nz-input-number (ngModelChange)=\"data.quantity = $event;comboPrice()\" [nzStep]=\"1\" [(ngModel)]=\"data.quantity\" type=\"number\" nz-input [nzMin]=\"0.1\" [nzMax]=\"9999999999\"></nz-input-number>\r\n                            </td>\r\n                            <td>\r\n                                <input *ngIf=\"data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +data.id_subproduct  \" (blur)=\"comboPrice(data)\">\r\n                                <input *ngIf=\"!data.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(data.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +  data._id\" (blur)=\"comboPrice(data)\">\r\n                            </td>\r\n                            <td nzAlign=\"right\">\r\n                                {{ vhAlgorithm.vhcurrencyunit((data.price)*(data.quantity)) }}\r\n                            </td>\r\n                            <td>\r\n                                <i class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\" (click)=\"deleteFood(data)\"></i>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!--Modal component dishes/beverage-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleAddComponent\" [(nzVisible)]=\"isVisibleAddComponent\" nzTitle=\"{{languageService.translate('Select combo components')}}\" (nzOnOk)=\"handleComponent()\" (nzOnCancel)=\"handleCancelComponent()\"\r\n    [nzMaskClosable]=\"false\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\"><input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"tempVal\" (ngModelChange)=\"searchFood($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Search for product name, barcode' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport [itemSize]=\"20\" class=\"infinite-container\">\r\n                    <nz-list>\r\n                        <nz-list-item *cdkVirtualFor=\"let item of finalList\" style=\"cursor: pointer;\" [ngStyle]=\"{'display': item.display}\">\r\n                            <nz-list-item-meta (click)=\"item.choose = !item.choose\" nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\" nzDescription=\"{{item.name}}\">\r\n                            </nz-list-item-meta>\r\n                            <label nz-checkbox [(ngModel)]=\"item.choose\"></label>\r\n                        </nz-list-item>\r\n                        <nz-list-empty *ngIf=\"finalList.length === 0\"></nz-list-empty>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"handleCancelComponent()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"handleComponent()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-combo',\r\n  templateUrl: './combo.component.html',\r\n  styleUrls: ['./combo.component.scss']\r\n})\r\nexport class ComboComponent {\r\n\r\n  list_show_combo_hidden: any = [];\r\n  list_show: any = [];\r\n  list_subcombos: any = [];\r\n  keySearch: any = '';\r\n  selectedValue: any = '1'; //theo menu\r\n  selectedIndex: number = 0; // theo index của tab\r\n  heightScroll: string;\r\n  listTabs = ['Allow sale', 'Hidden'];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    public languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhComponent: VhComponent\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#combo-list\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".combo-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#combo-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".combo-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**get data product, category */\r\n  getData() {\r\n    if (this.dataRestore) {\r\n      this.keySearch = this.dataRestore.keySearch;\r\n      this.selectedValue = this.dataRestore.selectedValue;\r\n      this.selectedIndex = this.dataRestore.selectedIndex;\r\n    }\r\n    this.changeTab(this.selectedIndex);\r\n  }\r\n\r\n\r\n  list_combo_hidden = []\r\n  /**\r\n   * Lấy danh sách sản phẩm đã ẩn\r\n   */\r\n  getHiddenProducts() {\r\n    this.vhQuerySales.refreshLocalProducts_Delete_Hidden(VhType.COMBO).then(() => {\r\n      this.list_show_combo_hidden = this.vhQuerySales.getlocalProducts(VhType.COMBO).filter(item => item.delete_hidden).map(item => this.processCombo(item));\r\n      this.list_combo_hidden = this.list_show_combo_hidden\r\n      this.list_subcombos = this.vhAlgorithm.sortStringbyASC(this.list_show_combo_hidden, 'name');\r\n      this.searchCombos(this.keySearch);\r\n\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lí dữ liệu của sản phẩm (units, subproduct, name_category, ...)\r\n   * @param item \r\n   * @returns \r\n   */\r\n  processCombo(item: any): any {\r\n    return {\r\n      ...item,\r\n      quantity: item.combos.length,\r\n      price: item.units[0].price,\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(id, value, parent?, is_sub?) {\r\n    console.log('value', value);\r\n    console.log('id', id);\r\n\r\n\r\n    this.vhQuerySales.updateProduct(id, value).then((res) => {\r\n      console.log(res);\r\n      this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n      if (!value.delete_hidden) {\r\n        this.list_combo_hidden = this.list_combo_hidden.filter(item => item._id != id);\r\n        this.list_show_combo_hidden = this.list_show_combo_hidden.filter(item => item._id != id);\r\n      }\r\n    }, error => {\r\n      console.log(error);\r\n    }).catch(e => {\r\n      console.log(e);\r\n    })\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * Khi thay đổi tab\r\n   * @example this.changeTab('1');\r\n   */\r\n  changeTab(value) {\r\n    this.filterByAllowSell(value);\r\n    if (value == '1') {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** \r\n   * Lọc danh sách sản phẩm theo allow_sell\r\n   */\r\n  filterByAllowSell(index) {\r\n    this.list_show = this.vhQuerySales.getlocalProducts(VhType.COMBO).map(item => this.processCombo(item));\r\n    if (this.list_show) {\r\n      if (index == 0) this.list_show = this.list_show.filter(item => item.delete_hidden == false);\r\n      // else if(index == 1) this.list_show = this.list_show_combo_hidden.filter(item => item.allow_sell == false);\r\n      this.list_subcombos = this.list_show;\r\n      this.searchCombos(this.keySearch);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm (tab đã ẩn) theo tên\r\n   * @example this.searchCombos('');\r\n   */\r\n  searchCombos(value) {\r\n    this.list_show = this.vhAlgorithm.searchList(\r\n      this.vhAlgorithm.changeAlias(value.toLowerCase()),\r\n      this.list_subcombos,\r\n      ['name']\r\n    );\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products']);\r\n  }\r\n\r\n\r\n  gotoAdd() {\r\n    let dataRestore = { keySearch: this.keySearch, selectedValue: this.selectedValue, selectedIndex: this.selectedIndex }\r\n    this.router.navigate(['/sales/dashboard/manage/products/combo/add'], { state: { dataRestore } });\r\n  }\r\n\r\n\r\n  gotoComboDetail(data, isFromHidden?: boolean) {\r\n    let dataRestore = { keySearch: this.keySearch, selectedValue: this.selectedValue, selectedIndex: this.selectedIndex };\r\n    const state = {\r\n      data: data,\r\n      dataRestore\r\n    }\r\n    if (isFromHidden) {\r\n      state['isFromHidden'] = true;\r\n    }\r\n    this.router.navigate(['/sales/dashboard/manage/products/combo/detail'], {\r\n      state: state\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  name_col = false;             // chọn sort cột tên sản phẩm\r\n  quantity_col = false;         // Chọn sắp xếp theo đơn vị\r\n  price_col = false;            // Chọn sắp xếp theo giá\r\n\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   * @param typeList      // Biến dùng để xác định danh sách sắp xếp là cho bán hay không cho bán\r\n   */\r\n  sortTable(colName) {\r\n    let methodName = colName === 'name' ? 'sortVietnameseby' : 'sortNumberby';\r\n    let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n    this.list_show = this.vhAlgorithm[methodName + direction]([...this.list_show], colName);\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"combo-list\" class=\"height-layout\">\r\n  <div nz-row class=\"combo-list-header\">\r\n    <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n      <b>{{'List of combos'|translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input [(ngModel)]=\"keySearch\" type=\"text\" nz-input [placeholder]=\"'Search for combo name' | translate\"\r\n          (keyup)=\"searchCombos(keySearch)\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <div nz-col nzSpan=\"9\" class=\"right-all-content\">\r\n      <div>\r\n        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAdd()\">\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n          {{'Add' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"selectedIndex\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <nz-tab  nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class=\"total-item small-size\">\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show.length}}&nbsp; </span> {{'combos' | translate}}\r\n        </div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #allowSale nzShowPagination nzShowSizeChanger [nzNoResult]=\"'No data'| translate\" [nzData]=\"list_show\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b></b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"40%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Combo name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"center\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"quantity_col = !quantity_col; sortTable('quantityCombos')\">\r\n                <b>{{'Number of components' | translate}}</b>\r\n                <i nz-icon [nzType]=\"quantity_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"right\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"price_col = !price_col; sortTable('price')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let data of allowSale.data\" (click)=\"gotoComboDetail(data, tab === 'Hidden')\" style=\"cursor: pointer;\">\r\n              <td style=\"padding: 0;\" nzAlign='center'>\r\n                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n              </td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td nzAlign=\"center\">{{data.combos.length}}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.units[0].price)}}</td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n      <nz-tab  nzTitle=\"{{'Hidden not allow sell' | translate}}\">\r\n        <div nz-row class=\"total-item small-size\">\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_combo_hidden.length}}&nbsp; </span> {{'combos' | translate}}\r\n        </div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #comboHidden nzShowPagination nzShowSizeChanger [nzNoResult]=\"'No data'| translate\" [nzData]=\"list_show_combo_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b></b></th>\r\n              <th style=\"cursor: pointer;\" nzWidth=\"40%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Combo name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"center\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"quantity_col = !quantity_col; sortTable('quantityCombos')\">\r\n                <b>{{'Number of components' | translate}}</b>\r\n                <i nz-icon [nzType]=\"quantity_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzAlign=\"right\" style=\"cursor: pointer;\" nzWidth=\"25%\"\r\n                (click)=\"price_col = !price_col; sortTable('price')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!comboHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"5\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <tr *ngFor=\"let data of comboHidden.data\"   style=\"cursor: pointer;\">\r\n              <td style=\"padding: 0;\" nzAlign='center'>\r\n                <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n              </td>\r\n              <td style=\"color: var(--ion-color-vh-green);\">{{ data.name }}</td>\r\n              <td nzAlign=\"center\">{{data.combos.length}}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.units[0].price)}}</td>\r\n              <td class=\"money-right\">\r\n                <nz-switch   [(ngModel)]=\"data.delete_hidden\"\r\n                  (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                </nz-switch>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { ComboComponent } from './combo.component';\r\nimport { AddComponent } from './add/add.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ComboComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component: AddComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ComboComponent,\r\n    AddComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ScrollingModule,\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TranslateModule,\r\n    IonicModule\r\n  ]\r\n})\r\nexport class ComboModule { }\r\n","import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  barcode: boolean = true;\r\n  comboForm: FormGroup;\r\n  list_menu: any[] = []\r\n  price: any;\r\n  data: any;\r\n  priceDef: any;\r\n  editPrice: any[] = [];\r\n  heightScroll: string;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  list_category = this.vhQuerySales.getlocalCategorys(VhType.COMBO);\r\n  /** detail được mở từ tab Đã ẩn hay không */\r\n  isFromHidden: boolean;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhImage: VhImage,\r\n    private vhComponent: VhComponent,\r\n    public languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state.data;\r\n    this.isFromHidden = this.router.getCurrentNavigation().extras.state.isFromHidden;\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initForm()\r\n\r\n    if (this.data.combos) {\r\n      for (let i = 0; i < this.data.combos.length; i++) {\r\n        // let dataPush = {};\r\n        let product;\r\n        if (this.data.combos[i].id_subproduct) {\r\n          product = this.vhQuerySales.getlocalDetailProduct(this.data.combos[i].id_subproduct);\r\n        } else {\r\n          product = this.vhQuerySales.getlocalDetailProduct(this.data.combos[i].id_product);\r\n        }\r\n        this.data.combos[i].units = product.units;\r\n      }\r\n      setTimeout(() => {\r\n        this.renderPrice(this.data.combos);\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".combo-table\"))\r\n      this.heightScroll = document.querySelector(\".combo-table\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight + \"px\";\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  // Định dạng hiển thị kiểu giá ngoài giao diện 100,000 VNĐ\r\n  renderPrice(arr: any[]) {\r\n    arr.forEach((item) => {\r\n      if (!item.id_subproduct) this.editPrice['product-' + item._id] = this.vhAlgorithm.vhnumeral('.product-' + item._id);\r\n      else this.editPrice['product-' + item.id_subproduct] = this.vhAlgorithm.vhnumeral('.product-' + item.id_subproduct);\r\n    })\r\n  }\r\n\r\n\r\n\r\n  // cập nhật lại giá tiền khi đổi đơn vị\r\n  changeUnit(event, data) {\r\n    let unit_exchange = this.vhQuerySales.getlocalDetailProduct(data.id_subproduct ? data.id_subproduct : data.id_product).units.find(item => item.ratio == event);\r\n    data.price = unit_exchange.price;\r\n    data.ratio = unit_exchange.ratio;\r\n    data.unit = unit_exchange.unit;\r\n    data.name = data.name;\r\n    setTimeout(() => {\r\n      this.comboPrice(data);\r\n    }, 200);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * gán giá trị combo nhận dc từ state truyền qua vào form để show lên giao diện\r\n   * @example this.initForm()\r\n   */\r\n  initForm() {\r\n    this.comboForm = new FormGroup({\r\n      name: new FormControl(this.data.name, [Validators.required]),\r\n      img: new FormControl(this.data.img),\r\n      allow_sell: new FormControl(this.data.delete_hidden ? false : true),\r\n      delete_hidden: new FormControl(this.data.delete_hidden),\r\n      price: new FormControl(this.data.units[0].price),\r\n      barcode: new FormControl(this.data.units[0].barcode),\r\n      describe: new FormControl(this.data.describe),\r\n      unit: new FormControl(this.data.units[0].unit),\r\n      id_category: new FormControl(this.data.id_category, Validators.required),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // Tự động tạo barcode và lưu\r\n  setBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    this.checkBarcode(newbarcode);\r\n    if (this.barcode) {\r\n      this.comboForm.controls['barcode'].setValue(newbarcode);\r\n      this.updateCombo({\r\n        units: [{\r\n          barcode: this.comboForm.value['barcode'],\r\n          price: this.comboForm.value['price'],\r\n          unit: this.comboForm.value['unit'],\r\n          ratio: 1,\r\n          default: true\r\n        }]\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // Kiểm tra mã barcode vừa tạo đã tồn tại chưa ( chưa: true, đã tồn tại: false)\r\n  checkBarcode(barcode: string) {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode);\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n    } else {\r\n      this.barcode = false;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // Cập nhật combo\r\n  updateCombo(object) {\r\n\r\n    if (object.hasOwnProperty('allow_sell')) {\r\n      object = { delete_hidden: !object.allow_sell }\r\n    }\r\n    if (this.comboForm.valid)\r\n      this.vhQuerySales.updateProduct(this.data._id, object)\r\n        .then((bool) => {\r\n          this.data = this.vhQuerySales.getlocalProduct(this.data._id);\r\n        }, error => {\r\n\r\n        })\r\n  }\r\n\r\n\r\n\r\n  //  hàm Cập nhật giá tổng của combo\r\n  comboPrice(dish?: any) {\r\n    let price = 0;\r\n    for (let product of this.data.combos) {\r\n      price = price + (product.price * product.quantity);\r\n    }\r\n    this.comboForm.controls['price'].setValue(price)\r\n    this.updateCombo({\r\n      units: [{\r\n        barcode: this.comboForm.value['barcode'],\r\n        price: price,\r\n        unit: this.comboForm.value['unit'],\r\n        ratio: 1,\r\n        default: true\r\n      }]\r\n    });\r\n    if (dish) this.updateshow(this.data._id, dish);\r\n  }\r\n\r\n\r\n\r\n  // hàm cập nhật giá 1 sản phẩm khi thay đổi trong combo\r\n  updatePrice(dish) {\r\n    if (dish) {\r\n      let price: string = '';\r\n      if (dish.id_subproduct) { price = this.editPrice['product-' + dish.id_subproduct].getRawValue(); }\r\n      else { price = this.editPrice['product-' + dish._id].getRawValue(); }\r\n      dish.price = price ? parseFloat(price) : dish.price_origin;\r\n    }\r\n    this.comboPrice(dish);\r\n  }\r\n\r\n\r\n\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n  /**\r\n   * mở modal xác nhận xóa combo\r\n   * @example this.showModal\r\n   */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok modal xác nhận xóa combo\r\n   * @example this.handleOk\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    this.deleteCombo();\r\n  }\r\n  /**\r\n   * đóng modal xác nhận xóa combo\r\n   * @example this.handleCancel\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xóa combo khỏi DB\r\n   * @example this.deleteCombo();\r\n   */\r\n  deleteCombo() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.deleteProduct(this.data._id)\r\n        .then((rsp: any) => {\r\n          if (rsp.vcode === 0) {\r\n            if (this.comboForm.value[\"img\"]) {\r\n              this.vhImage.deleteThumbnail([this.comboForm.value[\"img\"]])\r\n              this.vhComponent.showToast(2000, (this.languageService.translate(\"Product has been deleted successfully\")), \"success-toast\");\r\n              this.vhComponent.hideLoading(0);\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            } else {\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.alertMessageDesktop(\"success\", (this.languageService.translate(\"Product has been deleted successfully\")));\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            }\r\n          } else if (rsp.vcode === 1) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n            this.goBack();\r\n          } else if (rsp.vcode === 2) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.isVisible = false;\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n            // this.functionService.confirmUpdateHidden('combo').then(() => {\r\n            //   this.vhQuerySales.updateProduct(this.data._id, { delete_hidden: true }).then(() => {\r\n            //     this.vhComponent.showToast(3000, (this.languageService.translate('Successfully hidden!')), 'success-toast');\r\n            //     setTimeout(() => {\r\n            //       this.goBack();\r\n            //     }, 300);\r\n            //   }).catch((err) => {\r\n            //     console.log(err);\r\n            //   });\r\n            // }).catch(() => { });\r\n          }\r\n\r\n        });\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp trong combo\r\n   * @example this.updateshow('DNSWIDHNBWIUDH', combo_product_selected) \r\n   */\r\n  updateshow(_id, food) {\r\n    return this.vhQuerySales.updateComboProduct(_id, food._id, {\r\n      price: food.price,\r\n      ratio: food.ratio\r\n    }).then((bool) => {\r\n    }, error => {\r\n\r\n    })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/combo'], { state: this.dataRestore });\r\n  }\r\n\r\n  /**\r\n   * mở giao diện chọn file để upload ảnh\r\n   * @example getFile()\r\n   */\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 128, 128, \"products\", this.comboForm.value.img || '').then(\r\n      photoURL => {\r\n        this.comboForm.controls[\"img\"].setValue(photoURL);\r\n        this.updateCombo({ img: this.comboForm.value.img });\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), \"success-toast\");\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), \"alert-toast\");\r\n      }\r\n    );\r\n  }\r\n      \r\n      \r\n      \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQuerySales.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.COMBO)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQuerySales.addCategory({ name: value, type: VhType.COMBO }).then((res: any) => {\r\n        console.log(res);\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.comboForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back small-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div class=\"combo\">\r\n        <div class=\"combo-name\">\r\n            <div nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"20\" class=\"title left-all-content\">\r\n                    <b>{{'Combo detail'|translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"add-button\">\r\n                    <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n            <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n            {{'Delete' | translate}}</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"custom-scroll-bar\" style=\"padding-top: 16px;height: 87%;overflow-y: auto;\">\r\n                <form nz-form [formGroup]=\"comboForm\" style=\"height: 100%\">\r\n                    <div nz-row style=\"margin-bottom: 1.6%\">\r\n                        <div nz-col nzSpan=\"3\">\r\n                            <div nz-row>\r\n                                <div nz-col nzSpan=\"24\">\r\n                                    <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n                                        <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\" (change)=\"onUpload($event)\" />\r\n                                        <img [ngStyle]=\"{width: comboForm.value.img ? '100%' : '60px'}\" onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"comboForm.value.img\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"21\">\r\n                            <div nz-row style=\"justify-content: space-between;height: 100%;\">\r\n                                <div nz-col nzSpan=\"9\" class=\"combo-name-input\" style=\"height: 77px;\">\r\n                                    <div><b>{{'Combo name' | translate}}*</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                                            <nz-input-group>\r\n                                                <input formControlName=\"name\" nz-input placeholder=\"{{'Enter combo name' | translate}}\" required (blur)=\"updateCombo({name: comboForm.value.name})\" />\r\n                                                <ng-template #combineTplName let-control>\r\n                                                    <ng-container *ngIf=\"control.hasError('required')\">{{'Combo name is required' | translate}}\r\n                                                    </ng-container>\r\n                                                </ng-template>\r\n                                            </nz-input-group>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n                                <div nz-col nzSpan=\"14\" class=\"combo-price-input\">\r\n                                    <div><b>{{'Barcode' | translate}}</b></div>\r\n                                    <nz-form-item style=\"margin-bottom: 0;\">\r\n                                        <nz-form-control>\r\n                                            <nz-input-group style=\"display: flex\">\r\n                                                <input formControlName=\"barcode\" nz-input placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\" (blur)=\"updateCombo({ units :[{ \r\n                                                    barcode: comboForm.value['barcode'],\r\n                                                    price : comboForm.value['price'],\r\n                                                    unit : comboForm.value['unit'],\r\n                                                    ratio : 1,\r\n                                                    default : true\r\n                                                  }]})\" #qr (keyup)=\"checkBarcode(qr.value)\" />\r\n                                                <i nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcode()\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                            </nz-input-group>\r\n                                            <div class=\"validation-errors\">\r\n                                                <ng-container>\r\n                                                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                                                        <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                                                    </div>\r\n                                                </ng-container>\r\n                                            </div>\r\n                                        </nz-form-control>\r\n                                    </nz-form-item>\r\n                                </div>\r\n\r\n                                <!-- Ẩn hoạt động -->\r\n                                <div *ngIf=\"isFromHidden\" nz-col nzSpan=\"24\">\r\n                                    <div nz-col nzSpan=\"24\" style=\"display: flex; align-items: center; gap: 4px;\">\r\n                                        <nz-switch formControlName=\"delete_hidden\" (ngModelChange)=\"updateCombo({delete_hidden: $event})\">\r\n                                        </nz-switch>\r\n                                        <span class=\"label\">{{'Hide activity' | translate}}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div nz-row style=\"justify-content: space-between;\">\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b class='label'>{{'Category'| translate}}*</b></div>\r\n                            <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                                <!-- Thanh chọn -->\r\n                                <nz-select formControlName=\"id_category\" \r\n                                  (ngModelChange)=\"updateCombo({id_category: $event})\"\r\n                                  [nzDropdownRender]=\"addCategoryTemplate\"\r\n                                  nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                                  <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                                </nz-select>\r\n                                <!-- Thêm danh mục -->\r\n                                <ng-template #addCategoryTemplate>\r\n                                  <nz-divider></nz-divider>\r\n                                  <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                                    <!-- Input nhập tên -->\r\n                                    <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                                    <!-- Nút thêm -->\r\n                                    <button (click)=\"addCategory(categoryName)\" nz-button\r\n                                      [nzLoading]=\"isAddingCategory\"\r\n                                      [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                                      {{'Add' | translate}}\r\n                                    </button>\r\n                                  </div>\r\n                                </ng-template>\r\n                            </nz-form-control>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            <div><b>{{'Unit' | translate}}</b>*</div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <input formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit' | translate}}\" (blur)=\"updateCombo({ units :[{ \r\n                                            barcode: comboForm.value['barcode'],\r\n                                            price : comboForm.value['price'],\r\n                                            unit : comboForm.value['unit'],\r\n                                            ratio : 1,\r\n                                            default : true\r\n                                          }]})\" />\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"7\">\r\n                            <div><b>{{'Description' | translate}}</b></div>\r\n                            <nz-form-item style=\"margin-bottom: 2%;\">\r\n                                <nz-form-control>\r\n                                    <nz-input-group>\r\n                                        <textarea nz-input formControlName=\"describe\" placeholder=\"{{'Description' | translate}}\" [nzAutosize]=\"{ minRows: 1, maxRows: 2 }\" (blur)=\"updateCombo({describe: comboForm.value.describe})\" style=\"border-radius: 5px;\"></textarea>\r\n                                    </nz-input-group>\r\n                                </nz-form-control>\r\n                            </nz-form-item>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"24\">\r\n                            <label nz-checkbox formControlName=\"allow_sell\" (ngModelChange)=\"updateCombo({allow_sell: $event})\">\r\n                {{'Available to sell' | translate}}\r\n              </label>\r\n                        </div>\r\n\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"combo-component\">\r\n            <div nz-row style=\"padding-bottom: 15px;\">\r\n                <div nz-col nzSpan=\"20\">\r\n                    <div class=\"large-size\"><b>{{'Combo components' | translate}}</b></div>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"content-Component custom-scroll-bar\" *ngIf=\"!data.combos\">\r\n                <div class=\"no-data\">\r\n                    <p>{{'No data' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"combo-table\" *ngIf=\"data.combos\" style=\"height: 83%;overflow: hidden;\">\r\n                <nz-table [nzScroll]=\"{ y: heightScroll }\" #cf nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"data.combos\" nzShowSizeChanger [nzShowPagination]=\"false\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Image' | translate}}</b></th>\r\n                            <th nzWidth=\"25%\" nzAlign=\"left\"><b>{{'Component name' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"left\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"10%\" nzAlign=\"center\"><b>{{'Quantity' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Selling price' | translate}}</b></th>\r\n                            <th nzWidth=\"15%\" nzAlign=\"right\"><b>{{'Price total' | translate}}</b></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{\"Combo price\"|translate}}\r\n                            </td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td nzAlign=\"right\" style=\"color: var(--ion-color-vh-green);font-weight: bold;\">\r\n                                {{vhAlgorithm.vhcurrencyunit(comboForm.value.price)}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let combo of data.combos; index as i\">\r\n                            <td style=\"padding: 0;\" nzAlign='center'>\r\n                                <img style=\"width: 36px;\" [src]=\"combo.img ? combo.img : './assets/icon/management/noimage.svg'\">\r\n                            </td>\r\n                            <td>{{ combo.name }} {{ combo.name_sub ? '( '+ combo.name_sub+ ')' : ''}}</td>\r\n                            <td>\r\n                                <nz-select style=\"width:100%;\" (ngModelChange)=\"changeUnit($event,combo)\" [(ngModel)]=\"combo.ratio\" nzShowSearch nzPlaceHolder=\"{{'Select unit' | translate}}\">\r\n                                    <nz-option *ngFor=\"let item of combo.units\" nzLabel=\"{{item.unit}}\" [nzValue]=\"item.ratio\">\r\n                                    </nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td nzAlign=\"center\">\r\n                                {{combo.quantity}}\r\n                            </td>\r\n                            <td>\r\n                                <input *ngIf=\"combo.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(combo.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +combo.id_subproduct  \" (blur)=\"updatePrice(combo)\">\r\n                                <input *ngIf=\"!combo.id_subproduct\" [value]=\"vhAlgorithm.vhcurrencyunit(combo.price)\" type=\"text\" nz-input [ngClass]=\"'product-' +  combo._id\" (blur)=\"updatePrice(combo)\">\r\n                            </td>\r\n                            <td nzAlign=\"right\">\r\n                                {{vhAlgorithm.vhcurrencyunit((combo.price)*(combo.quantity)) }}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- Delete side dish -->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n    <p *nzModalContent>{{'Are you sure to delete this combo?' | translate}}</p>\r\n</nz-modal>"],"names":["FormControl","FormGroup","Validators","VhType","i0","option_r14","data_r22","ctx_r10","ctx_r11","AddComponent","constructor","router","vhImage","vhComponent","languageService","vhQuerySales","vhAlgorithm","cdRef","getCurrentNavigation","extras","state","dataRestore","getlocalCategorys","COMBO","ngOnInit","initForm","getFoodLList","ngOnDestroy","createProd","comboForm","value","deleteThumbnail","then","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","name","required","img","barcode","delete_hidden","describe","price","unit","id_category","setBarcode","newbarcode","index","Math","floor","random","checkBarcode","controls","setValue","detailproduct","getlocalDetailProduct_byBarcode","showComponent","isVisibleAddComponent","handleCancelComponent","console","log","getlocalDetailProducts","foodList","PRODUCT_SERVICE","filter","e","map","item","getUnit_byRatio","units","choose","display","searchList","finalList","searchFood","tempVal","changeAlias","toLowerCase","length","handleComponent","componentFoods","quantity","price_origin","show","setTimeout","renderPrice","comboPrice","arr","forEach","id_subproduct","editPrice","_id","vhnumeral","dish","getRawValue","parseFloat","total","reduce","prev","next","deleteFood","food","alertConfirm","translate","splice","findIndex","Promise","all","showLoading","finally","hideLoading","goBack","navigate","saveCombo","update","cleanForm","ratio","default","showToast","addProduct","Object","type","addComponentFoods","catch","err","changeRatio","data","event","formGroup","keys","key","get","toString","trim","foods","resolve","addCombosProduct","id_product","combos","error","getFile","getElementById","click","onUpload","file","target","files","getThumbnailFromDesktop","photoURL","addCategory","categoryName","_a","_b","res","isAddingCategory","nativeElement","list_category","unshift","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///"}