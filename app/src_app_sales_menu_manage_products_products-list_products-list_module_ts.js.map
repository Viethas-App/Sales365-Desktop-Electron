{"version":3,"file":"src_app_sales_menu_manage_products_products-list_products-list_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/products/products-list/create-data-products/create-data-products.component.ts","./src/app/sales/menu/manage/products/products-list/create-data-products/create-data-products.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/detail-three-col/detail-three-col.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/detail-three-col/detail-three-col.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/detail/detail.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/detail/detail.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/edit-product.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/edit-product.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-five-col-lot/print-five-col-lot.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-five-col-lot/print-five-col-lot.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-five-col/print-five-col.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-five-col/print-five-col.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-four-col-lot/print-four-col-lot.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-four-col-lot/print-four-col-lot.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-four-col/print-four-col.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-four-col/print-four-col.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-one-col-lot/print-one-col-lot.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-one-col-lot/print-one-col-lot.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-one-col/print-one-col.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-one-col/print-one-col.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-three-col-lot/print-three-col-lot.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-three-col-lot/print-three-col-lot.component.html","./src/app/sales/menu/manage/products/products-list/edit-product/print-two-col-lot/print-two-col-lot.component.ts","./src/app/sales/menu/manage/products/products-list/edit-product/print-two-col-lot/print-two-col-lot.component.html","./src/app/sales/menu/manage/products/products-list/hidden-product/hidden-product.component.ts","./src/app/sales/menu/manage/products/products-list/hidden-product/hidden-product.component.html","./src/app/sales/menu/manage/products/products-list/lot-list-update/lot-list-update.component.ts","./src/app/sales/menu/manage/products/products-list/lot-list-update/lot-list-update.component.html","./src/app/sales/menu/manage/products/products-list/products-list.component.ts","./src/app/sales/menu/manage/products/products-list/products-list.component.html","./src/app/sales/menu/manage/products/products-list/products-list.module.ts","./src/app/sales/menu/manage/products/products-list/units-list-update/units-list-update.component.ts","./src/app/sales/menu/manage/products/products-list/units-list-update/units-list-update.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators, FormArray, AbstractControl, ValidationErrors } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { VhQuerySales, VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-create-data-products',\r\n  templateUrl: './create-data-products.component.html',\r\n  styleUrls: ['./create-data-products.component.scss']\r\n})\r\nexport class CreateDataProductsComponent {\r\n\r\n  formData: FormGroup[] = [];\r\n  localProduct: any[] = [];\r\n  localCategory: any[] = [];\r\n  nameFile: string = \"\";\r\n  file_import_is_manysize = false;\r\n  url: any = \"/assets/documents/list-product/\" + this.languageService.translate(\"Product list\") + \".xlsx\";\r\n  url_sub: any = \"/assets/documents/list-product/\" + this.languageService.translate(\"The size of the product list\") + \".xlsx\";\r\n\r\n  management_product_tax: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_tax;\r\n  management_product_price2: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n  VALIDATOR_PRICE = [Validators.required, Validators.pattern(/^-?\\d+(\\.\\d+)?$/)];\r\n\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService,\r\n    private platform: Platform,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.syncData();\r\n  }\r\n\r\n\r\n\r\n  syncData() {\r\n    this.localProduct = this.vhQuerySales.getlocalProducts().filter(item => item.type == VhType.PRODUCT);\r\n    this.localCategory = this.vhQuerySales.getlocalCategorys().filter(item => item.type == VhType.PRODUCT);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * trả về form lưu các trường để thêm sp\r\n   * @example this.initForm({name : '',...} , 1)\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  initForm(data, index) {\r\n    const units = new FormArray([]);\r\n    const form = new FormGroup({\r\n      manylot: new FormControl(data[this.languageService.translate(\"_manylot\")]?.toString().toLowerCase() === 'yes'),\r\n      manysize: new FormControl(data[this.languageService.translate(\"_subname\")] ? true : false),\r\n      id: new FormControl(index),\r\n      name: new FormControl(data[this.languageService.translate(\"_name\")], [Validators.required]),\r\n      subname: new FormControl(data[this.languageService.translate(\"_subname\")] || '', data[this.languageService.translate(\"_subname\")] ? [Validators.required] : []),\r\n      category: new FormControl(data[this.languageService.translate(\"_category\")], Validators.required),\r\n      unit: new FormControl(data[this.languageService.translate(\"_unit\")], [Validators.required]),\r\n      ratio: new FormControl(1, [Validators.required]),\r\n      brand: new FormControl(data[this.languageService.translate(\"_brand\")]),\r\n      price_import: new FormControl(data[this.languageService.translate(\"_price_import\")], this.VALIDATOR_PRICE),\r\n      price: new FormControl(data[this.languageService.translate(\"_price\")], this.VALIDATOR_PRICE),\r\n      price2: new FormControl(data[this.languageService.translate(\"_price2\")], this.VALIDATOR_PRICE),\r\n      barcode: new FormControl(data[this.languageService.translate(\"_barcode\")]?.toString(), [\r\n        CustomValidators.barcodeValidator(() => this.formData, this.vhQuerySales)\r\n      ]),\r\n      warning_number: new FormControl(data[this.languageService.translate(\"_warning_number\")] === '' ? 0 : Number(data[this.languageService.translate(\"_warning_number\")]), [Validators.pattern(/^-?\\d+(\\.\\d+)?$/)]),\r\n      item_code: new FormControl(data[this.languageService.translate(\"_item_code\")]),\r\n      tax: new FormControl(this.management_product_tax && data[this.languageService.translate(\"_tax\")] ? data[this.languageService.translate(\"_tax\")] : 0),\r\n      units: units,\r\n    });\r\n\r\n    // Thêm unit và validators\r\n    form.get('unit')?.setValidators([\r\n      Validators.required,\r\n      CustomValidators.unitNameValidator(() => form)\r\n    ]);\r\n\r\n    // Thêm ratio và validators\r\n    form.get('ratio')?.disable();\r\n    form.get('ratio')?.setValidators([\r\n      Validators.required,\r\n      CustomValidators.ratioValidator(() => form)\r\n    ]);\r\n  \r\n    // Xử lý subname và manysize cho sub\r\n    if (data[this.languageService.translate(\"_subname\")]) {\r\n      form.addControl('subname', new FormControl(data[this.languageService.translate(\"_subname\")], [Validators.required]));\r\n      form.get('manysize')?.setValue(true);\r\n    } else {\r\n      form.removeControl('subname');\r\n      form.get('manysize')?.setValue(false);\r\n    }\r\n  \r\n    return form;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Nhập tệp Excel\r\n   */\r\n  openFile() {\r\n    document.getElementById(\"file_excel_product\")['value'] = '';\r\n    document.getElementById(\"file_excel_product\").click();\r\n  }\r\n\r\n\r\n\r\n  /**Mở CSVFile */\r\n  openXLSXFile(events) {\r\n    this.formData = [];\r\n    this.file_import_is_manysize = false;\r\n    if (events.target.files[0]) {\r\n      // lưu tên file\r\n\r\n      this.nameFile = events.target.files[0]['name'].slice(0, events.target.files[0]['name'].lastIndexOf(\".\"));\r\n\r\n      this.vhAlgorithm.importXLSX(events.target.files[0]).then((data: any) => {\r\n        if (data.length > 1000) {\r\n          this.vhComponent.alertMessage(\"\", this.languageService.translate(\"Only 1000 products can be imported at a time\"), \"\", \"OK\").then(() => {\r\n            this.formData = [];\r\n          });\r\n        } else {\r\n          if (data.length) {\r\n            this.vhComponent.showLoadingNotDuration(\"\").then(() => {\r\n              /** Map chứa sản phẩm theo tên */\r\n              const productMap = new Map();\r\n\r\n              // Lặp qua từng dùng trong file\r\n              data.forEach((item, index) => {\r\n                const productName = item[this.languageService.translate('_name')];\r\n                const subname = item[this.languageService.translate('_subname')];\r\n                let key = '';\r\n\r\n                // CÓ sub\r\n                if (subname) {\r\n                  key = `${productName}_${subname}`;\r\n                }\r\n                // KHÔNG sub\r\n                else {\r\n                  key = `${productName}`;\r\n                }\r\n\r\n                // Nếu chưa có form trong map thì tạo mới\r\n                if (!productMap.has(key)) {\r\n                  const form = this.initForm(item, index);\r\n                  productMap.set(key, form);\r\n                } \r\n                // Nếu đã có form trong map thì lấy ra và thêm unit\r\n                else {\r\n                  // Lấy form ra\r\n                  const existingForm = productMap.get(key);\r\n                  // Thêm unit\r\n                  const newUnit = this.addUnitForm(existingForm, item);\r\n                  // Thêm vô mảng units\r\n                  (existingForm.get('units') as FormArray).push(newUnit);\r\n                  // Lưu lại form đã cập nhật vào map\r\n                  productMap.set(key, existingForm);\r\n                }\r\n\r\n                if (index == data.length - 1) {\r\n                  this.formData = Array.from(productMap.values()); // Chuyển map sang array\r\n                  console.log(\"formData\", this.formData);\r\n                  this.vhComponent.hideLoading(0);\r\n                  // nếu có sub thì check lại checkModelChangeSubProduct\r\n                  if (this.formData[0].value.manysize) {\r\n                    this.file_import_is_manysize = true;\r\n                  }\r\n                  else {\r\n                    this.file_import_is_manysize = false;\r\n                  }\r\n                }\r\n              });\r\n            });\r\n          }\r\n        }\r\n      }).catch(err => {\r\n        this.vhComponent.hideLoading(0);\r\n        this.formData = [];\r\n        this.vhComponent.alertMessage(this.languageService.translate('Error'), this.languageService.translate('Fail file format'), '', this.languageService.translate('Cancel'));\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Trả về một FormGroup cho unit mới, dùng khi thêm unit mới vào units\r\n   */\r\n  addUnitForm(existingForm: FormGroup, item): FormGroup {\r\n    return new FormGroup({\r\n      price: new FormControl(parseFloat(item[this.languageService.translate('_price')]), this.VALIDATOR_PRICE),\r\n      price2: new FormControl(this.management_product_price2 ? parseFloat(item[this.languageService.translate('_price2')]) : 0, this.VALIDATOR_PRICE),\r\n      price_import: new FormControl(parseFloat(item[this.languageService.translate('_price_import')]), this.VALIDATOR_PRICE),\r\n      unit: new FormControl(item[this.languageService.translate('_unit')] ? item[this.languageService.translate('_unit')].trim() : '', [\r\n        Validators.required,\r\n        CustomValidators.unitNameValidator(() => existingForm)\r\n      ]),\r\n      barcode: new FormControl(item[this.languageService.translate('_barcode')] ? item[this.languageService.translate('_barcode')] : '', [\r\n        CustomValidators.barcodeValidator(() => this.formData, this.vhQuerySales)\r\n      ]),\r\n      ratio: new FormControl(item[this.languageService.translate('_ratio')] ? parseFloat(item[this.languageService.translate('_ratio')]) : 1, [\r\n        Validators.required,\r\n        CustomValidators.ratioValidator(() => existingForm)\r\n      ]),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  status: boolean = false;\r\n  /** \r\n   * Xuất tệp ra XLSX\r\n   */\r\n  exportXLSXFile() {\r\n    if (this.formData.length) {\r\n      let XLSXData: any[] = [];\r\n      this.formData.forEach((item, index) => {\r\n        let row: Object = new Object;\r\n        row[this.languageService.translate(\"_name\")] = item['value']['name'];\r\n        if (item['value']['subname']) row[this.languageService.translate(\"_subname\")] = item['value']['subname'];\r\n        row[this.languageService.translate(\"_item_code\")] = item['value']['item_code'];\r\n        row[this.languageService.translate(\"_tax\")] = this.management_product_tax && item['value']['tax'] ? item['value']['tax'] : 0;\r\n        row[this.languageService.translate(\"_category\")] = item['value']['category'];\r\n        row[this.languageService.translate(\"_brand\")] = item['value']['brand'];\r\n        row[this.languageService.translate(\"_unit\")] = item['value']['unit'];\r\n        row[this.languageService.translate(\"_ratio\")] = item['value']['ratio'];\r\n        row[this.languageService.translate(\"_price_import\")] = item['value']['price_import'];\r\n        row[this.languageService.translate(\"_price\")] = item['value']['price'];\r\n        row[this.languageService.translate(\"_price2\")] = item['value']['price2'];\r\n        row[this.languageService.translate(\"_barcode\")] = item['value']['barcode'];\r\n        row[this.languageService.translate(\"_warning_number\")] = item['value']['warning_number'];\r\n        row[this.languageService.translate(\"_manylot\")] = item['value']['manylot'] ? 'Yes' : 'No';\r\n        XLSXData.push(row);\r\n        // Xử lý units\r\n        if (item['value']['units'] && item['value']['units'].length) {\r\n          item['value']['units'].forEach((unit, unitIndex) => {\r\n            let unitRow: Object = new Object;\r\n            unitRow[this.languageService.translate(\"_name\")] = item['value']['name'];\r\n            if (item['value']['subname']) unitRow[this.languageService.translate(\"_subname\")] = item['value']['subname'];\r\n            unitRow[this.languageService.translate(\"_unit\")] = unit['unit'];\r\n            unitRow[this.languageService.translate(\"_ratio\")] = unit['ratio'];\r\n            unitRow[this.languageService.translate(\"_price_import\")] = unit['price_import'];\r\n            unitRow[this.languageService.translate(\"_price\")] = unit['price'];\r\n            unitRow[this.languageService.translate(\"_price2\")] = this.management_product_price2 ? unit['price2'] : 0;\r\n            unitRow[this.languageService.translate(\"_barcode\")] = unit['barcode'];\r\n            XLSXData.push(unitRow);\r\n          });\r\n        }\r\n        if (index == this.formData.length - 1) {\r\n          this.vhAlgorithm.exportXLSX(XLSXData, this.nameFile).then(() => this.status = true).catch(err => this.status = true);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Tải file mẫu */\r\n  downloadSampleFile() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Product-list-new.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Danh-sach-san-pham-new.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\");\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n    } else {\r\n      document.getElementById(\"download_product\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Tải file mẫu có sub */\r\n  downloadSampleFileSub() {\r\n    if (this.platform.is(\"electron\")) {\r\n      let urlEn = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/The-size-of-the-product-list-new.xlsx\";\r\n      let urlVI = \"https://github.com/Viethas-App/Sales365-Desktop-Electron/raw/main/assets/data/Danh-sach-san-pham-co-thuoc-tinh-new.xlsx\";\r\n      let appLang: any = localStorage.getItem(\"vh-sales-language\");\r\n      if (appLang == 'vi') window.open(urlVI, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n      else window.open(urlEn, '_blank', 'location=yes,height=250,width=250,scrollbars=yes,status=yes,title=Download');\r\n    } else {\r\n      document.getElementById(\"download_subproduct\").click();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**Check dữ liệu trước khi tạo dữ liệu */\r\n  checkForm(): boolean {\r\n    for (let i = 0; i < this.formData.length; i++) {\r\n      if (this.formData[i].invalid) {\r\n        this.vhComponent.alertMessage(this.languageService.translate('Error'), `${this.languageService.translate('Error line')} ${i + 1}`, '', this.languageService.translate('Cancel'));\r\n        return false;\r\n      }\r\n      if (i == this.formData.length - 1) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  createdError: string = \"\";\r\n  /**\r\n   * bắt sk nhấn nút lưu\r\n   * @example this.createData()\r\n   */\r\n  createData() {\r\n    if (this.checkForm()) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Create product data\") + '?', \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(res => {\r\n          if (!this.file_import_is_manysize) this.createCategoriesAndProduct();\r\n          else this.createCategoriesAndSubProduct();\r\n        }, () => { });\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo dữ liệu danh mục và sản phẩm\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  createCategoriesAndProduct() {\r\n    this.vhComponent.showLoadingNotDuration(\"\", \"current-loading\").then(async () => {\r\n      // lấy dữ liệu tên category\r\n      const dataCategory: any[] = [...new Set(this.formData.map(item => item['value']['category']))];\r\n      // tìm ra dữ liệu category chưa được tạo database\r\n      let createdCategory: any[] = []; // danh sách danh mục được tạo\r\n      dataCategory.forEach((item, index) => {\r\n        if (item && !this.localCategory.some(cate => this.vhAlgorithm.changeAlias(cate.name.trim()).toLowerCase() == this.vhAlgorithm.changeAlias(item.trim()).toLowerCase()))\r\n          createdCategory.push({ name: item, type: VhType.PRODUCT });\r\n      });\r\n\r\n      try {\r\n        const categories: any = await this.vhQuerySales.addCategorys(createdCategory);\r\n\r\n        if (categories)\r\n          this.localCategory = [...this.localCategory.concat([...categories])];\r\n        else throw Error(\"Categories have been created failed\");\r\n\r\n        // tạo sản phẩm\r\n        const dataProduct: any[] = this.formData.map(form => {\r\n          const category: any = this.localCategory.find(cate => this.vhAlgorithm.changeAlias(cate['name'].trim()).toLowerCase() == this.vhAlgorithm.changeAlias(form['value']['category'].trim()).toLowerCase());\r\n          let data: any = {\r\n            img: '',\r\n            name: form['value']['name'].trim(),\r\n            warning_number: !form['value']['warning_number'] ? 0 : parseInt(form['value']['warning_number']),\r\n            brand: form['value']['brand'] ? form['value']['brand'].trim() : '',\r\n            item_code: form['value']['item_code'] ? form['value']['item_code'].trim() : '',\r\n            tax: this.management_product_tax && form['value']['tax'] ? parseFloat(form['value']['tax'].trim()) : 0,\r\n            id_category: category?._id,\r\n            type: VhType.PRODUCT,\r\n            // allow_sell: true,\r\n            delete_hidden: false,\r\n            manysize: false,\r\n            manylot: form['value']['manylot'],\r\n            units: [\r\n              {\r\n                price: parseFloat(form['value']['price']),\r\n                price2: this.management_product_price2 ? parseFloat(form['value']['price2']) : 0,\r\n                price_import: parseFloat(form['value']['price_import']),\r\n                unit: form['value']['unit'] ? form['value']['unit'].trim() : '',\r\n                barcode: form['value']['barcode'] ? form['value']['barcode'] : '',\r\n                ratio: 1,\r\n                default: true\r\n              },\r\n              ...form['value']['units'].map(unit => {\r\n                return {\r\n                  price: parseFloat(unit['price']),\r\n                  price2: this.management_product_price2 ? parseFloat(unit['price2']) : 0,\r\n                  price_import: parseFloat(unit['price_import']),\r\n                  unit: unit['unit'] ? unit['unit'].trim() : '',\r\n                  barcode: unit['barcode'] ? unit['barcode'] : '',\r\n                  ratio: parseFloat(unit['ratio']),\r\n                  default: false\r\n                };\r\n              })\r\n            ]\r\n          };\r\n          if (form['value']['manylot']) {\r\n            data['days_import_warning'] = 7;\r\n            data['days_exp_warning'] = 7;\r\n            data['lots'] = [];\r\n          }\r\n          return data;\r\n        });\r\n\r\n        // Mỗi lần add 5 cái, xong mới add tiếp 5 cái kế\r\n        const batchSize = 5;\r\n        let addedProducts = [];\r\n        for (let i = 0; i < dataProduct.length; i += batchSize) {\r\n          // lấy 5 cái\r\n          const batch = dataProduct.slice(i, i + batchSize);\r\n          try {\r\n            const promises = batch.map(async (product) => {\r\n              return await this.vhQuerySales.addProducts([product]);\r\n            });\r\n            // add\r\n            const results = await this.vhQuery.asyncPromiseAll(promises);\r\n            // sau khi add xong\r\n            console.log(`Batch ${Math.floor(i / batchSize) + 1} added successfully`);\r\n            results.forEach((products, index) => {\r\n              if (products) {\r\n                addedProducts.push(...products); // Thêm các sản phẩm đã thêm vào mảng addedProducts\r\n              } else {\r\n                throw Error(\"Products have been created failed\");\r\n              }\r\n            });\r\n          } catch (error) {\r\n            console.error(`Error in batch ${Math.floor(i / batchSize) + 1}:`, error);\r\n          }\r\n        }\r\n        // add xong\r\n        this.vhComponent.hideLoading(0);\r\n        this.showLog([...dataProduct], [...addedProducts]);\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\");\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tạo dữ liệu danh mục và sản phẩm có sp con\r\n   * unit default đầu tiêu sẽ lưu trong form, các unit còn lại sẽ lưu trong units\r\n   */\r\n  createCategoriesAndSubProduct() {\r\n    this.vhComponent.showLoadingNotDuration(\"\", \"current-loading\").then(async () => {\r\n      // lấy dữ liệu tên category\r\n      const dataCategory: any[] = [...new Set(this.formData.map(item => item['value']['category']))];\r\n      // tìm ra dữ liệu category chưa được tạo database\r\n      let createdCategory: any[] = []; // danh sách danh mục được tạo\r\n      dataCategory.forEach((item, index) => {\r\n        if (item && !this.localCategory.some(cate => this.vhAlgorithm.changeAlias(cate.name.trim()).toLowerCase() == this.vhAlgorithm.changeAlias(item.trim()).toLowerCase()))\r\n          createdCategory.push({ name: item, type: VhType.PRODUCT });\r\n      });\r\n\r\n      try {\r\n        const categories: any = await this.vhQuerySales.addCategorys(createdCategory);\r\n\r\n        if (categories)\r\n          this.localCategory = [...this.localCategory.concat([...categories])];\r\n        else throw Error(\"Categories have been created failed\");\r\n\r\n        // tạo sản phẩm\r\n        const dataProduct: any[] = [];\r\n        let products = this.formData.map(item => { return { ...item.value }; });\r\n        for (let i = 0; i < products.length; i++) {\r\n          if (!dataProduct.find(pro => pro.name == products[i].name)) {\r\n            let category: any = this.localCategory.find(cate => this.vhAlgorithm.changeAlias(cate['name'].trim()).toLowerCase() == this.vhAlgorithm.changeAlias(products[i]['category'].trim()).toLowerCase());\r\n            let subproduct = products.filter(e => e.name == products[i].name);\r\n            dataProduct.push({\r\n              img: '',\r\n              name: products[i].name,\r\n              brand: products[i].brand,\r\n              tax: this.management_product_tax && products[i].tax ? parseFloat(products[i].tax) : 0,\r\n              manysize: true,\r\n              type: VhType.PRODUCT,\r\n              id_category: category?._id,\r\n              position: \"\",\r\n              delete_hidden: false,\r\n              subs: subproduct.map(sub => {\r\n                let sub_data = {\r\n                  name: sub.subname.toString(),\r\n                  warning_number: Number(sub.warning_number),\r\n                  item_code: sub.item_code ? sub.item_code.toString().trim() : '',\r\n                  manylot: sub.manylot,\r\n                  // allow_sell: true,\r\n                  delete_hidden: false,\r\n                  selling: true,\r\n                  units: [\r\n                    {\r\n                      price: parseFloat(sub.price ? sub.price.toString().trim() : '0'),\r\n                      price2: this.management_product_price2 ? parseFloat(sub.price2 ? sub.price2.toString().trim() : '0') : 0,\r\n                      price_import: parseFloat(sub.price_import ? sub.price_import.toString().trim() : \"0\"),\r\n                      barcode: sub.barcode ? sub.barcode.toString().trim() : '',\r\n                      unit: sub['unit'] ? sub['unit'].toString().trim() : '',\r\n                      ratio: 1,\r\n                      default: true\r\n                    },\r\n                    ...sub['units'].map(unit => {\r\n                      return {\r\n                        price: parseFloat(unit['price']),\r\n                        price2: this.management_product_price2 ? parseFloat(unit['price2']) : 0,\r\n                        price_import: parseFloat(unit['price_import']),\r\n                        unit: unit['unit'] ? unit['unit'].trim() : '',\r\n                        barcode: unit['barcode'] ? unit['barcode'] : '',\r\n                        ratio: parseFloat(unit['ratio']),\r\n                        default: false\r\n                      };\r\n                    })\r\n                  ]\r\n                };\r\n                if (sub.manylot) {\r\n                  sub_data['days_import_warning'] = 7;\r\n                  sub_data['days_exp_warning'] = 7;\r\n                  sub_data['lots'] = [];\r\n                }\r\n                return sub_data;\r\n              })\r\n            });\r\n          }\r\n        }\r\n\r\n        // Mỗi lần add 5 cái, xong mới add tiếp 5 cái kế\r\n        const batchSize = 5;\r\n        try {\r\n          for (let i = 0; i < dataProduct.length; i += batchSize) {\r\n            // lấy 5 cái\r\n            const batch = dataProduct.slice(i, i + batchSize);\r\n            const promises = batch.map(async (product) => {\r\n              let subs = [];\r\n              if (product.manysize) {\r\n                subs = [...product.subs];\r\n                delete product.subs;\r\n              }\r\n              return await this.vhQuerySales.addProductAndSubsProduct(product, subs);\r\n            });\r\n            // add\r\n            const results = await this.vhQuery.asyncPromiseAll(promises);\r\n            // sau khi add xong\r\n            console.log(`Batch ${Math.floor(i / batchSize) + 1} added successfully`);\r\n            if (!results) {\r\n              throw Error(\"Products have been created failed\");\r\n            }\r\n          }\r\n\r\n          this.vhComponent.showToast(1500, `${this.languageService.translate(\"Products\")} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n        } catch (error) {\r\n          console.error(\"Error in batch processing:\", error);\r\n          this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\");\r\n        } finally {\r\n          this.vhComponent.hideLoading(0);\r\n          this.goBack();\r\n        }\r\n      } catch (error) {\r\n        this.vhComponent.hideLoading(0);\r\n        console.error(error);\r\n        this.vhComponent.showToast(1500, `${this.languageService.translate(\"An error occurred while adding product. Please try again\")}`, \"success-toast\");\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * hiển thị modal lỗi thêm ncc nếu có\r\n   * @param data mảng ncc cần thêm\r\n   * @param dataSuccess mảng ncc đã thêm lên DB thành công\r\n   * @example this.showLog([...data], [...customer])\r\n   */\r\n  showLog(data: any[], dataSuccess: any[]) {\r\n    this.createdError = \"\";\r\n    console.log(\"data\", data);\r\n    console.log(\"dataSuccess\", dataSuccess);\r\n    if (data.length != dataSuccess.length) {\r\n      for (let product of data) {\r\n        if (!dataSuccess.some(item => item.phone == product.phone))\r\n          this.createdError += `<span> - ${product.name}(${product.phone})</span><br/>`;\r\n      }\r\n\r\n      this.nzModalService.error({\r\n        nzTitle: this.languageService.translate(\"Products have been created failed\"),\r\n        nzContent: this.createdError\r\n      });\r\n\r\n      this.formData = [];\r\n    } else {\r\n      this.vhComponent.hideLoading(0).then(() => {\r\n        this.goBack();\r\n      });\r\n      this.vhComponent.showToast(1500, `${this.languageService.translate(\"Products\")} ${this.languageService.translate(\"has been added successfully\")}`, \"success-toast\");\r\n    }\r\n  }\r\n\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list']);\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nexport class CustomValidators {\r\n\r\n  /**\r\n   * Kiểm tra barcode có trùng trong form và trong database hay không.\r\n   * \r\n   * Sẽ trả về lỗi `barcodeExists` nếu có trùng.\r\n   * \r\n   * @param formData \r\n   * @param vhQuerySales\r\n   * @returns\r\n   * @example\r\n   * barcode: new FormControl('mybarcode', [CustomValidators.barcodeValidator(() => this.formData, this.vhQuerySales)]),\r\n   */\r\n  static barcodeValidator(formData: () => FormGroup[], vhQuerySales: VhQuerySales) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi barcode */\r\n      const barcodeCounts = new Map<string, number>();\r\n  \r\n      // Đếm số lần xuất hiện của mỗi barcode\r\n      formData()?.forEach(form => {\r\n        const allControls = [form.get('barcode'), ...((form.get('units') as FormArray).controls.map(unit => unit.get('barcode')))];\r\n        allControls.forEach(ctrl => {\r\n          const ctrlBarcode = ctrl?.value?.toString()?.trim();\r\n          if (ctrlBarcode) {\r\n            barcodeCounts.set(ctrlBarcode, (barcodeCounts.get(ctrlBarcode) || 0) + 1);\r\n            // Kiểm tra xem barcode hiện tại có trùng trong database hay không\r\n            const barcodeExistsInDB = vhQuerySales.getlocalDetailProduct_byBarcode(ctrlBarcode);\r\n            if (barcodeExistsInDB) {\r\n              barcodeCounts.set(ctrlBarcode, (barcodeCounts.get(ctrlBarcode) || 0) + 1);\r\n            }\r\n          }\r\n        });\r\n      });\r\n  \r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      formData()?.forEach(form => {\r\n        const allControls = [form.get('barcode'), ...((form.get('units') as FormArray).controls.map(unit => unit.get('barcode')))];\r\n        allControls.forEach(ctrl => {\r\n          const ctrlBarcode = ctrl?.value?.toString()?.trim();\r\n          // Nếu xuất hiện > 1 lần thì set lỗi\r\n          if (barcodeCounts.get(ctrlBarcode) > 1) {\r\n            ctrl?.setErrors({ ...ctrl.errors, barcodeExists: true });\r\n          } \r\n          // Nếu không thì xóa lỗi barcodeExists\r\n          else {\r\n            if (ctrl?.hasError('barcodeExists')) {\r\n              /** Danh sách những lỗi hiện tạo của contol này */\r\n              const existingErrors = ctrl.errors; \r\n              // Xóa lỗi barcodeExists nếu có\r\n              if (existingErrors) {\r\n                delete existingErrors['barcodeExists'];\r\n                ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n  \r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return barcodeCounts.get(control.value) > 1 ? { barcodeExists: true } : null;\r\n    };\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * Kiểm tra tên đơn vị có trùng trong sản phẩm hay không.\r\n   * \r\n   * Sẽ trả về lỗi `unitNameExists` nếu có trùng.\r\n   * \r\n   * Cần kiểm tra unit của form và units.\r\n   */\r\n  static unitNameValidator(currentForm: () => FormGroup) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi unit */\r\n      const unitCounts = new Map<string, number>();\r\n      /** Tất cả control của unit trong form và units */\r\n      const allControls = [currentForm().get('unit'), ...((currentForm().get('units') as FormArray).controls.map(unit => unit.get('unit')))];\r\n\r\n      // Đếm số lần xuất hiện của mỗi unit\r\n      allControls.forEach(ctrl => {\r\n        const unitNameValue = ctrl?.value?.trim();\r\n        if (unitNameValue) {\r\n          unitCounts.set(unitNameValue, (unitCounts.get(unitNameValue) || 0) + 1);\r\n        }\r\n      });\r\n\r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      allControls.forEach(ctrl => {\r\n        // Nếu xuất hiện > 1 lần thì set lỗi\r\n        if (unitCounts.get(ctrl?.value?.trim()) > 1) {\r\n          ctrl?.setErrors({ unitNameExists: true });\r\n        } \r\n        // Nếu không thì xóa lỗi unitNameExists\r\n        else {\r\n          if (ctrl?.hasError('unitNameExists')) {\r\n            /** Danh sách những lỗi hiện tạo của contol này */\r\n            const existingErrors = ctrl.errors;\r\n            // Xóa lỗi unitNameExists nếu có\r\n            if (existingErrors) {\r\n              delete existingErrors['unitNameExists'];\r\n              ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return unitCounts.get(control.value) > 1 ? { unitNameExists: true } : null;\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Kiểm tra ratio có trùng trong sản phẩm hay không.\r\n   * \r\n   * Sẽ trả về lỗi `ratioExists` nếu có trùng.\r\n   * \r\n   * Cần kiểm tra ratio của form và ratio trong unitss.\r\n   */\r\n  static ratioValidator(currentForm: () => FormGroup) {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      /** Map chứa số lần xuất hiện của mỗi ratio */\r\n      const ratioCounts = new Map<string, number>();\r\n      /** Tất cả control của ratio trong form và units */\r\n      const allControls = [currentForm().get('ratio'), ...((currentForm().get('units') as FormArray).controls.map(ratio => ratio.get('ratio')))];\r\n\r\n      // Đếm số lần xuất hiện của mỗi ratio\r\n      allControls.forEach(ctrl => {\r\n        const ratioValue = ctrl?.value?.toString()?.trim();\r\n        if (ratioValue) {\r\n          ratioCounts.set(ratioValue, (ratioCounts.get(ratioValue) || 0) + 1);\r\n        }\r\n      });\r\n\r\n      // Lặp qua tất cả control và kiểm tra lỗi\r\n      allControls.forEach(ctrl => {\r\n        // Nếu xuất hiện > 1 lần thì set lỗi\r\n        if (ratioCounts.get(ctrl?.value?.toString()?.trim()) > 1) {\r\n          ctrl?.setErrors({ ratioExists: true });\r\n        } \r\n        // Nếu không thì xóa lỗi ratioExists\r\n        else {\r\n          if (ctrl?.hasError('ratioExists')) {\r\n            /** Danh sách những lỗi hiện tạo của contol này */\r\n            const existingErrors = ctrl.errors;\r\n            // Xóa lỗi ratioExists nếu có\r\n            if (existingErrors) {\r\n              delete existingErrors['ratioExists'];\r\n              ctrl.setErrors(Object.keys(existingErrors).length ? existingErrors : null);\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      // Xử lý trả về lỗi cho control hiện tại\r\n      return ratioCounts.get(control.value) > 1 ? { ratioExists: true } : null;\r\n    };\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <div nz-row style=\"padding-bottom: 16px;z-index: 99;\">\r\n    <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n      <div>\r\n        <b>{{'Create product data' | translate}}</b>\r\n        <small style=\"color: var(--ion-color-vh-gray); display: block\">*{{'The first unit must have a ratio of 1' | translate}}</small>\r\n      </div>\r\n    </div>\r\n    <div nz-col nzSpan=\"16\" class=\"right-all-content\">\r\n      <!-- Tải file mẫu -->\r\n      <div>\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\"  class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n          {{'Download sample file' | translate}}</button>\r\n          <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n            <ul nz-menu>\r\n              <li nz-menu-item (click)=\"downloadSampleFile()\">{{'Product WITHOUT ATTRIBUTE' | translate}}</li>\r\n              <li nz-menu-item (click)=\"downloadSampleFileSub()\">{{'Product WITH ATTRIBUTE' | translate}}</li>\r\n            </ul>\r\n          </nz-dropdown-menu>\r\n      </div>\r\n      <!-- Xuất tệp -->\r\n      <div>\r\n        <button (click)=\"exportXLSXFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export file' | translate}}</button>\r\n      </div>\r\n      <!-- Nhập tệp -->\r\n      <div>\r\n        <button (click)=\"openFile()\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"upload\" nzTheme=\"outline\"></i>\r\n          {{'Import file' | translate}}</button>\r\n      </div>\r\n      <!-- Tạo dữ liệu -->\r\n      <div>\r\n        <button (click)=\"createData()\" [disabled]=\"!formData.length\" class=\"btn-add center-all-content\" nz-button\r\n          nzType=\"default\">\r\n          <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n          {{'Create data' | translate}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div nz-row class='table'>\r\n    <table>\r\n      <thead>\r\n        <tr *ngIf=\"file_import_is_manysize\">\r\n          <th style=\"max-width: 3% !important; width: 3%;\">#</th>\r\n          <th style=\"max-width: 8% !important; width: 8%;\">{{\"_name\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%;\">{{\"_subname\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_item_code\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_category\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_brand\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%; text-align: center;\">{{\"_unit\"| translate}}</th>\r\n          <th style=\"max-width: 3% !important; width: 3%; text-align: center;\">{{\"_ratio\"| translate}}</th>\r\n          <th *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_tax\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price_import\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price2\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_barcode\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_warning_number\"| translate}}</th>\r\n        </tr>\r\n        <tr *ngIf=\"!file_import_is_manysize\">\r\n          <th style=\"max-width: 3% !important; width: 3%;\">#</th>\r\n          <th style=\"max-width: 15% !important; width: 15%;\">{{\"_name\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_item_code\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_category\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_brand\"| translate}}</th>\r\n          <th style=\"max-width: 7% !important; width: 7%; text-align: center;\">{{\"_unit\"| translate}}</th>\r\n          <th style=\"max-width: 3% !important; width: 3%; text-align: center;\">{{\"_ratio\"| translate}}</th>\r\n          <th *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;text-align: center;\">{{\"_tax\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price_import\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%\">{{\"_price2\"| translate}}</th>\r\n          <th style=\"max-width: 10% !important; width: 10%;\">{{\"_barcode\"| translate}}</th>\r\n          <th style=\"max-width: 5% !important; width: 5%;\">{{\"_warning_number\"| translate}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <ng-container *ngFor=\"let form of formData ? formData : []; let i = index\" [formGroup]=\"form\">\r\n          <tr>\r\n            <!-- STT -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">{{i + 1}}</td>\r\n  \r\n            <!-- Tên sản phẩm -->\r\n            <td [ngStyle]=\"{'max-width': file_import_is_manysize ? '8% !important' : '15% !important', 'width' : file_import_is_manysize ? '8%' : '15%'}\">\r\n              <input formControlName=\"name\"\r\n                type=\"text\" [placeholder]=\"'_name'| translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('name').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Name is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Tên thuộc tính -->\r\n            <td style=\"max-width: 7% !important; width: 7%;\" *ngIf=\"file_import_is_manysize\">\r\n              <input formControlName=\"subname\" \r\n                type=\"text\" [placeholder]=\"'_subname' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('subname')?.hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Size name is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Mã sản phẩm -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"item_code\"\r\n                style=\"text-align: end;\" type=\"text\" [placeholder]=\"'_item_code' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Danh mục -->\r\n            <td style=\"max-width: 10% !important; width: 10%;\">\r\n              <input formControlName=\"category\" \r\n                [placeholder]=\"'_category' | translate\" type=\"text\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('category').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Category is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('category').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Category is required' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Thương hiệu -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"brand\" type=\"text\" [placeholder]=\"'_brand' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Đơn vị -->\r\n            <td style=\"max-width: 7% !important; width: 7%;\">\r\n              <input formControlName=\"unit\" type=\"text\" [placeholder]=\"'_unit' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('unit').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Unit is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('unit').hasError('unitNameExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'Unit already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Tỉ lệ quy đổi -->\r\n            <td style=\"max-width: 3% !important; width: 3%;\">\r\n              <input formControlName=\"ratio\" type=\"text\" [placeholder]=\"'_ratio' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('ratio').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Ratio is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('ratio').hasError('ratioExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'Ratio already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Thuế -->\r\n            <td *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"tax\" type=\"text\" [placeholder]=\"'_tax' | translate\" />\r\n            </td>\r\n  \r\n            <!-- Giá nhập -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input formControlName=\"price_import\" \r\n                style=\"text-align: end;\" type=\"number\" [placeholder]=\"'_price_import' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price_import').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Cost is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price_import').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Giá bán -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input style=\"text-align: end;\" type=\"number\" formControlName=\"price\"\r\n                [placeholder]=\"'_price' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Price is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Giá bán 2 -->\r\n            <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n              <input formControlName=\"price2\"\r\n                style=\"text-align: end;\" type=\"number\" [placeholder]=\"'_price2' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price2').hasError('required')\">\r\n                <ion-text color=\"vh-red\">{{ 'Wholesale price is required' | translate }}</ion-text>\r\n              </div>\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('price2').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Mã vạch -->\r\n            <td style=\"max-width: 10% !important; width: 10%;\">\r\n              <input formControlName=\"barcode\"\r\n                type=\"text\" [placeholder]=\"'_barcode' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('barcode').hasError('barcodeExists')\">\r\n                <ion-text color=\"vh-red\">{{ 'QR code already exists' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n  \r\n            <!-- Số lượng cảnh báo -->\r\n            <td style=\"max-width: 5% !important; width: 5%;\">\r\n              <input formControlName=\"warning_number\" \r\n                style=\"text-align: end;\" type=\"text\" [placeholder]=\"'_warning_number' | translate\" />\r\n              <div class=\"error-message error-font\" *ngIf=\"form.get('warning_number').hasError('pattern')\">\r\n                <ion-text color=\"vh-red\">{{ 'Invalid format number' | translate }}</ion-text>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n\r\n          <!-- Danh sách units còn lại nếu có nhiều hơn 1 unit -->\r\n          <ng-container *ngIf=\"form.get('units')?.controls.length > 0\">\r\n            <tr *ngFor=\"let unit of form.get('units').controls\" [formGroup]=\"unit\">\r\n\r\n              <!-- STT -->\r\n              <td style=\"max-width: 3% !important; width: 3%;\"></td>\r\n    \r\n              <!-- Tên sản phẩm -->\r\n              <td [ngStyle]=\"{'max-width': file_import_is_manysize ? '8% !important' : '15% !important', 'width' : file_import_is_manysize ? '8%' : '15%'}\">\r\n              </td>\r\n    \r\n              <!-- Tên thuộc tính -->\r\n              <td style=\"max-width: 7% !important; width: 7%;\" *ngIf=\"file_import_is_manysize\">\r\n              </td>\r\n    \r\n              <!-- Mã sản phẩm -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Danh mục -->\r\n              <td style=\"max-width: 10% !important; width: 10%;\">\r\n              </td>\r\n    \r\n              <!-- Thương hiệu -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Đơn vị -->\r\n              <td style=\"max-width: 7% !important; width: 7%;\">\r\n                <input type=\"text\" formControlName=\"unit\" [placeholder]=\"'_unit' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('unit').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Unit is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('unit').hasError('unitNameExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Unit already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Tỉ lệ quy đổi -->\r\n              <td style=\"max-width: 3% !important; width: 3%;\">\r\n                <input type=\"text\" formControlName=\"ratio\" [placeholder]=\"'_ratio' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('ratio').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Ratio is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('ratio').hasError('ratioExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Ratio already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Thuế -->\r\n              <td *ngIf=\"management_product_tax\" style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n    \r\n              <!-- Giá nhập -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price_import\"\r\n                  [placeholder]=\"'_price_import' | translate\" />\r\n                  <div class=\"error-message error-font\" *ngIf=\"unit.get('price_import').hasError('required')\">\r\n                    <ion-text color=\"vh-red\">{{ 'Cost is required' | translate }}</ion-text>\r\n                  </div>\r\n                  <div class=\"error-message error-font\" *ngIf=\"unit.get('price_import').hasError('pattern')\">\r\n                    <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                  </div>\r\n              </td>\r\n    \r\n              <!-- Giá bán -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price\"\r\n                  [placeholder]=\"'_price' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Price is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price').hasError('pattern')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Giá bán 2 -->\r\n              <td style=\"max-width: 10% !important; width: 10%; font-weight: 700;\">\r\n                <input style=\"text-align: end;\" type=\"number\" formControlName=\"price2\"\r\n                  [placeholder]=\"'_price2' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price2').hasError('required')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Wholesale price is required' | translate }}</ion-text>\r\n                </div>\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('price2').hasError('pattern')\">\r\n                  <ion-text color=\"vh-red\">{{ 'Invalid price' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Mã vạch -->\r\n              <td style=\"max-width: 10% !important; width: 10%;\">\r\n                <input formControlName=\"barcode\" \r\n                  type=\"text\" [placeholder]=\"'_barcode' | translate\" />\r\n                <div class=\"error-message error-font\" *ngIf=\"unit.get('barcode').hasError('barcodeExists')\">\r\n                  <ion-text color=\"vh-red\">{{ 'QR code already exists' | translate }}</ion-text>\r\n                </div>\r\n              </td>\r\n    \r\n              <!-- Số lượng cảnh báo -->\r\n              <td style=\"max-width: 5% !important; width: 5%;\">\r\n              </td>\r\n            </tr>\r\n          </ng-container>\r\n\r\n        </ng-container>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</nz-layout>\r\n<a style=\"display: none;\" id=\"download_product\" [href]=\"url\" download></a>\r\n<a style=\"display: none;\" id=\"download_subproduct\" [href]=\"url_sub\" download></a>\r\n<input type=\"file\" style=\"display: none;\" id=\"file_excel_product\"\r\n  accept=\".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n  (change)=\"openXLSXFile($event)\" />\r\n","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js'; \r\n@Component({\r\n  selector: 'app-detail-three-col',\r\n  templateUrl: './detail-three-col.component.html',\r\n  styleUrls: ['./detail-three-col.component.scss']\r\n})\r\nexport class DetailThreeColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 3 thì hiện cả 3 tem trên hàng\r\n     * ngược lại number = 4 => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/3; i++) {\r\n     if(this.stamp.number%3 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/3) this.listRowBarcode.push({show_col2:false,show_col3:false});\r\n       else if(i == (this.stamp.number-2)/3) this.listRowBarcode.push({show_col2:true,show_col3:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n  \r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  stamp: any;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll: any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property = this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property, 'y');\r\n    \r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n\r\n    for (let item of this.stamp.barcode.property) {\r\n      switch (item.type) {\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'price': item.value = this.stamp.formProduct.price; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number / 2; i++) {\r\n      if (this.stamp.number % 2 == 0) this.listRowBarcode.push(true);\r\n      else {\r\n        if (i == (this.stamp.number - 1) / 2) this.listRowBarcode.push(false);\r\n        else this.listRowBarcode.push(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.stamp.formProduct.barcode)\r\n      jsbarcode(\".barcode\", this.stamp.formProduct.barcode, {\r\n        displayValue: false,\r\n        // height: 65\r\n      });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'], { state: this.stamp })\r\n  }\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n  // drop(event:any) {\r\n  //   moveItemInArray(this.stamp.barcode.property, event.previousIndex, event.currentIndex);\r\n  // }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                            }\"\r\n                            [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\"\r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': stamp.barcode.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                             }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'border': propertySelected == item ? '1px dashed gray' : 'none',\r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                             <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!-- <div nz-col nzSpan=\"6\" class=\"border-left\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n                    <span>Nhập số lượng:</span>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\">\r\n                    <input nz-input type=\"number\" [(ngModel)]=\"number\" (blur)=\"changeNummber()\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"title text-center\">Thuộc tính</div>\r\n            <div style=\"text-align: end;\">\r\n                <nz-select class=\"font-text-size\" nzMode=\"default\" nzPlaceHolder=\"Kích thước phông chữ\"\r\n                    [(ngModel)]=\"propertySelected.font_size\">\r\n                    <nz-option *ngFor=\"let option of listOfFontSize\" [nzLabel]=\"option\" [nzValue]=\"option\"></nz-option>\r\n                </nz-select>\r\n            </div>\r\n \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn font-text-btn-bold\" nz-button\r\n                    [nzType]=\"propertySelected.fontBold ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontBold = !propertySelected.fontBold; \">B</button>\r\n                <button class=\"font-text-btn font-text-btn-italic\" nz-button\r\n                    [nzType]=\"propertySelected.fontItalic ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontItalic = !propertySelected.fontItalic; \"><i nz-icon nzType=\"italic\"\r\n                        nzTheme=\"outline\"></i></button>\r\n                <button class=\"font-text-btn font-text-btn-underline\" nz-button\r\n                    [nzType]=\"propertySelected.fontUnderline ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.fontUnderline = !propertySelected.fontUnderline; \">\r\n                    <i nz-icon nzType=\"underline\" nzTheme=\"outline\"></i></button>\r\n\r\n            </div> \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'left' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'left'\">\r\n                    <i nz-icon nzType=\"align-left\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'center' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'center'\">\r\n                    <i nz-icon nzType=\"align-center\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.text_align == 'right' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.text_align = 'right'\">\r\n                    <i nz-icon nzType=\"align-right\" nzTheme=\"outline\"></i>\r\n                </button>\r\n            </div> \r\n            <div class=\"right-all-content\">\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'start' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'start'\">\r\n                    <i nz-icon nzType=\"vertical-align-top\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'center' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'center'\">\r\n                    <i nz-icon nzType=\"pic-center\" nzTheme=\"outline\"></i>\r\n                </button>\r\n                <button class=\"font-text-btn\" nz-button\r\n                    [nzType]=\"propertySelected.align_item == 'end' ? 'primary': 'default'\"\r\n                    (click)=\"propertySelected.align_item = 'end'\">\r\n                    <i nz-icon nzType=\"vertical-align-bottom\" nzTheme=\"outline\"></i>\r\n                </button>\r\n            </div>\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"12\" class=\"center-all-content\">\r\n                    <span>Hiển thị</span>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <nz-switch [(ngModel)]=\"propertySelected.status\" (ngModelChange)=\"propertySelected.status = $event\">\r\n                    </nz-switch>\r\n                </div>\r\n            </div>\r\n        </div> -->\r\n    </div>\r\n</nz-layout>","import { Component, OnInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhImage, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-product',\r\n  templateUrl: './edit-product.component.html',\r\n  styleUrls: ['./edit-product.component.scss']\r\n})\r\nexport class EditProductComponent implements OnInit {\r\n  showModalPrintBarcode = false;\r\n  data: any = [];\r\n  showPopup: boolean = false;\r\n  ProductForm: FormGroup;\r\n  barcode: boolean = true; // biến cho phép cập nhật barcode và show lỗi trùng true: ok, false : trùng\r\n  list_category: any;\r\n  price: any;\r\n  price2: any;\r\n  price_import: any;\r\n  stateObj: any;\r\n  listBarcode = [];\r\n  listBarcodeLot = [];\r\n  showDrawerUnitsUpdate = false;\r\n  show_lot_list_update = false;\r\n  id_lotproduct = '' // biến tạm lưu id lot được chọn để in\r\n  lots = []; // biến show danh sách lô để chọn để in\r\n  show_modal_select_lots = false\r\n  public dataUnits: any[];                    // Danh sách đơn vị quy đổi\r\n  dataUnitMain = {}\r\n  public rowLabel: any = [1, 2, 3, 4, 5]\r\n  product_has_lots = false;\r\n  id_sub_or_product = ''\r\n  show_modal_select_subs = false;\r\n  management_product_lot: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_lot;\r\n  management_product_price2: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_price2;\r\n  management_product_tax: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_tax;\r\n  /** detail được mở từ tab Đã ẩn hay không */\r\n  isFromHidden: boolean;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhImage: VhImage,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuery: VhQuery,\r\n    private cdf: ChangeDetectorRef,\r\n    private functionService: FunctionService,\r\n  ) {\r\n    this.data = this.router.getCurrentNavigation().extras.state;\r\n    this.isFromHidden = this.router.getCurrentNavigation().extras.state.isFromHidden;\r\n    this.initData(this.data.formProduct);\r\n\r\n\r\n    this.stateObj = this.router.getCurrentNavigation().extras.state.stateObj\r\n    if (this.data.listBarcode) {\r\n      this.listBarcode = this.data.listBarcode;\r\n      this.listBarcodeLot = this.data.listBarcodeLot;\r\n    }\r\n    this.subProducts = this.data.formProduct.subs ? this.data.formProduct.subs : []\r\n    this.dataUnits = this.data.formProduct.units ? this.data.formProduct.units : []\r\n\r\n    // xữ lý price cho subs\r\n    this.subProducts = this.subProducts.map(item => {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, 1);\r\n      return { ...item, ...unit }\r\n    })\r\n\r\n    if (this.data.formProduct.manylot || this.subProducts.find(e => e.manylot)) this.product_has_lots = true\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  heightScoll = ''\r\n  ngAfterViewChecked(): void {\r\n    if (this.ProductForm.value.manysize) {\r\n      if (document.getElementById(\"main\")) this.heightScoll = document.getElementById(\"main\").clientHeight / 2 - 32 + 'px'\r\n    }\r\n    this.cdf.detectChanges()\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.data.formProduct.manysize)\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price = this.vhAlgorithm.vhnumeral(\".price\");\r\n        this.price_import = this.vhAlgorithm.vhnumeral(\".price_import\");\r\n        if(this.management_product_price2) this.price2 = this.vhAlgorithm.vhnumeral(\".price2\");\r\n      });\r\n    if (this.listBarcode.length == 0)\r\n      this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $in: [1, 5] } })\r\n        .then((response: any) => {\r\n          this.listBarcode = response.filter(e => e.type == 1).map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n          this.listBarcodeLot = response.filter(e => e.type == 5).map(item => { item.property = this.vhAlgorithm.sortNumberbyASC(item.property, 'index'); return { ...item } })\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /**\r\n   * gán giá trị của sp nhận từ state vào form\r\n   * @example this.initData(product_info)\r\n   */\r\n  initData(item?) {\r\n    this.list_category = this.vhQuerySales.getlocalCategorys().filter(res => res.type == VhType.PRODUCT);\r\n    if (item) {\r\n      this.ProductForm = new FormGroup({\r\n        img: new FormControl(item.img),\r\n        name: new FormControl(item.name, [Validators.required]),\r\n        id_category: new FormControl(item.id_category, Validators.required),\r\n        brand: new FormControl(item.brand),\r\n        allow_sell: new FormControl(item.delete_hidden ? false : true),\r\n        delete_hidden: new FormControl(item.delete_hidden),\r\n        selling: new FormControl(item.selling),\r\n        type: new FormControl(item.type),\r\n        number_column: new FormControl(item.number_column ? item.number_column : 2),\r\n        number_print: new FormControl(item.number_print ? item.number_print : 10),\r\n        id_design_barcode: new FormControl(item.id_design_barcode ? item.id_design_barcode : ''),\r\n        number_column_lot: new FormControl(item.number_column_lot ? item.number_column_lot : 2),\r\n        number_print_lot: new FormControl(item.number_print_lot ? item.number_print_lot : 10),\r\n        id_design_barcode_lot: new FormControl(item.id_design_barcode_lot ? item.id_design_barcode_lot : ''),\r\n        units: new FormControl(item.units),\r\n        manysize: new FormControl(item.manysize),\r\n        manylot: new FormControl(item.manylot),\r\n        subs: new FormControl(item.subs),\r\n        position: new FormControl(item.position),\r\n        item_code: new FormControl(item.item_code),\r\n        tax: new FormControl(item.tax ? item.tax : 0),\r\n      });\r\n      if (!item.manysize) {\r\n        if (item.units) {\r\n          let unitMain = this.vhQuerySales.getUnit_byRatio(item.units, 1)\r\n          this.ProductForm.addControl('price_import', new FormControl(unitMain ? unitMain.price_import : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price', new FormControl(unitMain ? unitMain.price : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price2', new FormControl(unitMain ? unitMain.price2 : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('warning_number', new FormControl(item.warning_number, Validators.required))\r\n          this.ProductForm.addControl('barcode', new FormControl(unitMain ? unitMain.barcode : ''))\r\n          this.ProductForm.addControl('unit', new FormControl(unitMain ? unitMain.unit : '', Validators.required))\r\n        } else {\r\n          this.ProductForm.addControl('price_import', new FormControl(item.price_import ? item.price_import : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price', new FormControl(item.price ? item.price : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('price2', new FormControl(item.price2 ? item.price2 : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])))\r\n          this.ProductForm.addControl('warning_number', new FormControl(item.warning_number, Validators.required))\r\n          this.ProductForm.addControl('barcode', new FormControl(item.barcode ? item.barcode : ''))\r\n          this.ProductForm.addControl('unit', new FormControl(item.unit ? item.unit : '', Validators.required))\r\n        }\r\n      }\r\n      if (item.manylot) {\r\n        this.ProductForm.addControl('lots', new FormControl(item ? item.lots : []))\r\n        this.ProductForm.addControl('days_import_warning', new FormControl(item ? item.days_import_warning : '', Validators.required))\r\n        this.ProductForm.addControl('days_exp_warning', new FormControl(item ? item.days_exp_warning : '', Validators.required))\r\n        this.lot_list = item.lots\r\n      }\r\n      this.lot_list = item.lots ? item.lots : []\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list'], {\r\n      state: { stateObj: this.stateObj }\r\n    });\r\n  }\r\n\r\n  /**Hàm xóa sản phẩm khỏi DB*/\r\n  deleteProduct() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.deleteProduct(this.data.formProduct._id)\r\n        .then((rsp: any) => {\r\n\r\n\r\n          if (rsp.vcode === 0) {\r\n            if (this.ProductForm.value[\"img\"]) {\r\n              this.vhImage.deleteThumbnail([this.ProductForm.value[\"img\"]]).then(() => {\r\n                //-----------your code here-----------\r\n              }, (error: any) => {\r\n\r\n              })\r\n              this.vhComponent.showToast(2000, (this.languageService.translate(\"Product has been deleted successfully\")), \"success-toast\");\r\n              this.vhComponent.hideLoading(0);\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            } else {\r\n              this.vhComponent.hideLoading(0);\r\n              this.vhComponent.alertMessageDesktop(\"success\", (this.languageService.translate(\"Product has been deleted successfully\")));\r\n              setTimeout(() => {\r\n                this.isVisible = false;\r\n                this.goBack();\r\n              }, 300);\r\n            }\r\n          } else if (rsp.vcode === 1) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n            // this.goBack();\r\n          } else if (rsp.vcode === 2) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n            // this.goBack();\r\n            // this.functionService.confirmUpdateHidden('product').then(() => {\r\n            //   this.vhQuerySales.updateProduct(this.data.formProduct._id, { delete_hidden: true }).then(() => {\r\n            //     this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n            //     setTimeout(() => {\r\n            //       this.goBack();\r\n            //     }, 300);\r\n            //   })\r\n            //  }).catch(() => {\r\n            //   // console.log('User canceled the action.');\r\n            //  });\r\n          } else if (rsp.vcode === 3) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Please delete the product's attributes first\")));\r\n            // this.goBack();\r\n          }\r\n        });\r\n    })\r\n\r\n  }\r\n\r\n  /** Sự kiện click chọn ảnh*/\r\n  getFile() {\r\n    document.getElementById(\"file-upload\").click();\r\n  }\r\n\r\n  /** Lấy hình ảnh từ Desktop */\r\n  onUpload(e?) {\r\n    const file = e.target.files[0];\r\n    this.vhImage.getThumbnailFromDesktop(file, 256, 256, \"products\", this.ProductForm.value[\"img\"] || '').then(\r\n      photoURL => {\r\n        this.ProductForm.controls[\"img\"].setValue(photoURL);\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was loaded successfully\")), 'success-toast');\r\n        this.updateProductByField({ img: photoURL });\r\n      },\r\n      () => {\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Image was failed\")), 'alert-toast');\r\n      }\r\n    );\r\n  }\r\n\r\n  /**Kiểm tra barcode tồn tại hay chưa */\r\n  checkBarcode(barcode: string) {\r\n    if (barcode) {\r\n      let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)\r\n      if (detailproduct == null) {\r\n        if (this.dataUnits.find(e => e.barcode == barcode) || this.lot_list.find(lot => lot.barcode == barcode)) this.barcode = false\r\n        else {\r\n          this.barcode = true\r\n          this.updateProductForm('barcode', { barcode: this.ProductForm.value.barcode })\r\n        }\r\n      } else {\r\n        if (detailproduct._id != this.data.formProduct._id)\r\n          this.barcode = false\r\n        else {\r\n          if (this.dataUnits.find(e => e.barcode == barcode) || this.lot_list.find(lot => lot.barcode == barcode)) this.barcode = false\r\n          else {\r\n            this.barcode = true\r\n            this.updateProductForm('barcode', { barcode: this.ProductForm.value.barcode })\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.barcode = true\r\n      this.updateProductForm('barcode', { barcode: this.ProductForm.value.barcode })\r\n    }\r\n  }\r\n  /**Kiểm tra barcode của sub tồn tại hay chưa */\r\n  checkBarcodeSubProduct(barcode: string, sub_name) {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)\r\n    if (detailproduct == null) {\r\n      if (this.subProducts.filter(item => item.name != sub_name).filter(item => barcode && item.barcode == barcode).length)\r\n        this.barcode = false;\r\n      else {\r\n        this.barcode = true;\r\n        if (this.formSubProduct.value._id) this.updateUnitsSubProduct()\r\n      }\r\n    } else {\r\n      this.barcode = false\r\n    }\r\n  }\r\n\r\n  /** ------ Modal Zorro---- */\r\n  isVisible = false;\r\n\r\n  /**\r\n    * mở modal xác nhận xóa sp\r\n    * @example this.showModal\r\n    */\r\n  showModal(): void {\r\n    this.isVisible = true;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok modal xác nhận xóa sp\r\n   * @example this.handleOk\r\n   */\r\n  handleOk(): void {\r\n    this.isVisible = false;\r\n    this.deleteProduct();\r\n  }\r\n  /**\r\n   * đóng modal xác nhận xóa sp\r\n   * @example this.handleCancel\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  /** Hàm cập nhật sản phẩm dành riêng cho phần units\r\n   *\r\n   * @param field         // trường cập nhật\r\n   * @param object        // vd: { name: 'San Pham 123'}\r\n   */\r\n  updateProductForm(field: string, object) {\r\n\r\n\r\n    if (this.ProductForm.valid) {\r\n      if (!this.ProductForm.value.manysize) {\r\n        if (field == 'warning_number') object.warning_number = parseFloat(object.warning_number);\r\n        if (field == 'price') object.price = parseFloat(this.price.getRawValue());\r\n        if (field == 'price_import') object.price_import = parseFloat(this.price_import.getRawValue());\r\n        if (field == 'price2') object.price2 = this.management_product_price2 ? parseFloat(this.price2.getRawValue()) : 0;\r\n        let data: any = {}\r\n        data['units'] = [\r\n          ...this.ProductForm.value.units\r\n        ]\r\n        data['units'][0].price_import = parseFloat(this.price_import.getRawValue());\r\n        data['units'][0].price = parseFloat(this.price.getRawValue());\r\n        data['units'][0].price2 = this.management_product_price2 ? parseFloat(this.price2.getRawValue()) : 0;\r\n        data['units'][0].barcode = this.ProductForm.value.barcode.toString();\r\n        data['units'][0].unit = this.ProductForm.value.unit;\r\n\r\n        delete object.unit;\r\n        delete object.price;\r\n        delete object.price2;\r\n        delete object.price_import;\r\n        delete object.barcode;\r\n        object = { ...object, ...data }\r\n      }\r\n\r\n      this.dataUnits = object['units']\r\n      if (this.barcode)\r\n        this.updateProductByField(object)\r\n\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng nhập đầy đủ thông tin\"))\r\n  }\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(value) {\r\n    if (value.hasOwnProperty('allow_sell')) {\r\n      value = { delete_hidden: !value.allow_sell }\r\n    }\r\n\r\n    console.log('value', value);\r\n    console.log('this.data.formProduct._id', this.data.formProduct._id);\r\n    if (this.ProductForm.valid)\r\n      this.vhQuerySales.updateProduct(this.data.formProduct._id, value).then((res) => {\r\n        console.log(res);\r\n      }, error => {\r\n        console.log(error);\r\n      }).catch(e => {\r\n        console.log(e);\r\n      })\r\n    else this.vhComponent.alertMessageDesktop(\"warning\", this.languageService.translate(\"Vui lòng nhập đầy đủ thông tin\"))\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * cập nhật sp sub theo trường truyền vào\r\n   * @example this.updateProductByField('ghsgwt617gss', {name: ''})\r\n   */\r\n  updateSubProductByField(_id, value) {\r\n    if (value.hasOwnProperty('allow_sell')) {\r\n      value = { delete_hidden: !value.allow_sell }\r\n    }\r\n    this.vhQuerySales.updateSubProduct(_id, value).then((bool: any) => {\r\n      console.log('updateSubProduct', bool);\r\n    }, error => {\r\n      console.log('error', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * tạo barcode tự động của sp bth\r\n   * @example this.changeBarcode()\r\n   */\r\n  changeBarcode() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode)\r\n    if (this.barcode) {\r\n      this.ProductForm.controls['barcode'].setValue(newbarcode)\r\n      this.updateProductForm('barcode', { barcode: newbarcode })\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở modal cấu hình tem in cho sản phẩm\r\n   * @example printBarcode()\r\n   */\r\n  printBarcode() {\r\n    this.showModalPrintBarcode = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok modal cấu hình tem in cho sản phẩm\r\n   * @example updateConfigLabel()\r\n   */\r\n  updateConfigLabel() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      let dataUpdate = {\r\n        id_design_barcode: this.ProductForm.value.id_design_barcode,\r\n        number_column: this.ProductForm.value.number_column,\r\n        number_print: this.ProductForm.value.number_print,\r\n      }\r\n      if (this.product_has_lots) {\r\n        dataUpdate['id_design_barcode_lot'] = this.ProductForm.value.id_design_barcode_lot\r\n        dataUpdate['number_column_lot'] = this.ProductForm.value.number_column_lot\r\n        dataUpdate['number_print_lot'] = this.ProductForm.value.number_print_lot\r\n      }\r\n      this.vhQuerySales.updateProduct(this.data.formProduct._id, dataUpdate)\r\n        .then((bool) => {\r\n          this.showModalPrintBarcode = false;\r\n          this.vhComponent.hideLoading(0)\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0)\r\n\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"An error while updating product\"))\r\n        })\r\n    })\r\n\r\n\r\n  }\r\n\r\n  id_subproduct = ''\r\n  /**\r\n   * mở modal chọn sp con để in sp con\r\n   * @example this.handleOkPrintSub()\r\n   */\r\n  handleOkPrintSub() {\r\n    let sub = this.subProducts.find(e => e._id == this.id_subproduct)\r\n    this.gotoPrintLabel(sub)\r\n  }\r\n  /**\r\n   * bắt sk thay đổi đơn vị của sp con để in tem\r\n   *  this.changeUnit(subproduct_selected)\r\n   */\r\n  changeUnit(item) {\r\n    item.price = item.units.find(e => e.ratio == item.ratio).price\r\n    item.barcode = item.units.find(e => e.ratio == item.ratio).barcode\r\n  }\r\n  /**\r\n   * qua trang in tem sp\r\n   * @example this.gotoPrintLabel(product_or_subproduct_selected)\r\n   */\r\n  gotoPrintLabel(item?) {\r\n    let state = {}\r\n    if (this.ProductForm.value.manysize) {\r\n      state = {\r\n        listBarcodeLot: this.listBarcodeLot,\r\n        listBarcode: this.listBarcode,\r\n        col: this.ProductForm.value.number_column,\r\n        number: this.ProductForm.value.number_print,\r\n        barcode: this.listBarcode[this.listBarcode.findIndex(item => item._id == this.ProductForm.value.id_design_barcode)],\r\n        formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id, sub_name: item.name, ...this.vhQuerySales.getUnit_byRatio(item.units, item.ratio) },\r\n        stateObj: this.stateObj\r\n      }\r\n    }\r\n    else\r\n      state = {\r\n        listBarcodeLot: this.listBarcodeLot,\r\n        listBarcode: this.listBarcode,\r\n        col: this.ProductForm.value.number_column,\r\n        number: this.ProductForm.value.number_print,\r\n        barcode: this.listBarcode[this.listBarcode.findIndex(item => item._id == this.ProductForm.value.id_design_barcode)],\r\n        formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id },\r\n        stateObj: this.stateObj\r\n      }\r\n    if (!state['barcode']) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy mẫu tem này! Vui lòng kiểm tra lại\"))\r\n    }\r\n    else\r\n      switch (state['col']) {\r\n        case 1: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-one-col'], { state: state })\r\n          break;\r\n        }\r\n        case 2: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-two-col'], { state: state })\r\n          break;\r\n        }\r\n        case 3: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-three-col'], { state: state })\r\n          break;\r\n        }\r\n        case 4: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-four-col'], { state: state })\r\n          break;\r\n        }\r\n        case 5: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-five-col'], { state: state })\r\n          break;\r\n        }\r\n        default: {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không hỗ trợ kiểu tem này\"))\r\n        }\r\n      }\r\n  }\r\n\r\n  /**\r\n   * mở modal chọn lô sp để in tem lô\r\n   * @example this.showChooseLotToPrint()\r\n   */\r\n  showChooseLotToPrint() {\r\n    this.show_modal_select_lots = true;\r\n\r\n    if (!this.ProductForm.value.manysize) this.lots = this.lot_list;\r\n    else {\r\n      // this.lots = this.subProducts.filter(e => e.lots.length).map(item => { return { ...item.lots.map(lot => { return { ...lot } }) } })\r\n      let lot_array = [];\r\n      let lot_subs = this.subProducts.filter(e => e.lots.length)\r\n      for (let i in lot_subs) {\r\n        lot_array = lot_array.concat(lot_subs[i].lots)\r\n      }\r\n      this.lots = lot_array\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * qua trang in tem lô sp\r\n   */\r\n  gotoPrintLabelLot() {\r\n    let data_lot = this.lots.find(e => e._id == this.id_lotproduct);\r\n\r\n\r\n    let state = {\r\n      listBarcode: this.listBarcode,\r\n      listBarcodeLot: this.listBarcodeLot,\r\n      col: this.ProductForm.value.number_column_lot,\r\n      number: this.ProductForm.value.number_print_lot,\r\n      barcode: this.listBarcodeLot[this.listBarcodeLot.findIndex(item => item._id == this.ProductForm.value.id_design_barcode_lot)],\r\n      formProduct: { ...this.ProductForm.value, _id: this.data.formProduct._id, ...data_lot },\r\n      stateObj: this.stateObj\r\n    }\r\n    if (!state.barcode) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không tìm thấy mẫu tem này! Vui lòng kiểm tra lại\"))\r\n    }\r\n    else\r\n      switch (state.col) {\r\n        case 1: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-one-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 2: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-two-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 3: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-three-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 4: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-four-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        case 5: {\r\n          this.router.navigate(['/sales/dashboard/manage/products/products-list/print-five-col-lot'], { state: state })\r\n          break;\r\n        }\r\n        default: {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không hỗ trợ kiểu tem này\"))\r\n        }\r\n      }\r\n  }\r\n\r\n  /**\r\n   * lọc lô theo mã lô\r\n   * @example this.searchLot('')\r\n   */\r\n  searchLot(searchValue) {\r\n    this.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue), this.lot_list, ['lot_number'])\r\n  }\r\n\r\n  // Thêm units\r\n  showDrawerUnits = false\r\n  /**\r\n   * bắt sk lưu hoặc đóng drawer danh sách đơn vị của modal thêm subproduct\r\n   * @example this.closeUnits()\r\n   */\r\n  closeUnits(event) {\r\n    if (typeof event === 'object') {\r\n      this.formSubProduct.controls['units'].setValue(event);\r\n    }\r\n    this.showDrawerUnits = false;\r\n  }\r\n  /**\r\n   * bắt sk lưu hoặc đóng drawer danh sách đơn vị để update\r\n   * @example this.closeUnitsUpdate(null)\r\n   */\r\n  closeUnitsUpdate(event) {\r\n    if (event != null) {\r\n      if (!this.ProductForm.value.manysize) {\r\n        if (this.check2ArrUnits(this.ProductForm.value[\"units\"], event) == true)\r\n          this.ProductForm.value[\"units\"] = event\r\n        this.dataUnits = event\r\n        this.updateProductByField({ units: event })\r\n      }\r\n      else {\r\n        this.formSubProduct.controls['units'].setValue(event);\r\n        this.updateUnitsSubProduct()\r\n      }\r\n    }\r\n    this.showDrawerUnitsUpdate = false;\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị để update\r\n   * @example this.changeUnitsUpdate()\r\n   */\r\n  changeUnitsUpdate() {\r\n    this.showDrawerUnitsUpdate = true\r\n    this.dataUnitMain = { ...this.vhQuerySales.getUnit_byRatio(this.dataUnits, 1) }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị để thêm của modal thêm subproduct\r\n   * @example this.changeUnitsSubs()\r\n   */\r\n  changeUnitsSubs() {\r\n    this.showDrawerUnits = true;\r\n    this.barcodes = [this.formSubProduct.value.barcode, ...this.formSubProduct.value.lots.map(item => { return item.barcode })]\r\n    this.dataUnits = this.formSubProduct.value.units.filter(e => e.ratio != 1)\r\n    this.dataUnitMain = {\r\n      unit: this.formSubProduct.value.unit,\r\n      ratio: 1,\r\n      barcode: this.formSubProduct.value.barcode,\r\n      price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n      price2: this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n      price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * mở drawer danh sách đơn vị để update của subproduct\r\n   * @example this.changeUnitsSubsUpdate()\r\n   */\r\n  changeUnitsSubsUpdate() {\r\n    this.showDrawerUnitsUpdate = true;\r\n    this.dataUnits = this.formSubProduct.value.units\r\n    this.dataUnitMain = { ...this.vhQuerySales.getUnit_byRatio(this.dataUnits, 1) }\r\n  }\r\n  // Kiểm tra mảng unit trước khi thay đổi và sao khi thay đổi\r\n  check2ArrUnits(unit1: any[], unit2: any[]): boolean {\r\n    unit1.forEach(element1 => {\r\n      unit2.forEach(element2 => {\r\n        if (element1.unit === element2.unit || this.ProductForm.value['unit'] === element2.unit)\r\n          return false;\r\n      })\r\n    })\r\n    return true\r\n  }\r\n\r\n  // CleaveJS\r\n  tranformPrice(class_name) {\r\n    switch (class_name) {\r\n      case 'size-price-item':\r\n        this.price_size = this.vhAlgorithm.vhnumeral(\".size-price-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-item\") : 0;\r\n        break;\r\n      case 'size-price2-item':\r\n        if(this.management_product_price2) this.price2_size = this.vhAlgorithm.vhnumeral(\".size-price2-item\") ? this.vhAlgorithm.vhnumeral(\".size-price2-item\") : 0;\r\n        break;\r\n      case 'size-price-purchase-item':\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") : 0;\r\n        break;\r\n    }\r\n  }\r\n\r\n  subProducts = [];\r\n  price_size_purchase: any;\r\n  price_size: any;\r\n  price2_size: any;\r\n  isVisibleSubProduct: boolean = false;      // ẩn/ hiển form sub product\r\n  show_add_size = false\r\n  public formSubProduct: FormGroup\r\n\r\n\r\n  // xóa sub product\r\n  deleteSubProductById(data) {\r\n    this.vhQuerySales.deleteSubProduct(data._id).then((rsp: any) => {\r\n      if (rsp.vcode === 0) {\r\n        this.subProducts = this.subProducts.filter(sub => sub._id != data._id);\r\n      } else if (rsp.vcode === 1) {\r\n        this.vhComponent.hideLoading(0);\r\n        this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm đang liên kết với sản phẩm combo khác\")));\r\n        // this.goBack();\r\n      } else if (rsp.vcode === 2) {\r\n        this.vhComponent.hideLoading(0);\r\n        this.vhComponent.alertMessageDesktop(\"error\", (this.languageService.translate(\"Bạn không thể xóa, vì sản phẩm này đã phát sinh hóa đơn\")));\r\n        // this.goBack();\r\n        // this.functionService.confirmUpdateHidden('product').then(() => {\r\n        //   this.vhQuerySales.updateSubProduct(data._id, { delete_hidden: true }).then(() => {\r\n        //     this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n        //     this.subProducts = this.subProducts.filter(sub => sub._id != data._id);\r\n        //   }).catch((err) => {\r\n        //     console.log(err);\r\n        //   })\r\n        //  }).catch(() => {\r\n        //  });\r\n      }\r\n    }, error => {\r\n      this.vhComponent.alertMessageDesktop(\"error\", error);\r\n    })\r\n  }\r\n\r\n  // Khởi tạo form sub product\r\n  initFormEditSubProduct(item?) {\r\n    this.formSubProduct = new FormGroup({\r\n      _id: new FormControl(item ? item['_id'] : ''),\r\n      name: new FormControl(item ? item['name'] : '', [Validators.required]),\r\n      price_import: new FormControl(item ? item['price_import'] : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price: new FormControl(item ? item['price'] : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      price2: new FormControl(item ? item['price2'] : '', Validators.compose([Validators.required, Validators.pattern(\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\")])),\r\n      warning_number: new FormControl(item ? item['warning_number'] : 0, Validators.required),\r\n      barcode: new FormControl(item ? item['barcode'] : ''),\r\n      unit: new FormControl(item ? item['unit'] : ''),\r\n      units: new FormControl(item ? item['units'] : []),\r\n      allow_sell: new FormControl(item && item.delete_hidden ? false : true),\r\n      delete_hidden: new FormControl(item ? item['delete_hidden'] : false),\r\n      selling: new FormControl(item ? item['selling'] : true),\r\n      manylot: new FormControl(item ? item['manylot'] : false),\r\n      days_import_warning: new FormControl(item ? item['days_import_warning'] : ''),\r\n      days_exp_warning: new FormControl(item ? item['days_exp_warning'] : ''),\r\n      lots: new FormControl(item ? item['lots'] : []),\r\n      number_column: new FormControl(item ? item.number_column : 2),\r\n      number_print: new FormControl(item ? item.number_print : 10),\r\n      id_design_barcode: new FormControl(item ? item.id_design_barcode : ''),\r\n      number_column_lot: new FormControl(item ? item.number_column_lot : 2),\r\n      number_print_lot: new FormControl(item ? item.number_print_lot : 10),\r\n      id_design_barcode_lot: new FormControl(item ? item.id_design_barcode_lot : ''),\r\n      item_code: new FormControl(item ? item.item_code : ''),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * mở modal thêm subproduct\r\n   * @example this.openModalAddSize()\r\n   */\r\n  openModalAddSize() {\r\n    this.initFormEditSubProduct();\r\n    this.show_add_size = true\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhất nút ok modal thêm subproduct\r\n   * @example this.addSubProduct({name:'S',....})\r\n   */\r\n  addSubProduct(value) {\r\n    if (this.formSubProduct.valid) {\r\n      let data = {\r\n        ...value,\r\n        warning_number: value.warning_number >= 0 ? parseFloat(value.warning_number) : null,\r\n        price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n        price2: this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n        price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n      }\r\n      let data_add = {\r\n        // allow_sell: value.allow_sell,\r\n        delete_hidden: value.delete_hidden,\r\n        selling: value.selling,\r\n        name: data.name,\r\n        warning_number: data.warning_number,\r\n        item_code: data.item_code,\r\n        units: [\r\n          {\r\n            unit: data.unit,\r\n            ratio: 1,\r\n            price: data.price,\r\n            price2: data.price2,\r\n            price_import: data.price_import,\r\n            barcode: data.barcode,\r\n            default: data.units.find(e => e.default) ? false : true\r\n          },\r\n          ...data.units\r\n        ],\r\n        manylot: data.manylot,\r\n      }\r\n      if (data['manylot']) {\r\n        data_add['lots'] = data.lots;\r\n        data_add['days_import_warning'] = data.days_import_warning;\r\n        data_add['days_exp_warning'] = data.days_exp_warning;\r\n      }\r\n\r\n\r\n      if (!this.barcode) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Barcode already exists\"))\r\n      }\r\n      else\r\n        this.vhQuerySales.addSubProduct(this.data.formProduct._id, data_add).then((subproducts: any) => {\r\n\r\n          let id_subproduct = this.vhQuerySales.getlocalProduct(this.data.formProduct._id).subs.find(e => e.name == data_add.name)._id\r\n          this.subProducts.push({ ...data, _id: id_subproduct, units: data_add.units });\r\n          this.show_add_size = false;\r\n        }, error => {\r\n          this.vhComponent.alertMessageDesktop(\"error\", error);\r\n        })\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * mở modal chỉnh sửa subproduct\r\n   * @param data\r\n   */\r\n  openFormSubProduct(data?) {\r\n    if (data) {\r\n      this.initFormEditSubProduct(data);\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.price_size = this.vhAlgorithm.vhnumeral(\".size-price-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-item\") : 0;\r\n        this.price2_size = this.management_product_price2 && this.vhAlgorithm.vhnumeral(\".size-price2-item\") ? this.vhAlgorithm.vhnumeral(\".size-price2-item\") : 0;\r\n        this.price_size_purchase = this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") : 0;\r\n      })\r\n    }\r\n    this.isVisibleSubProduct = true;\r\n  }\r\n\r\n  // duplicateSubProduct(data) {\r\n  //   let value = { ...data }\r\n  //   delete value.name\r\n  //   this.checkBarcodeSubProduct(value.barcode, '');\r\n  //   this.initFormEditSubProduct(value);\r\n  //   this.vhAlgorithm.waitingStack().then(() => {\r\n  //     this.price_size = this.vhAlgorithm.vhnumeral(\".size-price-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-item\") : 0;\r\n  //     this.price2_size = this.vhAlgorithm.vhnumeral(\".size-price2-item\") ? this.vhAlgorithm.vhnumeral(\".size-price2-item\") : 0;\r\n  //     this.price_size_purchase = this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") ? this.vhAlgorithm.vhnumeral(\".size-price-purchase-item\") : 0;\r\n  //   })\r\n  //   this.show_add_size = true;\r\n  // }\r\n\r\n  /**\r\n   * dóng modal chỉnh sửa subproduct và ko lưu\r\n   * @param data\r\n   */\r\n  handleCancelSubProduct() {\r\n    this.isVisibleSubProduct = false;\r\n    this.show_add_size = false;\r\n  }\r\n\r\n  // xử lý cập nhật sub product\r\n  handleSubProduct(value) {\r\n    if (this.formSubProduct.valid) {\r\n      if(value.hasOwnProperty('allow_sell')) {\r\n        value = { delete_hidden: !value.allow_sell }\r\n      }\r\n      let data = {\r\n        ...value,\r\n        warning_number: value.warning_number >= 0 ? parseFloat(value.warning_number) : null,\r\n        price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n        price2: this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n        price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n      }\r\n      let dataUpdate = {};\r\n      let subUpdate: any = this.subProducts.filter(f => f._id == data._id)[0];\r\n      if (data.name != subUpdate.name) dataUpdate['name'] = data.name;\r\n      if (data.warning_number != subUpdate.warning_number) dataUpdate['warning_number'] = data.warning_number;\r\n      data.units[0]['price_import'] = data.price_import;\r\n      data.units[0]['price'] = data.price;\r\n      data.units[0]['price2'] = data.price2;\r\n      data.units[0]['barcode'] = data.barcode;\r\n      dataUpdate['units'] = [\r\n        ...data.units\r\n      ]\r\n      if (data.manylot != subUpdate.manylot) dataUpdate['manylot'] = data.manylot;\r\n      if (data['manylot']) {\r\n        dataUpdate['lots'] = data.lots;\r\n        dataUpdate['days_import_warning'] = data.days_import_warning;\r\n        dataUpdate['days_exp_warning'] = data.days_exp_warning;\r\n      }\r\n      this.vhQuerySales.updateSubProduct(subUpdate._id, dataUpdate).then((bool) => {\r\n        if (bool) {\r\n          const index = this.subProducts.findIndex(f => f._id == data._id)\r\n          this.subProducts = this.subProducts.filter(f => f._id != data._id)\r\n          this.subProducts.splice(index, 0, data);\r\n        }\r\n        else {\r\n          this.vhComponent.alertMessageDesktop(\"error\", 'Cập nhật thất bại, vui lòng thử lại !');\r\n        }\r\n      }, error => {\r\n        this.vhComponent.alertMessageDesktop(\"error\", error);\r\n      })\r\n      this.handleCancelSubProduct();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * xử lý update phần units cho subproduct\r\n   */\r\n  updateUnitsSubProduct() {\r\n    let data = {\r\n      ...this.formSubProduct.value,\r\n      price: this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0,\r\n      price2: this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0,\r\n      price_import: this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0\r\n    }\r\n    let dataUpdate = {};\r\n    data.units[0]['unit'] = data.unit;\r\n    data.units[0]['price_import'] = data.price_import;\r\n    data.units[0]['price'] = data.price;\r\n    data.units[0]['price2'] = data.price2;\r\n    data.units[0]['barcode'] = data.barcode;\r\n    dataUpdate['units'] = [\r\n      ...data.units\r\n    ]\r\n    if (this.barcode)\r\n      this.udpateSubProductByField(data._id, dataUpdate, 'units')\r\n  }\r\n\r\n  /**\r\n   * cập nhật subproduct theo trường truyền vào\r\n   * @param id_subproduct\r\n   * @param value\r\n   * @param field\r\n   */\r\n  udpateSubProductByField(id_subproduct, value, field) {\r\n    if (value.hasOwnProperty('allow_sell')) {\r\n      value = { delete_hidden: !value.allow_sell }\r\n      this.subProducts.find(e => e._id == id_subproduct).delete_hidden = value.delete_hidden\r\n    }\r\n    this.vhQuerySales.updateSubProduct(id_subproduct, value).then((bool) => {\r\n\r\n      if (bool) {\r\n        const index = this.subProducts.findIndex(f => f._id == id_subproduct)\r\n        this.subProducts[index][field] = value[field];\r\n        this.subProducts[index].price = this.price_size.getRawValue() ? parseFloat(this.price_size.getRawValue()) : 0;\r\n        this.subProducts[index].price2 = this.management_product_price2 && this.price2_size.getRawValue() ? parseFloat(this.price2_size.getRawValue()) : 0;\r\n        this.subProducts[index].price_import = this.price_size_purchase.getRawValue() ? parseFloat(this.price_size_purchase.getRawValue()) : 0;\r\n        this.subProducts[index].unit = this.formSubProduct.value.unit;\r\n        this.subProducts[index].barcode = this.formSubProduct.value.barcode;\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"error\", 'Cập nhật thất bại, vui lòng thử lại !');\r\n      }\r\n    }, error => {\r\n      this.vhComponent.alertMessageDesktop(\"error\", error);\r\n    })\r\n  }\r\n\r\n  // cập nhật barcode cho sub product đang chọn\r\n  changeBarcodeSubProduct() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcode(newbarcode)\r\n    if (this.barcode) {\r\n      this.formSubProduct.controls['barcode'].setValue(newbarcode)\r\n      if (this.formSubProduct.value._id) this.updateUnitsSubProduct()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi thuộc tính lô của modal add subproduct\r\n   * @param event\r\n   * @example this.changeManyLotSubProduct(true)\r\n   */\r\n  changeManyLotSubProduct(event) {\r\n    if (event) { // từ false thành true\r\n      this.formSubProduct.addControl('days_import_warning', new FormControl(0, Validators.required))\r\n      this.formSubProduct.addControl('days_exp_warning', new FormControl(0, Validators.required))\r\n      this.formSubProduct.addControl('lots', new FormControl([]))\r\n    }\r\n    else {\r\n      this.formSubProduct.removeControl('days_import_warning');\r\n      this.formSubProduct.removeControl('days_exp_warning');\r\n      this.formSubProduct.removeControl('lots');\r\n    }\r\n  }\r\n\r\n  show_lot_list = false;\r\n  lot_list: any = [];\r\n  barcodes = [];\r\n  /**\r\n   * mở drawer danh sách lô của modal add subproduct\r\n   * @param lots\r\n   */\r\n  openListLot(lots?) {\r\n    this.barcodes = [this.formSubProduct.value.barcode, ...this.formSubProduct.value.units.map(item => { return item.barcode })]\r\n    this.show_lot_list = true;\r\n    if (lots) this.lot_list = lots\r\n  }\r\n\r\n  /**\r\n   * bắt sk đóng drawer danh sách lô của modal add subproduct\r\n   * @param lot_list dữ liệu output trả về nếu có\r\n   */\r\n  handleLotList(lot_list) {\r\n\r\n    this.show_lot_list = false;\r\n    if (lot_list) {\r\n      if (this.ProductForm.value.manysize) {\r\n        this.formSubProduct.controls['lots'].setValue(lot_list)\r\n\r\n      }\r\n      else {\r\n        this.lot_list = lot_list;\r\n        this.updateProductByField({ lots: lot_list })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * mở drawer danh sách lô để cập nhật\r\n   * @param id_sub_or_product\r\n   */\r\n  openListLotUpdate(id_sub_or_product) {\r\n    this.id_sub_or_product = id_sub_or_product;\r\n    this.show_lot_list_update = true;\r\n    // if (lots) this.lot_list = lots\r\n  }\r\n\r\n  /**\r\n   * đóng drawer danh sách lô để cập nhật\r\n   */\r\n  handleLotListUpdate() {\r\n    this.show_lot_list_update = false;\r\n  }\r\n\r\n\r\n  /** Hàm thực thêm barcode tự động random cho subproduct\r\n   *\r\n   */\r\n  changeBarcodeSubProductForAddSubProduct() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    this.checkBarcodeSubProductForAddSubProduct(newbarcode)\r\n    if (this.barcode) {\r\n      this.formSubProduct.controls['barcode'].setValue(newbarcode)\r\n    }\r\n  }\r\n\r\n  /** Hàm thực hiển kiểm tra barcode vừa mới random đã hợp lệ chưa\r\n   *\r\n   * @param barcode\r\n   */\r\n  checkBarcodeSubProductForAddSubProduct(barcode) {\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)\r\n    if (detailproduct == null) {\r\n      this.barcode = true;\r\n    } else {\r\n      if (detailproduct._id != this.data.formProduct._id)\r\n        this.barcode = false\r\n    }\r\n  }\r\n\r\n  onTaxBlur() {\r\n    let taxValue = this.ProductForm.get('tax')?.value;\r\n    if (taxValue == null || isNaN(taxValue)) {\r\n      taxValue = 0;\r\n      this.ProductForm.get('tax')?.setValue(0, { emitEvent: false });\r\n    }\r\n\r\n    this.updateProductByField({ tax: taxValue });\r\n  }\r\n  \r\n  \r\n  \r\n  /** Nếu là true thì là đang thêm danh mục, dùng để hiển thị trạng thái loading, tránh bị nhấn nhiều lần */\r\n  isAddingCategory: boolean = false;\r\n  /** Input nhập tên danh mục */\r\n  @ViewChild('categoryName') categoryName;\r\n\r\n  /**\r\n   * Thêm danh mục\r\n   */\r\n  addCategory(categoryName: any) {\r\n    const value = categoryName.value ? categoryName.value?.toString()?.trim() : '';\r\n    if (value) {\r\n      // Kiểm tra xem danh mục đã tồn tại hay chưa\r\n      let index = this.vhQuerySales.getlocalCategorys()\r\n                    .filter(res => res.type == VhType.PRODUCT)\r\n                    .findIndex(item => this.vhAlgorithm.changeAlias(item.name).toLowerCase() == this.vhAlgorithm.changeAlias(value).toLowerCase());\r\n\r\n      // Đã tồn tại\r\n      if (index !== -1) {\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"Category existed\"), 'alert-toast');\r\n        return;\r\n      }\r\n\r\n      // Chưa tồn tại thì thêm\r\n      this.isAddingCategory = true;\r\n      this.vhQuerySales.addCategory({ name: value, type: VhType.PRODUCT }).then((res: any) => {\r\n        console.log(res);\r\n        this.categoryName.nativeElement.value = ''; // Reset input\r\n        this.list_category.unshift(res); // Thêm vào đầu danh sách\r\n        this.ProductForm.controls['id_category'].setValue(res._id); // Chọn cái mới thêm\r\n        this.vhComponent.showToast(2000, (this.languageService.translate(\"Category has been added successfully\")), 'success-toast');\r\n      }, err => {\r\n        console.log(err);\r\n        this.vhComponent.showToast(1500, this.languageService.translate(\"An eror occured while adding category. Please try again\"), 'alert-toast');\r\n      }).finally(() => {\r\n        this.isAddingCategory = false;\r\n      });\r\n    }\r\n    else {\r\n      this.vhComponent.showToast(1500, this.languageService.translate('Category name is required'), 'alert-toast');\r\n    }\r\n  }\r\n  \r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n  <nz-content>\r\n    <div class=\"main\" id=\"main\">\r\n      <div nz-row>\r\n        <div nz-col nzSpan=\"12\" class=\"title left-all-content\">\r\n          <b>{{'Product information'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"add-button\">\r\n          <button style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"printBarcode()\">\r\n            <i nz-icon nzType=\"setting\" nzTheme=\"outline\"></i>\r\n            {{'Label printing configuration'|translate}} </button>\r\n          <button *ngIf=\"ProductForm.value.manysize \" [disabled]=\"!ProductForm.value.id_design_barcode\"\r\n            style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"show_modal_select_subs = true\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print product label' | translate}} </button>\r\n\r\n          <button *ngIf=\"!ProductForm.value.manysize \" [disabled]=\"!ProductForm.value.id_design_barcode\"\r\n            style=\"margin-right: 16px;\" class=\"center-all-content\" nz-button nzType=\"default\"\r\n            (click)=\"gotoPrintLabel()\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print product label' | translate}} </button>\r\n          <button [disabled]=\"!ProductForm.value.id_design_barcode_lot\" style=\"margin-right: 16px;\"\r\n            class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"showChooseLotToPrint()\">\r\n            <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n            {{'Print batch label' | translate}} </button>\r\n          <button class=\"btn-add center-all-content\" nz-button nzType=\"default\" (click)=\"showModal()\">\r\n            <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n            {{'Delete' | translate}}</button>\r\n        </div>\r\n      </div>\r\n      <form nz-form [formGroup]=\"ProductForm\">\r\n        <div class=\"grid-product\" style=\"align-items: flex-start\">\r\n          <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <div class=\"bg-img center-all-content\" (click)=\"getFile()\" style=\"cursor: pointer;\">\r\n              <input style=\"display: none;\" id=\"file-upload\" type=\"file\" accept=\".png, .jpg\"\r\n                (change)=\"onUpload($event)\" />\r\n              <img [ngStyle]=\"{width: ProductForm.value.img ? '100%' : '60px'}\"\r\n                onerror=\"this.src='./assets/icon/management/image_default.svg'\" [src]=\"ProductForm.value.img\" />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div class=\"small-size\" nz-row>\r\n              <div nz-col [nzSpan]=\"ProductForm.value.manysize ? 24 : 16\">\r\n                <div><b>{{'Product name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                    <nz-input-group>\r\n                      <input style=\"width:95%\" formControlName=\"name\" nz-input\r\n                        (blur)=\"updateProductByField( {name: ProductForm.value.name})\"\r\n                        placeholder=\"{{'Enter product name' | translate}}\" required />\r\n                      <ng-template #combineTplName let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Product name is required' | translate}}\r\n                        </ng-container>\r\n                      </ng-template>\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <div *ngIf=\"!ProductForm.value.manysize\" nz-col nzSpan=\"8\">\r\n                <div><b>{{'Item code' | translate}}</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control>\r\n                    <nz-input-group>\r\n                      <input style=\"width: 85%\" formControlName=\"item_code\" nz-input\r\n                        (blur)=\"updateProductByField({item_code: ProductForm.value.item_code})\"\r\n                        [placeholder]=\"'Enter item code' | translate\" />\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n            <div class=\"small-size\" nz-row>\r\n              <!-- Danh mục -->\r\n              <div nz-col nzSpan=\"8\">\r\n                <div><b class='label'>{{'Category' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control [nzErrorTip]=\"'Please select category' | translate\">\r\n                    <!-- Thanh chọn -->\r\n                    <nz-select formControlName=\"id_category\" \r\n                      (ngModelChange)=\"updateProductByField({id_category: $event})\"\r\n                      [nzDropdownRender]=\"addCategoryTemplate\"\r\n                      nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Please select category' | translate\">\r\n                      <nz-option *ngFor=\"let option of list_category\" [nzValue]=\"option._id\" [nzLabel]=\"option.name\"></nz-option>\r\n                    </nz-select>\r\n                    <!-- Thêm danh mục -->\r\n                    <ng-template #addCategoryTemplate>\r\n                      <nz-divider></nz-divider>\r\n                      <div style=\"display: flex; align-items: center; justify-content: space-between; gap: 6px; padding: 0px 6px 11px 6px\">\r\n                        <!-- Input nhập tên -->\r\n                        <input #categoryName [placeholder]=\"'Enter category name' | translate\" nz-input type=\"text\" />\r\n                        <!-- Nút thêm -->\r\n                        <button (click)=\"addCategory(categoryName)\" nz-button\r\n                          [nzLoading]=\"isAddingCategory\"\r\n                          [disabled]=\"!categoryName.value || categoryName.value.trim() === '' || isAddingCategory\">\r\n                          {{'Add' | translate}}\r\n                        </button>\r\n                      </div>\r\n                    </ng-template>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n\r\n              <!-- Thương hiệu -->\r\n              <div nz-col [nzSpan]=\"management_product_tax ? 6 : 8\">\r\n                <div><b class='label'>{{'Brand' | translate}}</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control>\r\n                    <nz-input-group>\r\n                      <input formControlName=\"brand\" nz-input placeholder=\"{{'Enter brand' |translate}}\"\r\n                        (blur)=\"updateProductByField(  { brand: ProductForm.value.brand })\" />\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n              <div nz-col [nzSpan]=\"management_product_tax ? 6 : 8\" >\r\n                  <div><b class='label'>{{'Storage location' | translate}}</b></div>\r\n                  <nz-form-item>\r\n                      <nz-form-control>\r\n                          <nz-input-group>\r\n                              <input  style=\"width:85%\" formControlName=\"position\" type=\"text\" nz-input   (blur)=\"updateProductByField( { position: ProductForm.value.position })\"\r\n                                  placeholder=\"{{'Example: Area A, shelf number 4, level 2' |translate}}\" />\r\n                          </nz-input-group>\r\n                      </nz-form-control>\r\n                  </nz-form-item>\r\n              </div>\r\n              <!-- Thuế -->\r\n              <div *ngIf=\"management_product_tax\" nz-col nzSpan=\"3\">\r\n                <div><b class='label'>{{'Tax' | translate}} (%)</b></div>\r\n                <nz-form-item>\r\n                  <nz-form-control>\r\n                    <nz-input-group>\r\n                      <input type=\"number\" [min]=\"0\" formControlName=\"tax\" nz-input (blur)=\"onTaxBlur()\"\r\n                        placeholder=\"{{'Enter tax value' |translate}}\" />\r\n                    </nz-input-group>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </div>\r\n            </div>\r\n            <!-- Ẩn hoạt động -->\r\n            <div *ngIf=\"isFromHidden && !ProductForm.value.manysize\" class=\"small-size\" nz-row>\r\n              <div nz-col nzSpan=\"24\" style=\"display: flex; align-items: center; gap: 4px;\">\r\n                <nz-switch formControlName=\"delete_hidden\"\r\n                  (ngModelChange)=\"updateProductByField({delete_hidden: ProductForm.value.delete_hidden})\">\r\n                </nz-switch>\r\n                <span class=\"label\">{{'Hide activity' | translate}}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div nz-row>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Purchase price' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPriceImport\">\r\n                <nz-input-group>\r\n                  <input class=\"price_import\" type=\"text\" maxlength=\"15\" formControlName=\"price_import\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" required\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\"\r\n                    (blur)=\"updateProductForm('price_import', { price_import: ProductForm.value.price_import })\" />\r\n                  <ng-template #combineTplPriceImport let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"11\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Unit' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n                <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                  <input (blur)=\"updateProductForm('unit', {unit: unit.value})\" #unit style=\"width:65%;\"\r\n                    formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit'|translate}}\" />\r\n                  <div class=\"center-all-content\" (click)=\"changeUnitsUpdate()\"\r\n                    style=\"margin-right: 8px;border-radius : 5px; border: 1px solid #c9c9c9; width:30%; cursor: pointer;\">\r\n                    <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\" style=\"margin-right: 4px;\"></i>\r\n                    {{(dataUnits.length ? 'Unit list' : 'Add unit') | translate}}\r\n                  </div>\r\n                  <!-- <i style=\"padding: 8px 0 0 8px;cursor: pointer;\" nz-icon\r\n                      [nzType]=\"ProductForm.value.units.length ? 'unordered-list':'plus'\"\r\n                      nzTheme=\"outline\" (click)=\"changeUnitsUpdate()\" nz-tooltip\r\n                      [nzTooltipTitle]=\"dataUnits.length ?'Xem đơn vị quy đổi':'Thêm đơn vị quy đổi'\"\r\n                      nzTooltipPlacement=\"bottom\"></i> -->\r\n                  <ng-template #combineTplUnit let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required'|translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize && management_product_price2\">\r\n            <div><b class='label'>{{'Wholesale price' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice2\">\r\n                <nz-input-group>\r\n                  <input class=\"price2\" type=\"text\" maxlength=\"15\" formControlName=\"price2\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                    (blur)=\"updateProductForm('price2', { price2: ProductForm.value.price2 })\"\r\n                    pattern=\"(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)\" />\r\n                  <ng-template #combineTplPrice2 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Barcode' | translate}}</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control>\r\n                <nz-input-group>\r\n                  <input #box formControlName=\"barcode\" nz-input style=\"width: 86%;\"\r\n                    placeholder=\"{{'Enter manually or use the barcode scanner' | translate}}\"\r\n                    (blur)=\"checkBarcode(box.value)\" />\r\n                  <i style=\"padding: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"changeBarcode()\"\r\n                    nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                    nzTooltipPlacement=\"bottom\"></i>\r\n                </nz-input-group>\r\n                <div class=\"validation-errors\">\r\n                  <ng-container>\r\n                    <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                      <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}</ion-text>\r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Retail price' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice\">\r\n                <nz-input-group>\r\n                  <input class=\"price\" type=\"text\" maxlength=\"15\" formControlName=\"price\" nz-input\r\n                    placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                    (blur)=\"updateProductForm('price', { price: ProductForm.value.price })\" />\r\n                  <ng-template #combineTplPrice let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"!ProductForm.value.manysize\">\r\n            <div><b class='label'>{{'Minimum quantity to alert' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTpl_warning_number\">\r\n                <nz-input-group>\r\n                  <input formControlName=\"warning_number\" nz-input placeholder=\"0\" type=\"number\" min=\"0\" required\r\n                    (blur)=\"updateProductByField( { warning_number: ProductForm.value.warning_number })\" />\r\n                  <ng-template #combineTpl_warning_number let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"updateProductByField( {days_import_warning: ProductForm.value.days_import_warning})\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"updateProductByField( {days_exp_warning: ProductForm.value.days_exp_warning})\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' |\r\n                      translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <label nz-checkbox formControlName=\"allow_sell\" *ngIf=\"!ProductForm.value.manysize\"\r\n              (ngModelChange)=\"updateProductByField(  { allow_sell: ProductForm.value.allow_sell })\">{{'Available to sell' | translate}}</label>\r\n            <label nz-checkbox formControlName=\"selling\" *ngIf=\"!ProductForm.value.manysize\"\r\n              (ngModelChange)=\"updateProductByField( { selling: ProductForm.value.selling })\">{{'Quick sale' | translate}}</label>\r\n\r\n          </div>\r\n          <div nz-col nzSpan=\"12\" *ngIf=\"ProductForm.value.manylot\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLotUpdate(data.formProduct._id)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div nz-row style=\"margin-bottom: 12px;\" *ngIf=\"ProductForm.value.manysize\">\r\n        <div class=\"title-sub\" nz-col nzSpan=\"24\">\r\n          <div class=\"large-size hide-overflow\"><b>{{'Product classification' | translate}}</b></div>\r\n          <div>\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"openModalAddSize()\"\r\n              [disabled]=\"!ProductForm.value.manysize\" [ngStyle]=\"{opacity: (!ProductForm.value.manysize) ? 0.5 : 1}\">\r\n              <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n              {{'Add'|translate}}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <nz-table #basicTable [nzData]=\"subProducts\" [nzShowPagination]=\"false\" *ngIf=\"ProductForm.value.manysize\"\r\n        [nzScroll]=\"{y : heightScoll}\" [nzNoResult]=\"null\">\r\n        <thead>\r\n          <tr>\r\n            <th>{{'Property name' | translate}}</th>\r\n            <th nzAlign=\"right\">{{'Purchase price' | translate}}</th>\r\n            <th *ngIf=\"management_product_price2\" nzAlign=\"right\">{{'Wholesale price' | translate}}</th>\r\n            <th nzAlign=\"right\">{{'Retail price' | translate}}</th>\r\n            <th>{{'Status' | translate}}</th>\r\n            <th>{{'Lot' | translate}}</th>\r\n            <th>{{'Functions' | translate}}</th>\r\n            <th *ngIf=\"isFromHidden\" nzAlign=\"center\">{{'Hide activity' | translate}}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <ng-container *ngFor=\"let data of subProducts\">\r\n            <tr [ngStyle]=\"{ 'background-color': data.delete_hidden ? 'var(--ion-color-vh-gray-light)' : '' }\">\r\n              <td nzAlign=\"center\">{{ data.name }}<br><small>{{data.item_code}}</small></td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price_import)}}</td>\r\n              <td *ngIf=\"management_product_price2\" nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price2) }}</td>\r\n              <td nzAlign=\"right\">{{vhAlgorithm.vhcurrencyunit(data.price) }}</td>\r\n              <td>{{ (!data.delete_hidden ? 'Allow sale' : 'Not allow sale') | translate }}</td>\r\n              <td>\r\n                <button *ngIf=\"data.manylot\" class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n                  (click)=\"openListLotUpdate(data._id);initFormEditSubProduct(data)\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{'List of lots' | translate}}</button>\r\n              </td>\r\n              <td>\r\n                <div style=\"display: flex; justify-content: space-between; font-size: 1.2rem;\">\r\n                  <a (click)=\"openFormSubProduct(data)\">\r\n                    <i style=\"color: var(--ion-color-vh-green)\" class=\"cus-icon\" nz-icon nzType=\"form\" nzTheme=\"outline\"\r\n                      nz-tooltip nzTooltipTitle=\"{{'Edit' | translate}}\"></i>\r\n                  </a>\r\n                  <!-- <a (click)=\"duplicateSubProduct(data)\">\r\n                                    <i style=\"color: var(--ion-color-vh-orange)\" class=\"cus-icon\" nz-icon nzType=\"snippets\"\r\n                                        nzTheme=\"outline\" nz-tooltip nzTooltipTitle=\"{{'Create a copy' | translate}}\"></i>\r\n                                </a> -->\r\n                  <a nz-popconfirm [nzPopconfirmTitle]=\"('Delete ' | translate) + data.name\"\r\n                    nzCancelText=\"{{'Cancel' | translate}}\" (nzOnConfirm)=\"deleteSubProductById(data)\">\r\n                    <i style=\"color: var(--ion-color-vh-red)\" class=\"cus-icon\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                      nz-tooltip nzTooltipTitle=\"{{'Delete' | translate}}\"></i>\r\n                  </a>\r\n                </div>\r\n              </td>\r\n              <!-- Ẩn hoạt động -->\r\n              <td *ngIf=\"isFromHidden\" nzAlign=\"center\">\r\n                <nz-switch [(ngModel)]=\"data.delete_hidden\"\r\n                  (ngModelChange)=\"updateSubProductByField(data._id, {delete_hidden: data.delete_hidden})\">\r\n                </nz-switch>\r\n              </td>\r\n            </tr>\r\n          </ng-container>\r\n        </tbody>\r\n      </nz-table>\r\n    </div>\r\n\r\n  </nz-content>\r\n</nz-layout>\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\"\r\n  (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n  <p *nzModalContent>{{'Are you sure to delete this product?' | translate}}</p>\r\n</nz-modal>\r\n\r\n<nz-modal [(nzVisible)]=\"showModalPrintBarcode\" nzTitle=\"{{'Choose a label template' | translate}}\"\r\n  (nzOnCancel)=\"showModalPrintBarcode = false\" (nzOnOk)=\"updateConfigLabel()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <div nz-col [nzSpan]=\"product_has_lots ? '11' : '24'\">\r\n        <form nz-form [formGroup]=\"ProductForm\">\r\n          <div nz-row>\r\n            <div nz-col [nzSpan]=\"24\">\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Choose product label template' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"id_design_barcode\" nzAllowClear>\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'No template' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of listBarcode\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels per item' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"number_column\" nzAllowClear>\r\n                    <nz-option *ngFor=\"let item of rowLabel\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels to print' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <input nz-input type=\"number\" [min]=\"1\" [max]=\"200\" formControlName=\"number_print\"\r\n                    placeholder=\"{{'Enter the number of label to print' | translate}}\" />\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n      <div nz-col nzSpan=\"2\" *ngIf=\"product_has_lots\"></div>\r\n      <div nz-col nzSpan=\"11\" *ngIf=\"product_has_lots\">\r\n        <form nz-form [formGroup]=\"ProductForm\">\r\n          <div nz-row>\r\n            <div nz-col [nzSpan]=\"24\">\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Choose lot label template' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"id_design_barcode_lot\" nzAllowClear>\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'No template' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of listBarcodeLot\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels per item' | translate}}</b>\r\n                </nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <nz-select formControlName=\"number_column_lot\" nzAllowClear>\r\n                    <nz-option *ngFor=\"let item of rowLabel\" [nzValue]=\"item\" [nzLabel]=\"item\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n              <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Number of labels to print' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                  <input nz-input type=\"number\" [min]=\"1\" [max]=\"200\" formControlName=\"number_print_lot\"\r\n                    placeholder=\"{{'Enter the number of label to print' | translate}}\" />\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!listBarcode.length && !listBarcodeLot.length\"\r\n      nzNotFoundContent=\"{{'You do not have any templates yet' | translate}}\"></nz-empty>\r\n  </ng-container>\r\n</nz-modal>\r\n\r\n<!--Modal add size-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice3\" [(nzVisible)]=\"show_add_size\"\r\n  nzTitle=\"{{'Add property' | translate}}\" (nzOnCancel)=\"handleCancelSubProduct()\"\r\n  (nzOnOk)=\"addSubProduct(formSubProduct.value)\" [nzStyle]=\"{ top: '20px' }\">\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"formSubProduct\" style=\"overflow: auto; height: 455px;padding-bottom: 16px;\">\r\n      <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" style=\"padding-right: 8px;\">\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Attribute name (color, size, ...)' | translate}}*</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input id=\"size-name\" nz-input placeholder=\"{{'Enter attribute name' | translate}}\"\r\n                formControlName=\"name\" />\r\n              <ng-template #errorSubsName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Please enter a property name' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid name' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Item code' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n              <input nz-input formControlName=\"item_code\" [placeholder]=\"'Enter item code' | translate\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"20\">\r\n              <input id=\"size-barcode\" #barcodesize maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter barcode' | translate}}\" formControlName=\"barcode\" />\r\n            </nz-form-control>\r\n            <div nz-col [nzSpan]=\"4\">\r\n              <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                (click)=\"changeBarcodeSubProductForAddSubProduct()\" nz-tooltip\r\n                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n            </div>\r\n            <div class=\"validation-errors\">\r\n              <ng-container>\r\n                <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                  <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                  </ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Purchase price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice2\">\r\n              <input class=\"size-price-purchase-item\" (keyup)=\"tranformPrice('size-price-purchase-item')\" maxlength=\"15\"\r\n                nz-input placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price_import\" />\r\n              <ng-template #errorSubsPrice2 let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\" *ngIf=\"management_product_price2\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Wholesale price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPriceImport\">\r\n              <input class=\"size-price2-item\" (keyup)=\"tranformPrice('size-price2-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price2\" />\r\n              <ng-template #errorSubsPriceImport let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Retail price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice\">\r\n              <input class=\"size-price-item\" (keyup)=\"tranformPrice('size-price-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price\" />\r\n              <ng-template #errorSubsPrice let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;width: 100%;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Unit' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n              <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                <input style=\"width: 70%;\" formControlName=\"unit\" nz-input placeholder=\"{{'Enter unit'|translate}}\" />\r\n                <div class=\"btn-add center-all-content\"\r\n                  style=\"margin-right: 8px;border-radius : 5px;border: 1px solid #c9c9c9;width:25%;cursor: pointer;\"\r\n                  (click)=\"changeUnitsSubs()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{(dataUnits.length ? 'Unit list' : 'Add unit') | translate}}\r\n                </div>\r\n\r\n                <ng-template #combineTplUnit let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required'|translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Minimum quantity to alert' | translate}}</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsWarning_number\">\r\n              <input nz-input type=\"number\" formControlName=\"warning_number\" required\r\n                placeholder=\"{{'Enter number' | translate}}\" />\r\n              <ng-template #errorSubsWarning_number let-control>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid value'|translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <!-- <label nz-checkbox formControlName=\"allow_sell\">{{'Available to sell'|translate}}</label> -->\r\n            <label nz-checkbox formControlName=\"selling\">{{'Quick sale' | translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" flex *ngIf=\"management_product_lot\">\r\n            <label nz-checkbox formControlName=\"manylot\" (ngModelChange)=\"changeManyLotSubProduct($event)\">{{'Lô, hạn sử\r\n              dụng' |\r\n              translate}}</label>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLot(formSubProduct.value.lots)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice3>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelSubProduct()\">\r\n      {{\"Cancel\" |translate}}\r\n    </button>\r\n    <button [disabled]=\"formSubProduct.invalid\" [ngStyle]=\"{opacity: formSubProduct.invalid ? 0.5 : 1}\" nz-button\r\n      class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"addSubProduct(formSubProduct.value)\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!--Modal edit name, price size-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" [(nzVisible)]=\"isVisibleSubProduct\"\r\n  nzTitle=\"{{'Update property' | translate}}\" (nzOnCancel)=\"handleCancelSubProduct()\"\r\n  (nzOnOk)=\"handleSubProduct(formSubProduct.value)\" [nzStyle]=\"{ top: '20px' }\">\r\n  <ng-container *nzModalContent>\r\n    <form nz-form [formGroup]=\"formSubProduct\" style=\"overflow: auto; height: 450px;padding-bottom: 16px;\">\r\n      <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" style=\"padding-right: 8px;\">\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Attribute name (color, size, ...)' | translate}}*</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsName\">\r\n              <input id=\"size-name\" nz-input placeholder=\"{{'Enter size name' | translate}}\" formControlName=\"name\"\r\n                (blur)=\"udpateSubProductByField(formSubProduct.value._id, {name : formSubProduct.value.name }, 'name')\" />\r\n              <ng-template #errorSubsName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Please enter a name' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid name' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Item code' | translate}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n              <input nz-input formControlName=\"item_code\" (blur)=\"udpateSubProductByField(formSubProduct.value._id, {item_code : formSubProduct.value.item_code }, 'item_code')\" [placeholder]=\"'Enter item code' | translate\" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"20\">\r\n              <input id=\"size-barcode\" (blur)=\"checkBarcodeSubProduct(barcodesize.value, formSubProduct.value.name)\"\r\n                #barcodesize maxlength=\"15\" nz-input placeholder=\"{{'Enter barcode' | translate}}\"\r\n                formControlName=\"barcode\" />\r\n            </nz-form-control>\r\n            <div nz-col [nzSpan]=\"4\">\r\n              <i style=\"margin: 8px 0 0 8px;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                (click)=\"changeBarcodeSubProduct()\" nz-tooltip\r\n                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n            </div>\r\n            <div class=\"validation-errors\">\r\n              <ng-container>\r\n                <div class=\"error-message\" *ngIf=\"!barcode\">\r\n                  <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                  </ion-text>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Purchase price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice2\">\r\n              <input class=\"size-price-purchase-item\" (keyup)=\"tranformPrice('size-price-purchase-item')\" maxlength=\"15\"\r\n                nz-input placeholder=\"{{'Enter number' | translate}}\" formControlName=\"price_import\"\r\n                (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPrice2 let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Cost is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\" *ngIf=\"management_product_price2\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Wholesale price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPriceImport\">\r\n              <input class=\"size-price2-item\" (keyup)=\"tranformPrice('size-price2-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price2\" (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPriceImport let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Retail price' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsPrice\">\r\n              <input class=\"size-price-item\" (keyup)=\"tranformPrice('size-price-item')\" maxlength=\"15\" nz-input\r\n                placeholder=\"{{'Enter price' | translate}}\" formControlName=\"price\" (blur)=\"updateUnitsSubProduct()\" />\r\n              <ng-template #errorSubsPrice let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Price is required' | translate}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid price' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item style=\"margin:0 0 4px;width: 100%;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Unit' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzErrorTip]=\"combineTplUnit\">\r\n              <nz-input-group style=\"display:flex;justify-content: space-between;\">\r\n                <input style=\"width: 60%;\" formControlName=\"unit\" nz-input required\r\n                  placeholder=\"{{'Enter unit'|translate}}\" (blur)=\"updateUnitsSubProduct()\" />\r\n                <div class=\"btn-add center-all-content\"\r\n                  style=\"margin-right: 8px;border-radius : 5px;border: 1px solid #c9c9c9;width:35%;cursor: pointer;\"\r\n                  (click)=\"changeUnitsSubsUpdate()\">\r\n                  <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n                  {{'Unit list'| translate}}\r\n                </div>\r\n                <ng-template #combineTplUnit let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Unit is required'|translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item style=\"margin:0 0 4px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Minimum quantity to alert' | translate}}</b>\r\n            </nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"errorSubsWarning_number\">\r\n              <input nz-input type=\"number\" formControlName=\"warning_number\"\r\n                placeholder=\"{{'Enter number' | translate}}\" required\r\n                (blur)=\"udpateSubProductByField(formSubProduct.value._id, {warning_number : formSubProduct.value.warning_number }, 'warning_number')\" />\r\n              <ng-template #errorSubsWarning_number let-control>\r\n                <ng-container *ngIf=\"control.hasError('pattern')\">{{'Invalid value'|translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <div nz-col nzSpan=\"24\" flex>\r\n            <label nz-checkbox formControlName=\"allow_sell\"\r\n              (ngModelChange)=\"udpateSubProductByField(formSubProduct.value._id, {allow_sell : formSubProduct.value.allow_sell }, 'allow_sell')\">{{'Available to sell'|translate}}</label>\r\n            <label nz-checkbox formControlName=\"selling\"\r\n              (ngModelChange)=\"udpateSubProductByField(formSubProduct.value._id, {selling : formSubProduct.value.selling }, 'selling')\">{{'Quick sale' | translate}}</label>\r\n\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days allowed for import' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice3\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_import_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"udpateSubProductByField(formSubProduct.value._id, {days_import_warning : formSubProduct.value.days_import_warning }, 'days_import_warning')\" />\r\n                  <ng-template #combineTplPrice3 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <div><b class='label'>{{'Number of remaining days to be warned' | translate}}*</b></div>\r\n            <nz-form-item>\r\n              <nz-form-control [nzErrorTip]=\"combineTplPrice4\">\r\n                <nz-input-group>\r\n                  <input required type=\"number\" maxlength=\"15\" formControlName=\"days_exp_warning\" nz-input\r\n                    placeholder=\"0\"\r\n                    (blur)=\"udpateSubProductByField(formSubProduct.value._id, {days_exp_warning : formSubProduct.value.days_exp_warning }, 'days_exp_warning')\" />\r\n                  <ng-template #combineTplPrice4 let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                    </ng-container>\r\n                  </ng-template>\r\n                </nz-input-group>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n          <div nz-col nzSpan=\"24\" *ngIf=\"formSubProduct.value.manylot\">\r\n            <button class=\"btn-add center-all-content\" nz-button nzType=\"default\"\r\n              (click)=\"openListLotUpdate(formSubProduct.value._id)\">\r\n              <i nz-icon nzType=\"ordered-list\" nzTheme=\"outline\"></i>\r\n              {{'List of lots' | translate}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelSubProduct()\">\r\n      {{\"Close\" |translate}}\r\n    </button>\r\n    <!-- <button [disabled]=\"formSubProduct.invalid\" [ngStyle]=\"{opacity: formSubProduct.invalid ? 0.5 : 1}\" nz-button\r\n            class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleSubProduct(formSubProduct.value)\">{{\"Save\" |\r\n            translate}}</button> -->\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n  nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"show_modal_select_lots = false\" (nzOnOk)=\"gotoPrintLabelLot()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n          (keyup)=\"searchLot(searchValue.value )\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <nz-radio-group [(ngModel)]=\"id_lotproduct\" style=\"width:100%;\">\r\n      <div nz-row *ngFor=\"let item of lots\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"8\">\r\n                {{item.lot_number}}\r\n              </div>\r\n\r\n              <div nz-col nzSpan=\"8\">\r\n                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n              <div nz-col nzSpan=\"8\">\r\n                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n              </div>\r\n            </div>\r\n\r\n          </label>\r\n        </div>\r\n\r\n      </div>\r\n    </nz-radio-group>\r\n    <div *ngIf=\"!lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice2>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"show_modal_select_lots = false\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!id_lotproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"gotoPrintLabelLot()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal chọn sp con để in tem sản phẩm -->\r\n<nz-modal [nzFooter]=\"modalFooterChooseSub\" [(nzVisible)]=\"show_modal_select_subs\"\r\n  nzTitle=\"{{'Select property' | translate}}\" (nzOnCancel)=\"show_modal_select_subs = false\"\r\n  (nzOnOk)=\"handleOkPrintSub()\">\r\n  <ng-container *nzModalContent>\r\n    <nz-radio-group [(ngModel)]=\"id_subproduct\" style=\"width:100%;\">\r\n      <div nz-row *ngFor=\"let item of subProducts\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n            <div nz-row>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.name}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                <nz-select nzShowSearch [(ngModel)]=\"item.ratio\" (ngModelChange)=\"changeUnit(item)\">\r\n                  <nz-option *ngFor=\"let unit of item.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit.ratio\">\r\n                  </nz-option>\r\n                </nz-select>\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{item.barcode}}\r\n              </div>\r\n              <div nz-col nzSpan=\"6\">\r\n                {{vhAlgorithm.vhcurrencyunit( item.price)}}\r\n              </div>\r\n            </div>\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </nz-radio-group>\r\n\r\n  </ng-container>\r\n  <ng-template #modalFooterChooseSub>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"show_modal_select_subs = false\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!id_subproduct\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleOkPrintSub()\">{{\"Ok\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n<!-- component thêm units ở sp con -->\r\n<app-units-list *ngIf=\"showDrawerUnits\" [dataUnit]=\"dataUnitMain\" [dataUnits]=\"dataUnits\" [barcodes]=\"barcodes\"\r\n  [showDrawerUnits]=\"showDrawerUnits\" (closeUnits)=\"closeUnits($event)\"></app-units-list>\r\n\r\n<app-units-list-update *ngIf=\"showDrawerUnitsUpdate\" [dataUnit]=\"dataUnitMain\" [dataUnits]=\"dataUnits\"\r\n  [showDrawerUnits]=\"showDrawerUnitsUpdate\" (closeUnits)=\"closeUnitsUpdate($event)\"></app-units-list-update>\r\n\r\n<app-lot-list *ngIf=\"show_lot_list\" [data]=\"lot_list\" [show_lot_list]=\"show_lot_list\" (close)=\"handleLotList($event)\"\r\n  [barcodes]=\"barcodes\">\r\n</app-lot-list>\r\n\r\n\r\n<app-lot-list-update *ngIf=\"show_lot_list_update\" [id_sub_or_product]=\"id_sub_or_product\"\r\n  [show_lot_list]=\"show_lot_list_update\" (close)=\"handleLotListUpdate()\">\r\n</app-lot-list-update>\r\n","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-five-col-lot',\r\n  templateUrl: './print-five-col-lot.component.html',\r\n  styleUrls: ['./print-five-col-lot.component.scss']\r\n})\r\nexport class PrintFiveColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false,show_col5:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 5 thì hiện cả 5 tem trên hàng\r\n     * ngược lại => khi push tới hàng cuối cùng thì check i = (number-1)/5 : cột thứ 1  hay = (number-2)/5 : cột thứ 2 hay = (number-3)/5 : cột thứ 3 hay = (number-4)/5 : cột thứ 4\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/5; i++) {\r\n     if(this.stamp.number%5 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/5) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false,show_col5:false});\r\n       else if(i == (this.stamp.number-2)/5) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-3)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-4)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  ngAfterViewChecked(): void {\r\n   \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                                 \r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n@Component({\r\n  selector: 'app-print-five-col',\r\n  templateUrl: './print-five-col.component.html',\r\n  styleUrls: ['./print-five-col.component.scss']\r\n})\r\nexport class PrintFiveColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false,show_col5:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 5 thì hiện cả 5 tem trên hàng\r\n     * ngược lại => khi push tới hàng cuối cùng thì check i = (number-1)/5 : cột thứ 1  hay = (number-2)/5 : cột thứ 2 hay = (number-3)/5 : cột thứ 3 hay = (number-4)/5 : cột thứ 4\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/5; i++) {\r\n     if(this.stamp.number%5 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/5) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false,show_col5:false});\r\n       else if(i == (this.stamp.number-2)/5) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-3)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false,show_col5:false});\r\n       else  if(i == (this.stamp.number-4)/5) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true,show_col5:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*5,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col5\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-four-col-lot',\r\n  templateUrl: './print-four-col-lot.component.html',\r\n  styleUrls: ['./print-four-col-lot.component.scss']\r\n})\r\nexport class PrintFourColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 4 thì hiện cả 4 tem trên hàng\r\n     * ngược lại  => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/4; i++) {\r\n      \r\n      \r\n     if(this.stamp.number%4 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/4) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false});\r\n       else if(i == (this.stamp.number-2)/4) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false});\r\n       else  if(i == (this.stamp.number-3)/4) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height > 20 ? this.stamp.height - 4 : this.stamp.height -2 ) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                           'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                           'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print-four-col',\r\n  templateUrl: './print-four-col.component.html',\r\n  styleUrls: ['./print-four-col.component.scss']\r\n})\r\nexport class PrintFourColComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false,show_col4:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 4 thì hiện cả 4 tem trên hàng\r\n     * ngược lại  => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/4; i++) {\r\n      \r\n      \r\n     if(this.stamp.number%4 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/4) this.listRowBarcode.push({show_col2:false,show_col3:false,show_col4:false});\r\n       else if(i == (this.stamp.number-2)/4) this.listRowBarcode.push({show_col2:true,show_col3:false,show_col4:false});\r\n       else  if(i == (this.stamp.number-3)/4) this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true,show_col4:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n\r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height > 20 ? this.stamp.height - 4 : this.stamp.height -2 ) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%; margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*4,'height.mm': stamp.barcode.height > 20 ?  stamp.barcode.height -3 :  stamp.barcode.height -2,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\" display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div \r\n                        style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col4\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"display: flex;position: absolute; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : ''\r\n                            }\" [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\">\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                               \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"item.type != 'barcode' && item.type != 'price' && item.status\">{{item.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                   \r\n                                    'text-align':item.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  item.type == 'price' && item.status\">{{vhAlgorithm.vhcurrencyunit_symbol(item.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div> \r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-one-col-lot',\r\n  templateUrl: './print-one-col-lot.component.html',\r\n  styleUrls: ['./print-one-col-lot.component.scss']\r\n})\r\nexport class PrintOneColLotComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll: any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property = this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property, 'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeNummber()\r\n    for (let item of this.stamp.barcode.property) {\r\n      switch (item.type) {\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode; break;\r\n        case 'name': item.value = this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    \r\n    \r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number; i++) {\r\n      this.listRowBarcode.push(true);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.stamp.formProduct.barcode)\r\n      jsbarcode(\".barcode\", this.stamp.formProduct.barcode, {\r\n        displayValue: this.stamp.barcode.property[1].hidden_text,\r\n        fontSize: this.stamp.barcode.property[1].font_size,\r\n        font: \"sans-serif\"\r\n      });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'], { state: this.stamp })\r\n  }\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n\r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'lot_number' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'lot_number' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <svg [ngStyle]=\"{'height.px': pro.height*3.78,'width.px': pro.width*3.78}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print-one-col',\r\n  templateUrl: './print-one-col.component.html',\r\n  styleUrls: ['./print-one-col.component.scss']\r\n})\r\nexport class PrintOneColComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeNummber()\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'barcode-text': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'price': item.value = this.stamp.formProduct.price;break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.sub_name ? this.stamp.formProduct.name + ' (' + this.stamp.formProduct.sub_name + ')' : this.stamp.formProduct.name; break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number ; i++) {\r\n      this.listRowBarcode.push(true);\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: false,\r\n      // height: 65\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  } \r\n\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Label printing'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\" class=\"stamp mb-6\"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': stamp.barcode.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : ''\r\n                            }\"\r\n                            [ngClass]=\"{'border-bot' : idx == stamp.barcode.property.length -1}\"\r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\"\r\n                                style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;\"\r\n                                *ngIf=\"pro.type != 'barcode' && pro.type != 'price' && pro.status\">{{pro.value}}</span>\r\n                            <span\r\n                                [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\"\r\n                                style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"  pro.type == 'price' && pro.status\">{{vhAlgorithm.vhcurrencyunit_symbol(pro.value)}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode' && pro.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-three-col-lot',\r\n  templateUrl: './print-three-col-lot.component.html',\r\n  styleUrls: ['./print-three-col-lot.component.scss']\r\n})\r\nexport class PrintThreeColLotComponent implements OnInit {\r\n  propertySelected: any;\r\n  stamp: any;\r\n  listRowBarcode = [{show_col2:false,show_col3:false}]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    /**\r\n     * nếu chia hết cho 3 thì hiện cả 3 tem trên hàng\r\n     * ngược lại number = 4 => khi push tới hàng cuối cùng thì check i = (number-1)/3 : cột thứ 1  hay = (number-2)/3 : cột thứ 2\r\n     * \r\n     */\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/3; i++) {\r\n     if(this.stamp.number%3 ==0)  this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     else {\r\n       if(i == (this.stamp.number-1)/3) this.listRowBarcode.push({show_col2:false,show_col3:false});\r\n       else if(i == (this.stamp.number-2)/3) this.listRowBarcode.push({show_col2:true,show_col3:false});\r\n       else this.listRowBarcode.push({show_col2:true,show_col3:true});\r\n     }\r\n    }\r\n    \r\n  }\r\n\r\n  ngAfterViewChecked(): void { \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  }\r\n\r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}'  \r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} barcode</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\"hideScrollbar\" style=\"overflow: auto;padding-top: 16px;display: flex;align-items: flex-start;justify-content: center;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"margin-top: -1.5mm\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\"  \r\n                    style=\"display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\" [ngClass]=\"{ 'mb-6': i != listRowBarcode.length -1}\" class=\"stamp\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <canvas [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*3,'height.mm': stamp.barcode.height -3 ,'margin-bottom':i == listRowBarcode.length -1 ? '0' : ''}\"  \r\n                    style=\"display: flex;\" *ngFor=\"let item of listRowBarcode, index as i\" [ngClass]=\"{ 'mb-6': i != listRowBarcode.length -1}\" class=\"stamp\">\r\n                    <div \r\n                    style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n                    </div>\r\n                    <div  \r\n                        *ngIf=\"item.show_col2\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\" position: absolute;align-items: center;overflow: hidden;\"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div \r\n                        *ngIf=\"item.show_col3\" style=\"position: relative;height: 100%;\" [ngStyle]=\"{'width.mm': stamp.barcode.width}\" class=\"border-top\">\r\n                        <div *ngFor=\"let item of stamp.barcode.property, index as idx\" style=\"position: absolute;align-items: center;overflow: hidden; \"\r\n                            [ngStyle]=\"{\r\n                            'font-size.px': item.font_size, \r\n                            'font-weight': item.font_weight  , \r\n                            'text-decoration': item.text_decoration ,\r\n                            'font-style': item.font_style  ,\r\n                            'top.px': item.type == 'price' && i == listRowBarcode.length -1 ? item.y -2 : item.y,\r\n                            'left.px':item.x,\r\n                            'height.mm': item.height ,\r\n                            'width.mm': item.width,\r\n                            'justify-content':item.type == 'barcode' ? item.justify_content : '',\r\n                            'z-index':item.z_index,\r\n                            'display': item.status ? 'flex' : 'none'\r\n                            }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                \r\n                                'text-align':item.text_align,\r\n                                'height.mm': item.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"item.type == 'name' || item.type == 'lot_number' && item.status\"> <ng-container  *ngIf=\"item.type == 'lot_number'\">\r\n                                    {{item.label}} \r\n                                </ng-container>{{item.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_mfg' && item.status\">{{item.label}} {{item.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': item.white_space,\r\n                               'font-family': item.font_family, \r\n                                    'text-align':item.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  item.type == 'date_exp' && item.status\">{{item.label}} {{item.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n\r\n                            <svg [ngStyle]=\"{'height.mm': item.height,'width.mm': item.width}\"\r\n                                *ngIf=\"item.type == 'barcode' && item.status\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery } from 'ionic-vhframeworks';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport jsbarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\nimport { Platform } from '@ionic/angular';\r\ndeclare var electron: any;\r\n@Component({\r\n  selector: 'app-print-two-col-lot',\r\n  templateUrl: './print-two-col-lot.component.html',\r\n  styleUrls: ['./print-two-col-lot.component.scss']\r\n})\r\nexport class PrintTwoColLotComponent implements OnInit {\r\n\r\n  stamp: any;\r\n  listOfFontSize = [8, 9, 10, 11, 12, 13, 14, 15, 16];\r\n  number = 1;\r\n  listRowBarcode = [false]; // chứa số hàng hiển thị. true thì hiển thị 2 tem. false là hien thị 1 tem trên 1 hàng\r\n  heightScroll :any;\r\n  propertySelected: any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdf: ChangeDetectorRef,\r\n    private vhComponent:VhComponent,\r\n    private vhQuery:VhQuery,\r\n    public platform: Platform\r\n  ) {\r\n    this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    this.stamp.barcode.property =  this.vhAlgorithm.sortNumberbyASC(this.stamp.barcode.property,'y')\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    \r\n    for(let item of this.stamp.barcode.property){\r\n      switch(item.type){\r\n        case 'date_exp': item.value = this.stamp.formProduct.date_exp; break;\r\n        case 'date_mfg': item.value = this.stamp.formProduct.date_mfg; break;\r\n        case 'lot_number': item.value = this.stamp.formProduct.lot_number; break;\r\n        case 'barcode': item.value = this.stamp.formProduct.barcode;break;\r\n        case 'name': item.value = this.stamp.formProduct.name;break;\r\n      }\r\n    }\r\n    this.propertySelected = this.stamp.barcode.property[0];\r\n    this.changeNummber()\r\n  }\r\n\r\n  changeNummber() {\r\n    this.listRowBarcode = []\r\n    for (let i = 0; i < this.stamp.number/2; i++) {\r\n     if(this.stamp.number%2 ==0)  this.listRowBarcode.push(true);\r\n     else {\r\n       if(i == (this.stamp.number-1)/2) this.listRowBarcode.push(false);\r\n       else this.listRowBarcode.push(true);\r\n     }\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n  }\r\n  ngAfterViewChecked(): void { \r\n    if(document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight -32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if(this.stamp.formProduct.barcode)\r\n    jsbarcode(\".barcode\",  this.stamp.formProduct.barcode, {\r\n      displayValue: this.stamp.barcode.property[1].hidden_text,\r\n      fontSize: this.stamp.barcode.property[1].font_size,\r\n      font: \"sans-serif\"\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'],{state: this.stamp})\r\n  } \r\n  Print() {\r\n    if (this.platform.is(\"electron\")) this.printElectron()\r\n    else this.printBrowser()\r\n  }\r\n  printElectron() {\r\n    let html = document.getElementById(\"stamp-barcode-electron\").innerHTML;\r\n    electron.ipcRenderer.send(\"print-start\", {\r\n      html: html,\r\n      deviceName: this.stamp.printer_name,\r\n    });\r\n    electron.ipcRenderer.on(\"print-done\", (event, data) => {\r\n      if (!data) this.vhComponent.alertMessageDesktop('warning', 'Printing failed', 3000)\r\n     \r\n    });\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.barcode.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div>\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" [ngClass]=\"{'mb-6': i != listRowBarcode.length -1  }\"  class=\"stamp \"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"position: absolute;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'left.px':pro.x,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': pro.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                             'z-index':pro.z_index,\r\n                             'display': pro.status ? 'flex' : 'none'\r\n                             }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                             <canvas [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></canvas>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"stamp-barcode-electron\" style=\"margin-top: -1.5mm;display:none;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.barcode.width*stamp.col,'height.mm': stamp.barcode.height -3,'margin-bottom':i == listRowBarcode.length -1 ? '0' : '' }\" [ngClass]=\"{'mb-6': i != listRowBarcode.length -1  }\"  class=\"stamp \"\r\n                    style=\"display: flex;margin-left: -1mm;\" *ngFor=\"let item of listRowBarcode, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\"  style=\"position: relative;\" class=\"border-top\"\r\n                        >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\"  \r\n                            [ngStyle]=\"{\r\n                            'text-align': pro.text_align,\r\n                            'font-size.px': pro.font_size, \r\n                            'font-weight': pro.font_weight  , \r\n                            'text-decoration': pro.text_decoration ,\r\n                            'font-style': pro.font_style  ,\r\n                            'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                            'left.px':pro.x,\r\n                            'height.mm': pro.height ,\r\n                            'width.mm': pro.width,\r\n                            'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                            'z-index':pro.z_index,\r\n                            'display': pro.status ? 'flex' : 'none'\r\n                            }\"\r\n                            \r\n                            >\r\n                            <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                            <svg [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div [ngStyle]=\"{'width.mm': stamp.barcode.width,'height.mm': stamp.barcode.height -3}\" *ngIf=\"item\" style=\"position: relative;\"  class=\"border-top\"\r\n                         >\r\n                        <div  \r\n                            *ngFor=\"let pro of stamp.barcode.property, index as idx\"  \r\n                            style=\"display: flex;position: absolute;align-items: center;overflow: hidden;\" \r\n                             [ngStyle]=\"{\r\n                             'text-align': pro.text_align,\r\n                             'font-size.px': pro.font_size, \r\n                             'font-weight': pro.font_weight  , \r\n                             'text-decoration': pro.text_decoration ,\r\n                             'font-style': pro.font_style  ,\r\n                             'top.px': pro.type == 'price' && i == listRowBarcode.length -1 ? pro.y -2 : pro.y,\r\n                             'left.px':pro.x,\r\n                             'height.mm': pro.height ,\r\n                             'width.mm': pro.width,\r\n                             'justify-content':pro.type == 'barcode' ? pro.justify_content : '',\r\n                             'z-index':pro.z_index,\r\n                             'display': pro.status ? 'flex' : 'none'\r\n                             }\" >\r\n                             <span [ngStyle]=\"{\r\n                                'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                \r\n                                'text-align':pro.text_align,\r\n                                'height.mm': pro.height\r\n                            }\" style=\" overflow: hidden;line-height: 1;width: 100%;\"\r\n                                *ngIf=\"pro.type == 'name' || pro.type == 'lot_number' && pro.status\"> <ng-container  *ngIf=\"pro.type == 'lot_number'\">\r\n                                    {{pro.label}} \r\n                                </ng-container>{{pro.value}}</span>\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_mfg' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                    'dd/MM/yyyy'}}</span>\r\n\r\n                                <span [ngStyle]=\"{\r\n                                    'white-space': pro.white_space,\r\n                               'font-family': pro.font_family, \r\n                                    'text-align':pro.text_align}\" style=\" height: 100%;line-height: 1;width: 100%;\"\r\n                                    *ngIf=\"  pro.type == 'date_exp' && pro.status\">{{pro.label}} {{pro.value | date :\r\n                                        'dd/MM/yyyy'}}</span>\r\n                             <svg [ngStyle]=\"{'height.mm': pro.height,'width.mm': pro.width}\"\r\n                                 *ngIf=\"pro.type == 'barcode'\" class=\"barcode\"></svg>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div> \r\n    </div>\r\n</nz-layout>","import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { combineLatest } from 'rxjs';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-hidden-product',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './hidden-product.component.html',\r\n  styleUrls: ['./hidden-product.component.scss']\r\n})\r\nexport class HiddenProductComponent {\r\n  /** Danh sách sản phẩm hiển thị trong tab Cho bán */\r\n  list_show_product: any = [];\r\n  /** Danh sách sản phẩm hiển thị trong tab Không cho bán */\r\n  list_show_product_not: any = [];\r\n  list_subproduct: any = [];\r\n  list_product: any = [];\r\n  list_show: any = [];\r\n\r\n  /** Danh sách sản phẩm hiển thị trong tab Đã ẩn */\r\n  list_show_product_hidden: any = [];\r\n  list_subproduct_hidden: any = [];\r\n  list_product_hidden: any = [];\r\n  list_show_hidden: any = [];\r\n\r\n  /** Danh sách tất cả danh mục */\r\n  list_category: any = [];\r\n  /** Danh sách danh mục tìm kiếm */\r\n  list_search_category: any = [];\r\n  stateObj = {\r\n    /** Từ khoá tìm kiếm */\r\n    keySearch: '',\r\n    /** id của danh mục được chọn */\r\n    selectedValue: '1',\r\n    /** Tab được chọn */\r\n    tab: 0,\r\n    nzPageIndex: 1\r\n  };\r\n  observable: any;\r\n\r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private datePipe: DatePipe,\r\n    private vhComponent: VhComponent,\r\n    private modalService: NzModalService,\r\n  ) {\r\n    if (this.router.getCurrentNavigation().extras.state) {\r\n      let stateObj = this.router.getCurrentNavigation().extras.state.stateObj;\r\n      this.stateObj.keySearch = stateObj.keySearch;\r\n      this.stateObj.selectedValue = stateObj.selectedValue;\r\n      this.stateObj.tab = stateObj.tab;\r\n      this.stateObj.nzPageIndex = stateObj.nzPageIndex;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    //xử lý category\r\n    this.list_category = this.vhQuerySales.getlocalCategorys(VhType.PRODUCT);\r\n    if (!this.list_category.some(item => item._id == '1')) {\r\n      this.list_category.unshift({ name: this.languageService.translate('All'), _id: '1' });\r\n    }\r\n    this.list_search_category = this.list_category;\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.doRefreshData();\r\n    if (this.stateObj.tab === 1) {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.observable.unsubscribe();\r\n  }\r\n\r\n\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#hidden-product\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".hidden-product-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#hidden-product\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".hidden-product-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**get data product, category */\r\n  doRefreshData() {\r\n    this.observable = combineLatest([\r\n      this.vhQuerySales.getObservableLocalProducts(VhType.PRODUCT)\r\n    ]).subscribe((result: any) => {\r\n      console.log('getObservableLocalProducts', result);\r\n      this.list_product = result[0].filter(item => {\r\n        // check subs\r\n        if (item.subs && item.subs.length) {\r\n          item.subs = item.subs.filter(sub => !sub.delete_hidden);\r\n          return item.subs.some(sub => !sub.delete_hidden);\r\n        }\r\n        else {\r\n          return !item.delete_hidden;\r\n        }\r\n      }).map(item => this.processProduct(item));\r\n      this.list_subproduct = this.vhAlgorithm.sortStringbyASC(this.list_product, 'name');\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProducts(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategory(this.stateObj.selectedValue);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lí dữ liệu của sản phẩm (units, subproduct, name_category, ...)\r\n   * @param item\r\n   * @returns\r\n   */\r\n  processProduct(item: any): any {\r\n    let arr: any = [];  // sắp xếp subproduct theo tiền\r\n    if (item.manysize && item.subs.length) {\r\n      arr = this.vhAlgorithm.sortNumberbyASC(item.subs, 'price');\r\n      item['show_expand'] = false;\r\n      item.subs.forEach(element => {\r\n        if (element.units) {\r\n          element['unit_exchange'] = element.units.find(e => e.default ? e.default : e.ratio == 1);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (item.units) {\r\n        item['unit_exchange'] = item.units.find(e => e.default ? e.default : e.ratio == 1);\r\n        item['price_high'] = item.unit_exchange.price;\r\n      }\r\n    }\r\n    return {\r\n      ...item,\r\n      name_category: this.vhQuerySales.getlocalCategory(item.id_category) ? this.vhQuerySales.getlocalCategory(item.id_category).name : ''\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * ẩn / hiện sản phẩm con\r\n   * @example this.renderSubProducts(product_selected)\r\n   */\r\n  renderSubProducts(data) {\r\n    data.show_expand = !data.show_expand;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi tab\r\n   * @example this.changeTab('1');\r\n   */\r\n  changeTab(value) {\r\n    this.listProductSelected = [];\r\n    this.selectedProducts = {};\r\n    this.stateObj.tab = value;\r\n    if (value == '1') {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(id, value, parent?, is_sub?) {\r\n    console.log('value', value);\r\n    console.log('id', id);\r\n    if (is_sub) {\r\n      this.vhQuerySales.updateSubProduct(id, value).then((res) => {\r\n        console.log(res);\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n        // kiểm tra nếu tất cả con đều false thì xóa khỏi mảng\r\n        if (parent.subs.filter(e => e.delete_hidden).length == 0) {\r\n          this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != parent._id);\r\n        }\r\n      }, error => {\r\n        console.log(error);\r\n      }).catch(e => {\r\n        console.log(e);\r\n      });\r\n    }\r\n    else {\r\n      this.vhQuerySales.updateProduct(id, value).then((res) => {\r\n        console.log(res);\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n        if (!value.delete_hidden) {\r\n          this.list_product_hidden = this.list_product_hidden.filter(item => item._id != id);\r\n          this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != id);\r\n        }\r\n      }, error => {\r\n        console.log(error);\r\n      }).catch(e => {\r\n        console.log(e);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Lấy danh sách sản phẩm đã ẩn\r\n   */\r\n  getHiddenProducts() {\r\n    this.vhQuerySales.refreshLocalProducts_Delete_Hidden(VhType.PRODUCT).then(() => {\r\n      const hiddenProducts = this.vhQuerySales.getlocalProducts(VhType.PRODUCT).filter(item => {\r\n        // check subs\r\n        if (item.subs && item.subs.length) {\r\n          return item.subs.some(sub => sub.delete_hidden);\r\n        }\r\n        else {\r\n          return item.delete_hidden;\r\n        }\r\n      });\r\n\r\n      this.list_product_hidden = hiddenProducts.map(item => this.processProduct(item));\r\n      this.list_subproduct_hidden = this.vhAlgorithm.sortStringbyASC(this.list_product_hidden, 'name');\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProductsHidden(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo delete_hidden\r\n   */\r\n  filterByAllowSell() {\r\n    this.list_show_product = this.list_show.filter(item => item.delete_hidden == false || item.manysize);\r\n    // this.list_show_product_not = this.list_show.filter(item => item.allow_sell == false);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên và barcode\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProducts(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_product = this.applySearchFilter(this.list_subproduct, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n    this.searchByCategory(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm (tab đã ẩn) theo tên và barcode\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProductsHidden(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_product_hidden = this.applySearchFilter(this.list_subproduct_hidden, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n    this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên và barcode, nếu không có giá trị tìm kiếm thì trả về tất cả, ngược lại thì lọc theo tên và barcode\r\n   * @param products\r\n   * @param searchValue\r\n   * @param fields\r\n   * @returns\r\n   */\r\n  applySearchFilter(products: any[], searchValue: string, fields: string[]): any[] {\r\n    return searchValue\r\n      ? this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue.toLowerCase()), products, fields)\r\n      : products;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc sản phẩm theo danh mục sản phẩm\r\n   */\r\n  searchByCategory(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show = this.applyCategoryFilter(this.list_product, value);\r\n    this.filterByAllowSell();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc sản phẩm (tab đã ẩn) theo danh mục sản phẩm\r\n   */\r\n  searchByCategoryHidden(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show_hidden = this.applyCategoryFilter(this.list_product_hidden, value);\r\n    this.list_show_product_hidden = this.list_show_hidden;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo danh mục, nếu danh mục là '1' thì trả về tất cả sản phẩm, nếu không thì lọc theo id_category truyền vào\r\n   * @param products\r\n   * @param categoryId\r\n   * @returns\r\n   */\r\n  applyCategoryFilter(products: any[], categoryId: string): any[] {\r\n    return categoryId === '1'\r\n      ? products\r\n      : products.filter(item => item.id_category === categoryId);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh mục theo tên\r\n   * @param value\r\n   */\r\n  search(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length) {\r\n      this.list_category = this.vhAlgorithm.searchList(tempVal, this.list_search_category, ['name']);\r\n    }\r\n    else {\r\n      this.list_category = this.list_search_category;\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list']);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd/MM/yyyy HH:mm\");\r\n  }\r\n\r\n\r\n\r\n  //** hàm sort cho các cột */\r\n  name_col = false;          // chọn sort cột tên sản phẩm\r\n  unit_col = false;             // Chọn sắp xếp theo đơn vị\r\n  barcode_col = false;          // Chọn sắp xếp theo barcode\r\n  name_category_col = false;     // Chọn sắp xếp theo tên danh mục\r\n  brand_col = false;            // Chọn sắp xếp theo chi nhánh\r\n  price_high_col = false;            // Chọn sắp xếp theo giá\r\n  sortTable(colName) {\r\n    let methodName = colName === 'price_high' ? 'sortNumberby' : 'sortVietnameseby';\r\n    let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n\r\n    this.list_show_product = this.vhAlgorithm[methodName + direction]([...this.list_show_product], colName);\r\n    this.list_show_product_not = this.vhAlgorithm[methodName + direction]([...this.list_show_product_not], colName);\r\n    this.list_show_product_hidden = this.vhAlgorithm[methodName + direction]([...this.list_show_product_hidden], colName);\r\n  }\r\n\r\n\r\n  listProductSelected = [];\r\n  selectedProducts: { [id: string]: boolean; } = {};\r\n  checkAll: boolean = false;\r\n\r\n  toggleSelectAllProduct(checked: boolean) {\r\n    this.checkAll = checked;\r\n    this.listProductSelected = [];\r\n    const selected = this.selectedProducts;\r\n\r\n    for (const product of this.list_show_product) {\r\n      const subs = product.subs;\r\n      if (subs && subs.length > 0) {\r\n        for (const sub of subs) {\r\n          selected[sub._id] = checked;\r\n          if (checked) this.listProductSelected.push(sub);\r\n        }\r\n      } else {\r\n        selected[product._id] = checked;\r\n        if (checked) this.listProductSelected.push(product);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkProductToHidden(bool: boolean, product: any) {\r\n    const id = product._id;\r\n    this.selectedProducts[id] = bool;\r\n\r\n    if (bool) {\r\n      this.listProductSelected.push(product);\r\n    } else {\r\n      const idSet = new Set([id]);\r\n      this.listProductSelected = this.listProductSelected.filter(item => {\r\n        return !idSet.has(item._id);\r\n      });\r\n    }\r\n\r\n    let total = 0;\r\n    let selectedCount = 0;\r\n\r\n    for (const product of this.list_show_product) {\r\n      const subs = product.subs;\r\n      if (subs && subs.length > 0) {\r\n        total += subs.length;\r\n        for (const sub of subs) {\r\n          if (this.selectedProducts[sub._id]) selectedCount++;\r\n        }\r\n      } else {\r\n        total++;\r\n        if (this.selectedProducts[product._id]) selectedCount++;\r\n      }\r\n    }\r\n\r\n    this.checkAll = total === selectedCount;\r\n  }\r\n\r\n  async handleUpdateDeleteHidden() {\r\n\r\n    //Hiển thị modal xác nhận\r\n    const confirmed = await new Promise<boolean>((resolve) => {\r\n      this.modalService.confirm({\r\n        nzTitle: this.languageService.translate(\"Confirm\"),\r\n        nzContent: this.languageService.translate(\"Confirm to hidden product?\"),\r\n        nzOkText: this.languageService.translate(\"Yes\"),\r\n        nzCancelText: this.languageService.translate(\"No\"),\r\n        nzOnOk: () => resolve(true),\r\n        nzOnCancel: () => resolve(false)\r\n      });\r\n    });\r\n\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n\r\n    //Hiển thị loading\r\n    await this.vhComponent.showLoading('');\r\n\r\n    //Cập nhật delete_hidden\r\n    const updateTasks: Promise<any>[] = [];\r\n    for (const product of this.listProductSelected) {\r\n      const payload = { delete_hidden: !product.delete_hidden };\r\n      if (product.manysize !== undefined) {\r\n        updateTasks.push(this.vhQuerySales.updateProduct(product._id, payload));\r\n      } else {\r\n        updateTasks.push(this.vhQuerySales.updateSubProduct(product._id, payload));\r\n      }\r\n    }\r\n\r\n    try {\r\n      await Promise.all(updateTasks);\r\n\r\n      this.listProductSelected = [];\r\n      this.selectedProducts = {};\r\n\r\n      this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n    } catch (error) {\r\n      console.error(\"Update failed:\", error);\r\n      this.vhComponent.alertMessageDesktop(\"error\", 'Cập nhật thất bại, vui lòng thử lại !');\r\n    } finally {\r\n      this.vhComponent.hideLoading(0);\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"hidden-product\" class=\"height-layout\">\r\n  <div nz-row class=\"hidden-product-header\">\r\n    <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n      <b>{{'Hidden products' | translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input #box [value]=\"stateObj.keySearch\" type=\"text\" nz-input\r\n          [placeholder]=\"'Search for product name, barcode, item code' | translate\"\r\n          (keyup)=\"searchProducts(box.value); stateObj.tab === 1 ? searchProductsHidden(box.value) : '';\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n      <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\" nzBorderless\r\n        [(ngModel)]=\"stateObj.selectedValue\"\r\n        (ngModelChange)=\"searchByCategory($event); stateObj.tab === 1 ? searchByCategoryHidden($event) : '';\">\r\n        <nz-option *ngFor=\"let option of list_category\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\"></nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <div *ngIf=\"stateObj.tab !== 1\">\r\n        <button [disabled]=\"listProductSelected.length === 0\" class=\"btn-add\" nz-button nzType=\"default\" (click)=\"handleUpdateDeleteHidden()\">\r\n          {{'Hidden products' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"stateObj.tab\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <!-- Tab Cho bán -->\r\n      <nz-tab nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n        <nz-table class=\"allow-sales\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n          [(nzPageIndex)]=\"stateObj.nzPageIndex\" [nzScroll]=\"{ y: heightScroll }\" #allowSale nzShowPagination\r\n          nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_show_product\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <!-- <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th> -->\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzAlign=\"center\" nzWidth=\"12%\">\r\n                <b>{{\"Select\" | translate}}</b>\r\n                <label style=\"margin-left: 8px;\" class=\"product-item-checkbox\" nz-checkbox [(ngModel)]=\"checkAll\" (ngModelChange)=\"toggleSelectAllProduct($event)\"></label>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <ng-container *ngFor=\"let data of allowSale.data\">\r\n              <tr style=\"cursor: pointer;\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small\r\n                    style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <!-- <td>{{ data.brand }}</td> -->\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n                <td nzAlign=\"center\">\r\n                  <!-- <label *ngIf=\"!data.manysize\" [ngModel]=\"selectedBills[bill.order_sn]\"\r\n                    (ngModelChange)=\"checkBillToCreateInvoice($event,bill)\" class=\"product-item-checkbox\" nz-checkbox>\r\n                  </label> -->\r\n                  <label *ngIf=\"!data.manysize\" class=\"product-item-checkbox\" [ngModel]=\"selectedProducts[data._id]\"\r\n                    (ngModelChange)=\"checkProductToHidden($event,data)\" nz-checkbox>\r\n                  </label>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <tr *ngFor=\"let sub of data.subs\">\r\n                  <td></td>\r\n                  <td></td>\r\n                  <td style=\"color: var(--ion-color-vh-green);\">{{ sub.name }}<br><small\r\n                      style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                  <td (click)=\"$event.stopPropagation()\">\r\n                    <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                      <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                      </nz-option>\r\n                    </nz-select>\r\n                  </td>\r\n                  <td>\r\n                    {{ sub.unit_exchange?.barcode }}\r\n                  </td>\r\n                  <td>{{ data.name_category }}</td>\r\n                  <!-- <td>{{ data.brand }}</td> -->\r\n                  <td class=\"money-right\">\r\n                    {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                  </td>\r\n                  <td nzAlign=\"center\">\r\n                    <!-- <label *ngIf=\"!data.manysize\" [ngModel]=\"selectedBills[bill.order_sn]\"\r\n                      (ngModelChange)=\"checkBillToCreateInvoice($event,bill)\" class=\"product-item-checkbox\" nz-checkbox>\r\n                    </label> -->\r\n                    <label [ngModel]=\"selectedProducts[sub.id_subproduct ? sub.id_subproduct : sub._id]\" (ngModelChange)=\"checkProductToHidden($event,sub)\" class=\"product-item-checkbox\" nz-checkbox>\r\n                    </label>\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n\r\n\r\n      <!-- Tab Đã ẩn -->\r\n      <nz-tab [nzTitle]=\"'Hidden not allow sell' | translate \">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product_hidden.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #productHidden nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\"\r\n          [nzData]=\"list_show_product_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right' (click)=\"price_high_col = !price_high_col; sortTable('price_high')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!productHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"9\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <ng-container *ngFor=\"let data of productHidden.data\">\r\n              <tr style=\"cursor: pointer;\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small\r\n                    style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <td>{{ data.brand }}</td>\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n                <td class=\"money-right\">\r\n                  <nz-switch *ngIf=\"!data.manysize\" [(ngModel)]=\"data.delete_hidden\"\r\n                    (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                  </nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <ng-container *ngFor=\"let sub of data.subs\">\r\n                  <tr>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">{{\r\n                      sub.name }} <span *ngIf=\"sub.delete_hidden\">({{ 'Hidden' | translate }})</span><br><small\r\n                        style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                    <td (click)=\"$event.stopPropagation()\">\r\n                      <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                        <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\"></nz-option>\r\n                      </nz-select>\r\n                    </td>\r\n                    <td>\r\n                      {{ sub.unit_exchange?.barcode }}\r\n                    </td>\r\n                    <td>{{ data.name_category }}</td>\r\n                    <td>{{ data.brand }}</td>\r\n                    <td class=\"money-right\"\r\n                      [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">\r\n                      {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                    </td>\r\n                    <td class=\"money-right\">\r\n                      <nz-switch [(ngModel)]=\"sub.delete_hidden\"\r\n                        (ngModelChange)=\"updateProductByField(sub._id,{delete_hidden: sub.delete_hidden},data, true)\">\r\n                      </nz-switch>\r\n                    </td>\r\n                  </tr>\r\n                </ng-container>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-lot-list-update',\r\n  templateUrl: './lot-list-update.component.html',\r\n  styleUrls: ['./lot-list-update.component.scss']\r\n})\r\n/** component này để thêm xóa sửa danh sách lô đã tạo của sp */\r\nexport class LotListUpdateComponent implements OnInit {\r\n  @Input() id_sub_or_product: string = '';\r\n  @Input() show_lot_list: boolean = false;\r\n  data: any[];\r\n  @Output(\"close\") close = new EventEmitter<any>();\r\n  public formLots = this.formBuilderfb.group({                       // Form thêm đơn vị quy đổi\r\n    lots: this.formBuilderfb.array([], Validators.required)\r\n  })\r\n  public lotForm: FormGroup;\r\n  formAddLot: FormGroup;\r\n  show_modal_add_lot = false;\r\n  is_change_to_update = false\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private readonly formBuilderfb: FormBuilder,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private functionService: FunctionService\r\n  ) {\r\n\r\n  }\r\n  ngOnInit(): void {\r\n    this.data = this.vhQuerySales.getlocalDetailProduct(this.id_sub_or_product).lots;\r\n    this.initAddLotsForm(this.data)\r\n  }\r\n\r\n  initAddLotsForm(data) {\r\n    if (data.length > 0) {\r\n      for (let i = 0; i < data.length; i++) { //  đơn vị quy đổi\r\n        this.addLots(data[i])\r\n      }\r\n    }\r\n    \r\n\r\n  }\r\n\r\n  /**\r\n   * gán dữ liệu lô vào form để dể xử lý\r\n   */\r\n  addNewLots() {\r\n    this.show_modal_add_lot = true;\r\n    this.formAddLot = new FormGroup({\r\n      date_mfg: new FormControl(new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n      date_exp: new FormControl(new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n      lot_number: new FormControl('', Validators.compose([Validators.required])),\r\n      hidden: new FormControl(false),\r\n      barcode: new FormControl(''),\r\n    })\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok modal thêm lô\r\n   * @example this.handleOkNewLot()\r\n   */\r\n  handleOkNewLot() {\r\n    if (!this.exist_barcode_add) {\r\n      \r\n      \r\n      this.vhQuerySales.addLotProduct(this.id_sub_or_product, this.formAddLot.value)\r\n        .then((lot) => {\r\n          \r\n          this.addLots({ ...this.formAddLot.value, _id: lot })\r\n          this.show_modal_add_lot = false;\r\n          this.is_change_to_update = true\r\n        }, error => {\r\n          \r\n        })\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode này đã tồn tại\"))\r\n  }\r\n\r\n  // get mãng lô quy đổi\r\n  get lots() {\r\n    return this.formLots.controls[\"lots\"] as FormArray;\r\n  }\r\n  // thêm lô quy đổi\r\n  addLots(lot?) {\r\n    this.lotForm = this.formBuilderfb.group({\r\n      date_mfg: new FormControl(lot ? new Date(lot.date_mfg) : new Date(new Date().setHours(0, 0, 0,)), Validators.compose([Validators.required])),\r\n      date_exp: new FormControl(lot ? new Date(lot.date_exp) : new Date(new Date().setHours(23, 59, 59,)), Validators.compose([Validators.required])),\r\n      lot_number: new FormControl(lot ? lot.lot_number : '', Validators.compose([Validators.required])),\r\n      hidden: new FormControl(lot ? lot.hidden : false),\r\n      barcode: new FormControl(lot ? lot.barcode : ''),\r\n      _id: new FormControl(lot ? lot._id : null),\r\n    })\r\n    this.lots.push(this.lotForm);\r\n  }\r\n\r\n  /**\r\n   * cập nhật mã lô lên DB\r\n   * @param id \r\n   * @param value \r\n   */\r\n  updateLotNumber(id, value) {\r\n    if (this.exist_lot_number && this.checkLotNumber(value)) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Lot number already exists\"))\r\n    } else {\r\n      this.updateLotProduct(id, { lot_number: value })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cập nhật barcode lô lên DB\r\n   * @param id \r\n   * @param value \r\n   */\r\n  updateBarcode(id, value) {\r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode already exists\"))\r\n    } else {\r\n      this.updateLotProduct(id, { barcode: value })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cập nhật các trường khác của lô lên DB\r\n   * @param id \r\n   * @param value \r\n   */\r\n  updateLotProduct(id, value) {\r\n    this.vhQuerySales.updateLotProduct(this.id_sub_or_product, id, value)\r\n      .then((bool) => {\r\n        \r\n        if (!bool) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Cập nhật thất bại\"))\r\n      }, error => {  })\r\n  }\r\n  // xóa đơn vị quy đổi\r\n  deleteLots(index: number, id_lotproduct) {\r\n\r\n    this.vhQuerySales.deleteLotProduct(this.id_sub_or_product, id_lotproduct)\r\n      .then((rsp: any) => {\r\n        \r\n\r\n        if (rsp.vcode === 0) {\r\n          this.lots.removeAt(index)\r\n          this.is_change_to_update = true\r\n        } else if (rsp.vcode === 1) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Bạn không thể xóa, vì lô sản phẩm này không tồn tại\"))\r\n        } else if (rsp.vcode === 2) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Bạn không thể xóa, vì lô sản phẩm này đã phát sinh hóa đơn\"))\r\n        }\r\n      }, error => {\r\n        \r\n\r\n      })\r\n  }\r\n  /**\r\n   * kiểm tra ngày sx và ngày hh hợp lệ\r\n   * @param formAddLot \r\n   */\r\n  changeDate(formAddLot) {\r\n    this.is_change_to_update = true\r\n    if (new Date(formAddLot.value.date_mfg).getTime() >= new Date(formAddLot.value.date_exp).getTime()) {\r\n      formAddLot.control['date_exp'].setValue(new Date(new Date(formAddLot.value.date_mfg).setHours(23, 59, 59)))\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n    }\r\n    else {\r\n      this.updateLotProduct(formAddLot.value._id, { date_exp: formAddLot.value.date_exp, date_mfg: formAddLot.value.date_mfg })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * đóng component\r\n   */\r\n  okLots() {\r\n    // \r\n    // \r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Barcode already exists\"))\r\n    }\r\n    else {\r\n      if (this.is_change_to_update) {\r\n        let invalid_lot = this.lots.value.filter(item => new Date(item.date_exp).getTime() <= new Date(new Date(item.date_mfg)).getTime())\r\n        if (invalid_lot.length) {\r\n          this.vhComponent.alertMessageDesktop(\"error\", invalid_lot[0].lot_number + ' ' + this.lang.translate(\"Staring date must be less than or the same as ending date\"))\r\n        }\r\n        else {\r\n          let data = this.lots.value.filter(item => item.lot_number != '' && new Date(item.date_exp).getTime() >= new Date(new Date(item.date_mfg)).getTime())\r\n          \r\n\r\n          this.close.emit(data);\r\n        }\r\n      }\r\n      else this.close.emit(null);\r\n    }\r\n  }\r\n\r\n  nzclose() {\r\n    this.okLots()\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động\r\n   * @returns string\r\n   * @example let barcode = this.createBarcodeAuto()\r\n   */\r\n  createBarcodeAuto() {\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10)\r\n    }\r\n    let detailproduct = this.vhQuerySales.getlocalDetailProduct_byBarcode(newbarcode)\r\n    if (detailproduct == null) {\r\n      return newbarcode\r\n    }\r\n  }\r\n\r\n  /**\r\n   * tạo barcode tự động cho lô đã thêm\r\n   * @param position \r\n   */\r\n  setBarcodeForUnit(position) {\r\n    (this.lots.at(position) as FormGroup).get('barcode').setValue(this.createBarcodeAuto());\r\n    document.getElementById('barcodeError' + position).style.display = 'none';\r\n    this.is_change_to_update = true\r\n    this.updateBarcode(this.lotForm.value._id, this.lotForm.value.barcode)\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * tạo barcode tự động cho lô thêm mới\r\n   * @param position \r\n   */\r\n  setBarcodeForNewLot() {\r\n    this.formAddLot.controls['barcode'].setValue(this.createBarcodeAuto());\r\n  }\r\n\r\n  barcode_exist = false;\r\n  /**\r\n   * kiểm tra barcode đã tồn tại hay chưa\r\n   * @param barcode \r\n   * @param position vị trí của lô trong mảng để làm css nếu trùng\r\n   * @example this.checkBarcode('123456789',1) \r\n   */\r\n  checkBarcode(barcode, position) {\r\n    this.is_change_to_update = true\r\n    if (barcode.length) {\r\n      if (this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)) {\r\n        this.barcode_exist = true;\r\n        document.getElementById('barcodeError' + position).style.display = 'block';\r\n        return;\r\n      }\r\n      else {\r\n        const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n        if (lotsNotPosition.length) {\r\n          lotsNotPosition.forEach(element => {\r\n            if (element.barcode != barcode) {\r\n              this.barcode_exist = false;\r\n              document.getElementById('barcodeError' + position).style.display = 'none';\r\n              return\r\n            } else {\r\n              this.barcode_exist = true;\r\n              document.getElementById('barcodeError' + position).style.display = 'block';\r\n              return;\r\n            }\r\n          })\r\n        } else {\r\n          this.barcode_exist = false;\r\n          document.getElementById('barcodeError' + position).style.display = 'none';\r\n          return\r\n        }\r\n      }\r\n    } else {\r\n      this.barcode_exist = false;\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      return\r\n    }\r\n  }\r\n\r\n\r\n  lot_number_exist = false;\r\n  //  kiểm tra đơn vị khi thêm\r\n  checkNameUnit(lot: string, position: number) {\r\n    this.is_change_to_update = true\r\n    if (lot.length) {\r\n      const lotsNotPosition: any[] = this.lots.value.filter((item, index) => index != position)\r\n      if (lotsNotPosition.length) {\r\n        lotsNotPosition.forEach(element => {\r\n          if (element.lot_number != lot) {\r\n            document.getElementById('lotError' + position).style.display = 'none';\r\n            this.lot_number_exist = false;\r\n            return\r\n          } else {\r\n            document.getElementById('lotError' + position).style.display = 'block';\r\n            this.lot_number_exist = true;\r\n            return;\r\n          }\r\n        })\r\n      } else {\r\n        document.getElementById('lotError' + position).style.display = 'none';\r\n        this.lot_number_exist = false;\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  exist_lot_number = false;\r\n  checkLotNumber(lot) {\r\n    this.exist_lot_number = this.functionService.checkExitsLotNumber(lot)\r\n    return this.functionService.checkExitsLotNumber(lot)\r\n  }\r\n  exist_barcode_add = false;\r\n  checkBarcodeAdd(barcode) {\r\n    if (this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)) {\r\n      this.exist_barcode_add = true;\r\n    }\r\n    else this.exist_barcode_add = false;\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"1000\" nzTitle='{{\"List of lots\" | translate}}' [nzVisible]=\"show_lot_list\"\r\n    [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"nzclose()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"formLots\">\r\n            <div *ngIf=\"lots.length == 0\" style=\"text-align:center\">\r\n                <span>{{'No data'|translate}}</span>\r\n                <button class=\"btn-add\" style=\"margin: auto;\" nz-button nzType=\"default\" (click)=\"addNewLots()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"\r\n                        style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                    {{'Create lot' | translate}}\r\n                </button>\r\n            </div>\r\n            <ng-container formArrayName=\"lots\" *ngIf=\"lots.length > 0\">\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Lot number' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Date of manufacture' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"5\">\r\n                        <div class='label'><b>{{'Expiration date' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Stop using' | translate}}</b></div>\r\n                    </div>\r\n                </div>\r\n                <div *ngFor=\"let lotForm of lots.controls; let i = index\">\r\n                    <form nz-row [formGroup]=\"lotForm\" style=\"padding-bottom: 8px\" [nzGutter]=\"24\">\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                                style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                <i (click)=\"$event.stopPropagation()\" nz-popconfirm\r\n                                    nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\"\r\n                                    (nzOnConfirm)=\"deleteLots(i,lotForm.value._id)\" nzPopconfirmPlacement=\"topLeft\"\r\n                                    style=\"color: var(--ion-color-vh-red); cursor: pointer;\" nz-icon nzType=\"close\"\r\n                                    nzTheme=\"outline\"></i>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <input nz-input formControlName=\"lot_number\" [id]=\"'lot'+i\"\r\n                                    placeholder=\"{{ 'Enter lot number'| translate}}\" #lot\r\n                                    (keyup)=\"checkNameUnit(lot.value,i)\" (blur)=\"updateLotNumber(lotForm.value._id, lotForm.value.lot_number)\"/>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <nz-date-picker formControlName=\"date_exp\" (ngModelChange)=\"changeDate(lotForm)\">\r\n                                </nz-date-picker>\r\n                            </div>\r\n\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div\r\n                                    style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                    <input nz-input formControlName=\"barcode\" (blur)=\"updateBarcode(lotForm.value._id, lotForm.value.barcode)\"\r\n                                        (keyup)=\"checkBarcode(lotForm.value.barcode,i)\" />\r\n                                    <i style=\"padding-left: 8px; cursor: pointer;\" nz-icon nzType=\"reload\"\r\n                                        nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip\r\n                                        nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                                        nzTooltipPlacement=\"bottom\"></i>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <nz-switch formControlName=\"hidden\"  (ngModelChange)=\"updateLotProduct(lotForm.value._id, {hidden: lotForm.value.hidden})\"></nz-switch>\r\n                            </div>\r\n\r\n                        </ng-container>\r\n                        <ng-container>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                                style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                <div class=\"validation-errors\" [id]=\"'lotError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Please enter lot number'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"5\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\">\r\n                                <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                                    <ng-container>\r\n                                        <div class=\"error-message\">\r\n                                            <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                                            </ion-text>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            </div>\r\n                        </ng-container>\r\n                    </form>\r\n                </div>\r\n                <div style=\"padding-top: 8px; float: right;\">\r\n                    <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addNewLots()\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"\r\n                            style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                        {{'Add lot' | translate}}\r\n                    </button>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddCustomer>\r\n        <div class=\"footerAddCustomer\" style=\"float: right\">\r\n            <!-- <button nz-button style=\"margin-right: 8px;\" (click)=\"nzclose()\">{{\"Cancel\" | translate}}</button> -->\r\n            <button nz-button (click)=\"okLots()\">{{\"Close\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n\r\n\r\n<nz-modal *ngIf=\"show_modal_add_lot\" [(nzVisible)]=\"show_modal_add_lot\" nzTitle=\"{{'Add new lot' | translate}}\"\r\n    [nzOkDisabled]=\"formAddLot.invalid\" (nzOnCancel)=\"show_modal_add_lot =false\" (nzOnOk)=\"handleOkNewLot()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"formAddLot\">\r\n            <div nz-row>\r\n                <div nz-col [nzSpan]=\"24\">\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Lot number' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input nz-input formControlName=\"lot_number\" placeholder=\"{{ 'Enter lot number'| translate}}\" #lot\r\n                                (keyup)=\"checkLotNumber(lot.value)\" />\r\n                            <ng-container *ngIf=\"exist_lot_number\"> <br> <span style=\"color:red;\">{{'This batch number already exists' | translate}}</span>\r\n                            </ng-container>\r\n\r\n                        </nz-form-control>\r\n\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Date of manufacture' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-date-picker formControlName=\"date_mfg\"></nz-date-picker>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-date-picker formControlName=\"date_exp\" (ngModelChange)=\"changeDate(formAddLot)\">\r\n                            </nz-date-picker>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                    <nz-form-item style=\"margin:0 0 8px;\">\r\n                        <nz-form-label [nzSpan]=\"24\"><b>{{'Barcode' | translate}}</b>\r\n                        </nz-form-label>\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input style=\"width: 95%;\" nz-input formControlName=\"barcode\" placeholder=\"{{ 'Enter barcode_' | translate}}\"\r\n                                #barcode (keyup)=\"checkBarcodeAdd(barcode.value)\" />\r\n                            <i style=\"padding-left: 8px; cursor: pointer;\" nz-icon nzType=\"reload\" nzTheme=\"outline\"\r\n                                (click)=\"setBarcodeForNewLot()\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i>\r\n                            <ng-container *ngIf=\"exist_barcode_add\"> <br> <span style=\"color:red;\">{{'This barcode already exists' | translate}}</span>\r\n                            </ng-container>\r\n                        </nz-form-control>\r\n                    </nz-form-item>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>","import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { combineLatest } from 'rxjs';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-products-list',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './products-list.component.html',\r\n  styleUrls: ['./products-list.component.scss']\r\n})\r\nexport class ProductsListComponent {\r\n  /** Danh sách sản phẩm hiển thị trong tab Cho bán */\r\n  list_show_product: any = [];\r\n  /** Danh sách sản phẩm hiển thị trong tab Không cho bán */\r\n  list_show_product_not: any = [];\r\n  list_subproduct: any = [];\r\n  list_product: any = [];\r\n  list_show: any = [];\r\n\r\n  /** Danh sách sản phẩm hiển thị trong tab Đã ẩn */\r\n  list_show_product_hidden: any = [];\r\n  list_subproduct_hidden: any = [];\r\n  list_product_hidden: any = [];\r\n  list_show_hidden: any = [];\r\n\r\n  /** Danh sách tất cả danh mục */\r\n  list_category: any = [];\r\n  /** Danh sách danh mục tìm kiếm */\r\n  list_search_category: any = [];\r\n  stateObj = {\r\n    /** Từ khoá tìm kiếm */\r\n    keySearch: '',\r\n    /** id của danh mục được chọn */\r\n    selectedValue: '1',\r\n    /** Tab được chọn */\r\n    tab: 0,\r\n    nzPageIndex: 1\r\n  };\r\n  observableAll: any;\r\n\r\n  management_product_tax: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').management_product_tax;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private datePipe: DatePipe,\r\n    private vhComponent: VhComponent,\r\n  ) {\r\n    if (this.router.getCurrentNavigation().extras.state) {\r\n      let stateObj = this.router.getCurrentNavigation().extras.state.stateObj;\r\n      this.stateObj.keySearch = stateObj.keySearch;\r\n      this.stateObj.selectedValue = stateObj.selectedValue;\r\n      this.stateObj.tab = stateObj.tab;\r\n      this.stateObj.nzPageIndex = stateObj.nzPageIndex;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    //xử lý category\r\n    this.list_category = this.vhQuerySales.getlocalCategorys(VhType.PRODUCT);\r\n    if (!this.list_category.some(item => item._id == '1')) {\r\n      this.list_category.unshift({ name: this.languageService.translate('All'), _id: '1' });\r\n    }\r\n    this.list_search_category = this.list_category;\r\n  }\r\n\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.doRefreshData();\r\n    if (this.stateObj.tab === 1) {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.observableAll.unsubscribe();\r\n  }\r\n\r\n\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-tabs-tab\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - document.querySelector(\".ant-tabs-tab\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**get data product, category */\r\n  doRefreshData() {\r\n    this.observableAll = combineLatest([\r\n      this.vhQuerySales.getObservableLocalProducts(VhType.PRODUCT)\r\n    ]).subscribe((result: any) => {\r\n      console.log('getObservableLocalProducts', result);\r\n      this.list_product = result[0].filter(item => {\r\n        // check subs\r\n        if (item.subs && item.subs.length) {\r\n          item.subs = item.subs.filter(sub => !sub.delete_hidden);\r\n          return item.subs.some(sub => !sub.delete_hidden);\r\n        }\r\n        else {\r\n          return !item.delete_hidden;\r\n        }\r\n      }).map(item => this.processProduct(item));\r\n      this.list_subproduct = this.vhAlgorithm.sortStringbyASC(this.list_product, 'name');\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProducts(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategory(this.stateObj.selectedValue);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Xử lí dữ liệu của sản phẩm (units, subproduct, name_category, ...)\r\n   * @param item\r\n   * @returns\r\n   */\r\n  processProduct(item: any): any {\r\n    let arr: any = [];  // sắp xếp subproduct theo tiền\r\n    if (item.manysize && item.subs.length) {\r\n      arr = this.vhAlgorithm.sortNumberbyASC(item.subs, 'price');\r\n      item['show_expand'] = false;\r\n      item.subs.forEach(element => {\r\n        if (element.units) {\r\n          element['unit_exchange'] = element.units.find(e => e.default ? e.default : e.ratio == 1);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (item.units) {\r\n        item['unit_exchange'] = item.units.find(e => e.default ? e.default : e.ratio == 1);\r\n        item['price_high'] = item.unit_exchange.price;\r\n      }\r\n    }\r\n    return {\r\n      ...item,\r\n      name_category: this.vhQuerySales.getlocalCategory(item.id_category) ? this.vhQuerySales.getlocalCategory(item.id_category).name : ''\r\n    };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * ẩn / hiện sản phẩm con\r\n   * @example this.renderSubProducts(product_selected)\r\n   */\r\n  renderSubProducts(data) {\r\n    data.show_expand = !data.show_expand;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi tab\r\n   * @example this.changeTab('1');\r\n   */\r\n  changeTab(value) {\r\n    this.stateObj.tab = value;\r\n    if (value == '1') {\r\n      this.getHiddenProducts();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * cập nhật sp theo trường truyền vào\r\n   * @example this.updateProductByField({name: ''})\r\n   */\r\n  updateProductByField(id, value, parent?, is_sub?) {\r\n    console.log('value', value);\r\n    console.log('id', id);\r\n    if (is_sub) {\r\n      this.vhQuerySales.updateSubProduct(id, value).then((res) => {\r\n        console.log(res);\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n        // kiểm tra nếu tất cả con đều false thì xóa khỏi mảng\r\n        if (parent.subs.filter(e => e.delete_hidden).length == 0) {\r\n          this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != parent._id);\r\n        }\r\n      }, error => {\r\n        console.log(error);\r\n      }).catch(e => {\r\n        console.log(e);\r\n      });\r\n    }\r\n    else {\r\n      this.vhQuerySales.updateProduct(id, value).then((res) => {\r\n        console.log(res);\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Update successfully\"), 2000);\r\n        if (!value.delete_hidden) {\r\n          this.list_product_hidden = this.list_product_hidden.filter(item => item._id != id);\r\n          this.list_show_product_hidden = this.list_show_product_hidden.filter(item => item._id != id);\r\n        }\r\n      }, error => {\r\n        console.log(error);\r\n      }).catch(e => {\r\n        console.log(e);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Lấy danh sách sản phẩm đã ẩn\r\n   */\r\n  getHiddenProducts() {\r\n    this.vhQuerySales.refreshLocalProducts_Delete_Hidden(VhType.PRODUCT).then(() => {\r\n      const hiddenProducts = this.vhQuerySales.getlocalProducts(VhType.PRODUCT).filter(item => {\r\n        // check subs\r\n        if (item.subs && item.subs.length) {\r\n          return item.subs.some(sub => sub.delete_hidden);\r\n        }\r\n        else {\r\n          return item.delete_hidden;\r\n        }\r\n      });\r\n\r\n      this.list_product_hidden = hiddenProducts.map(item => this.processProduct(item));\r\n      this.list_subproduct_hidden = this.vhAlgorithm.sortStringbyASC(this.list_product_hidden, 'name');\r\n      if (this.stateObj.keySearch) {\r\n        this.searchProductsHidden(this.stateObj.keySearch);\r\n      }\r\n      else {\r\n        this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo delete_hidden\r\n   */\r\n  filterByAllowSell() {\r\n    this.list_show_product = this.list_show.filter(item => item.delete_hidden == false || item.manysize);\r\n    // this.list_show_product_not = this.list_show.filter(item => item.allow_sell == false);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên và barcode\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProducts(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_product = this.applySearchFilter(this.list_subproduct, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n    this.searchByCategory(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm (tab đã ẩn) theo tên và barcode\r\n   * @param value giá trị tìm kiếm từ input\r\n   */\r\n  searchProductsHidden(value) {\r\n    this.stateObj.keySearch = value;\r\n    this.list_product_hidden = this.applySearchFilter(this.list_subproduct_hidden, this.stateObj.keySearch, ['name', 'barcode', 'item_code']);\r\n    this.searchByCategoryHidden(this.stateObj.selectedValue);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Tìm kiếm sản phẩm theo tên và barcode, nếu không có giá trị tìm kiếm thì trả về tất cả, ngược lại thì lọc theo tên và barcode\r\n   * @param products\r\n   * @param searchValue\r\n   * @param fields\r\n   * @returns\r\n   */\r\n  applySearchFilter(products: any[], searchValue: string, fields: string[]): any[] {\r\n    /** Danh sách sản phẩm và sub đồng cấp để search */\r\n    const productsToSearch = [];\r\n\r\n    // Duyệt qua danh sách sản phẩm và thêm vào danh sách productsToSearch để tìm kiếm\r\n    products.forEach(product => {\r\n      if (product.manysize) {\r\n        product.subs.forEach(sub => {\r\n          productsToSearch.push({...sub, id_product: product._id});\r\n        });\r\n      } else {\r\n        productsToSearch.push(product);\r\n      }\r\n    });\r\n\r\n    // Tìm kiếm\r\n    const productsSearched = searchValue\r\n      ? this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(searchValue.toLowerCase()), productsToSearch, fields)\r\n      : products;\r\n\r\n    // Lấy danh sách id của sản phẩm (sản phẩm chứa sub) được tìm thấy\r\n    const productsSearchedId = productsSearched.map(item => item.id_product ? item.id_product : item._id);\r\n\r\n    // Chỉ trả về sản phẩm có id trong danh sách đã tìm kiếm\r\n    return products.filter(item => {\r\n      if(searchValue && item.subs && item.subs.length) item.show_expand = true;\r\n      else item.show_expand = false;\r\n      return productsSearchedId.includes(item._id);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc sản phẩm theo danh mục sản phẩm\r\n   */\r\n  searchByCategory(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show = this.applyCategoryFilter(this.list_product, value);\r\n    this.filterByAllowSell();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc sản phẩm (tab đã ẩn) theo danh mục sản phẩm\r\n   */\r\n  searchByCategoryHidden(value) {\r\n    this.stateObj.selectedValue = value;\r\n    this.list_show_hidden = this.applyCategoryFilter(this.list_product_hidden, value);\r\n    this.list_show_product_hidden = this.list_show_hidden;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh sách sản phẩm theo danh mục, nếu danh mục là '1' thì trả về tất cả sản phẩm, nếu không thì lọc theo id_category truyền vào\r\n   * @param products\r\n   * @param categoryId\r\n   * @returns\r\n   */\r\n  applyCategoryFilter(products: any[], categoryId: string): any[] {\r\n    return categoryId === '1'\r\n      ? products\r\n      : products.filter(item => item.id_category === categoryId);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Lọc danh mục theo tên\r\n   * @param value\r\n   */\r\n  search(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length) {\r\n      this.list_category = this.vhAlgorithm.searchList(tempVal, this.list_search_category, ['name']);\r\n    }\r\n    else {\r\n      this.list_category = this.list_search_category;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  gotoAddProducts() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/add'], {\r\n      state: {\r\n        stateObj: this.stateObj\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  gotoProductDetail(data, isFromHidden?: boolean) {\r\n    const state = {\r\n      formProduct: data,\r\n      stateObj: this.stateObj\r\n    };\r\n    if (isFromHidden) {\r\n      state['isFromHidden'] = true;\r\n    }\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/edit'], {\r\n      state: state\r\n    });\r\n  }\r\n\r\n\r\n  gotoCreateDataProducts() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/create-data']);\r\n  }\r\n\r\n  gotoHiddenProducts() {\r\n    this.router.navigate(['/sales/dashboard/manage/products/products-list/hidden-product']);\r\n  }\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/products']);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xuất danh sách sản phẩm ra file excel và tải về\r\n   * @example this.exportListProduct()\r\n   */\r\n  exportListProduct() {\r\n    let productExcel: Array<any> = [];\r\n    this.list_product.forEach((product, index) => {\r\n      const category: any = this.vhQuerySales.getlocalCategory(product['id_category']);\r\n      if (!product.manysize) {\r\n        product.units.forEach(unit => {\r\n          let row: Object = new Object();\r\n          row[this.languageService.translate(\"_name\")] = product['name'];\r\n          row[this.languageService.translate(\"_item_code\")] = product['item_code'];\r\n          row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n          row[this.languageService.translate(\"_unit\")] = unit['unit'];\r\n          row[this.languageService.translate(\"_brand\")] = product['brand'];\r\n          if (this.management_product_tax) row[this.languageService.translate(\"_tax\")] = product['tax'] ? product['tax'] : 0;\r\n          row[this.languageService.translate(\"_price_import\")] = unit['price_import'];\r\n          row[this.languageService.translate(\"_price\")] = unit['price'];\r\n          row[this.languageService.translate(\"_price2\")] = unit['price2'];\r\n          row[this.languageService.translate(\"_barcode\")] = unit['barcode'];\r\n          row[this.languageService.translate(\"_warning_number\")] = product['warning_number'];\r\n          if (row) productExcel.push(row);\r\n        });\r\n      } else {\r\n        product.subs.forEach(subProduct => {\r\n          subProduct.units.forEach(unitsubProduct => {\r\n            let row: Object = new Object();\r\n            row[this.languageService.translate(\"_name\")] = product['name'] + ` (` + subProduct['name'] + `)`;\r\n            row[this.languageService.translate(\"_item_code\")] = subProduct['item_code'];\r\n            row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n            row[this.languageService.translate(\"_unit\")] = unitsubProduct['unit'];\r\n            row[this.languageService.translate(\"_brand\")] = product['brand'];\r\n            if (this.management_product_tax) row[this.languageService.translate(\"_tax\")] = product['tax'] ? product['tax'] : 0;\r\n            row[this.languageService.translate(\"_price_import\")] = unitsubProduct['price_import'];\r\n            row[this.languageService.translate(\"_price\")] = unitsubProduct['price'];\r\n            row[this.languageService.translate(\"_price2\")] = unitsubProduct['price2'];\r\n            row[this.languageService.translate(\"_barcode\")] = unitsubProduct['barcode'];\r\n            row[this.languageService.translate(\"_warning_number\")] = subProduct['warning_number'];\r\n            if (row) productExcel.push(row);\r\n          });\r\n        });\r\n      }\r\n      if (index == this.list_product.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xuất danh sách sản phẩm ra file excel và tải về\r\n   * @example this.exportListProduct()\r\n   */\r\n  exportListNotSubProduct() {\r\n    let productExcel: Array<any> = [];\r\n    this.list_product.forEach((product, index) => {\r\n      const category: any = this.vhQuerySales.getlocalCategory(product['id_category']);\r\n      if (!product.manysize) {\r\n        product.units.forEach(unit => {\r\n          let row: Object = new Object();\r\n          row[this.languageService.translate(\"_name\")] = product['name'];\r\n          row[this.languageService.translate(\"_item_code\")] = product['item_code'];\r\n          row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n          row[this.languageService.translate(\"_unit\")] = unit['unit'];\r\n          row[this.languageService.translate(\"_brand\")] = product['brand'];\r\n          if (this.management_product_tax) row[this.languageService.translate(\"_tax\")] = product['tax'] ? product['tax'] : 0;\r\n          row[this.languageService.translate(\"_price_import\")] = unit['price_import'];\r\n          row[this.languageService.translate(\"_price\")] = unit['price'];\r\n          row[this.languageService.translate(\"_price2\")] = unit['price2'];\r\n          row[this.languageService.translate(\"_barcode\")] = unit['barcode'];\r\n          row[this.languageService.translate(\"_warning_number\")] = product['warning_number'];\r\n          if (row) productExcel.push(row);\r\n        });\r\n      }\r\n      if (index == this.list_product.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list have not manysize\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n  * xuất danh sách sản phẩm có sub ra file excel và tải về\r\n  * @example this.exportListSubProduct()\r\n  */\r\n  exportListSubProduct() {\r\n    let productExcel: Array<any> = [];\r\n    this.list_product.forEach((product, index) => {\r\n      const category: any = this.vhQuerySales.getlocalCategory(product['id_category']);\r\n      if (product.manysize) {\r\n        product.subs.forEach(subProduct => {\r\n          subProduct.units.forEach(unitsubProduct => {\r\n            let row: Object = new Object();\r\n            row[this.languageService.translate(\"_name\")] = product['name'];\r\n            row[this.languageService.translate(\"_subname\")] = subProduct['name'];\r\n            row[this.languageService.translate(\"_item_code\")] = subProduct['item_code'];\r\n            row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n            row[this.languageService.translate(\"_unit\")] = unitsubProduct['unit'];\r\n            row[this.languageService.translate(\"_brand\")] = product['brand'];\r\n            if (this.management_product_tax) row[this.languageService.translate(\"_tax\")] = product['tax'] ? product['tax'] : 0;\r\n            row[this.languageService.translate(\"_price_import\")] = unitsubProduct['price_import'];\r\n            row[this.languageService.translate(\"_price\")] = unitsubProduct['price'];\r\n            row[this.languageService.translate(\"_price2\")] = unitsubProduct['price2'];\r\n            row[this.languageService.translate(\"_barcode\")] = unitsubProduct['barcode'];\r\n            row[this.languageService.translate(\"_warning_number\")] = subProduct['warning_number'];\r\n            if (row) productExcel.push(row);\r\n          });\r\n        });\r\n      }\r\n      if (index == this.list_product.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"Product list have manysize\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * xuất danh sách lô sản phẩm ra file excel và tải về\r\n   * @example this.exportListOfProductLot()\r\n   */\r\n  exportListOfProductLot() {\r\n    let productExcel: Array<any> = [];\r\n    this.list_product.forEach((product, index) => {\r\n      const category: any = this.vhQuerySales.getlocalCategory(product['id_category']);\r\n      if (!product.manysize) {\r\n        if (product.manylot) {\r\n          product.lots.forEach(lot => {\r\n            let row: Object = new Object();\r\n            row[this.languageService.translate(\"_name\")] = product['name'];\r\n            row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n            row[this.languageService.translate(\"_lot_number\")] = lot['lot_number'];\r\n            row[this.languageService.translate(\"_date_exp\")] = this.format_date(lot['date_exp']);\r\n            row[this.languageService.translate(\"_date_mfg\")] = this.format_date(lot['date_mfg']);\r\n            row[this.languageService.translate(\"_lot_barcode\")] = lot['barcode'];\r\n            if (row) productExcel.push(row);\r\n          });\r\n        }\r\n      } else {\r\n        product.subs.forEach(subProduct => {\r\n          if (subProduct.manylot) {\r\n            subProduct.lots.forEach(lot => {\r\n              let row: Object = new Object();\r\n              row[this.languageService.translate(\"_name\")] = product['name'] + ` (` + subProduct['name'] + `)`;\r\n              row[this.languageService.translate(\"_category\")] = category ? category['name'] : '';\r\n              row[this.languageService.translate(\"_lot_number\")] = lot['lot_number'];\r\n              row[this.languageService.translate(\"_date_exp\")] = this.format_date(lot['date_exp']);\r\n              row[this.languageService.translate(\"_date_mfg\")] = this.format_date(lot['date_mfg']);\r\n              row[this.languageService.translate(\"_lot_barcode\")] = lot['barcode'];\r\n              if (row) productExcel.push(row);\r\n            });\r\n          }\r\n        });\r\n      }\r\n      if (index == this.list_product.length - 1) {\r\n        this.vhAlgorithm.exportXLSX(productExcel, this.languageService.translate(\"List of product batches\"));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd/MM/yyyy HH:mm\");\r\n  }\r\n\r\n\r\n\r\n  //** hàm sort cho các cột */\r\n  name_col = false;          // chọn sort cột tên sản phẩm\r\n  unit_col = false;             // Chọn sắp xếp theo đơn vị\r\n  barcode_col = false;          // Chọn sắp xếp theo barcode\r\n  name_category_col = false;     // Chọn sắp xếp theo tên danh mục\r\n  brand_col = false;            // Chọn sắp xếp theo chi nhánh\r\n  price_high_col = false;            // Chọn sắp xếp theo giá\r\n  sortTable(colName) {\r\n    let methodName = colName === 'price_high' ? 'sortNumberby' : 'sortVietnameseby';\r\n    let direction = this[colName + '_col'] ? 'ASC' : 'DESC';\r\n\r\n    this.list_show_product = this.vhAlgorithm[methodName + direction]([...this.list_show_product], colName);\r\n    this.list_show_product_not = this.vhAlgorithm[methodName + direction]([...this.list_show_product_not], colName);\r\n    this.list_show_product_hidden = this.vhAlgorithm[methodName + direction]([...this.list_show_product_hidden], colName);\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n  <div nz-row class=\"product-list-header\">\r\n    <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n      <b>{{'Products list' | translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n        <input #box [value]=\"stateObj.keySearch\" type=\"text\" nz-input\r\n          [placeholder]=\"'Search for product name, barcode, item code' | translate\"\r\n          (keyup)=\"searchProducts(box.value); stateObj.tab === 1 ? searchProductsHidden(box.value) : '';\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n      <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\" nzBorderless\r\n        [(ngModel)]=\"stateObj.selectedValue\"\r\n        (ngModelChange)=\"searchByCategory($event); stateObj.tab === 1 ? searchByCategoryHidden($event) : '';\">\r\n        <nz-option *ngFor=\"let option of list_category\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\"></nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n      <div>\r\n        <button class=\"btn-data\" nz-button nzType=\"default\" (click)=\"gotoHiddenProducts()\">\r\n          {{'Hidden products' | translate}}\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button nz-dropdown [nzDropdownMenu]=\"menu\" class=\"btn-data center-all-content\" nz-button nzType=\"default\">\r\n          <i nz-icon nzType=\"export\" nzTheme=\"outline\"></i>\r\n          {{'Export data'|translate}}</button>\r\n        <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n          <ul nz-menu>\r\n            <li nz-menu-item (click)=\"exportListProduct()\">{{'Export all product data' | translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListNotSubProduct()\">{{'Export data of products WITHOUT ATTRIBUTES' |\r\n              translate}}</li>\r\n            <li nz-menu-item (click)=\"exportListSubProduct()\">{{'Export data of products WITH ATTRIBUTES' | translate}}\r\n            </li>\r\n            <li nz-menu-item (click)=\"exportListOfProductLot()\">{{'Export batch product data' | translate}}</li>\r\n          </ul>\r\n        </nz-dropdown-menu>\r\n      </div>\r\n      <div>\r\n        <button class=\"btn-data\" nz-button nzType=\"default\" (click)=\"gotoCreateDataProducts()\">\r\n          <i nz-icon nzType=\"appstore-add\" nzTheme=\"outline\"></i>\r\n          {{'Create data' | translate}}\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAddProducts()\">\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n          {{'Add' | translate}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <nz-tabset [(nzSelectedIndex)]=\"stateObj.tab\" (nzSelectChange)=\"changeTab($event.index)\">\r\n      <!-- Tab Cho bán -->\r\n      <nz-tab nzTitle=\"{{'Allow sale' | translate}}\">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n        <nz-table class=\"allow-sales\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\"\r\n          [(nzPageIndex)]=\"stateObj.nzPageIndex\" [nzScroll]=\"{ y: heightScroll }\" #allowSale nzShowPagination\r\n          nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_show_product\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <ng-container *ngFor=\"let data of allowSale.data\">\r\n              <tr style=\"cursor: pointer;\" (click)=\"gotoProductDetail(data)\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <td>{{ data.brand }}</td>\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <tr *ngFor=\"let sub of data.subs\">\r\n                  <td></td>\r\n                  <td></td>\r\n                  <td style=\"color: var(--ion-color-vh-green);\">{{ sub.name }}<br><small style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                  <td (click)=\"$event.stopPropagation()\">\r\n                    <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                      <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                      </nz-option>\r\n                    </nz-select>\r\n                  </td>\r\n                  <td>\r\n                    {{ sub.unit_exchange?.barcode }}\r\n                  </td>\r\n                  <td>{{ data.name_category }}</td>\r\n                  <td>{{ data.brand }}</td>\r\n                  <td class=\"money-right\">\r\n                    {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                  </td>\r\n                </tr>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n\r\n\r\n      <!-- Tab Đã ẩn -->\r\n      <nz-tab [nzTitle]=\"'Hidden not allow sell' | translate \">\r\n        <div nz-row class='total-item'>\r\n          {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_show_product_hidden.length}}&nbsp; </span> {{'products' | translate}}\r\n        </div>\r\n\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n          #productHidden nzShowPagination nzShowSizeChanger nzNoResult=\"{{'No data'| translate}}\"\r\n          [nzData]=\"list_show_product_hidden\">\r\n          <thead>\r\n            <tr>\r\n              <th nzWidth=\"3%\"><b></b></th>\r\n              <th nzWidth=\"10%\" nzAlign='center'><b>{{'Image' | translate}}</b></th>\r\n              <th nzWidth=\"24%\" (click)=\"name_col = !name_col; sortTable('name')\">\r\n                <b>{{'Product name' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"10%\">\r\n                <b>{{'Unit' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"unit_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\">\r\n                <b>{{'Barcode' | translate}}</b>\r\n                <!-- <i nz-icon [nzType]=\"barcode_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i> -->\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"name_category_col = !name_category_col; sortTable('name_category')\">\r\n                <b>{{'Category' | translate}}</b>\r\n                <i nz-icon [nzType]=\"name_category_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"12%\" (click)=\"brand_col = !brand_col; sortTable('brand')\">\r\n                <b>{{'Brand' | translate}}</b>\r\n                <i nz-icon [nzType]=\"brand_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right' (click)=\"price_high_col = !price_high_col; sortTable('price_high')\">\r\n                <b>{{'Selling price' | translate}}</b>\r\n                <i nz-icon [nzType]=\"price_high_col == true ? 'caret-down' : 'caret-up'\" nzTheme=\"outline\"></i>\r\n              </th>\r\n              <th nzWidth=\"17%\" nzAlign='right'>\r\n                <b>{{'Hidden not for sale' | translate}}</b>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- <tr *ngIf=\"!productHidden.data.length\" style=\"cursor: pointer;\">\r\n              <td colSpan=\"9\" nzAlign=\"center\" style=\"padding: 0;\">\r\n                <button nz-button nzType=\"primary\" (click)=\"getHiddenProducts()\">\r\n                  <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                  {{'View' | translate}}\r\n                </button>\r\n              </td>\r\n            </tr> -->\r\n            <ng-container *ngFor=\"let data of productHidden.data\">\r\n              <tr style=\"cursor: pointer;\">\r\n                <td>\r\n                  <i class=\"icon-expand\" *ngIf=\"data.manysize\"\r\n                    (click)=\"$event.stopPropagation(); renderSubProducts(data)\" nz-icon\r\n                    [nzType]=\"data.show_expand ? 'up' : 'down'\" nzTheme=\"outline\">\r\n                  </i>\r\n                </td>\r\n                <td style=\"padding: 0;\" nzAlign='center'>\r\n                  <img style=\"width: 36px;\" [src]=\"data.img ? data.img : './assets/icon/management/noimage.svg'\">\r\n                </td>\r\n                <td style=\"color: var(--ion-color-vh-green);\"><b>{{ data.name }}</b><br><small style=\"color: var(--ion-color-vh-gray);\">{{data.item_code}}</small></td>\r\n                <td (click)=\"$event.stopPropagation()\">\r\n                  <nz-select *ngIf=\"!data.manysize\" nzShowSearch [(ngModel)]=\"data.unit_exchange\">\r\n                    <nz-option *ngFor=\"let unit of data.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\">\r\n                    </nz-option>\r\n                  </nz-select>\r\n                </td>\r\n                <td>\r\n                  {{ data.unit_exchange ? data.unit_exchange.barcode :''}}\r\n                </td>\r\n                <td>{{ data.name_category }}</td>\r\n                <td>{{ data.brand }}</td>\r\n                <td class=\"money-right\">\r\n                  {{ !data.manysize ? vhAlgorithm.vhcurrencyunit_symbol(data.unit_exchange.price) : '' }}\r\n                </td>\r\n                <td class=\"money-right\">\r\n                  <nz-switch *ngIf=\"!data.manysize\" [(ngModel)]=\"data.delete_hidden\"\r\n                    (ngModelChange)=\"updateProductByField(data._id,{delete_hidden: data.delete_hidden})\">\r\n                  </nz-switch>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngIf=\"data.show_expand && data.manysize\">\r\n                <ng-container *ngFor=\"let sub of data.subs\">\r\n                  <tr>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">{{\r\n                      sub.name }} <span *ngIf=\"sub.delete_hidden\">({{ 'Hidden' | translate }})</span><br><small style=\"color: var(--ion-color-vh-gray);\">{{sub.item_code}}</small></td>\r\n                    <td (click)=\"$event.stopPropagation()\">\r\n                      <nz-select nzShowSearch [(ngModel)]=\"sub.unit_exchange\">\r\n                        <nz-option *ngFor=\"let unit of sub.units\" [nzLabel]=\"unit.unit\" [nzValue]=\"unit\"></nz-option>\r\n                      </nz-select>\r\n                    </td>\r\n                    <td>\r\n                      {{ sub.unit_exchange?.barcode }}\r\n                    </td>\r\n                    <td>{{ data.name_category }}</td>\r\n                    <td>{{ data.brand }}</td>\r\n                    <td class=\"money-right\"\r\n                      [style.color]=\"sub.delete_hidden ? 'var(--ion-color-vh-gray)' :'var(--ion-color-vh-green)'\">\r\n                      {{ vhAlgorithm.vhcurrencyunit_symbol(sub.unit_exchange?.price)}}\r\n                    </td>\r\n                    <td class=\"money-right\">\r\n                      <nz-switch  [(ngModel)]=\"sub.delete_hidden\"\r\n                        (ngModelChange)=\"updateProductByField(sub._id,{delete_hidden: sub.delete_hidden},data, true)\">\r\n                      </nz-switch>\r\n                    </td>\r\n                  </tr>\r\n                </ng-container>\r\n              </ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </div>\r\n</nz-layout>\r\n","import { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { VhComponent } from './../../../../components/vh-component/vh-component';\r\nimport { PrintOneColComponent } from './edit-product/print-one-col/print-one-col.component';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { DetailThreeColComponent } from './edit-product/detail-three-col/detail-three-col.component';\r\nimport { DetailComponent } from './edit-product/detail/detail.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddProductComponent } from './add-product/add-product.component';\r\nimport { EditProductComponent } from './edit-product/edit-product.component';\r\nimport { ProductsListComponent } from './products-list.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { CreateDataProductsComponent } from './create-data-products/create-data-products.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { PrintFourColComponent } from './edit-product/print-four-col/print-four-col.component';\r\nimport { PrintFiveColComponent } from './edit-product/print-five-col/print-five-col.component';\r\nimport { UnitsListComponent } from './units-list/units-list.component';\r\nimport { LotListComponent } from './lot-list/lot-list.component';\r\nimport { LotListUpdateComponent } from './lot-list-update/lot-list-update.component';\r\nimport { UnitsListUpdateComponent } from './units-list-update/units-list-update.component';\r\nimport { PrintOneColLotComponent } from './edit-product/print-one-col-lot/print-one-col-lot.component';\r\nimport { PrintTwoColLotComponent } from './edit-product/print-two-col-lot/print-two-col-lot.component';\r\nimport { PrintThreeColLotComponent } from './edit-product/print-three-col-lot/print-three-col-lot.component';\r\nimport { PrintFourColLotComponent } from './edit-product/print-four-col-lot/print-four-col-lot.component';\r\nimport { PrintFiveColLotComponent } from './edit-product/print-five-col-lot/print-five-col-lot.component';\r\nimport { HiddenProductComponent } from './hidden-product/hidden-product.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductsListComponent\r\n  },\r\n  {\r\n    path: 'add',\r\n    component:  AddProductComponent\r\n  },\r\n  {\r\n    path: 'edit',\r\n    component: EditProductComponent\r\n  },\r\n  {\r\n    path: 'hidden-product',\r\n    component: HiddenProductComponent\r\n  },\r\n  {\r\n    path: 'create-data',\r\n    component: CreateDataProductsComponent\r\n  },\r\n  {\r\n    path: 'print-two-col',\r\n    component:DetailComponent\r\n  },\r\n  {\r\n    path: 'print-three-col',\r\n    component:DetailThreeColComponent\r\n  },\r\n  {\r\n    path: 'print-one-col',\r\n    component:PrintOneColComponent\r\n  },\r\n  {\r\n    path: 'print-four-col',\r\n    component:PrintFourColComponent\r\n  },\r\n  {\r\n    path: 'print-five-col',\r\n    component:PrintFiveColComponent\r\n  },\r\n\r\n\r\n  {\r\n    path: 'print-two-col-lot',\r\n    component:PrintTwoColLotComponent\r\n  },\r\n  {\r\n    path: 'print-three-col-lot',\r\n    component:PrintThreeColLotComponent\r\n  },\r\n  {\r\n    path: 'print-one-col-lot',\r\n    component:PrintOneColLotComponent\r\n  },\r\n  {\r\n    path: 'print-four-col-lot',\r\n    component:PrintFourColLotComponent\r\n  },\r\n  {\r\n    path: 'print-five-col-lot',\r\n    component:PrintFiveColLotComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddProductComponent,\r\n    EditProductComponent,\r\n    ProductsListComponent,\r\n    CreateDataProductsComponent,\r\n    DetailComponent,DetailThreeColComponent,\r\n    PrintOneColComponent,\r\n    PrintFourColComponent,\r\n    PrintFiveColComponent,\r\n    UnitsListComponent,\r\n    LotListComponent,\r\n    LotListUpdateComponent,\r\n    UnitsListUpdateComponent,\r\n    PrintOneColLotComponent,\r\n    PrintTwoColLotComponent,\r\n    PrintThreeColLotComponent,\r\n    PrintFourColLotComponent,\r\n    PrintFiveColLotComponent,\r\n    HiddenProductComponent\r\n  ],\r\n    imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    DragDropModule,\r\n    ScrollingModule\r\n  ],\r\n})\r\nexport class ProductsListModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport {\r\n  FormArray,\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-units-list-update',\r\n  templateUrl: './units-list-update.component.html',\r\n  styleUrls: ['./units-list-update.component.scss'],\r\n})\r\n/** component này để thêm xóa sửa danh sách đơn vị đã tạo của sp */\r\nexport class UnitsListUpdateComponent implements OnInit {\r\n  unit_main: any;\r\n  @Input('showDrawerUnits') showDrawerUnits: boolean = false;\r\n  @Input('dataUnit') dataUnit: any;\r\n  @Input('dataUnits') dataUnits: any[];\r\n  @Output('closeUnits') closeUnits = new EventEmitter<any>();\r\n  ratio_default: number = 1;\r\n  public formUnits = this.formBuilderfb.group({\r\n    // Form thêm đơn vị quy đổi\r\n    units: this.formBuilderfb.array([], Validators.required),\r\n  });\r\n  public unitForm: FormGroup;\r\n  ratioError = true;\r\n  is_change_to_update = false;\r\n  management_product_price2: boolean =\r\n    this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch')\r\n      .management_product_price2;\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private formBuilderfb: FormBuilder,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.ratio_default = this.dataUnits.find((e) => e.default)\r\n      ? this.dataUnits.find((e) => e.default).ratio\r\n      : 1;\r\n    this.initAddUnitsForm(this.dataUnits);\r\n  }\r\n  ngAfterViewInit() {\r\n    for (let i = 0; i < this.units.value.length; i++) {\r\n      //  đơn vị quy đổi\r\n      if (this.units.value[i].ratio != 1) {\r\n        this.vhAlgorithm.vhnumeral('#' + 'price_units' + i);\r\n        if (this.management_product_price2) {\r\n          this.vhAlgorithm.vhnumeral('#' + 'price2_units' + i);\r\n        }\r\n        this.vhAlgorithm.vhnumeral('#' + 'priceImport_units' + i);\r\n      }\r\n    }\r\n  }\r\n\r\n  initAddUnitsForm(data) {\r\n    if (data.length > 0) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        //  đơn vị quy đổi\r\n        if (data[i].ratio != 1) this.addUnits(data[i]);\r\n        if (data[i].ratio == 1) this.unit_main = data[i];\r\n      }\r\n    }\r\n  }\r\n\r\n  // get mãng đơn vị quy đổi\r\n  get units() {\r\n    return this.formUnits.controls['units'] as FormArray;\r\n  }\r\n\r\n  // thêm đơn vị quy đổi\r\n  addUnits(unit?) {\r\n    this.unitForm = this.formBuilderfb.group({\r\n      unit: new FormControl(\r\n        unit ? unit.unit : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price: new FormControl(\r\n        unit ? unit.price : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price2: new FormControl(\r\n        unit ? unit.price2 : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      price_import: new FormControl(\r\n        unit ? unit.price_import : '',\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\r\n            '(^[0?=[.]] |^[^.,-][,0-9]*)(([.](?=[0-9]){1}[0-9]{0,5})|)'\r\n          ),\r\n        ])\r\n      ),\r\n      barcode: new FormControl(unit ? unit.barcode : ''),\r\n      ratio: new FormControl(unit ? unit.ratio : '', [Validators.required]),\r\n      default: new FormControl(unit ? unit.default : false, [\r\n        Validators.required,\r\n      ]),\r\n    });\r\n    this.units.push(this.unitForm);\r\n  }\r\n\r\n  // xóa đơn vị quy đổi\r\n  deleteUnits(index: number) {\r\n    this.units.removeAt(index);\r\n    this.is_change_to_update = true;\r\n    this.unit_main.default = true;\r\n    this.barcode_exist = false;\r\n    this.ratio_default = 1;\r\n  }\r\n\r\n  okUnits() {\r\n    // Kiểm tra barcode, unit, ratio có bị lỗi hay không\r\n\r\n    if (this.barcode_exist) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Barcode already exists')\r\n      );\r\n      return;\r\n    }\r\n    if (this.unit_exist) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Unit already exists')\r\n      );\r\n      return;\r\n    }\r\n    if (this.ratio_exist) {\r\n      this.vhComponent.alertMessageDesktop(\r\n        'error',\r\n        this.languageService.translate('Ratio already exists')\r\n      );\r\n      return;\r\n    } \r\n\r\n    if (this.is_change_to_update) {\r\n      this.dataUnits = this.units.value.filter(\r\n        (item) =>\r\n          item.unit != '' &&\r\n          typeof item.price == 'number' &&\r\n          typeof item.price2 == 'number' &&\r\n          typeof item.price_import == 'number' &&\r\n          item.ratio\r\n      );\r\n      if (this.unit_main) this.dataUnits.unshift(this.unit_main);\r\n      // thực hiện set default cho toàn bộ unit\r\n      this.dataUnits.forEach((unit) => {\r\n        if (unit.ratio == this.ratio_default) unit.default = true;\r\n        else unit.default = false;\r\n      });\r\n      setTimeout(() => {\r\n        this.closeUnits.emit(this.dataUnits);\r\n      }, 100);\r\n    } else this.closeUnits.emit(null);\r\n  }\r\n\r\n  close(success?) {\r\n    this.okUnits();\r\n  }\r\n\r\n  changeDefault() {\r\n    this.is_change_to_update = true;\r\n  }\r\n\r\n  setBarcodeForUnit(position) {\r\n    this.is_change_to_update = true;\r\n    let newbarcode = '';\r\n    for (let index = 0; index < 12; index++) {\r\n      newbarcode += Math.floor(Math.random() * 10);\r\n    }\r\n    let detailproduct =\r\n      this.vhQuerySales.getlocalDetailProduct_byBarcode(newbarcode);\r\n    if (detailproduct == null) {\r\n      (this.units.at(position) as FormGroup)\r\n        .get('barcode')\r\n        .setValue(newbarcode);\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n    } else {\r\n      document.getElementById('barcodeError' + position).style.display =\r\n        'block';\r\n    }\r\n  }\r\n\r\n  changeUnitsPrice(nameClass, position) {\r\n    this.is_change_to_update = true;\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n  changeUnitsPrice2(nameClass, position) {\r\n    this.is_change_to_update = true;\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price2')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n  changeUnitsPriceImport(nameClass, position) {\r\n    this.is_change_to_update = true;\r\n    let price = this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n    (this.units.at(position) as FormGroup)\r\n      .get('price_import')\r\n      .patchValue(parseFloat(price.getRawValue() ? price.getRawValue() : '0'));\r\n    this.vhAlgorithm.vhnumeral('#' + nameClass);\r\n  }\r\n\r\n\r\n\r\n  /** Có bị lỗi ratio đã tồn tại hay không */\r\n  ratio_exist = false;\r\n\r\n  /**\r\n   * Khi thay đổi ratio\r\n   * @param ratio \r\n   * @param position \r\n   */\r\n  changeUnitsRatio(ratio, position) {\r\n    this.is_change_to_update = true;\r\n    let value = parseFloat(ratio);\r\n    // Thực hiện lọc dữ liệu units khác với vị trí nhập hiện tại\r\n    // Và giá trị nhập vào phải khác với bất cứ giá trị Ratio nào trong mảng vừa lọc\r\n    //  Tồn tại mảng có chiều dài thì giá trị đó đã tồn tại\r\n    if (value == 1) {\r\n      document.getElementById('ratioError' + position).style.display = 'block';\r\n      this.ratio_exist = true;\r\n    } else {\r\n      const unitsDef: any[] = this.units.value.filter(\r\n        (item, index) => index != position\r\n      );\r\n      if (unitsDef.length) {\r\n        if (unitsDef.find((item) => item.ratio == value)) {\r\n          document.getElementById('ratioError' + position).style.display = 'block';\r\n          this.ratio_exist = true;\r\n        } else {\r\n          (this.units.at(position) as FormGroup).get('ratio').setValue(value);\r\n          document.getElementById('ratioError' + position).style.display = 'none';\r\n          this.ratio_exist = false;\r\n        }\r\n      } else {\r\n        document.getElementById('ratioError' + position).style.display = 'none';\r\n        this.ratio_exist = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode_exist = false;\r\n  checkBarcode(barcode, position) {\r\n    this.is_change_to_update = true;\r\n    if (barcode.length) {\r\n      if (this.vhQuerySales.getlocalDetailProduct_byBarcode(barcode)) {\r\n        this.barcode_exist = true;\r\n        document.getElementById('barcodeError' + position).style.display =\r\n          'block';\r\n        return;\r\n      } else {\r\n        const unitsNotPosition: any[] = this.units.value.filter(\r\n          (item, index) => index != position\r\n        );\r\n        if (unitsNotPosition.length) {\r\n          unitsNotPosition.forEach((element) => {\r\n            if (element.barcode != barcode) {\r\n              this.barcode_exist = false;\r\n              document.getElementById('barcodeError' + position).style.display =\r\n                'none';\r\n              return;\r\n            } else {\r\n              this.barcode_exist = true;\r\n              document.getElementById('barcodeError' + position).style.display =\r\n                'block';\r\n              return;\r\n            }\r\n          });\r\n        } else {\r\n          this.barcode_exist = false;\r\n          document.getElementById('barcodeError' + position).style.display =\r\n            'none';\r\n          return;\r\n        }\r\n      }\r\n    } else {\r\n      this.barcode_exist = false;\r\n      document.getElementById('barcodeError' + position).style.display = 'none';\r\n      return;\r\n    }\r\n  }\r\n\r\n\r\n  /** Có bị lỗi tên đơn vị đã tồn tại hay không */\r\n  unit_exist = false;\r\n\r\n  //  kiểm tra đơn vị khi thêm\r\n  checkNameUnit(unit: string, position: number) {\r\n    this.is_change_to_update = true;\r\n    if (unit.length) {\r\n      if (unit == this.dataUnit) {\r\n        document.getElementById('unitError' + position).style.display = 'block';\r\n        this.unit_exist = true;\r\n        return;\r\n      } else {\r\n        const unitsNotPosition: any[] = this.units.value.filter(\r\n          (item, index) => index != position\r\n        );\r\n        if (unitsNotPosition.length) {\r\n          unitsNotPosition.forEach((element) => {\r\n            if (element.unit != unit) {\r\n              document.getElementById('unitError' + position).style.display = 'none';\r\n              this.unit_exist = false;\r\n              return;\r\n            } else {\r\n              document.getElementById('unitError' + position).style.display = 'block';\r\n              this.unit_exist = true;\r\n              return;\r\n            }\r\n          });\r\n        } else {\r\n          document.getElementById('unitError' + position).style.display = 'none';\r\n          this.unit_exist = false;\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"'90vw'\" nzTitle='{{\"Đơn vị quy đổi\" | translate}}' [nzVisible]=\"showDrawerUnits\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"formUnits\">\r\n            <!-- <div *ngIf=\"units.length == 0\" style=\"text-align:center\">\r\n                <span>{{'No conversion unit' | translate}}</span>\r\n                <button class=\"btn-add\" style=\"margin: auto;\" nz-button nzType=\"default\" (click)=\"addUnits()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                    {{'Create unit' | translate}}\r\n                </button>\r\n            </div> -->\r\n            <ng-container formArrayName=\"units\"  >\r\n                <div nz-row [nzGutter]=\"24\">\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"1\"></div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Unit name' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"2\">\r\n                        <div class='label'><b>{{'Conversion ratio' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'Retail price' | translate}}*</b></div>\r\n                    </div>\r\n                    <div *ngIf=\"management_product_price2\" nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'_price2' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"4\">\r\n                        <div class='label'><b>{{'_price_import' | translate}}*</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row\" nzSpan=\"3\">\r\n                        <div class='label'><b>{{'Barcode' | translate}}</b></div>\r\n                    </div>\r\n                    <div nz-col class=\"gutter-row ion-text-end\" nzSpan=\"2\">\r\n                        <div class='label'><b>{{'Default' | translate}}</b></div>\r\n                    </div>\r\n                </div>\r\n                <nz-radio-group [(ngModel)]=\"ratio_default\" [ngModelOptions]=\"{standalone: true}\" (ngModelChange)=\"changeDefault()\" style=\"width: 100%;\">\r\n                    <div nz-row [nzGutter]=\"24\" style=\"padding-bottom: 8px; width: 100%;\" >\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"1\"\r\n                            style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                            <!-- <i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteUnits(i)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red); cursor: pointer;\" nz-icon nzType=\"close\" nzTheme=\"outline\"></i> -->\r\n\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ 'Enter unit name'| translate}}\"\r\n                                [value]=\"dataUnit.unit\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ 'Enter conversion ratio'| translate}}\"\r\n                                [value]=\"dataUnit.ratio\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{ vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price)\" />\r\n                        </div>\r\n                        <div *ngIf=\"management_product_price2\" class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price2)\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                            <input nz-input disabled placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\"\r\n                                [value]=\"vhAlgorithm.vhcurrencyunit(dataUnit.price_import)\" />\r\n                        </div>\r\n                        <div class=\"gutter-row\" nz-col nzSpan=\"3\">\r\n                            <div\r\n                                style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                <input nz-input disabled placeholder=\"{{ 'Enter barcode'| translate}}\"\r\n                                    [value]=\"dataUnit.barcode\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"gutter-row center-all-content\" nz-col nzSpan=\"2\" style=\"justify-content: flex-end !important\">\r\n                            <label nz-radio [nzValue]=\"1\"></label>\r\n                        </div>\r\n                    </div>\r\n                    <div *ngFor=\"let unitForm of units.controls; let i = index\" style=\"width: 100%;\">\r\n                        <form [formGroup]=\"unitForm\" style=\"width: 100%;\">\r\n                            <div nz-row [nzGutter]=\"24\" style=\"display: flex; padding-bottom: 8px; width: 100%;\">\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                    <i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Delete this unit?' | translate}}\" (nzOnConfirm)=\"deleteUnits(i)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red); cursor: pointer;font-size: 1rem;\" nz-icon nzType=\"close\" nzTheme=\"outline\"></i>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input nz-input formControlName=\"unit\" [id]=\"'unit'+i\" placeholder=\"{{ 'Enter unit name'| translate}}\" #unit (keyup)=\"checkNameUnit(unit.value,i)\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input nz-input [id]=\"'ratio_units'+i\" #unitRatio (keyup)=\"changeUnitsRatio(unitRatio.value, i)\" [min]=\"2\" nz-input formControlName=\"ratio\" type=\"number\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'price_units'+i\" (blur)=\"changeUnitsPrice('price_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div *ngIf=\"management_product_price2\" class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'price2_units'+i\" (blur)=\"changeUnitsPrice2('price2_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price2\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <input [id]=\"'priceImport_units'+i\" (blur)=\"changeUnitsPriceImport('priceImport_units'+i,i)\" [min]=\"0\" nz-input formControlName=\"price_import\" placeholder=\"{{vhAlgorithm.vhcurrencyunit_symbol(0)}}\" />\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"3\">\r\n                                    <div style=\"padding-left: 0px; padding-right: 0px; display: flex;  justify-content: center; align-items: center\">\r\n                                        <input nz-input formControlName=\"barcode\" (keyup)=\"checkBarcode(unitForm.value.barcode,i)\"  placeholder=\"{{ 'Enter barcode'| translate}}\" />\r\n                                        <i style=\"padding-left: 8px; cursor: pointer;font-size: 1rem;\" nz-icon nzType=\"reload\" nzTheme=\"outline\" (click)=\"setBarcodeForUnit(i)\" nz-tooltip nzTooltipTitle=\"{{'Generate barcodes automatically' | translate}}\" nzTooltipPlacement=\"bottom\"></i>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"gutter-row center-all-content\" nz-col nzSpan=\"2\" style=\"justify-content: flex-end !important\">\r\n                                    <label nz-radio [nzValue]=\"unitForm.value.ratio\"></label>\r\n                                </div>\r\n                            </div>\r\n                            <div nz-row [nzGutter]=\"24\">\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"1\" style=\"display: flex; justify-content: center; align-items: center; padding: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <div class=\"validation-errors\" [id]=\"'unitError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Unit already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"2\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                    <div class=\"validation-errors\" [id]=\"'ratioError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Ratio already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div *ngIf=\"management_product_price2\" class=\"gutter-row\" nz-col nzSpan=\"4\" style=\"padding-left: 0px; padding-right: 0px\">\r\n                                </div>\r\n                                <div class=\"gutter-row\" nz-col nzSpan=\"3\">\r\n                                    <div class=\"validation-errors\" [id]=\"'barcodeError'+i\">\r\n                                        <ng-container>\r\n                                            <div class=\"error-message\">\r\n                                                <ion-text color=\"vh-red\">{{'Barcode already exists'|translate}}\r\n                                                </ion-text>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"gutter-row \" nz-col nzSpan=\"2\"></div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                </nz-radio-group>\r\n                <div nz-row nzSpan=\"24\" style=\"padding-top: 8px; justify-content: flex-end;\">\r\n                    <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addUnits()\">\r\n                      <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-white);margin-right: 8px;\"></i>\r\n                      {{'Add unit' | translate}}\r\n                  </button>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddCustomer>\r\n        <div class=\"footerAddCustomer\" style=\"float: right\">\r\n            <!-- <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button> -->\r\n            <button nz-button (click)=\"okUnits()\">{{\"Close\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n"],"names":["FormGroup","FormControl","Validators","FormArray","VhType","i0","CreateDataProductsComponent","constructor","vhQuerySales","vhAlgorithm","vhComponent","router","languageService","nzModalService","platform","vhQuery","translate","getLocalAppSettingNameBranch","management_product_tax","management_product_price2","required","pattern","syncData","localProduct","getlocalProducts","filter","item","type","PRODUCT","localCategory","getlocalCategorys","initForm","data","index","units","form","manylot","_a","toString","toLowerCase","manysize","id","name","subname","category","unit","ratio","brand","price_import","VALIDATOR_PRICE","price","price2","barcode","_b","CustomValidators","barcodeValidator","formData","warning_number","Number","item_code","tax","get","_c","setValidators","unitNameValidator","_d","disable","_e","ratioValidator","addControl","_f","setValue","removeControl","_g","openFile","document","getElementById","click","openXLSXFile","events","file_import_is_manysize","target","files","nameFile","slice","lastIndexOf","importXLSX","then","length","alertMessage","showLoadingNotDuration","productMap","Map","forEach","productName","key","has","set","existingForm","newUnit","addUnitForm","push","Array","from","values","console","log","hideLoading","value","catch","err","parseFloat","trim","exportXLSXFile","XLSXData","row","Object","unitIndex","unitRow","exportXLSX","status","downloadSampleFile","is","urlEn","urlVI","appLang","localStorage","getItem","window","open","downloadSampleFileSub","checkForm","i","invalid","createData","alertConfirm","res","createCategoriesAndProduct","createCategoriesAndSubProduct","dataCategory","Set","map","createdCategory","some","cate","changeAlias","categories","addCategorys","concat","Error","dataProduct","find","img","parseInt","id_category","_id","delete_hidden","default","batchSize","addedProducts","batch","promises","product","addProducts","results","asyncPromiseAll","Math","floor","products","error","showLog","showToast","pro","subproduct","e","position","subs","sub","sub_data","selling","addProductAndSubsProduct","goBack","dataSuccess","createdError","phone","nzTitle","nzContent","navigate","selectors","decls","vars","consts","template","ctx","control","barcodeCounts","allControls","controls","ctrl","ctrlBarcode","barcodeExistsInDB","getlocalDetailProduct_byBarcode","setErrors","errors","barcodeExists","hasError","existingErrors","keys","currentForm","unitCounts","unitNameValue","unitNameExists","ratioCounts","ratioValue","ratioExists","combineLatest","$event","unit_r22","unit_r34","unit_r52","unit_r67","HiddenProductComponent","cdRef","datePipe","modalService","keySearch","selectedValue","tab","nzPageIndex","getCurrentNavigation","extras","state","stateObj","ngOnInit","list_category","unshift","list_search_category","ngAfterViewInit","doRefreshData","getHiddenProducts","ngOnDestroy","observable","unsubscribe","ngAfterViewChecked","querySelector","heightScroll","clientHeight","detectChanges","getObservableLocalProducts","subscribe","result","list_product","processProduct","list_subproduct","sortStringbyASC","searchProducts","searchByCategory","arr","sortNumberbyASC","element","unit_exchange","name_category","getlocalCategory","renderSubProducts","show_expand","changeTab","listProductSelected","selectedProducts","updateProductByField","parent","is_sub","updateSubProduct","alertMessageDesktop","list_show_product_hidden","updateProduct","list_product_hidden","refreshLocalProducts_Delete_Hidden","hiddenProducts","list_subproduct_hidden","searchProductsHidden","searchByCategoryHidden","filterByAllowSell","list_show_product","list_show","applySearchFilter","searchValue","fields","searchList","applyCategoryFilter","list_show_hidden","categoryId","search","tempVal","format_date","date","transform","sortTable","colName","methodName","direction","list_show_product_not","toggleSelectAllProduct","checked","checkAll","selected","checkProductToHidden","bool","idSet","total","selectedCount","handleUpdateDeleteHidden","confirmed","Promise","resolve","confirm","nzOkText","nzCancelText","nzOnOk","nzOnCancel","showLoading","updateTasks","payload","undefined","all"],"sourceRoot":"webpack:///"}