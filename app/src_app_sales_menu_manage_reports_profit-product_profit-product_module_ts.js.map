{"version":3,"file":"src_app_sales_menu_manage_reports_profit-product_profit-product_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/reports/profit-product/profit-product.component.ts","./src/app/sales/menu/manage/reports/profit-product/profit-product.component.html","./src/app/sales/menu/manage/reports/profit-product/profit-product.module.ts"],"sourcesContent":["import { DatePipe } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ProfitProduct } from 'src/app/sales/interface/vh-report';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-profit-product',\r\n  templateUrl: './profit-product.component.html',\r\n  styleUrls: ['./profit-product.component.scss']\r\n})\r\nexport class ProfitProductComponent {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  filter_value: any = {\r\n    type_product: 'all',\r\n    id_product: 'all',\r\n  }\r\n  list_products: any = [ ]\r\n  list_search_products = [];\r\n  profit: ProfitProduct = this.init();\r\n  branchList: Array<any> = [] // danh sách chi nhánh show ra HTML;\r\n  search_branchList: Array<any> = []\r\n  id_branch_report: any;\r\n  useBranch: boolean = this.fncService.checkUsingBranch()\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private cdRef: ChangeDetectorRef,\r\n    public languageService: LanguageService,\r\n    private router: Router,\r\n    private datePipe: DatePipe,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    this.getListProduct();\r\n    this.getBranches()\r\n  }\r\n  showReport() {\r\n    this.getDataProfit();\r\n  }\r\n  init(startTime: Date = new Date, endTime: Date = new Date): ProfitProduct {\r\n    startTime.setHours(0, 0, 0, 0)\r\n    endTime.setHours(23, 59, 59, 59)\r\n    return {\r\n      list: [],\r\n      outquantity_sales: 0,\r\n      cost_outstock_sales_atax: 0,\r\n      cost_outstock_sales_btax: 0,\r\n      profit_sales_atax: 0,\r\n      profit_sales_btax: 0,\r\n      sales_atax: 0,\r\n      sales_btax: 0,\r\n      return_on_sales_atax: 0,\r\n      startTime,\r\n      endTime\r\n    };\r\n  }\r\n  /**\r\n   * get dử liệu sp và xử lý phần _id để chọn xem report\r\n   * @example this.getListProduct()\r\n   */\r\n  getListProduct() {\r\n    this.list_products = [{ _id: 'all', name: this.languageService.translate('All') }, ...this.vhQuerySales.getlocalDetailProducts(VhType.PRODUCT).filter(e => !e.delete_hidden)].map(e => { return { ...e, _id: e.id_subproduct ? e.id_subproduct : e._id } })\r\n    this.list_search_products = this.list_products\r\n  }\r\n\r\n  /**\r\n   * lọc sp theo tên và barcode\r\n   * @example this.searchProducts('')\r\n   */\r\n  searchProducts(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.list_products = this.vhAlgorithm.searchList(tempVal, this.list_search_products, ['name', 'barcode'])\r\n    else this.list_products = this.list_search_products\r\n  }\r\n  heightScroll: string;\r\n  widthScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".height-layout\") && document.querySelector(\".height-header\") && document.querySelector(\".ant-table-thead\")) {\r\n      this.heightScroll = (document.querySelector(\".height-layout\").clientHeight -\r\n        document.querySelector(\".height-header\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight) - 90 + \"px\";\r\n    }\r\n    if (document.querySelector(\".height-layout\")) {\r\n      this.widthScroll = document.querySelector(\".height-layout\").clientWidth + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  // setIdBranch(value) {\r\n  //   if (value == \"all\") {\r\n  //     this.id_branch_report = []\r\n  //     for (let i in this.branchList) {\r\n  //       if (this.branchList[i]._id != 'all') this.id_branch_report.push(this.branchList[i]._id)\r\n  //     }\r\n  //   } else this.id_branch_report = [value]\r\n  // }\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   * @example this.changeTime(['2023-06-27T01:21:41.397Z','2023-06-27T01:21:41.397Z'])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <= this.fncService.checkDateReport() * 86000000) {\r\n      this.profit['startTime'] = event[0]\r\n      this.profit['endTime'] = event[1]\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n      this.profit['startTime'] = new Date(this.date[0])\r\n      this.profit['endTime'] = new Date(this.date[1])\r\n    }\r\n    this.profit['endTime'].setHours(23, 59, 59, 59)\r\n    //this.date = [this.profit['startTime'], this.profit['endTime']]\r\n  }\r\n  /**\r\n   * set lại id_product xem báo cáo\r\n   */\r\n  filterProducts(id_product) {\r\n    this.filter_value['id_product'] = id_product\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu báo cáo\r\n   */\r\n  getProfit() {\r\n    return new Promise((resolve, rejects) => {\r\n      this.vhQuerySales.getReportProfit_byTime_byIDProduct(\r\n        this.profit['startTime'],\r\n        this.profit['endTime'],\r\n        this.filter_value['id_product'], this.id_branch_report)\r\n        .then(res => resolve(res)).catch(err => rejects(err))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * xem báo cáo\r\n   */\r\n  getDataProfit() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.getProfit()\r\n        .then(res => {\r\n          this.profit['list'] = res['docs'] // lớp trong\r\n          // lớp ngoài\r\n          this.profit['outquantity_sales'] = res['outquantity_sales'] // số lượng xuất\r\n          this.profit['sales_atax'] = res['sales_atax'] // doanh số sau thuế\r\n          this.profit['sales_btax'] = res['sales_btax'] // doanh số trước thuế\r\n          this.profit['cost_outstock_sales_atax'] = res['cost_outstock_sales_atax'] // giá vốn sau thuế\r\n          this.profit['cost_outstock_sales_btax'] = res['cost_outstock_sales_btax'] // giá vốn trước thuế\r\n          this.profit['profit_sales_atax'] = res['profit_sales_atax'] // lợi nhuận sau thuế\r\n          this.profit['profit_sales_btax'] = res['profit_sales_btax'] // lợi nhuận trước thuế\r\n          this.profit['return_on_sales_atax'] = res['return_on_sales_atax'] // tỷ suất lợi nhuận (ROS)\r\n          this.sort(this.statusQuantity, 'quantity')\r\n        }).finally(() => this.vhComponent.hideLoading(0))\r\n    })\r\n  }\r\n  //** hàm sort cho các cột */\r\n  statusQuantity = false\r\n  statusSales = false\r\n  statusCost = false\r\n  statusProfit = false\r\n  statusSingleProfit = false\r\n  statusROS = false\r\n  statusName = false\r\n  /**\r\n   * sort với trường là dạng số\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'total')\r\n   */\r\n  sort(sort, value) {\r\n    if (sort) {\r\n      this.profit['list'] = this.vhAlgorithm.sortNumberbyASC([... this.profit['list']], value)\r\n    }\r\n    else {\r\n      this.profit['list'] = this.vhAlgorithm.sortNumberbyDESC([... this.profit['list']], value)\r\n    }\r\n  }\r\n  /**\r\n   * sort với trường là dạng chuỗi\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'name')\r\n   */\r\n  sortName(sort, value) {\r\n    if (sort) {\r\n      this.profit['list'] = this.vhAlgorithm.sortVietnamesebyASC([... this.profit['list']], value)\r\n    }\r\n    else {\r\n      this.profit['list'] = this.vhAlgorithm.sortVietnamesebyDESC([... this.profit['list']], value)\r\n    }\r\n  }\r\n  /**\r\n   * get chi nhánh được xem báo cáo của user\r\n   */\r\n  getBranches() {\r\n    let branches = [...this.vhQuerySales.getlocalBranchs()] // danh sách toàn bộ chi nhánh\r\n    let employee = this.vhAuth.getUser() // thông tn nhân viên\r\n    let defaultBranch = this.vhQuerySales.getDefaultBranch()._id // chi nhánh mặc định khi đăng nhập (lấy id chi nhánh)\r\n\r\n    if (this.useBranch) { // kiểm tra xem có 2 chi nhánh trở lên\r\n\r\n      if (employee['owner'] == 'boss') { // kiểm tra tài khoản đăng nhập là boss\r\n        this.branchList = branches // gán danh sách chi nhánh show ra HTML\r\n        if (this.branchList.length > 1) this.branchList.unshift({ _id: \"all\", name: \"All\" })\r\n        this.id_branch_report = defaultBranch // gán mặc định chi nhánh mặc định xem báo cáo là chi nhánh đăng nhập vô\r\n      }\r\n\r\n      else { // trường hợp tài khoản là nhân viên\r\n        this.vhAuth.getPermission(employee['_id']).then(result => { // get quyền nhân viên được xem báo cáo chi nhánh nào\r\n          branches.forEach(item => {\r\n            if (result[`${item._id}_view_report_branch`]) this.branchList.push({ ...item }) // kiểm tra chi nhánh đc xem báo cáo, gán cho branchList show ra HMLT \r\n          })\r\n          if (this.branchList.length > 1) { // trường hợp được xem báo cáo 2 chi nhánh trở lên\r\n            // this.branchList.unshift({ _id: \"all\", name: \"All\" }) // đẩy xem tất cả vô, nếu có 2 chi nhánh trở lên\r\n            for (let i in this.branchList) {\r\n              if (this.branchList[i]._id == defaultBranch) return this.id_branch_report = defaultBranch // nếu có gán chi nhánh xem báo mặc định là chi nhánh mặc định (đăng nhập)\r\n              else this.id_branch_report = this.branchList[1]._id // ngược lại gán chi nhánh mặc định là chi nhánh thứ 1\r\n            }\r\n          }\r\n          else if (this.branchList.length == 1) { // nếu chỉ đc xem báo cáo 1 chi nhánh , lấy mặc định là chi nhánh đó\r\n            this.id_branch_report = this.branchList[0]._id\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"warning\", \"Bạn không được chọn chi nhánh xem báo cáo\") // kg có chi nhánh xem báo cáo\r\n        })\r\n\r\n      }\r\n      this.search_branchList = this.branchList\r\n    } else this.id_branch_report = defaultBranch // chỉ xài 1 chi nhánh \r\n  }\r\n  /**\r\n   * lọc chi nhánh theo tên\r\n   * @param value \r\n   */\r\n  search(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.branchList = this.vhAlgorithm.searchList(tempVal, this.search_branchList, ['name'])\r\n    else this.branchList = this.search_branchList\r\n  }\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns string\r\n   * @example let date = this.format_date('2023-06-27T01:10:34.396Z') => output '27_06_2023'\r\n   */\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd_MM_yyyy\")\r\n  }\r\n\r\n  status: boolean = false;\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/reports']);\r\n  }\r\n  /**\r\n   * xuất dữ liệu sang file excel và tải về\r\n   */\r\n  export() {\r\n    let data = new Array();\r\n    let date =\r\n      this.languageService.translate(\"_from\") + \"_\" +\r\n      this.format_date(this.profit['startTime']) + \"_\" +\r\n      this.languageService.translate(\"_to\") + \"_\" +\r\n      this.format_date(this.profit['endTime']);\r\n\r\n    // tên báo báo cáo\r\n    let name = `${this.languageService.translate(\"Product profit\")}_${date}_${this.id_branch_report == \"all\" ? \"\" : this.vhAlgorithm.changeAlias(this.vhQuerySales.getlocalBranch(this.id_branch_report).name).replace(/\\s/g, \"_\")}`\r\n    /// dòng 1 trong excel\r\n    let title: any = new Object();\r\n    title[this.languageService.translate(\"No.\")] = \"\";\r\n    title[this.languageService.translate(\"Product name\")] = \"\";\r\n    title[this.languageService.translate(\"Unit\")] = \"\";\r\n    title[this.languageService.translate(\"Output\")] = this.languageService.translate(\"Quantity\");\r\n    title[\"   \"] = this.languageService.translate(\"Sales after tax\");\r\n    title[\"    \"] = this.languageService.translate(\"Cost after tax\");\r\n    title[this.languageService.translate(\"Profit\")] = this.languageService.translate(\"Single profit after tax\");\r\n    title[\"     \"] = this.languageService.translate(\"Profit after tax\");\r\n    title[\"      \"] = this.languageService.translate(\"Return on sales\");\r\n    data.push(title);\r\n\r\n    // dòng 2 trong \r\n    let total: any = new Object();\r\n    total[this.languageService.translate(\"No.\")] = \"\";\r\n    total[this.languageService.translate(\"Product name\")] = this.languageService.translate(\"Total\");\r\n    total[this.languageService.translate(\"Unit\")] = \"\";\r\n    total[this.languageService.translate(\"Output\")] = this.profit.outquantity_sales;\r\n    total[\"   \"] = this.vhAlgorithm.vhcurrencyunit_symbol(this.profit.sales_atax);\r\n    total[\"    \"] = this.vhAlgorithm.vhcurrencyunit_symbol(this.profit.cost_outstock_sales_atax);\r\n    total[this.languageService.translate(\"Profit\")] = this.profit.outquantity_sales != 0 ? this.vhAlgorithm.vhcurrencyunit_symbol((this.profit.profit_sales_atax / this.profit.outquantity_sales)) : 0;\r\n    total[\"     \"] = this.vhAlgorithm.vhcurrencyunit_symbol(this.profit.profit_sales_atax);\r\n    total[\"      \"] = this.vhAlgorithm.vhpercent(this.profit.return_on_sales_atax);\r\n    data.push(total);\r\n    // for dòng 3 trong excel\r\n    for (let _rows of this.profit.list) {\r\n      let item: any = new Object();\r\n      item[this.languageService.translate(\"No.\")] = _rows.index;\r\n      item[this.languageService.translate(\"Product name\")] = _rows.name;\r\n      item[this.languageService.translate(\"Unit\")] = _rows.unit;\r\n      item[this.languageService.translate(\"Output\")] = _rows.outquantity_sales;\r\n      item[\"   \"] = this.vhAlgorithm.vhcurrencyunit(_rows.sales_atax);\r\n      item[\"    \"] = this.vhAlgorithm.vhcurrencyunit(_rows.cost_outstock_sales_atax);\r\n      item[this.languageService.translate(\"Profit\")] = _rows.outquantity_sales != 0 ? this.vhAlgorithm.vhcurrencyunit((_rows.profit_sales_atax / _rows.outquantity_sales)) : 0;\r\n      item[\"     \"] = this.vhAlgorithm.vhcurrencyunit(_rows.profit_sales_atax);\r\n      item[\"      \"] = this.vhAlgorithm.vhpercent(_rows.return_on_sales_atax);\r\n      data.push(item);\r\n    }\r\n    this.vhAlgorithm.exportXLSX(data, name)\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout class=\"height-layout\">\r\n    <div nz-row class=\"height-header\">\r\n        <div nz-col [nzSpan]=\"3\" class=\"title left-all-content\">\r\n            <b>{{'Product profit'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"title center-all-content\">\r\n            <nz-select style=\"text-align: center;\" [nzServerSearch]=\"true\" (nzOnSearch)=\"searchProducts($event)\"\r\n                nzShowSearch [(ngModel)]=\"filter_value['id_product']\" nzBorderless\r\n                (ngModelChange)=\"filterProducts($event)\">\r\n                <nz-option *ngFor=\"let option of list_products\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col [nzSpan]=\"useBranch ? 6 : 9\">\r\n            <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\">\r\n            </nz-range-picker>\r\n        </div>\r\n        <div *ngIf=\"useBranch\" nz-col nzSpan=\"4\" class=\"center-all-content\">\r\n            <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\" nzBorderless\r\n                nzPlaceHolder=\"{{'Select branch' | translate}}\"  \r\n                [(ngModel)]=\"id_branch_report\">\r\n                <nz-option *ngFor=\"let option of branchList\" nzLabel=\"{{option.name| translate}}\"\r\n                    nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col [nzSpan]=\"useBranch ? 4 : 5\" class=\"right-all-content\">\r\n            <div>\r\n                <button (click)=\"export()\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                    {{'Download' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button [disabled]=\"!id_branch_report\" class=\"btn-view center-all-content\" nz-button nzType=\"default\"\r\n                    (click)=\"showReport()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" *ngIf=\"profit.list.length > 0\"\r\n            nzBordered [nzData]=\"profit.list\" [nzScroll]=\"{y: heightScroll }\" #inventory nzShowPagination\r\n            nzShowSizeChanger>\r\n            <thead>\r\n                <tr>\r\n                    <th nzLeft nzWidth=\"5%\" nzAlign='center' rowspan=\"2\"><b>{{'No.' | translate}}</b></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"statusName = !statusName;sortName(statusName,'name')\" nzLeft\r\n                        nzWidth=\"30%\" rowspan=\"2\"><b>{{'Product name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusName == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzLeft rowspan=\"2\" nzWidth=\"5%\"><b>{{'Unit' | translate}}</b></th>\r\n                    <th nzcenter colspan=\"3\"><b>{{'Output' | translate}}</b></th>\r\n                    <th nzcenter colspan=\"3\"><b>{{'Profit' | translate}}</b></th>\r\n                </tr>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\"\r\n                        (click)=\"statusQuantity = !statusQuantity;sort(statusQuantity,'quantity')\" nzAlign='center'>\r\n                        <b>{{'Quantity' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusQuantity == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"statusSales = !statusSales;sort(statusSales,'sales_atax')\"\r\n                        nzAlign='right'> <b>{{'Sales after tax' | translate}}</b>\r\n\r\n                        <i nz-icon [nzType]=\"statusSales == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"\r\n                        (click)=\"statusCost = !statusCost;sort(statusCost,'cost_outstock_sales_atax')\" nzAlign='right'>\r\n                        <b>{{'Cost after tax' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusCost == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign='right'>\r\n                        <b>{{'Single profit after tax' | translate}}</b>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"\r\n                        (click)=\"statusProfit = !statusProfit;sort(statusProfit,'profit_sales_atax')\" nzAlign='right'>\r\n                        <b>{{'Profit after tax' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusProfit == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"statusROS = !statusROS;sort(statusROS,'return_on_sales_atax')\"\r\n                        nzAlign='right'><b>{{'Return on sales' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusROS == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td nzLeft></td>\r\n                    <td nzLeft style=\"color: var(--ion-color-vh-green);\">{{'Total' | translate}}</td>\r\n                    <td nzLeft></td>\r\n                    <td nzAlign='center' style=\"color: var(--ion-color-vh-green);\">\r\n                        {{profit.outquantity_sales}}</td>\r\n                    <td nzAlign='right' style=\"color: var(--ion-color-vh-green);\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(profit.sales_atax)}}</td>\r\n\r\n                    <td nzAlign='right' style=\"color: var(--ion-color-vh-green);\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(profit.cost_outstock_sales_atax)}}</td>\r\n                    <td nzAlign='right' style=\"color: var(--ion-color-vh-green);\">{{profit.outquantity_sales != 0 ?\r\n                        vhAlgorithm.vhcurrencyunit_symbol((profit.profit_sales_atax/ profit.outquantity_sales)) :\r\n                        vhAlgorithm.vhcurrencyunit_symbol(0) }}\r\n                    </td>\r\n                    <td nzAlign='right' style=\"color: var(--ion-color-vh-green);\">\r\n                        {{vhAlgorithm.vhcurrencyunit_symbol(profit.profit_sales_atax)}}</td>\r\n                    <td nzAlign='right' style=\"color: var(--ion-color-vh-green);\">\r\n                        {{vhAlgorithm.vhpercent(profit.return_on_sales_atax)}}</td>\r\n                </tr>\r\n                <ng-container *ngFor=\" let data of inventory.data, let i=index\">\r\n                    <tr>\r\n                        <td nzLeft nzAlign='center'>{{ i+1}}</td>\r\n                        <td nzLeft class=\"left\">\r\n\r\n                            {{ data.name }}\r\n                        </td>\r\n                        <td nzLeft class=\"left\">{{ data.unit }}</td>\r\n                        <td nzAlign='center'>{{ data.outquantity_sales }}</td>\r\n                        <td nzAlign='right'>{{ vhAlgorithm.vhcurrencyunit(data.sales_atax) }}</td>\r\n                        <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(data.cost_outstock_sales_atax )}}</td>\r\n                        <td nzAlign='right'>{{data.outquantity_sales != 0 ?\r\n                            (vhAlgorithm.vhcurrencyunit(data.profit_sales_atax/ data.outquantity_sales)) : 0 }}</td>\r\n                        <td nzAlign='right'>\r\n                            {{vhAlgorithm.vhcurrencyunit(data.profit_sales_atax)}}</td>\r\n                        <td nzAlign='right'>\r\n                            {{vhAlgorithm.vhpercent(data.return_on_sales_atax)}}</td>\r\n                    </tr>\r\n                    <ng-container *ngIf=\"data.expand\">\r\n                        <tr *ngFor=\"let item of data.lots\">\r\n                            <td></td>\r\n                            <td colspan=\"2\" style=\"padding-left:24px !important;\">\r\n                                {{'Lot number' | translate}}: {{ item.lot_number}} <br>\r\n                                {{ item.date_mfg | date : 'dd/MM/yyyy'}} - {{ item.date_exp | date :\r\n                                'dd/MM/yyyy'}}\r\n                            </td>\r\n\r\n                            <td nzAlign='center'>{{item.outquantity_sales}}</td>\r\n                            <td nzAlign='right'>\r\n                                {{vhAlgorithm.vhcurrencyunit(item.sales_atax)}}</td>\r\n                            <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(data.cost_outstock_sales_atax )}}</td>\r\n                            <td nzAlign='right'>{{data.outquantity_sales != 0 ?\r\n                                (vhAlgorithm.vhcurrencyunit(data.profit_sales_atax/ data.outquantity_sales)) : 0 }}</td>\r\n                            <td nzAlign='right'>\r\n                                {{vhAlgorithm.vhcurrencyunit(data.profit_sales_atax)}}</td>\r\n                            <td nzAlign='right'>\r\n                                {{vhAlgorithm.vhpercent(data.return_on_sales_atax)}}</td>\r\n\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n\r\n            </tbody>\r\n        </nz-table>\r\n        <div nz-row *ngIf=\"profit.list.length  == 0\" class=\"full-height\">\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                <div>{{'No data'| translate}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ProfitProductComponent } from './profit-product.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfitProductComponent\r\n  },\r\n\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ProfitProductComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule,\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    IonicModule,\r\n  ]\r\n})\r\nexport class ProfitProductModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}