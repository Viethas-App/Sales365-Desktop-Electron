{"version":3,"file":"src_app_sales_menu_manage_sales-program_card-goods_exchange-card-invoice_exchange-card-invoic-6a631e.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/card-goods/exchange-card-invoice/detail/detail.component.ts","./src/app/sales/menu/manage/sales-program/card-goods/exchange-card-invoice/detail/detail.component.html","./src/app/sales/menu/manage/sales-program/card-goods/exchange-card-invoice/exchange-card-invoice.component.ts","./src/app/sales/menu/manage/sales-program/card-goods/exchange-card-invoice/exchange-card-invoice.component.html","./src/app/sales/menu/manage/sales-program/card-goods/exchange-card-invoice/exchange-card-invoice.module.ts"],"sourcesContent":["import { TreeNodeInterface } from './../../../../../../prepaid-card/prepaid-card.component';\r\nimport { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhSaleExchangeVoucherInvoices, VhSaleExchangeVoucherInvoiceDetails } from 'src/app/sales/interface/vh-sale-voucher-invoice';\r\nimport { ExchangePaymentCardK57Col3Component } from 'src/app/sales/components/print/prepaid-card/exchange-payment-card-k57-col3/exchange-payment-card-k57-col3.component';\r\nimport { ExchangePaymentCardK80Col4Component } from 'src/app/sales/components/print/prepaid-card/exchange-payment-card-k80-col4/exchange-payment-card-k80-col4.component';\r\nimport { ExchangePaymentCardK80Col3Component } from 'src/app/sales/components/print/prepaid-card/exchange-payment-card-k80-col3/exchange-payment-card-k80-col3.component';\r\nimport { ExchangePaymentCardA5Component } from 'src/app/sales/components/print/prepaid-card/exchange-payment-card-a5/exchange-payment-card-a5.component';\r\nimport { ExchangePaymentCardA4Component } from 'src/app/sales/components/print/prepaid-card/exchange-payment-card-a4/exchange-payment-card-a4.component';\r\nimport { VhBillType51DetailEdit, VhBillType51Edit } from 'src/app/sales/components/bill-type/bill-type-51/bill-type51-interface';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent {\r\n\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType51Edit;\r\n  invoiceDetail: VhBillType51DetailEdit[];\r\n  dataRestore: any;\r\n  total_product: number = 0;\r\n   \r\n  root: any;\r\n  product_codes: any;\r\n  list_product_print: any = [];\r\n  constructor(\r\n    private router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.root = this.router.getCurrentNavigation().extras.state\r\n    \r\n    this.dataRestore = this.root.dataRestore\r\n    this.getDataInvoice(this.root.data._id)\r\n    \r\n  }\r\n\r\n  /**\r\n   * gán bill và bill-detail get được vào biến và get các thông tin của nv, khách hàng, phương thức thanh toán\r\n   * @example this.init(bill, bill-deails)\r\n   */\r\n  init(bill_type, invoice: VhBillType51Edit = null, invoiceDetail: VhBillType51DetailEdit[] = null) {\r\n    if (bill_type == 51) this.invoice = invoice\r\n    this.invoiceDetail = invoiceDetail\r\n    \r\n    \r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.id_customer),\r\n\r\n      }\r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n    this.total_product = 0\r\n    for (let i of this.invoiceDetail) {\r\n      this.total_product += i.products.reduce((prev: number, next) => prev + next.quantity, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu bill từ DB\r\n   * @param id : nhận từ state truyền qua\r\n   * @example this.getDataInvoice('DHIWHNXDIWODUHIWDHOWID')\r\n   */\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        \r\n        if (invoice.bill_type == 51) {\r\n          let promise = new Array();\r\n          for (let i = 0; i < invoiceDetail.length; i++) {\r\n            promise[i] = this.vhQuerySales.getPaymentCard_Code_Name_Release(invoiceDetail[i].id_payment_card_code)\r\n          }\r\n          this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n            let invoiceDetailFresh = invoiceDetail;\r\n            \r\n            \r\n            invoiceDetailFresh = array.map((item, index) => {\r\n              return {\r\n                name_payment_card_release : item.name_payment_card_release,\r\n                name_payment_card  : item.name_payment_card,\r\n                code : item.code,\r\n                products: invoiceDetail[index].products.map(prod_child => {\r\n                  return { \r\n                    name: prod_child.name,\r\n                    units: prod_child.units,\r\n                    ratio: prod_child.ratio,\r\n                    quantity_use: prod_child.quantity,\r\n                    outquantity: prod_child.outquantity ,\r\n                    restquantity: prod_child.restquantity,\r\n                    quantity: item.products.find(e => prod_child.id_subproduct ? ( e.id_subproduct == prod_child.id_subproduct) : ( e.id_product == prod_child.id_product)).quantity\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            this.init(invoice.bill_type, invoice, invoiceDetailFresh)\r\n            setTimeout(() => {\r\n              this.product_codes = invoiceDetailFresh;\r\n              \r\n              \r\n            }, 200);\r\n            this.vhComponent.hideLoading(0);\r\n          }, error => {\r\n            \r\n            this.vhComponent.hideLoading(0);\r\n\r\n          })\r\n        }\r\n\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit của sản phẩm theo ratio truyền vào\r\n   * @param units \r\n   * @param ratio \r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([object], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n  /**\r\n   * trả về chuỗi thông tin lô theo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let lot = this.getLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-return-invoice-detail\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-return-invoice-detail-header\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-return-invoice-detail-header\").clientHeight - 60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#sales-return-invoice-detail\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".sales-return-invoice-detail-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/card-goods/exchange-card-invoice'], { state: this.dataRestore });\r\n  }\r\n\r\n  /**\r\n   * kiểm tra thông tin dữ liệu trang in và mở component in\r\n   * @example this.printInvoice()\r\n   */\r\n  printInvoice() {\r\n    let print = this.vhQuerySales.getLocalPrintPage('page_desktop_exchange_payment_card')\r\n    if (print && print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)].enable) {\r\n      let printer =  print.print_sizes[print.print_sizes.findIndex(e => e._id == print.print_size_default)] \r\n      if (printer) {\r\n        let type = printer._id;\r\n        this.vhComponent.showModal(this.renderPrintPage(type), { printer: printer , invoice: this.invoice , invoice_detail:this.invoiceDetail}, false, false, `modal-print-${type}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.goBack())\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ExchangePaymentCardK57Col3Component\r\n      case 'print_size_k80_3c': return ExchangePaymentCardK80Col3Component\r\n      case 'print_size_k80_4c': return ExchangePaymentCardK80Col4Component\r\n      case 'print_size_a5': return ExchangePaymentCardA5Component\r\n      case 'print_size_a4': return ExchangePaymentCardA4Component\r\n      default: return ExchangePaymentCardA4Component\r\n    }\r\n  }\r\n\r\n  /**\r\n   * xóa hóa đơn lên DB\r\n   * @example this.deleteInvoice()\r\n   */\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel this invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.alertMessageDesktop(\"success\",\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.bill_code} ${this.languageService.translate(\"has been cancelled successfully\")}`)\r\n                this.router.navigate(['/sales/dashboard/manage/sales-program/card-goods/exchange-card-invoice'], { state: { ...this.dataRestore, reload: true } })\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate('You do not have this rights'))\r\n  }\r\n\r\n\r\n  /**\r\n   * trả về chuỗi thông tin địa chỉ của khách hàng\r\n   */\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n \r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"sales-return-invoice-detail\" *ngIf=\"invoice\">\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header sales-return-invoice-detail-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{ 'Card exchange invoice' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-contentn\">\r\n                    <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                        nzType=\"default\">\r\n                        <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                        {{'Print' | translate}}\r\n                    </button>\r\n                    <button (click)=\"deleteInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button style=\"margin-right: 8px;\"\r\n                        nzType=\"default\">\r\n                        <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n                        {{'Delete' | translate}}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table #expandTable nzTableLayout=\"fixed\" nzNoResult=\"{{'No data'| translate}}\"\r\n                        [nzData]=\"product_codes\" nzShowSizeChanger nzShowPagination [nzPageSize]=\"20\"\r\n                        [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign=\"center\"><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Initial quantity' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Quantity exported' | translate}}</b></th>\r\n                                <th nzAlign=\"center\"><b>{{'Quantity export' | translate}}</b></th>\r\n                                <th nzAlign=\"right\"><b>{{'Remaining' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <ng-container *ngFor=\"let data of product_codes\">\r\n                                <tr (click)=\"data.expand = !data.expand\">\r\n            \r\n                                    <td colspan=\"6\" >\r\n                                        <i style=\"cursor: pointer;\"  nz-icon [nzType]=\"!data.expand ? 'minus' : 'plus'\" nzTheme=\"outline\"></i>\r\n                                        <b>{{data.name_payment_card_release}} ({{data.name_payment_card}})</b>: {{data.code}}\r\n                                    </td>\r\n                                </tr>\r\n                                <ng-container *ngIf=\"!data.expand\">\r\n                                    <tr  *ngFor=\"let item of data['products']\">\r\n                                        <td >\r\n                                            {{item.name}} <br> \r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                       >{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                {{'Stock' | translate}}: {{item.stock}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{getUnit(item.units, item.ratio)}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{item.quantity}}\r\n                                        </td>\r\n                                        <td nzAlign=\"center\">{{item.quantity - item.restquantity}}</td>\r\n                                        <td nzAlign=\"center\">\r\n                                            {{item.quantity_use}}\r\n                                        </td>\r\n                                        <td nzAlign=\"right\">\r\n                                            <ng-container  >\r\n                                                {{item.quantity - item.outquantity}}\r\n                                            </ng-container>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Salesman' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Exchange date' | translate}}</b>\r\n                    <div>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery' | translate}}</b>\r\n                    <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <b>{{'Customer information' | translate}}</b>\r\n\r\n                <div nz-col nzSpan=\"24\">\r\n                    {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    {{renderAddress(invoiceInfo.partner)}}\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Payment information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'Total items' | translate}}</span>\r\n                    <div>{{total_product}}</div>\r\n                </div>\r\n\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { DatePipe} from '@angular/common';\r\nimport { ChangeDetectorRef, Component, OnInit} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-exchange-card-invoice',\r\n  templateUrl: './exchange-card-invoice.component.html',\r\n  styleUrls: ['./exchange-card-invoice.component.scss']\r\n})\r\nexport class ExchangeCardInvoiceComponent implements OnInit {\r\n\r\n  public date: Date[] = [new Date(), new Date()];\r\n  public searchValue: string = ''\r\n  public invoiceShow: any[] = []\r\n  public invoices: any[];\r\n  listFilter: Array<any> = [{ value: 1, name: \"Latest\" }, { value: 2, name: \"Oldest\" }, { value: 3, name: \"Low to High value\" }, { value: 4, name: \"High to Low value\" }]\r\n  tableHeight: string;\r\n  status: any;\r\n  totalValInvoice: number = 0;\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  public filterType: 1 | 2 | 3 | 4 = 1;\r\n  public filterTitle: 'High to Low value' | 'Low to High value' | 'Oldest' | 'Latest' = \"Latest\"\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private datePipe: DatePipe,\r\n    public router: Router,\r\n    private vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService:FunctionService\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n  }\r\n  ngOnInit() {\r\n    if (this.dataRestore) {\r\n      this.searchValue = this.dataRestore.searchValue\r\n      this.filterType = this.dataRestore.filterType\r\n      this.date = [new Date(this.dataRestore.startTime), new Date(this.dataRestore.endTime)];\r\n      this.invoices = this.dataRestore.invoice\r\n      this.invoiceShow = this.invoices\r\n      if (this.dataRestore.reload) this.getInvoices()\r\n    }\r\n    else { this.filterType = 1; this.filterTitle = \"Latest\" }\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-return-invoice\") && document.querySelector(\".ant-table-thead\")   && document.querySelector(\".invoice-header\")) {\r\n      this.tableHeight = document.querySelector(\"#sales-return-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".invoice-header\").clientHeight -   60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#sales-return-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".invoice-header\").clientHeight -   document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * get danh sách hóa đơn đổi thẻ type = 51\r\n   */\r\n  getInvoices() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\", null, 0, false).then(() => {\r\n      this.vhQuerySales.getBills_byFields({date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) } ,id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, bill_type :{ $eq: 51} },{},{},0)\r\n      .then((invoice: any[])=>{\r\n        this.invoices = invoice.map(item => {\r\n          return { ...item,\r\n            partner_name: this.renderPartner(item.id_customer),\r\n            name_employee: this.vhAuth.getlocalEmployee(item.id_employee)? this.vhAuth.getlocalEmployee(item.id_employee).name :''\r\n          }\r\n        })\r\n        this.status = \"Not found\"\r\n        this.vhComponent.hideLoading(0);\r\n        this.invoiceShow = this.invoices;\r\n      }, err => {\r\n        this.vhComponent.hideLoading(0);\r\n      }).catch(err => this.vhComponent.hideLoading(0))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về tên khách hàng đổi thẻ\r\n   * @example let customer = this.renderPartner(\"FIEUHIEUHFIWUHDIWUH\")\r\n   */\r\n  renderPartner(id_partner: string) {\r\n    let customer: string = this.languageService.translate(this.vhQuerySales.getlocalCustomer(id_partner).name)\r\n    return customer ? customer : this.languageService.translate(\"Not found\")\r\n  }\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/sales-program/card-goods\"])\r\n  }\r\n  /**\r\n   * lưu mã đơn trong RAM\r\n   * @example this.copyBillCode('270623A001')\r\n   */\r\n  copyBillCode(billCode) {\r\n    this.vhComponent.copyValue(billCode)\r\n  }\r\n  /**\r\n   * lọc bill theo ['bill_code', 'partner_name', 'payment_name', 'name_employee', 'status']\r\n   */\r\n  searchBill(value: string) {\r\n    if (value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoices, ['bill_code', 'partner_name', 'payment_name', 'name_employee', 'status'])\r\n    } else this.invoiceShow = [...this.invoices]\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * sắp xếp bill theo filterType\r\n   */\r\n  sortFilter(filterType: 1 | 2 | 3 | 4) {\r\n    switch (filterType) {\r\n      case 1: this.invoices.sort((prev, next) => Date.parse(next.date) - Date.parse(prev.date)); this.filterTitle = \"Latest\"; break;\r\n      case 2: this.invoices.sort((prev, next) => Date.parse(prev.date) - Date.parse(next.date)); this.filterTitle = \"Oldest\"; break;\r\n      case 3: this.invoices.sort((prev, next) => (prev.total * (1 + prev.tax / 100)) - (next.total * (1 + next.tax / 100))); this.filterTitle = \"Low to High value\"; break;\r\n      case 4: this.invoices.sort((prev, next) => (next.total * (1 + next.tax / 100)) - (prev.total * (1 + prev.tax / 100))); this.filterTitle = \"High to Low value\"; break;\r\n    }\r\n\r\n    this.searchBill(this.searchValue)\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem hóa đơn\r\n   * @param event array<date>\r\n   * @example this.changeTime([2023-06-23T07:12:35.157Z,2023-06-23T07:12:35.157Z])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <=  this.fncService.checkDateReport() * 86000000) {\r\n      //this.getTransferList();\r\n    } else {\r\n      this.vhComponent.showToast(4000, this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"), \"alert-toast\")\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n  /**\r\n   * format lại định dạng hiển thị ngày tháng để tải về file excel\r\n   * @param date \r\n   * @param type \r\n   * @returns string\r\n   * @example let date = this.format_date(2023-06-23T07:12:35.157Z, 'dd/MM/yyyy')\r\n   */\r\n  format_date(date, type) {\r\n    return this.datePipe.transform(date, type)\r\n  }\r\n\r\n  goToDetail(data) {\r\n    let dataRestore = { searchValue: this.searchValue, filterType: this.filterType, startTime: this.date[0], endTime: this.date[1],  invoice: this.invoices }\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_view_bill\")) this.router.navigate([\"/sales/dashboard/manage/sales-program/card-goods/exchange-card-invoice/detail\"], { state: { data, dataRestore } })\r\n    else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  //xuất excel hóa đơn\r\n  export() {\r\n    let data = [];\r\n    let name = `${'Hoa_don_doi_the_tra_truoc'}_${this.languageService.translate(\"_from\")}_${this.format_date(this.date[0], 'dd_MM_yyyy')}_${this.languageService.translate(\"_to\")}_${this.format_date(this.date[0], 'dd_MM_yyyy')}_${this.vhAlgorithm.changeAlias(this.vhQuerySales.getDefaultBranch().name).replace(/\\s/g, \"_\")}`;\r\n    let total: any = new Object();\r\n    total[this.languageService.translate('Date')] = ''\r\n    total[this.languageService.translate('Invoice code')] = this.languageService.translate('Total')\r\n    total[this.languageService.translate('Customer')] = ''\r\n    total[this.languageService.translate('Employee')] = ''\r\n    total[this.languageService.translate('Note')] = ''\r\n    data.push(total)\r\n    for (let bill of this.invoiceShow) {\r\n      let item: any = new Object();\r\n      item[this.languageService.translate('Date')] = this.format_date(bill.date, 'dd/MM/yyyy HH:mm')\r\n      item[this.languageService.translate('Invoice code')] = bill.bill_code\r\n      item[this.languageService.translate('Customer')] = bill.partner_name\r\n      item[this.languageService.translate('Employee')] = bill.name_employee\r\n      item[this.languageService.translate('Note')] = bill.note\r\n      data.push(item);\r\n    }\r\n    this.vhAlgorithm.exportXLSX(data, name)\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  partner_nameCol = false;\r\n  name_employeeCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'date':\r\n        if(this.dateCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if(this.bill_codeCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'partner_name':\r\n        if(this.partner_nameCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'name_employee':\r\n        if(this.name_employeeCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"sales-return-invoice\">\r\n    <div nz-row class=\"invoice-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n            <b>{{'Prepaid card exchange invoice' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"title center-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input placeholder=\"{{'Search for invoice code, customer name, payment, status' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"title center-all-content\">\r\n            <nz-select [(ngModel)]=\"filterType\" (ngModelChange)=\"sortFilter($event)\" nzBorderless>\r\n                <nz-option *ngFor=\"let item of listFilter\" [nzValue]=\"item.value\" [nzLabel]=\"item.name | translate\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"date-picker-cus\">\r\n            <nz-range-picker [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content button-group\">\r\n            <div>\r\n                <button *ngIf=\"invoiceShow.length\" (click)=\"export()\" class=\"btn-confirm center-all-content\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                    {{'Download' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-green center-all-content ml-3\" nz-button nzType=\"default\" (click)=\"getInvoices()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceShow\" #tableSales nzShowPagination nzShowSizeChanger nzNoResult=\"{{'Not invoice yet' | translate}}\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"dateCol = !dateCol;sortTable('date')\" nzWidth=\"14%\" nzAlign='left'>\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\" nzWidth=\"24%\" nzAlign='left'>\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"partner_nameCol = !partner_nameCol;sortTable('partner_name')\" nzWidth=\"33%\" nzAlign='left'>\r\n                        <b>{{'Customer' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"partner_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"name_employeeCol = !name_employeeCol;sortTable('name_employee')\" nzWidth=\"14%\" nzAlign='left'>\r\n                        <b>{{'Employee' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"name_employeeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"15%\" nzAlign='left'><b>{{'Note' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let invoice of tableSales.data\" style=\"cursor: pointer;\" (click)=\"goToDetail(invoice)\">\r\n                    <td nzAlign='left'>{{invoice.date | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                    <td nzAlign='left'>\r\n                        {{invoice.bill_code}} <i nz-icon nzType=\"copy\" nzTheme=\"outline\" (click)=\"$event.stopPropagation();copyBillCode(invoice.bill_code)\"></i></td>\r\n                    <td nzAlign='left'>{{invoice.partner_name}} <br>\r\n                    </td>\r\n                    <td nzAlign='left'>{{invoice.name_employee}}</td>\r\n                    <td nzAlign='left'>{{invoice.note}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ExchangeCardInvoiceComponent } from './exchange-card-invoice.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms'; \r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { DetailComponent } from './detail/detail.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ExchangeCardInvoiceComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailComponent\r\n  }\r\n]\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ExchangeCardInvoiceComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    \r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    NgZorroAntModule,\r\n\r\n  ]\r\n})\r\nexport class ExchangeCardInvoiceModule { }\r\n"],"names":["ExchangePaymentCardK57Col3Component","ExchangePaymentCardK80Col4Component","ExchangePaymentCardK80Col3Component","ExchangePaymentCardA5Component","ExchangePaymentCardA4Component","i0","DetailComponent","constructor","router","vhQuerySales","languageService","vhAuth","vhComponent","vhAlgorithm","cdRef","vhQuery","getLocalAppSettingNameBranch","display_promotion_selling_price","root","getCurrentNavigation","extras","state","dataRestore","getDataInvoice","data","_id","init","bill_type","invoice","invoiceDetail","invoiceInfo","employee","getlocalEmployee","id_employee","partner","getlocalCustomer","id_customer","paymentName","total_product","i","products","reduce","prev","next","quantity","id","showLoading","then","Promise","all","getBill","getBill_details_byId_bill","promise","Array","length","getPaymentCard_Code_Name_Release","id_payment_card_code","asyncPromiseAll","array","invoiceDetailFresh","map","item","index","name_payment_card_release","name_payment_card","code","prod_child","name","units","ratio","quantity_use","outquantity","restquantity","find","e","id_subproduct","id_product","setTimeout","product_codes","hideLoading","error","getUnit","getUnit_byRatio","unit","getLotNumber","lots","lot","lot_number","ngAfterViewChecked","document","querySelector","tableHeight","clientHeight","detectChanges","goBack","navigate","printInvoice","print","getLocalPrintPage","print_sizes","findIndex","print_size_default","enable","printer","type","showModal","renderPrintPage","invoice_detail","modal","onWillDismiss","deleteInvoice","checkMyPermission","alertConfirm","translate","deleteBill_Billdetail","alertMessageDesktop","bill_code","reload","renderAddress","address","district","province","country","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}