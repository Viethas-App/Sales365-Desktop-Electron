{"version":3,"file":"src_app_sales_menu_manage_sales-program_card-goods_report_report_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/card-goods/report/detail/detail.component.ts","./src/app/sales/menu/manage/sales-program/card-goods/report/detail/detail.component.html","./src/app/sales/menu/manage/sales-program/card-goods/report/report.component.html","./src/app/sales/menu/manage/sales-program/card-goods/report/report.component.ts","./src/app/sales/menu/manage/sales-program/card-goods/report/report.module.ts"],"sourcesContent":["import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuery, VhQuerySales, VhAlgorithm } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  public releaseVoucher: any;                                         // đợt voucher\r\n  public statusList:any = [                                           // trạng thái mã voucher\r\n    {\r\n      id:0,\r\n      name: 'Tất cả'\r\n    },\r\n    {\r\n      id: 1,\r\n      name:'Đã phát hành'\r\n    },\r\n    {\r\n      id: 2,\r\n      name:'Đã bán'\r\n    },\r\n    {\r\n      id: 3,\r\n      name:'Đã đổi từ tích điểm'\r\n    },\r\n    {\r\n      id: 4,\r\n      name:'Đã sử dụng'\r\n    },\r\n    {\r\n      id:5,\r\n      name:'Đã hết hạn'\r\n    }\r\n  ]\r\n  public stateObj = {\r\n    searchValue: '',\r\n    selectedValue: '0',\r\n  }\r\n  public listShow:any[] = [];                                         // danh sách hiển thị\r\n  public listDetailRelease: any[] = [];                               // danh sách thông tin đợt\r\n  public listProductCodes:any [] = [];                                // danh sách mã voucher\r\n  public listSearch:any [] = [];                                      // danh sách mã tìm kiếm\r\n  public listFilter:any [] = [];                                      // danh sách mã tìm kiếm\r\n  public heightScroll: string;\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuery: VhQuery,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent\r\n  ) {\r\n    this.releaseVoucher = this.router.getCurrentNavigation().extras.state\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n  viewData(){\r\n    this.listShow =  []\r\n    if(this.releaseVoucher){\r\n      this.getReleaseDetails(this.releaseVoucher._id);\r\n    }\r\n  }\r\n\r\n  // lấy release detail theo _id truyền qua\r\n  getReleaseDetails(_id: any) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getPaymentCardRelaseDetail_byFields({ id_payment_card_release: {$eq: _id}},{},{},0),\r\n        this.vhQuerySales.getPaymentCards()\r\n      ]).then(([payment_card_release_details,payment_cards]:any)=>{\r\n        for (let item of payment_card_release_details) {\r\n          let paymentCard = payment_cards.find(payment_card=> payment_card._id == item.id_payment_card)\r\n          this.getProductCodes(item._id, paymentCard);\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  // lấy danh sach mã code\r\n  getProductCodes(id_payment_card_release_detail: any, payment_card: object) {\r\n    if(payment_card){\r\n      this.vhQuerySales.getPaymentCardCodes_byIdPaymentCardReleaseDetail(id_payment_card_release_detail).then((payment_card_codes:any)=>{\r\n        payment_card_codes.map(item =>{\r\n          item['price_paymnent_card'] = payment_card['price']\r\n\r\n          if (new Date > new Date(item.date_expire) &&  item.status == 1) item.status = 5;\r\n          return item;\r\n        })\r\n        this.listShow = this.listShow.concat(payment_card_codes);\r\n        this.listProductCodes = this.listShow;\r\n        this.listSearch = this.listShow;\r\n        this.listFilter =  this.listShow;\r\n        this.vhComponent.hideLoading(0)\r\n\r\n      })\r\n    }\r\n  }\r\n  goBack(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/card-goods/report']);\r\n  }\r\n  searchCode(key){\r\n    let tempVal: string = key.toLowerCase();\r\n    if (key.length)\r\n      this.listShow = this.vhAlgorithm.searchList(tempVal, this.listSearch, [\"code\"])\r\n    else this.listShow = this.listSearch\r\n  }\r\n\r\n  sortFilter(status){\r\n    this.stateObj.selectedValue = status;\r\n    if (status === \"0\") {\r\n      this.listSearch = this.listFilter;\r\n    }  else {\r\n      this.listSearch = this.listFilter.filter(item => item.status == status);\r\n    }\r\n    this.searchCode(this.stateObj.searchValue)\r\n  }\r\n\r\n  checkExpried(end_date) {\r\n    return new Date() > new Date(end_date)\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\")  &&\r\n    document.querySelector(\".ant-table-thead\") &&\r\n    document.querySelector(\".product-list-header\") &&\r\n    document.querySelector(\".left-all-content\") &&\r\n    document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n    /** hàm sort cho các cột */\r\n    codeCol = false;\r\n    date_validityCol = false;\r\n    date_usedCol = false;\r\n    price_paymnent_cardCol = false;\r\n    statusCol = false;\r\n    date_soldPoints_exchangedCol = false;\r\n    /** Hàm thực hiện sắp xếp theo collection\r\n     *\r\n     * @param colName       // tên cột muôn sắp xếp\r\n     */\r\n    sortTable(colName, colName2?){\r\n      switch (colName) {\r\n        case 'code':\r\n          if(this.codeCol){\r\n            this.listShow = this.vhAlgorithm.sortStringbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortStringbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'date_validity':\r\n          if(this.date_validityCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'date_used':\r\n          if(this.date_usedCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'price_paymnent_card':\r\n          if(this.price_paymnent_cardCol){\r\n            this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        case 'status':\r\n          if(this.statusCol){\r\n            this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n          }\r\n          break;\r\n        default:\r\n          if(this.date_soldPoints_exchangedCol){\r\n            this.listShow = this.vhAlgorithm.sortDatebyASC([...this.listShow], colName2? colName2: colName);\r\n          }else{\r\n            this.listShow = this.vhAlgorithm.sortDatebyDESC([...this.listShow], colName2? colName2: colName);\r\n          }\r\n      }\r\n    }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"12\" class=\"title left-all-content\">\r\n            <b>{{ releaseVoucher.name }}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{'Search card code' | translate}}\" [(ngModel)]=\"stateObj.searchValue\" (keyup)=\"searchCode(stateObj.searchValue)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n            <nz-select style=\"width: 100%;\" nzBorderless [(ngModel)]=\"stateObj.selectedValue\" (ngModelChange)=\"sortFilter($event)\">\r\n                <nz-option *ngFor=\"let option of statusList\" nzLabel=\"{{option.name}}\" nzValue=\"{{option.id}}\"></nz-option>\r\n            </nz-select>\r\n\r\n        </div>\r\n        <div nz-col nzSpan=\"2\" class=\"right-all-content\">\r\n            <button class=\"btn-green center-all-content\" nz-button nzType=\"default\" (click)=\"viewData()\">\r\n              <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n              {{'View' | translate}}\r\n          </button>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 4px;\">\r\n        <span>Tổng <b style=\"color: #DD3341;\">{{listShow.length}}</b> mã thẻ</span>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\" *ngIf=\"listShow.length\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataShow [nzData]=\"listShow\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"codeCol = !codeCol;sortTable('code')\" nzWidth=\"15%\">\r\n                        <b>{{'Card code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\" nzWidth=\"20%\" nzAlign=\"center\">\r\n                        <b>{{'Release date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_soldPoints_exchangedCol = !date_soldPoints_exchangedCol;sortTable('date_soldPoints_exchanged')\" nzWidth=\"17%\" nzAlign=\"center\">\r\n                        <b>{{'Sale/exchange date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_soldPoints_exchangedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_usedCol = !date_usedCol;sortTable('date_used')\" nzWidth=\"17%\" nzAlign=\"center\">\r\n                        <b>{{'Usage date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_usedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_usedCol = !date_usedCol;sortTable('date_used')\" nzWidth=\"16%\">\r\n                        <b>{{'Current status' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_usedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"price_paymnent_cardCol = !price_paymnent_cardCol;sortTable('price_paymnent_card')\" nzWidth=\"15%\" nzAlign=\"right\">\r\n                        <b>{{'Card value' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"price_paymnent_cardCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataShow.data; let i = index\">\r\n                    <td> {{ data.code }}</td>\r\n                    <td nzAlign=\"center\"> {{data.date_validity |date: 'dd/MM/yyyy HH:mm'}} </td>\r\n                    <td nzAlign=\"center\">\r\n                        <span *ngIf=\"data.date_sold || data.date_points_exchanged\"> {{data.date_sold || data.date_points_exchanged |date: 'dd/MM/yyyy HH:mm'}}  </span>\r\n                        <span *ngIf=\"!data.date_sold && !data.date_points_exchanged\">-</span>\r\n                    </td>\r\n                    <td nzAlign=\"center\">\r\n                        <span *ngIf=\"data.date_used\"> {{data.date_used |date: 'dd/MM/yyyy HH:mm'}}  </span>\r\n                        <span *ngIf=\"!data.date_used\">-</span>\r\n                    </td>\r\n                    <td [ngSwitch]=\"data.status\">\r\n                        <span *ngSwitchCase=\"1\">\r\n                          <ng-container *ngIf=\"!checkExpried(data.date_expire); else elseTemplate\">\r\n                              <b> {{'_Issued' | translate}}</b>\r\n                          </ng-container>\r\n                          <ng-template #elseTemplate>\r\n                              <b style=\"color: var(--ion-color-vh-gray);\"> {{'Expired' | translate}}</b>\r\n                          </ng-template>\r\n                      </span>\r\n                        <span *ngSwitchCase=\"2\"><b style=\"color: var(--ion-color-vh-green)\">{{'Sold' | translate}}</b></span>\r\n                        <span *ngSwitchCase=\"3\"><b style=\"color: var(--ion-color-vh-green)\">{{'Redeemed from accumulated points' | translate}}</b></span>\r\n                        <span *ngSwitchCase=\"4\"><b style=\"color: var(--ion-color-vh-red)\">{{'Used for goods exchange' | translate}}</b></span>\r\n\r\n                    </td>\r\n                    <td nzAlign=\"right\"> {{ vhAlgorithm.vhcurrencyunit(data.price_paymnent_card)}} </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!listShow.length\"></nz-empty>\r\n    </div>\r\n</nz-layout>","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"24\" class=\"title left-all-content\">\r\n            <b>{{'Card activity report' | translate}}</b>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 4px;\">\r\n        <span>Tổng <b style=\"color: #DD3341;\">{{listReleases.length}}</b> đợt</span>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\" *ngIf=\"listReleases.length\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleases [nzData]=\"listReleases\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\" nzWidth=\"60%\" nzAlign=\"left\">\r\n                        <b>{{'Issuance name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"payment_card_soldCol = !payment_card_soldCol;sortTable('payment_card_sold')\" nzWidth=\"20%\" nzAlign=\"center\">\r\n                        <b>{{'Sold card' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"payment_card_soldCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"total_payment_card_codeCol = !total_payment_card_codeCol;sortTable('total_payment_card_code')\" nzWidth=\"20%\" nzAlign=\"center\">\r\n                        <b>{{'Issued card' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"total_payment_card_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataReleases.data; let i = index\" (click)=\"gotoDetail(data)\">\r\n                    <td nzAlign=\"left\"> {{ data.name }}</td>\r\n                    <td nzAlign=\"center\">\r\n                        {{data.payment_card_sold}}\r\n                    </td>\r\n                    <td nzAlign=\"center\">\r\n                        {{data.total_payment_card_code}}\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!listReleases.length\"></nz-empty>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuery, VhQuerySales, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { release } from 'os';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n@Component({\r\n  selector: 'app-report',\r\n  templateUrl: './report.component.html',\r\n  styleUrls: ['./report.component.scss']\r\n})\r\nexport class ReportComponent implements OnInit {\r\n  public listReleases:any[] = [];                           // danh sách đợt card\r\n  public heightScroll: string;                              // chiều cao scroll\r\n  public listCard:any[] = [];                            // danh sách card\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuery: VhQuery,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhQuerySales: VhQuerySales,\r\n    private vhComponent:VhComponent,\r\n    private vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getListReleases();\r\n  }\r\n  // lấy danh sách đợt phát hành card\r\n  getListReleases() {\r\n     this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getPaymentCardReleases().then((releases: any)=>{\r\n        for (let iterator of releases) {\r\n          this.vhQuerySales.getPaymentCardRelaseDetail_byFields({ id_payment_card_release: {$eq: iterator._id}},{},{},0)\r\n          .then((release_details:any)=>{\r\n            let total_voucher_code = 0;\r\n            let voucher_sold = 0;\r\n\r\n            let promise = new Array();\r\n            for (let i = 0; i < release_details.length; i++) {\r\n              promise[i] = this.vhQuerySales.getPaymentCardCodes_byIdPaymentCardReleaseDetail(release_details[i]._id)\r\n            }\r\n            this.vhQuery.asyncPromiseAll(promise).then((array: any[])=>{\r\n              array.forEach(element => {\r\n                total_voucher_code = total_voucher_code + element.length;\r\n                voucher_sold = voucher_sold + element.filter(item => item.date_sold || item.date_points_exchanged ).length;\r\n                iterator['total_payment_card_code'] = total_voucher_code;\r\n                iterator['payment_card_sold'] = voucher_sold;\r\n                this.listReleases = this.vhAlgorithm.sortStringbyDESC(releases,['name']);\r\n              });\r\n              this.vhComponent.hideLoading(0)\r\n            }, error=>{\r\n              \r\n              this.vhComponent.hideLoading(0)\r\n            })\r\n          }, error=>{\r\n            \r\n            this.vhComponent.hideLoading(0)\r\n          })\r\n        }\r\n        if(!releases.length)    this.vhComponent.hideLoading(0)\r\n      }, error=>{\r\n        \r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n     })\r\n  }\r\n  goBack(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/card-goods'])\r\n  }\r\n  gotoDetail(item){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/card-goods/report/detail'],\r\n    {\r\n      state: item\r\n    })\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\")  &&\r\n    document.querySelector(\".ant-table-thead\") &&\r\n    document.querySelector(\".product-list-header\") &&\r\n    document.querySelector(\".left-all-content\") &&\r\n    document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  payment_card_soldCol = false;\r\n  total_payment_card_codeCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.listReleases = this.vhAlgorithm.sortVietnamesebyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortVietnamesebyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n      case 'payment_card_sold':\r\n        if(this.payment_card_soldCol){\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n      case 'total_payment_card_code':\r\n        if(this.total_payment_card_codeCol){\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyASC([...this.listReleases], colName);\r\n        }else{\r\n          this.listReleases = this.vhAlgorithm.sortNumberbyDESC([...this.listReleases], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import { DetailComponent } from './detail/detail.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReportComponent } from './report.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportComponent\r\n  },\r\n  {\r\n    path: 'detail',\r\n    component: DetailComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ReportComponent,DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class ReportModule { }\r\n"],"names":["i0","ctx_r8","ctx_r10","ctx_r11","ctx_r0","ReportComponent","constructor","router","vhQuery","cdRef","vhQuerySales","vhComponent","vhAlgorithm","ngOnInit","getListReleases","showLoading","then","getPaymentCardReleases","releases","iterator","getPaymentCardRelaseDetail_byFields","id_payment_card_release","$eq","_id","release_details","total_voucher_code","voucher_sold","promise","Array","i","length","getPaymentCardCodes_byIdPaymentCardReleaseDetail","asyncPromiseAll","array","forEach","element","filter","item","date_sold","date_points_exchanged","listReleases","sortStringbyDESC","hideLoading","error","goBack","navigate","gotoDetail","state","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","sortTable","colName","nameCol","sortVietnamesebyASC","sortVietnamesebyDESC","payment_card_soldCol","sortNumberbyASC","sortNumberbyDESC","total_payment_card_codeCol","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}