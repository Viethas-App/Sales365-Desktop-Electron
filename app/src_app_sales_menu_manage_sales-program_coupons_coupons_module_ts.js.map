{"version":3,"file":"src_app_sales_menu_manage_sales-program_coupons_coupons_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/coupons/coupons.component.ts","./src/app/sales/menu/manage/sales-program/coupons/coupons.component.html","./src/app/sales/menu/manage/sales-program/coupons/coupons.module.ts","./src/app/sales/menu/manage/sales-program/coupons/list-coupons/list-coupons.component.ts","./src/app/sales/menu/manage/sales-program/coupons/list-coupons/list-coupons.component.html","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/detail.component.html","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/detail.component.ts","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/released/print/print.component.ts","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/released/print/print.component.html","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/released/released.component.ts","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/detail/released/released.component.html","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/publish-coupons.component.ts","./src/app/sales/menu/manage/sales-program/coupons/publish-coupons/publish-coupons.component.html"],"sourcesContent":["import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-coupons',\r\n  templateUrl: './coupons.component.html',\r\n  styleUrls: ['./coupons.component.scss']\r\n})\r\nexport class CouponsComponent implements OnInit {\r\n\r\n  constructor(\r\n    private vhComponent :VhComponent,\r\n    private router:Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  gotoCoupons(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/list-coupons'])\r\n  }\r\n\r\n  gotoPublish(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/publish-coupon'])\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program'])\r\n  }\r\n\r\n  gotoDesign(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/design'])\r\n\r\n  }\r\n  gotoExchangePoint(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/exchange-points'])\r\n\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\" class=\"title\">\r\n            <b>{{'Coupon' | translate}}</b>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"cus-row\">\r\n        <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n            <div class=\"ng-item center-all-content\" (click)=\"gotoCoupons()\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <ion-icon src=\"assets/icon/management/sales_program/Phieu_thanh_toan_danh_sach.svg\"></ion-icon>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <div class=\"center-text\">{{'Coupon list' | translate}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n            <div class=\"ng-item center-all-content\" (click)=\"gotoPublish()\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <ion-icon src=\"assets/icon/management/sales_program/Phieu_thanh_toan.svg\"></ion-icon>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <div class=\"center-text\">{{'Issue coupon' | translate}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n            <div class=\"ng-item center-all-content\" (click)=\"gotoDesign()\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <ion-icon src=\"assets/icon/management/sales_program/Design.svg\"></ion-icon>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <div class=\"center-text\">{{'Design coupon' | translate}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n            <div class=\"ng-item center-all-content\" (click)=\"gotoExchangePoint()\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <ion-icon src=\"assets/icon/management/sales_program/doi_diem.svg\"></ion-icon>\r\n                    </div>\r\n                </div>\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                        <div class=\"center-text\">{{'Exchange points for coupon' | translate}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CouponsComponent } from './coupons.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { ListCouponsComponent } from './list-coupons/list-coupons.component';\r\nimport { PublishCouponsComponent } from './publish-coupons/publish-coupons.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DetailComponent } from './publish-coupons/detail/detail.component';\r\nimport { ReleasedComponent } from './publish-coupons/detail/released/released.component';\r\nimport { PrintComponent } from './publish-coupons/detail/released/print/print.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CouponsComponent\r\n  },\r\n  {\r\n    path: 'list-coupons',\r\n    component: ListCouponsComponent\r\n  },\r\n  {\r\n    path: 'publish-coupon',\r\n    component: PublishCouponsComponent\r\n  },\r\n  {\r\n    path: 'publish-coupon/detail',\r\n    component: DetailComponent\r\n  },\r\n  {\r\n    path: 'publish-coupon/detail/released',\r\n    component: ReleasedComponent\r\n  },\r\n  {\r\n    path: 'design',\r\n    loadChildren: () => import('./design/design.module').then(m => m.DesignModule)\r\n  },\r\n  {\r\n    path: 'exchange-points',\r\n    loadChildren: () => import('./exchange-points/exchange-points.module').then(m => m.ExchangePointsModule)\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CouponsComponent,\r\n    ListCouponsComponent,\r\n    PublishCouponsComponent,\r\n    DetailComponent,\r\n    ReleasedComponent,\r\n    PrintComponent,\r\n\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class CouponsModule { }\r\n","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-list-coupons',\r\n  templateUrl: './list-coupons.component.html',\r\n  styleUrls: ['./list-coupons.component.scss']\r\n})\r\nexport class ListCouponsComponent implements OnInit {\r\n  show_add_coupon_modal: boolean = false\r\n  show_edit_coupon_modal: boolean = false\r\n  list_data: any = [];\r\n  form_add: FormGroup\r\n  form_edit: FormGroup\r\n  coupon_selected: any;\r\n  list_labels: any = [];\r\n  value: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuery: VhQuery,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    Promise.all([\r\n      this.vhQuerySales.getCoupons(),\r\n      this.vhQuery.getDocsByFields(\"barcode_designs\", { type: { $eq: 2 } })\r\n    ])\r\n      .then(([coupons, barcode_designs]: any) => {\r\n        this.list_data = coupons\r\n        this.list_labels = barcode_designs\r\n      })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons'])\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * khởi tạo form với các trường của coupon để tạo\r\n   */\r\n  initFormAdd() {\r\n    this.form_add = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      value: new FormControl('', Validators.required),\r\n      points: new FormControl('', Validators.required),\r\n      id_design_barcode: new FormControl(''),\r\n    })\r\n    setTimeout(() => {\r\n      if (document.querySelector(\".value\")) this.value = this.vhAlgorithm.vhnumeral(\".value\");\r\n    }, 100);\r\n\r\n  }\r\n\r\n  /**\r\n   * tạo coupon lên DB\r\n   */\r\n  addCoupons() {\r\n    // xử lý phần units của coupon để lưu\r\n    let data = this.form_add.value;\r\n    data['units'] = [{\r\n      value: parseFloat(this.value.getRawValue()),\r\n      points: data.points,\r\n      unit: '',\r\n      ratio: 1,\r\n      default: true\r\n    }]\r\n    delete data.value;\r\n    delete data.points;\r\n\r\n    if (this.form_add.valid) {\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.addCoupon(data).then((response) => {\r\n          this.show_add_coupon_modal = false\r\n          this.list_data.push(response);\r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Thêm coupon thành công\"))\r\n        }, error => {\r\n          \r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Thêm coupon thất bại\"))\r\n        })\r\n      })\r\n\r\n    }\r\n    else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng điền đầy đủ thông tin\"))\r\n  }\r\n\r\n  /**\r\n   * gán các giá trị của coupon vào form để cập nhật\r\n   * @param data \r\n   */\r\n  initFormEdit(data) {\r\n    this.form_edit = new FormGroup({\r\n      name: new FormControl(data.name, Validators.required),\r\n      value: new FormControl(data.units[0].value, Validators.required),\r\n      points: new FormControl(data.units[0].points, Validators.required),\r\n      id_design_barcode: new FormControl(data.id_design_barcode),\r\n    })\r\n    this.show_edit_coupon_modal = true\r\n    setTimeout(() => {\r\n      if (document.querySelector(\".value_edit\")) this.value = this.vhAlgorithm.vhnumeral(\".value_edit\");\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * đóng modal chỉnh sửa coupon\r\n   */\r\n  cancelEdit() {\r\n    this.show_edit_coupon_modal = false\r\n  }\r\n\r\n  /**\r\n   * lưu coupon từ form edit vào DB\r\n   */\r\n  saveCoupons() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      let data_update = { ...this.form_edit.value }\r\n      data_update['units'] = [{\r\n        value: parseFloat(this.value.getRawValue()),\r\n        points: data_update.points,\r\n        unit: '',\r\n        ratio: 1,\r\n        default: true\r\n      }]\r\n      delete data_update.value;\r\n      delete data_update.points;\r\n      this.vhQuerySales.updateCoupon(this.coupon_selected._id, data_update)\r\n        .then((bool) => {\r\n          this.vhComponent.hideLoading(0)\r\n          if (bool) {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Cập nhật thành công\"))\r\n            this.show_edit_coupon_modal = false;\r\n            this.list_data.find(item => item._id == this.coupon_selected._id).name = this.form_edit.value.name\r\n            this.list_data.find(item => item._id == this.coupon_selected._id).units = data_update.units\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Cập nhật thất bại\"))\r\n        }, error => {\r\n          \r\n        })\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * xóa coupon khỏi DB\r\n   * @param data \r\n   * @param index \r\n   */\r\n  deleleCoupons(data, index) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.deleteCoupon(data._id)\r\n        .then((rsp: any) => {\r\n          this.vhComponent.hideLoading(0);\r\n          if (rsp.vcode == 0) {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa Coupon thành công\"))\r\n            this.list_data.splice(index, 1)\r\n          } else if (rsp.vcode == 1) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Xóa không thành công, vui lòng xóa phiếu này khỏi đợt phát hành liên quan!\"), 8000)\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          \r\n        })\r\n    })\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  valueCol = false;\r\n  pointsCol = false\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'points':\r\n        if (this.pointsCol) {\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'value':\r\n        if (this.valueCol) {\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Coupon list' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"show_add_coupon_modal = true;initFormAdd()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Create coupon' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table *ngIf=\"list_data.length\" [nzScroll]=\"{ y: heightScroll }\" #dataShow [nzShowPagination]=\"false\" [nzData]=\"list_data\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\" nzWidth=\"35%\">\r\n                        <b>{{'Coupon name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"valueCol = !valueCol;sortTable('value')\" nzAlign=\"right\">\r\n                        <b>{{'Value' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"valueCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"pointsCol = !pointsCol;sortTable('points')\" nzAlign=\"center\">\r\n                        <b>{{'Exchange points' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"pointsCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"15%\"><b>{{'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_data, index as i\">\r\n                    <td> {{ data.name }}</td>\r\n                    <td nzAlign=\"right\">\r\n                        {{vhAlgorithm.vhcurrencyunit(data.units[0].value)}}\r\n                    </td>\r\n                    <td nzAlign=\"center\">\r\n                        {{data.units[0].points}}\r\n                    </td>\r\n                    <td>\r\n                        <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 16px;font-size: 1.2rem;\" (click)=\"coupon_selected = data;initFormEdit(data)\"></i>\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm (click)=\"$event.stopPropagation()\" style=\"font-size: 1.2rem;\" nzPopconfirmTitle=\"{{'Delete this coupon' | translate}}?\" nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleleCoupons(data,i)\"></i>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!list_data.length\"></nz-empty>\r\n    </div>\r\n</nz-layout>\r\n<nz-drawer [nzVisible]=\"show_add_coupon_modal\" nzPlacement=\"right\" (nzVisibleChange)=\"initFormAdd()\" nzTitle=\"{{'Add coupon' | translate}}\" [nzFooter]=\"footerTpl\" (nzOnClose)=\"show_add_coupon_modal = false\" nzWidth=\"40vw\">\r\n    <ng-container *nzDrawerContent>\r\n        <form [formGroup]=\"form_add\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Coupon name' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Payment value' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl1\">\r\n                    <input maxlength=\"15\" class=\"value\" type=\"text\" style=\"text-align: start; \" nz-input formControlName=\"value\" placeholder=\"{{'Enter value' | translate}}\" />\r\n                    <ng-template #userErrorTpl1 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Value is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Exchange points required' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl2\">\r\n                    <nz-input-number id=\"input_number\" class=\"points\" style=\"width: 100%;\" formControlName=\"points\" [nzMin]=\"0\" nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMax]=\"100000000000\" [nzStep]=\"1\"></nz-input-number>\r\n                    <ng-template #userErrorTpl2 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Points are required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Print template' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\">\r\n                    <nz-select style=\"text-align: end;\" formControlName=\"id_design_barcode\" nzPlaceHolder=\"{{'Select print template' | translate}}\">\r\n                        <nz-option nzLabel=\"{{'Undefined' | translate}}\" [nzValue]=\"''\">\r\n                        </nz-option>\r\n                        <nz-option *ngFor=\"let item of list_labels\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                        </nz-option>\r\n                    </nz-select>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n\r\n    </ng-container>\r\n    <ng-template #footerTpl>\r\n        <div style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"show_add_coupon_modal = false\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button nz-button nzType=\"primary\" (click)=\"addCoupons()\">{{'Add' | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n\r\n<nz-drawer *ngIf=\"show_edit_coupon_modal\" [nzVisible]=\"show_edit_coupon_modal\" nzPlacement=\"right\" nzTitle=\"{{'Update coupon' | translate}}\" [nzFooter]=\"footerTpl\" (nzOnClose)=\"cancelEdit()\" nzWidth=\"40vw\">\r\n    <ng-container *nzDrawerContent>\r\n        <form [formGroup]=\"form_edit\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Coupon name' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl4\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl4 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Payment value' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl5\">\r\n                    <input class=\"value_edit\" style=\"text-align: start; \" nz-input formControlName=\"value\" placeholder=\"{{'Enter value' | translate}}\" />\r\n                    <ng-template #userErrorTpl5 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Value is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Exchange points required' | translate}}*</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\" [nzErrorTip]=\"userErrorTpl6\">\r\n                    <nz-input-number id=\"input_number\" class=\"points\" style=\"width: 100%;\" formControlName=\"points\" [nzMin]=\"0\" nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMax]=\"100000000000\" [nzStep]=\"1\"></nz-input-number>\r\n                    <ng-template #userErrorTpl6 let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Points are required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"8\"><b>{{'Print template' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"14\">\r\n                    <nz-select style=\"text-align: end;\" formControlName=\"id_design_barcode\" nzPlaceHolder=\"{{'Select print template' | translate}}\">\r\n                        <nz-option nzLabel=\"{{'Undefined' | translate}}\" [nzValue]=\"''\">\r\n                        </nz-option>\r\n                        <nz-option *ngFor=\"let item of list_labels\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n                        </nz-option>\r\n                    </nz-select>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n\r\n    </ng-container>\r\n    <ng-template #footerTpl>\r\n        <div style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"cancelEdit()\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button nz-button nzType=\"primary\" (click)=\"saveCoupons()\">{{'Save' | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{root.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addCoupon() \">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Select issued coupon' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table *ngIf=\"list_data.length\" [nzScroll]=\"{ y: heightScroll }\" #dataShow [nzShowPagination]=\"false\" [nzData]=\"list_data\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"coupon_nameCol = !coupon_nameCol;sortTable('coupon_name')\">\r\n                        <b>{{'Coupon_name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"coupon_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"valueCol = !valueCol;sortTable('value')\">\r\n                        <b>{{'Value' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"valueCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"quantity_releasedCol = !quantity_releasedCol;sortTable('quantity_released')\" nzAlign=\"center\">\r\n                        <b>{{'Issued quantity' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"quantity_releasedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\"><b>{{'Release' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataShow.data, index as i\">\r\n                    <td><i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Xóa coupon khỏi đợt này?'}}\" (nzOnConfirm)=\"deleteCouponsOfRelease(data)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red);\" nz-icon nzType=\"close\"\r\n                            nzTheme=\"outline\"></i></td>\r\n                    <td> {{ data.coupon_name }}</td>\r\n                    <td> {{vhAlgorithm.vhcurrencyunit_symbol( data.value) }}</td>\r\n                    <td nzAlign=\"center\">\r\n                        {{data.quantity_released}}\r\n                    </td>\r\n\r\n                    <td nzAlign=\"center\">\r\n                        <button style=\"margin: auto;\" class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoReleased(data)\">\r\n                    {{'Release'|translate}}\r\n                  </button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!list_data.length\">\r\n            {{'Không có coupons'}}\r\n        </nz-empty>\r\n    </div>\r\n</nz-layout>\r\n\r\n<nz-modal [(nzVisible)]=\"isVisibleModalAdd\" nzTitle=\"{{'Select coupon' | translate}}\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"handleOk()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-checkbox-group style=\"display: grid;\" [(ngModel)]=\"list_show_coupons\"></nz-checkbox-group>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!list_show_coupons.length\" nzNotFoundContent=\"{{'No more coupons!' | translate}}\"></nz-empty>\r\n    </ng-container>\r\n</nz-modal>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  list_data: any = [];\r\n  root: any;\r\n  isVisibleModalAdd: boolean = false;\r\n  coupons: any = [];\r\n  list_show_coupons: any = [];\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuery:VhQuery\r\n  ) {\r\n    this.root = this.router.getCurrentNavigation().extras.state\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData()\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu CouponRelaseDetail và coupons để chọn vào đợt\r\n   */\r\n  getData() {\r\n    Promise.all([\r\n      this.vhQuerySales.getCouponRelaseDetail_byIdCouponRelease( this.root.id_coupon_release ),\r\n      this.vhQuerySales.getCoupons(),\r\n    ])\r\n      .then(([release_details, coupons]: any) => {\r\n        this.coupons =  coupons\r\n        this.list_data = release_details.map(item => { return { ...item, coupon_name : this.coupons.find(ele => ele._id == item.id_coupon).name , value : this.coupons.find(ele => ele._id == item.id_coupon).units[0].value, id_design_barcode : this.coupons.find(ele => ele._id == item.id_coupon).id_design_barcode }})\r\n      })\r\n  }\r\n\r\n  /**\r\n   * mở modal chọn coupn vào đợt phát hành\r\n   */\r\n  addCoupon() {\r\n    this.isVisibleModalAdd = true;\r\n    this.list_show_coupons = this.coupons.filter(ele => !this.list_data.find(i => i.id_coupon == ele._id)).map(item => { return { label: item.name, name: item.name, value: item._id, value_coupon: item.units[0].value } })\r\n    \r\n\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/publish-coupon'])\r\n  }\r\n\r\n  gotoReleased(coupon) {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/publish-coupon/detail/released'], { state: { ...coupon, name: this.root.name, date_validity : this.root.date_validity, date_expire : this.root.date_expire } })\r\n  }\r\n\r\n  /**\r\n   * đóng modal chọn coupon vào đợt và ko lưu\r\n   */\r\n  handleCancel() {\r\n    this.isVisibleModalAdd = false\r\n  }\r\n\r\n  /**\r\n   * xử lý thêm coupon vào đợt phát hành\r\n   */\r\n  handleOk() {\r\n    let arr = this.list_show_coupons.filter(item => item.checked)\r\n    this.isVisibleModalAdd = false;\r\n    let promise = new Array();\r\n    for (let i in arr) {\r\n      promise[i] = this.vhQuerySales.addCouponReleaseDetail(  {\r\n        id_coupon: arr[i].value,\r\n        id_coupon_release: this.root.id_coupon_release,\r\n        quantity_released : 0\r\n      })\r\n    }\r\n    this.vhQuery.asyncPromiseAll(promise).then((array) => {\r\n      this.list_data = this.list_data.concat(arr.map((item, index) => {\r\n        return {\r\n          name: item.name, _id: array[index]._id, quantity_released: 0, value: item.value_coupon, coupon_name: item.name, id_coupon: array[index].id_coupon,\r\n          id_coupon_release: this.root.id_coupon_release, id_design_barcode : item.id_design_barcode\r\n        }\r\n      }))\r\n      \r\n\r\n    },\r\n      error => { })\r\n\r\n  }\r\n\r\n  /**\r\n   * xóa coupon khỏi đợt này\r\n   */\r\n\tdeleteCouponsOfRelease(data) {\r\n\t\tthis.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n\t\t\tthis.vhQuerySales.deleteCouponReleaseDetail(data._id)\r\n\t\t\t\t.then((rsp:any)=>{\r\n\t\t\t\t\tthis.vhComponent.hideLoading(0);\r\n\t\t\t\t\tif(rsp.vcode == 0){\r\n\t\t\t\t\t\tthis.list_data = this.list_data.filter(item => item._id != data._id)\r\n\t\t\t\t\t\tthis.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa thành công\"))\r\n\t\t\t\t\t}else if(rsp.vcode == 1){\r\n\t\t\t\t\t\tthis.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không thể xóa vì có phiếu thanh toán liên quan đã được đổi điểm hoặc sử dụng thanh toán\"),8000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, error=>{\r\n\t\t\t\t\tthis.vhComponent.hideLoading(0);\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n  /** hàm sort cho các cột */\r\n  coupon_nameCol = false;\r\n  valueCol = false;\r\n  quantity_releasedCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'coupon_name':\r\n        if(this.coupon_nameCol){\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'value':\r\n        if(this.valueCol){\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'quantity_released':\r\n        if(this.quantity_releasedCol){\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import QRCode from 'qrcode';\r\nimport { ChangeDetectorRef, Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport JsBarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print',\r\n  templateUrl: './print.component.html',\r\n  styleUrls: ['./print.component.scss']\r\n})\r\nexport class PrintComponent implements OnInit {\r\n  @Input() stamp: any;\r\n  @Input() start_print: any;\r\n  @Input() data: any;\r\n  heightScroll: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdf: ChangeDetectorRef\r\n  ) {\r\n    // this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    // \r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n  }\r\n\r\n  ngOnChanges({ start_print }: SimpleChanges): void {\r\n    // \r\n\r\n    if (start_print && start_print.currentValue) {\r\n      // this.renderBarcode();\r\n      setTimeout(() => {\r\n        this.printBrowser()\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  changeNummber() {\r\n    // this.listRowBarcode = []\r\n    // for (let i = 0; i < this.stamp.number; i++) {\r\n    //   this.listRowBarcode.push(true);\r\n    // }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (document.querySelector(\".barcode\"))\r\n      this.renderBarcode();\r\n    if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n    this.cdf.detectChanges();\r\n  }\r\n\r\n  renderBarcode() {\r\n    if (this.data)\r\n      for (let i in this.data) {\r\n        if (this.data[i].code)\r\n          QRCode.toCanvas(document.getElementById(this.data[i].code), this.data[i].code,{ width: parseInt(this.stamp.property[3].height) * 3.78 }, function (error) {\r\n            if (error) console.error(error)\r\n          })\r\n        if (this.data[i].code)\r\n          JsBarcode(\".barcode\", this.data[i].code, {\r\n            displayValue: false,\r\n\r\n          });\r\n      }\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<!-- <div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div> -->\r\n<nz-layout>\r\n    <!-- <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div> -->\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\"\r\n            [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*stamp.col,'height.mm': stamp.height,'margin-bottom':i == data.length -1 ? '0' : ''}\"\r\n                    class=\"stamp \" style=\"display: flex;margin-bottom: 4mm;\" *ngFor=\"let item of data, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.width,'height.mm': stamp.height }\"  style=\"position: relative;\" class=\"border-top\"\r\n                    >\r\n                    <img  *ngIf=\"stamp.display_img\" width=\"100%\" [src]=\"stamp.img\" alt=\"assets/img/default_voucher.jpg\" onerror=\"this.src='./assets/img/default_voucher.jpg'\">\r\n                    <div   *ngFor=\"let ele of stamp.property\" \r\n                        style=\"display: flex;position: absolute;overflow: hidden; \" \r\n                        [ngStyle]=\"{\r\n                        'font-size.px': ele.font_size, \r\n                        'font-weight': ele.font_weight  , \r\n                        'text-decoration': ele.text_decoration ,\r\n                        'font-style': ele.font_style  ,\r\n                        'top.px': ele.y,\r\n                        'width.mm': ele.width,\r\n                        'left.px': ele.x,\r\n                        'height.mm': ele.height ,\r\n                        'justify-content':ele.type == 'barcode' ? ele.justify_content : ''\r\n                        }\">\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'date_validity'\">\r\n                            {{'Release date' | translate}} : {{item.date_validity | date:\"dd/MM/yyyy\"}}<br>\r\n\r\n                        </span>\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'date_expire'\">\r\n                            {{'_Expiration date' | translate}} : {{item.date_expire | date:\"dd/MM/yyyy\"}}\r\n                        </span>\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'barcode-text'\">\r\n                              {{item.code }}\r\n                        </span>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'qr' && ele.status\" [id]=\"'canvas'+ i\"></canvas>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'barcode' && ele.status\" class=\"barcode\"></canvas>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-released',\r\n  templateUrl: './released.component.html',\r\n  styleUrls: ['./released.component.scss']\r\n})\r\nexport class ReleasedComponent implements OnInit {\r\n  release: any;\r\n  list_data: any = [];\r\n  list_search_data: any = [];\r\n  list_filter_data: any = [];\r\n  isVisibleModal: boolean = false\r\n  isVisibleModalEdit: boolean = false\r\n  form: FormGroup\r\n  search_value: string = ''\r\n  filterValue: any = 'all'\r\n  data_selected: any;\r\n  barcode_designs: any;\r\n  start_print: boolean = false;\r\n  list_print_data: any[] = [];\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuery: VhQuery,\r\n    public vhComponent: VhComponent,\r\n    private functionService: FunctionService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService\r\n  ) {\r\n    this.release = this.router.getCurrentNavigation().extras.state;\r\n    \r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.release.id_design_barcode)\r\n      Promise.all([\r\n        this.vhQuerySales.getCouponCodes_byIdCouponReleaseDetail(this.release._id),\r\n        this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $eq: 2 } })\r\n      ])\r\n        .then(([product_codes, barcode_designs]: any) => {\r\n          this.list_data = product_codes.map(item => { return { ...item, status: item.status } });\r\n          this.list_search_data = this.list_data;\r\n          this.list_filter_data = this.list_data;\r\n          this.barcode_designs = barcode_designs.find(item => item._id == this.release.id_design_barcode);\r\n          \r\n\r\n        })\r\n    else {\r\n      this.vhQuerySales.getCouponCodes_byIdCouponReleaseDetail(this.release._id)\r\n        .then((product_codes: any) => {\r\n          this.list_data = product_codes.map(item => { return { ...item, status: item.status } });\r\n          this.list_search_data = this.list_data;\r\n          this.list_filter_data = this.list_data;\r\n        })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * mở modal tạo số lượng mã phát hành\r\n   */\r\n  initForm() {\r\n    this.isVisibleModal = true;\r\n    this.form = new FormGroup({\r\n      number: new FormControl(1, Validators.required),\r\n    })\r\n  }\r\n\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 70 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  goBack() {\r\n\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/publish-coupon/detail'], { state: this.release })\r\n  }\r\n\r\n  /**\r\n   * lọc mã phát hành theo code\r\n   */\r\n  search(value) {\r\n    this.list_data = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value.toLowerCase()), this.list_search_data, [\"code\"])\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok modal tạo số lượng mã phát hành\r\n   */\r\n  addProductCode() {\r\n    if (new Date() < new Date(this.release.date_expire)) {\r\n      this.vhComponent.showLoading('')\r\n        .then(() => {\r\n          this.vhQuerySales.createCouponCodes({\r\n            date_validity: new Date(this.release.date_validity),\r\n            date_expire: new Date(this.release.date_expire),\r\n            id_coupon_release_detail: this.release._id,\r\n            id_coupon: this.release.id_coupon,\r\n            ratio: 1\r\n          }, this.form.value.number)\r\n            .then((coupon_codes) => {\r\n              \r\n              this.list_data = this.list_data.concat(coupon_codes)\r\n              this.list_filter_data = this.list_filter_data.concat([coupon_codes])\r\n              this.list_search_data = this.list_search_data.concat([coupon_codes])\r\n              this.isVisibleModal = false;\r\n              // this.vhQuerySales.updateCouponReleaseDetail\r\n            }, error => {\r\n              \r\n            }).finally(() => this.vhComponent.hideLoading(0))\r\n        })\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Ngày hiện tại đang lớn hơn ngày hết hạn của đợt này!\"))\r\n    }\r\n  }\r\n\r\n  checkExpried(date_expire) {\r\n    return new Date() > new Date(date_expire)\r\n  }\r\n  //  lọc mã coupon theo trạng thái \r\n  filter(event) {\r\n    if (event == 'all') {\r\n      this.list_search_data = this.list_filter_data\r\n    }\r\n    else {\r\n      if (event == 1) this.list_search_data = this.list_filter_data.filter(item => !this.checkExpried(item.date_expire) && item.status == 1)\r\n      else if (event == 5) this.list_search_data = this.list_filter_data.filter(item => this.checkExpried(item.date_expire) && item.status == 1)\r\n      else this.list_search_data = this.list_filter_data.filter(item => item.status == event)\r\n    }\r\n    this.search(this.search_value)\r\n  }\r\n\r\n  /**\r\n   * xóa mã phát hành khỏi DB\r\n   */\r\n  deleteProductCode(data) {\r\n    this.vhQuerySales.deleteCouponCode(data._id, data.id_coupon_release_detail)\r\n      .then(bool => {\r\n        if (bool) {\r\n          this.list_data = this.list_data.filter(item => item._id != data._id)\r\n          this.list_filter_data = this.list_filter_data.filter(item => item._id != data._id)\r\n          this.list_search_data = this.list_search_data.filter(item => item._id != data._id)\r\n        }\r\n      }, error => {\r\n        \r\n      })\r\n  }\r\n\r\n  /**\r\n   * xuất file excel và tải về\r\n   */\r\n  export() {\r\n    let data = [];\r\n    let name = `${this.languageService.translate(\"_list_of_barcodes\")}`;\r\n    for (let _row of this.list_data) {\r\n      let item: any = new Object();\r\n      item[this.languageService.translate('Mã phiếu')] = _row._id;\r\n      item[this.languageService.translate('Ngày phát hành')] = this.functionService.formatDate(_row.date_validity);\r\n      item[this.languageService.translate('Ngày hết hạn')] = this.functionService.formatDate(_row.date_expire);\r\n      data.push(item);\r\n    }\r\n    this.vhAlgorithm.exportXLSX(data, name)\r\n  }\r\n\r\n  /**\r\n   * in mã thẻ\r\n   * @param data \r\n   */\r\n  print(data) {\r\n    if (this.barcode_designs) {\r\n      this.list_print_data = data\r\n      this.start_print = true;\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn chưa chọn mẫu in cho coupon này!\"))\r\n    }\r\n  }\r\n\r\n  /** phần này để làm mở rộng cho table - code mẫu từ library ant ngzorro */\r\n  checked = false;\r\n  loading = false;\r\n  indeterminate = false;\r\n  listOfCurrentPageData: any = [];\r\n  setOfCheckedId = new Set<string>();\r\n\r\n  updateCheckedSet(id: string, checked: boolean): void {\r\n    if (checked) {\r\n      this.setOfCheckedId.add(id);\r\n    } else {\r\n      this.setOfCheckedId.delete(id);\r\n    }\r\n  }\r\n\r\n  onCurrentPageDataChange(listOfCurrentPageData): void {\r\n    this.listOfCurrentPageData = listOfCurrentPageData;\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  refreshCheckedStatus(): void {\r\n    const listOfEnabledData = this.listOfCurrentPageData;\r\n    this.checked = listOfEnabledData.every(({ id }) => this.setOfCheckedId.has(id));\r\n    this.indeterminate = listOfEnabledData.some(({ id }) => this.setOfCheckedId.has(id)) && !this.checked;\r\n  }\r\n\r\n  onItemChecked(id: string, checked: boolean): void {\r\n    this.updateCheckedSet(id, checked);\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  onAllChecked(checked: boolean): void {\r\n    this.listOfCurrentPageData\r\n      .forEach(({ _id }) => this.updateCheckedSet(_id, checked));\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  printAll(): void {\r\n    this.loading = true;\r\n    let requestData = this.list_data.filter(data => this.setOfCheckedId.has(data._id)).slice(0, 20);\r\n    this.print(requestData)\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  codeCol = false;\r\n  date_validityCol = false;\r\n  date_expireCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'code':\r\n        if (this.codeCol) {\r\n          this.list_data = this.vhAlgorithm.sortStringbyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortStringbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'date_validity':\r\n        if (this.date_validityCol) {\r\n          this.list_data = this.vhAlgorithm.sortDatebyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortDatebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'date_expire':\r\n        if (this.date_expireCol) {\r\n          this.list_data = this.vhAlgorithm.sortDatebyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortDatebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\" style=\"padding: 8px 0;\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <b>{{release.coupon_name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" style=\"display: flex;align-items: center;justify-content: space-between;\">\r\n            <nz-input-group style=\"width: 45%;\" [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Search by code' | translate}}\" [(ngModel)]=\"search_value\" (ngModelChange)=\"search($event)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n            <nz-select nzPlaceHolder=\"{{'Select status' | translate}}\" [ngModel]=\"filterValue\" (ngModelChange)=\"filter($event)\" style=\"width: 45%;\">\r\n                <nz-option nzValue=\"all\" nzLabel=\"{{'All' | translate}}\"></nz-option>\r\n                <nz-option nzValue=\"1\" nzLabel=\"{{'_Issued' | translate}}\"></nz-option>\r\n                <nz-option nzValue=\"3\" nzLabel=\"{{'Redeemed from accumulated points' | translate}}\"></nz-option>\r\n                <nz-option nzValue=\"4\" nzLabel=\"{{'Used' | translate}}\"></nz-option>\r\n                <nz-option nzValue=\"5\" nzLabel=\"{{'Expired' | translate}}\"></nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\" right-all-content\">\r\n            <button style=\"margin-right: 16px;\" nz-button nzType=\"default\" (click)=\"export()\">\r\n                <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                {{'Download'|translate}}\r\n            </button>\r\n            <button (click)=\"printAll()\" style=\"margin-right: 16px;\" nz-button nzType=\"default\" nz-tooltip nzTooltipTitle=\"{{'Maximum 20 coupons per print' | translate}}\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}} tất cả\r\n            </button>\r\n\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"initForm()\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                {{'Create Coupon Code' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table *ngIf=\"list_data.length\" [nzScroll]=\"{ y: heightScroll }\" #dataShow nzShowPagination nzShowSizeChanger [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzData]=\"list_data\" (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\" [nzChecked]=\"checked\" [nzIndeterminate]=\"indeterminate\" (nzCheckedChange)=\"onAllChecked($event)\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"codeCol = !codeCol;sortTable('code')\">\r\n                        <b>{{'Receipt kitchen' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\">\r\n                        <b>{{'Starting date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_expireCol = !date_expireCol;sortTable('date_expire')\">\r\n                        <b>{{'Expiration date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"date_expireCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th><b>{{'Status' | translate}}</b></th>\r\n                    <th nzAlign=\"center\"><b>{{'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataShow.data, index as i\">\r\n                    <td [nzChecked]=\"setOfCheckedId.has(data._id)\" (nzCheckedChange)=\"onItemChecked(data.code, $event)\">\r\n                    </td>\r\n                    <td> {{ data.code }} <i style=\"cursor: pointer\" (click)=\"$event.stopPropagation(); vhComponent.copyValue(data.code)\" nz-icon nzType=\"copy\" nzTheme=\"outline\"></i></td>\r\n                    <td> {{ data.date_validity | date :\"dd/MM/yyyy\" }}</td>\r\n                    <td> {{ data.date_expire| date :\"dd/MM/yyyy\" }}</td>\r\n                    <td>\r\n                        <ng-container>\r\n                            <span [ngSwitch]=\"data.status\">\r\n                                <span *ngSwitchCase=\"1\" style=\"color: var(--ion-color-vh-black);\">\r\n                                    <ng-container *ngIf=\"!checkExpried(data.date_expire); else elseTemplate\">\r\n                                        <span> {{'_Issued' | translate}}</span>\r\n                        </ng-container>\r\n                        <ng-template #elseTemplate>\r\n                            <span style=\"color: var(--ion-color-vh-gray);\"> {{'Expired' | translate}}</span>\r\n                        </ng-template>\r\n                        </span>\r\n                        <span *ngSwitchCase=\"3\" style=\"color: var(--ion-color-vh-green);\">\r\n                                    {{'Redeemed from accumulated points' | translate}}\r\n                                </span>\r\n                        <span *ngSwitchCase=\"4\" style=\"color: var(--ion-color-vh-red);\">\r\n                                    {{'Used for payment' | translate}}\r\n                                </span>\r\n\r\n                        </span>\r\n                        </ng-container>\r\n\r\n                    </td>\r\n                    <td nzAlign=\"center\" class=\"center-all-content\">\r\n                     \r\n                        <button nz-button [disabled]=\"data.status != 1\" class=\"  btn_content\">\r\n                            <i style=\" font-size: 1.2rem;\" nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                                nz-popconfirm (click)=\"$event.stopPropagation()\"\r\n                                nzPopconfirmTitle=\"{{'Delete this coupon' | translate}}?\"\r\n                                nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleteProductCode(data)\"></i>\r\n                        </button>\r\n                        <button nz-button class=\"  btn_content\">\r\n                            <i (click)=\"print([data])\" style=\"font-size: 1.2rem;\" nz-icon nzType=\"printer\"\r\n                            nzTheme=\"outline\"></i>\r\n                        </button>\r\n\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!list_data.length\"></nz-empty>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal [(nzVisible)]=\"isVisibleModal\" nzTitle=\"{{'Create coupon code' | translate}}\" (nzOnCancel)=\"isVisibleModal = false\" (nzOnOk)=\"addProductCode()\">\r\n    <ng-container *nzModalContent>\r\n        <form [formGroup]=\"form\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Issued coupon quantity' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-input-number style=\"width: 100%;\" formControlName=\"number\" [nzMin]=\"1\" nzPlaceHolder=\"{{'Enter number' | translate}}\" [nzMax]=\"200\" [nzStep]=\"1\">\r\n                    </nz-input-number>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Number is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n           \r\n        </form>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<app-print style=\"display: none;\" *ngIf=\"barcode_designs && list_print_data\" [stamp]=\"barcode_designs\" [start_print]=\"start_print\" [data]=\"list_print_data\"></app-print>","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-publish-coupons',\r\n  templateUrl: './publish-coupons.component.html',\r\n  styleUrls: ['./publish-coupons.component.scss']\r\n})\r\nexport class PublishCouponsComponent implements OnInit {\r\n  isVisibleModalAdd: boolean = false\r\n  isVisibleModalEdit: boolean = false\r\n  list_data: any = []\r\n  data_selected: any = {};\r\n  form: FormGroup\r\n  form_edit: FormGroup\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.vhQuerySales.getCouponReleases()\r\n      .then((response: any) => {\r\n        this.list_data = response\r\n        \r\n      })\r\n\r\n  }\r\n  // khởi tạo form thêm đợt phát hành coupon\r\n  initForm() {\r\n    this.isVisibleModalAdd = true;\r\n    this.form = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      date_validity: new FormControl(new Date(new Date().setHours(0, 0, 0)), Validators.required),\r\n      date_expire: new FormControl(new Date(new Date().setHours(23, 59, 59)), Validators.required)\r\n    })\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons'])\r\n  }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n //  Thêm đơt phát hành \r\n  addRelease() {\r\n    if (new Date(this.form.value.date_validity) < new Date(this.form.value.date_expire))\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.addCouponRelease(this.form.value)\r\n          .then((response) => {\r\n            this.vhComponent.hideLoading(0)\r\n            this.isVisibleModalAdd = false;\r\n            this.list_data.push(response)\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Thêm đợt phát hành thành công\"))\r\n          }, error => {\r\n            \r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Thêm đợt phát hành thất bại\"))\r\n          })\r\n      })\r\n\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Staring date must be less than or the same as ending date\"))\r\n    }\r\n  }\r\n  /**\r\n   * gán giá trị của đợt phát hành vào form để cập nhật\r\n   */\r\n  initFormEdit(data) {\r\n    this.isVisibleModalEdit = true;\r\n    this.form_edit = new FormGroup({\r\n      _id: new FormControl(data._id, Validators.required),\r\n      name: new FormControl(data.name, Validators.required),\r\n      date_validity: new FormControl(new Date(data.date_validity), Validators.required),\r\n      date_expire: new FormControl(new Date(data.date_expire), Validators.required)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * cập nhật đợt phát hành lên DB\r\n   */\r\n  save() {\r\n    this.vhQuerySales.updateCouponRelease(this.form_edit.value._id, this.form_edit.value)\r\n      .then((bool) => {\r\n        this.isVisibleModalEdit = false\r\n        this.list_data.find(item => item._id == this.form_edit.value._id).name = this.form_edit.value.name\r\n        this.list_data.find(item => item._id == this.form_edit.value._id).date_validity = this.form_edit.value.date_validity\r\n        this.list_data.find(item => item._id == this.form_edit.value._id).date_expire = this.form_edit.value.date_expire\r\n      }, error => {\r\n        \r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Cập nhật đợt phát hành thất bại\"))\r\n      })\r\n  }\r\n\r\n  /**\r\n   * xóa đợt phát hành khỏi DB\r\n   */\r\n  deleleData(data, index) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.deleteCouponRelease(data._id)\r\n        .then((rsp: any) => {\r\n          this.vhComponent.hideLoading(0);\r\n          if (rsp.vcode == 0) {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa đợt phát hành thành công\"))\r\n            this.list_data.splice(index, 1)\r\n          } else if (rsp.vcode == 1) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Xóa không thành công! Vui lòng xóa các phiếu đã chọn trong đợt phát hành này trước!\"), 8000)\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          \r\n        })\r\n    })\r\n\r\n  }\r\n\r\n  gotoDetail(data) {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/coupons/publish-coupon/detail'], { state: { ...data, id_coupon_release: data._id } })\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Coupon issuance list' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"initForm()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Create issuance' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table *ngIf=\"list_data.length\" [nzScroll]=\"{ y: heightScroll }\" #dataShow [nzShowPagination]=\"false\"\r\n            [nzData]=\"list_data\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\" style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Issuance name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\">\r\n                        <b>{{'Starting date' | translate}}</b>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\">\r\n                        <b>{{'Ending date' | translate}}</b>\r\n                    </th>\r\n                    <th nzAlign=\"right\" nzWidth=\"20%\"><b>{{'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_data, index as i\" (click)=\"gotoDetail(data)\" style=\"cursor: pointer;\">\r\n                    <td> {{ data.name }}</td>\r\n                    <td> {{ data.date_validity | date:'dd/MM/yyyy' }}</td>\r\n                    <td> {{ data.date_expire | date:'dd/MM/yyyy' }}</td>\r\n                    <td (click)=\"$event.stopPropagation()\" class=\"right-all-content\">\r\n                        <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 16px;font-size: 1.2rem;\"\r\n                            (click)=\"$event.stopPropagation();initFormEdit(data)\"></i>\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm style=\"font-size: 1.2rem;\"\r\n                            nzPopconfirmTitle=\"{{'Delete this coupon issuance' | translate}}?\"\r\n                            nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleleData(data,i)\"></i>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!list_data.length\"></nz-empty>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal *ngIf=\"isVisibleModalAdd\" [(nzVisible)]=\"isVisibleModalAdd\" nzTitle=\"{{'Add issuance' | translate}}\"\r\n    (nzOnCancel)=\"isVisibleModalAdd = false\" (nzOnOk)=\"addRelease()\" [nzOkDisabled]=\"form.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form [formGroup]=\"form\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Coupon issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\"\r\n                        placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n\r\n    </ng-container>\r\n</nz-modal>\r\n<nz-modal *ngIf=\"isVisibleModalEdit\" [(nzVisible)]=\"isVisibleModalEdit\"\r\n    nzTitle=\"{{'Update issuance' | translate}}\" (nzOnCancel)=\"isVisibleModalEdit = false;\"\r\n    (nzOnOk)=\"save()\" [nzOkDisabled]=\"form_edit.invalid\">\r\n    <ng-container *nzModalContent>\r\n        <form [formGroup]=\"form_edit\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Coupon issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\"\r\n                        placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n\r\n    </ng-container>\r\n</nz-modal>"],"names":["i0","$event","ctx_r11","ctx_r13","ctx_r14","ctx_r0","DetailComponent","constructor","router","cdRef","vhAlgorithm","vhQuerySales","vhComponent","languageService","vhQuery","root","getCurrentNavigation","extras","state","ngOnInit","getData","Promise","all","getCouponRelaseDetail_byIdCouponRelease","id_coupon_release","getCoupons","then","release_details","coupons","list_data","map","item","coupon_name","find","ele","_id","id_coupon","name","value","units","id_design_barcode","addCoupon","isVisibleModalAdd","list_show_coupons","filter","i","label","value_coupon","ngAfterViewChecked","document","querySelector","heightScroll","clientHeight","detectChanges","goBack","navigate","gotoReleased","coupon","date_validity","date_expire","handleCancel","handleOk","arr","checked","promise","Array","addCouponReleaseDetail","quantity_released","asyncPromiseAll","array","concat","index","error","deleteCouponsOfRelease","data","showLoading","deleteCouponReleaseDetail","rsp","hideLoading","vcode","alertMessageDesktop","translate","sortTable","colName","coupon_nameCol","sortVietnamesebyASC","sortVietnamesebyDESC","valueCol","sortNumberbyASC","sortNumberbyDESC","quantity_releasedCol","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///"}