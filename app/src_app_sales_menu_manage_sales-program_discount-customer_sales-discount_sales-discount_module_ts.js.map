{"version":3,"file":"src_app_sales_menu_manage_sales-program_discount-customer_sales-discount_sales-discount_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/list-discount/list-discount.component.ts","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/list-discount/list-discount.component.html","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/sales-discount.component.ts","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/sales-discount.component.html","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/sales-discount.module.ts","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/show-report/show-report.component.ts","./src/app/sales/menu/manage/sales-program/discount-customer/sales-discount/show-report/show-report.component.html"],"sourcesContent":["import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-list-discount',\r\n  templateUrl: './list-discount.component.html',\r\n  styleUrls: ['./list-discount.component.scss']\r\n})\r\nexport class ListDiscountComponent implements OnInit {\r\n  list_discount: any[] = [];\r\n  show_add_discount_modal = false;\r\n  show_edit_discount_modal = false;\r\n  form_add: FormGroup\r\n  form_edit: FormGroup\r\n  level1: any = { sales: 0, discount: 0 } // biến dùng để xử lý mức 1\r\n  level2: any = { sales: 0, discount: 0 }// biến dùng để xử lý mức 2\r\n  level3: any = { sales: 0, discount: 0 }// biến dùng để xử lý mức 3\r\n  level4: any = { sales: 0, discount: 0 }// biến dùng để xử lý mức 4\r\n  level5: any = { sales: 0, discount: 0 }// biến dùng để xử lý mức 4\r\n  discount_selected: any;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private vhComponent: VhComponent,\r\n    private nzModalService: NzModalService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initFormAdd();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.getData();\r\n  }\r\n\r\n  /**\r\n   * get danh sách chiết khấu doanh số\r\n   */\r\n  getData() {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.getDiscount_saless().then((response: any[]) => {\r\n        this.list_discount = this.vhAlgorithm.sortStringbyASC(response, 'name')\r\n        \r\n\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * khởi tạo form lưu các trường của chiết khấu doanh số để thêm\r\n   */\r\n  initFormAdd() {\r\n    this.form_add = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      type: new FormControl(1, Validators.required), // 1: %, 2: tiền\r\n      method: new FormControl(2, Validators.required), // 1: theo mức,2 : mức cuối\r\n      level1: new FormControl({ sales: 0, discount: 0 }, Validators.required),\r\n      level2: new FormControl({ sales: 0, discount: 0 }, Validators.required),\r\n      level3: new FormControl({ sales: 0, discount: 0 }, Validators.required),\r\n      level4: new FormControl({ sales: 0, discount: 0 }, Validators.required),\r\n      level5: new FormControl({ sales: 0, discount: 0 }, Validators.required),\r\n    })\r\n    this.level1 = { sales: 0, discount: 0 }\r\n    this.level2 = { sales: 0, discount: 0 }\r\n    this.level3 = { sales: 0, discount: 0 }\r\n    this.level4 = { sales: 0, discount: 0 }\r\n    this.level5 = { sales: 0, discount: 0 }\r\n  }\r\n\r\n  /**\r\n   * gán giá trị chiết khấu vào form để cập nhật\r\n   */\r\n  initFormEdit(discount) {\r\n    this.form_edit = new FormGroup({\r\n      _id: new FormControl(discount._id, Validators.required),\r\n      name: new FormControl(discount.name, Validators.required),\r\n      type: new FormControl(discount.type, Validators.required),\r\n      method: new FormControl(discount.method, Validators.required),\r\n      level1: new FormControl({ sales: discount.level1.sales, discount: discount.level1.discount }, Validators.required),\r\n      level2: new FormControl({ sales: discount.level2.sales, discount: discount.level2.discount }, Validators.required),\r\n      level3: new FormControl({ sales: discount.level3.sales, discount: discount.level3.discount }, Validators.required),\r\n      level4: new FormControl({ sales: discount.level4.sales, discount: discount.level4.discount }, Validators.required),\r\n      level5: new FormControl({ sales: discount.level5.sales, discount: discount.level5.discount }, Validators.required),\r\n    })\r\n    this.level1 = discount.level1\r\n    this.level2 = discount.level2\r\n    this.level3 = discount.level3\r\n    this.level4 = discount.level4\r\n    this.level5 = discount.level5\r\n    this.show_edit_discount_modal = true;\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/sales-discount'])\r\n  }\r\n\r\n\r\n  /**\r\n   * thêm chiết khấu doanh số vào DB\r\n   */\r\n  addDiscountDB() {\r\n    this.form_add.controls['level1'].setValue(this.level1);\r\n    this.form_add.controls['level2'].setValue(this.level2);\r\n    this.form_add.controls['level3'].setValue(this.level3);\r\n    this.form_add.controls['level4'].setValue(this.level4);\r\n    this.form_add.controls['level5'].setValue(this.level5);\r\n    if (this.form_add.valid)\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.addDiscount_sales(  this.form_add.value).then((response: any) => {\r\n          this.show_add_discount_modal = false\r\n          this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Add successfully discount formula\"));\r\n          this.list_discount = this.list_discount.concat([response]);\r\n\r\n            this.vhComponent.hideLoading(0);\r\n        }, error => {\r\n          \r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Thêm công thức chiết khấu thất bại\"));\r\n        })\r\n      })\r\n    else this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Please fill it out completely\"));\r\n  }\r\n\r\n  /**\r\n   * cập nhật chiết khấu doanh số lên DB khi nhấn nút lưu tại modal cập nhật công thức chiết khấu\r\n   */\r\n  updateDiscountDB() {\r\n    this.form_edit.controls['level1'].setValue(this.level1);\r\n    this.form_edit.controls['level2'].setValue(this.level2);\r\n    this.form_edit.controls['level3'].setValue(this.level3);\r\n    this.form_edit.controls['level4'].setValue(this.level4);\r\n    this.form_edit.controls['level5'].setValue(this.level5);\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.updateDiscount_sales( this.form_edit.value._id, this.form_edit.value).then((bool) => {\r\n        this.show_edit_discount_modal = false\r\n        if (bool) {\r\n          this.list_discount[this.list_discount.indexOf(this.discount_selected)] = this.form_edit.value;\r\n          this.vhComponent.hideLoading(0);\r\n        }\r\n      }, error => {\r\n        \r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Cập nhật thất bại. Vui lòng thử lại sau!\"))\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Hủy ko lưu chiết khấu\r\n   */\r\n  cancelEdit() {\r\n    this.show_edit_discount_modal = false;\r\n    this.list_discount[this.list_discount.indexOf(this.discount_selected)].level1 = this.form_edit.value.level1;\r\n    this.list_discount[this.list_discount.indexOf(this.discount_selected)].level2 = this.form_edit.value.level2;\r\n    this.list_discount[this.list_discount.indexOf(this.discount_selected)].level3 = this.form_edit.value.level3;\r\n    this.list_discount[this.list_discount.indexOf(this.discount_selected)].level4 = this.form_edit.value.level4;\r\n    this.list_discount[this.list_discount.indexOf(this.discount_selected)].level5 = this.form_edit.value.level5;\r\n  }\r\n\r\n  /**\r\n   * xóa công thức chiết khấu khỏi DB\r\n   */\r\n  deleleDiscount(data) {\r\n\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.deleteDiscount_sales(data._id).then(bool => {\r\n        this.vhComponent.hideLoading(0)\r\n        if (bool) {\r\n          this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Discount has been deleted successfully\"));\r\n          this.list_discount = this.list_discount.filter(item => item._id != data._id)\r\n        }\r\n        else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Có lỗi xảy ra khi xóa. Vui lòng thử lại sau!\"));\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * check price hợp lệ\r\n   * @param item\r\n   * @param fieldName\r\n   * @param event\r\n   */\r\n  checkEditPrice(item, fieldName, event) {\r\n    if (event)\r\n      if (fieldName == 'discount' && this.form_add.value.type == 1) item[fieldName] = parseFloat(event.toString().replaceAll(',', '')) < 0 || parseFloat(event.toString().replaceAll(',', '')) > 100 ? 0 : parseFloat(parseFloat(event.toString().replaceAll(',', '')).toFixed(2))\r\n      else item[fieldName] = parseFloat(event.toString().replaceAll(',', '')) < 0 ? 0 : parseFloat(event.toString().replaceAll(',', ''))\r\n    else item[fieldName] = 0\r\n  }\r\n\r\n\r\n  /**\r\n   * check price hợp lệ\r\n   * @param item\r\n   * @param fieldName\r\n   * @param event\r\n   */\r\n   checkEditPriceUpdate(item, fieldName, event) {\r\n    if (event)\r\n      if (fieldName == 'discount' && this.form_edit.value.type == 1) item[fieldName] = parseFloat(event.toString().replaceAll(',', '')) < 0 || parseFloat(event.toString().replaceAll(',', '')) > 100 ? 0 : parseFloat(parseFloat(event.toString().replaceAll(',', '')).toFixed(2))\r\n      else item[fieldName] = parseFloat(event.toString().replaceAll(',', '')) < 0 ? 0 : parseFloat(event.toString().replaceAll(',', ''))\r\n    else item[fieldName] = 0\r\n  }\r\n\r\n   /**\r\n   * kiểm tra doanh số mức 2 phải lớn hơn múc 1\r\n   */\r\n    checkSalesLevel1() {\r\n      if (this.level1.sales > this.level2.sales && this.level2.sales) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n        this.level1.sales = this.level2.sales - 1\r\n      }\r\n      if (this.level2.sales < this.level1.sales && this.level2.discount) {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n        this.level1.sales = this.level2.sales - 1\r\n      }\r\n    }\r\n  /**\r\n   * kiểm tra doanh số mức 2 phải lớn hơn múc 1\r\n   */\r\n  checkSalesLevel2() {\r\n    if (this.level2.sales < this.level1.sales && this.level2.sales) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level2.sales = this.level1.sales + 1\r\n    }\r\n    if (this.level2.sales < this.level1.sales && this.level2.discount) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level2.sales = this.level1.sales + 1\r\n    }\r\n  }\r\n\r\n  /**\r\n  * kiểm tra doanh số mức 3 phải lớn hơn múc 2\r\n  */\r\n  checkSalesLevel3() {\r\n    this.checkSalesLevel2()\r\n    if (this.level3.sales < this.level2.sales && this.level3.sales) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level3.sales = this.level2.sales + 1\r\n    }\r\n    if (this.level3.sales < this.level2.sales && this.level3.discount) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level3.sales = this.level2.sales + 1\r\n    }\r\n    if (!this.level2.sales && !this.level2.discount && (this.level3.sales || this.level3.discount)) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level3 = { sales: 0, discount: 0 }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * kiểm tra doanh số mức 4 phải lớn hơn múc 3\r\n   */\r\n  checkSalesLevel4() {\r\n    this.checkSalesLevel2()\r\n    this.checkSalesLevel3()\r\n    if (this.level4.sales < this.level3.sales && this.level4.sales) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level4.sales = this.level3.sales + 1\r\n    }\r\n    if (this.level4.sales < this.level3.sales && this.level4.discount) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level4.sales = this.level3.sales + 1\r\n    }\r\n    if (!this.level3.sales && !this.level3.discount && (this.level4.sales || this.level4.discount)) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level4 = { sales: 0, discount: 0 }\r\n    }\r\n  }\r\n\r\n  checkSalesLevel5() {\r\n    this.checkSalesLevel2()\r\n    this.checkSalesLevel3()\r\n    this.checkSalesLevel4()\r\n    if (this.level5.sales < this.level4.sales && this.level5.sales) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level5.sales = this.level4.sales + 1;\r\n    }\r\n    if (this.level5.sales < this.level4.sales && this.level5.discount) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level5.sales = this.level4.sales + 1;\r\n    }\r\n    if (!this.level4.sales && !this.level4.discount && (this.level5.sales || this.level5.discount)) {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Please enter sales according to each level in ascending order\"))\r\n      this.level5 = { sales: 0, discount: 0 }\r\n    }\r\n  }\r\n  /**\r\n   * reset lại 3 loại mức khi thay đổi kiểu chiết khấu\r\n   */\r\n  changeType() {\r\n    this.level1.discount = 0\r\n    this.level2.discount = 0\r\n    this.level3.discount = 0\r\n    this.level4.discount = 0\r\n    this.level5.discount = 0\r\n  }\r\n\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.list_discount = this.vhAlgorithm.sortVietnamesebyASC([...this.list_discount], colName);\r\n        }else{\r\n          this.list_discount = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_discount], colName);\r\n        }\r\n        break;\r\n\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Discount based on sales value formulas list' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"show_add_discount_modal = true\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Add'|translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table [nzScroll]=\"{ y: heightScroll, x: '1800px' }\" #dataShow [nzShowPagination]=\"false\" nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_discount\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzLeft nzWidth=\"2%\"></th>\r\n                    <th style=\"cursor: pointer;\" nzLeft nzWidth=\"15%\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Discount name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzLeft nzWidth=\"10%\"><b>{{'Discount type' | translate}}</b></th>\r\n                    <!-- <th  nzLeft nzWidth=\"12%\"><b>{{'Discount type' | translate}}</b></th> -->\r\n                    <th nzWidth=\"200px\"><b>{{'Level 1' | translate}}</b></th>\r\n                    <th nzWidth=\"200px\"><b>{{'Level 2' | translate}}</b></th>\r\n                    <th nzWidth=\"200px\"><b>{{'Level 3' | translate}}</b></th>\r\n                    <th nzWidth=\"200px\"><b>{{'Level 4' | translate}}</b></th>\r\n                    <th nzWidth=\"200px\"><b>{{'Level 5' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_discount\" (click)=\"discount_selected = data;initFormEdit(data)\" style=\"cursor: pointer;\">\r\n                    <td nzLeft>\r\n                        <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-red);\" nz-popconfirm (click)=\"$event.stopPropagation()\" nzPopconfirmTitle=\"{{'Delete this discount'}}\" nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleleDiscount(data)\"></i>\r\n                    </td>\r\n                    <td nzLeft> {{ data.name }}</td>\r\n                    <td nzLeft>\r\n                        <ng-container *ngIf=\"data.method == 1; else elseTemplate1\">\r\n                            {{'According to each level' | translate}}\r\n                        </ng-container>\r\n                        <ng-template #elseTemplate1>\r\n                            {{'According to the last level' | translate}}\r\n                        </ng-template>\r\n\r\n                    </td>\r\n                    <!-- <td nzLeft>\r\n\r\n                    </td> -->\r\n                    <td>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'sales' | translate}} : {{ vhAlgorithm.vhcurrencyunit(data.level1.sales) }}\r\n                        </span> <br>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'Value' | translate}} :\r\n                            <ng-container *ngIf=\"data.type == 1; else elseTemplate\">\r\n                                {{data.level1.discount}}%\r\n                            </ng-container>\r\n                            <ng-template #elseTemplate>\r\n                                {{ vhAlgorithm.vhcurrencyunit_symbol(data.level1.discount) }}\r\n                            </ng-template>\r\n\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'sales' | translate}} : {{ vhAlgorithm.vhcurrencyunit(data.level2.sales) }}\r\n                        </span> <br>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'Value' | translate}} : <ng-container *ngIf=\"data.type == 1; else elseTemplate2\">\r\n                                {{data.level2.discount}}%\r\n                            </ng-container>\r\n                            <ng-template #elseTemplate2>\r\n                                {{ vhAlgorithm.vhcurrencyunit_symbol(data.level2.discount) }}\r\n                            </ng-template>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'sales' | translate}} : {{ vhAlgorithm.vhcurrencyunit(data.level3.sales) }}\r\n                        </span> <br>\r\n                        <span style=\"white-space: nowrap;\">\r\n                            {{'Value' | translate}} : <ng-container *ngIf=\"data.type == 1; else elseTemplate3\">\r\n                                {{data.level3.discount}}%\r\n                            </ng-container>\r\n                            <ng-template #elseTemplate3>\r\n                                {{ vhAlgorithm.vhcurrencyunit_symbol(data.level3.discount) }}\r\n                            </ng-template>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <ng-container *ngIf=\"data.level4.sales\">\r\n                            <span style=\"white-space: nowrap;\">\r\n                                {{'sales' | translate}} : {{ vhAlgorithm.vhcurrencyunit(data.level4.sales) }}\r\n                            </span> <br>\r\n                            <span style=\"white-space: nowrap;\">\r\n                                {{'Value' | translate}} : <ng-container *ngIf=\"data.type == 1; else elseTemplate4\">\r\n                                    {{data.level4.discount}}%\r\n                                </ng-container>\r\n                                <ng-template #elseTemplate4>\r\n                                    {{ vhAlgorithm.vhcurrencyunit_symbol(data.level4.discount) }}\r\n                                </ng-template>\r\n                            </span>\r\n                        </ng-container>\r\n\r\n\r\n                    </td>\r\n                    <td>\r\n                        <ng-container *ngIf=\"data.level5.sales\">\r\n                            <span style=\"white-space: nowrap;\">\r\n                                {{'sales' | translate}} : {{ vhAlgorithm.vhcurrencyunit(data.level5.sales) }}\r\n                            </span> <br>\r\n                            <span style=\"white-space: nowrap;\">\r\n                                {{'Value' | translate}} : <ng-container *ngIf=\"data.type == 1; else elseTemplate5\">\r\n                                    {{data.level5.discount}}%\r\n                                </ng-container>\r\n                                <ng-template #elseTemplate5>\r\n                                    {{ vhAlgorithm.vhcurrencyunit_symbol(data.level5.discount) }}\r\n                                </ng-template>\r\n                            </span>\r\n                        </ng-container>\r\n\r\n\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<nz-drawer [nzVisible]=\"show_add_discount_modal\" nzPlacement=\"right\" (nzVisibleChange)=\"initFormAdd()\" nzTitle=\"{{'Add discount calculation formula' | translate}}\" [nzFooter]=\"footerTpl\" (nzOnClose)=\"show_add_discount_modal = false\" nzWidth=\"40vw\">\r\n    <ng-container *nzDrawerContent>\r\n        <form [formGroup]=\"form_add\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label><b>{{'Name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start;\" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Discount calculation formula type' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" nzValidateStatus=\"error\">\r\n                    <!-- <nz-select formControlName=\"method\">\r\n                        <nz-option [nzValue]=\"1\" nzLabel=\"{{'According to each level' | translate}}\"></nz-option>\r\n                        <nz-option [nzValue]=\"2\" nzLabel=\"{{'According to the last level' | translate}}\"></nz-option>\r\n                    </nz-select> -->\r\n                    <nz-radio-group formControlName=\"method\">\r\n                        <label nz-radio [nzValue]=\"1\">{{'According to each level' | translate}}\r\n                            <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Total discount for each level' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i></label>\r\n                        <label nz-radio [nzValue]=\"2\">{{'According to the last level' | translate}}\r\n                            <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Final level discount' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i></label>\r\n                    </nz-radio-group>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Discount type' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                    <nz-radio-group formControlName=\"type\">\r\n                        <label nz-radio [nzValue]=\"1\">{{'According to a percent' | translate }}</label>\r\n                        <label nz-radio [nzValue]=\"2\">{{'According to an amount' | translate }}</label>\r\n                    </nz-radio-group>\r\n                </nz-form-control>\r\n\r\n            </nz-form-item>\r\n\r\n        </form>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Hạng thành viên áp dụng chiết khấu'}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <nz-select style=\"width: 93%;\"  [(ngModel)]=\"id_customer_class\"  (ngModelChange)=\"id_customer_class = $event\">\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'Undefined' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of customer_group\" [nzValue]=\"item._id\" nzLabel=\"{{item.name}}\" [nzDisabled]=\"item.disable\"></nz-option>\r\n                </nz-select>\r\n            </nz-form-control>\r\n\r\n        </nz-form-item>  -->\r\n        <div>\r\n            <b>{{'Level 1' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level1.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel1()\" (keyup)=\"checkEditPrice(level1,'sales', sales.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_add.value.type == 2\" #value1 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level1.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level1, 'discount',value1.value)\" />\r\n                <input *ngIf=\"form_add.value.type == 1\" #value1 nz-input type=\"number\" [value]=\"level1.discount\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level1, 'discount',value1.value)\" />\r\n                <span *ngIf=\"form_add.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 2' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales2 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level2.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel2()\" (keyup)=\"checkEditPrice(level2,'sales', sales2.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_add.value.type == 2\" #value2 nz-input type=\"text\" (blur)=\"checkSalesLevel2()\" [value]=\"vhAlgorithm.vhcurrencyunit(level2.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level2, 'discount',value2.value)\" />\r\n                <input *ngIf=\"form_add.value.type == 1\" #value2 nz-input type=\"number\" [value]=\"level2.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel2()\" (keyup)=\"checkEditPrice(level2, 'discount',value2.value)\" />\r\n                <span *ngIf=\"form_add.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 3' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales3 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level3.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel3()\" (keyup)=\"checkEditPrice(level3,'sales', sales3.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_add.value.type == 2\" #value3 nz-input type=\"text\" (blur)=\"checkSalesLevel3()\" [value]=\"vhAlgorithm.vhcurrencyunit(level3.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level3, 'discount',value3.value)\" />\r\n                <input *ngIf=\"form_add.value.type == 1\" #value3 nz-input type=\"number\" [value]=\"level3.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel3()\" (keyup)=\"checkEditPrice(level3, 'discount',value3.value)\" />\r\n                <span *ngIf=\"form_add.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 4' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales4 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level4.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel4()\" (keyup)=\"checkEditPrice(level4,'sales', sales4.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_add.value.type == 2\" #value4 nz-input type=\"text\" (blur)=\"checkSalesLevel4()\" [value]=\"vhAlgorithm.vhcurrencyunit(level4.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level4, 'discount',value4.value)\" />\r\n                <input *ngIf=\"form_add.value.type == 1\" #value4 nz-input type=\"number\" [value]=\"level4.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel4()\" (keyup)=\"checkEditPrice(level4, 'discount',value4.value)\" />\r\n                <span *ngIf=\"form_add.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 5' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales5 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level5.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel5()\" (keyup)=\"checkEditPrice(level5,'sales', sales5.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_add.value.type == 2\" #value5 nz-input type=\"text\" (blur)=\"checkSalesLevel5()\" [value]=\"vhAlgorithm.vhcurrencyunit(level5.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPrice(level5, 'discount',value5.value)\" />\r\n                <input *ngIf=\"form_add.value.type == 1\" #value5 nz-input type=\"number\" [value]=\"level5.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel5()\" (keyup)=\"checkEditPrice(level5, 'discount',value5.value)\" />\r\n                <span *ngIf=\"form_add.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <!-- <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"24\" (click)=\"show_select_customer = true\" style=\"cursor: pointer;\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-green);\"></i> <b>{{'List of customers applying discount' | translate}}</b>\r\n            </div>\r\n        </div> -->\r\n    </ng-container>\r\n    <ng-template #footerTpl>\r\n        <div style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"show_add_discount_modal = false\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button nz-button nzType=\"primary\" (click)=\"addDiscountDB()\">{{'Add' | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n\r\n<nz-drawer *ngIf=\"show_edit_discount_modal\" [nzVisible]=\"show_edit_discount_modal\" nzPlacement=\"right\" nzTitle=\"{{'Update discount calculation formula' | translate}}\" [nzFooter]=\"footerTpl\" (nzOnClose)=\"cancelEdit()\" nzWidth=\"40vw\">\r\n    <ng-container *nzDrawerContent>\r\n        <form [formGroup]=\"form_edit\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label><b>{{'Name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start;\" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Discount calculation formula type' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" nzValidateStatus=\"error\">\r\n                    <!-- <nz-select formControlName=\"method\">\r\n                        <nz-option [nzValue]=\"1\" nzLabel=\"{{'According to each level' | translate}}\"></nz-option>\r\n                        <nz-option [nzValue]=\"2\" nzLabel=\"{{'According to the last level' | translate}}\"></nz-option>\r\n                    </nz-select> -->\r\n                    <nz-radio-group formControlName=\"method\">\r\n                        <label nz-radio [nzValue]=\"1\">{{'According to each level' | translate}}\r\n                            <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Total discount for each level' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i></label>\r\n                        <label nz-radio [nzValue]=\"2\">{{'According to the last level' | translate}}\r\n                            <i nz-icon nzType=\"info-circle\" nzTheme=\"outline\" nz-tooltip\r\n                                nzTooltipTitle=\"{{'Final level discount' | translate}}\"\r\n                                nzTooltipPlacement=\"bottom\"></i></label>\r\n                    </nz-radio-group>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Discount type' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\">\r\n                    <nz-radio-group formControlName=\"type\" (ngModelChange)=\"changeType()\">\r\n                        <label nz-radio [nzValue]=\"1\">{{'According to a percent' | translate }}</label>\r\n                        <label nz-radio [nzValue]=\"2\">{{'According to an amount' | translate }}</label>\r\n                    </nz-radio-group>\r\n                </nz-form-control>\r\n\r\n            </nz-form-item>\r\n\r\n        </form>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label [nzSpan]=\"24\"><b>{{'Hạng thành viên áp dụng chiết khấu'}}</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <nz-select style=\"width: 93%;\"  [(ngModel)]=\"id_customer_class\" (ngModelChange)=\"id_customer_class = $event\">\r\n                    <nz-option [nzValue]=\"''\" nzLabel=\"{{'Undefined' | translate}}\"></nz-option>\r\n                    <nz-option *ngFor=\"let item of customer_group\" [nzValue]=\"item._id\" nzLabel=\"{{item.name}}\" [nzDisabled]=\"item.id_discount_sales || item.id_discount_sales !=''\"></nz-option>\r\n                </nz-select>\r\n            </nz-form-control>\r\n\r\n        </nz-form-item>  -->\r\n        <div>\r\n            <b>{{'Level 1' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level1.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel1()\" (keyup)=\"checkEditPriceUpdate(level1,'sales', sales.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_edit.value.type == 1\" #value nz-input type=\"number\" [value]=\"level1.discount\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPriceUpdate(level1, 'discount',value.value)\" />\r\n                <input *ngIf=\"form_edit.value.type == 2\" #value nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level1.discount)\" placeholder=\"{{'Value' | translate}}\" (keyup)=\"checkEditPriceUpdate(level1, 'discount',value.value)\" />\r\n                <span *ngIf=\"form_edit.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b> {{'Level 2' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales2 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level2.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel2()\" (keyup)=\"checkEditPriceUpdate(level2,'sales', sales2.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_edit.value.type == 1\" #value2 nz-input type=\"number\" [value]=\"level2.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel2()\" (keyup)=\"checkEditPriceUpdate(level2, 'discount',value2.value)\" />\r\n                <input *ngIf=\"form_edit.value.type == 2\" #value2 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level2.discount)\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel2()\" (keyup)=\"checkEditPriceUpdate(level2, 'discount',value2.value)\"\r\n                />\r\n                <span *ngIf=\"form_edit.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 3' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales3 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level3.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel3()\" (keyup)=\"checkEditPriceUpdate(level3,'sales', sales3.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_edit.value.type == 1\" #value3 nz-input type=\"number\" [value]=\"level3.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel3()\" (keyup)=\"checkEditPriceUpdate(level3, 'discount',value3.value)\" />\r\n                <input *ngIf=\"form_edit.value.type == 2\" #value3 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level3.discount)\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel3()\" (keyup)=\"checkEditPriceUpdate(level3, 'discount',value3.value)\"\r\n                />\r\n                <span *ngIf=\"form_edit.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 4' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales4 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level4.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel4()\" (keyup)=\"checkEditPriceUpdate(level4,'sales', sales4.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_edit.value.type == 1\" #value4 nz-input type=\"number\" [value]=\"level4.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel4()\" (keyup)=\"checkEditPriceUpdate(level4, 'discount',value4.value)\" />\r\n                <input *ngIf=\"form_edit.value.type == 2\" #value4 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level4.discount)\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel4()\" (keyup)=\"checkEditPriceUpdate(level4, 'discount',value4.value)\"\r\n                />\r\n                <span *ngIf=\"form_edit.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <b>{{'Level 5' | translate}}</b>\r\n        </div>\r\n        <div nz-row class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'sales' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input #sales5 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level5.sales)\" placeholder=\"{{'sales' | translate}}\" (blur)=\"checkSalesLevel5()\" (keyup)=\"checkEditPriceUpdate(level5,'sales', sales5.value)\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"8\" style=\"text-align: end;padding-right: 8px;\">\r\n                {{'Value' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input *ngIf=\"form_edit.value.type == 1\" #value5 nz-input type=\"number\" [value]=\"level5.discount\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel5()\" (keyup)=\"checkEditPriceUpdate(level5, 'discount',value5.value)\" />\r\n                <input *ngIf=\"form_edit.value.type == 2\" #value5 nz-input type=\"text\" [value]=\"vhAlgorithm.vhcurrencyunit(level5.discount)\" placeholder=\"{{'Value' | translate}}\" (blur)=\"checkSalesLevel5()\" (keyup)=\"checkEditPriceUpdate(level5, 'discount',value5.value)\"\r\n                />\r\n                <span *ngIf=\"form_edit.value.type == 1\"> %</span>\r\n            </div>\r\n        </div>\r\n        <!-- <div nz-row style=\"padding-top: 8px;\" class=\"center-all-content\">\r\n            <div nz-col nzSpan=\"24\" (click)=\"show_select_customer_update = true\" style=\"cursor: pointer;\">\r\n                <i nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-green);\"></i> <b>{{'List of customers applying discount' | translate}}</b>\r\n            </div>\r\n        </div> -->\r\n    </ng-container>\r\n    <ng-template #footerTpl>\r\n        <div style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"cancelEdit()\">{{'Cancel' |\r\n                translate}}</button>\r\n            <button nz-button nzType=\"primary\" (click)=\"updateDiscountDB()\">{{'Save' | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>\r\n<!-- modal chọn khách hàng khi add chiết khấu -->\r\n<!-- <nz-modal *ngIf=\"show_select_customer\" [(nzVisible)]=\"show_select_customer\"\r\n    nzTitle=\"{{'Danh sách khách hàng áp dụng chiết khấu'}}\" (nzOnCancel)=\"show_select_customer = false\"\r\n    (nzOnOk)=\"handleOkSelectCusetomer()\" nzCancelText=\"{{'Cancel' | translate}}\" nzWidth=\"35vw\">\r\n    <ng-container *nzModalContent>\r\n        <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n            <input style=\"text-align: start;width: 100%;\" type=\"text\" nz-input\r\n                placeholder=\"{{'Search for customer name' | translate}}\" [(ngModel)]=\"search_value\"\r\n                (ngModelChange)=\"searchCustomers($event)\" />\r\n        </nz-input-group>\r\n        <ng-template #suffixIconSearch>\r\n            <i nz-icon nzType=\"search\"></i>\r\n        </ng-template>\r\n        <div style=\"border-bottom: 1px solid rgb(233, 233, 233);margin-top: 16px;\">\r\n            <label nz-checkbox [(ngModel)]=\"allChecked\" (ngModelChange)=\"updateAllChecked()\"\r\n                [nzIndeterminate]=\"indeterminate\">\r\n                {{'Select all' | translate}}\r\n            </label>\r\n        </div>\r\n        <nz-checkbox-group style=\"display: grid;line-height: 2;max-height: 350px;overflow: auto;\" [(ngModel)]=\"list_customers\"\r\n            (ngModelChange)=\"updateSingleChecked()\"></nz-checkbox-group>\r\n    </ng-container>\r\n</nz-modal> -->\r\n<!-- modal chọn khách hàng khi edit chiết khấu -->\r\n<!-- <nz-modal [(nzVisible)]=\"show_select_customer_update\" nzTitle=\"{{'Danh sách khách hàng áp dụng chiết khấu'}}\"\r\n        <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                placeholder=\"{{'Search for customer name' | translate}}\" [(ngModel)]=\"search_value\"\r\n                (ngModelChange)=\"searchCustomers($event)\" />\r\n        </nz-input-group>\r\n        <ng-template #suffixIconSearch>\r\n            <i nz-icon nzType=\"search\"></i>\r\n        </ng-template>\r\n        <div style=\"border-bottom: 1px solid rgb(233, 233, 233);margin-top: 16px;\">\r\n            <label nz-checkbox [(ngModel)]=\"allChecked\" (ngModelChange)=\"updateAllChecked()\"\r\n                [nzIndeterminate]=\"indeterminate\">\r\n                {{'Select all' | translate}}\r\n            </label>\r\n        </div>\r\n        <nz-checkbox-group style=\"display: grid; line-height: 2;max-height: 350px;overflow: auto;\" [(ngModel)]=\"list_customers\"\r\n            (ngModelChange)=\"updateSingleChecked()\"></nz-checkbox-group>\r\n    </ng-container>\r\n</nz-modal> -->","import { Router } from '@angular/router';\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-sales-discount',\r\n  templateUrl: './sales-discount.component.html',\r\n  styleUrls: ['./sales-discount.component.scss']\r\n})\r\nexport class SalesDiscountComponent implements OnInit {\r\n\r\n  constructor(\r\n    private router:Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  gotoListDiscount(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/sales-discount/list-discount'])\r\n  }\r\n\r\n  gotoReportDiscount(){\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/sales-discount/show-report'])\r\n\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer'])\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout>\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"24\" class=\"title\">\r\n        <b>{{'Discount based on sales value of customer' | translate}}</b>\r\n      </div>\r\n    </div>\r\n    <div nz-row class=\"cus-row\">\r\n      <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n        <div class=\"ng-item center-all-content\" (click)=\"gotoListDiscount()\">\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n              <ion-icon src=\"assets/icon/management/cong_thuc_chiet_khau.svg\"></ion-icon>\r\n            </div>\r\n          </div>\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n              <div class=\"center-text\">{{'Discount formulas' | translate}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div nz-col nzSpan=\"6\" class=\"center-all-content item-cus\">\r\n        <div class=\"ng-item center-all-content\" (click)=\"gotoReportDiscount()\">\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n              <ion-icon src=\"./assets/icon/management/xem_chiet_khau.svg\"></ion-icon>\r\n            </div>\r\n          </div>\r\n          <div nz-row>\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n              <div class=\"center-text\">{{'View discount' | translate}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n      </div>\r\n      <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n      </div>\r\n    </div>\r\n  </nz-layout>\r\n  ","import { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'; \r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SalesDiscountComponent } from './sales-discount.component';\r\nimport { RouterModule, Routes } from '@angular/router'; \r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ListDiscountComponent } from './list-discount/list-discount.component';\r\nimport { ShowReportComponent } from './show-report/show-report.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalesDiscountComponent\r\n  }, \r\n  {\r\n    path: 'list-discount',\r\n    component: ListDiscountComponent\r\n  }, \r\n  {\r\n    path: 'show-report',\r\n    component: ShowReportComponent\r\n  }, \r\n]\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SalesDiscountComponent, \r\n    ShowReportComponent,\r\n    ListDiscountComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class SalesDiscountModule { }\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { SalesChartTableReport } from 'src/app/sales/interface/vh-report';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-show-report',\r\n  templateUrl: './show-report.component.html',\r\n  styleUrls: ['./show-report.component.scss']\r\n})\r\nexport class ShowReportComponent implements OnInit {\r\n  public date: Date[] = [new Date(), new Date()];\r\n\r\n  selectedValue: any = 'all';\r\n  list_show: any = [];\r\n  dataReport: SalesChartTableReport = this.initDataReport();\r\n  showDataTable: any = { docs: [], sales_atax: 0, sales_btax: 0, quantity: 0 };\r\n  list_customer: any = [\r\n    { _id: 'all', name: this.languageService.translate('All') }\r\n  ];\r\n  list_search_customer: any = []\r\n  stateObj: any = {\r\n    startTime: '',\r\n    endTime: '',\r\n    selectedValue: ''\r\n  } \r\n  branchList: Array<any> = [];\r\n  search_branchList: Array<any> = [];\r\n  id_branch_report: string = ''\r\n  useBranch: boolean = this.fncService.checkUsingBranch()\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhAuth: VhAuth,\r\n    public languageService: LanguageService,\r\n    private datePipe: DatePipe,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private vhQuery: VhQuery\r\n  ) {\r\n    this.date[0].setHours(0, 0, 0, 0)\r\n    this.date[1].setHours(23, 59, 59, 59)\r\n    this.getListCustomer(); \r\n  }\r\n\r\n  ngOnInit(): void { \r\n    this.getBranches()\r\n  }\r\n\r\n  heightScroll: string;\r\n  /**\r\n   * xem báo cáo\r\n   */\r\n  showReport() {\r\n    this.dataReport = this.initDataReport(this.date[0], this.date[1]);\r\n\r\n    this.getSales(this.selectedValue, this.date[0], this.date[1],this.id_branch_report);\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#sales-customer\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".sales-customer-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll = document.querySelector(\"#sales-customer\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".sales-customer-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 65 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**\r\n   * get danh sách khách hàng để xử lý chọn xem báo cáo theo từng khách hàng\r\n   */\r\n  getListCustomer() {\r\n    for (let item of this.vhQuerySales.getlocalCustomers().filter(item => item._id != 'id_retail')) {\r\n      this.list_customer.push({ _id: item._id, name: item.name })\r\n    }\r\n    this.list_search_customer = this.list_customer\r\n  }\r\n\r\n  /**\r\n   * lọc khách hàng theo tên\r\n   */\r\n  searchCustomer(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.list_customer = this.vhAlgorithm.searchList(tempVal, this.list_search_customer, ['name', 'phone'])\r\n    else this.list_customer = this.list_search_customer\r\n  }\r\n\r\n  initDataReport(startTime: Date = new Date(), endTime: Date = new Date()): SalesChartTableReport {\r\n    startTime.setHours(0, 0, 0, 0)\r\n    endTime.setHours(23, 59, 59, 59)\r\n    return { startTime, endTime, dataChart: [], dataTable: { docs: [], sales_atax: 0, sales_btax: 0, quantity: 0 } }\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi khách hàng xem báo cáo\r\n   */\r\n  filterProducts(optionValue) {\r\n    this.selectedValue = optionValue;\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   * @example this.changeTime(['2023-06-27T01:21:41.397Z','2023-06-27T01:21:41.397Z'])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0, 0, 0, 0)).getTime() - new Date(event[0].setHours(0, 0, 0, 0)).getTime() <= this.fncService.checkDateReport() * 86000000) {\r\n      this.dataReport = this.initDataReport(event[0], event[1])\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.languageService.translate(\"days\"))\r\n      this.dataReport = this.initDataReport(new Date(this.date[0]), new Date(this.date[0]))\r\n      this.date = [this.dataReport['startTime'], this.dataReport['endTime']]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu báo cáo\r\n   */\r\n  getSales(id_customer, startDate, endDate,id_branch) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getReportDiscount_sales_Customers(startDate, endDate, id_customer, id_branch)\r\n        .then((res) => {\r\n          \r\n          if (res) {\r\n            if (!res.empty) {\r\n              this.dataReport['dataTable'] = { ...res }\r\n              this.sort(this.statusQuantity, 'quantity');\r\n              this.dataReport.dataTable.docs = this.dataReport.dataTable.docs.filter(item => item.id_customer != 'id_retail')\r\n            }\r\n          }\r\n          this.vhComponent.hideLoading(0);\r\n        })\r\n    })\r\n  }\r\n\r\n  //** hàm sort cho các cột */\r\n  statusQuantity = false\r\n  statusSales = false\r\n  statusbSales = false\r\n  statusName = false\r\n  /**\r\n   * sort với trường là dạng số\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'total')\r\n   */\r\n  sort(sort, value) {\r\n    if (sort) {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortNumberbyASC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n    else {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n  }\r\n  /**\r\n   * sort với trường là dạng chuỗi\r\n   * @param sort \r\n   * @param value tên trường cần sort\r\n   * @example this.sort(1, 'name')\r\n   */\r\n  sortName(sort, value) {\r\n    if (sort) {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortVietnamesebyASC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n    else {\r\n      this.dataReport.dataTable.docs = this.vhAlgorithm.sortVietnamesebyDESC([...this.dataReport.dataTable.docs], value)\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/discount-customer/sales-discount']);\r\n  }\r\n\r\n  onCurrentPageDataChange(value) {\r\n  }\r\n \r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns string\r\n   * @example let date = this.format_date('2023-06-27T01:10:34.396Z') => output '27_06_2023'\r\n   */\r\n  format_date(date) {\r\n    return this.datePipe.transform(date, \"dd_MM_yyyy\")\r\n  }\r\n\r\n\r\n  /**\r\n   * get chi nhánh được xem báo cáo của user\r\n   */\r\n  getBranches() {\r\n    let branches = [...this.vhQuerySales.getlocalBranchs()] // danh sách toàn bộ chi nhánh\r\n    let employee = this.vhAuth.getUser() // thông tn nhân viên\r\n    let defaultBranch = this.vhQuerySales.getDefaultBranch()._id // chi nhánh mặc định khi đăng nhập (lấy id chi nhánh)\r\n\r\n    if (this.useBranch) { // kiểm tra xem có 2 chi nhánh trở lên\r\n\r\n      if (employee['owner'] == 'boss') { // kiểm tra tài khoản đăng nhập là boss\r\n        this.branchList = branches // gán danh sách chi nhánh show ra HTML\r\n        if (this.branchList.length > 1) this.branchList.unshift({ _id: \"all\", name: \"All\" })\r\n        this.id_branch_report = 'all' // gán mặc định chi nhánh mặc định xem báo cáo là chi nhánh đăng nhập vô\r\n      }\r\n\r\n      else { // trường hợp tài khoản là nhân viên\r\n        this.vhAuth.getPermission(employee['_id']).then(result => { // get quyền nhân viên được xem báo cáo chi nhánh nào\r\n          branches.forEach(item => {\r\n            if (result[`${item._id}_view_report_branch`]) this.branchList.push({ ...item }) // kiểm tra chi nhánh đc xem báo cáo, gán cho branchList show ra HMLT \r\n          })\r\n          if (this.branchList.length > 1) { // trường hợp được xem báo cáo 2 chi nhánh trở lên\r\n            this.branchList.unshift({ _id: \"all\", name: \"All\" }) // đẩy xem tất cả vô, nếu có 2 chi nhánh trở lên\r\n            for (let i in this.branchList) {\r\n              if (this.branchList[i]._id == defaultBranch) return this.id_branch_report = defaultBranch // nếu có gán chi nhánh xem báo mặc định là chi nhánh mặc định (đăng nhập)\r\n              else this.id_branch_report = this.branchList[1]._id // ngược lại gán chi nhánh mặc định là chi nhánh thứ 1\r\n            }\r\n          }\r\n          else if (this.branchList.length == 1) { // nếu chỉ đc xem báo cáo 1 chi nhánh , lấy mặc định là chi nhánh đó\r\n            this.id_branch_report = this.branchList[0]._id\r\n          }\r\n          else this.vhComponent.alertMessageDesktop(\"warning\", \"Bạn không được chọn chi nhánh xem báo cáo\") // kg có chi nhánh xem báo cáo\r\n        })\r\n      }\r\n      this.search_branchList = this.branchList\r\n    } else this.id_branch_report = defaultBranch // chỉ xài 1 chi nhánh \r\n  }\r\n\r\n  /**\r\n   * lọc chi nhánh theo tên\r\n   * @param value \r\n   */\r\n  search(value) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.branchList = this.vhAlgorithm.searchList(tempVal, this.search_branchList, ['name'])\r\n    else this.branchList = this.search_branchList\r\n  }\r\n   \r\n   /**\r\n    * xuất dữ liệu sang file excel và tải về\r\n    */\r\n  export() {\r\n    let data = [];\r\n    let name = `${this.languageService.translate(\"_discount_customer_sales_report\")}_${this.languageService.translate(\"_from\")}_${this.format_date(this.dataReport.startTime)}_${this.languageService.translate(\"_to\")}_${this.format_date(this.dataReport.endTime)}_${this.id_branch_report == \"all\" ? \"\" : this.vhAlgorithm.changeAlias(this.vhQuerySales.getlocalBranch(this.id_branch_report).name).replace(/\\s/g, \"_\")}`;\r\n    for (let _row of this.dataReport['dataTable'].docs) {\r\n      let item: any = new Object();\r\n      // if (this.reportConfig.product_picture)\r\n      //   item[this.languageService.translate('Image')] = _row.img;\r\n      item[this.languageService.translate('Customer name')] = _row.name  ;\r\n      item[this.languageService.translate('Tên chiết khấu')] = _row.discount_name;\r\n      item[this.languageService.translate('Sales before tax')] = _row.sales_btax;\r\n      item[this.languageService.translate('Chiết khấu trước thuế')] = _row.discount_btax;\r\n      item[this.languageService.translate('Sales after tax')] = _row.sales_atax;\r\n      item[this.languageService.translate('Chiết khấu sau thuế')] = _row.discount_atax;\r\n      data.push(item);\r\n    }\r\n\r\n    this.vhAlgorithm.exportXLSX(data, name).then(() => { }).catch(err => { })\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  discount_nameCol= false;\r\n  sales_btaxCol = false;\r\n  discount_btaxCol = false;\r\n  sales_ataxCol = false;\r\n  discount_ataxCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortVietnamesebyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortVietnamesebyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n      case 'discount_name':\r\n        if(this.discount_nameCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortVietnamesebyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortVietnamesebyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n      case 'sales_btax':\r\n        if(this.sales_btaxCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n      case 'discount_btax':\r\n        if(this.discount_btaxCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n      case 'sales_atax':\r\n        if(this.sales_ataxCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n      case 'discount_atax':\r\n        if(this.discount_ataxCol){\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyASC([...this.dataReport['dataTable']['docs']], colName);\r\n        }else{\r\n          this.dataReport['dataTable']['docs'] = this.vhAlgorithm.sortNumberbyDESC([...this.dataReport['dataTable']['docs']], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"sales-customer\" class=\"height-header\">\r\n    <div nz-row class=\"height-layout sales-customer-header\">\r\n        <div nz-col [nzSpan]=\"useBranch ? 4 :7\" class=\"title left-all-content\">\r\n            <b>{{'View discount based on sales value of customer'|translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title center-all-content\">\r\n            <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"searchCustomer($event)\" [(ngModel)]=\"selectedValue\" nzBorderless (ngModelChange)=\"filterProducts($event)\">\r\n                <nz-option *ngFor=\"let option of list_customer\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div class=\"center-all-content\" nz-col [nzSpan]=\"useBranch ? 6 : 8\">\r\n            <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n        </div>\r\n        <div nz-col *ngIf=\"useBranch\" nzSpan=\"4\" class=\"center-all-content\">\r\n            <nz-select nzShowSearch [nzServerSearch]=\"true\" (nzOnSearch)=\"search($event)\" nzBorderless nzPlaceHolder=\"{{'Select branch' | translate}}\" [(ngModel)]=\"id_branch_report\">\r\n                <nz-option *ngFor=\"let option of branchList\" nzLabel=\"{{option.name| translate}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n            <div>\r\n                <button (click)=\"export()\" class=\"btn-add\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                    {{'Download' | translate}}</button>\r\n            </div>\r\n            <div>\r\n                <button class=\"btn-view center-all-content\" nz-button nzType=\"default\" (click)=\"showReport()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"padding-top: 20px;\" class=\"full-height\">\r\n        <nz-table [nzScroll]=\"{ y: heightScroll, x: '1400px' }\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" *ngIf=\"dataReport['dataTable']['docs'].length > 0\" [nzScroll]=\"{ y: heightScroll }\" #salesData nzShowPagination nzShowSizeChanger\r\n            [nzData]=\"dataReport['dataTable']['docs']\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzLeft nzWidth=\"5%\"><b>{{'No.' | translate}}</b></th>\r\n                    <th nzLeft style=\"cursor: pointer;\" nzWidth=\"15%\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Customer name'| translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzLeft style=\"cursor: pointer;\" nzWidth=\"15%\" nzAlign='center' (click)=\"discount_nameCol = !discount_nameCol;sortTable('discount_name')\">\r\n                        <b>{{'Discount name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"discount_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"  nzAlign='right' (click)=\"sales_btaxCol = !sales_btaxCol;sortTable('sales_btax')\">\r\n                        <b>{{'Sales before tax'|translate}}</b>\r\n                        <i nz-icon [nzType]=\"sales_btaxCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"  nzAlign='right' (click)=\"discount_btaxCol = !discount_btaxCol;sortTable('discount_btax')\">\r\n                        <b>{{'Discount before tax'|translate}}</b>\r\n                        <i nz-icon [nzType]=\"discount_btaxCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"  nzAlign='right' (click)=\"sales_ataxCol = !sales_ataxCol;sortTable('sales_atax')\">\r\n                        <b>{{'Sales after tax'|translate}}</b>\r\n                        <i nz-icon [nzType]=\"sales_ataxCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"  nzAlign='right' (click)=\"discount_ataxCol = !discount_ataxCol;sortTable('discount_atax')\">\r\n                        <b>{{'Discount after tax'|translate}}</b>\r\n                        <i nz-icon [nzType]=\"discount_ataxCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let item of salesData.data; let i = index\" style=\"cursor: pointer;\">\r\n                    <td nzLeft>{{i + 1}}</td>\r\n                    <td nzLeft>{{ item.name |translate}}</td>\r\n                    <td nzLeft nzAlign='center'>{{item.discount_name}}</td>\r\n                    <td nzAlign='right'>\r\n                        {{vhAlgorithm.vhcurrencyunit(item.sales_btax)}}</td>\r\n                    <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(item.discount_btax)}}</td>\r\n                    <td nzAlign='right'>\r\n                        {{vhAlgorithm.vhcurrencyunit(item.sales_atax)}}</td>\r\n                    <td nzAlign='right'>{{vhAlgorithm.vhcurrencyunit(item.discount_atax)}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <div nz-row *ngIf=\"dataReport['dataTable']['docs'].length == 0\" class=\"full-height\">\r\n            <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n                <div>{{'No data'| translate}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>"],"names":[],"sourceRoot":"webpack:///"}