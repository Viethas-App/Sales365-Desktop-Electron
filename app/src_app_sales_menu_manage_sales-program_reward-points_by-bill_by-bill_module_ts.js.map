{"version":3,"file":"src_app_sales_menu_manage_sales-program_reward-points_by-bill_by-bill_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/reward-points/by-bill/add/add.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/add/add.component.html","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/by-bill.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/by-bill.component.html","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/by-bill.module.ts","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/edit/edit.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/by-bill/edit/edit.component.html"],"sourcesContent":["\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n\r\n  formAdd: FormGroup;\r\n  exchange: any = {\r\n    points: '1',\r\n    money: '100000'\r\n  } \r\n  bill_total_minimum= '0';\r\n\r\n  synbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text\r\n  // customer_group: any = [];\r\n  // id_customer_class: any = ''\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuery: VhQuery,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initFormAdd();\r\n  }\r\n  /**\r\n   * khởi tạo form với các trường để add công thức\r\n   */\r\n  initFormAdd() {\r\n    this.formAdd = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      bill_total_minimum: new FormControl(0, Validators.required),\r\n      include_promotion_product: new FormControl(false),\r\n      include_discount: new FormControl(false),\r\n      include_paid_points: new FormControl(false),\r\n      include_tax: new FormControl(false),\r\n      include_fee: new FormControl(false), \r\n      id_branch : new FormControl(this.vhQuerySales.getDefaultBranch()._id)\r\n    })\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-bill'])\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi bill_total_minimum\r\n   */\r\n  changeValue(field, value) {\r\n    // if(value.replaceAll(',','')) \r\n    this.bill_total_minimum = value.replaceAll(/[.*+?^${}()|[\\]\\\\,a-zA-Z]/g, '')\r\n    this.formAdd.controls[field].setValue(parseFloat(this.bill_total_minimum))\r\n\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi money or points\r\n   */\r\n  changeExchange(field, value){\r\n    this.exchange[field] = value.replaceAll(/[.*+?^${}()|[\\]\\\\,a-zA-Z]/g, '')\r\n  } \r\n  /**\r\n   * thêm công thức vào DB\r\n   */\r\n  addData() {\r\n    let data = this.formAdd.value;\r\n    data['exchange'] = {\r\n      points : parseFloat(this.exchange.points),\r\n      money : parseFloat(this.exchange.money)\r\n    } \r\n    if (this.formAdd.valid) {\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.addEarningPointsBill(  data).then((response: any) => {\r\n          this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Thêm chương trình tích điểm thành công\"));\r\n          this.goBack();\r\n        }, error => {\r\n          this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Thêm chương trình tích điểm thất bại\"))\r\n          \r\n        }).finally(() => this.vhComponent.hideLoading(0))\r\n      })\r\n\r\n    }\r\n    else this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Vui lòng điền đầy đủ thông tin\"));\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Add point accumulation program for invoice' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"addData()\">\r\n                    <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                    {{'Save'|translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <form [formGroup]=\"formAdd\">\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Name' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"10\" [nzErrorTip]=\"userErrorTpl\">\r\n                <input style=\"text-align: start;\" nz-input formControlName=\"name\"\r\n                    placeholder=\"{{'Enter name' | translate}}\" />\r\n                <ng-template #userErrorTpl let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                    </ng-container>\r\n                </ng-template>\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Point conversion rate' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"19\">\r\n                <input  #box class=\"price\" style=\"text-align: start;\" nz-input\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(exchange.money)\" placeholder=\"{{'Enter money' | translate}}\"\r\n                    (keyup)=\"changeExchange('money',box.value)\" /> {{synbol}} =\r\n                <input #points class=\"price\" style=\"text-align: start;\" nz-input   [value]=\"exchange.points\" \r\n                    placeholder=\"{{'Enter point' | translate}}\" (keyup)=\"changeExchange('points',points.value)\"/> {{'point' | translate}}\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Apply for invoice from' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"19\">\r\n                <input  #box1 class=\"price\" style=\"text-align: start;\" nz-input\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(bill_total_minimum)\"\r\n                    (keyup)=\"changeValue('bill_total_minimum',box1.value)\"\r\n                    placeholder=\"{{'Enter value' | translate}}\" /> {{synbol}}\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        \r\n\r\n        <p><b>{{'Set up point accumulation program' | translate}}</b></p>\r\n        \r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <!-- <nz-form-label [nzSpan]=\"24\"><b>{{'Kiểu hoa hồng'}}</b></nz-form-label> -->\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_promotion_product\">\r\n                    {{'Accumulate points for discounted/promotional products' | translate}}\r\n                </label> <br>\r\n               \r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_discount\">\r\n                    {{'Accumulate points for discounted/discounted invoices' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_paid_points\">\r\n                    {{'Accumulate points for invoices paid with reward points' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"check_payment_voucher\">\r\n                    {{'Accumulate points for invoices paid with vouchers' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item> -->\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_fee\">\r\n                    {{'Accumulate points for invoice value including fees' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_tax\">\r\n                    {{'Accumulate points for invoice value including taxes' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"check_month_delete\">\r\n                    {{'Delete all accumulated points of customers at the end of the month' | translate}}\r\n                </label>\r\n                <input  class=\"price\" style=\"text-align: start;\" nz-input formControlName=\"value_month_delete\"\r\n                    placeholder=\"{{'Enter value' | translate}}\" />\r\n                {{'each year' | translate}}\r\n            </nz-form-control>\r\n        </nz-form-item> -->\r\n       \r\n    </form>\r\n    <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n        <nz-form-label [nzSpan]=\"24\"><b>{{'Member tier applying the program' | translate}}*</b>\r\n        </nz-form-label>\r\n        <nz-form-control [nzSpan]=\"24\">\r\n            <nz-select nzPlaceHolder=\"{{'Select member tier' | translate}}\" style=\"width: auto;min-width: 200px;\"\r\n                [(ngModel)]=\"id_customer_class\">\r\n                <nz-option *ngFor=\"let item of customer_group\" [nzDisabled]=\"item.selected\" [nzValue]=\"item._id\" nzLabel=\"{{item.name}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </nz-form-control>\r\n\r\n    </nz-form-item> -->\r\n</nz-layout>","import { LanguageService } from './../../../../../services/language.service';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-by-bill',\r\n  templateUrl: './by-bill.component.html',\r\n  styleUrls: ['./by-bill.component.scss']\r\n})\r\nexport class ByBillComponent implements OnInit {\r\n  customer_group: any = this.vhQuerySales.getlocalCustomerClasss();\r\n  list_data: any = [];\r\n  data_selected: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // get công thức tích điểm theo hóa đơn\r\n    Promise.all([  this.vhQuerySales.getEarningPointsBills()])\r\n      .then(([  point_bills]: any) => {\r\n        this.customer_group = this.vhAlgorithm.sortStringbyASC(this.vhQuerySales.getlocalCustomerClasss(), 'name')\r\n        // đem trường điểm và tiền ra ngoài mục đích để dễ sort\r\n        this.list_data = this.vhAlgorithm.sortStringbyASC(point_bills, 'name').map(item =>{\r\n          return {\r\n            ...item,\r\n            asMoney: item.exchange.money,\r\n            asPoints: item.exchange.points\r\n          }\r\n        })\r\n\r\n      })\r\n  }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points'])\r\n  }\r\n\r\n  gotoAdd() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-bill/add'])\r\n  }\r\n  gotoEdit(data) {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-bill/edit'], { state: data })\r\n  }\r\n  /**\r\n   * xóa công thức khỏi DB\r\n   * @example this.deleleData(earning_point_selected)\r\n   */\r\n  deleleData(data) {\r\n    this.vhComponent.showLoading('').then(() => {\r\n      this.vhQuerySales.deleteEarningPointsBill(  data._id).then(bool => {\r\n        if (bool) {\r\n          let customer_group = this.customer_group.find(item => item.id_earning_points_bill  == data._id)\r\n          if (customer_group) {\r\n            this.vhQuerySales.updateCustomerClass( customer_group._id, { id_earning_points_bill : \"\" }).then((bool) => {\r\n              this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa chương trình thành công\"));\r\n              this.list_data = this.list_data.filter(item => item._id != data._id);\r\n            }, error => {\r\n              \r\n            })\r\n          }\r\n          else {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa chương trình thành công\"));\r\n            this.list_data = this.list_data.filter(item => item._id != data._id);\r\n          }\r\n\r\n        }\r\n        else this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Có lỗi xảy ra khi xóa. Vui lòng thử lại sau!\"));\r\n      }).finally(() => this.vhComponent.hideLoading(0))\r\n    })\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  asMoneyCol = false;\r\n  asPointsCol = false\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'asMoney':\r\n        if(this.asMoneyCol){\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n      case 'asPoints':\r\n        if(this.asPointsCol){\r\n          this.list_data = this.vhAlgorithm.sortNumberbyASC([...this.list_data], colName);\r\n        }else{\r\n          this.list_data = this.vhAlgorithm.sortNumberbyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'List of point accumulation programs by invoice' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAdd()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                    {{'Add'|translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <nz-table [nzScroll]=\"{ y: heightScroll  }\" #dataShow [nzShowPagination]=\"false\" nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_data\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Program name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"asMoneyCol = !asMoneyCol;sortTable('asMoney')\">\r\n                        <b>{{'Invoice value' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"asMoneyCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"asPointsCol = !asPointsCol;sortTable('asPoints')\">\r\n                        <b>{{'Accumulated points' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"asPointsCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataShow.data\" (click)=\" gotoEdit(data)\" style=\"cursor: pointer;\">\r\n                    <td>\r\n                        <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"color: var(--ion-color-vh-red);\" nz-popconfirm (click)=\"$event.stopPropagation()\" nzPopconfirmTitle=\"{{'Delete this program' | translate}}?\" nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleleData(data)\"></i>\r\n                    </td>\r\n                    <td> {{ data.name}}</td>\r\n                    <td>\r\n                        {{vhAlgorithm.vhcurrencyunit(data.asMoney)}}\r\n                    </td>\r\n                    <td>\r\n                        {{data.asPoints}}\r\n                    </td>\r\n                    <!-- <td>\r\n                        {{data.customer_group_name}}\r\n                    </td> -->\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ByBillComponent } from './by-bill.component';\r\nimport { RouterModule, Routes } from '@angular/router'; \r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AddComponent } from './add/add.component';\r\nimport { EditComponent } from './edit/edit.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ByBillComponent\r\n  }, \r\n  {\r\n    path: 'add',\r\n    component: AddComponent\r\n  }, \r\n  {\r\n    path: 'edit',\r\n    component: EditComponent\r\n  }, \r\n]\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ByBillComponent,\r\n    AddComponent,\r\n    EditComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class ByBillModule { }\r\n","import { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n  data_selected: any;\r\n  formEdit: FormGroup;\r\n  exchange: any = {\r\n    points: '1',\r\n    money: '1000'\r\n  } \r\n  bill_total_minimum= '0';\r\n\r\n  synbol = JSON.parse(localStorage.getItem('vhsales_currencyFormat')).symbol.text\r\n  constructor(\r\n    private router: Router,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService) {\r\n    this.data_selected = this.router.getCurrentNavigation().extras.state\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initFormEdit(this.data_selected)\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/by-bill'])\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk thay đổi bill_total_minimum\r\n   */\r\n  changeValue(field, value) {\r\n    // if(value.replaceAll(',','')) \r\n    this.bill_total_minimum = value.replaceAll(/[.*+?^${}()|[\\]\\\\,a-zA-Z]/g, '')\r\n    this.formEdit.controls[field].setValue(parseFloat(this.bill_total_minimum) ? parseFloat(this.bill_total_minimum) : 0)\r\n\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi money or points\r\n   */\r\n  changeExchange(field, value){\r\n    this.exchange[field] = value ? value.replaceAll(/[.*+?^${}()|[\\]\\\\,a-zA-Z]/g, '') : 0\r\n  } \r\n\r\n  /**\r\n   * gán các giá trị của công thức nhận từ state vào form để xử lý\r\n   */\r\n  initFormEdit(data) {\r\n    this.exchange  = {\r\n      points: data.exchange.points,\r\n      money: data.exchange.money,\r\n    } \r\n    this.bill_total_minimum= data.bill_total_minimum;\r\n    this.formEdit = new FormGroup({\r\n      name: new FormControl(data.name, Validators.required),\r\n      bill_total_minimum: new FormControl(data.bill_total_minimum, Validators.required),\r\n      include_promotion_product: new FormControl(data.include_promotion_product),\r\n      include_discount: new FormControl(data.include_discount),\r\n      include_paid_points: new FormControl(data.include_paid_points),\r\n      include_tax: new FormControl(data.include_tax),\r\n      include_fee: new FormControl(data.include_fee),\r\n    })\r\n  }\r\n\r\n  /**\r\n   * cập nhật công thức lên DB\r\n   */\r\n  editData() {\r\n    let data = this.formEdit.value;\r\n    data['exchange'] = {\r\n      points : parseFloat(this.exchange.points),\r\n      money : parseFloat(this.exchange.money)\r\n    } \r\n    if (this.formEdit.valid) {\r\n      this.vhComponent.showLoading('').then(() => {\r\n        this.vhQuerySales.updateEarningPointsBill(  this.data_selected._id, data).then((response: any) => {\r\n          this.vhComponent.alertMessageDesktop('success', this.languageService.translate(\"Cập nhật chương trình tích điểm thành công\"));\r\n            this.goBack();\r\n        }, error => {\r\n          this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Cập nhật chương trình tích điểm thất bại\"))\r\n          \r\n        }).finally(() => this.vhComponent.hideLoading(0))\r\n      })\r\n\r\n    }\r\n    else this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Vui lòng điền đầy đủ thông tin\"));\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Update point accumulation program for invoice' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"editData()\">\r\n                    <i nz-icon nzType=\"save\" nzTheme=\"outline\"></i>\r\n                    {{'Save'|translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <form [formGroup]=\"formEdit\">\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Name' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"10\" [nzErrorTip]=\"userErrorTpl\">\r\n                <input style=\"text-align: start;\" nz-input formControlName=\"name\"\r\n                    placeholder=\"{{'Enter name' | translate}}\" />\r\n                <ng-template #userErrorTpl let-control>\r\n                    <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                    </ng-container>\r\n                </ng-template>\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Point conversion rate' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"19\">\r\n                <input  #box class=\"price\" style=\"text-align: start;\" nz-input\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(exchange.money)\" placeholder=\"{{'Enter money' | translate}}\"\r\n                    (keyup)=\"changeExchange('money',box.value)\" /> {{synbol}} =\r\n                <input #points class=\"price\" style=\"text-align: start;\" nz-input   [value]=\"exchange.points\" \r\n                    placeholder=\"{{'Enter point' | translate}}\" (keyup)=\"changeExchange('points',points.value)\"/> {{'point' | translate}}\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-label style=\"text-align: start;\" [nzSpan]=\"5\"><b>{{'Apply for invoice from' | translate}}*</b></nz-form-label>\r\n            <nz-form-control [nzSpan]=\"19\">\r\n                <input  #box1 class=\"price\" style=\"text-align: start;\" nz-input\r\n                    [value]=\"vhAlgorithm.vhcurrencyunit(bill_total_minimum)\"\r\n                    (keyup)=\"changeValue('bill_total_minimum',box1.value)\"\r\n                    placeholder=\"{{'Enter value' | translate}}\" /> {{synbol}}\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        \r\n\r\n        <p><b>{{'Set up point accumulation program' | translate}}</b></p>\r\n   \r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <!-- <nz-form-label [nzSpan]=\"24\"><b>{{'Kiểu hoa hồng'}}</b></nz-form-label> -->\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_promotion_product\">\r\n                    {{'Accumulate points for discounted/promotional products' | translate}}\r\n                </label> <br>\r\n               \r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_discount\">\r\n                    {{'Accumulate points for discounted, discounted invoices' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_paid_points\">\r\n                    {{'Accumulate points for invoices paid with reward points' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"check_payment_voucher\">\r\n                    {{'Accumulate points for invoices paid with vouchers' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item> -->\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_fee\">\r\n                    {{'Accumulate points for invoice value including fees' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"include_tax\">\r\n                    {{'Accumulate points for invoice value including taxes' | translate}}\r\n                </label>\r\n\r\n            </nz-form-control>\r\n        </nz-form-item>\r\n        <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n            <nz-form-control [nzSpan]=\"24\">\r\n                <label nz-checkbox formControlName=\"check_month_delete\">\r\n                    {{'Delete all accumulated points of customers at the end of the month' | translate}}\r\n                </label>\r\n                <input  class=\"price\" style=\"text-align: start;\" nz-input formControlName=\"value_month_delete\"\r\n                    placeholder=\"{{'Enter value' | translate}}\" />\r\n                {{'each year' | translate}}\r\n            </nz-form-control>\r\n        </nz-form-item> -->\r\n        \r\n    </form>\r\n    <!-- <nz-form-item style=\"margin:0 0 8px;\">\r\n        <nz-form-label [nzSpan]=\"24\"><b>{{'Member tier applying the program' | translate}}*</b>\r\n        </nz-form-label>\r\n        <nz-form-control [nzSpan]=\"24\">\r\n            <nz-select nzPlaceHolder=\"{{'Select member tier' | translate}}\" style=\"width: auto;min-width: 200px;\"\r\n                [(ngModel)]=\"id_customer_class\">\r\n                <nz-option *ngFor=\"let item of customer_group\" [nzDisabled]=\"item.selected\"  [nzValue]=\"item._id\" nzLabel=\"{{item.name}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </nz-form-control>\r\n\r\n    </nz-form-item> -->\r\n</nz-layout>"],"names":[],"sourceRoot":"webpack:///"}