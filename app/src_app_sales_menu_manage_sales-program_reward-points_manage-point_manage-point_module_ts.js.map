{"version":3,"file":"src_app_sales_menu_manage_sales-program_reward-points_manage-point_manage-point_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/reward-points/manage-point/manage-point.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/manage-point.component.html","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/manage-point.module.ts"],"sourcesContent":["import { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { LanguageService } from './../../../../../services/language.service';\r\nimport { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\n@Component({\r\n  selector: 'app-manage-point',\r\n  templateUrl: './manage-point.component.html',\r\n  styleUrls: ['./manage-point.component.scss']\r\n})\r\nexport class ManagePointComponent implements OnInit {\r\n  list_customer: any = [];\r\n  list_search_customer: any = [];\r\n  customer_group: any = this.vhQuerySales.getlocalCustomerClasss();\r\n  id_customer_class: any = 'all'\r\n  @ViewChild('modalTemplate') modalTemplate;\r\n  public formEditPoint: FormGroup;\r\n  isVisible = false;\r\n  itemEdit: any\r\n  constructor(\r\n    private router: Router,\r\n    private vhAlgorithm: VhAlgorithm,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent:VhComponent,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.customer_group = [{ _id: 'all', name: this.languageService.translate(\"All\") }].concat(this.vhQuerySales.getlocalCustomerClasss())\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 100 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points'])\r\n  }\r\n  /*---tìm kiếm khách hàng theo tên và email---*/\r\n  searchCustomer(event) {\r\n    let value = this.vhAlgorithm.changeAlias(event.toLowerCase());\r\n    this.list_customer = this.vhAlgorithm.searchList(\r\n      value,\r\n      this.list_search_customer,\r\n      [\"name\", \"phone\", \"email\"]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * lọc khách hàng theo hạng\r\n   */\r\n  filterCustomer(event) {\r\n    if(event == 'all'){\r\n      this.list_customer = this.list_search_customer\r\n    }\r\n    else{\r\n      this.list_customer = this.list_search_customer.filter(item => item.id_customer_class == event)\r\n    }\r\n  }\r\n  /**\r\n   * get dữ liệu báo cáo\r\n   */\r\n  getReport() {\r\n    Promise.all([\r\n      this.vhComponent.showLoading(''),\r\n      this.vhQuerySales.getEarningPointsBills(),\r\n      this.vhQuerySales.getEarningPointsProducts(),\r\n\r\n    ])\r\n      .then(([loading,earning_points_bills, earning_points_products,  ]: any) => {\r\n        this.customer_group = [{ _id: 'all', name: this.languageService.translate(\"All\") }].concat(this.vhQuerySales.getlocalCustomerClasss())\r\n        this.list_customer = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).filter(item => item.id_customer_class).map(i => {\r\n          return { ...i,\r\n            point_validity : this.vhQuerySales.getlocalCustomerPoints(i._id),\r\n            program_name: (this.vhQuerySales.getlocalCustomerClasss().find(item => item._id == i.id_customer_class).id_earning_points_bill ? earning_points_bills.find(ele => ele._id == this.vhQuerySales.getlocalCustomerClasss().find(item => item._id == i.id_customer_class).id_earning_points_bill).name : '')+ '\\n' + ( this.vhQuerySales.getlocalCustomerClasss().find(item => item._id == i.id_customer_class).id_earning_points_product ? earning_points_products.find(ele => ele._id == this.vhQuerySales.getlocalCustomerClasss().find(item => item._id == i.id_customer_class).id_earning_points_product).name : ''),\r\n            class_name: this.vhQuerySales.getlocalCustomerClasss().find(ele => ele._id == i.id_customer_class).name }\r\n        })\r\n        this.list_search_customer = this.list_customer;\r\n        this.filterCustomer(this.id_customer_class)\r\n      }).finally(() => this.vhComponent.hideLoading(0))\r\n  }\r\n\r\n\r\n  /**\r\n   * mở modal chỉnh sửa tích điểm\r\n   */\r\n  editEarningPoint(data){\r\n    this.formEditPoint = new FormGroup({\r\n      point: new FormControl(data.point_validity, [Validators.required]),\r\n    })\r\n    this.itemEdit = data;\r\n    this.isVisible = true\r\n  }\r\n  /**\r\n   * xử lý khi nhấn ok modal chỉnh sửa tích điểm\r\n   */\r\n  closeOkModal(){\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\", null, 0, false).then(() => {\r\n      this.vhQuerySales.updateCustomer_byPoints(this.itemEdit._id, this.formEditPoint.value['point']).then((bool)=>{\r\n        if(bool){\r\n          this.list_customer.find(item => item._id ==this.itemEdit._id).point_validity =  this.formEditPoint.value['point']\r\n        }\r\n      })\r\n      this.vhComponent.hideLoading(0)\r\n      this.isVisible = false\r\n    })\r\n  }\r\n  /**\r\n   * xử lý khi nhấn ok modal chỉnh sửa tích điểm\r\n   */\r\n  closeCancelModal(){\r\n    this.isVisible = false\r\n  }\r\n /** hàm sort cho các cột */\r\n nameCol = false;\r\n phoneCol = false;\r\n program_nameCol = false;\r\n class_nameCol = false;\r\n point_validityCol = false;\r\n /** Hàm thực hiện sắp xếp theo collection\r\n  *\r\n  * @param colName       // tên cột muôn sắp xếp\r\n  */\r\n sortTable(colName){\r\n   switch (colName) {\r\n      case 'name':\r\n        if(this.nameCol){\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'phone':\r\n        if(this.phoneCol){\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'program_name':\r\n        if(this.program_nameCol){\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'class_name':\r\n        if(this.class_nameCol){\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n      case 'point_validity':\r\n        if(this.point_validityCol){\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyASC([...this.list_customer], colName);\r\n        }else{\r\n          this.list_customer = this.vhAlgorithm.sortNumberbyDESC([...this.list_customer], colName);\r\n        }\r\n        break;\r\n   }\r\n }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n  <div nz-row class=\"product-list-header\">\r\n    <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n      <b>{{'Manage accumulated points' | translate}}</b>\r\n    </div>\r\n    <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n      <nz-input-group [nzSuffix]=\"suffixIconSearch\" style=\" width: 90%;\">\r\n        <input #box type=\"text\" (keyup)=\"searchCustomer(box.value)\" nz-input\r\n          placeholder=\"{{'Search for customer name, phone number' | translate}}\" />\r\n      </nz-input-group>\r\n      <ng-template #suffixIconSearch>\r\n        <i nz-icon nzType=\"search\"></i>\r\n      </ng-template>\r\n    </div>\r\n    <div nz-col nzSpan=\"8\" class=\"title center-all-content\">\r\n      <nz-select nzPlaceHolder=\"{{'Select member tier' | translate}}\" style=\"width: 100%; \"\r\n        [(ngModel)]=\"id_customer_class\" (ngModelChange)=\"filterCustomer($event)\">\r\n        <nz-option *ngFor=\"let item of customer_group\" [nzDisabled]=\"item.selected\" [nzValue]=\"item._id\"\r\n          nzLabel=\"{{item.name}}\">\r\n        </nz-option>\r\n      </nz-select>\r\n    </div>\r\n    <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n      <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"getReport()\">\r\n        <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n        {{'View'|translate}}\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <div nz-row class=\"total-item small-size count-quantity\">\r\n        {{'Total' | translate}} &nbsp;<span style=\"color: var(--ion-color-vh-red);\">\r\n            {{list_customer.length}}&nbsp; </span> {{'customers' | translate}}\r\n    </div>\r\n    <nz-table [nzScroll]=\"{ y: heightScroll  }\" #dataShow [nzPageSize]=\"20\"\r\n    [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_customer\"\r\n    nzShowPagination nzShowSizeChanger>\r\n    <thead>\r\n      <tr>\r\n        <th nzWidth=\"25%\" style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n          <b>{{'Customer name' | translate}}</b>\r\n          <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n        </th>\r\n        <th nzWidth=\"20%\" style=\"cursor: pointer;\" (click)=\"phoneCol = !phoneCol;sortTable('phone')\">\r\n          <b>{{'Phone number' | translate}}</b>\r\n          <i nz-icon [nzType]=\"phoneCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n        </th>\r\n        <th nzWidth=\"200px\" style=\"cursor: pointer;\"\r\n          (click)=\"program_nameCol = !program_nameCol;sortTable('program_name')\">\r\n          <b>{{'Applied program' | translate}}</b>\r\n          <i nz-icon [nzType]=\"program_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n        </th>\r\n        <th nzWidth=\"25%\" nzAlign=\"center\" style=\"cursor: pointer;\" (click)=\"class_nameCol = !class_nameCol;sortTable('class_name')\">\r\n          <b>{{'Customer group' | translate}}</b>\r\n          <i nz-icon [nzType]=\"class_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n        </th>\r\n        <th nzWidth=\"25%\" nzAlign=\"right\" style=\"cursor: pointer;\"\r\n          (click)=\"point_validityCol = !point_validityCol;sortTable('point_validity')\">\r\n          <b>{{'Accumulated points' | translate}}</b>\r\n          <i nz-icon [nzType]=\"point_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let data of dataShow.data\">\r\n        <td>\r\n          {{ data.name}}\r\n        </td>\r\n        <td> {{ data.phone}}</td>\r\n        <td>\r\n          <div [innerText]=\"data.program_name\"></div>\r\n        </td>\r\n        <td nzAlign=\"center\">\r\n          {{data.class_name}}\r\n        </td>\r\n        <td nzAlign=\"right\">\r\n          {{data.point_validity}}\r\n          <i style=\"cursor: pointer;\" (click)=\"editEarningPoint(data)\" nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </nz-table>\r\n  </div>\r\n\r\n</nz-layout>\r\n\r\n\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle=\"Chỉnh sửa điểm tích lũy \" (nzOnCancel)=\"closeCancelModal()\"\r\n  (nzOnOk)=\"closeOkModal()\">\r\n  <ng-container *nzModalContent>\r\n    <form [formGroup]=\"formEditPoint\">\r\n      <nz-input-number style=\"width: 100%;\" nzPlaceHolder=\"{{'Enter the number of points to change' | translate}}\"\r\n        formControlName=\"point\" [nzMin]=\"0\" [nzMax]=\"999999999\" [nzStep]=\"1\"></nz-input-number>\r\n    </form>\r\n  </ng-container>\r\n</nz-modal>\r\n","import { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ManagePointComponent } from './manage-point.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { NzModalModule } from 'ng-zorro-antd/modal';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ManagePointComponent\r\n  },\r\n  {\r\n    path: 'point-history',\r\n    loadChildren: () => import('./point-history/point-history.module').then(m => m.PointHistoryModule)\r\n  }\r\n]\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ManagePointComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    NzModalModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n  ]\r\n})\r\nexport class ManagePointModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}