{"version":3,"file":"src_app_sales_menu_manage_sales-program_reward-points_manage-point_point-history_point-histor-12a94a.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/reward-points/manage-point/point-history/detail-invoice/detail-invoice.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/point-history/detail-invoice/detail-invoice.component.html","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/point-history/point-history.component.ts","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/point-history/point-history.component.html","./src/app/sales/menu/manage/sales-program/reward-points/manage-point/point-history/point-history.module.ts"],"sourcesContent":["import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoice, VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-invoice-detail',\r\n  templateUrl: './detail-invoice.component.html',\r\n  styleUrls: ['./detail-invoice.component.scss']\r\n})\r\nexport class DetailInvoiceComponent {\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhSaleInvoices\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  dataRestore : any;\r\n  constructor(\r\n    private router: Router,\r\n    public vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    public vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private modal: NzModalService\r\n  ) {\r\n    this.getDataInvoice(this.router.getCurrentNavigation().extras.state.id)\r\n    this.dataRestore = this.router.getCurrentNavigation().extras.state.root\r\n    this.init()\r\n  }\r\n\r\n  init(invoice: VhSaleInvoice = null, invoiceDetail: VhSaleInvoiceDetail[] = null) {\r\n    this.invoice = new VhSaleInvoices(invoice, invoiceDetail,this.vhQuerySales)\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee()),\r\n        partner: this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()),\r\n        paymentName: this.setPaymentName(this.invoice.getPaymentType())\r\n      }\r\n      if (this.invoice.getIdDelivery()) this.invoiceInfo['delivery'] = (this.vhQuerySales.getlocalDelivery(this.invoice.getIdDelivery()).name)\r\n      \r\n    } else this.invoiceInfo = { employee: {}, partner: {}, paymentName: '' }\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        \r\n        \r\n        let invoiceDetailFresh: VhSaleInvoiceDetail[] = invoiceDetail.map(item => {\r\n          if (item.combos) {\r\n            let combo: any = {\r\n              ...item,\r\n              ... this.getNameProduct(item.id_product, item.id_subproduct),\r\n              combos: item.combos.map(element => {\r\n                return { ...element, ... this.getNameProduct(element.id_product, element.id_subproduct) }\r\n              })\r\n            }\r\n\r\n            return { ...combo, subComboName: this.getSubCombo(combo.combos) }\r\n          } else\r\n            return {\r\n              ...item,\r\n              ... this.getNameProduct(item.id_product, item.id_subproduct)\r\n            }\r\n        })\r\n        this.init(invoice, invoiceDetailFresh)\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteInvoice() {\r\n    if (this.vhAuth.checkMyPermission(\"sell_enable_cancel_bill\")) {\r\n      this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", `${this.languageService.translate(\"Are you sure to cancel the sales invoice\")}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.vhQuerySales.deleteBill_Billdetail(this.invoice.getID()).then(() => {\r\n             if(this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).earning_point && this.invoice.getBillType() == 1) this.vhQuerySales.updateCustomer(this.invoice.getIdPartner(), {earning_point : this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).earning_point - this.invoice.getEarningPointBill() })\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Sales invoice\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                this.router.navigate(['/sales/sales-desktop'], { state: { isSync: true } })\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    } else this.vhComponent.showToast(1500, this.languageService.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  public setPaymentName(type: 1 | 2 | 3) {\r\n    switch (type) {\r\n      case 1: return this.languageService.translate(\"Cash\")\r\n      case 2: return this.languageService.translate(\"Debit\")\r\n      case 3: return this.vhQuerySales.getlocalWallet(this.invoice.getIdWallet()).name\r\n    }\r\n  }\r\n  getNameProduct(id_prod: string, id_subProd: string) {\r\n    let product = this.vhQuerySales.getlocalProduct(id_prod)\r\n    let subFood: any\r\n    if (id_subProd) subFood = product.subs.find(item => item._id == id_subProd)\r\n    return { name: `${product ? product.name : ''} ${subFood ? '(' + subFood.name + ')' : ''}`, unit: product.unit }\r\n  }\r\n  /**Render các thành phần combo */\r\n  getSubCombo(arr: any[]) {\r\n    let subName: string = \"\"\r\n    arr.forEach(item => {\r\n      if (subName.length)\r\n        subName += `, ${item.quantity} ${item.name}`\r\n      else subName += `${item.quantity} ${item.name}`\r\n    })\r\n    return subName\r\n  }\r\n  public renderAddress(partner) {\r\n    return (partner.address ? partner.address : '') +\r\n      (partner.district ? ', ' + partner.district : '') +\r\n      (partner.province ? ', ' + partner.province : '') +\r\n      (partner.country ? ', ' + partner.country : '')\r\n  }\r\n  public goToCart() {\r\n    this.router.navigate(['/sales/sales-desktop/add'], { state: { invoiceDetail: this.invoice.getInvoiceDetail(), invoice: this.invoice.getCreateUpdateInvoice() } })\r\n    // this.vhComponent.showLoading('').then(() => {\r\n    //   this.vhQuerySales.updateBill(this.invoice.getID(), { uuid: this.vhAuth.getUUID().uuid })\r\n    //     .then((bool) => {\r\n    //       this.vhComponent.hideLoading(0);\r\n\r\n    //     }, error => {\r\n    //       this.vhComponent.showToast(2000, this.languageService.translate(\"An error while updating bill\"));\r\n    //       this.vhComponent.hideLoading(0);\r\n    //     })\r\n    // })\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice() {\r\n    // this.checkPrint().then((printer) => {\r\n    //   if (printer)\r\n    //     this.vhComponent.showModal(this.renderPrintPage(printer['type']), { printer, invoice: this.invoice }, false, false, `modal-print-${printer['type']}`)\r\n    // }, (err) => {\r\n    //   this.modal.confirm({\r\n    //     nzTitle: '<i>' + this.languageService.translate(\"Function\") + '</i>',\r\n    //     nzContent: '<b>' + this.languageService.translate(\"Please open the function in\") + ' ' + '<i>' + '\"' + this.languageService.translate(\"Sales page settings\") + '\"' + '</i>' + ' ' + ' -> ' + '<i>' + '\"' + this.languageService.translate('Print page') + '\"' + '</i>' + '</b>',\r\n    //     nzIconType: \"info-circle\",\r\n    //     nzCancelText: null,\r\n    //     nzOnOk: () => \r\n    //   });\r\n    // })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'A4') {\r\n    // switch (type) {\r\n    //   case 'K57': return SalesK57aComponent\r\n    //   case 'K80': return SalesK80aComponent\r\n    //   default: return SalesA45aComponent\r\n    // }\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/manage-point/point-history'],{state: this.dataRestore})\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('sales-invoice-detail-today') && document.querySelector(\".sales-cart-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('sales-invoice-detail-today').clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"sales-invoice-detail-today\">\r\n  <div class=\"sales\">\r\n    <div class=\"sales-cart\">\r\n      <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"12\" class=\"title\">\r\n          <b>{{'Sales order' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n          <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n            nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n            {{'Print' | translate}}\r\n          </button>\r\n          <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div>\r\n        <!-- <div nz-col nzSpan=\"6\" class=\"center-all-content\">\r\n          <button [disabled]=\"invoice.getBillType() == 4\" (click)=\"deleteInvoice()\"\r\n            class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n            {{'Delete' | translate}}\r\n          </button>\r\n        </div> -->\r\n      </div>\r\n      <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n        <div class=\"invoiceDetail-item\">\r\n          <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice.getInvoiceDetail()\" #rowSelectionTable\r\n            nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n            <thead>\r\n              <tr>\r\n                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                <th nzWidth=\"25%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                <th nzWidth=\"25%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                <td>{{item.name}} <br>\r\n                  <ng-container *ngIf=\"item.ptype == 5\">\r\n                    <span class=\"sub-name\">{{item.subComboName}}</span><br>\r\n                  </ng-container>\r\n                </td>\r\n                <td nzAlign='center'>{{item.quantity}}</td>\r\n                <td nzAlign='right'>\r\n                  {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                  <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                    {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                  </del>\r\n                </td>\r\n                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b></td>\r\n              </tr>\r\n            </tbody>\r\n          </nz-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"sales-bills\" [ngClass]=\"invoice.getBillType() == 5 ? 'continue-sell' : 'not-continue-sell'\">\r\n      <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n        <div>\r\n          <b>{{'Invoice code' | translate}}</b>\r\n          <div> {{invoice.getBillCode()}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Salesman' | translate}}</b>\r\n          <div>{{invoiceInfo.employee.name}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Sales date' | translate}}</b>\r\n          <div>{{invoice.getDate() | date: 'dd/MM/yyyy HH:mm'}}</div>\r\n        </div>\r\n        <div>\r\n          <b>{{'Delivery' | translate}}</b>\r\n          <div>{{invoiceInfo['delivery'] ? invoiceInfo['delivery'] : \"None\" | translate}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n        <b>{{'Customer information' | translate}}</b>\r\n        <div *ngIf=\"invoiceInfo.partner._id == 'id_retail'\" nz-col nzSpan=\"24\">\r\n          {{invoiceInfo.partner.name | translate}}\r\n        </div>\r\n        <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n          {{invoiceInfo.partner.name | translate}} - {{invoiceInfo.partner.phone}}\r\n        </div>\r\n        <div *ngIf=\"invoiceInfo.partner._id != 'id_retail'\" nz-col nzSpan=\"24\">\r\n          {{renderAddress(invoiceInfo.partner)}}\r\n        </div>\r\n        <div *ngIf=\"invoiceInfo.partner._id == 'id_retail' && invoice.getRetailName()\" nz-col nzSpan=\"24\">\r\n          {{invoice.getRetailName()}} - {{invoice.getRetailPhone()}} {{invoice.getRetailAddress() ? '-':\r\n          ''}} {{invoice.getRetailAddress()}}\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <!-- <div nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_discount_invoice') && invoice.getDiscountInvoice() >= 0\">\r\n          <div>{{'Discount' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountInvoice())}}</div>\r\n      </div> -->\r\n        <div nz-col nzSpan=\"24\">\r\n          <span>{{'SubTotal' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n        </div>\r\n        <ng-container *ngIf=\"vhQuerySales.getDiscount_bill_byCustomer(invoice.getTotal(), invoice.getIdPartner())\">\r\n          <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n            <span>{{'Discount' | translate}}\r\n            </span>\r\n            \r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountBill())}}</div>\r\n          </div>\r\n        </ng-container>\r\n        <ng-template>\r\n          <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n            <span>{{'discount' | translate}}  \r\n            </span>\r\n            <span>{{(invoice.getDiscount()/invoice.getSubTotal())*100 | number :'1.0-2'}}%</span>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscount())}}</div>\r\n          </div>\r\n        </ng-template>\r\n        <div *ngIf=\"invoice.getDiscountOther()\" class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <div>{{'Other payment' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountOther())}}</div>\r\n      </div>\r\n        \r\n\r\n        <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\"  *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n          <span>{{'Fee' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getFee())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n          <span>{{'Tax' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhpercent(invoice.getTax()/100)}}</div>\r\n          <div>\r\n            {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <span>{{'Total' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n\r\n        </div>\r\n        <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n          <span>{{'Pay' | translate}}</span>\r\n          <div>{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getPayment())}}</div>\r\n\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n          <span>{{'Rest' | translate}}</span>\r\n          <div style=\"color: var(--ion-color-vh-red);\">{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() -\r\n            invoice.getPayment())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n          <span>{{'cash' | translate}}</span>\r\n          <div  >{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getCash() )}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_cash')\">\r\n          <span>{{'Change' | translate}}</span>\r\n          <div  >{{vhAlgorithm.vhcurrencyunit_symbol(invoice.getExcessCash() )}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n          <span>{{'Payment method' | translate}}</span>\r\n          <div>{{setPaymentName(this.invoice.getPaymentType())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\"  *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n          <span>{{'Note' | translate}}</span>\r\n          <div>{{invoice.getNote()}}</div>\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"invoice.getBillType() == 5\" nz-row class=\"sales-bills-button\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <button nz-button class=\"button payment-print\" (click)=\"goToCart()\">{{'Continue to sell...'\r\n            |translate}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>\r\n","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-point-history',\r\n  templateUrl: './point-history.component.html',\r\n  styleUrls: ['./point-history.component.scss']\r\n})\r\nexport class PointHistoryComponent implements OnInit {\r\n  date: Date =new Date()\r\n  root: any;\r\n  list_data: any = [];\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private vhQuery: VhQuery,\r\n    private vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales:VhQuerySales\r\n  ) {\r\n    this.date.setHours(0, 0, 0, 0)\r\n    this.root = this.router.getCurrentNavigation().extras.state;\r\n    if(this.root.list_data ) this.list_data =this.root.list_data\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 50 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n \r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points'])\r\n  }\r\n\r\n  /**\r\n   * get bill thuộc khách hàng và có tính điểm\r\n   */\r\n  getReport() {\r\n    this.vhComponent.showLoading('').then(() =>{\r\n      this.vhQuerySales.getBills_byFields( { id_customer: { $eq: this.root._id }, earning_point_bill: { $ne: 0 }})\r\n      .then((bills: any) => {\r\n        this.list_data = this.vhAlgorithm.sortDatebyDESC(bills.filter (ele => new Date(ele.date) >= this.date), 'date').map(item => {\r\n          return { ...item, content: \"Cộng điểm hóa đơn bán hàng \" + item.bill_code }\r\n        })\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n   \r\n  }\r\n\r\n  gotoBillDetail(data) {\r\n    // this.router.navigate(['/sales/dashboard/manage/sales-program/reward-points/manage-point/point-history/detail'], { state: { id: data._id , root :{ ...this.root, list_data: this.list_data}} })\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n            <b>{{'Manage accumulated points' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n             \r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"title center-all-content\">\r\n            <nz-date-picker [(ngModel)]=\"date\"></nz-date-picker> \r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content\">\r\n            <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"getReport()\">\r\n                <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                {{'View'|translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <nz-table [nzScroll]=\"{ y: heightScroll  }\" #dataShow [nzShowPagination]=\"false\"\r\n        nzNoResult=\"{{'No data'| translate}}\" [nzData]=\"list_data\">\r\n        <thead>\r\n            <tr>\r\n                <th nzWidth=\"15%\"><b>{{'Date' | translate}}</b></th>\r\n                <th  nzAlign=\"center\"><b>{{'Content' | translate}}</b></th>\r\n                <!-- <th nzWidth=\"200px\"><b>{{'Applied program' | translate}}</b></th>\r\n                <th nzWidth=\"25%\"><b>{{'Customer group' | translate}}</b></th> -->\r\n                <th  nzAlign=\"right\"><b>{{'Adjusted points' | translate}}</b></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let data of dataShow.data\" style=\"cursor: pointer;\" (click)=\"gotoBillDetail(data)\">\r\n                <td>\r\n                    {{ data.date | date:\"dd/MM/yyyy\"}}\r\n                </td>\r\n                <td nzAlign=\"center\"> {{ data.content}}</td>\r\n                <td nzAlign=\"right\">\r\n                    {{data.earning_point_bill}}\r\n                    \r\n                </td>\r\n                <!-- <td>\r\n                    {{data.class_name}}\r\n                </td>\r\n                <td>\r\n                    {{data.earning_point || 0}}\r\n                </td> -->\r\n            </tr>\r\n        </tbody>\r\n    </nz-table>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PointHistoryComponent } from './point-history.component';\r\nimport { RouterModule, Routes } from '@angular/router'; \r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { DetailInvoiceComponent } from './detail-invoice/detail-invoice.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PointHistoryComponent\r\n  },\r\n   {\r\n    path: 'detail',\r\n    component: DetailInvoiceComponent\r\n  }, \r\n]\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PointHistoryComponent,DetailInvoiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,  \r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class PointHistoryModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}