{"version":3,"file":"src_app_sales_menu_manage_sales-program_voucher_releases-voucher_releases-voucher_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/list-code-voucher/list-code-voucher.component.ts","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/list-code-voucher/list-code-voucher.component.html","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/list-code-voucher/print/print.component.ts","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/list-code-voucher/print/print.component.html","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/release-detail/release-detail.component.ts","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/release-detail/release-detail.component.html","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/releases-voucher.component.ts","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/releases-voucher.component.html","./src/app/sales/menu/manage/sales-program/voucher/releases-voucher/releases-voucher.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-list-code-voucher',\r\n  templateUrl: './list-code-voucher.component.html',\r\n  styleUrls: ['./list-code-voucher.component.scss']\r\n})\r\nexport class ListCodeVoucherComponent implements OnInit {\r\n  public isVisible: boolean = false;                             // hiển thị modal lấy mã code\r\n  public isVisibleEdit: boolean = false;                         // hiển thị modal sửa mã code\r\n  public item: any;                                             // release được nhận\r\n\r\n  public listCodeVoucher: any[] = [];                           // danh sách mã voucher\r\n  public itemEditCurrent;                                       // mã code được chọn chỉnh sửa mã code\r\n  public settingCode: any = {                                    // Thông tin mặc định để lấy mã code\r\n    quantity: 1,\r\n    date_validity: new Date().setHours(0, 0, 0, 0),\r\n    date_expire: new Date().setHours(23, 59, 59, 0),\r\n  };\r\n  public heightScroll: string;                                  // Chiều cao sroll danh sách\r\n  public dataRestore: any;                                             // dữ liệu dùng để trả về\r\n  public statusList: any = [                                     // danh sách trạng thái để lọc\r\n    {\r\n      id: '0',\r\n      name: 'Tất cả'\r\n    },\r\n    {\r\n      id: '1',\r\n      name: 'Đã phát hành'\r\n    },\r\n    {\r\n      id: '2',\r\n      name: 'Đã bán'\r\n    },\r\n    {\r\n      id: '3',\r\n      name: 'Đã đổi từ tích điểm'\r\n    },\r\n    {\r\n      id: '4',\r\n      name: 'Đã sử dụng đổi hàng hóa'\r\n    },\r\n    {\r\n      id: '5',\r\n      name: 'Đã hết hạn'\r\n    }\r\n  ]\r\n\r\n  private listCodeVoucherSearch: any[];\r\n  private listCodeVoucherFilter: any[];\r\n  public keySearch = '';\r\n  public stateObj = {\r\n    keySearch: '',\r\n    selectedValue: '0',\r\n    tab: 0\r\n  }\r\n  barcode_designs: any;\r\n  start_print: boolean = false;\r\n  list_print_data: any[] = [];\r\n  public formEditVoucher: any;                        // Form edit voucher\r\n  list_voucher_release_details: any;\r\n  public branch: any;\r\n  public listBranch: any[] = [];\r\n  public voucher: any;                                // voucher đang chọn\r\n  public dateCurrent = new Date();\r\n  constructor(\r\n    public router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    public vhQuerySales: VhQuerySales,\r\n    private vhQuery: VhQuery,\r\n    public vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private nzModalService: NzModalService\r\n\r\n  ) {\r\n    this.item = this.router.getCurrentNavigation().extras.state.data;                     // voucher details\r\n    this.dataRestore = this.router.getCurrentNavigation().extras.state.dataRestore;       // release voucher == voucher_releases\r\n    \r\n\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") &&\r\n      document.querySelector(\".ant-table-thead\") &&\r\n      document.querySelector(\".product-list-header\") &&\r\n      document.querySelector(\".left-all-content\") &&\r\n      document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight -\r\n        document.querySelector(\".left-all-content\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight - 80 + \"px\";\r\n    }\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.item) {\r\n      this.listBranch = this.vhQuerySales.getlocalBranchs()\r\n      this.branch = this.listBranch.find(item => item._id == this.dataRestore.release.id_branch)\r\n    }\r\n    Promise.all([\r\n      this.getListProductCodes(),\r\n      this.vhQuerySales.getVoucher(this.item.id_voucher)\r\n    ]).then((voucher: any) => {\r\n      this.voucher = voucher[1];\r\n    })\r\n  }\r\n\r\n\r\n  // lấy danh sách mã code theo id_voucher và id_release\r\n  getListProductCodes() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuery.getDocsByFields(\"barcode_designs\", { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id }, type: { $eq: 3 } })\r\n        .then((barcode_designs: any) => {\r\n          this.barcode_designs = barcode_designs.find(item => item._id == this.item.id_design_barcode)\r\n        })\r\n      //  lấy danh sách voucher release detail theo release, id_voucher\r\n      this.vhQuerySales.getVoucherRelaseDetail_byFields({\r\n        id_voucher_release: { $eq: this.item.id_voucher_release },\r\n        id_voucher: { $eq: this.item.id_voucher },\r\n      }, {}, {}, 0).then((release_details: any) => {\r\n        \r\n        this.list_voucher_release_details = release_details[0]\r\n        if (release_details) {\r\n          this.vhQuerySales.getVoucherCodes_byIdCouponReleaseDetail(release_details[0]._id).then((listCodes: any) => {\r\n            this.listCodeVoucher = listCodes;\r\n            this.listCodeVoucherSearch = this.listCodeVoucher;\r\n            this.listCodeVoucherFilter = this.listCodeVoucher;\r\n            \r\n            if (this.stateObj.selectedValue != \"0\") {\r\n              // this.searchByCategory()\r\n              this.filterCodeVoucher(this.stateObj.selectedValue)\r\n            }\r\n            this.vhComponent.hideLoading(0);\r\n          })\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n  }\r\n\r\n  //  Tìm kiểm mã voucher\r\n  filterCodeVoucher(status) {\r\n    switch (status) {\r\n      case '0': {\r\n        this.listCodeVoucherSearch = this.listCodeVoucherFilter\r\n        break;\r\n      }\r\n      case '1': {\r\n        this.listCodeVoucherSearch = this.listCodeVoucherFilter.filter(item => item.status == status && new Date() < new Date(item.date_expire));\r\n        break;\r\n      }\r\n      case '2': \r\n      case '3': \r\n      \r\n      case '4': {\r\n        this.listCodeVoucherSearch = this.listCodeVoucherFilter.filter(item => item.status == status);\r\n        break;\r\n      }\r\n      case '5': {\r\n        this.listCodeVoucherSearch = this.listCodeVoucherFilter.filter(item => new Date() > new Date(item.date_expire) && item.status == '1');\r\n        break;\r\n      }\r\n    }\r\n    this.searchCodeVoucher(this.keySearch)\r\n  }\r\n  /**\r\n   * lọc mã voucher theo code\r\n   */\r\n  searchCodeVoucher(value) {\r\n    this.listCodeVoucher = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.listCodeVoucherSearch, ['code'])\r\n  }\r\n  /**\r\n   * kiểm tra mã thẻ đã hết hạn hay chưa\r\n   * @param end_date \r\n   * @returns bool\r\n   * @example let status = this.checkExpried('2023-06-27T07:04:44.638Z')\r\n   */\r\n  checkExpried(end_date) {\r\n    return new Date() > new Date(end_date)\r\n  }\r\n\r\n  goBack() {\r\n    let dataRestore = this.dataRestore.release;\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/voucher/releases-voucher/release-detail'],\r\n      {\r\n        state: dataRestore\r\n      })\r\n  }\r\n\r\n  /**\r\n   * mở modal tạo mã thẻ\r\n   */\r\n  checkCreateCode() {\r\n    this.isVisible = true\r\n  }\r\n\r\n  /**\r\n   * đóng modal tạo mã thẻ\r\n   */\r\n  handleCancel() {\r\n    this.isVisible = false;\r\n  }\r\n  // Xóa mã code\r\n  gotoDeleteCodeVoucher(item) {\r\n    this.vhQuerySales.deleteVoucherCode(item._id, item.id_voucher_release_detail).then(bool => {\r\n      if (bool) {\r\n        this.listCodeVoucher = this.listCodeVoucher.filter(i => i._id != item._id)\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa mã voucher thành công\"))\r\n      } else {\r\n        this.listCodeVoucher = this.listCodeVoucher.filter(i => i._id != item._id)\r\n\r\n      }\r\n    }, error => {\r\n      this.vhComponent.alertMessageDesktop(\"error\", error)\r\n    })\r\n  }\r\n\r\n  // tạo mã voucher\r\n  createCodeVoucher() {\r\n    if (new Date() < new Date(this.dataRestore.release.date_expire))\r\n      this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n        if (this.list_voucher_release_details) {\r\n          if (this.settingCode.quantity > 0) {\r\n              let dataCode = {\r\n                date_validity: new Date(this.dataRestore.release.date_validity),\r\n                date_expire: new Date(this.dataRestore.release.date_expire),\r\n                id_voucher_release_detail: this.list_voucher_release_details._id,\r\n                id_voucher: this.voucher._id,\r\n                ratio:1\r\n              }\r\n              this.vhQuerySales.createVoucherCodes(dataCode, this.settingCode.quantity).then((voucher_codes: any) => {\r\n                this.vhComponent.hideLoading(0).then(() => {\r\n                  this.isVisible = false;\r\n                  this.settingCode = { quantity: 1, date_validity: new Date().setHours(0, 0, 0, 0), date_expire: new Date().setHours(23, 59, 59) }\r\n                  this.listCodeVoucher = this.listCodeVoucher.concat(voucher_codes)\r\n                  this.listCodeVoucherSearch = this.listCodeVoucher\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Tạo mã thành công\"))\r\n                })\r\n              }, error => {\r\n                this.vhComponent.hideLoading(0)\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Tạo mã thất bại\"))\r\n              })\r\n            \r\n          } else {\r\n            this.vhComponent.hideLoading(0)\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Số lượng không hợp lệ !\"))\r\n          }\r\n        }\r\n      })\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Ngày hiện tại đang lớn hơn ngày hết hạn của đợt này!\"))\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // kiểm tra trạng, ẩn các tính năng\r\n  checkAction(status): boolean {\r\n    if (status == 3 || status == 2 || status == 4) {\r\n      return false\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  print(data) {\r\n    if (this.barcode_designs) {\r\n      this.list_print_data = data\r\n      this.start_print = true;\r\n      setTimeout(() => {\r\n        this.start_print = false;\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Bạn phải chọn mẫu in ở Sửa voucher trước!\"))\r\n    }\r\n  }\r\n\r\n  checked = false;\r\n  loading = false;\r\n  indeterminate = false;\r\n  listOfCurrentPageData: any = [];\r\n  setOfCheckedId = new Set<string>();\r\n\r\n  updateCheckedSet(id: string, checked: boolean): void {\r\n    if (checked) {\r\n      this.setOfCheckedId.add(id);\r\n    } else {\r\n      this.setOfCheckedId.delete(id);\r\n    }\r\n  }\r\n\r\n  onCurrentPageDataChange(listOfCurrentPageData): void {\r\n    this.listOfCurrentPageData = listOfCurrentPageData;\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  refreshCheckedStatus(): void {\r\n    const listOfEnabledData = this.listOfCurrentPageData;\r\n    this.checked = listOfEnabledData.every(({ id }) => this.setOfCheckedId.has(id));\r\n    this.indeterminate = listOfEnabledData.some(({ id }) => this.setOfCheckedId.has(id)) && !this.checked;\r\n  }\r\n\r\n  onItemChecked(id: string, checked: boolean): void {\r\n    this.updateCheckedSet(id, checked);\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  onAllChecked(checked: boolean): void {\r\n    this.listOfCurrentPageData\r\n      .forEach(({ _id }) => this.updateCheckedSet(_id, checked));\r\n    this.refreshCheckedStatus();\r\n  }\r\n\r\n  printAll(): void {\r\n    this.loading = true;\r\n    let requestData = this.listCodeVoucher.filter(data => this.setOfCheckedId.has(data._id));\r\n    this.print(requestData)\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  date_validityCol = false;\r\n  date_expireCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortVietnamesebyASC([...this.listCodeVoucher], colName);\r\n        } else {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortVietnamesebyDESC([...this.listCodeVoucher], colName);\r\n        }\r\n        break;\r\n      case 'date_validity':\r\n        if (this.date_validityCol) {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortDatebyASC([...this.listCodeVoucher], colName);\r\n        } else {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortDatebyDESC([...this.listCodeVoucher], colName);\r\n        }\r\n        break;\r\n      case 'date_expire':\r\n        if (this.date_expireCol) {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortDatebyASC([...this.listCodeVoucher], colName);\r\n        } else {\r\n          this.listCodeVoucher = this.vhAlgorithm.sortDatebyDESC([...this.listCodeVoucher], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{ \"Back\" | translate }}\r\n</div>\r\n<nz-layout id=\"product-list\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <b>{{ item.name }}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{ 'Search voucher code' | translate }}\"\r\n                    [(ngModel)]=\"keySearch\" (keyup)=\"searchCodeVoucher(keySearch)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <div nz-col nzSpan=\"8\">\r\n                <nz-select style=\"width:100%;\" nzBorderless [(ngModel)]=\"stateObj.selectedValue\"\r\n                    (ngModelChange)=\"filterCodeVoucher(stateObj.selectedValue)\">\r\n                    <nz-option *ngFor=\"let option of statusList\" nzLabel=\"{{ option.name }}\" nzValue=\"{{ option.id }}\">\r\n                    </nz-option>\r\n                </nz-select>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n                <button (click)=\"print(listCodeVoucher)\" class=\"btn-data\" nz-button nzType=\"default\">\r\n                    <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                    {{ 'Bulk print' | translate }}\r\n                </button>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"checkCreateCode()\">\r\n                    <i nz-icon nzType=\"file-add\" nzTheme=\"outline\"></i>\r\n                    {{ 'Create voucher code' | translate }}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"left-all-content\" style=\"margin: 8px 0px 0px\">\r\n        <span>Tổng\r\n            <b style=\"color: var(--ion-color-vh-red)\">{{ listCodeVoucher.length }}</b>\r\n            mã voucher</span>\r\n    </div>\r\n    <div class=\"voucher-products-codes\" style=\"margin-top: 16px\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\"\r\n            #basicTable [nzData]=\"listCodeVoucher\" nzShowSizeChanger nzShowPagination\r\n            (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\">\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\" [nzChecked]=\"checked\" [nzIndeterminate]=\"indeterminate\"\r\n                        (nzCheckedChange)=\"onAllChecked($event)\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{ 'Voucher code' | translate }}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\"\r\n                        (click)=\"date_validityCol = !date_validityCol;sortTable('date_validity')\">\r\n                        <b>{{ 'Starting date' | translate }}</b>\r\n                        <i nz-icon [nzType]=\"date_validityCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"date_expireCol = !date_expireCol;sortTable('date_expire')\">\r\n                        <b>{{ 'Expiration date' | translate }}</b>\r\n                        <i nz-icon [nzType]=\"date_expireCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\">\r\n                        <b>{{ 'Voucher status' | translate }}</b>\r\n                    </th>\r\n                    <th nzAlign=\"center\">\r\n                        <b>{{ 'Action' | translate }}</b>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of basicTable.data; let i = index\">\r\n                    <td [nzChecked]=\"setOfCheckedId.has(data._id)\" (nzCheckedChange)=\"onItemChecked(data.code, $event)\">\r\n                    </td>\r\n                    <td>\r\n                        {{ data.code }}\r\n                        <i style=\"cursor: pointer\" (click)=\"\r\n                $event.stopPropagation(); vhComponent.copyValue(data.code)\r\n              \" nz-icon nzType=\"copy\" nzTheme=\"outline\"></i>\r\n                    </td>\r\n                    <td>{{ data.date_validity | date: \"dd/MM/yyyy\" }}</td>\r\n                    <td>{{ data.date_expire | date: \"dd/MM/yyyy\" }}</td>\r\n                    <td nzAlign=\"center\" [ngSwitch]=\"data.status\">\r\n                        <span *ngSwitchCase=\"1\">\r\n                            <ng-container *ngIf=\"!checkExpried(data.date_expire); else elseTemplate\">\r\n                                <b> {{'_Issued' | translate}}</b>\r\n                            </ng-container>\r\n                            <ng-template #elseTemplate>\r\n                                <b style=\"color: var(--ion-color-vh-gray);\"> {{'Expired' | translate}}</b>\r\n                            </ng-template>\r\n                        </span>\r\n\r\n                        <span *ngSwitchCase=\"2\">\r\n                            <b style=\"color: var(--ion-color-vh-green)\">{{\r\n                                'Sold' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"3\"><b style=\"color: var(--ion-color-vh-green)\">{{\r\n                                'Redeemed from points' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"4\"><b style=\"color: var(--ion-color-vh-red)\">{{\r\n                                'Used for goods exchange' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"6\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Selected for purchase from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"7\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Ordered from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"8\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Selected for goods exchange from web/app' | translate\r\n                                }}</b></span>\r\n                        <span *ngSwitchCase=\"9\"><b style=\"color: var(--ion-color-vh-black)\">{{\r\n                                'Ordered for goods exchange from web/app' | translate\r\n                                }}</b></span>\r\n                    </td>\r\n                    <td nzAlign=\"center\">\r\n\r\n                        <nz-divider *ngIf=\"checkAction(data.status)\" nzType=\"vertical\"></nz-divider>\r\n                        <a *ngIf=\"checkAction(data.status)\" nz-popconfirm\r\n                            nzPopconfirmTitle=\"{{ 'Delete this voucher code' | translate }}?\" nzPopconfirmPlacement=\"bottom\"\r\n                            (nzOnConfirm)=\"gotoDeleteCodeVoucher(data)\">\r\n                            <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                        </a>\r\n                        <nz-divider *ngIf=\"checkAction(data.status)\" nzType=\"vertical\"></nz-divider>\r\n                        <a (click)=\"print([data])\"><i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i></a>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<!-- Lấy mã voucher -->\r\n<nz-modal [(nzVisible)]=\"isVisible\" nzTitle='Create voucher code' (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"createCodeVoucher()\"\r\n    nzCancelText=\"{{ 'Cancel' | translate }}\" nzOkText=\"{{ 'Release' | translate }}\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div>\r\n                    <b class=\"label\">{{ 'Quantity' | translate }}</b>\r\n                </div>\r\n                <nz-form-item style=\"width: 100%; display: block\">\r\n                    <nz-input-number [(ngModel)]=\"settingCode.quantity\" style=\"width: 100%\"\r\n                        nzPlaceHolder=\"{{ 'Enter the number of vouchers issued' | translate }}\" [nzMin]=\"1\" [nzMax]=\"200\"\r\n                        [nzStep]=\"1\" required></nz-input-number>\r\n                </nz-form-item>\r\n            </div>\r\n\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n<app-print style=\"display: none\" *ngIf=\"barcode_designs && list_print_data\" [stamp]=\"barcode_designs\"\r\n    [start_print]=\"start_print\" [data]=\"list_print_data\"></app-print>","import QRCode from 'qrcode';\r\nimport { ChangeDetectorRef, Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport JsBarcode from 'jsbarcode';\r\nimport printJS from 'print-js';\r\n\r\n@Component({\r\n  selector: 'app-print',\r\n  templateUrl: './print.component.html',\r\n  styleUrls: ['./print.component.scss']\r\n})\r\nexport class PrintComponent implements OnInit {\r\n  @Input() stamp: any;                            // dữ liệu mẫu in\r\n  @Input() start_print: any;                      // nhận lệnh\r\n  @Input() data: any;                             // nội dung in ( barcode, _id voucher)\r\n  heightScroll: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdf: ChangeDetectorRef\r\n  ) {\r\n    // this.stamp = this.router.getCurrentNavigation().extras.state;\r\n    // \r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  ngOnChanges({ start_print }: SimpleChanges): void {\r\n\r\n    if (start_print && start_print.currentValue) {\r\n      // this.renderBarcode();\r\n      setTimeout(() => {\r\n        this.printBrowser()\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  changeNummber() {\r\n    // this.listRowBarcode = []\r\n    // for (let i = 0; i < this.stamp.number; i++) {\r\n    //   this.listRowBarcode.push(true);\r\n    // }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.data) {\r\n      if (document.querySelector(\".barcode\"))\r\n        this.renderBarcode();\r\n      if (document.querySelector('#scroll')) this.heightScroll = document.querySelector('#scroll').clientHeight - 32;\r\n      this.cdf.detectChanges();\r\n    }\r\n\r\n  }\r\n\r\n  renderBarcode() {\r\n    for (let i in this.data) {\r\n      if (this.data[i].code )\r\n        QRCode.toCanvas(document.getElementById(this.data[i].code), this.data[i].code,{ width: parseInt(this.stamp.property[3].height) * 3.78 }, function (error) {\r\n          if (error) console.error(error)\r\n        })\r\n      if (this.data[i].code  )\r\n        JsBarcode(\".barcode\", this.data[i].code, {\r\n          displayValue: false,\r\n\r\n        });\r\n    }\r\n  }\r\n  printBrowser() {\r\n    printJS({\r\n      printable: \"stamp-barcode\",\r\n      type: \"html\",\r\n      scanStyles: false,\r\n      maxWidth: this.stamp.width,\r\n      style:\r\n        '@page { margin: 0 !important;padding: 0 !important;}' +\r\n        '.stamp {margin-bottom: 3mm; width: ' + this.stamp.width + 'mm;height: ' + (this.stamp.height - 4) + 'mm;}' +\r\n        '.center-all-content { display: flex;align-items: center;justify-content: center;}'\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<!-- <div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back'|translate}}\r\n</div> -->\r\n<nz-layout>\r\n    <!-- <div nz-row>\r\n        <div nz-col nzSpan=\"18\" class=\"title left-all-content\">\r\n            <b>{{stamp.name}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <button class=\"center-all-content\" nz-button nzType=\"default\" (click)=\"printBrowser()\">\r\n                <i nz-icon nzType=\"printer\" nzTheme=\"outline\"></i>\r\n                {{'Print'|translate}}</button>\r\n        </div>\r\n    </div> -->\r\n    <div nz-row style=\"height: 100%;padding-top: 16px;\" id=\"scroll\">\r\n        <div nz-col nzSpan=\"24\" class=\" center-all-content hideScrollbar\" style=\"overflow: auto;padding-top: 16px;\" [ngStyle]=\"{'height.px': heightScroll}\">\r\n            <div id=\"stamp-barcode\" style=\"height: 100%;margin-top: -1.5mm;\">\r\n                <div [ngStyle]=\"{'width.mm': stamp.width*stamp.col,'height.mm': stamp.height,'margin-bottom':i == data.length -1 ? '0' : ''}\" class=\"stamp \" style=\"display: flex;margin-bottom: 4mm;\" *ngFor=\"let item of data, index as i\">\r\n                    <div [ngStyle]=\"{'width.mm': stamp.width,'height.mm': stamp.height }\"  style=\"position: relative;\" class=\"border-top\"\r\n                    >\r\n                    <img *ngIf=\"stamp.display_img\"  width=\"100%\" [src]=\"stamp.img\" alt=\"assets/img/default_voucher.jpg\" onerror=\"this.src='./assets/img/default_voucher.jpg'\">\r\n                    <div   *ngFor=\"let ele of stamp.property\" \r\n                        style=\"display: flex;position: absolute;overflow: hidden; \" \r\n                        [ngStyle]=\"{\r\n                        'font-size.px': ele.font_size, \r\n                        'font-weight': ele.font_weight  , \r\n                        'text-decoration': ele.text_decoration ,\r\n                        'font-style': ele.font_style  ,\r\n                        'top.px': ele.y,\r\n                        'width.mm': ele.width,\r\n                        'left.px': ele.x,\r\n                        'height.mm': ele.height ,\r\n                        'justify-content':ele.type == 'barcode' ? ele.justify_content : ''\r\n                        }\">\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'date_validity'\">\r\n                            {{'Release date' | translate}} : {{item.date_validity | date:\"dd/MM/yyyy\"}}<br>\r\n\r\n                        </span>\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'date_expire'\">\r\n                            {{'_Expiration date' | translate}} : {{item.date_expire | date:\"dd/MM/yyyy\"}}\r\n                        </span>\r\n                        <span [ngStyle]=\"{\r\n                            'text-align':ele.text_align,\r\n                            'height.mm': ele.height\r\n                        }\" style=\" overflow: hidden;line-height: 1;width: 100%;z-index: 2;padding-right: 8px;padding-left: 8px;\"\r\n                            *ngIf=\"ele.type == 'barcode-text'\">\r\n                              {{item.code }}\r\n                        </span>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'qr' && ele.status\" [id]=\"'canvas'+ i\"></canvas>\r\n                        <canvas [ngStyle]=\"{'height.mm': ele.height,'width.mm': ele.width}\"\r\n                            *ngIf=\"ele.type == 'barcode' && ele.status\" class=\"barcode\"></canvas>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { LanguageService } from './../../../../../../services/language.service';\r\nimport { Router } from '@angular/router';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\n\r\n@Component({\r\n  selector: 'app-release-detail',\r\n  templateUrl: './release-detail.component.html',\r\n  styleUrls: ['./release-detail.component.scss']\r\n})\r\nexport class ReleaseDetailComponent implements OnInit {\r\n  public itemReleases: any = {};\r\n  public isVisible = false;\r\n  public tempVal: any;                             // nội dung tìm kiếm\r\n  public listVoucher: any[] = [];                  // danh sách voucher\r\n  public listVoucherChoosed: any[] = [];           // danh sách voucher đã chọn\r\n  public listVoucherNotChoose: any[] = [];\r\n  public listShow: any[] = [];                     // danh sách voucher hiển thị\r\n  public listShowSearch: any[] = []                // danh sách voucher ban đầu dùng để tìm kiếm\r\n  public lengthProductCode: number;\r\n  heightScroll: string;\r\n  public keyVoucher: string;\r\n  public showVoucherModal: any[] = [];\r\n  constructor(\r\n    public router: Router,\r\n    public languageService: LanguageService,\r\n    public vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n\r\n  ) {\r\n    this.itemReleases = this.router.getCurrentNavigation().extras.state;\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    if (this.itemReleases) {\r\n      this.getListVoucher();\r\n      this.getVoucherReleaseDetails(this.itemReleases._id)\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") &&\r\n      document.querySelector(\".ant-table-thead\") &&\r\n      document.querySelector(\".product-list-header\") &&\r\n      document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  // lấy danh sách voucher\r\n  getListVoucher() {\r\n    this.vhQuerySales.getVouchers().then((vouchers: any) => {\r\n      let data = vouchers\r\n      this.listVoucher = data.map(item => {\r\n        return { ...item, choose: false, display: 'flex' }\r\n      })\r\n      this.showVoucherModal = this.vhAlgorithm.sortStringbyDESC(this.listVoucher, ['name']);\r\n    })\r\n  }\r\n\r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/voucher/releases-voucher'])\r\n  }\r\n\r\n  //  xem danh sách mã voucher\r\n  gotoGetListCodeVoucher(item) {\r\n\r\n    let dataRestore = { release: this.itemReleases }\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/voucher/releases-voucher/list-code-voucher'],\r\n      {\r\n        state: {\r\n          data: item,\r\n          dataRestore\r\n        },\r\n      })\r\n  }\r\n  //  thực hiện  cập nhật hiển thị đã chọn\r\n  gotoAddVoucherToReleases() {\r\n    if (this.listShow.length) {\r\n      for (let itemShow of this.listShow) {\r\n        let index = this.showVoucherModal.findIndex(item => itemShow.id_voucher == item._id);\r\n        this.showVoucherModal[index].choose = false\r\n        this.showVoucherModal[index].display = 'none'\r\n      }\r\n    }\r\n    this.isVisible = true\r\n  }\r\n\r\n  // xử lí thêm voucher vào đợt phát hành\r\n  handleOk() {\r\n    this.listVoucherChoosed = this.listVoucher.filter(item => item.choose == true);                // lọc voucher đã chọn\r\n    if (!this.listShow.length) {                                                                    // dữ liệu hiển thị không có\r\n      this.listVoucherChoosed.forEach(element => {                                                 // thêm toàn bộ voucher vừa lọc\r\n        this.addVoucher_ReleaseDetails(element, this.itemReleases._id);\r\n      })\r\n    } else if (this.listShow.length) {                                                               // dữ liệu đã có\r\n      if (this.listVoucherChoosed.length) {                                                         // thực hiện thêm dữ liệu voucher chưa có vào, còn đã tồn tại thì không cần thêm nữa\r\n        this.listVoucherChoosed.forEach(element => {\r\n          if (!this.listShow.filter(item => item.id_voucher === element._id).length) {\r\n            this.addVoucher_ReleaseDetails(element, this.itemReleases._id);\r\n          }\r\n        })\r\n      }\r\n    }\r\n    this.isVisible = false\r\n  }\r\n\r\n  handleCancel() {\r\n    this.isVisible = false\r\n\r\n  }\r\n  // Tìm kiếm voucher tại danh sách hiển thị\r\n  searchVoucher(key) {\r\n    if (key.length > 0) {\r\n      this.listShow = this.vhAlgorithm.searchList(\r\n        this.vhAlgorithm.changeAlias(key.toLowerCase()),\r\n        this.listShowSearch, [\"name\"]\r\n      );\r\n    } else {\r\n      this.listShow = this.listShowSearch\r\n    }\r\n  }\r\n  // Tèm kiếm voucher để thêm vào đợt phát hành\r\n  searchVoucherModal(key) {\r\n    if (key.length > 0) {\r\n      this.showVoucherModal = this.vhAlgorithm.searchList(\r\n        this.vhAlgorithm.changeAlias(key.toLowerCase()),\r\n        this.listVoucher, [\"name\"]\r\n      );\r\n    } else {\r\n      this.showVoucherModal = this.listVoucher\r\n    }\r\n  }\r\n\r\n  // Thêm voucher vào release_details\r\n  addVoucher_ReleaseDetails(item, id_release) {\r\n    //  dữ liệu thêm vào voucher_release_details\r\n    let data = {\r\n      id_voucher: item._id,\r\n      id_voucher_release: id_release,\r\n      quantity_released: 0\r\n    }\r\n    this.vhQuerySales.addVoucherReleaseDetail(data).then((response: any) => {\r\n      if (response) {\r\n        response['id_release'] = id_release;\r\n        response['id_design_barcode'] = item.id_design_barcode;\r\n        response['name'] = item.name;\r\n        response['products'] = this.getStringName(item.products);\r\n        this.listShow = this.listShow.concat(response);\r\n        this.listShowSearch = this.listShow;\r\n      }\r\n    }, error => {\r\n      \r\n    })\r\n  }\r\n\r\n  // lấy danh sách voucher theo đợt và cusomize dữ liệu để hiển thị\r\n  getVoucherReleaseDetails(id_release) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      //  lấy danh sách release_detail của đợt đang chọn\r\n      this.vhQuerySales.getVoucherRelaseDetail_byFields({ id_voucher_release: { $eq: id_release } }, {}, {}, 0).then((release_details: any) => {\r\n        if (release_details.length) {\r\n          //  thự hiện kiểm tra có bao nhiêu voucher trong đợt phát hành\r\n          for (let releaseDetail of release_details) {\r\n            let voucher = this.listVoucher.find(item => item._id == releaseDetail.id_voucher);\r\n            if (voucher) {\r\n              // config dữ liệu hiện thị\r\n              releaseDetail['id_design_barcode'] = voucher.id_design_barcode;\r\n              releaseDetail['name'] = voucher.name;\r\n              releaseDetail['products'] = this.getStringName(voucher.products);       // vouchers là danh sách sản phẩm trong 1 voucher\r\n            }\r\n          }\r\n          this.listShow = this.listShow.concat(release_details);\r\n          this.listShowSearch = this.listShow;\r\n          this.vhComponent.hideLoading(0);\r\n\r\n        } else {\r\n          this.listShow = [];\r\n          this.listShowSearch = this.listShow;\r\n          this.vhComponent.hideLoading(0);\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  // chuổi sản phẩm trong có trong voucher\r\n  getStringName(products: any[]) {\r\n    let result: string = '';\r\n    products.forEach(element => {\r\n      let product = this.vhQuerySales.getlocalDetailProduct(element.id_subproduct ? element.id_subproduct :element.id_product);\r\n      if (product) {\r\n        if (result.length == 0) {\r\n          result = product.name + ' x' + element.quantity;\r\n        } else {\r\n          result = result + ', ' + product.name + ' x' + element.quantity;\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  // chọn voucher vào đợt phát hành\r\n  chooseVoucherInRelease(position) {\r\n    let voucher = this.showVoucherModal[position]\r\n    if (voucher.choose == false) {\r\n      this.showVoucherModal[position].choose = true\r\n    } else if (voucher.choose == true) {\r\n      this.showVoucherModal[position].choose = false\r\n    }\r\n  }\r\n\r\n  // xóa voucher từ đợt phát hành\r\n  deleteVoucher_Release(data) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.deleteVoucherReleaseDetail(data._id)\r\n        .then((rsp: any) => {\r\n          this.vhComponent.hideLoading(0);\r\n          if (rsp.vcode == 0) {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa thành công\"));\r\n            this.listShow = this.listShow.filter(item => item._id != data._id)\r\n            this.listShowSearch = this.listShow;\r\n          } else if (rsp.vcode == 1) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Không thể xóa vì có Voucher liên quan đã được đổi điểm, bán hoặc sử dụng lấy hàng hóa\"))\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          \r\n        })\r\n    })\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n\r\n  nameCol = false;\r\n  quantity_releasedCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.listShow = this.vhAlgorithm.sortVietnamesebyASC([...this.listShow], colName);\r\n        } else {\r\n          this.listShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.listShow], colName);\r\n        }\r\n        break;\r\n      case 'quantity_released':\r\n        if (this.quantity_releasedCol) {\r\n          this.listShow = this.vhAlgorithm.sortNumberbyASC([...this.listShow], colName);\r\n        } else {\r\n          this.listShow = this.vhAlgorithm.sortNumberbyDESC([...this.listShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <b>{{ itemReleases.name | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"right-all-content\">\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input #box type=\"text\" nz-input placeholder=\"{{'Search voucher' | translate}}\" [(ngModel)]=\"tempVal\" (keyup)=\"searchVoucher(tempVal)\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoAddVoucherToReleases()\">\r\n                    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                  {{'Select issued Voucher' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleaseDetail [nzData]=\"listShow\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"5%\"></th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\" nzWidth=\"30%;\" nzAlign=\"left\">\r\n                        <b>{{'Voucher name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\">\r\n                        <b>{{'Products in voucher' | translate}}</b>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" (click)=\"quantity_releasedCol = !quantity_releasedCol;sortTable('quantity_released')\" nzWidth=\"25%;\" nzAlign=\"right\">\r\n                        <b>{{'Issued voucher quantity' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"quantity_releasedCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzAlign=\"center\"><b>{{'Release' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of dataReleaseDetail.data\">\r\n                    <td><i (click)=\"$event.stopPropagation()\" nz-popconfirm nzPopconfirmTitle=\"{{'Xóa voucher '+data.name+' khỏi đợt này?'}}\" (nzOnConfirm)=\"deleteVoucher_Release(data)\" nzPopconfirmPlacement=\"topLeft\" style=\"color: var(--ion-color-vh-red);\"\r\n                            nz-icon nzType=\"close\" nzTheme=\"outline\"></i></td>\r\n                    <td>{{data.name}}</td>\r\n                    <td nzAlign=\"left\">{{data.products}}</td>\r\n                    <td nzAlign=\"right\">{{data.quantity_released}}</td>\r\n\r\n                    <td nzAlign=\"center\">\r\n                        <button style=\"margin: auto;\" class=\"btn-add\" nz-button nzType=\"default\" (click)=\"gotoGetListCodeVoucher(data)\">\r\n                        {{'Release'|translate}}\r\n                      </button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" [(nzVisible)]=\"isVisible\" nzTitle=\"{{languageService.translate('Chọn voucher vào đợt')}}\" (nzOnOk)=\"handleOk()\" (nzOnCancel)=\"handleCancel()\" [nzMaskClosable]=\"false\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\"><input id=\"inputSearchDishes\" class=\"nz-hover-border\" [(ngModel)]=\"keyVoucher\" (ngModelChange)=\"searchVoucherModal(keyVoucher)\" [ngModelOptions]=\"{standalone: true}\" nz-input placeholder=\"{{ 'Voucher to find' | translate}}\" />\r\n            </div>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\">\r\n                <nz-list id=\"list_voucher\">\r\n                    <nz-list-item (click)=\"chooseVoucherInRelease(i)\" *ngFor=\"let item of showVoucherModal; let i = index\" [ngStyle]=\"{'display': item.display}\">\r\n                        <nz-list-item-meta nzDescription=\"{{item.name}}\">\r\n                        </nz-list-item-meta>\r\n                        <label nz-checkbox [(ngModel)]=\"item.choose\"></label>\r\n                    </nz-list-item>\r\n                </nz-list>\r\n                <nz-empty nzNotFoundImage=\"simple\" *ngIf=\"!showVoucherModal.length\" nzNotFoundContent=\"{{'No voucher!' | translate}}\"></nz-empty>\r\n\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"handleCancel()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"handleOk()\">{{\"Add\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-releases-voucher',\r\n  templateUrl: './releases-voucher.component.html',\r\n  styleUrls: ['./releases-voucher.component.scss']\r\n})\r\nexport class ReleasesVoucherComponent implements OnInit {\r\n\r\n  public isVisibleModalAdd: boolean = false;                  // show/hide modal thêm release\r\n  public isVisibleModalEdit: boolean = false                 // show/hide modal sửa release\r\n  public list_data: any = []                                 // danh sách release\r\n  public data_selected: any = {};                            // item đợt đươc chọn\r\n  public name: string = ''                                   // tên đợt\r\n  public name_old: string = ''                               // tên đợt cũ\r\n  public heightScroll: string;                                // chiều cao sroll\r\n  public addVoucherReleases: FormGroup;                       // form thêm đợt\r\n  public list_branch: any[];\r\n  public editReleaseVoucherForm: FormGroup;                   // form sửa đợt\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuery: VhQuery,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    public vhQuerySales: VhQuerySales\r\n\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getListRelease();\r\n    this.initForm();\r\n  }\r\n\r\n  /**\r\n   * khởi tạo form lưu các trường của đợt phát hành để thêm\r\n   */\r\n  initForm() {\r\n    this.addVoucherReleases = new FormGroup({\r\n      name: new FormControl(\"\", [Validators.required]),\r\n      date_validity: new FormControl(new Date(new Date().setHours(0, 0, 0)), Validators.required),\r\n      date_expire: new FormControl(new Date(new Date().setHours(23, 59, 59)), Validators.required)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu đợt phát hành voucher\r\n   */\r\n  getListRelease() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getVoucherRelases().then((voucher_releases: any) => {\r\n        this.list_data = this.vhAlgorithm.sortStringbyDESC(voucher_releases, ['name']);\r\n        this.vhComponent.hideLoading(0)\r\n      }, (err) => {\r\n        console.error(err)\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") &&\r\n      document.querySelector(\".ant-table-thead\") &&\r\n      document.querySelector(\".product-list-header\") &&\r\n      document.querySelector(\".ant-table-pagination\")) {\r\n      this.heightScroll =\r\n        document.querySelector(\"#product-list\").clientHeight -\r\n        document.querySelector(\".ant-table-thead\").clientHeight -\r\n        document.querySelector(\".ant-table-pagination\").clientHeight -\r\n        document.querySelector(\".product-list-header\").clientHeight - 80 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  //  Thêm đợt phát hành\r\n  addRelease() {\r\n    if (this.addVoucherReleases.valid) {\r\n      this.vhQuerySales.addVoucherRelease(this.addVoucherReleases.value).then((response: any) => {\r\n        this.isVisibleModalAdd = false;\r\n        this.list_data = this.vhAlgorithm.sortStringbyDESC(this.list_data.concat(response), ['name']);\r\n        this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Thêm đợt phát hành thành công\"))\r\n      }, error => {\r\n        this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Thêm đợt phát hành thất bại\"))\r\n      })\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Vui lòng nhập đủ thông tin\"))\r\n    }\r\n\r\n  }\r\n\r\n  nzOnCancelEdit() {\r\n    this.isVisibleModalEdit = false;\r\n  }\r\n\r\n  // Cập nhật tên đợt phát hành\r\n  saveEdit() {\r\n    if (this.editReleaseVoucherForm.valid) {\r\n      this.vhComponent.showLoading('').then(() => {\r\n        let data = this.editReleaseVoucherForm.value\r\n        this.vhQuerySales.updateVoucherRelease(data._id, data).then((bool) => {\r\n          if (bool) {\r\n            this.isVisibleModalEdit = false\r\n            const index = this.list_data.findIndex(item => item._id == data._id);\r\n            this.list_data[index].name = data.name\r\n            this.list_data[index].date_validity = data.date_validity\r\n            this.list_data[index].date_expire = data.date_expire\r\n          }\r\n          this.vhComponent.hideLoading(0)\r\n        }, error => {\r\n          \r\n          this.vhComponent.hideLoading(0)\r\n          this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Cập nhật đợt phát hành thất bại\"))\r\n        })\r\n      })\r\n\r\n    }\r\n  }\r\n  \r\n\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/voucher'])\r\n  }\r\n\r\n  gotoDetail(item) {\r\n    this.router.navigate(['/sales/dashboard/manage/sales-program/voucher/releases-voucher/release-detail'],\r\n      {\r\n        state: item\r\n      })\r\n  }\r\n\r\n  /**\r\n   * xóa đợt phát hành khỏi DB\r\n   */\r\n  deleteRelease(data) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.deleteVoucherRelease(data._id)\r\n        .then((rsp: any) => {\r\n          this.vhComponent.hideLoading(0);\r\n          if (rsp.vcode == 0) {\r\n            this.vhComponent.alertMessageDesktop(\"success\", this.languageService.translate(\"Xóa đợt phát hành thành công\"))\r\n            this.list_data = this.list_data.filter(item => item._id != data._id)\r\n          } else if (rsp.vcode == 1) {\r\n            this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Xóa không thành công, vui lòng xóa các thành phần trong đợt phát hành này trước!\"))\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          \r\n        })\r\n    })\r\n  }\r\n\r\n  // mở form sửa đợt voucher và khởi tạo form sửa đởt\r\n  editReleaseVoucher(data) {\r\n    this.editReleaseVoucherForm = new FormGroup({\r\n      _id: new FormControl(data._id),\r\n      name: new FormControl(data.name, [Validators.required]),\r\n      date_validity: new FormControl(new Date(data.date_validity), Validators.required),\r\n      date_expire: new FormControl(new Date(data.date_expire), Validators.required),\r\n      id_branch: new FormControl(data.id_branch, [Validators.required])\r\n    })\r\n    this.isVisibleModalEdit = true;\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  nameCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName) {\r\n    switch (colName) {\r\n      case 'name':\r\n        if (this.nameCol) {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyASC([...this.list_data], colName);\r\n        } else {\r\n          this.list_data = this.vhAlgorithm.sortVietnamesebyDESC([...this.list_data], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"product-list\" class=\"height-layout\">\r\n    <div nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"14\" class=\"title left-all-content\">\r\n            <b>{{'Voucher issuance list' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-all-content\">\r\n            <div>\r\n                <button class=\"btn-add\" nz-button nzType=\"default\" (click)=\"isVisibleModalAdd = true;name =''\">\r\n                  <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                  {{'Create issuance' | translate}}\r\n              </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: heightScroll }\" #dataReleases [nzData]=\"list_data\" nzShowSizeChanger nzShowPagination>\r\n            <thead>\r\n                <tr>\r\n                    <th nzWidth=\"30%\" style=\"cursor: pointer;\" (click)=\"nameCol = !nameCol;sortTable('name')\">\r\n                        <b>{{'Issuance name' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\">\r\n                        <b>{{'Starting date' | translate}}</b>\r\n                    </th>\r\n                    <th nzWidth=\"25%\" style=\"cursor: pointer;\">\r\n                        <b>{{'Ending date' | translate}}</b>\r\n                    </th>\r\n                    <th nzAlign=\"right\" nzWidth=\"20%\"><b>{{'Functions' | translate}}</b></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let data of list_data, index as i\" (click)=\"gotoDetail(data)\" style=\"cursor: pointer;\">\r\n                    <td> {{ data.name }}</td>\r\n                    <td> {{ data.date_validity | date:'dd/MM/yyyy' }}</td>\r\n                    <td> {{ data.date_expire | date:'dd/MM/yyyy' }}</td>\r\n                    <td (click)=\"$event.stopPropagation()\" class=\"right-all-content\">\r\n                        <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style=\"margin-right: 16px;font-size: 1.2rem;\"\r\n                            (click)=\"$event.stopPropagation();editReleaseVoucher(data)\"></i>\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\" nz-popconfirm style=\"font-size: 1.2rem;\"\r\n                            nzPopconfirmTitle=\"{{'Delete this coupon issuance' | translate}}?\"\r\n                            nzPopconfirmPlacement=\"bottom\" (nzOnConfirm)=\"deleteRelease(data)\"></i>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>\r\n<!-- Thêm đợt -->\r\n<nz-modal *ngIf=\"isVisibleModalAdd\" [(nzVisible)]=\"isVisibleModalAdd\" nzTitle=\"{{'Add issuance' | translate}}\" (nzOnCancel)=\"isVisibleModalAdd = false\" (nzOnOk)=\"addRelease()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"addVoucherReleases\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Voucher issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Voucher issuance name is required' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>\r\n<!-- Sưa đợt  -->\r\n<nz-modal *ngIf=\"isVisibleModalEdit\" [(nzVisible)]=\"isVisibleModalEdit\" nzTitle=\"{{'Update issuance' | translate}}\" (nzOnCancel)=\"nzOnCancelEdit()\" (nzOnOk)=\"saveEdit()\">\r\n    <ng-container *nzModalContent>\r\n        <form nz-form [formGroup]=\"editReleaseVoucherForm\">\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Voucher issuance name' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <input style=\"text-align: start; \" nz-input formControlName=\"name\" placeholder=\"{{'Enter name' | translate}}\" />\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Start date of use' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_validity\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item style=\"margin:0 0 8px;\">\r\n                <nz-form-label [nzSpan]=\"24\"><b>{{'Expiration date' | translate}}</b></nz-form-label>\r\n                <nz-form-control [nzSpan]=\"24\" [nzErrorTip]=\"userErrorTpl\">\r\n                    <nz-date-picker nzFormat=\"dd/MM/yyyy\" style=\"width: 100%;\" formControlName=\"date_expire\">\r\n                    </nz-date-picker>\r\n                    <ng-template #userErrorTpl let-control>\r\n                        <ng-container *ngIf=\"control.hasError('required')\">{{'Name is requied' | translate}}\r\n                        </ng-container>\r\n                    </ng-template>\r\n                </nz-form-control>\r\n            </nz-form-item>\r\n        </form>\r\n    </ng-container>\r\n</nz-modal>","import { PrintComponent } from './list-code-voucher/print/print.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ReleasesVoucherComponent } from './releases-voucher.component';\r\nimport { ReleaseDetailComponent } from './release-detail/release-detail.component';\r\nimport { ListCodeVoucherComponent } from './list-code-voucher/list-code-voucher.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReleasesVoucherComponent\r\n  },\r\n  {\r\n    path: 'release-detail',\r\n    component: ReleaseDetailComponent\r\n  },\r\n  {\r\n    path: 'list-code-voucher',\r\n    component: ListCodeVoucherComponent\r\n  }\r\n]\r\n@NgModule({\r\n  declarations: [ReleasesVoucherComponent,ReleaseDetailComponent, ListCodeVoucherComponent,PrintComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ScrollingModule\r\n  ]\r\n})\r\nexport class ReleasesVoucherModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}