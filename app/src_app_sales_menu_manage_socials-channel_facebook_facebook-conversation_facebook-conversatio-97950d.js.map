{"version":3,"file":"src_app_sales_menu_manage_socials-channel_facebook_facebook-conversation_facebook-conversatio-97950d.js","mappings":"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","sources":["./src/app/sales/menu/manage/delivery/services/ahamoveService/ahamove.service.ts","./src/app/sales/menu/manage/delivery/services/ghnService/ghn.service.ts","./src/app/sales/menu/manage/delivery/services/ghtkService/ghtk.service.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-comment/conversation-comment.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-comment/conversation-comment.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/add-customer/add-customer.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/add-customer/add-customer.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/check-fees/check-fees.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/check-fees/check-fees.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/customer-profile/customer-profile.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/customer-profile/customer-profile.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/customer/customer.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/customer/customer.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/delivery/delivery.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/delivery/delivery.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/fb-create-order/fb-create-order.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/fb-create-order/fb-create-order.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/fb-info-user/fb-info-user.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/fb-info-user/fb-info-user.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/staff/staff.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/staff/staff.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/tax/tax.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/components/tax/tax.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/conversation-detail.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-detail/conversation-detail.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-dialog/conversation-dialog.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-dialog/conversation-dialog.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-inbox/conversation-inbox.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/conversation-inbox/conversation-inbox.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/facebook-conversation.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/facebook-conversation.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/facebook-conversation.module.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/waiting-select-user/waiting-select-user.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook-conversation/waiting-select-user/waiting-select-user.component.html"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AhamoveService {\r\n  private URL: string = this.vhQuerySales.getShippingAhamoveURL()\r\n  // api_key = '183a9baa5176ebbaa9c10fe67fc02161d63f6849'; //dev\r\n  api_key = 'fc0ee646897ef09f19fd61075337728c61bc9480'; //production\r\n  constructor(\r\n    private http: HttpClient,\r\n    private vhQuerySales: VhQuerySales\r\n  ) { }\r\n\r\n  getTokenAhaMove(phone) {\r\n\r\n    const options = {\r\n      params: {\r\n        \"url\": 'https://api.ahamove.com/v1/partner/register_account',\r\n        \"mobile\": phone,\r\n        \"api_key\": this.api_key,\r\n        \"name\": \"Viethas\",\r\n        \"address\": \"Khách hàng\"\r\n      }\r\n    }\r\n    return this.http.get(this.URL, options).toPromise();\r\n  }\r\n  getAllServiceAhaMove(city_id) {\r\n\r\n    const options = {\r\n      params: {\r\n        \"url\": `https://api.ahamove.com/v1/order/service_types?city_id=${city_id}`,\r\n      }\r\n    }\r\n    return this.http.get(this.URL, options).toPromise();\r\n  }\r\n  calculateFeeAhamove(data) {\r\n    \r\n    const options = {\r\n      params: {\r\n        \"url\": \"https://api.ahamove.com/v2/order/estimated_fee\",\r\n      }\r\n    }\r\n    const body = {\r\n      \"token\": data.token,\r\n      \"order_time\": 0,\r\n      \"path\": data.path,\r\n      \"services\": data.services,\r\n      \"payment_method\": \"CASH\"\r\n    }\r\n    return this.http.post(this.URL, body, options).toPromise();\r\n  }\r\n  createOrderAhamove(data) {\r\n\r\n    let x = `[{\"address\":\"${data.pick_address}\",\"name\":\"${data.pick_name}\",\"mobile\":\"${data.pick_tel}\"},{\"address\":\"${data.address}\",\"name\":\"${data.name}\",\"mobile\":\"${data.phone}\",\"cod\":${data.cod},\"remarks\":\"${data.note}\"}]`;\r\n    const options = {\r\n      params: {\r\n        \"url\": \"https://api.ahamove.com/v1/order/create\",\r\n        \"token\": data.token,\r\n        \"order_time\": data.order_time,\r\n        \"service_id\": data.service_id,\r\n        \"payment_method\": \"CASH\",\r\n        \"path\": x\r\n      }\r\n    }\r\n    return this.http.get(this.URL, options).toPromise();\r\n  }\r\n  getDetailBillAhamove(token, order_id) {\r\n\r\n    const options = {\r\n      params: {\r\n        \"url\": `https://api.ahamove.com/v1/order/detail`,\r\n        \"token\": token,\r\n        \"order_id\": order_id\r\n      }\r\n    }\r\n    return this.http.get(this.URL, options).toPromise();\r\n  }\r\n  cancelOrderAhamove(token, order_id) {\r\n\r\n    const options = {\r\n      params: {\r\n        \"url\": `https://api.ahamove.com/v1/order/cancel`,\r\n        \"token\": token,\r\n        \"order_id\": order_id,\r\n        \"comment\": \"No comment\"\r\n      }\r\n    }\r\n    return this.http.get(this.URL, options).toPromise();\r\n  }\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GhnService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n  /**\r\n  * kiểm tra token của giao hàng nhanh có hợp lệ hay không\r\n  * @example : this.transportService.connectTokenGhn(token).then(res =>{\r\n  * @param : tokenName\r\n  * @return :\r\n  **/\r\n  connectTokenGhn(token) {\r\n    let urlGhn = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shop/all';\r\n    const options = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n      })\r\n    }\r\n    return this.http.get(urlGhn, options).toPromise();\r\n  }\r\n  /**\r\n  * get các tỉnh trong nước Việt Nam\r\n  * @param token\r\n  * @example this.transportService.getProvinceGhn().then(res =>{})\r\n  * @return\r\n  **/\r\n  getProvinceGhn(token) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/master-data/province';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n      })\r\n    }\r\n    return this.http.get(url, opptions).toPromise();\r\n  }\r\n  /**\r\n  * get các huyện trong tỉnh của Việt Nam\r\n  * @param token ,province_id\r\n  * @example this.transportService.getDistrictGhn().then(res =>{})\r\n  * @return\r\n  **/\r\n  getDistrictGhn(token, province_id?) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/master-data/district';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n\r\n      }),\r\n      params: {\r\n        \"province_id\": province_id ? province_id : 0\r\n      }\r\n    }\r\n    return this.http.get(url, opptions).toPromise();\r\n  }\r\n  /**\r\n  * get các xã trong huyện của Việt Nam\r\n  * @param token ,district_id\r\n  * @example this.transportService.getWardGhn().then(res =>{})\r\n  * @return\r\n  **/\r\n  getWardGhn(token, district_id) {\r\n    let url = `https://online-gateway.ghn.vn/shiip/public-api/master-data/ward?${district_id}`;\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n      }),\r\n      params: {\r\n        \"district_id\": district_id\r\n      }\r\n    }\r\n    return this.http.get(url, opptions).toPromise();\r\n  }\r\n  /**\r\n  * tính phí vận chuyển\r\n  * @param token,data\r\n  * @example this.transportService.calculate_delivery_fee().then(res =>{})\r\n  * @return\r\n  **/\r\n  calculate_delivery_fee(token, data) {\r\n    let url = \"https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee\";\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n        \"ShopId\": data.shop_id.toString()\r\n      }),\r\n      params: {\r\n        \"service_id\": data.service_id,\r\n        \"to_ward_code\": data.to_ward_code,\r\n        \"from_district_id\": data.from_district_id,\r\n        \"height\": data.height,\r\n        \"length\": data.length,\r\n        \"weight\": data.weight,\r\n        \"width\": data.width,\r\n        \"insurance_value\": data.insurance_value,\r\n        \"to_district_id\": data.to_district_id\r\n      }\r\n    }\r\n    return this.http.get(url, opptions).toPromise();\r\n  }\r\n  /**\r\n  * chọn service : đi bộ, bay...\r\n  * @param token,data\r\n  * @example this.transportService.calculate_delivery_fee().then(res =>{})\r\n  * @return result { data : [service_id,short_name,service_type_id]}\r\n  **/\r\n  getServiceDelivery(token, data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/available-services';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n      }),\r\n      params: {\r\n        \"shop_id\": data.shop_id,\r\n        \"from_district\": data.from_district_id,\r\n        \"to_district\": data.to_district_id\r\n      }\r\n    }\r\n    return this.http.get(url, opptions).toPromise();\r\n  }\r\n  /**\r\n  * tạo đơn giao hàng\r\n  * @param data\r\n  * @example this.transportService.createOrderGhn().then(res =>{})\r\n  * @return\r\n  **/\r\n  createOrderGhn(data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/create';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Token\": data.token,\r\n        \"Content-Type\": \"application/json\",\r\n        \"ShopId\": data.shop_id.toString()\r\n      }),\r\n    }\r\n    let params = {\r\n      \"to_name\": data.to_name,\r\n      \"to_phone\": data.to_phone,\r\n      \"to_address\": data.to_address,\r\n      \"to_ward_code\": data.to_ward_code,\r\n      \"to_district_id\": data.to_district_id,\r\n      \"weight\": data.weight,\r\n      \"height\": data.height,\r\n      \"length\": data.length,\r\n      \"width\": data.width,\r\n      \"payment_type_id\": data.payment_type_id,\r\n      \"required_note\": data.required_note,\r\n      \"items\": data.items,\r\n      \"service_id\": data.service_id,\r\n      \"cod_amount\": data.cod_amount,\r\n      \"insurance_value\": data.insurance_value,\r\n      \"note\": data.note ? data.note : ''\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n  /**\r\n   * Tính (đoán) ngày vận chuyển hàng hoàn thành\r\n  * @param data;\r\n  * @example : this.transportService.calculateTheExpectedDeliveryTime().then(res =>{})\r\n  * @return :\r\n  **/\r\n  calculateTheExpectedDeliveryTime(token, data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/leadtime';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n        \"ShopId\": data.shop_id.toString()\r\n      }),\r\n    }\r\n    let params = {\r\n      \"from_district_id\": data.from_district_id,\r\n      \"from_ward_code\": data.from_ward_code,\r\n      \"to_district_id\": data.to_district_id,\r\n      \"to_ward_code\": data.to_ward_code,\r\n      \"service_id\": data.service_id\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n  getInfoOrder(token, order_code) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/detail';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": token,\r\n      }),\r\n    }\r\n    let params = {\r\n      \"order_code\": order_code\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n  cancelOrder(data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/switch-status/cancel';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": data.token,\r\n        \"ShopId\": data.shop_id.toString(),\r\n      }),\r\n    }\r\n    let params = {\r\n      \"order_codes\": data.order_code\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n  getOtpGhn(data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shop/affiliateOTP';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": \"5c8844f1-17f6-11eb-afc8-92a278719a56\", //gán cứng token\r\n      }),\r\n    }\r\n    let params = {\r\n      \"phone\": data.phone\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n  addStaffToStore(data) {\r\n    let url = 'https://online-gateway.ghn.vn/shiip/public-api/v2/shop/affiliateCreateWithShop';\r\n    const opptions = {\r\n      headers: new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        \"Token\": \"5c8844f1-17f6-11eb-afc8-92a278719a56\",  //gán cứng token\r\n      }),\r\n    }\r\n    let params = {\r\n      \"phone\": data.phone,\r\n      \"otp\": data.otp,\r\n      \"shop_id\": data.shop_id\r\n    }\r\n    return this.http.post(url, params, opptions).toPromise();\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GhtkService {\r\n  private URL: string = this.vhQuerySales.getShippingGHTKURL()\r\n  constructor(\r\n    private http: HttpClient,\r\n    private vhQuerySales: VhQuerySales\r\n  ) { }\r\n\r\n\r\n  /**\r\n  * kiểm tra token của giao hàng tiết kiệm có hợp lệ hay không và lấy thông tin kho\r\n  * @example : this.transportService.connectTokenGhtk(token).then(res =>{\r\n  * @param : tokenName\r\n  * @return :\r\n  **/\r\n  getWareHouseGhtk(token) {\r\n    // let options:any = {\r\n    //   method: 'GET',\r\n    //   url: 'http://115.78.100.57:8013/miscellaneous/ghtk',                       \r\n    //   params: {\r\n    //     token:token,\r\n    //     url: 'https://services.giaohangtietkiem.vn/services/shipment/list_pick_add'\r\n    //   }            \r\n    // };          \r\n    // return axios.request(options);\r\n    \r\n    const opptions = {\r\n      params: {\r\n        \"token\": token,\r\n        \"url\": 'https://services.giaohangtietkiem.vn/services/shipment/list_pick_add'\r\n      }\r\n    }\r\n\r\n    return this.http.get(this.URL, opptions).toPromise();\r\n  }\r\n  /**\r\n  * tính toán phí vận chuyển\r\n  * @example : this.transportService.calculateFeeGhtk(data,transport).then(res =>{\r\n  * @param : data,transport\r\n  * @return :\r\n  **/\r\n  calculateFeeGhtk(data, transport) {\r\n\r\n    const opptions = {\r\n      params: {\r\n        \"token\": data.token,\r\n        \"url\": \"https://services.giaohangtietkiem.vn/services/shipment/fee\"\r\n      }\r\n    }\r\n    let params = {\r\n      \"pick_address_id\": data.shop_id,\r\n      \"province\": data.province,\r\n      \"district\": data.district,\r\n      \"weight\": data.weight * 1000,\r\n      \"value\": data.insurance_value,\r\n      \"transport\": transport\r\n    }\r\n    \r\n    return this.http.post(this.URL, params, opptions).toPromise();\r\n  }\r\n  /**\r\n  * tính toán phí vận chuyển\r\n  * @example : this.transportService.calculateFeeGhtk(data,transport).then(res =>{\r\n  * @param : data,transport\r\n  * @return :\r\n  **/\r\n  createOrderGhtk(token, products, order) {\r\n\r\n    const opptions = {\r\n      params: {\r\n        \"token\": token,\r\n        \"url\": \"https://services.giaohangtietkiem.vn/services/shipment/order/?ver=1.6.3\"\r\n      }\r\n    }\r\n    let params = {\r\n      \"products\": products,\r\n      \"order\": order\r\n    }\r\n    return this.http.post(this.URL, params, opptions).toPromise();\r\n  }\r\n  getStatusBill(token, order_code) {\r\n\r\n    const opptions = {\r\n      params: {\r\n        \"token\": token,\r\n        \"url\": `https://services.giaohangtietkiem.vn/services/shipment/v2/${order_code}`\r\n      }\r\n    }\r\n    return this.http.get(this.URL, opptions).toPromise();\r\n  }\r\n  cancelOrder(token, order_code) {\r\n\r\n    const opptions = {\r\n      params: {\r\n        \"token\": token,\r\n        \"url\": `https://services.giaohangtietkiem.vn/services/shipment/cancel/${order_code}`\r\n      }\r\n    }\r\n    let params = {}\r\n    return this.http.post(this.URL, params, opptions).toPromise();\r\n  }\r\n}\r\n","import { DatePipe } from '@angular/common';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { filter } from 'rxjs/operators';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FacebookService } from '../../../services/facebook.service';\r\n\r\n@Component({\r\n  selector: 'app-conversation-comment',\r\n  templateUrl: './conversation-comment.component.html',\r\n  styleUrls: ['./conversation-comment.component.scss']\r\n})\r\nexport class ConversationCommentComponent implements OnInit {\r\n\r\n  commentId: string = ''\r\n  loading: boolean = false\r\n  @Input() fanpageSelected: any = {}\r\n  @Input() infoSender: any = {}\r\n  messageList: Array<any> = []\r\n  dataPaging: any = {}\r\n  messageText: string = ''\r\n  loadingMoreMessage: boolean = false\r\n  listAttachment: Array<any> = []\r\n  loadingAttachment: boolean = false\r\n  searchProductList: boolean = false\r\n  productSelected: any = {}\r\n  expiresToSend: boolean = false\r\n  post: any = {}\r\n  comment: any = {}\r\n  childComment: Array<any> = []\r\n  listUserJoinComment: Array<any> = []\r\n  infoSendMessage: any = {}\r\n  constructor(\r\n    private fbService: FacebookService,\r\n    private vhComponent: VhComponent,\r\n    private routes: ActivatedRoute,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private datePiPe: DatePipe,\r\n    private modal: NzModalService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.subscribeRouter()\r\n  }\r\n  //subscribe router\r\n  subscribeRouter() {\r\n    this.routes.queryParams.pipe(filter(params => params.commentId))\r\n      .subscribe(val => {\r\n        this.commentId = val.commentId\r\n        this.commentId != '' && this.getData()\r\n      }\r\n      );\r\n  }\r\n  /**\r\n   * Lấy bài post và lấy chi tiết tin nhắn hiển thị ra\r\n   */\r\n  getData() {\r\n    this.loading = true\r\n    this.dataPaging = {}\r\n    this.childComment = []\r\n    Promise.all([\r\n      this.fbService.getPostByIdPost(this.fanpageSelected['access_token'], this.fanpageSelected['id'], this.commentId.split('_')[0]),\r\n      this.fbService.getCommentByID(this.fanpageSelected['access_token'], this.commentId),\r\n      this.fbService.getReplyCommentByID(this.fanpageSelected['access_token'], this.commentId)\r\n    ]).then(([post, comment, childComment]) => {\r\n      this.post = post\r\n      this.comment = comment\r\n      this.dataPaging = childComment.paging\r\n      //Tiếp tục lấy chi tiết comment theo id\r\n      if (childComment.data.length > 0) {\r\n        this.getPromiseDetailComment(childComment.data).then((result1: Array<any>) => {\r\n          this.getListIDUser(result1).then((result2: Array<any>) => {\r\n            this.childComment = this.renderListUserIntoPost(result1, result2)\r\n            this.loading = false\r\n          })\r\n        })\r\n      } else this.loading = false\r\n    }).catch(() => { this.showMessageError(); this.loading = false })\r\n  }\r\n\r\n  /**\r\n   * Hàm này trả về promise detail comment\r\n   * @param data \r\n   */\r\n  getPromiseDetailComment(data: Array<any>): Promise<any> {\r\n    let process: Array<any> = []\r\n    data.forEach(item => { process.push(this.fbService.getCommentByID(this.fanpageSelected['access_token'], item.id)) })\r\n    return Promise.all(process)\r\n  }\r\n  /**\r\n   * Hàm này trả về danh sách những id_user đã comment\r\n   * @param listComment \r\n   */\r\n  getListIDUser(listComment: Array<any>) {\r\n    let arrayID = []\r\n    let listArrayReturn = []\r\n    listComment.forEach(item => {\r\n      if (item.from && this.fanpageSelected.id != item.from.id && !arrayID.includes(item.from.id)) {\r\n        arrayID.push(item.from.id)\r\n        listArrayReturn.push(this.fbService.getInfoUser(item.from.id, this.fanpageSelected['access_token']))\r\n      }\r\n    })\r\n    return Promise.all(listArrayReturn)\r\n  }\r\n  /**\r\n   * Lấy message sticker\r\n   * @param messageList \r\n   * @returns \r\n   */\r\n  getStickerMessage(messageList: Array<any>): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      let shares: Array<any> = []\r\n      messageList.forEach(item => {\r\n        if (item.shares) shares.push(this.fbService.getLinkShares(this.fanpageSelected['access_token'], item.id))\r\n      })\r\n      Promise.all(shares).then((res: any) => { resolve(res) }).catch(() => reject())\r\n    })\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('conversation-dialog') && document.getElementById('conversation-dialog-message')) {\r\n      let height = document.getElementById('conversation-dialog').clientHeight - (this.listAttachment.length > 0 ? 220 : 160)\r\n      document.getElementById('conversation-dialog-message').style.height = `${height}px`\r\n    }\r\n  }\r\n  public renderDate(date) {\r\n    return this.datePiPe.transform(date, 'dd/MM/YYYY HH:mm')\r\n  }\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n  /**\r\n   * Sự kiện typing bất kì phím nào, bắt sự kiện enter để send message\r\n   * @param event \r\n   */\r\n  keyPress(event: KeyboardEvent) {\r\n    const keyCode = event.which || event.keyCode;\r\n    if (keyCode == 13 && !event.shiftKey) {\r\n      event.preventDefault()\r\n      this.sendAllMessage()\r\n    }\r\n  }\r\n  sendAllMessage() {\r\n    let dataPush: any = {\r\n      id: '', can_comment: true, can_hide: true, can_like: true, can_remove: true, can_reply_privately: true,\r\n      comment_count: 0, created_time: new Date(), from: { name: this.fanpageSelected.name, id: this.fanpageSelected.id },\r\n      is_hidden: false, like_count: 0, message: this.messageText, user_likes: false, senderName: this.fanpageSelected.name,\r\n      participants: { data: [{ picture: { data: { url: this.fanpageSelected.image_url } } }] }\r\n    }\r\n    if (this.messageText && (!this.listAttachment.length || !this.listAttachment[0].loadingAttachment)) {\r\n      let json: any = { message: `${this.messageText}` }\r\n      this.childComment.unshift(dataPush)\r\n      this.messageText = ''\r\n      this.fbService.replyCommentFacebookText(this.fanpageSelected.access_token, this.commentId, json).then(res => {\r\n        if (res.error) {\r\n          this.vhComponent.alertMessageDesktop('error', res.error?.message);\r\n          this.childComment.splice(0, 1)\r\n        } else this.childComment[0].id = res.id\r\n        if (this.listAttachment.length) {\r\n          dataPush.message = ''\r\n          this.childComment.unshift(dataPush)\r\n          this.sendMessageImage()\r\n        }\r\n      })\r\n    } else if (this.listAttachment.length && this.listAttachment[0].loadingAttachment)\r\n      this.vhComponent.alertMessageDesktop('warning', 'Đang tải ảnh lên, vui lòng chờ giây lát...')\r\n    else if (this.listAttachment.length && !this.listAttachment[0].loadingAttachment) {\r\n      this.childComment.unshift(dataPush)\r\n      this.sendMessageImage()\r\n    }\r\n  }\r\n  /**\r\n   * Gửi hình ảnh\r\n   */\r\n  sendMessageImage() {\r\n    this.childComment[0] = {\r\n      attachment: {\r\n        media: { image: { src: this.listAttachment[0].buffer } }, type: 'photo'\r\n      },\r\n      ...this.childComment[0]\r\n    }\r\n    this.fbService.replyCommentFacebookImage(this.commentId, this.listAttachment[0].formData).then(res => {\r\n      if (res.error) {\r\n        this.vhComponent.alertMessageDesktop('error', res.error?.message);\r\n        this.childComment.splice(0, 1)\r\n      } else {\r\n        this.childComment[0].id = res.id\r\n      }\r\n    })\r\n    this.listAttachment = []\r\n  }\r\n\r\n  appendEmoji(emoji: string) {\r\n    this.messageText += emoji\r\n  }\r\n  loadMoreMessage() {\r\n    this.loadingMoreMessage = true;\r\n    this.fbService.getNextPaging(this.dataPaging.next).then(childComment => {\r\n      if (childComment.error) {\r\n        this.showMessageError()\r\n        this.loadingMoreMessage = false\r\n      } else {\r\n        this.getPromiseDetailComment(childComment.data).then((result1: Array<any>) => {\r\n          this.getListIDUser(result1).then((result2: Array<any>) => {\r\n            this.childComment = this.childComment.concat(this.renderListUserIntoPost(result1, result2))\r\n            this.dataPaging = childComment.paging\r\n            this.loadingMoreMessage = false\r\n          })\r\n        })\r\n      }\r\n    }).catch(() => { this.showMessageError(); this.loadingMoreMessage = false })\r\n  }\r\n  /**\r\n   * Upload hình ảnh\r\n   * @param event \r\n   */\r\n  onUploadImage(event: any) {\r\n    const fileReader = new FileReader();\r\n    const readerBase64 = new FileReader();\r\n    const file = event.target.files[0];\r\n    readerBase64.readAsDataURL(file)\r\n    readerBase64.onload = (e: any) => {\r\n      fileReader.onloadend = async () => {\r\n        const photoData = new Blob([fileReader.result], { type: 'image/jpg' });\r\n        const formData = new FormData();\r\n        formData.append('access_token', this.fanpageSelected.access_token);\r\n        formData.append('source', photoData);\r\n        this.listAttachment.push({ formData, buffer: readerBase64.result, loadingAttachment: false })\r\n      };\r\n      fileReader.readAsArrayBuffer(file);\r\n    }\r\n  }\r\n  updateImage() {\r\n    if (this.listAttachment.length >= 1)\r\n      this.vhComponent.alertMessageDesktop('warning', 'Chỉ được gửi tối đa 1 ảnh. Vui lòng thử lại')\r\n    else document.getElementById('image-message').click()\r\n  }\r\n\r\n  removeImage(image: any, index: number) {\r\n    this.listAttachment.splice(index, 1)\r\n  }\r\n  showMessageError() {\r\n    this.vhComponent.alertMessageDesktop('error', \"Xảy ra lỗi khi đồng bộ, vui lòng thử lại\")\r\n  }\r\n  isVisibleSendMessage: boolean = false\r\n  closeSearch(data) {\r\n    if (data) {\r\n      this.productSelected = data\r\n      this.isVisibleSendMessage = true\r\n    }\r\n    this.searchProductList = false;\r\n  }\r\n  sendProductAndPrice() {\r\n    this.messageText = `Tên sản phẩm: ${this.productSelected['name']}, Giá : ${this.vhAlgorithm.vhcurrencyunit_symbol(this.productSelected['price'])}`\r\n    this.isVisibleSendMessage = false\r\n  }\r\n  sendMessageUrl(all?) {\r\n    this.messageList.push({\r\n      id: '',\r\n      from: this.fanpageSelected,\r\n      to: { data: [this.infoSender] },\r\n      message: '',\r\n      created_time: new Date().toISOString(),\r\n      attachments: {\r\n        data: [{ image_data: { preview_url: this.productSelected['img'], url: this.productSelected['img'] } }]\r\n      }\r\n    })\r\n    this.isVisibleSendMessage = false\r\n    this.fbService.sendImageWithUrl(this.fanpageSelected['access_token'], this.productSelected['img'], this.infoSender['id']).then(res => {\r\n      if (res.error) {\r\n        this.vhComponent.alertMessageDesktop('error', \"Xảy ra khi gửi hình ảnh, vui lòng thử lại\")\r\n        this.messageList.splice(this.messageList.length - 1, 1)\r\n      } else this.messageList[this.messageList.length - 1].id = res['message_id']\r\n\r\n      if (all) {\r\n        this.sendProductAndPrice()\r\n        this.sendAllMessage()\r\n      }\r\n    })\r\n  }\r\n\r\n  gotoInbox() {\r\n    window.open(`https://www.facebook.com/${this.fanpageSelected.id}/inbox`, '_blank')\r\n  }\r\n  likeCommentByCommentId(comment) {\r\n    this.fbService.likeCommentByCommentId(this.fanpageSelected['access_token'], comment.id, comment.user_likes)\r\n    comment.user_likes = !comment.user_likes\r\n  }\r\n  /**\r\n   * Hàm nàm để render thông tin người dùng đã bình luận\r\n   * @param listUser \r\n   */\r\n  renderListUserIntoPost(childComment: Array<any>, listUser: Array<any>) {\r\n    childComment.forEach(item => {\r\n      if (item.from && item.from.id == this.fanpageSelected.id) {\r\n        item.senderName = this.fanpageSelected.name\r\n        item.participants = { data: [] }\r\n        item.participants.data[0] = {\r\n          id: this.fanpageSelected.id,\r\n          name: this.fanpageSelected.name,\r\n          picture: {\r\n            data: { url: this.fanpageSelected.image_url }\r\n          }\r\n        }\r\n      } else if (item.from && item.from.id != this.fanpageSelected.id) {\r\n        let user = listUser.find(userInfo => userInfo.id == item.from.id)\r\n        item.participants = { data: [] }\r\n        item.participants.data[0] = user\r\n        item.senderName = user.name\r\n      }\r\n    })\r\n    return this.vhAlgorithm.sortDatebyDESC(childComment, 'created_time')\r\n  }\r\n  trackByMyComment(index, item) {\r\n    return index;\r\n  }\r\n  deleteCommentByID(comment, emit?) {\r\n    this.modal.confirm({\r\n      nzTitle: 'Xác nhận',\r\n      nzContent: '<i>Bạn có muốn xóa bình luận này?</i>',\r\n      nzOkText: 'OK',\r\n      nzOnOk: () => {\r\n        return new Promise((resolve, reject) => {\r\n          this.fbService.deleteCommentByID(this.fanpageSelected['access_token'], comment.id).then(res => {\r\n            if (res.success) {\r\n              comment.deleted = true\r\n              emit && this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'], { queryParams: { deleteCommentID: comment.id } })\r\n            }\r\n            else this.vhComponent.alertMessageDesktop('error', 'Xóa bình luận thất bại')\r\n            resolve(true)\r\n          })\r\n        })\r\n      },\r\n      nzOnCancel: () => { },\r\n      nzCancelText: 'Hủy'\r\n    })\r\n  }\r\n  hideCommentByID(comment) {\r\n    this.modal.confirm({\r\n      nzTitle: 'Xác nhận',\r\n      nzContent: '<i>Bạn có muốn ẩn bình luận này?</i>',\r\n      nzOkText: 'OK',\r\n      nzOnOk: () => {\r\n        return new Promise((resolve, reject) => {\r\n          this.fbService.updateCommentByID(this.fanpageSelected['access_token'], comment.id, { is_hidden: !comment.is_hidden }).then(res => {\r\n            if (res.success)\r\n              comment.is_hidden = !comment.is_hidden\r\n            else this.vhComponent.alertMessageDesktop('error', 'Ẩn bình luận thất bại')\r\n            resolve(true)\r\n          })\r\n        })\r\n      },\r\n      nzOnCancel: () => { },\r\n      nzCancelText: 'Hủy'\r\n    })\r\n  }\r\n\r\n  sendPrivateMessage() {\r\n    let json = {\r\n      recipient: { comment_id: this.infoSendMessage.id },\r\n      message: { text: this.infoSendMessage.textMessage }\r\n    }\r\n    this.fbService.replyPrivateMessageOnComment(this.fanpageSelected.access_token, json).then(res => {\r\n      if (res.comment_id)\r\n        this.vhComponent.alertMessageDesktop('success', 'Phản hồi bình luận thành công')\r\n      else this.vhComponent.alertMessageDesktop('error', 'Bình luận này đã được phản hồi trước đó, vui lòng kiểm tra lại')\r\n      this.infoSendMessage = {}\r\n\r\n    })\r\n  }\r\n}\r\n","<div class=\"layout\" id=\"conversation-dialog\">\r\n    <div class=\"dialog\" [ngClass]=\"{'have-image-upload' : listAttachment.length>0}\">\r\n        <div class=\"d-flex header-detail\">\r\n            <div class=\"header-detail-left\">\r\n                <div class=\"user d-flex\">\r\n                    <img src=\"{{infoSender['profile_pic']}}\" alt=\"avatar\">\r\n                    <div class=\"user-name\"><b class=\"user-name\">{{infoSender['name']}}</b>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"header-detail-right\">\r\n                <i class=\"icon\" nzTooltipTitle=\"Chặn người dùng\" nzTooltipPlacement=\"top\" nz-tooltip nz-icon\r\n                    nzType=\"stop\" nzTheme=\"outline\"></i>\r\n                <i (click)=\"gotoInbox()\" class=\"icon\" nzTooltipTitle=\"Chuyển sang trang tin nhắn\"\r\n                    nzTooltipPlacement=\"top\" nz-tooltip nz-icon nzType=\"facebook\" nzTheme=\"outline\"></i>\r\n                <i class=\"icon\" nzTooltipTitle=\"Đánh dấu chưa đọc\" nzTooltipPlacement=\"top\" nz-tooltip nz-icon\r\n                    nzType=\"mail\" nzTheme=\"outline\"></i>\r\n                <i (click)=\"getData()\" class=\"icon\" nzTooltipTitle=\"Đồng bộ lại tin nhắn\" nzTooltipPlacement=\"top\"\r\n                    nz-tooltip nz-icon nzType=\"sync\" nzTheme=\"outline\"></i>\r\n            </div>\r\n        </div>\r\n        <div class=\"dialog-message ant-table-body\" id=\"conversation-dialog-message\">\r\n            <nz-skeleton [nzActive]=\"true\" [nzLoading]=\"loading\">\r\n                <div class=\"dialog-message-post\">\r\n                    <a class=\"icon\" target=\"_blank\" [href]=\"post.permalink_url\">\r\n                        <i nz-tooltip nzTooltipPlacement=\"top\" nzTooltipTitle=\"Xem bài viết ở facebook\" nz-icon\r\n                            nzType=\"exception\" nzTheme=\"outline\"></i>\r\n                    </a>\r\n                    <div class=\"message\">\r\n                        <p class=\"create-time\">{{post.created_time | date: 'dd/MM/YYYY HH:mm'}}</p>\r\n                        <p>{{post.message}}</p>\r\n                    </div>\r\n                    <img class=\"image\" *ngIf=\"post.full_picture\" [src]=\"post.full_picture\" alt=\"\">\r\n                </div>\r\n                <div class=\"dialog-message-parent\">\r\n                    <div class=\"dialog-message-parent-profile\">\r\n                        <img src=\"{{infoSender['profile_pic']}}\" alt=\"avatar\">\r\n                    </div>\r\n                    <div class=\"dialog-message-parent-owner\">\r\n                        <div nz-tooltip nzTooltipPlacement=\"right\" [nzTooltipTitle]=\"renderDate(comment.created_time)\"\r\n                            *ngIf=\"comment.message\" class=\"message\">\r\n                            {{comment.message}}\r\n                        </div>\r\n                        <a target=\"_blank\"\r\n                            *ngIf=\"comment.attachment && (comment.attachment.type =='photo' || comment.attachment.type =='sticker')\"\r\n                            [href]=\"comment.attachment.media?.image?.src\">\r\n                            <img nz-tooltip nzTooltipPlacement=\"right\"\r\n                                [nzTooltipTitle]=\"renderDate(comment.created_time)\" class=\"image\"\r\n                                [src]=\"comment.attachment.media?.image?.src\" alt=\"\">\r\n                        </a>\r\n                        <div class=\"action\" *ngIf=\"!comment.deleted;else hasDeleted\">\r\n                            <a (click)=\"likeCommentByCommentId(comment)\" nz-button nzType=\"link\">{{comment.user_likes ?\r\n                                'Bỏ thích' : 'Thích' }}</a>\r\n                            <a (click)=\"hideCommentByID(comment)\" nz-button nzType=\"link\">\r\n                                {{comment.is_hidden ? 'Bỏ ẩn bình luận': 'Ẩn bình luận'}}</a>\r\n                            <a (click)=\"deleteCommentByID(comment,true)\" nz-button nzType=\"link\">Xóa</a>\r\n                            <a *ngIf=\"comment.can_reply_privately\"\r\n                                (click)=\"infoSendMessage = comment;infoSendMessage.visible = true\" nz-button\r\n                                nzType=\"link\">Nhắn tin</a>\r\n                        </div>\r\n                        <ng-template #hasDeleted>\r\n                            <div class=\"action\"><a nz-button nzType=\"link\">Đã xóa</a></div>\r\n                        </ng-template>\r\n                    </div>\r\n                </div>\r\n                <div class=\"dialog-message-child\">\r\n                    <div *ngFor=\"let item of childComment;trackBy : trackByMyComment\" class=\"dialog-message-parent\">\r\n                        <div class=\"dialog-message-parent-profile\">\r\n                            <img [src]=\"item.participants?.data[0]?.picture?.data?.url || 'assets/icon/no-avatar.svg'\"\r\n                                alt=\"avatar\">\r\n                        </div>\r\n                        <div class=\"dialog-message-parent-owner\">\r\n                            <div *ngIf=\"item.message\" class=\"message\"\r\n                                [ngClass]=\"{'bg-green' : item.from?.id ==fanpageSelected.id,'loading' : item.id == ''}\"\r\n                                nz-tooltip nzTooltipPlacement=\"right\" [nzTooltipTitle]=\"renderDate(item.created_time)\">\r\n                                <b style=\"display: block;\">{{item.senderName || 'Chưa xác định'}}</b>\r\n                                {{item.message}}\r\n                            </div>\r\n                            <a target=\"_blank\"\r\n                                *ngIf=\"item.attachment && (item.attachment.type =='photo' || item.attachment.type =='sticker')\"\r\n                                [href]=\"item.attachment.media?.image?.src\">\r\n                                <img [ngClass]=\"{'loading' : item.id == ''}\" nz-tooltip nzTooltipPlacement=\"right\"\r\n                                    [nzTooltipTitle]=\"renderDate(item.created_time)\" class=\"image\"\r\n                                    [src]=\"item.attachment.media?.image?.src\" alt=\"\">\r\n                            </a>\r\n                            <div class=\"action\" *ngIf=\"!item.deleted;else hasDeleted\">\r\n                                <a (click)=\"likeCommentByCommentId(item)\" nz-button nzType=\"link\">{{item.user_likes ?\r\n                                    'Bỏ thích' : 'Thích' }}</a>\r\n                                <a (click)=\"hideCommentByID(item)\" *ngIf=\"item.from?.id !=fanpageSelected.id\" nz-button\r\n                                    nzType=\"link\">{{item.is_hidden ? 'Bỏ ẩn bình luận': 'Ẩn bình luận'}}</a>\r\n                                <a (click)=\"deleteCommentByID(item)\" nz-button nzType=\"link\">Xóa</a>\r\n                                <a (click)=\"infoSendMessage = item;infoSendMessage.visible\"\r\n                                    *ngIf=\"item.from?.id !=fanpageSelected.id && item.can_reply_privately\" nz-button\r\n                                    nzType=\"link\">Nhắn tin</a>\r\n                            </div>\r\n                            <ng-template #hasDeleted>\r\n                                <div class=\"action\"><a nz-button nzType=\"link\">Đã xóa</a></div>\r\n                            </ng-template>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div *ngIf=\"dataPaging?.next\" (click)=\"loadMoreMessage()\" class=\"loading-more-message\"><i nz-icon\r\n                        [nzType]=\"'sync'\" [nzSpin]=\"loadingMoreMessage\"></i> Xem thêm bình luận</div>\r\n            </nz-skeleton>\r\n        </div>\r\n        <div *ngIf=\"!expiresToSend;else expiresToSendTemplate\" class=\"reply-inbox\"\r\n            [ngClass]=\"{'have-image-upload' : listAttachment.length>0}\">\r\n            <div class=\"reply-inbox-upload\" [ngClass]=\"{'d-none' : listAttachment.length==0}\" nz-row nzGutter=\"16\">\r\n                <div class=\"reply-inbox-upload-relative\" nz-col nzSpan=\"4\"\r\n                    *ngFor=\"let item of listAttachment;index as i\">\r\n                    <img width=\"100%\" height=\"50px\" [src]=\"item.buffer\" alt=\"\">\r\n                    <i (click)=\"removeImage(item,i)\" class=\"icon-remove\" nz-icon nzType=\"close-circle\"\r\n                        nzTheme=\"outline\"></i>\r\n                    <nz-spin [nzSpinning]=\"item.loadingAttachment\"></nz-spin>\r\n                </div>\r\n            </div>\r\n            <div class=\"reply-inbox-text\">\r\n                <textarea [(ngModel)]=\"messageText\" (keypress)=\"keyPress($event)\"\r\n                    [nzAutosize]=\"{ minRows: 2, maxRows: 2 }\"\r\n                    placeholder=\"Nhập tin nhắn và nhấn enter để gửi, nhấn shift + enter để xuống dòng\" rows=\"2\"\r\n                    nz-input></textarea>\r\n            </div>\r\n            <div class=\"reply-inbox-icon\">\r\n                <div class=\"reply-inbox-icon-action\">\r\n                    <i class=\"icon\" nzTooltipTrigger=\"click\" [nzTooltipTitle]=\"listEmoil\" nzTooltipPlacement=\"top\"\r\n                        nz-tooltip nz-icon nzType=\"smile\" nzTheme=\"outline\"></i>\r\n                    <i (click)=\"updateImage()\" class=\"icon\" nzTooltipTitle=\"Tải hình\" nzTooltipPlacement=\"top\"\r\n                        nz-tooltip nz-icon nzType=\"camera\" nzTheme=\"outline\"></i>\r\n                    <i (click)=\"searchProductList = true\" class=\"icon\" nzTooltipTitle=\"Sản phẩm\"\r\n                        nzTooltipPlacement=\"top\" nz-tooltip nz-icon nzType=\"shopping-cart\" nzTheme=\"outline\"></i>\r\n                    <input id=\"image-message\" (change)=\"onUploadImage($event)\" style=\"display: none;\" type=\"file\">\r\n                </div>\r\n                <div class=\"reply-inbox-icon-send\">\r\n                    <button nz-button [disabled]=\"messageText ==''\" (click)=\"sendAllMessage()\"><span>Gửi</span><i\r\n                            nz-icon nzType=\"send\" nzTheme=\"outline\"></i></button>\r\n                </div>\r\n                <ng-template #listEmoil let-thing>\r\n                    <div class=\"list-emoji\">\r\n                        <span (click)=\"appendEmoji('😊')\">😊</span>\r\n                        <span (click)=\"appendEmoji('😆')\">😆</span>\r\n                        <span (click)=\"appendEmoji('😃')\">😃</span>\r\n                        <span (click)=\"appendEmoji('😁')\">😁</span>\r\n                        <span (click)=\"appendEmoji('😅')\">😅</span>\r\n                        <span (click)=\"appendEmoji('😂')\">😂</span>\r\n                        <span (click)=\"appendEmoji('😊')\">😊</span>\r\n                        <span (click)=\"appendEmoji('😇')\">😇</span>\r\n                        <span (click)=\"appendEmoji('🙂')\">🙂</span>\r\n                        <span (click)=\"appendEmoji('🙃')\">🙃</span>\r\n                        <span (click)=\"appendEmoji('😉')\">😉</span>\r\n                        <span (click)=\"appendEmoji('😌')\">😌</span>\r\n                        <span (click)=\"appendEmoji('😍')\">😍</span>\r\n                        <span (click)=\"appendEmoji('🥰')\">🥰</span>\r\n                        <span (click)=\"appendEmoji('😘')\">😘</span>\r\n                        <span (click)=\"appendEmoji('😗')\">😗</span>\r\n                        <span (click)=\"appendEmoji('😙')\">😙</span>\r\n                        <span (click)=\"appendEmoji('😋')\">😋</span>\r\n                        <span (click)=\"appendEmoji('😛')\">😛</span>\r\n                        <span (click)=\"appendEmoji('🤪')\">🤪</span>\r\n                        <span (click)=\"appendEmoji('🧐')\">🧐</span>\r\n                        <span (click)=\"appendEmoji('🤓')\">🤓</span>\r\n                        <span (click)=\"appendEmoji('😎')\">😎</span>\r\n                        <span (click)=\"appendEmoji('🤩')\">🤩</span>\r\n                        <span (click)=\"appendEmoji('🥳')\">🥳</span>\r\n                        <span (click)=\"appendEmoji('😏')\">😏</span>\r\n                        <span (click)=\"appendEmoji('😒')\">😒</span>\r\n                        <span (click)=\"appendEmoji('😞')\">😞</span>\r\n                        <span (click)=\"appendEmoji('😟')\">😟</span>\r\n                        <span (click)=\"appendEmoji('😕')\">😕</span>\r\n                        <span (click)=\"appendEmoji('🙁')\">🙁</span>\r\n                        <span (click)=\"appendEmoji('☹️')\">☹️</span>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n        <ng-template #expiresToSendTemplate>\r\n            <div class=\"reply-inbox d-flex\">\r\n                <div class=\"warning\">\r\n                    <i class=\"icon-warning\" nz-icon nzType=\"warning\" nzTheme=\"outline\"></i> Đã hết thời hạn gửi tin nhắn\r\n                    cho\r\n                    khách hàng không tương tác với trang theo <a\r\n                        href=\"https://developers.facebook.com/docs/messenger-platform/send-messages/message-tags/\">điều\r\n                        khoản của Facebook</a>.\r\n                    Bạn có thể sử dụng Facebook để phản hồi cho khách hàng. <b><a (click)=\"gotoInbox()\">Xem hội thoại\r\n                            trên\r\n                            Facebook</a></b>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n</div>\r\n<!--Search product-->\r\n<app-search-product *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\" [default_price_type]=\"1\"\r\n    (closeSearchProductList)=\"closeSearch($event)\">\r\n</app-search-product>\r\n<nz-modal [nzWidth]=\"520\" [(nzVisible)]=\"isVisibleSendMessage\" nzTitle=\"Gửi nhanh sản phẩm\"\r\n    (nzOnCancel)=\"isVisibleSendMessage = false\" [nzFooter]=\"null\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"quick-send-product\">\r\n            <div class=\"text-center\" nz-col nzSpan=\"24\">\r\n                <img width=\"150\" height=\"150\"\r\n                    [src]=\"productSelected.img || './assets/icon/management/image_default.svg'\" alt=\"\">\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b>{{'Product name' | translate}}</b> : {{productSelected.name}}</div>\r\n                <div><b>{{'Selling price' | translate}}</b> : {{vhAlgorithm.vhcurrencyunit(productSelected.price)}}\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"right-all-content\">\r\n                <button (click)=\"isVisibleSendMessage=false\" class=\"width-fit-content\" nz-button>\r\n                    {{'Cancel' | translate}}\r\n                </button>\r\n                <button (click)=\"sendProductAndPrice()\" class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send product name + price' | translate}}\r\n                </button>\r\n                <button [disabled]=\"!productSelected['img']\" (click)=\"sendMessageUrl()\"\r\n                    class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send image' | translate}}\r\n                </button>\r\n                <button (click)=\"sendMessageUrl(true)\" [disabled]=\"!productSelected['img']\"\r\n                    class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send all' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>\r\n<nz-modal [nzFooter]=\"null\" [(nzVisible)]=\"infoSendMessage.visible\" [nzTitle]=\"null\"\r\n    (nzOnCancel)=\"infoSendMessage = {}\">\r\n    <ng-container *nzModalContent>\r\n        <div class=\"modal-send-message\" nz-row nzGutter=\"16\">\r\n            <div class=\"d-flex-center\" nz-col nzSpan=\"24\">\r\n                <svg style=\"margin-right: 8px;\" width=\"28px\" height=\"28px\" viewBox=\"0 0 27 26\">\r\n                    <g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1 1)\">\r\n                        <polygon fill=\"#FFF\"\r\n                            points=\"24.457 4.159 12.5 0 .543 4.159 .543 16.635 10.326 19.565 10.326 23.913 24.457 16.635\">\r\n                        </polygon>\r\n                        <polygon fill=\"#2962FF\" fill-opacity=\".299\"\r\n                            points=\"21.739 3.214 21.739 14.461 10.326 20.34 10.326 23.913 24.457 16.635 24.457 4.159\">\r\n                        </polygon>\r\n                        <polygon stroke=\"#2962FF\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"\r\n                            points=\"24.457 4.159 12.5 0 .543 4.159 .543 16.635 10.326 19.565 10.326 23.913 17.195 20.375 24.457 16.635\">\r\n                        </polygon>\r\n                        <path stroke=\"#2962FF\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"\r\n                            d=\"M4.89130435 6.52173913L20.1086957 6.52173913M4.89130435 9.7826087L20.1086957 9.7826087M4.89130435 13.0434783L12.5 13.0434783\">\r\n                        </path>\r\n                    </g>\r\n                </svg>\r\n                <h4>Tin nhắn mới</h4>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"receiver\">\r\n                Người nhận : <b>{{infoSendMessage.from?.name}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <textarea rows=\"4\" nz-input [(ngModel)]=\"infoSendMessage.textMessage\"></textarea>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"button-action\">\r\n                <button class=\"cancel\" (click)=\"infoSendMessage = {}\" nzType=\"text\" nz-button>Hủy</button>\r\n                <button [disabled]=\"!infoSendMessage.textMessage\" class=\"send bg-green\" (click)=\"sendPrivateMessage()\"\r\n                    nzType=\"text\" nz-button>Gửi</button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-add-customer',\r\n  templateUrl: './add-customer.component.html',\r\n  styleUrls: ['./add-customer.component.scss']\r\n})\r\nexport class AddCustomerComponent implements OnInit {\r\n\r\n  @Input(\"showDrawerAddCusomer\") showDrawerAddCusomer: boolean = false;\r\n  @Input(\"infoSender\") infoSender: any = {}\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n  customerGroups = this.vhQuerySales.getlocalCustomerClasss();\r\n  addCustomerForm: FormGroup;\r\n  selectedValue: any;\r\n\r\n\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private functionService: FunctionService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initaddCustomerForm()\r\n  }\r\n\r\n\r\n\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? true : false);\r\n  }\r\n\r\n\r\n\r\n  initaddCustomerForm() {\r\n    this.addCustomerForm = new FormGroup({\r\n      img: new FormControl(null),\r\n      name: new FormControl(this.infoSender.name, Validators.compose([Validators.required])),\r\n      email: new FormControl(this.infoSender.email),\r\n      gender: new FormControl(null),\r\n      datebirth: new FormControl(null),\r\n      phone: new FormControl(null, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.countryCode),\r\n      ]),\r\n      address: new FormControl(null),\r\n      country: new FormControl(null),\r\n      province: new FormControl(null),\r\n      district: new FormControl(null),\r\n      note: new FormControl(null),\r\n      id_customer_class: new FormControl(null),\r\n      debt_enable: new FormControl(true),\r\n      delete_hidden: new FormControl(false),\r\n      isBusiness: new FormControl(false),\r\n      taxcode: new FormControl(null),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  addCustomer() {\r\n    this.vhComponent.showLoading(\"\").then(() => {\r\n      let customer: any = { ...this.addCustomerForm.value };\r\n  \r\n      const phoneNumberValue = customer.phone;\r\n      customer.countryCode = this.countryCode;\r\n      customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n      customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n  \r\n      customer.date = new Date();\r\n      customer.email = this.infoSender.email;\r\n\r\n      if(customer.isBusiness) {\r\n        delete customer.gender;\r\n        delete customer.datebirth;\r\n      }\r\n      else {\r\n         delete customer.taxcode;\r\n      }\r\n\r\n      this.vhQuerySales.addCustomer(customer)\r\n        .then((res: any) => {\r\n          if(res.vcode == 0) {\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.showToast(1500, `${this.lang.translate(\"Customer\")} ${customer.name} ${this.lang.translate(\"has been added successfully\")}`, \"success-toast\")\r\n            this.closeAddCustomer.emit(res);\r\n          }\r\n          else if(res.vcode == 1) {\r\n            //This phone number is already in use with another customer\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.showToast(1500, this.lang.translate(\"This phone number is already in use with another customer\"), 'alert-toast');\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.showToast(1500, this.lang.translate(\"An eror occured while adding customer. Please try again\"), 'alert-toast')\r\n        });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Loại khách hàng\r\n   */\r\n  changeBusiness(event) {\r\n    // taxcode required khi isBusiness = true\r\n    if (event) {\r\n      this.addCustomerForm.get('taxcode')?.setValidators([Validators.required]);\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    } \r\n    else {\r\n      this.addCustomerForm.get('taxcode')?.clearValidators();\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /** Kiểm tra số điện thoại đã tồn tại ha chưa để hiển thị thông báo */\r\n  isExitsPhone: boolean = false;\r\n\r\n  /** Mã quốc gia */\r\n  countryCode: string = this.functionService.defaultCountryCode;\r\n  \r\n  /** Calling code */\r\n  callingCode: string = this.functionService.defaultCallingCode;\r\n  \r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chọn mã quốc gia\r\n   */\r\n  openSearchCountryCode() {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.addCustomerForm.value.phone, this.countryCode as CountryCode);\r\n      this.addCustomerForm.get('phone')?.markAsTouched();\r\n      this.addCustomerForm.get('phone')?.markAsDirty();\r\n      this.addCustomerForm.get('phone')?.updateValueAndValidity();\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   */\r\n  formatPhoneNumber(event: Event): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this.addCustomerForm.get('phone')?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer\" | translate}}'\r\n  [nzVisible]=\"showDrawerAddCusomer\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n  <ng-container *nzDrawerContent>\r\n    <form nz-form [formGroup]=\"addCustomerForm\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer name' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n            <nz-input-group>\r\n              <input formControlName=\"name\" nz-input placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n              <ng-template #combineTplName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Customer name is required' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n            <nz-input-group>\r\n              <div (click)=\"openSearchCountryCode()\" class=\"calling-code\">\r\n                <span>+{{callingCode}}</span>\r\n                <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n              </div>\r\n              <input formControlName=\"phone\"\r\n                (input)=\"formatPhoneNumber($event)\"\r\n                [value]=\"formattedPhone\"\r\n                [placeholder]=\"'Enter customer phone' | translate\" type=\"tel\" nz-input required />\r\n              <ng-template #combineTplPhone let-control>\r\n                <ng-container *ngIf=\"control.hasError('invalidPhone')\">{{'_Invalid phone number' | translate}}</ng-container>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' | translate}}</ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n            <div *ngIf=\"isExitsPhone\"\r\n              class=\"ng-tns-c300-27 ant-form-item-explain ant-form-item-explain-error ng-star-inserted\"\r\n              ng-reflect-ng-class=\"ant-form-item-explain,ant-form\">\r\n              <div class=\"ng-tns-c300-27 ng-trigger ng-trigger-helpMotion\">\r\n                {{'Phone number already exists' | translate}}\r\n              </div>\r\n            </div>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Email' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control nzErrorTip=\"{{'Email is not correct' | translate}}\">\r\n            <nz-input-group>\r\n              <input type=\"email\" formControlName=\"email\" nz-input\r\n                placeholder=\"{{'Enter customer mail' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer tier' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-select nzShowSearch [nzAllowClear]=\"false\" formControlName=\"id_customer_class\">\r\n              <nz-option [nzValue]=\"null\" nzLabel=\"{{'Undefined' | translate}}\">\r\n              </nz-option>\r\n              <nz-option *ngFor=\"let item of customerGroups\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n              </nz-option>\r\n            </nz-select>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Address' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"address\" nz-input placeholder=\"{{'Enter address' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n\r\n      <!-- Loại khách hàng -->\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer type' | translate}}</b></div>\r\n        <nz-select nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select customer type' | translate\"\r\n          formControlName=\"isBusiness\"\r\n          (ngModelChange)=\"changeBusiness($event)\">\r\n          <nz-option [nzLabel]=\"'Individual' | translate\" [nzValue]=\"false\"></nz-option>\r\n          <nz-option [nzLabel]=\"'Business/Business household' | translate\" [nzValue]=\"true\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <!-- Mã số thuế -->\r\n      <ng-container *ngIf=\"addCustomerForm.value.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div><b class='label'>{{'Tax code' | translate}}</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"taxcode\">\r\n              <nz-input-group>\r\n                <input formControlName=\"taxcode\" nz-input [placeholder]=\"'Enter tax code' | translate\" />\r\n                <ng-template #taxcode let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Tax code is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <div *ngIf=\"!addCustomerForm.value.isBusiness\" nz-col nzSpan=\"24\">\r\n        <div nz-row nzGutter=\"16\">\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n            <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"{{'Select gender' | translate}}\"\r\n              [(ngModel)]=\"selectedValue\" formControlName=\"gender\">\r\n              <nz-option nzLabel=\"{{'Female'|translate}}\" nzValue=\"Female\"></nz-option>\r\n              <nz-option nzLabel=\"{{'Male'|translate}}\" nzValue=\"Male\"></nz-option>\r\n            </nz-select>\r\n          </div>\r\n          <div nz-col nzSpan=\"12\">\r\n            <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n            <nz-date-picker formControlName=\"datebirth\" nzPlaceHolder=\"{{'Select date of birth' | translate}}\">\r\n            </nz-date-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Country' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"country\" nz-input placeholder=\"{{'Enter country' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Province' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"province\" nz-input placeholder=\"{{'Enter province' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'District' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"district\" nz-input placeholder=\"{{'Enter district' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Note' | translate}}</b></div>\r\n        <textarea nz-input placeholder=\"{{'Enter note' | translate}}\" [nzAutosize]=\"{ minRows: 3, maxRows: 5 }\"\r\n          formControlName=\"note\"></textarea>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n        <div></div>\r\n        <label nz-checkbox formControlName=\"debt_enable\">{{'Debit permission' | translate}}</label>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #footerAddCustomer>\r\n    <div class=\"footerAddCustomer\" style=\"float: right\">\r\n      <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n      <button [disabled]=\"addCustomerForm.invalid\" [ngStyle]=\"{opacity: addCustomerForm.invalid ? 0.5 : 1}\" nz-button\r\n        (click)=\"addCustomer()\">{{\"Add\" | translate}}</button>\r\n    </div>\r\n  </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { AhamoveService } from 'src/app/sales/menu/manage/delivery/services/ahamoveService/ahamove.service';\r\nimport { GhnService } from 'src/app/sales/menu/manage/delivery/services/ghnService/ghn.service';\r\nimport { GhtkService } from 'src/app/sales/menu/manage/delivery/services/ghtkService/ghtk.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nconst GHNTOKEN: string = '656776fd-1e78-11eb-aaa9-3e267f98f494'\r\n@Component({\r\n  selector: 'app-check-fees',\r\n  templateUrl: './check-fees.component.html',\r\n  styleUrls: ['./check-fees.component.scss']\r\n})\r\nexport class CheckFeesComponent implements OnInit {\r\n  @Input('id_delivery') id_delivery;\r\n  @Input('visibleCheckFees') visibleCheckFees = false\r\n  @Output('hideModalCheckFees') hideModalCheckFees = new EventEmitter<any>()\r\n  delivery: any = {}\r\n  isLoading: boolean = false\r\n  listProvinceGHN: Array<any> = []\r\n  listDistrictGHN: Array<any> = []\r\n  listWardGHN: Array<any> = []\r\n  serviceGHN: Array<any> = []\r\n  dataAddress: any = { ProvinceID: '', ProvinceName: '', DistrictID: '', DistrictName: '', WardCode: '', WardName: '' }\r\n  dataProduct: any = { height: '', weight: '', length: '', width: '' }\r\n  resultFeesGHN: Array<any> = []\r\n  resultFeesGHTK: Array<any> = []\r\n  resultFeesAhamove: Array<any> = []\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private ghnService: GhnService,\r\n    private ghtkService: GhtkService,\r\n    private ahamoveService: AhamoveService,\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getData()\r\n  }\r\n  getData() {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      this.vhQuerySales.refreshLocalDeliverys().then(() => {\r\n        this.delivery = this.vhQuerySales.getlocalDelivery(this.id_delivery)\r\n        if (this.delivery.type == 1) this.getDataGHN()\r\n        else if (this.delivery.type == 2) this.getDataGHTK()\r\n        else if (this.delivery.type == 3) this.getDataAhamove()\r\n      })\r\n    })\r\n  }\r\n  //Lấy dữ liệu giao hàng nhanh\r\n  getDataGHN() {\r\n    this.ghnService.connectTokenGhn(this.delivery.token).then((resultShop: any) => {\r\n      this.vhComponent.hideLoading(0)\r\n      if (resultShop.code == 200) {\r\n        let shops = resultShop.data.shops.find(item => item._id == this.delivery.shop_id);\r\n        this.delivery = {\r\n          ...this.delivery, name: shops.name, phone: shops.phone, address: shops.address,\r\n          district_id: shops.district_id, ward_code: shops.ward_code, logo: './assets/icon/management/deliverys/1.svg'\r\n        }\r\n      } else this.messageError()\r\n    }).catch(err => { this.messageError(), this.vhComponent.hideLoading(0) })\r\n  }\r\n  //Lấy dữ liệu giao hàng tiết kiệm\r\n  getDataGHTK() {\r\n    this.ghtkService.getWareHouseGhtk(this.delivery.token).then((res: any) => {\r\n      this.vhComponent.hideLoading(0)\r\n      let shops = res.data.find(item => item.pick_address_id == this.delivery.shop_id);\r\n      let data = this.renderAddressGHTK(shops.address);\r\n      this.delivery = {\r\n        ...this.delivery, pick_name: shops.pick_name, pick_address: data.pick_address,\r\n        pick_province: data.pick_province, pick_district: data.pick_district, logo: './assets/icon/management/deliverys/2.svg'\r\n      }\r\n    }).catch(err => { this.messageError(), this.vhComponent.hideLoading(0) })\r\n  }\r\n  //lấy dữ liệu giao hàng ahamove\r\n  getDataAhamove() {\r\n    this.ahamoveService.getTokenAhaMove(this.delivery.phone).then((res: any) => {\r\n      this.vhComponent.hideLoading(0)\r\n      this.delivery.token = res.token\r\n      let addresss: Array<any> = this.vhQuerySales.getlocalAddresss().filter(item => item.id_delivery == this.delivery._id && item.type == 4)\r\n      let pickAddress = addresss.sort((a, b) => Date.parse(b.date) - Date.parse(a.date))[0]\r\n      this.delivery = { ...pickAddress, ...this.delivery, logo: './assets/icon/management/deliverys/3.svg' }\r\n    }).catch(err => { this.messageError(), this.vhComponent.hideLoading(0) })\r\n  }\r\n  renderAddressGHTK(address) {\r\n    let pick_address: any = {};\r\n    let indexProvince = address.lastIndexOf(\",\");\r\n    let indexDistrict = address.lastIndexOf(\",\", indexProvince - 1);\r\n    pick_address.pick_province = address.slice(indexProvince + 1).trim();\r\n    pick_address.pick_district = address.slice(indexDistrict + 1, indexProvince).trim();\r\n    pick_address.pick_ward = address.slice(0, indexDistrict).trim();\r\n    pick_address.pick_address = pick_address.pick_ward;\r\n    return pick_address;\r\n  }\r\n  messageError() {\r\n    this.vhComponent.alertMessageDesktop('error', this.lang.translate('An error occured while getting transport'))\r\n  }\r\n  hideModal() {\r\n    this.visibleCheckFees = false\r\n    this.hideModalCheckFees.emit(false)\r\n  }\r\n  getProvinceGHN() {\r\n    this.isLoading = true\r\n    this.ghnService.getProvinceGhn(GHNTOKEN).then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.code == 200 && this.delivery.type != 3)\r\n        this.listProvinceGHN = res.data\r\n      else if (res.code == 200 && this.delivery.type == 3)\r\n        this.listProvinceGHN = res.data.filter(item => item.ProvinceID == 201 || item.ProvinceID == 202)\r\n\r\n    }).catch(err => { this.messageError(); this.isLoading = false })\r\n  }\r\n  /**\r\n   * Sự kiện thay đổi tỉnh => reset huyện xã\r\n   * @param event \r\n   */\r\n  changeProvinceGHN(event: any) {\r\n    if (event) {\r\n      this.listDistrictGHN = []\r\n      this.listWardGHN = []\r\n      this.dataAddress['WardCode'] = ''\r\n      this.dataAddress['DistrictID'] = ''\r\n      if (this.delivery.type == 2 || this.delivery.type == 3) {\r\n        let province = this.listProvinceGHN.find(item => item.ProvinceID == event)\r\n        this.dataAddress['ProvinceName'] = province.ProvinceName\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Lấy danh sách huyện\r\n   */\r\n  getDistrictGHN() {\r\n    this.isLoading = true\r\n    this.ghnService.getDistrictGhn(GHNTOKEN, this.dataAddress['ProvinceID']).then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.code == 200) this.listDistrictGHN = res.data\r\n    }).catch(err => { this.messageError(); this.isLoading = false })\r\n  }\r\n  /**\r\n   * Sự kiện thay đổi địa chỉ huyện => reset xã\r\n   * @param event \r\n   */\r\n  changeDistrictGHN(event: any) {\r\n    if (event) {\r\n      this.dataAddress['WardCode'] = ''\r\n      this.dataAddress['DistrictID'] = event\r\n      if (this.delivery.type == 2 || this.delivery.type == 3) {\r\n        let district = this.listDistrictGHN.find(item => item.DistrictID == event)\r\n        this.dataAddress['DistrictName'] = district.DistrictName\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Lấy danh sách xã, phường\r\n   */\r\n  getWardGHN() {\r\n    this.isLoading = true\r\n    this.ghnService.getWardGhn(GHNTOKEN, this.dataAddress['DistrictID']).then((res: any) => {\r\n      this.isLoading = false\r\n      if (res.code == 200) this.listWardGHN = res.data\r\n    }).catch(err => { this.messageError(); this.isLoading = false })\r\n  }\r\n  /**\r\n   * Sau khi chọn xong xã phường, dùng api get về các dịch vụ hỗ trợ(đi bộ, máy bay...)\r\n   * @param event \r\n   */\r\n  changeWardGHN(event: any) {\r\n    if (event && this.delivery.type == 1) {\r\n      let json: any = {\r\n        shop_id: this.delivery.shop_id,\r\n        from_district_id: this.delivery.district_id,\r\n        to_district_id: this.dataAddress.DistrictID\r\n      }\r\n      this.ghnService.getServiceDelivery(this.delivery.token, json).then((res: any) => {\r\n        this.serviceGHN = res.data.filter(item => {\r\n          return item.service_type_id == 1 || item.service_type_id == 2\r\n        });\r\n      }).catch(err => { this.messageError() })\r\n    } else if (event && this.delivery.type == 3) {\r\n      let ward = this.listWardGHN.find(item => item.WardCode == event)\r\n      this.dataAddress['WardName'] = ward.WardName\r\n    }\r\n  }\r\n  /**\r\n    * Hàm trả về thông tin để chuẩn bị cho vào các hàm getService\r\n  **/\r\n  prepareInfo(service_id) {\r\n    return {\r\n      shop_id: this.delivery.shop_id, to_district_id: this.dataAddress.DistrictID,\r\n      to_ward_code: this.dataAddress.WardCode,\r\n      height: this.dataProduct.height, length: this.dataProduct.length, weight: this.dataProduct.weight, width: this.dataProduct.width,\r\n      insurance_value: 0, service_id: service_id,\r\n      from_district_id: this.delivery.district_id, from_ward_code: this.delivery.ward_code\r\n    };\r\n  }\r\n  /**\r\n   * Nếu type = 1 là ghn,\r\n   * Type = 2 là ghtk\r\n   * Type = 3 là ahamove\r\n   */\r\n  viewResult(type) {\r\n    switch (type) {\r\n      case 1: this.viewResultGHN(); break;\r\n      case 2: this.viewResultGHTK(); break;\r\n      case 3: this.viewResultAhamove(); break;\r\n    }\r\n  }\r\n  viewResultGHN() {\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      let process: Array<any> = []\r\n      this.serviceGHN.forEach(item => process.push(this.ghnService.calculate_delivery_fee(this.delivery.token, this.prepareInfo(item.service_id))))\r\n      Promise.all(process).then((result: Array<any>) => {\r\n        this.vhComponent.hideLoading(0)\r\n        this.resultFeesGHN = result.map((item, index) => {\r\n          return { ...item.data, short_name: this.serviceGHN[index]?.short_name }\r\n        })\r\n      }).catch(err => { this.messageError(); this.vhComponent.hideLoading(0) })\r\n    })\r\n  }\r\n  viewResultGHTK() {\r\n    this.resultFeesGHTK = []\r\n    let json: any = {\r\n      shop_id: this.delivery.shop_id, province: this.dataAddress.ProvinceName, token: this.delivery.token,\r\n      district: this.dataAddress.DistrictName, weight: this.dataProduct.weight / 1000, insurance_value: 0,\r\n    }\r\n    this.vhComponent.showLoading('', 'transparent-loading').then(() => {\r\n      Promise.all([\r\n        this.ghtkService.calculateFeeGhtk(json, 'road'),\r\n        this.ghtkService.calculateFeeGhtk(json, 'fly')\r\n      ]).then((result: Array<any>) => {\r\n        result.forEach((item, index) => {\r\n          if (item.fee?.delivery && index == 0)\r\n            this.resultFeesGHTK.push({ ...item.fee, short_name: 'Standard' })\r\n          if (item.fee?.delivery && index == 1 && item.fee.fee != this.resultFeesGHTK[0].fee)\r\n            this.resultFeesGHTK.push({ ...item.fee, short_name: 'Fast' })\r\n        })\r\n        this.vhComponent.hideLoading(0)\r\n      }).catch(err => { this.vhComponent.hideLoading(0); this.messageError() })\r\n    })\r\n\r\n  }\r\n  services_SGN: Array<any> = [{ \"_id\": \"SGN-BIKE\" }, { \"_id\": \"SGN-EXPRESS\" }, { \"_id\": \"SGN-POOL\" }, { \"_id\": \"SGN-SAMEDAY\" }, { \"_id\": \"SGN-TRICYCLE\" }, { \"_id\": \"SGN-TRUCK-500\" }, { \"_id\": \"SGN-TRUCK-2000\" }]\r\n  services_HAN: Array<any> = [{ \"_id\": \"HAN-BIKE\" }, { \"_id\": \"HAN-EXPRESS\" }, { \"_id\": \"HAN-POOL\" }, { \"_id\": \"HAN-SAMEDAY\" }];\r\n  prepareDataCalculate() {\r\n    const data = {\r\n      token: this.delivery.token,\r\n      services: this.dataAddress.ProvinceID == 202 ? this.services_SGN : this.services_HAN,\r\n      path: [\r\n        { address: this.formatAddressAhamove(this.delivery.address, this.delivery.ward, this.delivery.district, this.delivery.province) },\r\n        { address: this.formatAddressAhamove(this.dataAddress.address, this.dataAddress.WardName, this.dataAddress.DistrictName, this.dataAddress.ProvinceName), cod: 0 }\r\n      ]\r\n    }\r\n    return data;\r\n  }\r\n  /**Format địa chỉ của ahamove */\r\n  formatAddressAhamove(address, ward, district, province) {\r\n    return address + \", \" + ward + \", \" + district + \", \" + province;\r\n  }\r\n  viewResultAhamove() {\r\n    this.resultFeesAhamove = []\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.ahamoveService.calculateFeeAhamove(this.prepareDataCalculate()).then((res: any) => {\r\n        this.vhComponent.hideLoading(0)\r\n        res.forEach(item => {\r\n          if (item.total_fee && item.total_fee >= 0) {\r\n            let data = this.filterTitleServiceAhamove(item._id);\r\n            this.resultFeesAhamove.push({ short_name: data.title, description: data.description, ...item })\r\n          }\r\n        })\r\n      }).catch(err => { this.messageError(); this.vhComponent.hideLoading(0) })\r\n    })\r\n  }\r\n  filterTitleServiceAhamove(id) {\r\n    let title = '';\r\n    let description = '';\r\n    switch (id) {\r\n      case 'SGN-BIKE': title = 'Over speed'; description = 'Deliver within an hour'; break;\r\n      case 'SGN-EXPRESS': title = 'Near delivery'; description = 'Super fast delivery only 30 minutes'; break;\r\n      case 'SGN-POOL': title = 'Dirt cheap'; description = 'Save 20%, 2-hour delivery'; break;\r\n      case 'SGN-SAMEDAY': title = '4-Hour'; description = 'Delivery within the city, committed in 4 hours'; break;\r\n      case 'SGN-TRICYCLE': title = 'Delivery tricycle'; description = 'Tricycle service description'; break;\r\n      case 'SGN-TRUCK-500': title = '500kg truck'; description = 'Delivered by small truck'; break;\r\n      case 'SGN-TRUCK-2000': title = '2000kg truct'; description = 'Delivered by big truck'; break;\r\n      case 'HAN-BIKE': title = 'Over speed'; description = 'Deliver within an hour'; break;\r\n      case 'HAN-EXPRESS': title = 'Near delivery'; description = 'Super fast delivery only 30 minutes'; break;\r\n      case 'HAN-POOL': title = 'Dirt cheap'; description = 'Save 20%, 2-hour delivery'; break;\r\n      case 'HAN-SAMEDAY': title = '4-Hour'; description = 'Delivery within the city, committed in 4 hours'; break;\r\n    }\r\n    return {\r\n      title: title,\r\n      description: description\r\n    };\r\n  }\r\n}\r\n","<nz-modal [nzWidth]=\"800\" [nzMaskClosable]=\"false\" [(nzVisible)]=\"visibleCheckFees\" [nzClosable]=\"true\"\r\n    [nzBodyStyle]=\"{'overflow': 'auto','max-height': '700px','overflow-y':'auto'}\"\r\n    [nzTitle]=\"'Check shipping fee_' | translate\" [nzFooter]=\"null\" (nzOnCancel)=\"hideModal()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row nzGutter=\"16\" class=\"modal-check-fees\">\r\n            <div nz-col nzSpan=\"24\" class=\"logo\">\r\n                <img *ngIf=\"delivery.logo\" [src]=\"delivery.logo\" alt=\"\">\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" *ngIf=\"delivery.type == 3\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"Address\">{{'Address' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <input style=\"border-radius: 8px;\" placeholder=\"14A Cộng Hòa\" type=\"text\" nz-input\r\n                                [(ngModel)]=\"dataAddress.address\" />\r\n                        </nz-form-control>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"ProvinceID\">{{'Province' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-select [nzShowSearch]=\"true\" (nzFocus)=\"getProvinceGHN()\"\r\n                                [(ngModel)]=\"dataAddress['ProvinceID']\" (ngModelChange)=\"changeProvinceGHN($event)\"\r\n                                nzPlaceHolder=\"{{'Select province, city' | translate}}\">\r\n                                <ng-container *ngFor=\"let item of listProvinceGHN\">\r\n                                    <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.ProvinceID\"\r\n                                        [nzLabel]=\"item.ProvinceName\">\r\n                                    </nz-option>\r\n                                </ng-container>\r\n                                <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                    <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                    {{'Loading...'|translate}}\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </nz-form-control>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"DistrictID\">{{'District' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-select [(ngModel)]=\"dataAddress['DistrictID']\" [nzDisabled]=\"!dataAddress['ProvinceID']\"\r\n                                [nzShowSearch]=\"true\" (nzFocus)=\"getDistrictGHN()\"\r\n                                (ngModelChange)=\"changeDistrictGHN($event)\"\r\n                                nzPlaceHolder=\"{{'Select district' | translate}}\">\r\n                                <ng-container *ngFor=\"let item of listDistrictGHN\">\r\n                                    <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.DistrictID\"\r\n                                        [nzLabel]=\"item.DistrictName\">\r\n                                    </nz-option>\r\n                                </ng-container>\r\n                                <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                    <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                    {{'Loading...'|translate}}\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </nz-form-control>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"WardCode\">{{'Ward' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control [nzSpan]=\"24\">\r\n                        <nz-form-control [nzSpan]=\"24\">\r\n                            <nz-select [(ngModel)]=\"dataAddress['WardCode']\" [nzDisabled]=\"!dataAddress['DistrictID']\"\r\n                                [nzShowSearch]=\"true\" (nzFocus)=\"getWardGHN()\" (ngModelChange)=\"changeWardGHN($event)\"\r\n                                nzPlaceHolder=\"{{'Select ward' | translate}}\">\r\n                                <ng-container *ngFor=\"let item of listWardGHN\">\r\n                                    <nz-option *ngIf=\"!isLoading\" [nzValue]=\"item.WardCode\" [nzLabel]=\"item.WardName\">\r\n                                    </nz-option>\r\n                                </ng-container>\r\n                                <nz-option *ngIf=\"isLoading\" nzDisabled nzCustomContent>\r\n                                    <i nz-icon nzType=\"loading\" class=\"loading-icon\"></i>\r\n                                    {{'Loading...'|translate}}\r\n                                </nz-option>\r\n                            </nz-select>\r\n                        </nz-form-control>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div *ngIf=\"delivery.type == 1\" nz-col nzSpan=\"6\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"Length\">{{'Length(cm)' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <nz-input-number nzPlaceHolder=\"{{'Length is required' | translate}}\" nz-input required\r\n                                [(ngModel)]=\"dataProduct.length\"></nz-input-number>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div *ngIf=\"delivery.type == 1\" nz-col nzSpan=\"6\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"Width\">{{'Width(cm)' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <nz-input-number nzPlaceHolder=\"{{'Width is required' | translate}}\" nz-input required\r\n                                [(ngModel)]=\"dataProduct.width\"></nz-input-number>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n\r\n            <div *ngIf=\"delivery.type == 1\" nz-col nzSpan=\"6\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"Height\">{{'Height(cm)' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <nz-input-number nzPlaceHolder=\"{{'Height is required' | translate}}\" nz-input required\r\n                                [(ngModel)]=\"dataProduct.height\"></nz-input-number>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" *ngIf=\"delivery.type != 3\">\r\n                <nz-form-item>\r\n                    <nz-form-label class=\"text-left\" [nzSpan]=\"24\" nzFor=\"Weight\">{{'Weight(gram)' | translate}}\r\n                    </nz-form-label>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <nz-input-number nzPlaceHolder=\"{{'Weight is required' | translate}}\" nz-input required\r\n                                [(ngModel)]=\"dataProduct.weight\"></nz-input-number>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\"></div>\r\n            <div nz-col nzSpan=\"8\" *ngFor=\"let item of resultFeesGHN\">\r\n                <div class=\"fees-item\">\r\n                    <div class=\"name\"><b>{{item.short_name}}</b></div>\r\n                    <div class=\"price\"><b>{{vhAlgorithm.vhcurrencyunit_symbol(item.total)}}</b></div>\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" *ngFor=\"let item of resultFeesGHTK\">\r\n                <div class=\"fees-item\">\r\n                    <div class=\"name\"><b>{{item.short_name | translate}}</b></div>\r\n                    <div class=\"price\"><b>{{vhAlgorithm.vhcurrencyunit_symbol(item.fee)}}</b></div>\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"8\" *ngFor=\"let item of resultFeesAhamove\">\r\n                <div class=\"fees-item-ahamove\">\r\n                    <div class=\"name\"><b>{{item.short_name | translate}}</b></div>\r\n                    <div class=\"sub-name\">{{item.description | translate}}</div>\r\n                    <div class=\"price\">\r\n                        <b>{{vhAlgorithm.vhcurrencyunit_symbol(item.total_fee)}}</b>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"right-all-content\">\r\n                <button\r\n                    [disabled]=\"(delivery.type == 1 && (!dataAddress.WardCode || !dataProduct.width || !dataProduct.height || !dataProduct.length || !dataProduct.weight)) || (delivery.type == 2 && (!dataProduct.weight ||!dataAddress.WardCode))\"\r\n                    (click)=\"viewResult(delivery.type)\" style=\"width: fit-content !important;\" class=\"btn-green\"\r\n                    nz-button nzType=\"default\">{{'View shipping fee' | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-customer-profile',\r\n  templateUrl: './customer-profile.component.html',\r\n  styleUrls: ['./customer-profile.component.scss']\r\n})\r\nexport class CustomerProfileComponent implements OnInit {\r\n  @Input(\"visibleInfoCustomer\") visibleInfoCustomer: boolean = false;\r\n  @Input(\"infoSender\") customer;\r\n  @Output(\"closeInfoCustomer\") closeInfoCustomer = new EventEmitter<any>();\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  goBack() {\r\n    this.closeInfoCustomer.emit(false)\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" [nzTitle]=\"null\" [nzVisible]=\"visibleInfoCustomer\"\r\n  (nzOnClose)=\"goBack()\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Gender' | translate}}:</b><span> {{customer.gender | translate}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-customer',\r\n  templateUrl: './customer.component.html',\r\n  styleUrls: ['./customer.component.scss']\r\n})\r\nexport class CustomerComponent implements OnInit {\r\n  @Input(\"id_customer\") id_customer;\r\n  @Output() closeAndReceiveCustomer = new EventEmitter<any>();\r\n  debt: boolean = null;\r\n  public customerList: any[] = []\r\n\r\n  public searchList: any[] = [];\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales\r\n  ) {\r\n    this.searchList = [...this.customerList]\r\n  }\r\n  ngOnInit() {\r\n    this.getData()\r\n  }\r\n  ngOnDestroy() {\r\n    this.observableCustomers.unsubscribe()\r\n  }\r\n  observableCustomers: any;\r\n  getData() {\r\n    this.observableCustomers = this.vhQuerySales.getObservableLocalCustomers().subscribe((localCustomers: any) => {\r\n      this.customerList = localCustomers.filter(customer => {\r\n        if (customer['_id'] != \"id_retail\") {\r\n          if (this.debt == null) return true\r\n          else if (customer['debt_enable'] == this.debt) return true\r\n          else return false\r\n        } return false\r\n      });\r\n      this.id_customer = this.id_customer ? this.id_customer : this.customerList[0]._id;\r\n      this.searchList = this.customerList\r\n    })\r\n\r\n  }\r\n  cancel(value) {\r\n    this.closeAndReceiveCustomer.emit(value)\r\n  }\r\n\r\n  search(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.customerList, ['name','phone'])\r\n    else this.searchList = this.customerList\r\n  }\r\n}\r\n","<nz-select [ngModel]=\"id_customer\" [nzServerSearch]=\"true\" (ngModelChange)=\"cancel($event)\"\r\n  (nzOnSearch)=\"search($event)\" class=\"cus-select\" nzShowSearch nzPlaceHolder=\"{{'Select customer'| translate}}\">\r\n  <nz-option *ngFor=\"let item of searchList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}} - {{item.phone}} \">\r\n  </nz-option>\r\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-delivery',\r\n  templateUrl: './delivery.component.html',\r\n  styleUrls: ['./delivery.component.scss']\r\n})\r\nexport class DeliveryComponent {\r\n  @Input(\"id_delivery\") id_delivery;\r\n  @Output(\"closeAndReceiveDelivery\") closeAndReceiveDelivery = new EventEmitter<any>();\r\n  public deliveryList: any[] = this.vhQuerySales.getlocalDeliverys().filter(item => item.active);\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService\r\n  ) {\r\n    this.deliveryList.unshift({\r\n      name: this.languageService.translate(\"None\"),\r\n      _id: '',\r\n      type: 0\r\n    })\r\n    if (this.id_delivery) this.id_delivery = this.deliveryList[0]._id;\r\n  }\r\n\r\n  public selectDelivery(item?) {\r\n    if (item) {\r\n      this.closeAndReceiveDelivery.emit(item)\r\n    } this.closeAndReceiveDelivery.emit(false)\r\n  }\r\n\r\n}\r\n","<nz-select [ngModel]=\"id_delivery\" (ngModelChange)=\"selectDelivery($event)\" nzBorderless class=\"cus-select\">\r\n    <nz-option *ngFor=\"let item of deliveryList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}}\">\r\n    </nz-option>\r\n</nz-select>","import { Component, OnInit } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-fb-create-order',\r\n  templateUrl: './fb-create-order.component.html',\r\n  styleUrls: ['./fb-create-order.component.scss']\r\n})\r\nexport class FbCreateOrderComponent implements OnInit {\r\n  searchProductList: boolean = false\r\n  default_price_type: number = 1\r\n  invoice: VhSaleInvoices = new VhSaleInvoices()\r\n  employee: any = {}\r\n  promotions: Array<any> = []\r\n  listTax: Array<any> = []\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  constructor(\r\n    public vhAuth: VhAuth,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // set nhân viên mặc định\r\n    if (!this.invoice.getIdEmployee())\r\n      this.invoice.setIdEmployee(this.vhAuth.getUser()._id)\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee());\r\n    this.invoice.setIdBranch(this.vhQuerySales.getDefaultBranch()._id)\r\n    if (this.vhAuth.checkMyPermission('default_price_type_1')) this.default_price_type = 1;\r\n    else if (this.vhAuth.checkMyPermission('default_price_type_2')) this.default_price_type = 2;\r\n    this.invoice.setPriceType(this.default_price_type)\r\n    // this.invoice.setPriceType(this.default_price_type)\r\n    \r\n  }\r\n  /**HÀM KIỂM TRA KHUYẾN MÃI */\r\n  private checkPromotions(product) {\r\n    return new Promise<any>(resolve => {\r\n      for (let i = 0; i < this.promotions.length; i++) {\r\n        let promotion = this.promotions[i].promotion_detail.find(item => item.id_product == product._id)\r\n        if (promotion) {\r\n          this.vhComponent.showToast(5000,\r\n            `${product.name} ${this.lang.translate(\"is getting a\")} ${this.promotions[i].promotion.type == 1 ? this.vhAlgorithm.vhcurrencyunit_symbol(promotion.discount) : this.vhAlgorithm.vhpercent(promotion.discount / 100)} ${this.lang.translate(\"discount from\")} ${this.promotions[i].promotion.name}`, \"success-toast\")\r\n          resolve(promotion);\r\n          break;\r\n        }\r\n      }\r\n      resolve(null)\r\n    })\r\n  }\r\n  closeSearch(data) {\r\n    if (data) {\r\n      this.checkPromotions(data).then(promotion => {\r\n        let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n        this.invoice.addInvoiceDetail({ ...data, price: price }, promotion ? promotion.new_price : null)\r\n      })\r\n    }\r\n    this.searchProductList = false;\r\n  }\r\n\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    if (event != null) { // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      if (this.invoice.getInvoiceDetail().length) { // nếu có  length mơi update\r\n        let bill_details = this.invoice.getInvoiceDetail()\r\n        for (let i in bill_details) {\r\n          let price_update = 0;\r\n          let product = this.vhQuerySales.getlocalDetailProduct(bill_details[i].id_subproduct ? bill_details[i].id_subproduct : bill_details[i].id_product);\r\n          product = { ...product, ...this.vhQuerySales.getUnit_byRatio(product.units, bill_details[i].ratio) }\r\n          if (event == 1) {\r\n            price_update = product.price\r\n          }\r\n          else {\r\n            price_update = product.price2 ? product.price2 : product.price\r\n          }\r\n          bill_details[i].price = price_update;\r\n          bill_details[i].price_origin = price_update;\r\n        }\r\n        this.invoice.setSubTotal();\r\n      }\r\n      this.invoice.setPriceType(event)\r\n    }\r\n  }\r\n  deleteGoods(detail: VhSaleInvoiceDetail) {\r\n    this.invoice.removeInvoiceDetail(detail.id_product)\r\n  }\r\n\r\n  checkQuantityProduct(product: VhSaleInvoiceDetail, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.invoice.setSubTotal();\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhSaleInvoiceDetail;\r\n  openEditUnitPrice(detail: VhSaleInvoiceDetail) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.invoice.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(5000, this.lang.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.setIdEmployee(event);\r\n    }\r\n  }\r\n  // ----set customer-----\r\n  radioValue: 1 | 2 = 1;\r\n  closeAndReceiveCustomer(event) {\r\n    if (event) {\r\n      this.invoice.setIdPartner(event);\r\n      if (!this.vhQuerySales.getlocalCustomer(event).debt_enable) this.invoice.setPayment(this.invoice.getTotalATax());\r\n    }\r\n  }\r\n  changeCustomerType(event) {\r\n    if (this.radioValue == 1) {\r\n      this.invoice.setIdPartner(\"id_retail\");\r\n      this.invoice.setPayment(this.invoice.getTotalATax());\r\n\r\n    }\r\n  }\r\n  // ----set delivery ------\r\n  closeAndReceiveDelivery(event) {\r\n    if (event) {\r\n      this.invoice.setIdDelivery(event);\r\n    }\r\n  }\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0]);\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.setPaymentType(type)\r\n    switch (type) {\r\n      case 1: {\r\n        this.invoice.setIdWallet('id_cash'); this.invoice.setPayment(this.invoice.getPayment() ? this.invoice.getPayment() : null);\r\n\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.invoice.setPayment(0); this.invoice.setIdWallet(null);\r\n        this.invoice.setCash(0);\r\n\r\n        break;\r\n      }\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.setIdWallet(id_wallet)\r\n          this.invoice.setPayment(this.invoice.getPayment() ? this.invoice.getPayment() : null);\r\n\r\n          break;\r\n        }\r\n      }\r\n    };\r\n  }\r\n  setPickerTime(event) {\r\n    this.invoice.setDate(event);\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.setTax(tax.value);\r\n  }\r\n  discount_price: any;\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0) {\r\n      this.invoice.setDiscount(parseFloat(this.discount_price.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.getDiscount();\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n  }\r\n  invoice_fee: any;\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.setFee(parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.getFee();\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.getPaymentType() != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhComponent.showToast(5000,\r\n        this.lang.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.invoice.getTotalATax()) {\r\n      this.invoice.setPayment(parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n  payInvoice(bill_type, print) {\r\n\r\n  }\r\n}\r\n","<div class=\"fb-create-order\">\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\" class=\"show-cart d-flex\">\r\n            <div class=\"d-flex\" (click)=\"searchProductList = true\">\r\n                <i class=\"icon\" nz-icon nzType=\"plus-circle\" nzTheme=\"outline\"></i><span>Thêm sản phẩm</span>\r\n            </div>\r\n            <div>\r\n                <nz-select [(ngModel)]=\"default_price_type\" (ngModelChange)=\"changePriceType($event)\">\r\n                    <nz-option [nzValue]=1 nzLabel=\"Giá bán lẻ\"></nz-option>\r\n                    <nz-option [nzValue]=2 nzLabel=\"Giá bán buôn\"></nz-option>\r\n                </nz-select>\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\" class=\"fb-create-order-cart\">\r\n            <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice.getInvoiceDetail()\">\r\n                <div nz-row>\r\n                    <div nz-popconfirm nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                        (nzOnConfirm)=\"deleteGoods(item)\" nzPopconfirmPlacement=\"bottomLeft\" nz-col nzSpan=\"1\">\r\n                        <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                            style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"13\">\r\n                        <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                        <p *ngIf=\"item.combos\">{{item.subComboName}}</p>\r\n                        <p class=\"max-width-two-line\">\r\n                            <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                            <del style=\"margin-left:5px;font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin) : ''}}\r\n                            </del>\r\n                        </p>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                        <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                            (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"5\" style=\"text-align: right;\">\r\n                        <p class=\"max-width-two-line\"><b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"invoice.getInvoiceDetail().length == 0\">\r\n                <div style=\"text-align: center;\">\r\n                    {{'Please select a product' | translate}}\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <div nz-col nzSpan=\"24\" class=\"d-flex\">\r\n            <div>{{'SubTotal' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-discount d-flex\" nz-col nzSpan=\"24\"\r\n            *ngIf=\"vhAuth.localStorageGET('show_discount')\">\r\n            <div>{{'Discount' | translate}}</div>\r\n            <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getDiscount())\"\r\n                class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n        </div>\r\n        <div class=\"sales-bills-content-fee d-flex\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n            <div>{{'Fee' | translate}}</div>\r\n            <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getFee())\"\r\n                class=\"border_bottom invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n        </div>\r\n        <div class=\"sales-bills-content-tax d-flex\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n            <div>{{'Tax' | translate}}</div>\r\n            <div>\r\n                <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\" nzBorderless>\r\n                    <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                        nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                    </nz-option>\r\n                </nz-select>\r\n                <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n            </div>\r\n            <div>\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-total d-flex\" nz-col nzSpan=\"24\">\r\n            <div>{{'Total' | translate}}</div>\r\n            <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-pay d-flex\" nz-col nzSpan=\"24\">\r\n            <div><b>{{'Pay' | translate}}</b></div>\r\n            <div> {{vhAlgorithm.vhcurrencyunit(invoice.getPayment())}}<img (click)=\"showModalEditTotalPay()\"\r\n                    *ngIf=\"invoice.getPaymentType() != 2\" style=\"width: 16px;margin-left:10px\"\r\n                    src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n        </div>\r\n        <div class=\"sales-bills-content-rest d-flex\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n            <div>{{'Rest' | translate}}</div>\r\n            <div> {{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() - invoice.getPayment())}}\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills-content-payment_type d-flex\" nz-col nzSpan=\"24\">\r\n            <!-- <app-tax [payment_type]=\"invoice.getPaymentType()\" [id_wallet]=\"invoice.getIdWallet()\" [id_customer]=\"invoice.getIdPartner()\" (closeAndGetValuePayment)=\"closeAndGetValuePayment($event)\">\r\n            </app-tax> -->\r\n        </div>\r\n        <!-- <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n            <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"edit_note()\" nz-input placeholder=\"{{'Enter note...' | translate}}\" [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n        </div> -->\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\" class=\"sales-bills-button\">\r\n            <button [disabled]=\"!invoice.getInvoiceDetail().length\" (click)=\"payInvoice(1,true)\" nz-button\r\n                class=\"order-and-print\">\r\n                {{\"Pay & Print\"|translate}} (F2)\r\n            </button>\r\n            <button [disabled]=\"!invoice.getInvoiceDetail().length\" (click)=\"payInvoice(1,false)\" nz-button\r\n                class=\"order\">\r\n                {{\"Pay\"|translate}} (F1)</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!--Search product-->\r\n<app-search-product *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\"\r\n    [default_price_type]=\"default_price_type\" (closeSearchProductList)=\"closeSearch($event)\"></app-search-product>","import { Component, Input, OnInit, Output, SimpleChanges, EventEmitter } from '@angular/core';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-fb-info-user',\r\n  templateUrl: './fb-info-user.component.html',\r\n  styleUrls: ['./fb-info-user.component.scss']\r\n})\r\nexport class FbInfoUserComponent implements OnInit {\r\n  @Input() infoSender: any = {}\r\n  @Output() addCustomerEvent = new EventEmitter<any>()\r\n  showDrawerAddCusomer: boolean = false\r\n  visibleInfoCustomer: boolean = false\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.infoSender) {\r\n      this.infoSender = changes.infoSender.currentValue\r\n       this.getLocalCustomer()\r\n    }\r\n  }\r\n  getLocalCustomer() {\r\n    let person: any = this.vhQuerySales.getlocalCustomers().filter(item => item.type != 3).find(item => {\r\n      if (item.email) {\r\n        let email = this.infoSender.id + '@facebook.com';\r\n        if (email == item.email) return true\r\n      }\r\n    })\r\n    person && (this.infoSender = { ...this.infoSender, ...person })\r\n  }\r\n  closeAddCustomer(result) {\r\n    this.showDrawerAddCusomer = false;\r\n    if(result){\r\n      this.addCustomerEvent.emit(result)\r\n      \r\n      this.infoSender = {...result,...this.infoSender}\r\n    }\r\n  }\r\n  closeInfoCustomer(event) {\r\n    this.visibleInfoCustomer = false\r\n  }\r\n}\r\n","<div class=\"fb-info-user\">\r\n    <div class=\"fb-info-user-image\">\r\n        <img [src]=\"infoSender['profile_pic']\" width=\"100%\" alt=\"\">\r\n    </div>\r\n    <div class=\"fb-info-user-info\">\r\n        <div class=\"name mt-4\"><b>{{infoSender.name}}\r\n                <i *ngIf=\"!infoSender._id\" (click)=\"showDrawerAddCusomer = true\" style=\"cursor: pointer;\" nz-tooltip\r\n                    nzTooltipPlacement=\"top\" nzTooltipTitle=\"Thêm nhanh khách hàng\" nz-icon nzType=\"edit\"\r\n                    nzTheme=\"outline\"></i>\r\n                <i *ngIf=\"infoSender._id\" (click)=\"visibleInfoCustomer = true\" style=\"cursor: pointer;\" nz-tooltip\r\n                    nzTooltipPlacement=\"top\" nzTooltipTitle=\"Xem thông tin khách hàng\" nz-icon nzType=\"info-circle\"\r\n                    nzTheme=\"outline\"></i>\r\n            </b></div>\r\n        <div class=\"phone mt-4\"><i nz-icon nzType=\"phone\" nzTheme=\"outline\"></i>\r\n            <span>{{infoSender.phone||'Chưa có thông tin'}}</span>\r\n        </div>\r\n        <div class=\"email mt-4\"><i nz-icon nzType=\"mail\" nzTheme=\"outline\"></i> <span> {{infoSender.email}}</span></div>\r\n        <div class=\"address mt-4\"><i nz-icon nzType=\"home\" nzTheme=\"outline\"></i>\r\n            <span>{{infoSender.address ||'Chưa có thông tin'}}</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<app-add-customer *ngIf=\"showDrawerAddCusomer\" [infoSender]=\"infoSender\" [showDrawerAddCusomer]=\"showDrawerAddCusomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\"></app-add-customer>\r\n<app-customer-profile *ngIf=\"visibleInfoCustomer\" [infoSender]=\"infoSender\" [visibleInfoCustomer]=\"visibleInfoCustomer\"\r\n    (closeInfoCustomer)=\"closeInfoCustomer($event)\"></app-customer-profile>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\n@Component({\r\n  selector: 'app-staff',\r\n  templateUrl: './staff.component.html',\r\n  styleUrls: ['./staff.component.scss']\r\n})\r\nexport class StaffComponent {\r\n  @Input(\"id_employee\") id_employee;\r\n  @Output(\"closeAndReceiveEmployee\") closeAndReceiveEmployee = new EventEmitter<any>();\r\n  public employeeList: any[] = this.vhAuth.getlocalEmployees();\r\n  public searchList: any[] = [];\r\n  search: string;\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.searchList = [...this.employeeList];\r\n    if (!this.id_employee && this.searchList.length) {\r\n      this.id_employee = this.searchList[0]._id\r\n    }\r\n  }\r\n  cancel(value) {\r\n    if (value) this.closeAndReceiveEmployee.emit(value);\r\n  }\r\n  selectEmployees(value) {\r\n    if (value) this.vhComponent.hideModal(value)\r\n  }\r\n\r\n  searchBar(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.employeeList, ['name'])\r\n    else this.searchList = this.employeeList\r\n  }\r\n  goBack() {\r\n    this.closeAndReceiveEmployee.emit(false)\r\n  }\r\n\r\n}\r\n","<nz-select nzPlaceHolder=\"{{'Select employee' | translate}}\" [ngModel]=\"id_employee\" (ngModelChange)=\"cancel($event)\"\r\n    nzBorderless class=\"cus-select\" nzShowSearch>\r\n    <nz-option *ngFor=\"let item of searchList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}}\">\r\n    </nz-option>\r\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-tax',\r\n  templateUrl: './tax.component.html',\r\n  styleUrls: ['./tax.component.scss']\r\n})\r\nexport class TaxComponent implements OnInit {\r\n  @Input(\"id_customer\") id_customer = 'id_retail';\r\n  @Input(\"payment_type\") payment_type = 1;\r\n  @Input(\"id_wallet\") id_wallet = 'id_cash';\r\n  @Output('closeAndGetValuePayment') closeAndGetValuePayment = new EventEmitter<any>();\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.listWallets = this.vhQuerySales.getlocalWallets().filter(wallet => wallet._id != 'id_cash' && wallet.id_branch == this.vhQuerySales.getDefaultBranch()._id)\r\n      .map(wallet => { return { label: wallet.name, value: wallet._id, isLeaf: true } })\r\n    this.nzOptions[2].children = this.listWallets;\r\n    if (this.payment_type) {\r\n      if (this.payment_type == 2 || this.payment_type == 1) this.type_payment = [this.payment_type]\r\n      else if (this.payment_type == 3) this.type_payment = [3, this.id_wallet];\r\n    }\r\n  }\r\n  type_payment: any[]\r\n  listWallets: Array<any> = [];\r\n\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ]\r\n\r\n  onChanges(event) {\r\n    this.closeAndGetValuePayment.emit(event);\r\n  }\r\n  ngOnChanges(valueChange: SimpleChanges) {\r\n    if (valueChange.payment_type) {\r\n      let type = valueChange.payment_type.currentValue;\r\n      if (type == 2 || type == 1) this.type_payment = [this.payment_type]\r\n      else if (type == 3) this.type_payment = [3, this.id_wallet];\r\n    }\r\n    if (valueChange.id_customer) {\r\n      if (valueChange.id_customer.currentValue == \"id_retail\" || (valueChange.id_customer.currentValue != \"id_retail\" && !this.vhQuerySales.getlocalCustomer(valueChange.id_customer.currentValue).debt_enable)) {\r\n        this.disableDebt()\r\n      } else this.nzOptions[1].disabled = false;\r\n    }\r\n    if (this.id_customer == 'id_retail' && this.payment_type == 2) {\r\n      this.disableDebt()\r\n    }\r\n  }\r\n  disableDebt() {\r\n    this.nzOptions[1].disabled = true;\r\n    this.closeAndGetValuePayment.emit([1]);\r\n    this.type_payment = [this.payment_type];\r\n  }\r\n}\r\n","<nz-cascader [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" [(ngModel)]=\"type_payment\"\r\n    nzPlaceHolder=\"{{'Payment method' | translate}}\" (ngModelChange)=\"onChanges($event)\"> </nz-cascader>","import { Component, Input, OnInit, Output, SimpleChanges, EventEmitter } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAuth, VhQuerySales, VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { SalesK57Col3Component } from 'src/app/sales/components/print/sales/sales-k57-col3/sales-k57-col3.component';\r\nimport { SalesK80Col3Component } from 'src/app/sales/components/print/sales/sales-k80-col3/sales-k80-col3.component';\r\nimport { SalesK80Col4Component } from 'src/app/sales/components/print/sales/sales-k80-col4/sales-k80-col4.component';\r\nimport { SalesA5Component } from 'src/app/sales/components/print/sales/sales-a5/sales-a5.component';\r\nimport { SalesA4Component } from 'src/app/sales/components/print/sales/sales-a4/sales-a4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhSaleInvoiceDetail, VhSaleInvoices } from 'src/app/sales/interface/vh-sale-invoice';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-conversation-detail',\r\n  templateUrl: './conversation-detail.component.html',\r\n  styleUrls: ['./conversation-detail.component.scss']\r\n})\r\nexport class ConversationDetailComponent implements OnInit {\r\n  @Input() infoSender: any = {}\r\n  @Input() list_earning_point_bills  = []\r\n  @Input() list_earning_points_products  = []\r\n  @Input() customer_group = []\r\n  @Output() addCustomerEvent = new EventEmitter<any>()\r\n  indexTab: number = 0\r\n  searchProductList: boolean = false\r\n  default_price_type: number = 1\r\n  invoice: VhSaleInvoices\r\n  pickerTime = new Date();\r\n  employee: any = {}\r\n  promotions: Array<any> = []\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  customer: any;\r\n  note: string = ''\r\n  checkPrinter: boolean = false;\r\n  visibleCheckFees: boolean = false\r\n  warning_lot_expried: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').warning_lot_expried\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price;\r\n  is_discount_bill= false;\r\n  point_validity = 0\r\n  discount_bill = 0\r\n  constructor(\r\n    public vhAuth: VhAuth,\r\n    private vhQuerySales: VhQuerySales,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private modal: NzModalService,\r\n    private router: Router,\r\n    private fncService:FunctionService, \r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initBill()\r\n    let printer = this.vhQuerySales.getlocalPrinters().find(item => item.desktop);\r\n    if (printer && printer.sales) this.checkPrinter = printer.sales.enable; \r\n  }\r\n  ngAfterViewInit() { \r\n  }\r\n  initBill() {\r\n    this.invoice = new VhSaleInvoices()\r\n    // set nhân viên mặc định\r\n    if (!this.invoice.getIdEmployee())\r\n      this.invoice.setIdEmployee(this.vhAuth.getUser()._id)\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee());\r\n    this.invoice.setIdBranch(this.vhQuerySales.getDefaultBranch()._id)\r\n    if (this.vhAuth.checkMyPermission('default_price_type_1')) this.default_price_type = 1;\r\n    else if (this.vhAuth.checkMyPermission('default_price_type_2')) this.default_price_type = 2;\r\n    this.invoice.setPriceType(this.default_price_type)\r\n    let tax = this.listTax.find(item => item.default);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n      this.invoice.setTax(tax['value']);\r\n    }\r\n    this.percent_discount_bill = this.invoice.getSubTotal() ? (this.invoice.getDiscount() / this.invoice.getSubTotal()) * 100 : 0\r\n    this.getClassAndProgram(this.invoice.getIdPartner())\r\n  }\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    (changes.infoSender) && (this.infoSender = changes.infoSender.currentValue)\r\n  }\r\n  changeTabs(tab: number) {\r\n    this.indexTab = tab\r\n    if (tab == 3) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.discount_price = this.vhAlgorithm.vhnumeral(\".discount-price\");\r\n        this.invoice_fee = this.vhAlgorithm.vhnumeral(\".invoice-fee\")\r\n      })\r\n    }\r\n  } \r\n  closeSearch(data) {\r\n    if (data.manylot && !data.lot_number) this.openModalChooseLot(data)\r\n    else {\r\n      if (data) {\r\n        if (data.combos && data.combos.filter(e => e.lots && !e.id_lotproduct).length) {\r\n          this.tempDetail = data;\r\n          this.show_modal_select_lots_combo = true;\r\n        }\r\n        else {\r\n          let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n          this.invoice.addInvoiceDetail(\r\n            {\r\n              ...data,\r\n              price: price,\r\n              earning_points_product: this.getTotalEarningPointProduct(data, null)\r\n            }, null)\r\n        }\r\n      }\r\n\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.setDiscountBill(0);\r\n        this.discount_bill = 0;\r\n      }\r\n    }\r\n    \r\n\r\n    this.searchProductList = false;\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      if (ev == -1) {\r\n        item.price = this.vhQuerySales.getlocalProduct(item.id_product).price\r\n        item.ratio = 1\r\n        item.unit_name = item.unit\r\n        item.price_origin = this.vhQuerySales.getlocalProduct(item.id_product).price\r\n      }\r\n      else {\r\n        item.unit_name = item.units[ev].unit\r\n        item.price = parseFloat(item.units[ev].price)\r\n        item.ratio = parseFloat(item.units[ev].ratio)\r\n        item.price_origin = parseFloat(item.units[ev].price)\r\n      }\r\n    }\r\n    else{\r\n      if (ev == -1) {\r\n        item.price = this.vhQuerySales.getlocalProduct(item.id_product).price2 ? this.vhQuerySales.getlocalProduct(item.id_product).price2 : this.vhQuerySales.getlocalProduct(item.id_product).price\r\n        item.ratio = 1\r\n        item.unit_name = item.unit\r\n        item.price_origin =  this.vhQuerySales.getlocalProduct(item.id_product).price2 ? this.vhQuerySales.getlocalProduct(item.id_product).price2 : this.vhQuerySales.getlocalProduct(item.id_product).price\r\n      }\r\n      else {\r\n        item.unit_name = item.units[ev].unit\r\n        item.price = parseFloat(item.units[ev].price2 ? item.units[ev].price2 : item.units[ev].price)\r\n        item.ratio = parseFloat(item.units[ev].ratio)\r\n        item.price_origin = parseFloat(item.units[ev].price2 ? item.units[ev].price2 : item.units[ev].price)\r\n      }\r\n    }\r\n    this.invoice.setSubTotal()\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  /**\r\n  *  sự kiện nhận thay đổi giá từ output component app-change-price-type\r\n  * @event : boolean | null\r\n  */\r\n  changePriceType(event) {\r\n    if (event != null) { // nếu có thay đổi kiểu giá bán thì cập nhật lại giá các sản phẩm thành giá bán sỉ\r\n      this.default_price_type = event;\r\n      if (this.invoice.getInvoiceDetail().length) { // nếu có  length mơi update\r\n        let bill_details = this.invoice.getInvoiceDetail()\r\n        for (let i in bill_details) {\r\n          let price_update = 0;\r\n          let product = this.vhQuerySales.getlocalDetailProduct(bill_details[i].id_subproduct ? bill_details[i].id_subproduct : bill_details[i].id_product);\r\n          product = { ...product, ...this.vhQuerySales.getUnit_byRatio(product.units, bill_details[i].ratio) }\r\n          if (event == 1) {\r\n            price_update = product.price\r\n          }\r\n          else {\r\n            price_update = product.price2 ? product.price2 : product.price\r\n          }\r\n          bill_details[i].price = price_update;\r\n          bill_details[i].price_origin = price_update;\r\n        }\r\n        this.invoice.setSubTotal();\r\n      }\r\n      this.invoice.setPriceType(event)\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  } \r\n\r\n  \r\n  /**\r\n   * hàm get điểm tích lũy theo hóa đơn\r\n   * 1. get hạng khách hàng\r\n   * 2. từ hạng khách hàng get tích điểm theo bill\r\n   * 3. check các điều kiện của chương trình \r\n   * a check sản phẩm khuyến mãi include_promotion_product\r\n   * b  check giảm giá/ chiết khấu include_discount\r\n   * c check thanh toán = điểm thưởng include_paid_points\r\n   * d check phí  include_fee \r\n   * e check thuế include_tax\r\n   * @returns 0 | number\r\n   */\r\n   getEarningBill() {\r\n    if (this.program_bill && this.invoice.getSubTotal() > this.program_bill.bill_total_minimum) {\r\n      let subTotal = this.invoice.getSubTotal();\r\n      if (!this.program_bill.include_promotion_product) { // ko tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotion()\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.getDiscount() - this.invoice.getDiscountBill()\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.getDiscountPoint()) subTotal = subTotal - this.invoice.getDiscountPoint()\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.getFee();\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.getTax() / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.invoice.getSubTotal();\r\n        if (this.program_bill.include_discount) subTotal = subTotal - this.invoice.getDiscount() - this.invoice.getDiscountBill()\r\n\r\n        if (this.program_bill.include_paid_points && this.invoice.getDiscountPoint()) subTotal = subTotal - this.invoice.getDiscountPoint()\r\n        if (this.program_bill.include_fee) subTotal += this.invoice.getFee();\r\n\r\n        if (this.program_bill.include_tax) subTotal += subTotal * (this.invoice.getTax() / 100)\r\n        return ((subTotal - subTotal % this.program_bill.exchange.money) / this.program_bill.exchange.money) * this.program_bill.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n  /**\r\n  * hàm này trả về tổng tiền của sản phẩm ko có chương trình khuyến mãi\r\n  * return : number\r\n  */\r\n  getSubTotalNotPromotion() {\r\n    return this.invoice.getInvoiceDetail().filter(item => !item.id_promotion).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về tổng tiền của sản phẩm  ko có chương trình khuyến mãi thuộc chương trình tích điểm sản phẩm\r\n   * return : number\r\n   */\r\n  getSubTotalNotPromotionOFProduct(products_of_program_earnig_product) {\r\n    return this.invoice.getInvoiceDetail()\r\n      .filter(item => !item.id_promotion && products_of_program_earnig_product.find(i => i == item.id_product))\r\n      .reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của tất cả sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getEarningProduct() {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.getSubTotalNotPromotionOFProduct(this.program_product.products)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.invoice.getInvoiceDetail().filter(item => item.price_origin == item.price && this.program_product.products.find(i => i == item.id_product)).reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n\r\n\r\n\r\n\r\n  earning_point: number = 0;\r\n  /**\r\n   * hàm này trả về tổng điểm được tích của đơn và sản phẩm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPoint() {\r\n    this.earning_point = this.getEarningProduct() + this.getEarningBill();\r\n    return this.earning_point\r\n  }\r\n\r\n  /**\r\n   * hàm này trả về điểm được tích của sản phẩm được thêm\r\n   * @param product sản phẩm được thêm\r\n   * @returns 0 | number\r\n   */\r\n  getTotalEarningPointProduct(product, promotion) {\r\n    if (this.program_product) {\r\n      let subTotal = 0;\r\n      if (!this.program_product.include_promotion_product && promotion) { // tích điểm sp có km =>  tính lại subTotal\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n      else {\r\n        subTotal = this.program_product.products.find(i => i == product._id) ? product.price : 0\r\n        return ((subTotal - subTotal % this.program_product.exchange.money) / this.program_product.exchange.money) * this.program_product.exchange.points\r\n      }\r\n    }\r\n    else return 0\r\n  }\r\n  deleteGoods(detail: VhSaleInvoiceDetail) {\r\n    this.invoice.removeInvoiceDetail(detail.id_product)\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer()\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.setDiscountBill(0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  checkQuantityProduct(product: VhSaleInvoiceDetail, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.invoice.setSubTotal();\r\n    if (this.is_discount_bill) {\r\n      setTimeout(() => {\r\n        this.getDiscountBillOfCustomer()\r\n      }, 200);\r\n    }\r\n    else {\r\n      this.invoice.setDiscountBill(0);\r\n      this.discount_bill = 0;\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhSaleInvoiceDetail;\r\n  openEditUnitPrice(detail: VhSaleInvoiceDetail) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.invoice.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n      if (this.is_discount_bill) {\r\n        setTimeout(() => {\r\n          this.getDiscountBillOfCustomer()\r\n        }, 200);\r\n      }\r\n      else {\r\n        this.invoice.setDiscountBill(0);\r\n        this.discount_bill = 0;\r\n      }\r\n      if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n    } else { this.vhComponent.showToast(5000, this.lang.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.setIdEmployee(event);\r\n    }\r\n  }\r\n  // ----set customer-----\r\n  radioValue: 1 | 2 = 1;\r\n  closeAndReceiveCustomer(event) {\r\n    if (event) {\r\n      this.invoice.setIdPartner(event);\r\n      if (!this.vhQuerySales.getlocalCustomer(event).debt_enable) this.invoice.setPayment(this.invoice.getTotalATax());\r\n      this.getClassAndProgram(event)\r\n    }\r\n  }\r\n  changeCustomerType(event) {\r\n    if (this.radioValue == 1) {\r\n      this.invoice.setIdPartner(\"id_retail\");\r\n      this.invoice.setPayment(this.invoice.getTotalATax());\r\n\r\n    }\r\n  }\r\n\r\n  \r\n  customer_class: any;\r\n  program_bill: any;\r\n  program_product: any;\r\n\r\n  /**\r\n   * hàm này để gán chương trình tich diem hóa đơn và sản phẩm của khách hàng\r\n   */\r\n  getClassAndProgram(id_customer) {\r\n    this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner());\r\n    this.customer_class = this.customer_group.find(item => item._id == this.vhQuerySales.getlocalCustomer(id_customer).id_customer_class);\r\n    if (this.customer_class && this.customer_class.id_earning_points_bill) {\r\n      this.program_bill = this.list_earning_point_bills.find(item => item._id == this.customer_class.id_earning_points_bill);\r\n    }\r\n    if (this.customer_class && this.customer_class.id_earning_points_product) {\r\n      this.program_product = this.list_earning_points_products.find(item => item._id == this.customer_class.id_earning_points_product);\r\n    }\r\n    if (!this.customer_class) {\r\n      this.program_bill = null;\r\n      this.program_product = null;\r\n    }\r\n    this.point_validity =  this.vhQuerySales.getlocalCustomerPoints(this.invoice.getIdPartner())\r\n    this.getDiscountMethodCustomer(this.invoice.getIdPartner())\r\n \r\n  }\r\n\r\n  getDiscountMethodCustomer(id_customer) {\r\n    let check = this.vhQuerySales.getlocalDiscount_bill(this.customer_class?.id_discount_bill)\r\n    if (check) {\r\n      this.is_discount_bill = true\r\n      this.getDiscountBillOfCustomer()\r\n      this.vhComponent.alertMessageDesktop('success', this.lang.translate(\"This customer applies the discount calculation formula \") + check.name, 5000)\r\n    }\r\n    else {\r\n      this.is_discount_bill = false\r\n      this.invoice.setDiscountBill(0) \r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n    \r\n  }\r\n\r\n  getDiscountBillOfCustomer() {\r\n    this.discount_bill = this.vhQuerySales.getDiscount_bill_byCustomer(this.invoice.getSubTotal(), this.invoice.getIdPartner()) ? this.vhQuerySales.getDiscount_bill_byCustomer(this.invoice.getSubTotal(), this.invoice.getIdPartner()).discount : 0;\r\n    this.invoice.setDiscountBill(this.discount_bill)\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // ----set delivery ------\r\n  closeAndReceiveDelivery(event) {\r\n    if (event) {\r\n      this.invoice.setIdDelivery(event);\r\n    }\r\n  }\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0]);\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.setPaymentType(type)\r\n    switch (type) {\r\n      case 1: {\r\n        this.invoice.setIdWallet('id_cash'); this.invoice.setPayment(this.invoice.getPayment() ? this.invoice.getPayment() : null);\r\n\r\n        break;\r\n      }\r\n      case 2: {\r\n        this.invoice.setPayment(0); this.invoice.setIdWallet(null);\r\n        this.invoice.setCash(0);\r\n\r\n        break;\r\n      }\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.setIdWallet(id_wallet)\r\n          this.invoice.setPayment(this.invoice.getPayment() ? this.invoice.getPayment() : null);\r\n\r\n          break;\r\n        }\r\n      }\r\n    };\r\n  }\r\n  setPickerTime(event) {\r\n    this.vhQuerySales.getValidityDate(event)\r\n      .then((validitydate) => {\r\n        if (validitydate) {\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n          this.invoice.setDate(new Date());\r\n        }\r\n        else this.invoice.setDate(event);\r\n      })\r\n\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.setTax(tax.value);\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  discount_price: any;\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0 && this.discount_price.getRawValue() <= this.invoice.getSubTotal()) {\r\n      this.invoice.setDiscount(parseFloat(this.discount_price.getRawValue()));\r\n      this.percent_discount_bill = this.invoice.getSubTotal() ? (this.invoice.getDiscount() / this.invoice.getSubTotal()) * 100 : 0\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.getDiscount();\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n\r\n  openModalOtherDiscount() {\r\n    this.showModalOtherDiscount = true;\r\n    this.radioValueProgramEarningPoint = this.program_bill ? this.program_bill._id : this.program_product ? this.program_product._id : ''\r\n  }\r\n\r\n  handleOkOtherDiscount() {\r\n    if(this.invoice.getPayment() < this.invoice.getDiscountOther()) this.invoice.setPayment(0);\r\n    this.showModalOtherDiscount = false;\r\n  }\r\n  product_codes = []\r\n  getDiscountOfCoupon(code) {\r\n    if (code)\r\n      this.vhQuerySales.getCoupon_Code_Name_Release_byCode(code)\r\n        .then((product_codes: any) => {\r\n          if (product_codes && !this.product_codes.find(item => item.code == code)) {\r\n            switch (product_codes.status) {\r\n              case 1: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Phiếu này chưa được quy đổi\"))\r\n                break;\r\n              }\r\n              case 3: {\r\n                if (new Date() < new Date(product_codes.date_expire)) {\r\n                  this.product_codes.push(product_codes)\r\n                  this.invoice.setDiscountCoupon(product_codes.value)\r\n                  this.vhComponent.alertMessageDesktop(\"success\", this.lang.translate(\"Sử dụng coupon thành công\"))\r\n                }\r\n                else {\r\n                  this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Phiếu này đã hết hạn sử dụng\"), 8000)\r\n                }\r\n                break;\r\n              }\r\n              case 4: {\r\n                this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Phiếu này đã được sử dụng\"), 8000)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (!product_codes) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Không tìm thấy phiếu này\"), 8000)\r\n          setTimeout(() => {\r\n            document.getElementById('coupon').getElementsByTagName(\"input\")[0].value = '';\r\n          }, 200);\r\n        })\r\n\r\n  }\r\n\r\n  onCloseProductCode(item) {\r\n    this.product_codes.splice(this.product_codes.findIndex(i => i._id == item._id), 1);\r\n    this.invoice.setDiscountCoupon(-item.value)\r\n  }\r\n  radioValueProgramEarningPoint: any;\r\n  value_discount_point: number = 0;\r\n  showModalOtherDiscount = false\r\n  percent_discount_bill   = 0;\r\n  calculatePoint2Money(value) {\r\n    if (value <= this.point_validity) {\r\n      this.value_discount_point = value;\r\n      \r\n      this.invoice.setDiscountPoint((value/this.customer_class.payment.points) * this.customer_class.payment.money)\r\n      this.invoice.setUsePoint(value)\r\n    }\r\n    else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Vượt quá giới hạn điểm cho phép\"))\r\n    }\r\n  }\r\n\r\n  editPercentDiscount(value) {\r\n    if (parseFloat(value) > 100)\r\n      document.getElementById(\"percent-discount-price\")['value'] = 0\r\n      if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  invoice_fee: any;\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.setFee(parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.getFee();\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    if (!this.gotten_gift_type7) this.handlePromotionType7(this.bill_details_pmtype_7)\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.getPaymentType() != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhComponent.showToast(5000,\r\n        this.lang.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.invoice.getTotalATax()) {\r\n      this.invoice.setPayment(parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n  /**add customer */\r\n  showDrawerAddCusomer: boolean = false;\r\n  closeAddCustomer(result) {\r\n    this.showDrawerAddCusomer = false;\r\n    if(result){ \r\n      this.invoice.setIdPartner(result._id);\r\n      this.addCustomerEvent.emit(result)\r\n      \r\n    }\r\n  }\r\n  visibleInfoCustomer: boolean = false;\r\n  openInfoCustomer() {\r\n    if (this.invoice.getIdPartner() != 'id_retail') {\r\n      this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner());\r\n      this.visibleInfoCustomer = true;\r\n    }\r\n  }\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.setNote(this.note)\r\n    }\r\n  }\r\n  payInvoice(bill_type = 1, print?) {\r\n    if (this.vhAuth.checkMyPermission(\"sales_enable_payment\")) {\r\n      this.vhComponent.alertConfirm(\r\n        this.lang.translate(\"Pay\") + \"?\",\r\n        \"\", \"\", \"OK\", this.lang.translate(\"Cancel\")\r\n      )\r\n        .then(() => {\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            this.createOrUpdate(1).then(bill => {\r\n              if (bill.bill_code) this.invoice.setBillCode(bill.bill_code)\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.lang.translate(\"Sales invoice\")} ${bill.bill_code || this.invoice.getBillCode()} ${this.lang.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                )\r\n                if (print) this.handlePrint()\r\n                else {\r\n                  this.modal.confirm({\r\n                    nzTitle: this.lang.translate(\"Chuyển sang trang hóa đơn\") + \"?\",\r\n                    nzContent: \"Bạn vừa bán hàng thành công, bạn có muốn chuyển sang trang hóa đơn?\",\r\n                    nzOkText: 'Sang trang hóa đơn',\r\n                    nzOnOk: () => {\r\n                      this.router.navigate(['/sales/dashboard/manage/invoice/sales-return-invoice'])\r\n                    },\r\n                    nzOnCancel: () => { this.initBill() },\r\n                    nzCancelText: this.lang.translate(\"Tiếp tục chat\")\r\n                  })\r\n                }\r\n              })\r\n            })\r\n          })\r\n        }, () => { })\r\n    }\r\n    else this.vhComponent.showToast(1500, this.lang.translate('You do not have this rights'), \"alert-toast\")\r\n  }\r\n  createOrUpdate(bill_type: 1) {\r\n    return this.vhQuerySales.createBill_Billdetail({ ...this.invoice.getCreateUpdateInvoice(bill_type), uuid: null }, this.invoice.getCreateUpdateInvoiceDetail())\r\n  }\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_sales')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return SalesK57Col3Component\r\n      case 'print_size_k80_3c': return SalesK80Col3Component\r\n      case 'print_size_k80_4c': return SalesK80Col4Component\r\n      case 'print_size_a5': return SalesA5Component\r\n      case 'print_size_a4': return SalesA4Component\r\n      default: return SalesA4Component\r\n    }\r\n  }\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer , invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => { })\r\n        })\r\n    }, (err) => { })\r\n  }\r\n  checkFee() {\r\n    this.invoice\r\n  }\r\n\r\n\r\n  \r\n  isGotPromotion = false;\r\n  showProductGift = false;\r\n  product_gift_type7: any = [];\r\n  showProductGiftType7 = false;\r\n  gotten_gift_type7 = false;\r\n  bill_details_pmtype_7: any = [];\r\n  handleAddGiftType7() {\r\n    this.showProductGiftType7 = false;\r\n    if (!this.gotten_gift_type7)\r\n      for (let i in this.product_gift_type7) {\r\n        // this.product_gift_type7[i].products_gift = this.product_gift_type7[i].products_gift.filter(item => item.choose).map(e => { return { ...e } })\r\n        if (this.product_gift_type7[i].products_gift.length) this.invoice.addBill_detail_promotion(this.product_gift_type7[i])\r\n      }\r\n    \r\n    this.gotten_gift_type7 = true;\r\n  }\r\n  /**\r\n   * hàm lấy quà\r\n   */\r\n  getPromotions() {\r\n    this.gotten_gift_type7 = false;\r\n    this.vhComponent.showLoading('')\r\n      .then(() => {\r\n        this.vhQuerySales.changeBillDetails_withPromotions(this.invoice.getInvoiceDetail(), this.invoice.getDate()).then((bill_details_display: any) => {\r\n          \r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_0to6)\r\n          this.handleChooseLotForPromotion(bill_details_display.bill_details_pmtype_7)\r\n\r\n          this.bill_details_pmtype_7 = this.vhAlgorithm.sortNumberbyASC([...bill_details_display.bill_details_pmtype_7], 'total_bill_value')\r\n          this.isGotPromotion = true;\r\n          this.vhComponent.hideLoading(0)\r\n          this.invoice = new VhSaleInvoices(this.invoice.getCreateUpdateInvoice(5), [...bill_details_display.bill_details_pmtype_0to6,], this.vhQuerySales);\r\n          // if (bill_details_display.filter(item => item.products_gift).length) this.showProductGift = true;\r\n          this.getEarningpointPromotion();\r\n\r\n          // this.product_gift_type7 = [...bill_details_display.bill_details_pmtype_7]\r\n          this.handlePromotionType7(this.bill_details_pmtype_7)\r\n\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(5000, error, \"alert-toast\")\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  deletePromotion() {\r\n    return new Promise((resolve) => {\r\n      let bill_details = this.vhQuerySales.destroyBillDetails_withPromotions(this.invoice.getInvoiceDetail())\r\n      this.invoice = new VhSaleInvoices(this.invoice.getCreateUpdateInvoice(5), bill_details, this.vhQuerySales)\r\n      this.invoice.setSubTotal();\r\n      this.product_gift_type7 = [];\r\n      this.bill_details_pmtype_7 = [];\r\n      resolve(true)\r\n    })\r\n\r\n  }\r\n  handlePromotionType7(bill_details_pmtype_7) {\r\n    \r\n    if (bill_details_pmtype_7.length)\r\n      if (bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.invoice.getTotalATax()) != -1)\r\n        this.product_gift_type7 = [bill_details_pmtype_7[bill_details_pmtype_7.findLastIndex(e => e.total_bill_value <= this.invoice.getTotalATax())]]\r\n      else this.product_gift_type7 = []\r\n    else this.product_gift_type7 = []\r\n    \r\n\r\n  }\r\n\r\n  handleChooseLotForPromotion(promotion) {\r\n    for (let i of promotion) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          if (product.lots && product.lots.length) {\r\n            let min_date_exp = this.vhAlgorithm.sortDatebyASC(product.lots, 'date_exp')\r\n            product['id_lotproduct'] = min_date_exp[0]._id;\r\n            product['lot_number'] = min_date_exp[0].lot_number;\r\n          }\r\n          if (product.combos) {\r\n            product.combos.forEach(element => {\r\n              if (element.lots && element.lots.length) {\r\n                let min_date_exp = this.vhAlgorithm.sortDatebyASC(element.lots, 'date_exp')\r\n                element['id_lotproduct'] = min_date_exp[0]._id;\r\n                element['lot_number'] = min_date_exp[0].lot_number;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      } \r\n    }\r\n  }\r\n\r\n  /**\r\n   * hàm này để get SubTotal mới của mảng đã lấy quà\r\n   * đồng thời gán điểm tích lũy sản phẩm mới của các sản phẩm trong khuyến mãi nếu có\r\n   */\r\n  getEarningpointPromotion() {\r\n    for (let i of this.invoice.getInvoiceDetail()) {\r\n      if (i.products_gift) {\r\n        for (let product of i.products_gift) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true);\r\n        }\r\n      }\r\n      if (i.products) {\r\n        for (let product of i.products) {\r\n          product.earning_points_product = this.getTotalEarningPointProduct(i, true)\r\n        }\r\n      }\r\n      if (!i.id_promotion) i.earning_points_product = this.getTotalEarningPointProduct(i, null)\r\n    }\r\n    this.invoice.setSubTotal()\r\n  }\r\n\r\n  /**\r\n   * hàm này để kiểm tra disable sản phẩm tặng hay ko\r\n   * @param data phần tử trong mảng đã lấy quà\r\n   * @returns\r\n   */\r\n  checkDisableChooseProductGift(data) {\r\n    if (data.products_gift.filter(item => item.choose).length == data.promotions_maximum) return true;\r\n    else return false\r\n  }\r\n\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if(!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  handleChooseLot() {\r\n    \r\n    if (this.warning_lot_expried) {\r\n      let lot_select = this.list_search_lot.find(e => e._id == this.tempDetail.id_lotproduct)\r\n      \r\n      \r\n      \r\n      if (new Date().getTime() >= new Date(lot_select.date_exp).getTime()) {\r\n        this.modal.confirm({\r\n          nzTitle: this.lang.translate(\"Lô này đã hết hạn! Tiếp tục bán sản phẩm này?\"),\r\n          nzOnOk: () => {\r\n            this.show_modal_select_lots = false;\r\n            this.tempDetail.lots = this.list_search_lot;\r\n            if (!this.tempDetail.id_product) this.closeSearch(this.tempDetail);\r\n          },\r\n          nzOnCancel: () => {\r\n            // this.show_modal_select_lots = false;\r\n            // this.tempDetail.lots = this.list_search_lot;\r\n          }\r\n\r\n        })\r\n      }\r\n      else {\r\n        this.show_modal_select_lots = false;\r\n        this.tempDetail.lots = this.list_search_lot;\r\n        if (!this.tempDetail.id_product) this.closeSearch(this.tempDetail);\r\n      }\r\n    }\r\n    else {\r\n      this.show_modal_select_lots = false;\r\n      this.tempDetail.lots = this.list_search_lot;\r\n      if (!this.tempDetail.id_product) this.closeSearch(this.tempDetail);\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  show_modal_select_lots_combo = false;\r\n  handleChooseLotCombo() {\r\n    if (this.tempDetail.combos.filter(item => item.lots && !item.id_lotproduct).length)\r\n      this.vhComponent.alertMessageDesktop(\"warning\", this.lang.translate(\"Vui lòng chọn lô cho sản phẩm thuộc combo này\"))\r\n    else {\r\n      this.show_modal_select_lots_combo = false;\r\n      this.closeSearch(this.tempDetail)\r\n    }\r\n  }\r\n}\r\n","<div class=\"layout\">\r\n    <div class=\"tab-left ant-table-body\">\r\n        <app-fb-info-user [infoSender]=\"infoSender\" *ngIf=\"indexTab ==0\" (addCustomerEvent)=\"closeAddCustomer($event)\"></app-fb-info-user>\r\n        <div class=\"fb-create-order\" >\r\n            <div *ngIf=\"indexTab ==1\" nz-row>\r\n                <div nz-col nzSpan=\"24\" class=\"d-flex\" style=\"margin-top:12px;\">\r\n                    <b style=\"width: 50%; font-size: 1rem;\">{{'Lookup shipping fee' | translate}}</b>\r\n                    <app-delivery style=\"width: 50%;\" [id_delivery]=\"invoice.getIdDelivery()\"\r\n                        (closeAndReceiveDelivery)=\"closeAndReceiveDelivery($event)\"></app-delivery>\r\n                </div>\r\n                <div class=\"right-all-content\" nz-col nzSpan=\"24\">\r\n                    <button (click)=\"visibleCheckFees = true\" [disabled]=\"!invoice.getIdDelivery()\" nz-button\r\n                        class=\"check-fees\">Tra cứu cước phí giao\r\n                        hàng</button>\r\n                </div>\r\n                <app-check-fees *ngIf=\"visibleCheckFees\" [visibleCheckFees]='visibleCheckFees'\r\n                    [id_delivery]=\"invoice.getIdDelivery()\" (hideModalCheckFees)=\"visibleCheckFees = $event\">\r\n                </app-check-fees>\r\n            </div>\r\n            <div *ngIf=\"indexTab ==2\" nz-row class=\"card-products\">\r\n                <div nz-col nzSpan=\"24\" class=\"show-cart d-flex\">\r\n                    <div class=\"d-flex\" (click)=\"searchProductList = true\">\r\n                        <i class=\"icon\" nz-icon nzType=\"plus-circle\" nzTheme=\"outline\"></i><span>Thêm sản phẩm</span>\r\n                    </div>\r\n                    <div>\r\n                        <nz-select [(ngModel)]=\"default_price_type\" (ngModelChange)=\"changePriceType($event)\">\r\n                            <nz-option [nzValue]=1 nzLabel=\"Giá bán lẻ\"></nz-option>\r\n                            <nz-option [nzValue]=2 nzLabel=\"Giá bán buôn\"></nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div nz-col nzSpan=\"24\" class=\"fb-create-order-cart\">\r\n                    \r\n                <ng-container>\r\n                    <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice.getInvoiceDetail(),index as i\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"24\">\r\n                                <ng-container [ngSwitch]=\"item.pmtype\">\r\n                                    <ng-container *ngSwitchCase=\"1\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\">\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"2\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"3\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"4\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"5\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    <br>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"data.combos\">\r\n                                                    <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                    <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                </nz-select> -->\r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(data)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"6\">\r\n                                        <div nz-row *ngIf=\"item.products.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGift = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <!-- <div nz-row *ngFor=\"let data of item.products\">\r\n                                            <div nz-col nzSpan=\"1\"></div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{data.name}}</p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                \r\n                                                {{data.unit}}\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                {{data.quantity}}\r\n                                                 \r\n                                            </div>\r\n                                            <div class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\" style=\" margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{data.price_origin > data.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div> -->\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                        <br>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{data.unit}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"7\">\r\n                                        <div nz-row *ngIf=\"item.products_gift.length\">\r\n                                            <div nz-popconfirm nzPopconfirmTitle=\"{{'Cancel promotion?' | translate}}\"\r\n                                                (nzOnConfirm)=\"deletePromotion()\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"23\">\r\n                                                <p style=\"font-weight: bold; margin-bottom: 0;\">{{item.name}} <i nz-icon\r\n                                                        nzType=\"gift\" nzTheme=\"outline\" style=\"cursor: pointer;\"\r\n                                                        (click)=\"showProductGiftType7 = true\"></i></p>\r\n\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div nz-row *ngFor=\"let data of item.products_gift\">\r\n                                            <ng-container *ngIf=\"data.choose\">\r\n\r\n                                                <div nz-col nzSpan=\"1\"></div>\r\n                                                <div nz-col nzSpan=\"8\">\r\n                                                    <i style=\"margin-bottom: 0;\">{{data.name}}</i>\r\n                                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                                    </ng-container>\r\n                                                    <p *ngIf=\"data.combos\">\r\n                                                        <span *ngFor=\"let combo of data.combos;index as i\"\r\n                                                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                            {{ i == data.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                            combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ':\r\n                                                            combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                            getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        </span>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"3\" style=\"text-align: center;\">\r\n                                                    <!-- <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.unit_exchange\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                        <nz-option  [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option>\r\n                                                        <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"idx\"></nz-option>\r\n                                                    </nz-select> -->\r\n                                                    {{data.unit}}\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: center;\">\r\n                                                    {{data.quantity}}\r\n                                                    <!-- <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                                                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\"></nz-input-number> -->\r\n                                                </div>\r\n                                                <div (click)=\"openEditUnitPrice(data)\"\r\n                                                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                    <p class=\"max-width-two-line\"\r\n                                                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                        <span>{{vhAlgorithm.vhcurrencyunit(data.price)}}</span>\r\n                                                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                            *ngIf=\"display_promotion_selling_price\">\r\n                                                            {{data.price_origin > data.price ?\r\n                                                            vhAlgorithm.vhcurrencyunit(data.price_origin) :\r\n                                                            ''}}\r\n                                                        </del>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                    <p class=\"max-width-two-line\">\r\n                                                        <b>{{vhAlgorithm.vhcurrencyunit(data.price*data.quantity)}}</b>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </ng-container>\r\n\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div nz-row>\r\n                                            <div nz-popconfirm\r\n                                                nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                                                (nzOnConfirm)=\"deleteGoods(item)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                                                nz-col nzSpan=\"1\">\r\n                                                <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                                                    style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"8\">\r\n                                                <p style=\"margin-bottom: 0;\">{{item.name}}</p>\r\n                                                <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                                    <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                        (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre>\r\n                                                </ng-container>\r\n                                                <p *ngIf=\"item.combos\">\r\n                                                    <span *ngFor=\"let combo of item.combos;index as i\"\r\n                                                        style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                                                        {{ i == item.combos.length-1 ? combo.quantity + 'x ' +\r\n                                                        combo.name + ' (' + getUnit(combo.units,combo.ratio)+ ') ' :\r\n                                                        combo.quantity + 'x ' + combo.name + ' (' +\r\n                                                        getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                                                        <ng-container *ngIf=\"combo.id_lotproduct\">\r\n                                                            <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                                                (click)=\"openModalChooseLot(combo)\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre>\r\n                                                        </ng-container>\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"3\">\r\n                                                <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                                                    (ngModelChange)=\"changeUnit($event,item)\">\r\n                                                    <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"1\"></nz-option> -->\r\n                                                    <nz-option *ngFor=\"let i of item.units\" [nzLabel]=\"i.unit\"\r\n                                                        [nzValue]=\"i.ratio\"></nz-option>\r\n                                                </nz-select>\r\n                                                <!-- {{item.unit}} -->\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <!-- {{item.quantity}} -->\r\n                                                <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                                                    [(ngModel)]=\"item.quantity\"\r\n                                                    (ngModelChange)=\"checkQuantityProduct(item,$event )\" id=\"quantity\">\r\n                                                </nz-input-number>\r\n                                            </div>\r\n                                            <div (click)=\"openEditUnitPrice(item)\"\r\n                                                class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                                                <p class=\"max-width-two-line\"\r\n                                                    style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                                                    <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                                    <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                                                        *ngIf=\"display_promotion_selling_price\">\r\n                                                        {{item.price_origin > item.price ?\r\n                                                        vhAlgorithm.vhcurrencyunit(item.price_origin) :\r\n                                                        ''}}\r\n                                                    </del>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                                                <p class=\"max-width-two-line\">\r\n                                                    <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n                    <ng-container *ngIf=\"invoice.getInvoiceDetail().length == 0\">\r\n                        <div style=\"text-align: center;\">\r\n                            {{'Please select a product' | translate}}\r\n                        </div>\r\n                    </ng-container>\r\n                </div>\r\n\r\n                <div nz-row>\r\n                    <div>\r\n                        <button nz-button nzType=\"primary\" (click)=\"getPromotions()\">\r\n                            <i nz-icon nzType=\"gift\" nzTheme=\"outline\"></i> {{'Promotions' | translate}}</button>\r\n                    </div>\r\n    \r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"indexTab ==3\" class=\"sales-bills-customer hideScrollbar\" nz-row>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"d-flex\">\r\n                        <b>{{'Salesman' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.getIdEmployee()\"\r\n                            (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                    <div class=\"d-flex\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Sales date' | translate}}</b>\r\n                        <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless\r\n                            nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                </div>\r\n                <div class=\"d-flex\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Customer information' | translate}}</b>\r\n                    <ion-icon (click)=\"showDrawerAddCusomer = true\"\r\n                        style=\"color: var(--ion-color-vh-green);padding-right: 5px; cursor: pointer;font-size: 16px;\"\r\n                        src=\"assets/icon/add.svg\">\r\n                    </ion-icon>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <nz-radio-group [(ngModel)]=\"radioValue\" (ngModelChange)=\"changeCustomerType($event)\"\r\n                        nzName=\"radiogroup\">\r\n                        <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n                        <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n                    </nz-radio-group>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" class=\"d-flex\">\r\n                    <ng-container *ngIf=\"radioValue == 2\">\r\n                        <app-customer style=\"width: 90%;\" [id_customer]=\"invoice.getIdPartner()\"\r\n                            (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-customer>\r\n                        <i (click)=\"openInfoCustomer()\"\r\n                            [ngClass]=\"invoice.getIdPartner() !='id_retail' ? 'active' : 'deactive'\"\r\n                            style=\"color: var(--ion-color-vh-green);padding-right: 5px; cursor: pointer;font-size: 16px;\"\r\n                            nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n                    </ng-container>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" *ngIf=\"radioValue == 2 && invoice.getIdPartner() != 'id_retail'\" style=\"display: flex; justify-content: space-between;margin: 8px 0;\">\r\n                    <span>\r\n                        {{'Accumulated points' | translate}} : <b>{{point_validity}}</b>\r\n                    </span>\r\n                    <span>\r\n                        {{'Plus' | translate}} : <b>{{getTotalEarningPoint()}}</b>\r\n                    </span>\r\n                </div>\r\n                <div class=\"d-flex\" nz-col nzSpan=\"24\">\r\n                    <b>{{'Delivery' | translate}}</b>\r\n                    <app-delivery style=\"width: 70%;\" [id_delivery]=\"invoice.getIdDelivery()\"\r\n                        (closeAndReceiveDelivery)=\"closeAndReceiveDelivery($event)\"></app-delivery>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"indexTab ==3\" class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <div nz-col nzSpan=\"24\" style=\"display: flex;justify-content: space-between;\">\r\n                    <b>{{'Payment information' | translate}}</b>\r\n                    <span (click)=\"openModalOtherDiscount()\" style=\"cursor: pointer;color: var(--ion-color-vh-green);\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        {{'Add other payment' |translate}}\r\n                    </span>\r\n                </div>\r\n                <div nz-col nzSpan=\"24\" class=\"d-flex\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n                </div>\r\n                <ng-container>\r\n                    <div class=\"sales-bills-content-discount\"\r\n                        style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                        <div style=\"width: auto;\">{{'Discount value' | translate}}</div>\r\n                        <div>\r\n                            <input id=\"percent-discount-price\" style=\"width: 50px;\" #percentDiscount type=\"number\"\r\n                                max=\"100\" min=\"0\" step=\"1\"\r\n                                (blur)=\"invoice.setPercentDiscountBill(percentDiscount.value); editPercentDiscount(percentDiscount.value)\"\r\n                                [value]=\"percent_discount_bill | number:'1.0-2'\" class=\"border_bottom \" maxlength=\"3\"\r\n                                nz-input />%\r\n                        </div>\r\n                        <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getDiscount())\"\r\n                            class=\"border_bottom discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\"\r\n                            nz-input />\r\n                    </div>\r\n                </ng-container>\r\n                <div *ngIf=\"invoice.getDiscountOther()\"  style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Other payment' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountOther())}}</div>\r\n                </div>\r\n                <div *ngIf=\"discount_bill >0\" class=\"sales-bills-content-discount\"\r\n                    style=\"display: flex;justify-content: space-between;align-items: center;\" nz-col nzSpan=\"24\">\r\n                    <div style=\"width: auto;\">{{'Discount' | translate}}\r\n                    </div>\r\n                    <span>{{vhAlgorithm.vhcurrencyunit(discount_bill)}}</span>\r\n                </div>\r\n                <div class=\"sales-bills-content-fee d-flex\" nz-col nzSpan=\"24\"\r\n                    *ngIf=\"vhAuth.localStorageGET('show_fee')\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getFee())\"\r\n                        class=\"border_bottom invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-tax d-flex\" nz-col nzSpan=\"24\"\r\n                    *ngIf=\"vhAuth.localStorageGET('show_tax')\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total d-flex\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-pay d-flex\" nz-col nzSpan=\"24\">\r\n                    <div>\r\n                        <b>{{'Pay' | translate}}</b>\r\n                        <ng-container *ngIf=\"product_gift_type7.length && !gotten_gift_type7\">\r\n                            <i style=\"font-size: 1rem;  margin-left: 8px; cursor: pointer;color: var(--ion-color-vh-green)\"\r\n                                nz-icon nzType=\"gift\" nzTheme=\"outline\" (click)=\"showProductGiftType7 = true\"></i>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit(invoice.getPayment())}}<img (click)=\"showModalEditTotalPay()\"\r\n                            *ngIf=\"invoice.getPaymentType() != 2\" style=\"width: 16px;margin-left:10px\"\r\n                            src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n                </div>\r\n                <div class=\"sales-bills-content-rest d-flex\" nz-col nzSpan=\"24\"\r\n                    *ngIf=\"vhAuth.localStorageGET('show_rest')\">\r\n                    <div>{{'Rest' | translate}}</div>\r\n                    <div> {{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() - invoice.getPayment())}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"sales-bills-content-payment_type d-flex\" nz-col nzSpan=\"24\">\r\n                    <app-tax [payment_type]=\"invoice.getPaymentType()\" [id_wallet]=\"invoice.getIdWallet()\"\r\n                        [id_customer]=\"invoice.getIdPartner()\"\r\n                        (closeAndGetValuePayment)=\"closeAndGetValuePayment($event)\">\r\n                    </app-tax>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"vhAuth.localStorageGET('show_note')\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"indexTab ==3\" nz-row>\r\n                <div nz-col nzSpan=\"24\" class=\"sales-bills-button\">\r\n                    <button [disabled]=\"!invoice.getInvoiceDetail().length\" (click)=\"payInvoice(1,true)\" nz-button\r\n                        class=\"order-and-print\">\r\n                        {{\"Pay & Print\"|translate}} (F2)\r\n                    </button>\r\n                    <button [disabled]=\"!invoice.getInvoiceDetail().length\" (click)=\"payInvoice(1,false)\" nz-button\r\n                        class=\"order\">\r\n                        {{\"Pay\"|translate}} (F1)</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--Search product-->\r\n        <app-search-product *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\"\r\n            [default_price_type]=\"default_price_type\" (closeSearchProductList)=\"closeSearch($event)\">\r\n        </app-search-product>\r\n    </div>\r\n    <div class=\"tab-right\">\r\n        <ul nz-menu nzMode=\"inline\" [nzInlineCollapsed]=\"true\">\r\n            <li (click)=\"changeTabs(0)\" nz-menu-item nz-tooltip nzTooltipPlacement=\"left\"\r\n                nzTooltipTitle=\"Thông tin khách hàng\" [nzSelected]=\"indexTab ==0\">\r\n                <i nz-icon nzType=\"user-add\" nzTheme=\"outline\"></i>\r\n            </li>\r\n            <li (click)=\"changeTabs(1)\" nz-menu-item nz-tooltip nzTooltipPlacement=\"left\"\r\n                nzTooltipTitle=\"Tra cước phí giao hàng\" [nzSelected]=\"indexTab ==1\">\r\n                <!-- <i nz-icon nzType=\"fund-view\" nzTheme=\"outline\"></i> -->\r\n                <ion-icon src=\"assets/icon/management/delivery.svg\"></ion-icon>\r\n            </li>\r\n            <li (click)=\"changeTabs(2)\" [nzSelected]=\"indexTab ==2\" nz-menu-item nz-tooltip nzTooltipPlacement=\"left\"\r\n                nzTooltipTitle=\"Giỏ hàng\">\r\n                <i nz-icon nzType=\"shopping-cart\" nzTheme=\"outline\"></i>\r\n            </li>\r\n            <li (click)=\"changeTabs(3)\" [nzSelected]=\"indexTab ==3\" nz-menu-item nz-tooltip nzTooltipPlacement=\"left\"\r\n                nzTooltipTitle=\"Thanh toán\">\r\n                <i nz-icon nzType=\"dollar\" nzTheme=\"outline\"></i>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<!--Modal edit unit price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n    nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"isVisibleEditUnitPrice = false\"\r\n    (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" type=\"text\" maxlength=\"15\" [value]=\"tempDetail.price\" nz-input\r\n                    placeholder=\"{{'Enter unit price' | translate}}\" />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"isVisibleEditUnitPrice = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!--Modal edit pay-->\r\n<nz-modal [(nzVisible)]=\"edit_pay\" [nzFooter]=\"modalFooterEditPay\" nzTitle=\"{{'Edit' | translate}}\"\r\n    (nzOnCancel)=\"handleCancelEditPay()\" (nzOnOk)=\"handleEditPay()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Pay' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getPayment())\" class=\"edit-pay\" type=\"text\"\r\n                    maxlength=\"15\" nz-input />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditPay>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelEditPay()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleEditPay()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n\r\n\r\n<!-- modal chọn sản phẩm tặng -->\r\n<nz-modal nzWidth=\"80vw\" [(nzVisible)]=\"showProductGift\" nzTitle=\"{{'Chọn quà tặng'}}\" (nzOnCancel)=\"showProductGift = false\"\r\n    (nzOnOk)=\"showProductGift = false;getEarningpointPromotion()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"invoice.getInvoiceDetail()\" [nzShowPagination]=\"false\"\r\n            [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <th>{{'Lot number' | translate}}</th>\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.pmtype == 6\">\r\n                        <tr>\r\n                            <td colspan=\"3\"><b>{{ item.name }}</b></td>\r\n                            <td colspan=\"3\" nzAlign=\"right\">{{'SL quà được chọn'}}: {{ item.promotions_maximum }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"6\">\r\n                                <b>{{ 'List of purchased products' | translate }} :</b> <br>\r\n                                <span *ngFor=\"let data of item.products\">\r\n                                    {{data.name}}({{data.unit}}) x{{data.quantity}} <br>\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"6\">\r\n                                <b>{{ 'List of gifted products' | translate }} :</b>\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of item.products_gift\">\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select *ngIf=\"data.lots\" nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\" nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date : 'dd/MM/yyyy'}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td>\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                            </td>\r\n                            <td>\r\n                                <nz-switch [(ngModel)]=\"data.choose\"\r\n                                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n<!-- modal chọn sản phẩm tặng type 7 -->\r\n<nz-modal  nzWidth=\"80vw\" [(nzVisible)]=\"showProductGiftType7\" nzTitle=\"{{'Chọn quà tặng'}}\" (nzOnCancel)=\"showProductGiftType7 = false\"\r\n    (nzOnOk)=\"showProductGiftType7 = false;handleAddGiftType7()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"product_gift_type7\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <th>{{'Lot number' | translate}}</th>\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                    <th>{{'Functions' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let item of basicTable.data\">\r\n                    <ng-container *ngIf=\"item.products_gift\">\r\n                        <tr>\r\n                            <td colspan=\"3\"><b>{{ item.name }}</b></td>\r\n                            <td colspan=\"3\" nzAlign=\"right\">{{'SL quà được chọn'}}: {{ item.promotions_maximum }}</td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of item.products_gift\">\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select *ngIf=\"data.lots\" nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"  nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp | date : 'dd/MM/yyyy'}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{ getUnit(data.units, data.ratio) }}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td>\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n                                <del>{{vhAlgorithm.vhcurrencyunit(data.price_origin)}}</del>\r\n                            </td>\r\n                            <td>\r\n                                <nz-switch [(ngModel)]=\"data.choose\"\r\n                                    [nzDisabled]=\"checkDisableChooseProductGift(item) && !data.choose\"></nz-switch>\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n    </ng-container>\r\n</nz-modal>\r\n\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"8\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- modal chọn lô/HSD cho combo-->\r\n<nz-modal  nzWidth=\"70vw\"  *ngIf=\"show_modal_select_lots_combo\" [nzFooter]=\"modalFooterEditUnitPrice3\"\r\n    [(nzVisible)]=\"show_modal_select_lots_combo\"\r\n    nzTitle=\"{{'Select lot number for products in combo' | translate}}: {{tempDetail.name}}\"\r\n    (nzOnCancel)=\"show_modal_select_lots_combo = false\" (nzOnOk)=\"handleChooseLotCombo()\">\r\n    <ng-container *nzModalContent>\r\n        <nz-table #basicTable [nzData]=\"tempDetail.combos\" [nzShowPagination]=\"false\" [nzScroll]=\"{ y: '400px' }\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{{\"Product name\" | translate}}</th>\r\n                    <th>{{'Lot number' | translate}}</th>\r\n                    <th>{{'Unit' | translate}}</th>\r\n                    <th>{{'Quantity' | translate}}</th>\r\n                    <th>{{'Unit price' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let data of basicTable.data\">\r\n                    <ng-container *ngIf=\"data.lots\">\r\n\r\n                        <tr>\r\n                            <td>{{ data.name }}</td>\r\n                            <td>\r\n                                <nz-select nzShowSearch nzPlaceHolder=\"{{'Select product batch' | translate}}\"\r\n                                    [(ngModel)]=\"data.id_lotproduct\">\r\n                                    <nz-option *ngFor=\"let element of data.lots\"  nzLabel=\"{{element.lot_number}} - HSD: {{element.date_exp}}\"\r\n                                        [nzValue]=\"element._id\"></nz-option>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td>{{ data.quantity }}</td>\r\n                            <td>\r\n                                {{vhAlgorithm.vhcurrencyunit(data.price) }}\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </tbody>\r\n        </nz-table>\r\n\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice3>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"show_modal_select_lots_combo = false\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLotCombo()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n<!-- --------------visible drawer info customer----------- -->\r\n<app-customer-profile *ngIf=\"visibleInfoCustomer\" [visibleInfoCustomer]=\"visibleInfoCustomer\" [infoSender]=\"customer\"\r\n    (closeInfoCustomer)=\"visibleInfoCustomer = false\"></app-customer-profile>\r\n\r\n<app-add-customer *ngIf=\"showDrawerAddCusomer\" [infoSender]=\"infoSender\" [showDrawerAddCusomer]=\"showDrawerAddCusomer\"\r\n    (closeAddCustomer)=\"closeAddCustomer($event)\"></app-add-customer>\r\n \r\n    \r\n<!-- MOdal giảm giá khác (coupon hoặc đổi điểm) -->\r\n<nz-modal [(nzVisible)]=\"showModalOtherDiscount\" nzTitle=\"{{'Other payment' | translate}}\" nzWidth=\"50vw\"\r\n(nzOnCancel)=\"showModalOtherDiscount = false\" nzCancelText=\"\" (nzOnOk)=\"handleOkOtherDiscount()\">\r\n<ng-container *nzModalContent>\r\n    <div nz-row class=\"center-all-content\">\r\n        <div nz-col nzSpan=\"6\">\r\n            {{\"Coupon\" | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" id=\"coupon\" style=\"display: flex;\">\r\n            <input #coupon nz-input placeholder=\"{{'Enter or scan code' | translate}}\"\r\n                (keyup.enter)=\"getDiscountOfCoupon(coupon.value)\" />\r\n            <button style=\"margin-left: 8px;\" nz-button nzType=\"primary\"\r\n                (click)=\"getDiscountOfCoupon(coupon.value)\">{{'Apply'| translate}}</button>\r\n        </div>\r\n        <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n            {{vhAlgorithm.vhcurrencyunit(invoice.getDiscountCoupon())}}\r\n        </div>\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"6\"></div>\r\n        <div nz-col nzSpan=\"18\">\r\n            <nz-tag *ngFor=\"let item of product_codes\" [nzColor]=\"'green'\" nzMode=\"closeable\"\r\n                (nzOnClose)=\"onCloseProductCode(item)\">{{item.code}}</nz-tag>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"customer_class?.payment.enable\">\r\n        <div nz-row class=\"center-all-content mt-8\">\r\n            <div nz-col nzSpan=\"6\">\r\n                {{'Accumulated points' | translate}}\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n                <nz-input-number [(ngModel)]=\"value_discount_point\" style=\"width: 100%;\" #point\r\n                    nzPlaceHolder=\"{{'Enter points' | translate}}\" [nzMin]=\"0\" [nzMax]=\"point_validity\" [nzStep]=\"1\"\r\n                    (keyup)=\"calculatePoint2Money(point['value'])\"></nz-input-number>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\" class=\"text-end\">\r\n                {{vhAlgorithm.vhcurrencyunit(invoice.getDiscountPoint())}}\r\n            </div>\r\n        </div>\r\n        <div nz-row class=\"mt-8\">\r\n            <div nz-col nzSpan=\"14\">\r\n                <label>{{'Conversion rate' | translate}}:\r\n                    {{customer_class.payment.points}} Điểm =\r\n                    {{vhAlgorithm.vhcurrencyunit_symbol(customer_class.payment.money)}}</label>\r\n            </div>\r\n            <div nz-col nzSpan=\"10\" class=\"text-end\">\r\n                {{'Current accumulated points' | translate}} : {{point_validity }}\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n\r\n    <div nz-row class=\"mt-8 beetween-all-content\">\r\n        <b>{{'Total discount' | translate}}</b>\r\n        <b>{{vhAlgorithm.vhcurrencyunit(invoice.getDiscountOther())}}</b>\r\n    </div>\r\n</ng-container>\r\n</nz-modal>","import { DatePipe } from '@angular/common';\r\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { filter } from 'rxjs/operators';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FacebookService } from '../../../services/facebook.service';\r\n\r\n@Component({\r\n  selector: 'app-conversation-dialog',\r\n  templateUrl: './conversation-dialog.component.html',\r\n  styleUrls: ['./conversation-dialog.component.scss']\r\n})\r\nexport class ConversationDialogComponent implements OnInit {\r\n  conversationId: string = ''\r\n  loading: boolean = false\r\n  @Input() fanpageSelected: any = {}\r\n  @Input() infoSender: any = {}\r\n  @Input() pushMessage: any = {}\r\n  messageList: Array<any> = []\r\n  dataPaging: any = {}\r\n  messageText: string = ''\r\n  loadingMoreMessage: boolean = false\r\n  listAttachment: Array<any> = []\r\n  loadingAttachment: boolean = false\r\n  searchProductList: boolean = false\r\n  productSelected: any = {}\r\n  expiresToSend: boolean = false\r\n  constructor(\r\n    private fbService: FacebookService,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private routes: ActivatedRoute,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private datePiPe: DatePipe\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.subscribeRouter()\r\n  }\r\n  //subscribe router\r\n  subscribeRouter() {\r\n    this.routes.queryParams.pipe(filter(params => params.conversationId))\r\n      .subscribe(val => {\r\n        this.conversationId = val.conversationId\r\n        this.conversationId != '' && this.getData()\r\n      }\r\n      );\r\n  }\r\n  ngOnChanges({ pushMessage }: SimpleChanges) {\r\n    if (pushMessage) {\r\n      this.messageList.push(pushMessage.currentValue)\r\n      setTimeout(() => {\r\n        this.scrollToBottom()\r\n      }, 300)\r\n    }\r\n  }\r\n  /**\r\n   * Lấy tin nhắn và lấy thông tin người gửi\r\n   */\r\n  getData() {\r\n    this.loading = true\r\n    this.fbService.getListMessageByConversationID(this.fanpageSelected['access_token'], this.conversationId).then((res: any) => {\r\n      if (res) {\r\n        let messages: Array<any> = []\r\n        this.dataPaging = res.messages.paging\r\n        res.messages.data.forEach(item => messages.push(this.fbService.getMessageDetailByMessageID(this.fanpageSelected['access_token'], item.id)))\r\n        Promise.all(messages).then((result: Array<any>) => {\r\n          this.messageList = result.map((item, index) => {\r\n            return { ...res.messages.data[index], ...item }\r\n          }).reverse()\r\n          this.getStickerMessage(this.messageList).then((resultSticker: Array<any>) => {\r\n            resultSticker.forEach(item => {\r\n              let index = this.messageList.findIndex((mess: any) => {\r\n                if (mess.shares && mess.shares.data && mess.shares.data[0] && mess.shares.data[0].id == item.data[0].id) return true\r\n                else return false\r\n              })\r\n              if (index >= 0) this.messageList[index].shares = item.data[0]\r\n            })\r\n            this.getLastMessageFromUserAndCheckTime(this.messageList)\r\n            this.loading = false\r\n            setTimeout(() => {\r\n              this.scrollToBottom()\r\n            }, 300)\r\n          }).catch(() => { this.showMessageError(); this.loading = false })\r\n\r\n        }).catch(() => { this.showMessageError(); this.loading = false })\r\n      }\r\n    }).catch(() => { this.showMessageError(); this.loading = false })\r\n  }\r\n  /**\r\n   * Hàm này để tìm ra tin nhắn lần cuối khách hàng đã nhắn\r\n   * Đem so sánh với hiện tại, nếu > 3 ngày thì k thể trả lời tin nhắn được nữa\r\n   * @param messageList \r\n   */\r\n  getLastMessageFromUserAndCheckTime(messageList: Array<any>) {\r\n    let lastMessage: any = messageList[messageList.length - 1]\r\n    this.expiresToSend = false\r\n    //3 ngày đổi ra milisecond = 24*60*60*1000*3 = 259200000\r\n    if (lastMessage.id) {\r\n      if ((Date.now() - 259200000) >= new Date(lastMessage.created_time).getTime()) this.expiresToSend = true\r\n    }\r\n    else this.expiresToSend = true\r\n  }\r\n  /**\r\n   * Lấy message sticker\r\n   * @param messageList \r\n   * @returns \r\n   */\r\n  getStickerMessage(messageList: Array<any>): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      let shares: Array<any> = []\r\n      messageList.forEach(item => {\r\n        if (item.shares) shares.push(this.fbService.getLinkShares(this.fanpageSelected['access_token'], item.id))\r\n      })\r\n      Promise.all(shares).then((res: any) => { resolve(res) }).catch(() => reject())\r\n    })\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('conversation-dialog') && document.getElementById('conversation-dialog-message')) {\r\n      let height = document.getElementById('conversation-dialog').clientHeight - (this.listAttachment.length > 0 ? 220 : 160)\r\n      document.getElementById('conversation-dialog-message').style.height = `${height}px`\r\n    }\r\n  }\r\n  public renderDate(date) {\r\n    return this.datePiPe.transform(date, 'dd/MM/YYYY HH:mm')\r\n  }\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n  /**\r\n   * Tự động scroll xuống dưới cùng\r\n   */\r\n  scrollToBottom() {\r\n    let element = document.getElementById('conversation-dialog-message')\r\n    element.scrollTop = element.scrollHeight\r\n  }\r\n  /**\r\n   * Sự kiện typing bất kì phím nào, bắt sự kiện enter để send message\r\n   * @param event \r\n   */\r\n  keyPress(event: KeyboardEvent) {\r\n    const keyCode = event.which || event.keyCode;\r\n    if (keyCode == 13 && !event.shiftKey) {\r\n      event.preventDefault()\r\n      this.sendAllMessage()\r\n    }\r\n  }\r\n  sendAllMessage() {\r\n    if (this.messageText) {\r\n      let body = {\r\n        recipient: {\r\n          id: this.infoSender['id']\r\n        },\r\n        message: {\r\n          text: this.messageText\r\n        },\r\n        tag: \"ACCOUNT_UPDATE\",\r\n        messaging_type: \"MESSAGE_TAG\",\r\n      }\r\n      this.messageList.push({\r\n        id: '',\r\n        from: this.fanpageSelected,\r\n        to: { data: [this.infoSender] },\r\n        message: this.messageText,\r\n        created_time: new Date().toISOString(),\r\n      })\r\n      this.messageText = ''\r\n      setTimeout(() => {\r\n        this.scrollToBottom()\r\n      }, 100)\r\n      this.fbService.sendMessageToUserTypeText(this.fanpageSelected['access_token'], body).then(res => {\r\n        if (res.error) {\r\n          this.vhComponent.alertMessageDesktop('error', res.error?.message);\r\n          this.messageList.splice(this.messageList.length - 1, 1)\r\n        }\r\n        else this.messageList[this.messageList.length - 1].id = res.message_id\r\n        if (this.listAttachment.length > 0) this.sendMessageImage()\r\n      }).catch(err => console.error(err))\r\n    } else if (!this.messageText && this.listAttachment.length > 0) this.sendMessageImage()\r\n  }\r\n  /**\r\n   * Gửi hình ảnh\r\n   */\r\n  sendMessageImage() {\r\n    this.listAttachment.forEach(item => {\r\n      this.messageList.push({\r\n        id: '',\r\n        from: this.fanpageSelected,\r\n        to: { data: [this.infoSender] },\r\n        message: '',\r\n        created_time: new Date().toISOString(),\r\n        attachments: {\r\n          data: [{ image_data: { preview_url: item.buffer, url: item.buffer } }]\r\n        }\r\n      })\r\n    })\r\n    let listAttachment = [...this.listAttachment]\r\n    this.listAttachment = []\r\n    let processs: Array<any> = []\r\n    for (let item of listAttachment)\r\n      processs.push(this.fbService.sendImageFromFile(this.fanpageSelected['access_token'], this.infoSender['id'], item.attachment_id))\r\n    Promise.all(processs).then((res: Array<any>) => {\r\n      let messages: Array<any> = []\r\n      res.forEach(item => messages.push(this.fbService.getMessageDetailByMessageID(this.fanpageSelected['access_token'], item.message_id)))\r\n      Promise.all(messages).then((result: Array<any>) => {\r\n        let length = this.messageList.length\r\n        result.forEach((mess: any, index: number) => {\r\n          this.messageList[length - result.length + index] = mess\r\n        })\r\n      }).catch(() => { this.showMessageError(); })\r\n    }).catch(() => this.vhComponent.alertMessageDesktop('error', \"Xảy ra khi gửi hình ảnh, vui lòng thử lại\"))\r\n  }\r\n\r\n  appendEmoji(emoji: string) {\r\n    this.messageText += emoji\r\n  }\r\n  loadMoreMessage() {\r\n    this.loadingMoreMessage = true;\r\n    this.fbService.getNextPaging(this.dataPaging.next).then(res => {\r\n      if (res.error) {\r\n        this.showMessageError()\r\n        this.loadingMoreMessage = false\r\n      } else {\r\n        this.dataPaging = res.paging\r\n        let messages: Array<any> = []\r\n        res.data.forEach(item => messages.push(this.fbService.getMessageDetailByMessageID(this.fanpageSelected['access_token'], item.id)))\r\n        Promise.all(messages).then((result: Array<any>) => {\r\n          let message = result.map((item, index) => {\r\n            return { ...res.data[index], ...item }\r\n          }).reverse()\r\n          this.getStickerMessage(message).then((resultSticker: Array<any>) => {\r\n            resultSticker.forEach(item => {\r\n              let index = message.findIndex((mess: any) => {\r\n                if (mess.shares && mess.shares.data && mess.shares.data[0] && mess.shares.data[0].id == item.data[0].id) return true\r\n                else return false\r\n              })\r\n              if (index >= 0) message[index].shares = item.data[0]\r\n            })\r\n            this.messageList = message.concat(this.messageList)\r\n            this.loadingMoreMessage = false\r\n          }).catch(() => { this.showMessageError(); this.loading = false })\r\n          // this.messageList = mess.concat(this.messageList)\r\n          // this.loadingMoreMessage = false\r\n        }).catch(() => { this.showMessageError(); this.loadingMoreMessage = false })\r\n      }\r\n    }).catch(() => { this.showMessageError(); this.loadingMoreMessage = false })\r\n  }\r\n  /**\r\n   * Upload hình ảnh\r\n   * @param event \r\n   */\r\n  onUploadImage(event: any) {\r\n    let file = event.target.files[0]\r\n    let fileBase64 = event.target.files[0]\r\n    if (fileBase64) {\r\n      let readerBase64 = new FileReader();\r\n      readerBase64.readAsDataURL(fileBase64)\r\n      readerBase64.onload = (event: any) => {\r\n        this.listAttachment.push({ attachment_id: '', buffer: readerBase64.result, loadingAttachment: true })\r\n        let reader = new FileReader();\r\n        reader.readAsArrayBuffer(file);\r\n        reader.onload = async (e: any) => {\r\n          let arrayBuffer = e.target.result;\r\n          let blob = new Blob([arrayBuffer], { type: file.type });\r\n          let data = new FormData();\r\n          data.append('message', JSON.stringify({ \"attachment\": { \"type\": \"image\", \"payload\": { \"is_reusable\": true } } }));\r\n          data.append('filedata', blob);\r\n          this.fbService.updateImageToSendMessageAndReceiveAttachment(this.fanpageSelected['access_token'], data).then(res => {\r\n            if (res.error) {\r\n              this.listAttachment.splice(this.listAttachment.length - 1, 1)\r\n              this.vhComponent.alertMessageDesktop('error', res.error.message);\r\n            } else {\r\n              this.listAttachment[this.listAttachment.length - 1].attachment_id = res.attachment_id\r\n              this.listAttachment[this.listAttachment.length - 1].loadingAttachment = false\r\n            }\r\n          })\r\n        };\r\n      }\r\n    }\r\n  }\r\n  updateImage() {\r\n    if (this.listAttachment.length > 0 && this.listAttachment[this.listAttachment.length - 1].loadingAttachment == true)\r\n      this.vhComponent.alertMessageDesktop('warning', 'Đang tải ảnh lên, vui lòng chờ trong giây lát để tải ảnh tiếp theo')\r\n    else\r\n      document.getElementById('image-message').click()\r\n  }\r\n\r\n  removeImage(image: any, index: number) {\r\n    this.listAttachment.splice(index, 1)\r\n  }\r\n  showMessageError() {\r\n    this.vhComponent.alertMessageDesktop('error', \"Xảy ra lỗi khi đồng bộ, vui lòng thử lại\")\r\n  }\r\n  isVisibleSendMessage: boolean = false\r\n  closeSearch(data) {\r\n    if (data) {\r\n      this.productSelected = data\r\n      this.isVisibleSendMessage = true\r\n    }\r\n    this.searchProductList = false;\r\n  }\r\n  sendProductAndPrice() {\r\n    this.messageText = `Tên sản phẩm: ${this.productSelected['name']}, Giá : ${this.vhAlgorithm.vhcurrencyunit_symbol(this.productSelected['price'])}`\r\n    this.isVisibleSendMessage = false\r\n  }\r\n  sendMessageUrl(all?) {\r\n    this.messageList.push({\r\n      id: '',\r\n      from: this.fanpageSelected,\r\n      to: { data: [this.infoSender] },\r\n      message: '',\r\n      created_time: new Date().toISOString(),\r\n      attachments: {\r\n        data: [{ image_data: { preview_url: this.productSelected['img'], url: this.productSelected['img'] } }]\r\n      }\r\n    })\r\n    this.isVisibleSendMessage = false\r\n    setTimeout(() => {\r\n      this.scrollToBottom()\r\n    }, 100)\r\n    this.fbService.sendImageWithUrl(this.fanpageSelected['access_token'], this.productSelected['img'], this.infoSender['id']).then(res => {\r\n      if (res.error) {\r\n        this.vhComponent.alertMessageDesktop('error', \"Xảy ra khi gửi hình ảnh, vui lòng thử lại\")\r\n        this.messageList.splice(this.messageList.length - 1, 1)\r\n      } else this.messageList[this.messageList.length - 1].id = res['message_id']\r\n\r\n      if (all) {\r\n        this.sendProductAndPrice()\r\n        this.sendAllMessage()\r\n      }\r\n    })\r\n  }\r\n  gotoInbox() {\r\n    window.open(`https://www.facebook.com/${this.fanpageSelected.id}/inbox`, '_blank')\r\n  }\r\n}\r\n","<div class=\"layout\" id=\"conversation-dialog\">\r\n    <div class=\"facebook-dialog\" [ngClass]=\"{'have-image-upload' : listAttachment.length>0}\">\r\n        <div class=\"d-flex header-detail\">\r\n            <div class=\"header-detail-left\">\r\n                <div class=\"user d-flex\">\r\n                    <img src=\"{{infoSender['profile_pic']}}\" alt=\"avatar\">\r\n                    <div class=\"user-name\"><b class=\"user-name\">{{infoSender['name']}}</b>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"header-detail-right\">\r\n                <i class=\"icon\" nzTooltipTitle=\"Chặn người dùng\" nzTooltipPlacement=\"top\" nz-tooltip nz-icon\r\n                    nzType=\"stop\" nzTheme=\"outline\"></i>\r\n                <i (click)=\"gotoInbox()\" class=\"icon\" nzTooltipTitle=\"Chuyển sang trang tin nhắn\"\r\n                    nzTooltipPlacement=\"top\" nz-tooltip nz-icon nzType=\"facebook\" nzTheme=\"outline\"></i>\r\n                <!-- <i class=\"icon\" nzTooltipTitle=\"Đánh dấu chưa đọc\" nzTooltipPlacement=\"top\" nz-tooltip nz-icon\r\n                    nzType=\"mail\" nzTheme=\"outline\"></i> -->\r\n                <i (click)=\"getData()\" class=\"icon\" nzTooltipTitle=\"Đồng bộ lại tin nhắn\" nzTooltipPlacement=\"top\"\r\n                    nz-tooltip nz-icon nzType=\"sync\" nzTheme=\"outline\"></i>\r\n            </div>\r\n        </div>\r\n        <div class=\"dialog-message ant-table-body\" id=\"conversation-dialog-message\">\r\n            <nz-skeleton [nzActive]=\"true\" [nzLoading]=\"loading\">\r\n                <div *ngIf=\"dataPaging.next\" (click)=\"loadMoreMessage()\" class=\"loading-more-message\"><i nz-icon\r\n                        [nzType]=\"'sync'\" [nzSpin]=\"loadingMoreMessage\"></i>Tải thêm tin nhắn</div>\r\n                <div *ngFor=\"let message of messageList;trackBy:trackByFn\">\r\n                    <div class=\"d-flex dialog-message-content\"\r\n                        *ngIf=\"message.from?.id != fanpageSelected.id;else isFormOwner\">\r\n                        <div class=\"left\">\r\n                            <img class=\"user-image\" src=\"{{infoSender['profile_pic']}}\" alt=\"avatar\">\r\n                            <div>\r\n                                <img nz-tooltip [nzTooltipTitle]=\"renderDate(message.created_time)\"\r\n                                    nzTooltipPlacement=\"right\" width=\"100px\" height=\"100px\" *ngIf=\"message.shares\"\r\n                                    [src]=\"message.shares.link\" alt=\"\">\r\n                                <span *ngIf=\"!message.attachments && !message.shares\" class=\"text\"\r\n                                    [nzTooltipTitle]=\"renderDate(message.created_time)\" nzTooltipPlacement=\"right\"\r\n                                    nz-tooltip>{{message.message}}\r\n                                </span>\r\n                                <ng-container *ngIf=\"message.attachments && !message.shares\">\r\n                                    <div nz-row nzGutter=\"16\">\r\n                                        <div nz-col nzSpan=\"12\" class=\"image-message\"\r\n                                            [nzTooltipTitle]=\"renderDate(message.created_time)\"\r\n                                            nzTooltipPlacement=\"right\" nz-tooltip\r\n                                            *ngFor=\"let item of message.attachments?.data\">\r\n                                            <a target=\"_blank\" [href]=\"item.image_data?.preview_url\">\r\n                                                <img [src]=\"item.image_data?.url\" alt=\"\">\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                </ng-container>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right\"></div>\r\n                    </div>\r\n                    <ng-template #isFormOwner>\r\n                        <div class=\"d-flex dialog-message-content is-from-page\">\r\n                            <div class=\"right\"></div>\r\n                            <div class=\"left\" [ngClass]=\"{'loading' : message.id == ''}\">\r\n                                <img nz-tooltip [nzTooltipTitle]=\"renderDate(message.created_time)\"\r\n                                    nzTooltipPlacement=\"left\" width=\"100px\" height=\"100px\" *ngIf=\"message.shares\"\r\n                                    [src]=\"message.shares.link\" alt=\"\">\r\n                                <span *ngIf=\"!message.attachments && !message.shares\"\r\n                                    [nzTooltipTitle]=\"renderDate(message.created_time)\" nzTooltipPlacement=\"left\"\r\n                                    nz-tooltip class=\"text\">{{message.message}}</span>\r\n                                <ng-container *ngIf=\"message.attachments\">\r\n                                    <div nz-row nzGutter=\"16\" class=\"d-flex-row-reverse\">\r\n                                        <div nz-col nzSpan=\"12\" class=\"image-message\"\r\n                                            [nzTooltipTitle]=\"renderDate(message.created_time)\"\r\n                                            nzTooltipPlacement=\"left\" nz-tooltip\r\n                                            *ngFor=\"let item of message.attachments?.data\">\r\n                                            <a target=\"_blank\" [href]=\"item.image_data?.preview_url\">\r\n                                                <img [src]=\"item.image_data?.url\" alt=\"\">\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                </ng-container>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n                </div>\r\n            </nz-skeleton>\r\n        </div>\r\n        <div *ngIf=\"!expiresToSend;else expiresToSendTemplate\" class=\"reply-inbox\"\r\n            [ngClass]=\"{'have-image-upload' : listAttachment.length>0}\">\r\n            <div class=\"reply-inbox-upload\" [ngClass]=\"{'d-none' : listAttachment.length==0}\" nz-row nzGutter=\"16\">\r\n                <div class=\"reply-inbox-upload-relative\" nz-col nzSpan=\"4\"\r\n                    *ngFor=\"let item of listAttachment;index as i\">\r\n                    <img width=\"100%\" height=\"50px\" [src]=\"item.buffer\" alt=\"\">\r\n                    <i (click)=\"removeImage(item,i)\" class=\"icon-remove\" nz-icon nzType=\"close-circle\"\r\n                        nzTheme=\"outline\"></i>\r\n                    <nz-spin [nzSpinning]=\"item.loadingAttachment\"></nz-spin>\r\n                </div>\r\n            </div>\r\n            <div class=\"reply-inbox-text\">\r\n                <textarea [(ngModel)]=\"messageText\" (keypress)=\"keyPress($event)\"\r\n                    [nzAutosize]=\"{ minRows: 2, maxRows: 2 }\"\r\n                    placeholder=\"Nhập tin nhắn và nhấn enter để gửi, nhấn shift + enter để xuống dòng\" rows=\"2\"\r\n                    nz-input></textarea>\r\n            </div>\r\n            <div class=\"reply-inbox-icon\">\r\n                <div class=\"reply-inbox-icon-action\">\r\n                    <i class=\"icon\" nzTooltipTrigger=\"click\" [nzTooltipTitle]=\"listEmoil\" nzTooltipPlacement=\"top\"\r\n                        nz-tooltip nz-icon nzType=\"smile\" nzTheme=\"outline\"></i>\r\n                    <i (click)=\"updateImage()\" class=\"icon\" nzTooltipTitle=\"Tải hình\" nzTooltipPlacement=\"top\"\r\n                        nz-tooltip nz-icon nzType=\"camera\" nzTheme=\"outline\"></i>\r\n                    <i (click)=\"searchProductList = true\" class=\"icon\" nzTooltipTitle=\"Sản phẩm\"\r\n                        nzTooltipPlacement=\"top\" nz-tooltip nz-icon nzType=\"shopping-cart\" nzTheme=\"outline\"></i>\r\n                    <input id=\"image-message\" (change)=\"onUploadImage($event)\" style=\"display: none;\" type=\"file\">\r\n                </div>\r\n                <div class=\"reply-inbox-icon-send\">\r\n                    <button nz-button [disabled]=\"messageText ==''\" (click)=\"sendAllMessage()\"><span>Gửi</span><i\r\n                            nz-icon nzType=\"send\" nzTheme=\"outline\"></i></button>\r\n                </div>\r\n                <ng-template #listEmoil let-thing>\r\n                    <div class=\"list-emoji\">\r\n                        <span (click)=\"appendEmoji('😊')\">😊</span>\r\n                        <span (click)=\"appendEmoji('😆')\">😆</span>\r\n                        <span (click)=\"appendEmoji('😃')\">😃</span>\r\n                        <span (click)=\"appendEmoji('😁')\">😁</span>\r\n                        <span (click)=\"appendEmoji('😅')\">😅</span>\r\n                        <span (click)=\"appendEmoji('😂')\">😂</span>\r\n                        <span (click)=\"appendEmoji('😊')\">😊</span>\r\n                        <span (click)=\"appendEmoji('😇')\">😇</span>\r\n                        <span (click)=\"appendEmoji('🙂')\">🙂</span>\r\n                        <span (click)=\"appendEmoji('🙃')\">🙃</span>\r\n                        <span (click)=\"appendEmoji('😉')\">😉</span>\r\n                        <span (click)=\"appendEmoji('😌')\">😌</span>\r\n                        <span (click)=\"appendEmoji('😍')\">😍</span>\r\n                        <span (click)=\"appendEmoji('🥰')\">🥰</span>\r\n                        <span (click)=\"appendEmoji('😘')\">😘</span>\r\n                        <span (click)=\"appendEmoji('😗')\">😗</span>\r\n                        <span (click)=\"appendEmoji('😙')\">😙</span>\r\n                        <span (click)=\"appendEmoji('😋')\">😋</span>\r\n                        <span (click)=\"appendEmoji('😛')\">😛</span>\r\n                        <span (click)=\"appendEmoji('🤪')\">🤪</span>\r\n                        <span (click)=\"appendEmoji('🧐')\">🧐</span>\r\n                        <span (click)=\"appendEmoji('🤓')\">🤓</span>\r\n                        <span (click)=\"appendEmoji('😎')\">😎</span>\r\n                        <span (click)=\"appendEmoji('🤩')\">🤩</span>\r\n                        <span (click)=\"appendEmoji('🥳')\">🥳</span>\r\n                        <span (click)=\"appendEmoji('😏')\">😏</span>\r\n                        <span (click)=\"appendEmoji('😒')\">😒</span>\r\n                        <span (click)=\"appendEmoji('😞')\">😞</span>\r\n                        <span (click)=\"appendEmoji('😟')\">😟</span>\r\n                        <span (click)=\"appendEmoji('😕')\">😕</span>\r\n                        <span (click)=\"appendEmoji('🙁')\">🙁</span>\r\n                        <span (click)=\"appendEmoji('☹️')\">☹️</span>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n        <ng-template #expiresToSendTemplate>\r\n            <div class=\"reply-inbox d-flex\">\r\n                <div class=\"warning\">\r\n                    <i class=\"icon-warning\" nz-icon nzType=\"warning\" nzTheme=\"outline\"></i> Đã hết thời hạn gửi tin nhắn\r\n                    cho\r\n                    khách hàng không tương tác với trang theo <a\r\n                        href=\"https://developers.facebook.com/docs/messenger-platform/send-messages/message-tags/\">điều\r\n                        khoản của Facebook</a>.\r\n                    Bạn có thể sử dụng Facebook để phản hồi cho khách hàng. <b><a (click)=\"gotoInbox()\">Xem hội thoại\r\n                            trên\r\n                            Facebook</a></b>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </div>\r\n</div>\r\n<!--Search product-->\r\n<app-search-product *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\" [default_price_type]=\"1\"\r\n    (closeSearchProductList)=\"closeSearch($event)\">\r\n</app-search-product>\r\n<nz-modal [nzWidth]=\"520\" [(nzVisible)]=\"isVisibleSendMessage\" nzTitle=\"Gửi nhanh sản phẩm\"\r\n    (nzOnCancel)=\"isVisibleSendMessage = false\" [nzFooter]=\"null\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row class=\"quick-send-product\">\r\n            <div class=\"text-center\" nz-col nzSpan=\"24\">\r\n                <img width=\"150\" height=\"150\"\r\n                    [src]=\"productSelected.img || './assets/icon/management/image_default.svg'\" alt=\"\">\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b>{{'Product name' | translate}}</b> : {{productSelected.name}}</div>\r\n                <div><b>{{'Selling price' | translate}}</b> : {{vhAlgorithm.vhcurrencyunit(productSelected.price)}}\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"right-all-content\">\r\n                <button (click)=\"isVisibleSendMessage=false\" class=\"width-fit-content\" nz-button>\r\n                    {{'Cancel' | translate}}\r\n                </button>\r\n                <button (click)=\"sendProductAndPrice()\" class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send product name + price' | translate}}\r\n                </button>\r\n                <button [disabled]=\"!productSelected['img']\" (click)=\"sendMessageUrl()\"\r\n                    class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send image' | translate}}\r\n                </button>\r\n                <button (click)=\"sendMessageUrl(true)\" [disabled]=\"!productSelected['img']\"\r\n                    class=\"btn-hover width-fit-content\" nz-button>\r\n                    {{'Send all' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nz-modal>","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { filter } from 'rxjs/operators';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FacebookService } from '../../../services/facebook.service';\r\n\r\n@Component({\r\n  selector: 'app-conversation-inbox',\r\n  templateUrl: './conversation-inbox.component.html',\r\n  styleUrls: ['./conversation-inbox.component.scss']\r\n})\r\nexport class ConversationInboxComponent implements OnInit {\r\n  @Input() listFanpage: Array<any> = [];\r\n  @Input() newMessage: any = {}\r\n  @Input() newComment: any = {}\r\n  @Output() changeFanpageSelected = new EventEmitter<any>()\r\n  @Output() changeInfoSender = new EventEmitter<any>()\r\n  @Output() emitNewMessageFB = new EventEmitter<any>()\r\n  fanpageSelected: any = {}\r\n  listSubFanpage: Array<any> = [];\r\n  listConversation: Array<any> = []\r\n  listSubConversation: any = []\r\n  listCommentPost: any = []\r\n  listSubCommentPost: any = []\r\n  listUserComment: Array<any> = []\r\n  loading: boolean = false\r\n  conversationId = ''\r\n  commentId = ''\r\n  dataPagingMess: any = {}\r\n  dataPagingPost: any = {}\r\n  searchValue: string = ''\r\n  selectedIndex: number = 0\r\n  loadingMoreMessage: boolean = false\r\n  constructor(\r\n    private fbService: FacebookService,\r\n    private vhComponent: VhComponent,\r\n    private router: Router,\r\n    private routes: ActivatedRoute,\r\n    private vhAlgorithm: VhAlgorithm,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.fanpageSelected = this.listFanpage[0]\r\n    this.listSubFanpage = [...this.listFanpage]\r\n    this.clearPageSelected()\r\n    this.getData()\r\n    this.subscribeRouter()\r\n  }\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.newMessage?.currentValue[0]) {\r\n      let data = changes.newMessage.currentValue[0]\r\n      //tìm index xem có trong list conversation chưa\r\n      let index = this.listConversation.findIndex(item => item.participants?.data[0]?.id == data.sender?.id)\r\n      if (index >= 0) {\r\n        let conversation = { ...this.listConversation[index] }\r\n        this.listConversation.splice(index, 1)\r\n        conversation.unread_count++\r\n        conversation.messages?.data?.unshift({ ...data.message, webhook_send: true, message: data.message.text || '', created_time: new Date().toISOString() })\r\n        this.listConversation.unshift({ ...conversation, can_reply: true })\r\n        this.listSubConversation = [...this.listConversation]\r\n        //bắn message qua chi tiết tin nhắn\r\n        if (this.listConversation[0].id == this.routes.snapshot.queryParamMap.get('conversationId'))\r\n          this.emitNewMessage(changes.newMessage.currentValue[0])\r\n      } else this.getNewConversation(changes.newMessage.currentValue[0])\r\n    }\r\n    if (changes.newComment?.currentValue?.field == 'feed') {\r\n      let newCommentFB = changes.newComment.currentValue.value\r\n      //Trường hợp là comment cha, không phải reply comment\r\n      if (newCommentFB.post_id == newCommentFB.parent_id) {\r\n        let user = this.listUserComment.find(item => item.id == newCommentFB.from?.id)\r\n        if (user) {\r\n          this.listCommentPost.unshift(this.renderDataNewComment(newCommentFB, user))\r\n          this.listSubCommentPost = [...this.listCommentPost]\r\n        } else {\r\n          this.fbService.getInfoUser(newCommentFB.from.id, this.fanpageSelected['access_token']).then(res => {\r\n            if (!res.error) {\r\n              this.listUserComment.push(res)\r\n              this.renderDataNewComment(newCommentFB, res)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //bắn message qua chi tiết tin nhắn\r\n  emitNewMessage(messageInfo: any) {\r\n    let data: any = {\r\n      id: messageInfo.message.mid,\r\n      from: { id: messageInfo.sender?.id },\r\n      created_time: new Date().toISOString(),\r\n      message: messageInfo.message.text,\r\n      to: { data: [{ id: messageInfo?.recipient.id }] }\r\n    }\r\n    if (messageInfo.message?.attachments)\r\n      data = {\r\n        ...data,\r\n        attachments: {\r\n          data: [{ id: '', type: messageInfo.message?.attachments[0]?.type, image_data: { url: messageInfo.message?.attachments[0]?.payload?.url, preview_url: messageInfo.message?.attachments[0]?.payload?.url } }]\r\n        }\r\n      }\r\n    this.emitNewMessageFB.emit(data)\r\n  }\r\n  //subscribe router\r\n  subscribeRouter() {\r\n    this.routes.queryParams.pipe(filter(params => (params.conversationId || params.commentId || params.deleteCommentID)))\r\n      .subscribe(val => {\r\n        if (val.conversationId) this.conversationId = val.conversationId\r\n        else if (val.commentId) this.commentId = val.commentId\r\n        else if (val.deleteCommentID) this.deleteCommentInList(val.deleteCommentID)\r\n      }\r\n      );\r\n  }\r\n  deleteCommentInList(id: string) {\r\n    this.listCommentPost.splice(this.listCommentPost.findIndex(item => item.id == id), 1)\r\n    this.changeInfoSender.emit({ id: '' })\r\n    this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'])\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('conversation-inbox') && document.querySelector('.facebook-tabs') && document.querySelector('.facebook-header-user') && document.getElementById('block-conversation-inbox')) {\r\n      let height = document.getElementById('conversation-inbox').clientHeight - document.querySelector('.facebook-tabs').clientHeight\r\n        - document.querySelector('.facebook-header-user').clientHeight - 32\r\n      document.getElementById('block-conversation-inbox').style.height = `${height}px`\r\n    }\r\n  }\r\n  getData() {\r\n    this.loading = true\r\n    //bước đầu tiên là lấy danh sách các cuộc hội thoại\r\n    this.fbService.getListConversationID(this.fanpageSelected['access_token'], this.fanpageSelected['id']).then(res => {\r\n      this.listConversation = res.data;\r\n      this.dataPagingMess = res.paging\r\n      let conversation: Array<any> = []\r\n      this.listConversation.forEach(item => {\r\n        //bước 2 đối với mỗi cuộc hội thoại phải get danh sách nhắn tin\r\n        conversation.push(this.fbService.getListMessageByConversationID(this.fanpageSelected['access_token'], item.id))\r\n      })\r\n      Promise.all(conversation).then((result: Array<any>) => {\r\n        this.listConversation = result\r\n        // //bước 3 đối với mỗi tn phải lấy ra tn đầu tiên để hiển thị và get thông tin người gửi\r\n        let messages: Array<any> = []\r\n        this.listConversation.forEach((item: any) => {\r\n          messages.push(this.fbService.getInfoUserByPSID(item.participants.data[0].id, this.fanpageSelected['access_token']))\r\n        })\r\n        Promise.all(messages).then((results: any) => {\r\n          \r\n          for (let index in results) {\r\n            if (!results[index].error)\r\n              this.listConversation[index].participants.data[0].profile_pic = results[index].profile_pic\r\n            else this.listConversation[index].participants.data[0].profile_pic = 'assets/icon/no-avatar.svg'\r\n            this.listConversation[index].senderName = this.listConversation[index].participants.data[0].name\r\n          }\r\n          let firstMessage: Array<any> = []\r\n          this.listConversation.forEach((item: any) => {\r\n            firstMessage.push(this.fbService.getMessageDetailByMessageID(this.fanpageSelected['access_token'], item.messages?.data[0]?.id))\r\n          })\r\n          this.listSubConversation = this.listConversation\r\n          Promise.all(firstMessage).then((results2: any) => {\r\n            for (let index in results2) {\r\n              if (!results2[index].error)\r\n                this.listConversation[index].messages.data[0] = { ...this.listConversation[index].messages.data[0], ...results2[index] }\r\n            }\r\n            //Bước 4 : lấy danh sách các bài post về\r\n            this.fbService.getAllPostInPageByID(this.fanpageSelected['access_token'], this.fanpageSelected['id']).then(result3 => {\r\n              this.dataPagingPost = result3.paging\r\n              let processPost: Array<any> = []\r\n              //Bước 5: lấy danh sách từng comment dựa trên mỗi bài post\r\n              result3.data.forEach(item => processPost.push(this.fbService.getCommentByPostID(this.fanpageSelected['access_token'], item.id)))\r\n              Promise.all(processPost).then((result4: Array<any>) => {\r\n                let commentArray: Array<any> = []\r\n                let detailCommentArray: Array<any> = []\r\n                result4.forEach((item, index) => {\r\n                  item.data.forEach(data => {\r\n                    commentArray.push({\r\n                      id_post: result3.data[index].id,\r\n                      ...data\r\n                    })\r\n                    detailCommentArray.push(this.fbService.getCommentByID(this.fanpageSelected['access_token'], data.id))\r\n                  })\r\n                })\r\n                //Bước 6 Lấy chi tiết comment\r\n                Promise.all(detailCommentArray).then((result5: Array<any>) => {\r\n                  this.listCommentPost = result5.map((item, index) => {\r\n                    return { ...commentArray[index], ...item }\r\n                  })\r\n                  Promise.all(this.getListIDUser(this.listCommentPost)).then((result6: Array<any>) => {\r\n                    this.listUserComment = result6\r\n                    this.renderListUserIntoPost(result6)\r\n                    this.loading = false\r\n                  }).catch(() => { this.messageError(); this.loading = false })\r\n\r\n                }).catch(() => { this.messageError(); this.loading = false })\r\n\r\n              }).catch(() => { this.messageError(); this.loading = false })\r\n            })\r\n          }).catch(() => { this.messageError(); this.loading = false })\r\n        }).catch(() => { this.messageError(); this.loading = false })\r\n      }).catch(() => { this.messageError(); this.loading = false })\r\n    }).catch(() => { this.messageError(); this.loading = false })\r\n  }\r\n  /**\r\n   * Thay đổi page quản lý\r\n   */\r\n  changePage(page) {\r\n    this.fanpageSelected = page\r\n    this.changeFanpageSelected.emit(this.fanpageSelected)\r\n    this.clearPageSelected()\r\n    this.getData()\r\n  }\r\n  /**\r\n   * Xóa page này ra khỏi list chọn, vì page này là page hiện hành\r\n   */\r\n  clearPageSelected() {\r\n    let listTemp = [...this.listSubFanpage]\r\n    listTemp.splice(listTemp.findIndex(item => item.id == this.fanpageSelected.id), 1)\r\n    this.listFanpage = [...listTemp]\r\n  }\r\n  logout() {\r\n    this.fbService.setStatusLogin(false)\r\n    this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook'])\r\n  }\r\n  viewMessageDetail(conversation) {\r\n    this.changeInfoSender.emit(conversation.participants?.data[0])\r\n    this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'],\r\n      { queryParams: { conversationId: conversation.id } }\r\n    )\r\n  }\r\n  viewCommentDetail(comment) {\r\n    let dataUser = {\r\n      id: comment.participants?.data[0].id,\r\n      name: comment.participants?.data[0].name,\r\n      profile_pic: comment.participants?.data[0].picture?.data?.url\r\n    }\r\n    this.changeInfoSender.emit(dataUser)\r\n    this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'],\r\n      { queryParams: { commentId: comment.id } }\r\n    )\r\n  }\r\n  searchUser(value: string) {\r\n    let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n    if (this.selectedIndex == 0)\r\n      this.listConversation = this.vhAlgorithm.searchList(val, this.listSubConversation, ['senderName'])\r\n    else this.listCommentPost = this.vhAlgorithm.searchList(val, this.listSubCommentPost, ['senderName'])\r\n  }\r\n  /**\r\n   * Hàm này trả về danh sách những id_user đã comment\r\n   * @param listComment \r\n   */\r\n  getListIDUser(listComment: Array<any>) {\r\n    let arrayID = []\r\n    let listArrayReturn = []\r\n    listComment.forEach(item => {\r\n      if (item.from && this.fanpageSelected.id != item.from.id && !arrayID.includes(item.from.id)) {\r\n        arrayID.push(item.from.id)\r\n        listArrayReturn.push(this.fbService.getInfoUser(item.from.id, this.fanpageSelected['access_token']))\r\n      }\r\n    })\r\n    return listArrayReturn\r\n  }\r\n\r\n\r\n  messageError() {\r\n    this.vhComponent.alertMessageDesktop('error', 'Xảy ra lỗi trong lỗi quá trình đồng bộ')\r\n  }\r\n  renderListUserIntoPost(listUser: Array<any>) {\r\n    this.listCommentPost.forEach(item => {\r\n      if (item.from && item.from.id == this.fanpageSelected.id) {\r\n        item.senderName = this.fanpageSelected.name\r\n        item.participants = { data: [] }\r\n        item.participants.data[0] = {\r\n          id: this.fanpageSelected.id,\r\n          name: this.fanpageSelected.name,\r\n          picture: {\r\n            data: { url: this.fanpageSelected.image_url }\r\n          }\r\n        }\r\n      } else if (item.from && item.from.id != this.fanpageSelected.id) {\r\n        let user = listUser.find(userInfo => userInfo.id == item.from.id)\r\n        item.participants = { data: [] }\r\n        item.participants.data[0] = user\r\n        item.senderName = user.name\r\n      }\r\n    })\r\n    this.listCommentPost = this.vhAlgorithm.sortDatebyDESC(this.listCommentPost, 'created_time')\r\n    this.listSubCommentPost = [...this.listCommentPost]\r\n  }\r\n  trackByFnChat(index, item) {\r\n    return index;\r\n  }\r\n  getNewConversation(data) {\r\n    //lấy về danh sách hội thoại sau đó ra cuộc hội thoại đầu tiên\r\n    this.fbService.getListConversationID(this.fanpageSelected['access_token'], this.fanpageSelected['id']).then((result1) => {\r\n      if (!result1.error) {\r\n        let newConversation = result1.data[0]\r\n        //lấy danh sách tin nhắn của cuộc hội thoại này về\r\n        this.fbService.getListMessageByConversationID(this.fanpageSelected['access_token'], newConversation.id).then((result2: any) => {\r\n          if (!result2.error) {\r\n            newConversation = result2\r\n            //lấy thông tin người nhắn về\r\n            this.fbService.getInfoUserByPSID(result2.participants.data[0].id, this.fanpageSelected['access_token']).then((result3: any) => {\r\n              if (!result3.error)\r\n                newConversation.participants.data[0].profile_pic = result3.profile_pic\r\n              else newConversation.participants.data[0].profile_pic = 'assets/icon/no-avatar.svg'\r\n              newConversation.senderName = newConversation.participants.data[0].name\r\n              newConversation.messages.data[0] = { ...newConversation.messages.data[0], ...data, message: data.message.text || '' }\r\n              this.listConversation.unshift(newConversation)\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n  //hàm này để render dữ liệu khớp với dữ liệu trong listComment hiện tại\r\n  renderDataNewComment(data, user) {\r\n    return {\r\n      id_post: data.id_post, created_time: data.created_time, from: data.from,\r\n      message: data.message, id: data.comment_id, can_comment: true, can_remove: true, can_hide: true,\r\n      can_like: true, can_reply_privately: true, comment_count: 0, like_count: 0, user_likes: false, is_hidden: false,\r\n      participants: { data: [user] }, senderName: user.name\r\n    }\r\n  }\r\n  /**Tải thêm tin nhắn */\r\n  loadMoreMessage() {\r\n    this.loadingMoreMessage = true;\r\n    this.fbService.getNextPaging(this.dataPagingMess.next).then(res => {\r\n      if (res.error) {\r\n        this.messageError()\r\n        this.loadingMoreMessage = false\r\n      } else {\r\n        this.dataPagingMess = res.paging\r\n        let listConversation = res.data;\r\n        let conversation: Array<any> = []\r\n        listConversation.forEach(item => {\r\n          //bước 2 đối với mỗi cuộc hội thoại phải get danh sách nhắn tin\r\n          conversation.push(this.fbService.getListMessageByConversationID(this.fanpageSelected['access_token'], item.id))\r\n        })\r\n        Promise.all(conversation).then((result: Array<any>) => {\r\n          listConversation = result\r\n          // //bước 3 đối với mỗi tn phải lấy ra tn đầu tiên để hiển thị và get thông tin người gửi\r\n          let messages: Array<any> = []\r\n          listConversation.forEach((item: any) => {\r\n            messages.push(this.fbService.getInfoUserByPSID(item.participants.data[0].id, this.fanpageSelected['access_token']))\r\n          })\r\n          Promise.all(messages).then((results: any) => {\r\n            for (let index in results) {\r\n              if (!results[index].error)\r\n                listConversation[index].participants.data[0].profile_pic = results[index].profile_pic\r\n              else listConversation[index].participants.data[0].profile_pic = 'assets/icon/no-avatar.svg'\r\n              listConversation.senderName = listConversation[index].participants.data[0].name\r\n            }\r\n            let firstMessage: Array<any> = []\r\n            listConversation.forEach((item: any) => {\r\n              firstMessage.push(this.fbService.getMessageDetailByMessageID(this.fanpageSelected['access_token'], item.messages?.data[0]?.id))\r\n            })\r\n            Promise.all(firstMessage).then((results2: any) => {\r\n              for (let index in results2) {\r\n                if (!results2[index].error)\r\n                  listConversation[index].messages.data[0] = { ...listConversation[index].messages.data[0], ...results2[index] }\r\n              }\r\n              this.listConversation = this.listConversation.concat(listConversation)\r\n              this.listSubConversation = [...this.listConversation]\r\n              this.loadingMoreMessage = false\r\n            })\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n  displayingSenderAction(item) {\r\n    if (item.unread_count >= 0) {\r\n      this.fbService.displayingSenderAction(this.fanpageSelected['access_token'], item.participants?.data[0].id, 'typing_on').then(res => item.unread_count = 0)\r\n    }\r\n\r\n  }\r\n}\r\n","<div class=\"layout\" id=\"conversation-inbox\">\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\">\r\n            <div class=\"facebook-header-user\">\r\n                <div nzTrigger=\"click\" class=\"facebook-header-user-picture\" nz-dropdown [nzDropdownMenu]=\"user\">\r\n                    <img [src]=\"fanpageSelected.image_url || 'assets/icon/no-avatar.svg' \" alt=\"\">\r\n                    <span class=\"status active\"></span>\r\n                </div>\r\n                <nz-dropdown-menu #user=\"nzDropdownMenu\">\r\n                    <ul nz-menu style=\"width: 100%;background-color: white;border-radius: 4px; max-width:300px;\">\r\n                        <li [nzSelected]=\"fanpageSelected.id == item.id\" (click)=\"changePage(item)\"\r\n                            style=\"margin: 4px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;\"\r\n                            nz-menu-item *ngFor=\"let item of listFanpage\">\r\n                            <img style=\"border-radius: 15px;width: 30px;margin-right: 4px;\" [src]=\"item.image_url\"\r\n                                alt=\"\"> <span>{{item.name}}</span>\r\n                        </li>\r\n                        <li stype=\"border-radius: 15px;width: 30px;margin-right: 4px;\" (click)=\"logout()\" nz-menu-item>\r\n                            Đăng xuất</li>\r\n                    </ul>\r\n                </nz-dropdown-menu>\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchUser($event)\" type=\"text\" nz-input\r\n                    placeholder=\"{{'Search by name' | translate}}\">\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\" class=\"facebook-tabs\">\r\n            <nz-tabset [(nzSelectedIndex)]=\"selectedIndex\" (nzSelectedIndexChange)=\"searchUser(searchValue)\">\r\n                <!-- <nz-tab [nzTitle]=\"titleTatCa\">\r\n                    <ng-template #titleTatCa let-visible=\"visible\">\r\n                        <i nz-icon nzType=\"inbox\" nzTheme=\"outline\"></i> {{'All' | translate}}\r\n                    </ng-template>\r\n                </nz-tab> -->\r\n                <nz-tab [nzTitle]=\"titleTinNhan\">\r\n                    <ng-template #titleTinNhan let-visible=\"visible\">\r\n                        <i nz-icon nzType=\"message\" nzTheme=\"outline\"></i> {{'Message' | translate}}\r\n                    </ng-template>\r\n                </nz-tab>\r\n                <nz-tab [nzTitle]=\"titleBinhLuan\">\r\n                    <ng-template #titleBinhLuan let-visible=\"visible\">\r\n                        <i nz-icon nzType=\"comment\" nzTheme=\"outline\"></i> {{'Comment' | translate}}\r\n                    </ng-template>\r\n                </nz-tab>\r\n            </nz-tabset>\r\n        </div>\r\n        <nz-skeleton *ngIf=\"selectedIndex ==0\" [nzLoading]=\"loading\" [nzActive]=\"true\">\r\n            <div class=\"block-conversation ant-table-body\" id=\"block-conversation-inbox\">\r\n                <div [ngClass]=\"{'selected':conversationId == item.id}\"\r\n                    (click)=\"viewMessageDetail(item);displayingSenderAction(item)\"\r\n                    *ngFor=\"let item of listConversation;trackBy: trackByFnChat\" nz-col nzSpan=\"24\"\r\n                    class=\"conversation-item\">\r\n                    <div class=\"conversation-item-avatar\">\r\n                        <div class=\"image-placeholder\">\r\n                            <img [src]=\"item.participants?.data[0]?.profile_pic\" alt=\"\">\r\n                            <svg class=\"svg-icon\" width=\"19\" height=\"19\" viewBox=\"0 0 19 19\" fill=\"none\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <ellipse cx=\"9.49996\" cy=\"9.77172\" rx=\"7.32857\" ry=\"5.97143\" fill=\"white\"></ellipse>\r\n                                <path\r\n                                    d=\"M9.52107 0C4.15702 0 0 3.92048 0 9.21585C0 11.9856 1.13808 14.3791 2.99058 16.0325C3.31044 16.3201 3.24456 16.4868 3.29895 18.2631C3.30323 18.3876 3.33789 18.5091 3.39991 18.617C3.46192 18.725 3.54941 18.8161 3.65473 18.8825C3.76005 18.9489 3.88002 18.9885 4.00416 18.9978C4.1283 19.0072 4.25285 18.9861 4.36694 18.9362C6.39373 18.0436 6.41978 17.9732 6.76339 18.0666C12.6354 19.6829 19 15.9248 19 9.21585C19 3.92048 14.8855 0 9.52107 0ZM15.2379 7.09204L12.4416 11.5193C12.336 11.6858 12.1971 11.8287 12.0337 11.939C11.8703 12.0493 11.6859 12.1247 11.492 12.1604C11.2982 12.1961 11.099 12.1914 10.907 12.1465C10.7151 12.1017 10.5344 12.0177 10.3765 11.8997L8.15161 10.2345C8.05215 10.1599 7.93118 10.1195 7.80686 10.1195C7.68253 10.1195 7.56156 10.1599 7.4621 10.2345L4.46002 12.5115C4.05933 12.8153 3.53454 12.3353 3.8046 11.9112L6.60097 7.48393C6.70653 7.31741 6.84535 7.17449 7.00874 7.06414C7.17213 6.9538 7.35655 6.8784 7.55044 6.84269C7.74434 6.80697 7.94352 6.8117 8.1355 6.85659C8.32747 6.90147 8.50811 6.98555 8.66607 7.10353L10.8901 8.76841C10.9896 8.84301 11.1106 8.88334 11.2349 8.88334C11.3592 8.88334 11.4802 8.84301 11.5797 8.76841L14.5833 6.49366C14.9832 6.18796 15.508 6.66758 15.2379 7.09204Z\"\r\n                                    fill=\"#1877F2\"></path>\r\n                            </svg>\r\n                            <span *ngIf=\"item.unread_count\" class=\"number-message\">{{item.unread_count}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"conversation-item-content\">\r\n                        <div class=\"sender\"><b>{{item.participants?.data[0]?.name}}</b></div>\r\n                        <div class=\"message\" [ngStyle]=\"{'font-weight' : item.unread_count != 0?'bold' : 'normal'}\">\r\n                            {{(fanpageSelected.id != item.messages?.data[0]?.to?.data[0]?.id && !item.webhook_send) ?\r\n                            'Bạn: '\r\n                            :''}}{{item.messages?.data[0]?.message || 'Đã gửi một ảnh'}}</div>\r\n                    </div>\r\n                    <div class=\"conversation-item-time text-end\">\r\n                        <div>{{item.messages?.data[0]?.created_time | date: \"dd/MM\"}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\" class=\"view-more\" *ngIf=\"(selectedIndex== 0 && dataPagingMess?.next)\">\r\n                <button (click)=\"loadMoreMessage()\" nz-button><i nz-icon [nzType]=\"'sync'\"\r\n                        [nzSpin]=\"loadingMoreMessage\"></i>Tải thêm...</button>\r\n            </div>\r\n            <div class=\"no-data\" *ngIf=\"!listConversation.length\">Chưa có dữ liệu</div>\r\n        </nz-skeleton>\r\n        <nz-skeleton *ngIf=\"selectedIndex ==1\" [nzLoading]=\"loading\" [nzActive]=\"true\">\r\n            <div class=\"block-conversation ant-table-body\" id=\"block-conversation-inbox\">\r\n                <div [ngClass]=\"{'selected':commentId == item.id}\" (click)=\"viewCommentDetail(item)\"\r\n                    *ngFor=\"let item of listCommentPost\" nz-col nzSpan=\"24\" class=\"conversation-item\">\r\n                    <div class=\"conversation-item-avatar\">\r\n                        <div class=\"image-placeholder\">\r\n                            <img [src]=\"item.participants?.data[0]?.picture?.data?.url || 'assets/icon/no-avatar.svg'\"\r\n                                alt=\"\">\r\n                            <svg class=\"svg-icon\" width=\"19\" height=\"19\" viewBox=\"0 0 19 19\" fill=\"none\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <rect width=\"19\" height=\"19\" rx=\"9.5\" fill=\"#34518C\"></rect>\r\n                                <path\r\n                                    d=\"M7.29975 15.6471V9.87839H5.58789V7.80136H7.29975V6.02731C7.29975 4.63324 8.31095 3.35303 10.641 3.35303C11.5844 3.35303 12.2819 3.43362 12.2819 3.43362L12.227 5.37321C12.227 5.37321 11.5156 5.36704 10.7392 5.36704C9.89896 5.36704 9.76434 5.71207 9.76434 6.28474V7.80136H12.2938L12.1837 9.87839H9.76434V15.6471H7.29975Z\"\r\n                                    fill=\"white\"></path>\r\n                            </svg>\r\n                            <span class=\"number-message\">1</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"conversation-item-content\">\r\n                        <div class=\"sender\"><b>{{item.senderName ||'Chưa xác định'}}</b></div>\r\n                        <div class=\"message\">{{item.message || 'Đã gửi một ảnh'}}</div>\r\n                    </div>\r\n                    <div class=\"conversation-item-time text-end\">\r\n                        <div>{{item.created_time | date: \"dd/MM\"}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"no-data\" *ngIf=\"!listCommentPost.length\">Chưa có dữ liệu</div>\r\n        </nz-skeleton>\r\n\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\nimport { FacebookService } from '../../services/facebook.service';\r\n\r\n@Component({\r\n  selector: 'app-facebook-conversation',\r\n  templateUrl: './facebook-conversation.component.html',\r\n  styleUrls: ['./facebook-conversation.component.scss']\r\n})\r\nexport class FacebookConversationComponent implements OnInit {\r\n  listFanpage: Array<any> = []\r\n  fanpageSelected: any = {}\r\n  infoSender: any = {} //thông tin người gửi tin nhắn\r\n  typeDialog: 1 | 2 = 1 //1 là message , 2 là comment\r\n  newMessage: any = {}\r\n  newComment: any = {}\r\n  pushMessage: any = {}\r\n  list_earning_point_bills  = []\r\n  list_earning_points_products  = []\r\n  customer_group = []\r\n  constructor(\r\n    private fbService: FacebookService,\r\n    private routes: ActivatedRoute,\r\n    private vhQuerySales: VhQuerySales\r\n  ) { this.subscribeParams() }\r\n\r\n  ngOnInit(): void {\r\n    this.listFanpage = this.fbService.getListAccountConnect().listPage\r\n    this.fanpageSelected = this.listFanpage[0]\r\n    //lắng nghe message\r\n   this.subscribePage(this.fanpageSelected.id)\r\n   this.getSaleProgram()\r\n  }\r\n\r\n  getSaleProgram(){\r\n    Promise.all([\r\n      this.vhQuerySales.getEarningPointsBills(),\r\n      this.vhQuerySales.getEarningPointsProducts(),\r\n\r\n    ])\r\n      .then(([earning_point_bills, earning_points_products,]: any) => { \r\n        this.list_earning_point_bills = earning_point_bills\r\n        this.list_earning_points_products =   earning_points_products\r\n        this.customer_group = this.vhQuerySales.getlocalCustomerClasss()\r\n        \r\n      })\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.unscriblePage()\r\n  }\r\n  subscribePage(id_page: string) {\r\n    //lắng nghe message\r\n    this.fbService.connectWebhook(id_page, this.fanpageSelected.access_token)\r\n    this.vhQuerySales.observableWebhookMessagesFacebook(id_page).subscribe((entry: any) => {\r\n      this.newMessage = entry.messaging\r\n    })\r\n    //lắng nghe comment\r\n    this.vhQuerySales.observableWebhookFeedFacebook(id_page).subscribe((entry: any) => {\r\n      if (entry.changes && this.fanpageSelected.id == entry.id) this.newComment = entry.changes[0]\r\n    })\r\n  }\r\n  subscribeParams() {\r\n    this.routes.queryParams.subscribe(val => {\r\n      if (val.conversationId) this.typeDialog = 1\r\n      else if (val.commentId) this.typeDialog = 2\r\n    });\r\n  }\r\n\r\n  changeFanpageSelected(page) {\r\n    this.unscriblePage()\r\n    if (page) this.fanpageSelected = page\r\n    this.subscribePage(this.fanpageSelected.id)\r\n  }\r\n  changeInfoSender(info) {\r\n    info && (this.infoSender = info)\r\n  }\r\n  emitNewMessageFB(event) {\r\n    if (event) {\r\n      event.from.name = this.infoSender.name\r\n      event.from.profile_pic = this.infoSender.profile_pic\r\n      this.pushMessage = event\r\n    }\r\n  }\r\n  unscriblePage() {\r\n    this.vhQuerySales.unsubscribeWebhookMessagesFacebook(this.fanpageSelected.id)\r\n    this.vhQuerySales.unsubscribeWebhookFeedFacebook(this.fanpageSelected.id)\r\n\r\n  }\r\n\r\n  test(event){\r\n    \r\n    this.infoSender =  {...event, ...this.infoSender};\r\n  }\r\n  \r\n}\r\n","<div class=\"conversation\">\r\n    <div class=\"conversation-inbox\">\r\n        <app-conversation-inbox [newMessage]=\"newMessage\" [newComment]=\"newComment\" [listFanpage]=\"listFanpage\"\r\n            (changeInfoSender)=\"changeInfoSender($event)\" (emitNewMessageFB)=\"emitNewMessageFB($event)\"\r\n            (changeFanpageSelected)=\"changeFanpageSelected($event)\">\r\n        </app-conversation-inbox>\r\n    </div>\r\n    <div [ngStyle]=\"{'display':infoSender.id ? 'block' : 'none' }\" class=\"conversation-dialog\">\r\n        <app-conversation-dialog *ngIf=\"typeDialog == 1\" [pushMessage]=\"pushMessage\" [infoSender]=\"infoSender\"\r\n            [fanpageSelected]=\"fanpageSelected\">\r\n        </app-conversation-dialog>\r\n        <app-conversation-comment *ngIf=\"typeDialog == 2\" [infoSender]=\"infoSender\" [fanpageSelected]=\"fanpageSelected\">\r\n        </app-conversation-comment>\r\n    </div>\r\n    <div [ngStyle]=\"{'display':infoSender.id ? 'block' : 'none' }\" class=\"conversation-detail\">\r\n        <app-conversation-detail [infoSender]=\"infoSender\" (addCustomerEvent)=\"test($event)\" [customer_group]=\"customer_group\"\r\n        [list_earning_point_bills]=\"list_earning_point_bills\" [list_earning_points_products]=\"list_earning_points_products\"></app-conversation-detail>\r\n    </div>\r\n    <div [ngStyle]=\"{'display':infoSender.id ? 'none' : 'block' }\" class=\"conversation-select-user\">\r\n        <app-waiting-select-user></app-waiting-select-user>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FacebookConversationComponent } from './facebook-conversation.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { ConversationInboxComponent } from './conversation-inbox/conversation-inbox.component';\r\nimport { ConversationDialogComponent } from './conversation-dialog/conversation-dialog.component';\r\nimport { ConversationDetailComponent } from './conversation-detail/conversation-detail.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { WaitingSelectUserComponent } from './waiting-select-user/waiting-select-user.component';\r\nimport { FbInfoUserComponent } from './conversation-detail/components/fb-info-user/fb-info-user.component';\r\nimport { AddCustomerComponent } from './conversation-detail/components/add-customer/add-customer.component';\r\nimport { CustomerProfileComponent } from './conversation-detail/components/customer-profile/customer-profile.component';\r\nimport { FbCreateOrderComponent } from './conversation-detail/components/fb-create-order/fb-create-order.component'; \r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { StaffComponent } from './conversation-detail/components/staff/staff.component';\r\nimport { CustomerComponent } from './conversation-detail/components/customer/customer.component';\r\nimport { DeliveryComponent } from './conversation-detail/components/delivery/delivery.component';\r\nimport { TaxComponent } from './conversation-detail/components/tax/tax.component';\r\nimport { ConversationCommentComponent } from './conversation-comment/conversation-comment.component';\r\nimport { CheckFeesComponent } from './conversation-detail/components/check-fees/check-fees.component';\r\nimport { SearchModule } from 'src/app/sales/components/search/search.module';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FacebookConversationComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [FacebookConversationComponent, ConversationInboxComponent, ConversationDialogComponent, ConversationDetailComponent, WaitingSelectUserComponent, FbInfoUserComponent, AddCustomerComponent, CustomerProfileComponent, FbCreateOrderComponent, StaffComponent, CustomerComponent, DeliveryComponent, TaxComponent, ConversationCommentComponent, CheckFeesComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ScrollingModule,\r\n    SearchModule\r\n  ]\r\n})\r\nexport class FacebookConversationModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-waiting-select-user',\r\n  templateUrl: './waiting-select-user.component.html',\r\n  styleUrls: ['./waiting-select-user.component.scss']\r\n})\r\nexport class WaitingSelectUserComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"dialog-empty\">\r\n    <div class=\"icon-empty-page-container\">\r\n        <div class=\"icon-empty-page-item\">\r\n            <div class=\"icon-empty-page-item-avatar\"></div>\r\n            <div class=\"icon-empty-page-item-list\">\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"icon-empty-page-item\">\r\n            <div class=\"icon-empty-page-item-avatar\"></div>\r\n            <div class=\"icon-empty-page-item-list\">\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"icon-empty-page-item\">\r\n            <div class=\"icon-empty-page-item-avatar\"></div>\r\n            <div class=\"icon-empty-page-item-list\">\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"icon-empty-page-item\">\r\n            <div class=\"icon-empty-page-item-avatar\"></div>\r\n            <div class=\"icon-empty-page-item-list\">\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n                <div class=\"icon-empty-page-item-list-item\"></div>\r\n            </div>\r\n        </div>\r\n        <h3 style=\"font-size: 0.9rem\">{{'Please select a conversation' | translate}}</h3>\r\n    </div>\r\n\r\n</div>"],"names":["filter","i0","ctx_r2","ctx_r15","ctx_r22","ctx_r23","item_r21","ctx_r35","_r25","ctx_r7","ConversationCommentComponent","constructor","fbService","vhComponent","routes","vhAlgorithm","datePiPe","modal","router","ngOnInit","subscribeRouter","queryParams","pipe","params","commentId","subscribe","val","getData","loading","dataPaging","childComment","Promise","all","getPostByIdPost","fanpageSelected","split","getCommentByID","getReplyCommentByID","then","post","comment","paging","data","length","getPromiseDetailComment","result1","getListIDUser","result2","renderListUserIntoPost","catch","showMessageError","process","forEach","item","push","id","listComment","arrayID","listArrayReturn","from","includes","getInfoUser","getStickerMessage","messageList","resolve","reject","shares","getLinkShares","res","ngAfterViewChecked","document","getElementById","height","clientHeight","listAttachment","style","renderDate","date","transform","trackByFn","index","keyPress","event","keyCode","which","shiftKey","preventDefault","sendAllMessage","dataPush","can_comment","can_hide","can_like","can_remove","can_reply_privately","comment_count","created_time","Date","name","is_hidden","like_count","message","messageText","user_likes","senderName","participants","picture","url","image_url","loadingAttachment","json","unshift","replyCommentFacebookText","access_token","error","alertMessageDesktop","_a","splice","sendMessageImage","Object","attachment","media","image","src","buffer","type","replyCommentFacebookImage","formData","appendEmoji","emoji","loadMoreMessage","loadingMoreMessage","getNextPaging","next","concat","onUploadImage","fileReader","FileReader","readerBase64","file","target","files","readAsDataURL","onload","e","onloadend","photoData","Blob","result","FormData","append","readAsArrayBuffer","updateImage","click","removeImage","closeSearch","productSelected","isVisibleSendMessage","searchProductList","sendProductAndPrice","vhcurrencyunit_symbol","sendMessageUrl","to","infoSender","toISOString","attachments","image_data","preview_url","sendImageWithUrl","gotoInbox","window","open","likeCommentByCommentId","listUser","user","find","userInfo","sortDatebyDESC","trackByMyComment","deleteCommentByID","emit","confirm","nzTitle","nzContent","nzOkText","nzOnOk","success","deleted","navigate","deleteCommentID","nzOnCancel","nzCancelText","hideCommentByID","updateCommentByID","sendPrivateMessage","recipient","comment_id","infoSendMessage","text","textMessage","replyPrivateMessageOnComment","selectors","inputs","decls","vars","consts","template","ctx","_r4","_r9","ctx_r0","message_r9","_r11","ConversationDialogComponent","conversationId","ngOnChanges","pushMessage","currentValue","setTimeout","scrollToBottom","getListMessageByConversationID","messages","getMessageDetailByMessageID","map","reverse","resultSticker","findIndex","mess","getLastMessageFromUserAndCheckTime","lastMessage","expiresToSend","now","getTime","element","scrollTop","scrollHeight","body","tag","messaging_type","sendMessageToUserTypeText","message_id","err","console","processs","sendImageFromFile","attachment_id","fileBase64","reader","arrayBuffer","blob","JSON","stringify","updateImageToSendMessageAndReceiveAttachment","features","_r3"],"sourceRoot":"webpack:///"}