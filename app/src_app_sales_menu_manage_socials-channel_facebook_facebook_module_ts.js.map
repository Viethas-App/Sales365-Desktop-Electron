{"version":3,"file":"src_app_sales_menu_manage_socials-channel_facebook_facebook_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC4E4B,0EAAgE;IAAA,uDAAiB;IAAA,4DAAM;;;IAAvB,0DAAiB;IAAjB,iFAAiB;;;IAE7E,0EAA0B;IAAA,uDAA8C;IAAA,mEAGT;IAAA,4DAAM;;IAH3C,0DAA8C;IAA9C,mJAA8C;;;IAMhF,mEAA4F;;;;IAhBpG,0EACmE;IAA/D,8cAA8D;IAC9D,0EAAmC;IAC/B,0EAA0C;IACtC,qEAA2D;IAC/D,4DAAM;IACN,0EAAwC;IACpC,0EAAkB;IAAA,uDAAa;IAAA,4DAAM;IACrC,qHAAuF;IACvF,iNAKc;IAClB,4DAAM;IACN,mHAA4F;IAChG,4DAAM;IACV,4DAAM;;;;IAdW,0DAAqD;IAArD,8KAAqD;IAGxC,0DAAa;IAAb,6EAAa;IACzB,0DAAsB;IAAtB,oFAAsB;IAQ5B,0DAAkB;IAAlB,iFAAkB;;;;IAwBlC,0EAA0G;IAArG,sbAA+B;IAChC,0EAC6L;IACzL,0EAA2F;IACvF,qEAC0D;IAC9D,4DAAM;IACN,0EAA0E;IACtE,0EACiB;IAAA,uDAAa;IAAA,4DAAM;IACpC,0EAA+E;IAAA,uDAC/E;IAAA,4DAAM;IACV,4DAAM;IACV,4DAAM;IACV,4DAAM;;;IATU,0DAAqD;IAArD,+KAAqD;IAIxC,0DAAa;IAAb,8EAAa;IACiD,0DAC/E;IAD+E,4FAC/E;;;IAIZ,0EAA0E;IACtE,uDACJ;;IAAA,4DAAM;;IADF,0DACJ;IADI,sJACJ;;;IAnBR,wEAA+B;IAC3B,0EAAY;IACR,8HAcM;IACN,8HAEM;IACV,4DAAM;IACN,yEACU;;IACd,qEAAe;;;IArBkE,0DAAkB;IAAlB,0FAAkB;IAerE,0DAA+B;IAA/B,mGAA+B;IAInB,0DAAoC;IAApC,oKAAoC;IAAjE,4FAA4B;;ADlHtC,MAAM,iBAAiB;IAU5B,YACU,MAAc,EACd,SAA0B,EAC1B,IAAqB,EACrB,WAAwB,EACxB,OAAgB,EAChB,YAA0B,EAC1B,YAAmC;QANnC,WAAM,GAAN,MAAM,CAAQ;QACd,cAAS,GAAT,SAAS,CAAiB;QAC1B,SAAI,GAAJ,IAAI,CAAiB;QACrB,gBAAW,GAAX,WAAW,CAAa;QACxB,YAAO,GAAP,OAAO,CAAS;QAChB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,iBAAY,GAAZ,YAAY,CAAuB;QAhB7C,YAAO,GAAY,KAAK,EAAC,4BAA4B;QACrD,kBAAa,GAAY,KAAK,EAAC,4BAA4B;QAC3D,aAAQ,GAAQ,EAAE,EAAC,4BAA4B;QAC/C,aAAQ,GAAe,EAAE;QACzB,mBAAc,GAAe,EAAE;QAC/B,oBAAe,GAAe,EAAE;QAChC,gBAAW,GAAY,KAAK;QAC5B,8BAAyB,GAAY,KAAK,CAAC;QAC3C,qBAAgB,GAAQ,EAAE;IAW1B,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE;YACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+DAA+D,CAAC,CAAC;;YACpF,IAAI,CAAC,OAAO,EAAE;IACrB,CAAC;IACD,OAAO;QACL,IAAI,CAAC,OAAO,GAAG,IAAI;QACnB,IAAI,QAAQ,GAAQ,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;QACpD,wCAAwC;QACxC,OAAO,CAAC,GAAG,CAAC;YACV,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;YACvE,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,oBAAoB,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC;SACrH,CAAC,CAAC,IAAI,CAAC,CAAC,GAAe,EAAE,EAAE;YAC1B,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjC,0CAA0C;YAC1C,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAC7E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC;gBACjD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBAC3B,IAAI,CAAC,OAAO,GAAG,IAAI;oBACnB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;gBACjC,CAAC,CAAC;aACH;QACH,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACxC,CAAC;IACD;;;;OAIG;IACH,WAAW,CAAC,IAAS,EAAE,KAAa;QACpC,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;YAClD,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO;YAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;SAChC;aACI,IAAI,IAAI,CAAC,OAAO,EAAE;YACrB,IAAI,CAAC,eAAe,GAAI,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,GAAE,CAAC,IAAI,CAAC,EAAE,KAAI,IAAI,CAAC,EAAE,CAAC;YAC9E,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO;SAC7B;IACH,CAAC;IACD;;;;OAIG;IACH,SAAS;QACP,IAAI,CAAC,OAAO,GAAG,IAAI;QACnB,IAAI,QAAQ,GAAW,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;QACvD,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YAC5E,IAAI,QAAQ,GAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;YACrE,IAAI,IAAI,iDAAQ,QAAQ,GAAK,IAAI,CAAC,QAAQ,KAAE,YAAY,EAAE,GAAG,CAAC,cAAc,CAAC,GAAE;YAC/E,OAAO,IAAI,CAAC,WAAW;YACvB,IAAI,CAAC,SAAS,CAAC,kBAAkB,mBAAM,IAAI,EAAG;YAC9C,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;gBACtG,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI;gBACtB,IAAI,IAAI,EAAE;oBACR,KAAK,IAAI,IAAI,IAAI,QAAQ,EAAE;wBACzB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC;wBACtD,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC;qBAC7D;oBAED,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;wBAC5D,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;wBAC/D,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC;wBACnC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+DAA+D,CAAC,CAAC;oBACzF,CAAC,CAAC;iBACH;YACH,CAAC,CAAC;YACF,IAAI,CAAC,OAAO,GAAG,KAAK;QACtB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC7E,CAAC;IACD;;;;;OAKG;IACH,wBAAwB,CAAC,IAAS,EAAE,QAAoB;QACtD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC7B,IAAI,IAAI,GAAG;gBACT,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC;gBACtB,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;gBAClB,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC;gBAClC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG;gBACnD,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBAC5B,OAAO;wBACL,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC;wBAClC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC;wBAC1B,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;wBAClB,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC;wBACd,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC;qBAC7B;gBACH,CAAC,CAAC;aACH;YACD,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG;gBACpD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,oBAAoB,EAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;;gBAClI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC9G,CAAC,CAAC;IACJ,CAAC;IACD;;OAEG;IACH,kBAAkB;QACjB,4DAA4D;QAC3D,aAAa;QACX,IAAI,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,8BAA8B,EAAE,CAAC,cAAc,EAAE,yBAAyB;QACjH,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,wBAAwB;QAG7D,IAAG,QAAQ,GAAG,cAAc;YAAE,IAAI,CAAC,aAAa,EAAE;aAC5C;YACH,IAAI,CAAC,YAAY;iBACd,KAAK,CACJ,kCAAkC,cAAc,GAAG,EACnD,6CAA6C,CAC9C;iBACA,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;gBACtB,GAAG;YACL,CAAC,CAAC,CAAC;SACN;QACH,IAAI;IACN,CAAC;IAED,aAAa;QACX,IAAI,CAAC,yBAAyB,GAAG,IAAI;QACrC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG,IAAI;YACzB,IAAI,QAAQ,GAAW,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE;YACvD,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAQ,EAAE,EAAE;gBACvG,IAAI,cAAc,GAAG,EAAE;gBACvB,cAAc,GAAG,GAAG,CAAC,IAAI;gBACzB,IAAI,KAAK,GAAe,EAAE;gBAC1B,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBAC5B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,2BAA2B,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC1F,CAAC,CAAC;gBACF,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,MAAkB,EAAE,EAAE;oBAC7C,cAAc,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,WAAG,IAAI,CAAC,SAAS,GAAG,YAAM,CAAC,KAAK,CAAC,CAAC,IAAI,0CAAE,GAAG,EAAC,CAAC,CAAC;oBACrF,6EAA6E;oBAC7E,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;wBAC9B,IAAI,KAAK,GAAG,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC;wBAChE,IAAI,KAAK,IAAI,CAAC;4BAAE,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;qBAChD;oBACD,IAAI,CAAC,cAAc,GAAG,cAAc;oBACpC,IAAI,CAAC,aAAa,GAAG,KAAK;oBAC1B,IAAI,CAAC,WAAW,GAAG,IAAI;gBACzB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC;YAC3G,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE;gBACZ,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC;YAC3F,CAAC,CAAC;SACH;IACH,CAAC;IAED,aAAa,CAAC,IAAS,EAAE,KAAa;QACpC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QACxB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,yBAAyB,GAAG,KAAK;IACxC,CAAC;IAED,YAAY;QACV,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QACrG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC;QACnC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+DAA+D,CAAC,CAAC;IACzF,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE;YACpC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBACzC,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,SAAS,EAAE,sBAAsB,CAAC;gBACvE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yDAAyD,CAAC,CAAC;YACnF,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC,CAAC,CAAC;SAC3C;;YACI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yDAAyD,CAAC,CAAC;IACxF,CAAC;;kFAnMU,iBAAiB;+GAAjB,iBAAiB;QCb9B,4EAAW;QACP,yEAAoC;QAChC,yEAAsD;QAClD,qEAAI;QAAA,uDAAsC;;QAAA,4DAAK;QACnD,4DAAM;QACN,yEAAuE;QACnE,sEAAK;QACD,yEAAgG;QAC5F,oEAA+E;QAC/E,sEAAmC;QACvC,4DAAM;QACN,6FAAyC;QACrC,yEAAkC;QAC9B,yEAAiB;QACb,0EAAgC;QAC5B,2EAAkD;QAC9C,uEAAK;QACD,sEAC8E;QAClF,4DAAM;QACN,2EAA+B;QAC3B,qEAAG;QAAA,wDACC;QAAA,4EAAgE;QAAA,wDAEjD;;QAAA,4DAAO;QAC1B,4DAAI;QACR,4DAAM;QACV,4DAAM;QACN,4EAC4C;QADtC,wIAAS,cAAU,IAAC;QACkB,8DAC+B;QAD/B,2EAC+B;QACnE,yEAAuD;QACvD,uEAGmC;QACnC,uEAC0D;QAC1D,uEACmC;QACvC,4DAAM;QACV,4DAAO;QACX,4DAAM;QACV,4DAAK;QACT,4DAAK;QACT,4DAAmB;QACvB,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,+DAAqC;QAArC,2EAAqC;QACjC,2EAAwB;QACpB,6EAAW;QACP,yEAA6D;;QAEjE,4DAAY;QAChB,4DAAM;QACN,2EAAwB;QACpB,sEAAI;QAAA,wDAA2E;;QAAA,4DAAK;QACxF,4DAAM;QACN,2EAAiD;QAC7C,8EAEqB;QAFb,0IAAS,eAAW,IAAC;QAGzB,wDACJ;;QAAA,4DAAS;QACb,4DAAM;QACN,2EAAwB;QACpB,2EAA0B;QACtB,iHAkBM;QACN,2EAAsD;QAA/B,uIAAS,wBAAoB,IAAC;QACjD,2EAAmC;QAC/B,2EAA0C;QACtC,sEAAkE;QACtE,4DAAM;QACN,2EAAoE;QAChE,wDACJ;;QAAA,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACN,0EACU;;QACd,4DAAY;QACZ,iFAEoD;QAAhD,qLAAyC,KAAK,IAAC;;QAC/C,kIAuBe;QACnB,4DAAY;;;QA/HI,0DAAsC;QAAtC,yJAAsC;QAIkC,0DAAuB;QAAvB,+EAAuB;QACtF,0DAAkE;QAAlE,6QAAkE;QAU/C,0DAAkE;QAAlE,6QAAkE;QAGnE,0DACC;QADD,4FACC;QAAgE,0DAEjD;QAFiD,0JAEjD;QA4BnC,2DAA2C;QAA3C,oKAA2C;QAKnD,0DAA2E;QAA3E,+LAA2E;QAGjD,0DAAsC;QAAtC,qGAAsC;QAGhE,0DACJ;QADI,wJACJ;QAI0B,0DAAY;QAAZ,iFAAY;QAyBtB,0DACJ;QADI,uKACJ;QAMY,0DAA+D;QAA/D,iMAA+D;QAAtF,mFAAsB;QAIX,0DAAmD;QAAnD,4KAAmD;QADhE,gFAAuB;;;;;;;;;;;;;;;;;;;;;;;ACtGa;AACU;AACF;AACV;AACS;AACS;;;AAE/D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kEAAiB;KAC7B;IACD;QACE,IAAI,EAAE,cAAc;QACpB,YAAY,EAAE,GAAG,EAAE,CAAC,+VAA8D,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,0BAA0B,CAAC;KAC3H;CACF;AAYM,MAAM,cAAc;;4EAAd,cAAc;2GAAd,cAAc;+GARhB;YACP,yDAAY;YACZ,kEAAqB,CAAC,MAAM,CAAC;YAC7B,yEAAgB;YAChB,uDAAW;YACX,gEAAe;SAChB;mIAEU,cAAc,mBATV,kEAAiB,aAE9B,yDAAY,6DAEZ,yEAAgB;QAChB,uDAAW;QACX,gEAAe","sources":["./src/app/sales/menu/manage/socials-channel/facebook/facebook.component.ts","./src/app/sales/menu/manage/socials-channel/facebook/facebook.component.html","./src/app/sales/menu/manage/socials-channel/facebook/facebook.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzNotificationService } from 'ng-zorro-antd/notification';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { FacebookService } from '../services/facebook.service';\r\n\r\n@Component({\r\n  selector: 'app-facebook',\r\n  templateUrl: './facebook.component.html',\r\n  styleUrls: ['./facebook.component.scss']\r\n})\r\nexport class FacebookComponent implements OnInit {\r\n  loading: boolean = false // loading khi mới vào trang\r\n  loadingDrawer: boolean = false // loading khi tải danh sách\r\n  infoUser: any = {} //  thông tin của khách hàng\r\n  listPage: Array<any> = []\r\n  listPageDrawer: Array<any> = []\r\n  listPageConnect: Array<any> = []\r\n  loadAllPage: boolean = false\r\n  visibleListPageNotConnect: boolean = false;\r\n  fbAuthentication: any = {}\r\n  constructor(\r\n    private router: Router,\r\n    private fbService: FacebookService,\r\n    private lang: LanguageService,\r\n    private vhComponent: VhComponent,\r\n    private vhQuery: VhQuery,\r\n    private vhQuerySales: VhQuerySales,\r\n    private notification: NzNotificationService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.fbService.getStatusLogin())\r\n      this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'])\r\n    else this.getData()\r\n  }\r\n  getData() {\r\n    this.loading = true\r\n    let infoAuth: any = this.fbService.getAuthResponse()\r\n    //lấy thông tin user hiện thời đăng nhập\r\n    Promise.all([\r\n      this.fbService.getInfoUser(infoAuth['userID'], infoAuth['accessToken']),\r\n      this.vhQuery.getDocsByFields('fb_authentications', { id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } })\r\n    ]).then((res: Array<any>) => {\r\n      this.infoUser = res[0]\r\n      this.fbAuthentication = res[1][0]\r\n      //lấy danh sách các page đã connect(local)\r\n      if (this.fbAuthentication && this.fbAuthentication.userID == this.infoUser.id) {\r\n        this.listPage = this.fbAuthentication['listPage']\r\n        this.listPage.forEach(item => {\r\n          item.checked = true\r\n          this.listPageConnect.push(item)\r\n        })\r\n      }\r\n    }).finally(() => this.loading = false)\r\n  }\r\n  /**\r\n   * Thêm, xóa page connect\r\n   * @param page \r\n   * @param index\r\n   */\r\n  connectPage(page: any, index: number) {\r\n  if (!page.checked && this.listPageConnect.length < 3) {\r\n      page.checked = !page.checked\r\n      this.listPageConnect.push(page)\r\n    }\r\n    else if (page.checked) {\r\n      this.listPageConnect =  this.listPageConnect.filter(item=> item.id !==page.id)\r\n      page.checked = !page.checked\r\n    }\r\n  }\r\n  /**\r\n   * Tiến hành lấy long live access_token cho page\r\n   * Note : chỗ này có thể có nhiều page chia làm nhiều request tuy nhiên thực tế 1 page k thể có 25 page được\r\n   * Nên không viết thêm hàm lấy next page\r\n   */\r\n  connectFB() {\r\n    this.loading = true\r\n    let infoAuth: Object = this.fbService.getAuthResponse()\r\n    this.fbService.getLongLiveAccessTokenUser(infoAuth['accessToken']).then(res => {\r\n      let listpage: Array<any> = this.listPage.filter(item => item.checked)\r\n      let user = { ...infoAuth, ...this.infoUser, access_token: res['access_token'] }\r\n      delete user.accessToken\r\n      this.fbService.setInfoUserConnect({ ...user })\r\n      this.fbService.getLongLiveAccessTokenPage(res['access_token'], infoAuth['userID']).then((result: any) => {\r\n        let list = result.data\r\n        if (list) {\r\n          for (let page of listpage) {\r\n            let index = list.findIndex(item => item.id == page.id)\r\n            index >= 0 && (page.access_token = list[index].access_token)\r\n          }\r\n\r\n          this.saveAuthenticationIntoDb(user, this.listPage).then(res => {\r\n            this.fbService.setListPageConnect(listpage, infoAuth['userID'])\r\n            this.fbService.setStatusLogin(true)\r\n            this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'])\r\n          })\r\n        }\r\n      })\r\n      this.loading = false\r\n    }).catch(() => this.loading = false)\r\n    this.fbService.setListPageConnect(this.listPageConnect, infoAuth['userID'])\r\n  }\r\n  /**\r\n   * Hàm này để lưu db thông tin đăng nhập facebook\r\n   * @param user \r\n   * @param listPage \r\n   * @returns \r\n   */\r\n  saveAuthenticationIntoDb(user: any, listPage: Array<any>): Promise<any> {\r\n    return new Promise((resolve) => {\r\n      let json = {\r\n        userID: user['userID'],\r\n        name: user['name'],\r\n        access_token: user['access_token'],\r\n        id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n        listPage: listPage.map(item => {\r\n          return {\r\n            access_token: item['access_token'],\r\n            category: item['category'],\r\n            name: item['name'],\r\n            id: item['id'],\r\n            image_url: item['image_url']\r\n          }\r\n        })\r\n      }\r\n      if (this.fbAuthentication && this.fbAuthentication._id)\r\n        this.vhQuery.updateDoc('fb_authentications', this.fbAuthentication._id, json).then(res => resolve(json)).catch(err => resolve(false))\r\n      else this.vhQuery.addDoc('fb_authentications', json).then(res => resolve(json)).catch(err => resolve(false))\r\n    })\r\n  }\r\n  /**\r\n   * Show drawer hiển thị danh sách các page chưa liên kết\r\n   */\r\n  openDrawerListPage() {\r\n   //this.vhQuerySales.refreshLocalRestrictionFacebookPackage()\r\n    //.then(()=>{\r\n      let fanpage_number = this.vhQuerySales.getLocalRestrictionMainPackage().fanpage_number  // số lượng shop cho phép\r\n      let listPage = this.listPage.length // số lượng shop đã thêm\r\n      \r\n     \r\n     if(listPage < fanpage_number) this.openAddFbPage()\r\n      else {\r\n        this.notification\r\n          .blank(\r\n            `Số lượng FanPage có thể tạo là ${fanpage_number} `,\r\n            `Vui lòng liên hệ 0934 60 60 60 để nâng cấp!`\r\n          )\r\n          .onClick.subscribe(() => {\r\n            // \r\n          });\r\n      }\r\n    //})\r\n  }\r\n\r\n  openAddFbPage(){\r\n    this.visibleListPageNotConnect = true\r\n    if (!this.loadAllPage) {\r\n      this.loadingDrawer = true\r\n      let infoAuth: Object = this.fbService.getAuthResponse()\r\n      this.fbService.getPageAccessTokenByUserID(infoAuth['userID'], infoAuth['accessToken']).then((res: any) => {\r\n        let listPageDrawer = []\r\n        listPageDrawer = res.data\r\n        let pages: Array<any> = []\r\n        listPageDrawer.forEach(item => {\r\n          pages.push(this.fbService.getProfileIamgeOfUserOrPage(infoAuth['accessToken'], item.id))\r\n        })\r\n        Promise.all(pages).then((result: Array<any>) => {\r\n          listPageDrawer.forEach((item, index) => { item.image_url = result[index].data?.url })\r\n          //vòng lặp for này sẽ duyệt qua và xóa những phần tử đã liên kết ra khỏi mảng\r\n          for (let page of this.listPage) {\r\n            let index = listPageDrawer.findIndex(data => data.id == page.id)\r\n            if (index >= 0) listPageDrawer.splice(index, 1)\r\n          }\r\n          this.listPageDrawer = listPageDrawer\r\n          this.loadingDrawer = false\r\n          this.loadAllPage = true\r\n        }).catch(() => this.vhComponent.alertMessageDesktop('error', this.lang.translate('Có lỗi xảy ra') + '!'))\r\n      }).catch(() => {\r\n        this.vhComponent.alertMessageDesktop('error', this.lang.translate('Có lỗi xảy ra') + '!')\r\n      })\r\n    }\r\n  }\r\n\r\n  addTolistPage(page: any, index: number) {\r\n    this.listPage.push(page)\r\n    this.listPageDrawer.splice(index, 1)\r\n    this.visibleListPageNotConnect = false\r\n  }\r\n\r\n  gotoFacebook() {\r\n    this.fbService.setListPageConnect(this.fbAuthentication['listPage'], this.fbAuthentication['userID'])\r\n    this.fbService.setStatusLogin(true)\r\n    this.router.navigate(['/sales/dashboard/manage/socials-channel/facebook/conversation'])\r\n  }\r\n\r\n  logoutFb() {\r\n    if (this.fbService.getAuthResponse()) {\r\n      this.fbService.logoutFacebook().then(res => {\r\n        this.vhComponent.alertMessageDesktop('success', \"Đăng xuất thành công\")\r\n        this.router.navigate(['/sales/dashboard/manage/socials-channel/socials-connect'])\r\n      }).catch(() => { console.error('Error') })\r\n    }\r\n    else this.router.navigate(['/sales/dashboard/manage/socials-channel/socials-connect'])\r\n  }\r\n}\r\n","<nz-layout>\r\n    <div nz-row class=\"facebook-header\">\r\n        <div nz-col nzSpan=\"6\" class=\"title left-all-content\">\r\n            <h1>{{'System configuration' | translate}}</h1>\r\n        </div>\r\n        <div nz-col nzSpan=\"18\" class=\"right-all-content facebook-header-user\">\r\n            <div>\r\n                <div nzTrigger=\"click\" class=\"facebook-header-user-picture\" nz-dropdown [nzDropdownMenu]=\"user\">\r\n                    <img [src]=\"infoUser.picture?.data?.url || 'assets/icon/no-avatar.svg'\" alt=\"\">\r\n                    <span class=\"status active\"></span>\r\n                </div>\r\n                <nz-dropdown-menu #user=\"nzDropdownMenu\">\r\n                    <ul style=\"width: 320px;\" nz-menu>\r\n                        <li nz-menu-item>\r\n                            <div class=\"center-all-content\">\r\n                                <div style=\"width: 80%;\" class=\"left-all-content\">\r\n                                    <div>\r\n                                        <img width=\"40px\" height=\"40px\" style=\"border-radius: 50%;\"\r\n                                            [src]=\"infoUser.picture?.data?.url || 'assets/icon/no-avatar.svg'\" alt=\"\">\r\n                                    </div>\r\n                                    <div style=\"margin-top: 12px;\">\r\n                                        <p>{{infoUser.name}}\r\n                                            <span style=\"display: block; color: var(--ion-color-vh-green);\">{{'Trực\r\n                                                tuyến' |\r\n                                                translate}}</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <span (click)=\"logoutFb()\" style=\"width: 20%; display: inline-block;\"\r\n                                    class=\"logout-action\" title=\"Đăng xuất\"><svg width=\"36\" height=\"36\"\r\n                                        viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                        <circle cx=\"18\" cy=\"18\" r=\"18\" fill=\"#F2F2F2\"></circle>\r\n                                        <path\r\n                                            d=\"M15 27H11C10.4696 27 9.96086 26.7893 9.58579 26.4142C9.21071 26.0391 9 25.5304 9 25V11C9 10.4696 9.21071 9.96086 9.58579 9.58579C9.96086 9.21071 10.4696 9 11 9H15\"\r\n                                            stroke=\"#65676B\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"></path>\r\n                                        <path d=\"M22 23L27 18L22 13\" stroke=\"#65676B\" stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\r\n                                        <path d=\"M27 18H15\" stroke=\"#65676B\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"></path>\r\n                                    </svg>\r\n                                </span>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </nz-dropdown-menu>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row class=\"facebook-content\">\r\n        <div nz-col nzSpan=\"24\">\r\n            <nz-tabset>\r\n                <nz-tab nzTitle=\"{{'Page management' | translate}}\"></nz-tab>\r\n                <!-- <nz-tab nzTitle=\"{{'General configuration' | translate}}\"></nz-tab> -->\r\n            </nz-tabset>\r\n        </div>\r\n        <div nz-col nzSpan=\"16\">\r\n            <h4>{{'List of connected pages (select up to 3 pages to connect)' | translate}}</h4>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"right-all-content\">\r\n            <button (click)=\"connectFB()\" [disabled]=\"listPageConnect.length==0\"\r\n                style=\"width: auto !important;margin-right: 8px;\" class=\"btn-green center-all-content\" nz-button\r\n                nzType=\"default\">\r\n                {{'Connect' | translate}}\r\n            </button>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n            <div nz-row nzGutter=\"16\">\r\n                <div *ngFor=\"let page of listPage;let i = index\" nz-col nzSpan=\"8\"\r\n                    (click)=\"!page.otherUser? connectPage(page,i) :gotoFacebook()\">\r\n                    <div class=\"facebook-content-page\">\r\n                        <div class=\"facebook-content-page-avatar\">\r\n                            <img [src]=\"page.image_url || 'assets/icon/no-avatar.svg'\">\r\n                        </div>\r\n                        <div class=\"facebook-content-page-info\">\r\n                            <div class=\"name\">{{page.name}}</div>\r\n                            <div *ngIf=\"!page.otherUser;else cannotAccess\" class=\"category\">{{page.category}}</div>\r\n                            <ng-template #cannotAccess>\r\n                                <div class=\"category-red\">{{'Bạn không có quyền kết nối với trang này'}}<i class=\"icon\"\r\n                                        nz-tooltip nzTooltipPlacement=\"top\"\r\n                                        nzTooltipTitle=\"Tài khoản facebook hiện tại của bạn không có quyền quản lý fanpage này, tuy nhiên vẫn có quyền truy cập\"\r\n                                        nz-icon nzType=\"question-circle\" nzTheme=\"outline\"></i></div>\r\n                            </ng-template>\r\n                        </div>\r\n                        <i *ngIf=\"page.checked\" class=\"checked\" nz-icon nzType=\"check-circle\" nzTheme=\"outline\"></i>\r\n                    </div>\r\n                </div>\r\n                <div nz-col nzSpan=\"8\" (click)=\"openDrawerListPage()\">\r\n                    <div class=\"facebook-content-page\">\r\n                        <div class=\"facebook-content-page-avatar\">\r\n                            <img style=\"border-radius: 0;\" src=\"assets/icon/add-quantity.svg\">\r\n                        </div>\r\n                        <div style=\"align-self: center;\" class=\"facebook-content-page-info\">\r\n                            {{'Add new connected page' | translate}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <nz-spin [nzSpinning]=\"loading\" nzTip=\"{{'Synchronizing data, please wait...' | translate}}...\">\r\n    </nz-spin>\r\n</nz-layout>\r\n<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"450\" [nzClosable]=\"true\" [nzVisible]=\"visibleListPageNotConnect\"\r\n    nzPlacement=\"right\" nzTitle=\"{{'List of unmanaged pages' | translate}}\"\r\n    (nzOnClose)=\"visibleListPageNotConnect = false\">\r\n    <ng-container *nzDrawerContent>\r\n        <div nz-row>\r\n            <div (click)=\"addTolistPage(page,i)\" nz-col nzSpan=\"24\" *ngFor=\"let page of listPageDrawer;let i = index\">\r\n                <div class=\"facebook-content-page\"\r\n                    style=\"margin-top:8px;width: 100%;box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.25);padding: 12px;border-radius: 8px;cursor: pointer;display: flex;justify-content: start;position: relative;\">\r\n                    <div style=\"width: 60px;display: inline;float: left;\" class=\"facebook-content-page-avatar\">\r\n                        <img style=\"width: 50px;height: 50px;border-radius: 25px;\"\r\n                            [src]=\"page.image_url || 'assets/icon/no-avatar.svg'\">\r\n                    </div>\r\n                    <div style=\"width: calc(100% - 60px);\" class=\"facebook-content-page-info\">\r\n                        <div style=\" font-weight: bold;font-size: 0.9rem;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;\"\r\n                            class=\"name\">{{page.name}}</div>\r\n                        <div style=\"font-size: 0.8rem;color: var(--ion-color-vh-gray);\" class=\"status\">{{page.category}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"no-data\" *ngIf=\"listPageDrawer.length ==0\" nz-col nzSpan=\"24\">\r\n                {{'No data' | translate}}\r\n            </div>\r\n        </div>\r\n        <nz-spin [nzSpinning]=\"loadingDrawer\" nzTip=\"{{'Loading' | translate}}...\">\r\n        </nz-spin>\r\n    </ng-container>\r\n</nz-drawer>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FacebookComponent } from './facebook.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FacebookComponent\r\n  },\r\n  {\r\n    path: 'conversation',\r\n    loadChildren: () => import('./facebook-conversation/facebook-conversation.module').then(m => m.FacebookConversationModule)\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [FacebookComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class FacebookModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}