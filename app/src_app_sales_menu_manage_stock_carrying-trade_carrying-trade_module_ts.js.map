{"version":3,"file":"src_app_sales_menu_manage_stock_carrying-trade_carrying-trade_module_ts.js","mappings":"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","sources":["./src/app/sales/components/bill-type/bill-type-29-30/add/add.component.ts","./src/app/sales/components/bill-type/bill-type-29-30/add/add.component.html","./src/app/sales/components/bill-type/bill-type-29-30/bill-type-29-30.module.ts","./src/app/sales/components/bill-type/bill-type-29-30/dettail/dettail.component.ts","./src/app/sales/components/bill-type/bill-type-29-30/dettail/dettail.component.html","./src/app/sales/components/bill-type/bill-type-29-30/edit/edit.component.ts","./src/app/sales/components/bill-type/bill-type-29-30/edit/edit.component.html","./src/app/sales/menu/manage/stock/carrying-trade/add/add.component.ts","./src/app/sales/menu/manage/stock/carrying-trade/add/add.component.html","./src/app/sales/menu/manage/stock/carrying-trade/carrying-trade.component.ts","./src/app/sales/menu/manage/stock/carrying-trade/carrying-trade.component.html","./src/app/sales/menu/manage/stock/carrying-trade/carrying-trade.module.ts","./src/app/sales/menu/manage/stock/carrying-trade/detail/detail.component.ts","./src/app/sales/menu/manage/stock/carrying-trade/detail/detail.component.html","./src/app/sales/menu/manage/stock/carrying-trade/edit/edit.component.ts","./src/app/sales/menu/manage/stock/carrying-trade/edit/edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { DeliveryGoodsA4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a4/delivery-goods-a4.component';\r\nimport { DeliveryGoodsA5Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a5/delivery-goods-a5.component';\r\nimport { DeliveryGoodsK57Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k57-col3/delivery-goods-k57-col3.component';\r\nimport { DeliveryGoodsK80Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col3/delivery-goods-k80-col3.component';\r\nimport { DeliveryGoodsK80Col4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col4/delivery-goods-k80-col4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType2930Add, VhBillType2930DetailAdd } from '../bill-type2930-interface';\r\n\r\n\r\n@Component({\r\n  selector: 'bill-type2930-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  invoice: VhBillType2930Add = {\r\n    bill_type: 29,\r\n    date: new Date(),\r\n    discount: 0,\r\n    fee: 0,\r\n    id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n    id_branch_receive: '',\r\n    id_employee: this.vhAuth.getUser()._id,\r\n    note: '',\r\n    payment: 0,\r\n    payment_type: 2,\r\n    tax: 0,\r\n    total: 0,\r\n    bill_code: '',\r\n\r\n  }\r\n  invoice_detail: VhBillType2930DetailAdd[] = []\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  branchList: any = []\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  selected_branch: string = '';\r\n  branchDefault: any;\r\n  printer: any;\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    this.branchDefault = this.vhQuerySales.getDefaultBranch()\r\n    this.branchList = this.vhQuerySales.getlocalBranchs().filter(item => item._id != this.branchDefault._id)\r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n  }\r\n  /**\r\n   * bắt sk thay đổi chi nhánh nhận hàng\r\n   * @param event id_branch_selected\r\n   * @example this.changeBranch('DNIWUJNHDKIJWHDIU')\r\n   */\r\n  changeBranch(event) {\r\n    this.selected_branch = event\r\n    this.invoice.id_branch_receive = (event)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n    this.checkPrinter = this.printer.enable;\r\n    let tax = this.listTax.find(item => item.default);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n      this.invoice.tax = (tax['value']);\r\n    }\r\n\r\n\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n\r\n  /**\r\n   * lắng nghe sk nhấn f1 f2 f3 f4 trên bàn phím\r\n   * @example \r\n   */\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n          case 112: this.payInvoice(29, false)\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(29, true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      if (document.querySelector(\".discount-price\")) this.discount_price = this.vhAlgorithm.vhnumeral(\".discount-price\");\r\n      if (document.querySelector(\".invoice-fee\")) this.invoice_fee = this.vhAlgorithm.vhnumeral(\".invoice-fee\")\r\n    })\r\n\r\n  }\r\n  /**\r\n   *  hàm xóa sp trong bill_detail\r\n   * @param detail\r\n   * @example  this.deleteGoods(bill_detail_selected)\r\n   */\r\n  deleteGoods(detail: VhBillType2930DetailAdd) {\r\n    this.vhComponent.alertConfirm(\"\", \"\", `${this.lang.translate(\"Delete\")} ${detail.name}?`, \"OK\", this.lang.translate(\"Cancel\"))\r\n      .then(() => this.removeInvoiceDetail(detail.id_product), () => { })\r\n  }\r\n  searchProductList: boolean = false;\r\n  /**\r\n  * mở component chọn sp\r\n  * @example this.openSearchProductList()\r\n  */\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product)\r\n   * @param data sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(data) {\r\n    if (data) {\r\n      if (data.manylot && !data.lot_number) this.openModalChooseLot(data)\r\n      else\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_delivery_goods)\r\n          this.addInvoiceDetail(data);\r\n        else\r\n          this.addBill_Detail(data);\r\n    }\r\n\r\n    this.searchProductList = false;\r\n  }\r\n  /**\r\n   * trở về trang giao hàng\r\n   * @example this.goBack()\r\n   */\r\n  goBack() {\r\n    this.vhComponent.alertConfirm(`${this.lang.translate(\"Confirm\")}`, \"\", `${this.lang.translate(\"Are you sure to cancel this delivery note\")} ?`, \"OK\", this.lang.translate('Cancel'))\r\n      .then(() => { this.isExit = true; this.router.navigate([\"/sales/dashboard/manage/stock/delivery\"], { state: this.dataRestore }) }, () => { })\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi số lượng sp trong bill\r\n   * @param product \r\n   * @param event : giá trị thay đổi\r\n   * @example this.checkQuantityProduct(bill_detail_selected, 1)\r\n   */\r\n  checkQuantityProduct(product: VhBillType2930DetailAdd, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.setSubTotal();\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi đơn vị của bill_detail\r\n   * @param ev  ratio được chọn\r\n   * @param item\r\n   * @example  this.changeUnit(24, bill_detail_selected)\r\n   */\r\n  changeUnit(ev, item) {\r\n    let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n    if (unit) {\r\n      item.unit = unit.unit\r\n      item.price = parseFloat(unit.price)\r\n      item.ratio = parseFloat(unit.ratio)\r\n      item.price_origin = parseFloat(unit.price)\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhBillType2930DetailAdd;\r\n  /**\r\n   * mở modal thay đổi giá bán sản phẩm trong bill\r\n   * @param detail \r\n   * @example this.openEditUnitPrice(bilL_detail_selected)\r\n   */\r\n  openEditUnitPrice(detail: VhBillType2930DetailAdd) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút Ok modal giảm giá sp\r\n   * @example this.handleEditUnit()\r\n   */\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(2000, this.lang.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  /**\r\n   * tắt modal giảm giá sp\r\n   * @example this.handleCancelEditUnit()\r\n   */\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  /**\r\n   * bắt sk thay đổi nv bán hàng\r\n   * @param event id_employee selected\r\n   */\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi date của hóa đơn , gán lại giá trị date mới cho đơn\r\n   * @example this.setPickerTime('2023-06-12T08:02:27.697Z')\r\n   */\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.date)\r\n      this.invoice.date = (new Date(this.pickerTime));\r\n    }\r\n    else this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.date = (event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.date = (new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  /**\r\n   * bắt sk thay đổi thuế của bill\r\n   * @param event \r\n   */\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n  }\r\n  discount_price: any;\r\n  /**\r\n   * bắt sk thay đổi giảm giá của hóa đơn , gán lại giá trị giảm giá mới cho đơn\r\n   * @example this.editDiscount()\r\n   */\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0) {\r\n      this.invoice.discount = (parseFloat(this.discount_price.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.discount;\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    this.setTotal()\r\n  }\r\n  invoice_fee: any;\r\n  /**\r\n   * bắt sk thay đổi phí của hóa đơn , gán lại giá trị phí mới cho đơn\r\n   * @example this.editFee()\r\n   */\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.fee = (parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.fee;\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    this.setTotal()\r\n  }\r\n\r\n  /**\r\n   * trờ về trang danh sách hóa đơn sau khi đã thanh toán xong\r\n   * @example this.handle(true)\r\n   */\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/dashboard/manage/stock/delivery'], { state: this.dataRestore })\r\n  }\r\n  note: string;\r\n  /**\r\n   * bắt sk thay đổi note của bill\r\n   * @example this.edit_note()\r\n   */\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n  save_enable = true;\r\n  /**\r\n    * xử lý sk nhấn nút thanh toán hoặc lưu tạm\r\n    * @param bill_type \r\n    * @param print biến cờ để check in hay ko\r\n    * @example this.payInvoice(1)\r\n    */\r\n  payInvoice(bill_type: 29, print?) {\r\n    if (this.invoice.id_branch_receive) {\r\n      this.vhComponent.alertConfirm(\r\n        `${this.lang.translate(\"Delivery goods\")} ?`,\r\n        \"\", \"\", \"OK\", this.lang.translate(\"Cancel\")\r\n      ).then(() => {\r\n        if (this.save_enable) {\r\n          this.save_enable = false;\r\n          this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n            var arrayProcess: any[] = [this.createOrUpdate(bill_type)];\r\n            Promise.all(arrayProcess)\r\n              .then((bill) => {\r\n                this.save_enable = true;\r\n                this.vhComponent.hideLoading(0).then(() => {\r\n                  this.vhComponent.showToast(2000, `${this.lang.translate(\"Delivery note\")} ${this.lang.translate(\"has been updated successfully\")}`, \"success-toast\")\r\n                  if (print) this.handlePrint()\r\n                  else this.handle()\r\n                })\r\n              })\r\n          }).catch(err => { this.vhComponent.hideLoading(0) ;this.save_enable = true;})\r\n        }\r\n      }, () => { })\r\n    } else this.vhComponent.showToast(2000, this.lang.translate(\"Please select a branch\"), \"alert-toast\")\r\n  }\r\n  /**\r\n   * tạo bill lên DB\r\n   * @param bill_type \r\n   * @returns \r\n   */\r\n  createOrUpdate(bill_type: 29) {\r\n    return this.vhQuerySales.createBill_Billdetail(this.invoice, this.getCreateUpdateInvoiceDetail())\r\n  }\r\n\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n  /**\r\n   * kiểm tra dữ liệu thông tin máy in và mở component in\r\n   * @example this.handlePrint()\r\n   */\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice, invoice_detail: this.invoice_detail }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n    }, (err) => this.handle())\r\n  }\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return DeliveryGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return DeliveryGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return DeliveryGoodsK80Col4Component\r\n      case 'print_size_a5': return DeliveryGoodsA5Component\r\n      case 'print_size_a4': return DeliveryGoodsA4Component\r\n      default: return DeliveryGoodsA4Component\r\n    }\r\n  }\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.lang.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  /**\r\n   * trả về tên lô theo id_lot được chọn\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  /**\r\n   * lọc danh sách lô của sp theo số lô (lot_number)\r\n   * @param value \r\n   */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi id_lotnumber của bill-detail\r\n   * @param e id_lotnumber thay đổi\r\n   * @example this.changeLot('DNIUHWIDCHBIQOHSDOIHW')\r\n   */\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    \r\n\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot;\r\n    if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  /**\r\n   * thêm sản phẩm được chọn từ drawer search-product\r\n   * @param value \r\n   * @example this.addInvoiceDetail(product_selected)\r\n   */\r\n  addInvoiceDetail(value,) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * xử lý các trường của sp được chọn và thêm vào mảng local\r\n   * @param value \r\n   * @param new_price \r\n   * @example  this.addBill_Detail(product_selected)\r\n   */\r\n  addBill_Detail(product) {\r\n    let detail = {\r\n      id_product: product._id,\r\n      quantity: 1,\r\n      price: product.price_import,\r\n      price_origin: product.price_import,\r\n      unit: product.unit,\r\n      units: product.units,\r\n      ratio: product.ratio ? product.ratio : 1,\r\n      ptype: 1,\r\n      name: product.name,\r\n      id_subproduct: product.id_subproduct\r\n    }\r\n\r\n    if (product.lot_number) detail['lot_number'] = product.lot_number;\r\n    if (product.lots) detail['lots'] = product.lots;\r\n    if (product.id_lotproduct) detail['id_lotproduct'] = product.id_lotproduct;\r\n    if (product.id_subproduct) detail['id_subproduct'] = product.id_subproduct;\r\n\r\n    this.invoice_detail.push(detail)\r\n\r\n    this.setSubTotal()\r\n  }\r\n  /**\r\n   * xóa 1 bill_detail trong local\r\n   * @param id id_bill_detail selected\r\n   * @param notSetSub \r\n   */\r\n  removeInvoiceDetail(id: string) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      this.setSubTotal()\r\n    }\r\n  }\r\n  /**\r\n   * tính lại cộng tiền của bill khi có sự thay đổi (thêm xóa sửa bill_detail, đổi giá bán, khuyến mãi, phí ,thuế ,...)\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    this.subTotal = this.invoice_detail.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n    this.setTotal()\r\n  }\r\n  /**\r\n   * tính lại tổng tiền của bill để lưu trường total\r\n   * @example this.setTotal();\r\n   */\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal - this.invoice.discount + this.invoice.fee\r\n    this.setTaxValue()\r\n  }\r\n  /**\r\n   * tính giá trị thuế ra tiền\r\n   * @example this.setTaxValue()\r\n   */\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n  }\r\n  /**\r\n   * trả về tổng tiền \r\n   * @returns number\r\n   * @example let total = this.getTotalATax()\r\n   */\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n  /**\r\n   * trả về dữ liệu thông tin bill_detail clean để lưu DB\r\n   * @returns array[object]\r\n   *  @example let bill_details = this.getCreateUpdateInvoiceDetail()\r\n   */\r\n  public getCreateUpdateInvoiceDetail(): VhBillType2930DetailAdd[] {\r\n    return this.invoice_detail.map(item => {\r\n      let detail: VhBillType2930DetailAdd = {\r\n        id_product: item.id_product,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype,\r\n        ratio: item.ratio ? item.ratio : 1,\r\n      }\r\n      if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      if (item.price < item.price_origin) detail['price_origin'] = item.price_origin\r\n      return detail\r\n    })\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} |  <b> {{'Create delivery note' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Delivery note\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button class=\"btn-data nz-hover-border\" nz-button nzType=\"default\" (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail\">\r\n                    <div nz-row>\r\n                        <div (click)=\"deleteGoods(item)\" nz-col nzSpan=\"1\" class=\"center-col\">\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\" class=\"center-col\">\r\n                            <p class=\"max-width-two-line\"><b>{{item.name}}</b></p>\r\n                            <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre> \r\n                              </ng-container>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"3\">\r\n                            <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option> -->\r\n                                <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div class=\"text-align-self\" nz-col nzSpan=\"4\">\r\n                            <nz-input-number [nzMin]=\"1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\" (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number>\r\n                        </div>\r\n                        <div (click)=\"openEditUnitPrice(item)\" class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                            <p class=\"max-width-two-line\"><span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                    {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                    : ''}}\r\n                                </del>\r\n                            </p>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Prepared by' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\" (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Delivery branch' | translate}}</b>\r\n                        <span>{{branchDefault.name}}</span>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Receive branch' | translate}}</b>\r\n                        <nz-select nzPlaceHolder=\"{{'Select branch' | translate}}\" [(ngModel)]=\"selected_branch\" (ngModelChange)=\"changeBranch($event)\" nzBorderless>\r\n                            <nz-option *ngFor=\"let item of branchList\" nzLabel=\"{{item.name | translate}}\" [nzValue]=\"item._id\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                        class=\"nz-no-border discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"nz-no-border invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"invoice.note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length && !checkPrinter\" (click)=\" payInvoice(29,true)\" nz-button class=\"order-and-print\">\r\n                    {{\"Create & Print\"|translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"payInvoice(29,false)\" nz-button class=\"order\">\r\n                    {{\"Create\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<app-search-product-import *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\" (closeSearchProductList)=\"closeSearchProductList($event)\">\r\n</app-search-product-import>\r\n\r\n<!--Modal edit inut price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\" nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" [value]=\"tempDetail.price\" nz-input placeholder=\"{{'Enter unit price' | translate}}\" />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"8\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { DettailComponent } from './dettail/dettail.component';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { ComponentsBillType2Module } from 'src/app/sales/menu/manage/invoices/purchase/components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SearchModule } from '../../search/search.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DettailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    ComponentsBillType2Module,\r\n    TranslateModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SearchModule\r\n  ],\r\n  exports: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DettailComponent\r\n  ],\r\n})\r\nexport class BillType2930Module { }\r\n","\r\nimport { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { DeliveryGoodsA4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a4/delivery-goods-a4.component';\r\nimport { DeliveryGoodsA5Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a5/delivery-goods-a5.component';\r\nimport { DeliveryGoodsK57Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k57-col3/delivery-goods-k57-col3.component';\r\nimport { DeliveryGoodsK80Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col3/delivery-goods-k80-col3.component';\r\nimport { DeliveryGoodsK80Col4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col4/delivery-goods-k80-col4.component';\r\n\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType2930Edit, VhBillType2930DetailEdit, } from '../bill-type2930-interface';\r\n\r\n@Component({\r\n  selector: 'bill-type2930-detail',\r\n  templateUrl: './dettail.component.html',\r\n  styleUrls: ['./dettail.component.scss']\r\n})\r\nexport class DettailComponent {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  printer: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  invoice_detail: VhBillType2930DetailEdit[] = []\r\n  subTotal = 0;\r\n  public invoice: VhBillType2930Edit\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  branchList: any = this.vhQuerySales.getlocalBranchs().filter(item => item._id != this.vhQuerySales.getDefaultBranch()._id)\r\n  billInfo: any = this.router.getCurrentNavigation().extras.state.billInfo\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private lang: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.getDataInvoice(this.billInfo._id)\r\n\r\n  }\r\n\r\n  /**\r\n   * gán bill và bill-detail get được vào biến và get các thông tin của nv, khách hàng, phương thức thanh toán\r\n   * @example this.init(bill, bill-deails)\r\n   */\r\n  init(invoice: VhBillType2930Edit = null, invoiceDetail: VhBillType2930DetailEdit[] = null) {\r\n    this.invoice = invoice\r\n    this.invoice_detail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n    this.setSubTotal()\r\n  }\r\n  /**\r\n   * tính cộng tiền hóa đơn\r\n   * @example this.setSubTotal()\r\n   */\r\n  setSubTotal() {\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n  }\r\n\r\n  /**\r\n   * get dữ liệu bill từ DB\r\n   * @param id : nhận từ state truyền qua\r\n   * @example this.getDataInvoice('DHIWHNXDIWODUHIWDHOWID')\r\n   */\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * trả về tên unit của sản phẩm theo ratio truyền vào\r\n   * @param units \r\n   * @param ratio \r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([object], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  /**\r\n   * trả về chuỗi thông tin lô theo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let lot = this.getLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n   * xóa hóa đơn lên DB\r\n   * @example this.deleteInvoice()\r\n   */\r\n  deleteInvoice() {\r\n    this.vhQuerySales.getValidityDate(this.invoice.date).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", `${this.lang.translate(\"Delete\")}?`, \"OK\", this.lang.translate(\"Cancel\"))\r\n          .then(() => {\r\n            this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n              this.vhQuerySales.deleteBill_Billdetail(this.invoice._id).then(() => {\r\n                this.vhComponent.hideLoading(0).then(() => {\r\n                  this.vhComponent.showToast(2000,\r\n                    `${this.lang.translate(\"Delivery goods\")} ${this.invoice.bill_code} ${this.lang.translate(\"has been cancelled successfully\")}`, \"success-toast\")\r\n                  this.router.navigate(['/sales/dashboard/manage/stock/delivery'])\r\n                })\r\n              })\r\n            })\r\n          }, () => { })\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n\r\n  }\r\n  public goToCart() {\r\n    this.vhQuerySales.getValidityDate(this.invoice.date).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.router.navigate(['/sales/dashboard/manage/stock/delivery/edit'], { state: { invoiceDetail: this.invoice_detail, invoice: this.invoice, dataRestore: this.dataRestore, branchList: this.branchList } })\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /**\r\n   * kiểm tra thông tin dữ liệu trang in và mở component in\r\n   * @example this.printInvoice()\r\n   */\r\n  printInvoice() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice, invoice_detail: this.invoice_detail }, false, false, `modal-print-${printer['_id']}`)\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.lang.translate(\"Function\"), \"\", this.lang.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return DeliveryGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return DeliveryGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return DeliveryGoodsK80Col4Component\r\n      case 'print_size_a5': return DeliveryGoodsA5Component\r\n      case 'print_size_a4': return DeliveryGoodsA4Component\r\n      default: return DeliveryGoodsA4Component\r\n    }\r\n  }\r\n  goBack() {\r\n    this.router.navigate(['/sales/dashboard/manage/stock/delivery'], { state: this.dataRestore })\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#delivery-good-detail-invoice\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".delivery-good-detail-invoice-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#delivery-good-detail-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".delivery-good-detail-invoice-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"delivery-good-detail-invoice\" *ngIf=\"invoice\">\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header delivery-good-detail-invoice-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"14\" class=\"title\">\r\n                    <b>{{'Goods delivery receipt' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"custom-btn right-all-content\">\r\n                    <div *ngIf=\"invoice.bill_type == 29\">\r\n                        <button (click)=\"goToCart()\" class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon name=\"create-outline\"></ion-icon>\r\n                            {{'Edit' | translate}}\r\n                        </button>\r\n                    </div>\r\n                    <div>\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                    <div *ngIf=\"invoice.bill_type == 29\">\r\n                        <button (click)=\"deleteInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" name=\"trash-outline\"></ion-icon>\r\n                            {{'Delete' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoice_detail\" #rowSelectionTable nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"30%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"20%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                <td>{{item.name}}\r\n                                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                      <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                                    </ng-container></td>\r\n                                <td nzAlign='center'> {{getUnit(item.units, item.ratio)}}</td>\r\n                                <td nzAlign='center'>{{item.quantity}}</td>\r\n                                <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills not-continue-sell\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Date' | translate}}</b>\r\n                    <div>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Prepared by' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name']}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Receive branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name_reception']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                    <div>\r\n                      {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n          \r\n                  </div> \r\n                  <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                  </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { DeliveryGoodsA4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a4/delivery-goods-a4.component';\r\nimport { DeliveryGoodsA5Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-a5/delivery-goods-a5.component';\r\nimport { DeliveryGoodsK57Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k57-col3/delivery-goods-k57-col3.component';\r\nimport { DeliveryGoodsK80Col3Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col3/delivery-goods-k80-col3.component';\r\nimport { DeliveryGoodsK80Col4Component } from 'src/app/sales/components/print/delivery-goods/delivery-goods-k80-col4/delivery-goods-k80-col4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType2930Edit, VhBillType2930DetailEdit, VhBillType2930DetailAdd } from '../bill-type2930-interface';\r\n@Component({\r\n  selector: 'bill-type2930-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  invoice: VhBillType2930Edit = this.router.getCurrentNavigation().extras.state.invoice\r\n  invoice_detail: VhBillType2930DetailEdit[] = this.router.getCurrentNavigation().extras.state.invoiceDetail\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  branchList: any = []\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  selected_branch: string = '';\r\n  branchDefault: any;\r\n  printer: any;\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.employee = this.vhAuth.getlocalEmployee(this.invoice.id_employee);\r\n    this.branchDefault = this.vhQuerySales.getDefaultBranch()\r\n    this.branchList = this.vhQuerySales.getlocalBranchs().filter(item => item._id != this.branchDefault._id)\r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n    this.selected_branch = this.invoice.id_branch_receive\r\n  }\r\n  changeBranch(event) {\r\n    this.selected_branch = event\r\n    this.invoice.id_branch_receive = (event)\r\n  }\r\n  ngOnInit(): void {\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n    this.checkPrinter = this.printer.enable;\r\n    let tax = this.listTax.find(item => item.default);\r\n    if (tax) {\r\n      this.id_tax = tax._id\r\n      this.invoice.tax = (tax['value']);\r\n    }\r\n    //tính tổng tiền\r\n    let subTotal = 0;\r\n    for (let i of this.invoice_detail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice_detail.length > 0) {\r\n        switch (keycode) {\r\n          case 112: this.payInvoice(29, false)\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(29, true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      if (document.querySelector(\".discount-price\")) this.discount_price = this.vhAlgorithm.vhnumeral(\".discount-price\");\r\n      if (document.querySelector(\".invoice-fee\")) this.invoice_fee = this.vhAlgorithm.vhnumeral(\".invoice-fee\")\r\n    })\r\n\r\n  }\r\n  deleteGoods(detail: VhBillType2930DetailEdit) {\r\n    this.vhComponent.alertConfirm(\"\", \"\", `${this.lang.translate(\"Delete\")} ${detail.name}?`, \"OK\", this.lang.translate(\"Cancel\"))\r\n      .then(() => this.removeInvoiceDetail(detail.id_product), () => { })\r\n  }\r\n  searchProductList: boolean = false;\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  closeSearchProductList(data) {\r\n    if (data) {\r\n      if (data.manylot && !data.lot_number) this.openModalChooseLot(data)\r\n      else\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_delivery_goods)\r\n          this.addInvoiceDetail(data);\r\n        else\r\n          this.addBill_Detail(data);\r\n    }\r\n\r\n    this.searchProductList = false;\r\n  }\r\n  goBack() {\r\n    this.vhComponent.alertConfirm(`${this.lang.translate(\"Confirm\")}`, \"\", `${this.lang.translate(\"Are you sure to cancel this delivery note\")} ?`, \"OK\", this.lang.translate('Cancel'))\r\n      .then(() => { this.isExit = true; this.router.navigate([\"/sales/dashboard/manage/stock/delivery\"], { state: this.dataRestore }) }, () => { })\r\n  }\r\n  checkQuantityProduct(product: VhBillType2930DetailEdit, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.setSubTotal();\r\n  }\r\n\r\n  changeUnit(ev, item) {\r\n    let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n    if (unit) {\r\n      item.unit = unit.unit\r\n      item.price = parseFloat(unit.price)\r\n      item.ratio = parseFloat(unit.ratio)\r\n      item.price_origin = parseFloat(unit.price)\r\n    }\r\n    this.setSubTotal()\r\n  }\r\n\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhBillType2930DetailEdit;\r\n  openEditUnitPrice(detail: VhBillType2930DetailEdit) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(2000, this.lang.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  closeAndReceiveEmployee(event) {\r\n    if (event) {\r\n      this.invoice.id_employee = (event);\r\n    }\r\n  }\r\n  setPickerTime(event) {\r\n    if (new Date(event).getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 5000)\r\n      this.pickerTime = new Date(this.invoice.date)\r\n      this.invoice.date = (new Date(this.pickerTime));\r\n    }\r\n    else this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n      if (validitydate == null) {\r\n        this.invoice.date = (event);\r\n      }\r\n      else {\r\n        this.pickerTime = new Date(validitydate)\r\n        this.invoice.date = (new Date(this.pickerTime));\r\n        this.vhComponent.alertMessageDesktop(\"warning\", `${this.lang.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 5000)\r\n      }\r\n    })\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.tax = (tax.value);\r\n    this.setTaxValue();\r\n  }\r\n  discount_price: any;\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0) {\r\n      this.invoice.discount = (parseFloat(this.discount_price.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.discount;\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n    this.setTotal()\r\n  }\r\n  invoice_fee: any;\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.fee = (parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.fee;\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n    this.setTotal()\r\n  }\r\n\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/dashboard/manage/stock/delivery'], { state: this.dataRestore })\r\n  }\r\n  note: string;\r\n  edit_note() {\r\n    if (this.note) {\r\n      this.invoice.note = (this.note)\r\n    }\r\n  }\r\n\r\n  payInvoice(bill_type: 29, print?) {\r\n    if (this.invoice.id_branch_receive) {\r\n      this.vhComponent.alertConfirm(\r\n        `${this.lang.translate(\"Xác nhận lưu thay đổi\")} ?`,\r\n        \"\", \"\", \"OK\", this.lang.translate(\"Cancel\")\r\n      ).then(() => {\r\n        this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n          var arrayProcess: any[] = [this.createOrUpdate(bill_type)];\r\n          Promise.all(arrayProcess)\r\n            .then((bill) => {\r\n              this.vhComponent.hideLoading(0).then(() => {\r\n                this.vhComponent.showToast(2000, `${this.lang.translate(\"Delivery note\")} ${this.lang.translate(\"has been updated successfully\")}`, \"success-toast\")\r\n                if (print) this.handlePrint()\r\n                else this.handle()\r\n              })\r\n            })\r\n        }).catch(err => { this.vhComponent.hideLoading(0) })\r\n      }, () => { })\r\n    } else this.vhComponent.showToast(2000, this.lang.translate(\"Please select a branch\"), \"alert-toast\")\r\n  }\r\n  createOrUpdate(bill_type: 29) {\r\n    return this.vhQuerySales.updateBill_Billdetail(this.invoice._id,this.invoice, this.getCreateUpdateInvoiceDetail())\r\n  }\r\n\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice ,invoice_detail: this.invoice_detail}, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n    }, (err) => this.handle())\r\n  }\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return DeliveryGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return DeliveryGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return DeliveryGoodsK80Col4Component\r\n      case 'print_size_a5': return DeliveryGoodsA5Component\r\n      case 'print_size_a4': return DeliveryGoodsA4Component\r\n      default: return DeliveryGoodsA4Component\r\n    }\r\n  }\r\n  // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.lang.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if (!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  handleChooseLot() {\r\n    \r\n\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot;\r\n    if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  addInvoiceDetail(value,) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.invoice_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.invoice_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.invoice_detail[index]['quantity'] < 9999999999) this.invoice_detail[index]['quantity'] += 1\r\n          this.setSubTotal()\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  addBill_Detail(product) {\r\n    let detail: any = {\r\n      id_product: product._id,\r\n      quantity: 1,\r\n      price: product.price_import,\r\n      price_origin: product.price_import,\r\n      unit: product.unit,\r\n      units: product.units,\r\n      ratio: product.ratio ? product.ratio : 1,\r\n      ptype: 1,\r\n      name: product.name,\r\n      id_subproduct: product.id_subproduct\r\n    }\r\n\r\n    if (product.lot_number) detail['lot_number'] = product.lot_number;\r\n    if (product.lots) detail['lots'] = product.lots;\r\n    if (product.id_lotproduct) detail['id_lotproduct'] = product.id_lotproduct;\r\n    if (product.id_subproduct) detail['id_subproduct'] = product.id_subproduct;\r\n\r\n    this.invoice_detail.push(detail)\r\n\r\n    this.setSubTotal()\r\n  }\r\n  removeInvoiceDetail(id: string) {\r\n    let index = this.invoice_detail.findIndex(detail => detail['id_product'] == id)\r\n    if (index != -1) {\r\n      this.invoice_detail.splice(index, 1);\r\n      this.setSubTotal()\r\n    }\r\n  }\r\n  setSubTotal() {\r\n    this.subTotal = this.invoice_detail.reduce((prev: number, next) => prev + next.quantity * next.price, 0)\r\n    this.setTotal()\r\n  }\r\n  setTotal() {\r\n    this.invoice.total = this.subTotal - this.invoice.discount + this.invoice.fee\r\n    this.setTaxValue()\r\n  }\r\n  setTaxValue() {\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n  }\r\n  getTotalATax(): number {\r\n    return this.invoice.total + this.taxValue\r\n  }\r\n  public getCreateUpdateInvoiceDetail(): VhBillType2930DetailAdd[] {\r\n    return this.invoice_detail.map(item => {\r\n      let detail: VhBillType2930DetailAdd = {\r\n        id_product: item.id_product,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype,\r\n        ratio: item.ratio ? item.ratio : 1,\r\n      }\r\n      if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      if (item.price < item.price_origin) detail['price_origin'] = item.price_origin\r\n      return detail\r\n    })\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}  | <b> {{'Edit delivery note' | translate}}</b>\r\n</div>\r\n\r\n<nz-layout>\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"12\" class=\"title\">\r\n                    <b>{{\"Delivery note\" | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"12\" class=\"right-all-content\">\r\n                    <div>\r\n                        <button class=\"btn-data nz-hover-border\" nz-button nzType=\"default\" (click)=\"openSearchProductList()\">\r\n                            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n                            {{'Search (F4)' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"!invoice_detail.length\" class=\"no-data\">\r\n                    <p>{{'Please select a product' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice_detail\">\r\n                    <div nz-row>\r\n                        <div (click)=\"deleteGoods(item)\" nz-col nzSpan=\"1\" class=\"center-col\">\r\n                            <i nz-icon nzType=\"close\" nzTheme=\"outline\" style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\" class=\"center-col\">\r\n                            <p class=\"max-width-two-line\"><b>{{item.name}}</b></p>\r\n                            <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre> \r\n                              </ng-container>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"3\">\r\n                            <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\" (ngModelChange)=\"changeUnit($event,item)\">\r\n                                <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"-1\"></nz-option> -->\r\n                                <nz-option *ngFor=\"let i of item.units,index as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\"></nz-option>\r\n                            </nz-select>\r\n                        </div>\r\n                        <div class=\"text-align-self\" nz-col nzSpan=\"4\">\r\n                            <nz-input-number [nzMin]=\"1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\" (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number>\r\n                        </div>\r\n                        <div (click)=\"openEditUnitPrice(item)\" class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                            <p class=\"max-width-two-line\"><span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                                <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                    {{item.price_origin > item.price ? vhAlgorithm.vhcurrencyunit(item.price_origin)\r\n                                    : ''}}\r\n                                </del>\r\n                            </p>\r\n                        </div>\r\n                        <div nz-col nzSpan=\"4\" class=\"money-sub\">\r\n                            <p class=\"max-width-two-line\">\r\n                                <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div class=\"sales-bills-staff-name\">\r\n                        <b>{{'Prepared by' | translate}}</b>\r\n                        <app-staff [id_employee]=\"invoice.id_employee\" (closeAndReceiveEmployee)=\"closeAndReceiveEmployee($event)\"></app-staff>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless nzShowTime style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Delivery branch' | translate}}</b>\r\n                        <span>{{branchDefault.name}}</span>\r\n                    </div>\r\n                    <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n                        <b>{{'Receive branch' | translate}}</b>\r\n                        <nz-select nzPlaceHolder=\"{{'Select branch' | translate}}\" [(ngModel)]=\"selected_branch\" (ngModelChange)=\"changeBranch($event)\" nzBorderless>\r\n                            <nz-option *ngFor=\"let item of branchList\" nzLabel=\"{{item.name | translate}}\" [nzValue]=\"item._id\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <div>{{'SubTotal' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" *ngIf=\"!printer.discount_hidden\">\r\n                    <div>{{'Discount value' | translate}}</div>\r\n                    <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.discount)\"\r\n                        class=\"nz-no-border discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" *ngIf=\"!printer.fee_hidden\">\r\n                    <div>{{'Fee' | translate}}</div>\r\n                    <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.fee)\"\r\n                        class=\"nz-no-border invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n                </div>\r\n                <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" *ngIf=\"!printer.tax_hidden\">\r\n                    <div>{{'Tax' | translate}}</div>\r\n                    <div>\r\n                        <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\"\r\n                            nzBorderless>\r\n                            <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n                            </nz-option>\r\n                        </nz-select>\r\n                        <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n                    </div>\r\n                    <div>\r\n                        {{vhAlgorithm.vhcurrencyunit(taxValue)}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <div>{{'Total' | translate}}</div>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(getTotalATax())}}</div>\r\n                </div>\r\n                <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\" *ngIf=\"!printer.note_hidden\">\r\n                    <textarea class=\"nz-hover-border\" [(ngModel)]=\"invoice.note\" (blur)=\"edit_note()\" nz-input\r\n                        placeholder=\"{{'Enter note...' | translate}}\"\r\n                        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!invoice_detail.length && !checkPrinter\" (click)=\" payInvoice(29,true)\" nz-button class=\"order-and-print\">\r\n                    {{\"Save & Print\"|translate}} (F2)\r\n                </button>\r\n                <button [disabled]=\"!invoice_detail.length\" (click)=\"payInvoice(29,false)\" nz-button class=\"order\">\r\n                    {{\"Save\"|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<app-search-product-import *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\" (closeSearchProductList)=\"closeSearchProductList($event)\">\r\n</app-search-product-import>\r\n\r\n<!--Modal edit inut price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\" nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n            <div nz-col nzSpan=\"16\">\r\n                <input class=\"unit_price\" [value]=\"tempDetail.price\" nz-input placeholder=\"{{'Enter unit price' | translate}}\" />\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n            <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n                <div nz-col nzSpan=\"24\">\r\n                    <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;\">\r\n                        <div nz-row>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                {{item.lot_number}}\r\n                            </div>\r\n\r\n                            <div nz-col nzSpan=\"8\">\r\n                                NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                            <div nz-col nzSpan=\"8\">\r\n                                HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </label>\r\n                </div>\r\n\r\n            </div>\r\n        </nz-radio-group>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent   {\r\n  \r\n}\r\n","<bill-type2930-add></bill-type2930-add>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhDeliveryGood } from 'src/app/sales/interface/vh-delivey-goods';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-carrying-trade',\r\n  templateUrl: './carrying-trade.component.html',\r\n  styleUrls: ['./carrying-trade.component.scss']\r\n})\r\nexport class CarryingTradeComponent implements OnInit {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  public searchValue: string = ''\r\n  public invoiceShow: VhDeliveryGood[] = []\r\n  public invoice: VhDeliveryGood[];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  tableHeight: string;\r\n  branchList: Array<any> = []\r\n  loadingStatus: boolean = false\r\n  constructor(\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.dataRestore) {\r\n      this.searchValue = this.dataRestore.searchValue\r\n      this.date = [new Date(this.dataRestore.startTime), new Date(this.dataRestore.endTime)];\r\n      this.invoice = this.dataRestore.ininvoice\r\n      this.getInvoice()\r\n    }\r\n    // this.getInvoice()\r\n  }\r\n  /**\r\n   * lọc bill theo bill_code\r\n   */\r\n  searchBill(value: string) {\r\n    if (value && value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoice, ['bill_code'])\r\n    } else this.invoiceShow = [...this.invoice]\r\n  }\r\n  /**\r\n   * get danh sách hóa đơn chuyển hàng bill-type 29 30\r\n   */\r\n  getInvoice() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\", null, 0, false).then(() => {\r\n      Promise.all(\r\n        [this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, bill_type: { $in: [29, 30] }, id_branch: { $eq: this.vhQuerySales.getDefaultBranch()._id } }, {}, {}, 0)]).then((res: any) => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.branchList = this.vhQuerySales.getlocalBranchs()\r\n            this.invoice = res[0].map(item => {\r\n              return {\r\n                ...item,\r\n                branch_name: this.checkBranchName(item.id_branch),\r\n                branch_name_reception: this.checkBranchName(item.id_branch_receive),\r\n                status: this.checkBillType(item.bill_type),\r\n                total: item.total *(1+ item.tax /100)\r\n              }\r\n            }).reverse()\r\n            this.loadingStatus = true\r\n            this.invoiceShow = [...this.invoice]\r\n            \r\n            this.searchBill(this.searchValue)\r\n          })\r\n        }).catch(err => { this.vhComponent.hideLoading(0); console.error(err) })\r\n    })\r\n  }\r\n  /**\r\n   * trả về tên loại hóa đơn theo bill_type\r\n   * @example let status = this.checkBillType(29)\r\n   */\r\n  checkBillType(bill_type) {\r\n    //kiểm tra loại hóa đơn\r\n    switch (bill_type) {\r\n      case 29: { return (this.lang.translate(\"Delivering goods\")); }\r\n      case 30: { return (this.lang.translate(\"Delivered goods\")); }\r\n    }\r\n  }\r\n  /**\r\n   * trả về tên chi nhánh theo id_branch truyền vào\r\n   */\r\n  checkBranchName(id) {\r\n    return this.vhQuerySales.getlocalBranch(id).name\r\n  }\r\n  goToCart() {\r\n    let dataRestore = { searchValue: this.searchValue, startTime: this.date[0], endTime: this.date[1], invoice: this.invoice }\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/delivery/add\"], { state: { dataRestore, branchList: this.branchList } })\r\n  }\r\n\r\n  goToDetail(bill) {\r\n    let dataRestore = { searchValue: this.searchValue, startTime: this.date[0], endTime: this.date[1], invoice: this.invoice }\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/delivery/detail\"], { state: { billInfo: bill, dataRestore, branchList: this.branchList } })\r\n  }\r\n  onCurrentPageDataChange(event) { }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#delivery-goods\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".delivery-goods-header\")) {\r\n      this.tableHeight = document.querySelector(\"#delivery-goods\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".delivery-goods-header\").clientHeight - 60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#delivery-goods\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".delivery-goods-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock\"])\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   * @example this.changeTime(['2023-06-27T01:21:41.397Z','2023-06-27T01:21:41.397Z'])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <=  this.fncService.checkDateReport() * 86000000) {\r\n      //this.getExpenses(new Date(this.date[0].setHours(0, 0, 0, 0)), new Date(this.date[1].setHours(23, 59, 59, 59)));\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.lang.translate(\"days\"))\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  branch_nameCol = false;\r\n  branch_name_receptionCol = false;\r\n  payment_nameCol = false;\r\n  statusCol = false;\r\n  totalCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collect\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'date':\r\n        if(this.dateCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if(this.bill_codeCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'branch_name':\r\n        if(this.branch_nameCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'branch_name_reception':\r\n        if(this.branch_name_receptionCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'payment_name':\r\n        if(this.payment_nameCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'status':\r\n        if(this.statusCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'total':\r\n        if(this.totalCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"delivery-goods\">\r\n    <div nz-row class=\"delivery-goods-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title left-all-content\">\r\n            <b>{{'Delivery goods'| translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"title left-all-content\">\r\n            <nz-input-group style=\"margin-right : 10px;\" [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input placeholder=\"{{'Search for receipt code' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"date-picker-cus\">\r\n            <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n        </div>\r\n        <div nz-col class=\"right-all-content\" nzSpan=\"6\">\r\n            <div>\r\n                <button class=\"btn-green center-all-content ml-3\" nz-button nzType=\"default\" (click)=\"getInvoice()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n            <div>\r\n                <button (click)=\"goToCart()\" class=\"btn-green right-all-content\" nz-button nzType=\"default\">\r\n                    <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\r\n                    {{'Create delivery note' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n        <nz-table nzNoResult=\"{{'No data' | translate}}\" [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\" #detailData nzShowPagination nzShowSizeChanger [nzData]=\"invoiceShow\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" nzLeft nzAlign='left' (click)=\"dateCol = !dateCol;sortTable('date')\">\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzLeft nzAlign='left' (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"branch_nameCol = !branch_nameCol;sortTable('branch_name')\">\r\n                        <b>{{'Delivery branch' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"branch_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"branch_name_receptionCol = !branch_name_receptionCol;sortTable('branch_name_reception')\">\r\n                        <b>{{'Receive branch' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"branch_name_receptionCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"statusCol = !statusCol;sortTable('status')\">\r\n                        <b>{{'Status' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='right' (click)=\"totalCol = !totalCol;sortTable('total')\">\r\n                        <b>{{'Total' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"totalCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr (click)=\"goToDetail(invoice)\" *ngFor=\"let invoice of detailData.data;let i = index\" style=\"cursor: pointer;\">\r\n                    <td nzLeft nzAlign='left'>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</td>\r\n                    <td nzLeft nzAlign='left'>{{invoice.bill_code}}</td>\r\n                    <td nzAlign='left'>{{invoice['branch_name']}}</td>\r\n                    <td nzAlign='left'>{{invoice['branch_name_reception']}}</td>\r\n                    <td nzAlign='left'>{{invoice['status']}}</td>\r\n                    <td nzAlign='right' style=\"color:var(--ion-color-vh-green)\">\r\n                        <b>{{vhAlgorithm.vhcurrencyunit(invoice['total'])}}</b>\r\n                    </td>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CarryingTradeComponent } from './carrying-trade.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AddComponent } from './add/add.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { CanLeavePage } from 'src/app/canLeavePage';\r\nimport { BillType2930Module } from 'src/app/sales/components/bill-type/bill-type-29-30/bill-type-29-30.module';\r\nimport { EditComponent } from './edit/edit.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: CarryingTradeComponent\r\n  },\r\n  {\r\n    path: \"add\",\r\n    component: AddComponent,\r\n   \r\n  },\r\n  {\r\n    path: \"detail\",\r\n    component: DetailComponent,\r\n  },\r\n  {\r\n    path: \"edit\",\r\n    component: EditComponent,\r\n  }\r\n]\r\n\r\n\r\n@NgModule({\r\n  declarations: [CarryingTradeComponent, AddComponent, DetailComponent, EditComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ScrollingModule,\r\n    BillType2930Module\r\n  ]\r\n})\r\nexport class CarryingTradeModule { }\r\n"," \r\nimport { ChangeDetectorRef, Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent { \r\n}\r\n","<bill-type2930-detail></bill-type2930-detail>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<bill-type2930-edit></bill-type2930-edit>"],"names":[],"sourceRoot":"webpack:///"}