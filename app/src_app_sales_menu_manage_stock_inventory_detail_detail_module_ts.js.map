{"version":3,"file":"src_app_sales_menu_manage_stock_inventory_detail_detail_module_ts.js","mappings":"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","sources":["./src/app/sales/components/bill-type/bill-type-14/add/add.component.ts","./src/app/sales/components/bill-type/bill-type-14/add/add.component.html","./src/app/sales/components/bill-type/bill-type-14/bill-type-14.module.ts","./src/app/sales/components/bill-type/bill-type-14/bill-type14.service.ts","./src/app/sales/components/bill-type/bill-type-14/detail/detail.component.ts","./src/app/sales/components/bill-type/bill-type-14/detail/detail.component.html","./src/app/sales/components/bill-type/bill-type-14/edit/edit.component.ts","./src/app/sales/components/bill-type/bill-type-14/edit/edit.component.html","./src/app/sales/menu/manage/stock/inventory/detail/cart/cart.component.ts","./src/app/sales/menu/manage/stock/inventory/detail/cart/cart.component.html","./src/app/sales/menu/manage/stock/inventory/detail/detail.component.ts","./src/app/sales/menu/manage/stock/inventory/detail/detail.component.html","./src/app/sales/menu/manage/stock/inventory/detail/detail.module.ts","./src/app/sales/menu/manage/stock/inventory/detail/edit/edit.component.ts","./src/app/sales/menu/manage/stock/inventory/detail/edit/edit.component.html","./src/app/sales/menu/manage/stock/inventory/detail/note/note.component.ts","./src/app/sales/menu/manage/stock/inventory/detail/note/note.component.html","./src/app/sales/menu/manage/stock/inventory/detail/search-goods-inventory/search-goods-inventory.component.ts","./src/app/sales/menu/manage/stock/inventory/detail/search-goods-inventory/search-goods-inventory.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { Observable } from 'rxjs';\r\nimport { InventoryA45Component } from 'src/app/sales/components/print/inventory/A45/inventory-a45/inventory-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType14Add, VhBillType14BillDetail } from '../bill-type14-interface';\r\n\r\n@Component({\r\n  selector: 'bill-type14-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  visible_products: boolean = false;\r\n  name_product: string = '';\r\n  listProduct: Array<any> = [];\r\n  tempListProduct: Array<any> = [];\r\n  inventory_times: any;\r\n  employees: Array<any> = [];\r\n  employeeSelected: any;\r\n\r\n  inventory_detail: VhBillType14BillDetail[] = [];\r\n  search_lists: any = [];\r\n  list_show_products = []\r\n  currentProduct: any = {\r\n    quantity: 0\r\n  };\r\n  inventory: VhBillType14Add\r\n  note: string = \"\";\r\n\r\n  /**--------------------- */\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private nzModalService: NzModalService\r\n\r\n  ) {\r\n    let inventory_times = this.router.getCurrentNavigation().extras.state.inventory_times;\r\n    if (inventory_times) {\r\n      this.inventory_times = inventory_times;\r\n      this.inventory = {\r\n        bill_type: 14,\r\n        date: new Date(),\r\n        id_branch: this.vhQuerySales.getDefaultBranch()._id,\r\n        id_employee: this.vhAuth.getUser()._id,\r\n        id_inventorytime: this.inventory_times._id,\r\n        note: '',\r\n        bill_code: ''\r\n      }\r\n    }\r\n    // ----lắng nghe sự kiện f4 để show nz-drawer----\r\n    window.addEventListener('keydown', (event: KeyboardEvent) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 115) {\r\n        this.visible_products = !this.visible_products;\r\n      }\r\n    });\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 30 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.employees = this.vhAuth.getlocalEmployees();\r\n    this.employeeSelected = this.vhAuth.getUser()._id;\r\n    this.inventory.id_employee = (this.employeeSelected);\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory/detail\"], { state: { inventory_times: this.inventory_times ? this.inventory_times : this.vhQuerySales.getlocalInventorytime(this.inventory.id_inventorytime) } });\r\n  }\r\n\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product-import)\r\n   * @param item sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(item) {\r\n    // this.visible_products = false;\r\n    if (item) {\r\n      this.currentProduct = item;\r\n      this.currentProduct.quantity = 0;\r\n      if (item.manylot && !item.id_lotproduct) this.openModalChooseLot(item)\r\n      else this.addProductInventory(item)\r\n    }\r\n    else this.visible_products = false;\r\n  }\r\n\r\n  /**\r\n   * kiểm tra số lượng đã nhập co hợp lệ hay ko\r\n   * @param value sản phẩm thay đổi sl\r\n   * @example this.checkedProduct(product_selected)\r\n   */\r\n  checkedProduct(value) {\r\n    if (value.quantity < 0 || value.quantity == null) {\r\n      value.quantity = 0;\r\n    }\r\n    this.setQuantityProduct(value)\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút xóa sp khỏi bill_detail\r\n   * @param item \r\n   * @example this.deleteProduct(product_selected)\r\n   */\r\n  deleteProduct(item) {\r\n    this.vhComponent.alertConfirm(\r\n      (this.lang.translate(\"Confirm\")), \"\",\r\n      (this.lang.translate(\"Are you sure to delete this product?\")),\r\n      \"OK\",\r\n      (this.lang.translate(\"Cancel\"))\r\n    )\r\n      .then(\r\n        () => {\r\n          this.deleteProductInventory(item);\r\n          this.list_show_products = this.inventory_detail\r\n          this.search_lists = this.inventory_detail\r\n        },\r\n        () => { }\r\n      );\r\n  }\r\n  /**\r\n   * tạo bill lên DB\r\n   * @param bill_type \r\n   * @returns  Promise => object = {} or null\r\n   */\r\n  createOrUpdate(bill_type: 13 | 14) {\r\n    return this.vhQuerySales.createBill_Billdetail(this.createOrUpdateInventory(bill_type), this.getCreateUpdateInventoryDetail())\r\n  }\r\n  save_enable = true;\r\n  /**\r\n   * bắt sk nhấn nút lưu phiếu hoặc lưu tạm\r\n   * @param bill_type \r\n   * @param print biến cờ để check in hay ko\r\n   * @example this.exportInventory(13)\r\n   */\r\n  exportInventory(bill_type: 13 | 14, print?) {\r\n    this.inventory.note = (this.note);\r\n    this.vhComponent.alertConfirm(\"\", \"\",\r\n      bill_type == 13 ? this.lang.translate('Confirmed Complete ?') : this.lang.translate('Confirmed save ?'),\r\n      \"Ok\", this.lang.translate('Cancel')\r\n    ).then(() => {\r\n      if (this.save_enable) {\r\n        this.save_enable = false;\r\n        this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n          this.createOrUpdate(bill_type).then(() => {\r\n            this.save_enable = true;\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(2000, this.lang.translate(\"Inventory note has been created successfully\"), 'success-toast')\r\n              if (print) {\r\n                this.showPrint()\r\n              } else {\r\n                this.isExit = true\r\n                this.goBack();\r\n              }\r\n\r\n            }).catch(()=>{\r\n              \r\n            })\r\n          })\r\n        })\r\n      }\r\n    }).catch(() => { })\r\n  }\r\n\r\n  /**\r\n   * lọc các sp trong bill_detail đã chọn\r\n   * @param value \r\n   * @example this.searchProduct('')\r\n   */\r\n  searchProduct(value) {\r\n    if (value)\r\n      this.list_show_products = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.search_lists, ['barcode', 'name'])\r\n    else this.list_show_products = this.search_lists\r\n  }\r\n  /*----------Print------------------*/\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_inventory')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n  * @example this.showPrint() \r\n  */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      let billInfo = {\r\n        total_checked: this.getTotalRealQuantity(),\r\n        employee: {\r\n          name: this.vhAuth.getlocalEmployee(this.inventory.id_employee).name\r\n        },\r\n        ...this.inventory\r\n      }\r\n      this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { billInfo: billInfo, billDetails: this.inventory_detail, printer: printer }, false, false, `modal-print-${printer['_id']}`).then(modal => {\r\n        modal.onWillDismiss().then(() => { this.isExit = true; this.goBack() })\r\n      })\r\n    }, (err) => {\r\n      this.nzModalService.warning({\r\n        nzTitle: this.lang.translate(\"Please turn on the printer function\"),\r\n        nzOnOk: () => {\r\n          this.isExit = true;\r\n          this.goBack();\r\n        }\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'K80-3' | 'A4') {\r\n    switch (type) {\r\n      default: return InventoryA45Component\r\n    }\r\n  }\r\n  /** ===============Thoát trang==============*/\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Bạn muốn thoát và không chỉnh sửa phiếu kiểm này?\"), \"OK\", (this.lang.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  tempDetail: any;\r\n  /**\r\n   * trả về tên lô theo id_lot được chọn\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n   * lọc danh sách lô của sp theo số lô (lot_number)\r\n   * @param value \r\n   */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n\r\n    this.show_modal_select_lots = true;\r\n    data.lots = data.lots.map(e => { return { ...e, quantity: 0 } })\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    \r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    \r\n\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot;\r\n    for (let i of this.tempDetail.lots) {\r\n      if (i.choose) {\r\n        this.addProductInventory({ ...this.tempDetail, id_lotproduct: i._id, lot_number: i.lot_number });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  // ********************* Xử lý Inventory detail ***************************\r\n  public addProductInventory(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.inventory_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.inventory_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.inventory_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.inventory_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n     * xử lý các trường của sp được chọn và thêm vào mảng local\r\n     * @param value \r\n     * @example  this.addBill_Detail(product_selected)\r\n     */\r\n  addBill_Detail(value: any) {\r\n    let detail: VhBillType14BillDetail = {\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: value.quantity ? value.quantity : 0,\r\n      ptype: value.type,\r\n      unit: value.unit,\r\n      units: value.units ? value.units : [],\r\n      ratio: value.ratio ? value.ratio : 1,\r\n    }\r\n\r\n    if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n    if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.lots) {\r\n      detail['lots'] = value.lots;\r\n      detail['quantity'] = value.lots.find(e => e._id == value.id_lotproduct).quantity\r\n    }\r\n    if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n    this.inventory_detail.unshift(detail)\r\n    this.list_show_products = this.inventory_detail;\r\n    this.search_lists = this.inventory_detail\r\n  }\r\n  /**\r\n   * set quantity vào bill_detail được chọn\r\n   * @param product \r\n   * @example this.setQuantityProduct(product_selected)\r\n   */\r\n  public setQuantityProduct(product) {\r\n    let index: number = this.inventory_detail.findIndex(item => item['id_product'] == product._id);\r\n    if (index != -1) {\r\n      this.inventory_detail[index]['quantity'] = product.quantity;\r\n    }\r\n  }\r\n  /**\r\n   * xóa bill_detail trong mảng local\r\n   * @param index \r\n   * @example this.deleteProductInventory(1) \r\n    */\r\n  public deleteProductInventory(index) {\r\n    this.inventory_detail.splice(index, 1);\r\n\r\n  }\r\n  /**\r\n   * trả về bill để lưu DB\r\n   * @param bill_type \r\n   * @returns objetc\r\n   * @example let bill = this.createOrUpdateInventory(13)\r\n   */\r\n  public createOrUpdateInventory(bill_type: 13 | 14) {\r\n    if (bill_type) this.inventory.bill_type = (bill_type);\r\n    return this.inventory\r\n  }\r\n  /**\r\n   * trả về mảng bill_detail đã được clean để lưu DB\r\n   * @returns array[object]\r\n   * @example let bill_details = this.getCreateUpdateInventoryDetail()\r\n   */\r\n  public getCreateUpdateInventoryDetail(): VhBillType14BillDetail[] {\r\n    return this.inventory_detail.map(item => {\r\n      let detail: VhBillType14BillDetail = {\r\n        id_product: item.id_product, quantity: item.quantity ?item.quantity : 0 , ptype: item.ptype,\r\n        ratio: item.ratio\r\n      }\r\n      if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      return detail\r\n    })\r\n  }\r\n  /**\r\n   * trả về tổng số lượng sp đã kiểm trong bill\r\n   * @returns number\r\n   * @example this.getTotalRealQuantity()\r\n   */\r\n  getTotalRealQuantity(): number {\r\n    let total = 0;\r\n    for (let i of this.inventory_detail) {\r\n      total += i.quantity ? i.quantity : 0\r\n    }\r\n    return total;\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} |  <b> {{'Create inventory note' | translate}}</b>\r\n</div>\r\n<nz-layout id=\"product-list\">\r\n    <div nzGutter=\"16\" nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title title-inventory nz-no-margin\">\r\n            <h3>{{'Inventory note' | translate}}</h3>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title\">\r\n            <button (click)=\"visible_products = true\" class=\"btn-data center-all-content nz-hover-border\" nz-button nzType=\"default\">\r\n                <ion-icon name=\"search-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                {{'Select or scan product (F4)' | translate}}\r\n            </button>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title\">\r\n            <nz-select class=\"nz-hover-border\" [(ngModel)]=\"employeeSelected\" >\r\n                <nz-option *ngFor=\"let option of employees;let i = index\" nzLabel=\"{{option.name}}\" nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"title right-all-content\">\r\n            <button [disabled]=\"!inventory_detail.length || inventory.bill_type == 13\" (click)=\"exportInventory(14)\" class=\"btn-data center-all-content nz-hover-border\" nz-button nzType=\"default\">\r\n                <ion-icon name=\"save-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                {{'Temporary'|translate}}\r\n            </button>\r\n            <button (click)=\"exportInventory(13,false)\" [disabled]=\"!inventory_detail.length\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);padding-right: 5px;\" src=\"assets/icon/add.svg\">\r\n                </ion-icon>\r\n                {{'Save note'|translate}}\r\n            </button>\r\n            <button (click)=\"exportInventory(13,true)\" [disabled]=\"!inventory_detail.length\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);padding-right: 5px;\" src=\"assets/icon/add.svg\">\r\n                </ion-icon>\r\n                {{'Save note & Print'|translate}}\r\n            </button>\r\n        </div> \r\n        <div nz-col nzSpan=\"24\" class=\"title note\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"2\"><b>{{'Note' | translate}}</b></div>\r\n                <div nz-col nzSpan=\"22\"><input class=\"nz-hover-border\" nz-input placeholder=\"{{'Enter note' | translate}}\" [(ngModel)]=\"note\" /></div>\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\" class=\"title note\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"14\"> </div>\r\n                <div nz-col nzSpan=\"10\">\r\n                    <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                        <input type=\"text\" #search nz-input placeholder=\"{{'Enter product name or barcode' | translate}}\" (keyup)=\"searchProduct(search.value)\" />\r\n                    </nz-input-group>\r\n                    <ng-template #suffixIconSearch>\r\n                        <i nz-icon nzType=\"search\"></i>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\">\r\n            <div class=\"table-inventory\" nz-col nzSpan=\"24\">\r\n                <nz-table [nzScroll]=\"{ y: heightScroll }\" nzShowPagination=\"false\" [nzData]=\"list_show_products\" nzNoResult=\"{{'Please select a product'| translate}}\" #dataTable>\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"5%\"><b>{{'' | translate}}</b></th>\r\n                            <th nzWidth=\"55%\"><b>{{'Product name' | translate}}</b>\r\n                            </th>\r\n                            <th nzWidth=\"20%\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"20%\"><b>{{'Checked' | translate}}</b></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr style=\"cursor: pointer;\">\r\n                            <td></td>\r\n                            <td style=\"color: var(--ion-color-vh-green); font-weight: bold;\" color=\"vh-green\" colspan=\"2\">{{\"Total\" | translate}}</td>\r\n\r\n                            <td style=\"color: var(--ion-color-vh-green); font-weight: bold;text-align: left;\" colspan=\"1\">\r\n                                {{getTotalRealQuantity()}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of list_show_products; index as i\" style=\"cursor: pointer;\">\r\n                            <td style=\"color:var(--ion-color-vh-red)\" (click)=\"deleteProduct(i)\"><i nz-icon nzType=\"close\" nzTheme=\"outline\"></i></td>\r\n                            <td>{{ data.name }}\r\n                                <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                    <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> \r\n                                  </ng-container>\r\n                            </td>\r\n                            <td>\r\n                                <nz-select style=\"width: 100%;\" [(ngModel)]=\"data.ratio\" >\r\n                                    <!-- <nz-option [nzLabel]=\"data.unit\" [nzValue]=\"data.unit\"></nz-option> -->\r\n                                    <ng-container *ngIf=\"data.units\">\r\n                                        <nz-option *ngFor=\"let i of data.units as idx\" [nzLabel]=\"i.unit\" [nzValue]=\"i.ratio\"></nz-option>\r\n\r\n                                    </ng-container>\r\n                                </nz-select>\r\n                            </td>\r\n                            <td style=\"text-align: left;\">\r\n                                <nz-input-number [nzMax]=\"9999999999\" style=\"border-radius:10px\" (nzBlur)=\"checkedProduct(data)\" [(ngModel)]=\"data.quantity\" [nzMin]=\"0\" [nzStep]=\"1\"></nz-input-number>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!----------------------------- Add Product ------------------------->\r\n    <app-search-goods-inventory [visible_products]=\"visible_products\" (addNewProduct)=\"closeSearchProductList($event)\">\r\n    </app-search-goods-inventory>\r\n</nz-layout>\r\n<!-- ---------------Modal---------------- -->\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\">\r\n                <b>{{'Lot number' | translate}}</b>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"6\">\r\n                 <b>{{'Barcode'  }}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\">\r\n                 <b>{{'Manufacturing date - Expiry date' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\">\r\n                 <b>{{'Checked quantity' | translate}}</b>\r\n            </div>\r\n        </div>\r\n        <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        <label  nz-checkbox  [(ngModel)]=\"item.choose\" style=\"width:100%;word-break: break-all;\">\r\n                            {{item.lot_number}}\r\n                        </label>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        {{item.barcode}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        {{item.date_mfg | date : 'dd/MM/yyyy'}} - {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        <nz-input-number [nzMax]=\"9999999999\" style=\"border-radius:10px\" (nzBlur)=\"checkedProduct(item)\" [(ngModel)]=\"item.quantity\" [nzMin]=\"0\" [nzStep]=\"1\"></nz-input-number>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n\r\n        </div>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"  \r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add/add.component';\r\nimport { EditComponent } from './edit/edit.component';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { SearchModule } from '../../search/search.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddComponent,\r\n    EditComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    SearchModule\r\n  ],\r\n  exports : [ AddComponent,\r\n    EditComponent,\r\n    DetailComponent ]\r\n})\r\nexport class BillType14Module { }\r\n","\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class BillType14Service {\r\n    inventory: any;\r\n    inventory_detail: any;\r\n    inventory_times: any;\r\n\r\n    setInventory(inventory) {\r\n        this.inventory = inventory\r\n    }\r\n    getInventory() {\r\n        return this.inventory\r\n    }\r\n\r\n\r\n    setInventoryDetail(inventory_detail) {\r\n        this.inventory_detail = inventory_detail\r\n    }\r\n    getInventoryDetail() {\r\n        return this.inventory_detail\r\n    }\r\n\r\n\r\n    setInventoryTimes(inventory_times) {\r\n        this.inventory_times = inventory_times\r\n    }\r\n    getInventoryTimes() {\r\n        return this.inventory_times\r\n    }\r\n}","import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { InventoryA45Component } from 'src/app/sales/components/print/inventory/A45/inventory-a45/inventory-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType14BillDetail, VhBillType14Edit } from '../bill-type14-interface';\r\nimport { BillType14Service } from '../bill-type14.service';\r\n\r\n@Component({\r\n  selector: 'bill-type14-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  inventory_detail = [];\r\n  name_product: string = '';\r\n  listProduct: Array<any> = [];\r\n  inventory_times: any;\r\n  employees: Array<any> = [];\r\n  list: any = [];\r\n  inventory: VhBillType14Edit\r\n  inventoryInfo: any = {\r\n    stocker: \"\"\r\n  }\r\n  id_inventory_note: string;\r\n  isDelete: boolean = false;\r\n  /**--------------------- */\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private nzModalService: NzModalService,\r\n    private billType14Service:BillType14Service\r\n  ) {\r\n    this.inventory_times = this.router.getCurrentNavigation().extras.state.inventory_times;\r\n    this.id_inventory_note = this.router.getCurrentNavigation().extras.state.id_inventory_note;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData(this.id_inventory_note)\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory/detail\"], { state: { inventory_times: this.inventory_times } });\r\n  }\r\n\r\n  /**\r\n   * gán bill và bill-detail get được vào biến và get các thông tin của nv, khách hàng, phương thức thanh toán\r\n   * @example this.init(bill, bill-deails)\r\n   */\r\n  Init(inventory_note: VhBillType14Edit = null, inventory_detail: VhBillType14BillDetail[] = null) {\r\n    this.inventory = inventory_note\r\n    this.inventory_detail = inventory_detail\r\n    this.list = inventory_detail\r\n    if (this.inventory.id_employee) {\r\n      this.inventoryInfo = {\r\n        stocker: this.vhAuth.getlocalEmployee(this.inventory.id_employee).name\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * get dữ liệu bill từ DB\r\n   * @param id : nhận từ state truyền qua\r\n   * @example this.getData('DHIWHNXDIWODUHIWDHOWID')\r\n   */\r\n  getData(_id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(_id),\r\n        this.vhQuerySales.getBill_details_byId_bill(_id)\r\n      ]).then(([inventory_note, inventory_detail]: any) => {\r\n        inventory_detail = this.vhAlgorithm.sortStringbyASC(inventory_detail, 'name')\r\n        this.Init(inventory_note, inventory_detail)\r\n        this.vhComponent.hideLoading(0)\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * trả về tên unit của sản phẩm theo ratio truyền vào\r\n   * @param units \r\n   * @param ratio \r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([object], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  /**\r\n   * trả về chuỗi thông tin lô theo id lô truyền vào\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example let lot = this.getLotNumber([], 'DNIWUHNDKLJWHDIWUOH')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + ' \\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  /**\r\n   * xóa hóa đơn lên DB\r\n   * @example this.deleteInvoice()\r\n   */\r\n  deleteBill() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.deleteBill_Billdetail(this.inventory._id).then(() => {\r\n        this.vhComponent.hideLoading(0).then(() => {\r\n          this.vhComponent.showToast(2000, this.languageService.translate('Inventory note has been deleted successfully'), \"success-toast\")\r\n          this.goBack();\r\n        })\r\n      })\r\n    });\r\n  }\r\n  /**\r\n   * chuyển qua trang chỉnh sửa phiếu kiểm\r\n   * @example this.continueInventory()\r\n   */\r\n  continueInventory() {\r\n    if (this.inventory_times.balanced) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: this.languageService.translate(\"Đợt kiểm này đã được cân bằng! Không thể cập nhật\")\r\n      })\r\n    }\r\n    else {\r\n      this.billType14Service.setInventory(this.inventory);\r\n      this.billType14Service.setInventoryDetail(this.inventory_detail);\r\n      this.billType14Service.setInventoryTimes(this.inventory_times);\r\n\r\n      this.router.navigate(['/sales/dashboard/manage/stock/inventory/detail/edit']);\r\n    }\r\n  }\r\n\r\n\r\n  /*----------Print------------------*/\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_inventory')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n  * @example this.showPrint() \r\n  */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      let billInfo = {\r\n        total_checked: this.getTotalRealQuantity(),\r\n        employee: {\r\n          name: this.inventoryInfo.stocker\r\n        },\r\n        ...this.inventory\r\n      }\r\n      this.vhComponent.showModal(InventoryA45Component, { billInfo: billInfo, billDetails: this.inventory_detail, printer: printer }, false, false, \"modal-print\")\r\n\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.languageService.translate(\"Function\"), \"\", this.languageService.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  tableHeight: any;\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('nz-laypout-note-inventory') && document.querySelector(\".nz-laypout-note-inventory-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('nz-laypout-note-inventory').clientHeight - document.querySelector(\".nz-laypout-note-inventory-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  /**\r\n   * trả về tổng số lượng sp đã kiểm trong bill\r\n   * @returns number\r\n   * @example this.getTotalRealQuantity()\r\n   */\r\n  getTotalRealQuantity(): number {\r\n    let total = 0;\r\n    for (let i of this.inventory_detail) {\r\n      total += i.quantity\r\n    }\r\n    return total;\r\n  }\r\n\r\n\r\n  /**\r\n   * xuất ra file excel và tải về\r\n   */\r\n  export() {\r\n    let productExcel: Array<any> = [];\r\n    let name = `${this.languageService.translate('Inventory note')}_${this.inventory.bill_code}`;\r\n    let total: any = new Object();\r\n    total[this.languageService.translate(\"_name\")] = this.languageService.translate(\"Total\");\r\n    total[this.languageService.translate(\"_unit\")] = \"\";\r\n    total[this.languageService.translate(\"Checked\")] = this.getTotalRealQuantity()\r\n    productExcel.push(total);\r\n    this.inventory_detail.forEach((product) => {\r\n      let row: Object = new Object()\r\n      row[this.languageService.translate(\"_name\")] = product.lots ? product['name'] + ': ' + product.lots.find(item => item._id == product.id_lotproduct).lot_number : product['name']\r\n      row[this.languageService.translate(\"_unit\")] = this.getUnit(product.units, product.ratio)\r\n      row[this.languageService.translate(\"Checked\")] = product['quantity']\r\n      if (row) productExcel.push(row)\r\n\r\n    })\r\n    this.vhAlgorithm.exportXLSX(productExcel, name)\r\n  }\r\n\r\n  statusName = false\r\n  sortName(sort, value) {\r\n    if (sort) {\r\n      this.list = this.vhAlgorithm.sortVietnamesebyASC([...this.list], value)\r\n    }\r\n    else {\r\n      this.list = this.vhAlgorithm.sortVietnamesebyDESC([...this.list], value)\r\n    }\r\n  }\r\n\r\n  searchInventoryDetail(value) {\r\n    this.list = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.inventory_detail, ['name'])\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"nz-laypout-note-inventory\" *ngIf=\"inventory\">\r\n    <div class=\"nz-laypout-note-inventory-header\" nzGutter=\"20\" nz-row>\r\n        <div nz-col nzSpan=\"6\" class=\"title\">\r\n            <h3 class=\"nz-no-margin\">{{ \"Inventory note\" | translate}} {{inventory.bill_code}}</h3>\r\n        </div>\r\n        <div nz-col nzSpan=\"14\">\r\n            <div class=\"right-div\" nzGutter=\"20\" nz-row>\r\n                <div nz-col nzSpan=\"10\" class=\"title\">\r\n                    <p class=\"max-width-overflow\"><b>{{\"Inventory staff\" | translate}}</b> : {{inventoryInfo.stocker}}\r\n                    </p>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"title\">\r\n                    <button (click)=\"showPrint()\" class=\"btn-data center-all-content nz-hover-border\" nz-button\r\n                        nzType=\"default\">\r\n                        <ion-icon name=\"print-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                        {{'Print'|translate}}\r\n                    </button>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" class=\"title\">\r\n                    <button [disabled]=\"inventory_times.balanced\" (click)=\"isDelete = true\"\r\n                        class=\"btn-data nz-hover-border\" nz-button nzType=\"default\">\r\n                        <ion-icon name=\"trash-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                        {{'Delete'|translate}}\r\n                    </button>\r\n                </div>\r\n                <div *ngIf=\"inventory.bill_type == 13\" nz-col nzSpan=\"6\" class=\"title\">\r\n                    <button (click)=\"continueInventory()\" class=\"btn-add\" nz-button nzType=\"default\">\r\n                        <i nz-icon nzType=\"form\" nzTheme=\"outline\"></i>\r\n                        {{'Edit'|translate}}\r\n                    </button>\r\n                </div>\r\n                <div *ngIf=\"inventory.bill_type == 14\" nz-col nzSpan=\"6\" class=\"title\">\r\n                    <button (click)=\"continueInventory()\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                        <i nz-icon nzType=\"form\" nzTheme=\"outline\"></i>\r\n                        {{'Continue'|translate}}\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"title\">\r\n            <button (click)=\"export()\" class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                {{'Download'|translate}}\r\n            </button>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title\">\r\n            <div>{{'Note' | translate}}: {{inventory.note}}</div>\r\n        </div>\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\">\r\n            <div class=\"table-inventory\" nz-col nzSpan=\"24\">\r\n                <nz-table #tableInventoryNote [nzScroll]=\"{ y: tableHeight }\" nzShowPagination nzShowSizeChanger\r\n                    [nzData]=\"list\" nzNoResult=\"{{'Not inventory note'| translate}}\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"60%\" style=\"display: flex;justify-content: space-between;\" (click)=\"statusName = !statusName;sortName(statusName,'name')\">\r\n                                <b>{{'Product name' | translate}}\r\n                                    <i nz-icon [nzType]=\"statusName == true ? 'caret-down':'caret-up'\"\r\n                                        nzTheme=\"outline\"></i>\r\n                                </b>\r\n                                <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                                    <input (keyup)=\"searchInventoryDetail(search.value)\" #search type=\"text\" nz-input placeholder=\"{{'Search for product name, barcode' | translate}}\" />\r\n                                  </nz-input-group>\r\n                                  <ng-template #suffixIconSearch>\r\n                                    <span nz-icon nzType=\"search\"></span>\r\n                                  </ng-template>\r\n                            </th>\r\n                            <th nzWidth=\"20%\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"20%\"><b>{{'Checked' | translate}}</b></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr style=\"cursor: pointer;\">\r\n                            <td style=\"font-weight: bold; color: var(--ion-color-vh-green)\">{{\"Total\" |\r\n                                translate}}</td>\r\n                            <td></td>\r\n                            <td style=\"font-weight: bold; color: var(--ion-color-vh-green);text-align: center;\">\r\n                                {{getTotalRealQuantity()}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let data of tableInventoryNote.data\" style=\"cursor: pointer;\">\r\n                            <td>{{ data.name }}\r\n                                <ng-container *ngIf=\"data.lots\">\r\n                                    <pre>{{getLotNumber(data.lots, data.id_lotproduct)}}</pre> <br>\r\n                                </ng-container>\r\n\r\n                            </td>\r\n                            <td>{{getUnit(data.units, data.ratio)}}</td>\r\n                            <td style=\"text-align: center;\">\r\n                                {{data.quantity}}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</nz-layout>\r\n<!-- /*Modal delete*/ -->\r\n<nz-modal [(nzVisible)]=\"isDelete\" nzTitle=\"{{'Confirm'|translate}}\" nzCancelText=\"{{'Cancel' | translate}}\"\r\n    (nzOnCancel)=\"isDelete = false\" (nzOnOk)=\"deleteBill()\">\r\n    <p *nzModalContent>{{'Do you want to delete inventory note ?'|translate}}</p>\r\n</nz-modal>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { Observable } from 'rxjs';\r\nimport { InventoryA45Component } from 'src/app/sales/components/print/inventory/A45/inventory-a45/inventory-a45.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhBillType14BillDetail, VhBillType14Edit } from '../bill-type14-interface';\r\nimport { BillType14Service } from '../bill-type14.service';\r\n@Component({\r\n  selector: 'bill-type14-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n  visible_products: boolean = false;\r\n  name_product: string = '';\r\n  listProduct: Array<any> = [];\r\n  tempListProduct: Array<any> = [];\r\n  inventory_times: any\r\n  employees: Array<any> = [];\r\n  employeeSelected: any;\r\n  isVisible: boolean = false;\r\n\r\n  search_lists: any = [];\r\n  list_show_products = []\r\n  currentProduct: any = {\r\n    quantity: 0\r\n  };\r\n  inventory: VhBillType14Edit\r\n  inventory_detail: VhBillType14BillDetail[] = []\r\n  note: string = \"\";\r\n\r\n  /**--------------------- */\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private nzModalService: NzModalService,\r\n    private billType14Service: BillType14Service\r\n\r\n  ) {\r\n\r\n    // ----lắng nghe sự kiện f4 để show nz-drawer----\r\n    window.addEventListener('keydown', (event: KeyboardEvent) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 115) {\r\n        this.visible_products = !this.visible_products;\r\n      }\r\n    });\r\n  }\r\n\r\n  heightScroll: string;\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#product-list\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".product-list-header\")) {\r\n      this.heightScroll = document.querySelector(\"#product-list\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".product-list-header\").clientHeight - 30 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  trackByIndex(_: number, data: any): number {\r\n    return data._id;\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.inventory = this.billType14Service.getInventory()\r\n    this.inventory_detail = this.billType14Service.getInventoryDetail()\r\n    this.inventory_times = this.billType14Service.getInventoryTimes()\r\n    this.employees = this.vhAuth.getlocalEmployees();\r\n    this.employeeSelected = this.vhAuth.getUser()._id;\r\n    this.inventory.id_employee = (this.employeeSelected);\r\n    this.list_show_products = this.inventory_detail;\r\n    this.search_lists = this.list_show_products;\r\n    this.note = this.inventory.note;\r\n\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory/detail\"], { state: { inventory_times: this.inventory_times ? this.inventory_times : this.vhQuerySales.getlocalInventorytime(this.inventory.id_inventorytime) } });\r\n  }\r\n  onClose() {\r\n    this.visible_products = false;\r\n    this.currentProduct = \"\";\r\n  }\r\n  showModal(item) {\r\n\r\n    if (item) {\r\n      this.currentProduct = item;\r\n      this.currentProduct.quantity = 0;\r\n      if (item.manylot && !item.id_lotproduct) this.openModalChooseLot(item)\r\n      else this.addProductInventory(item)\r\n    }\r\n    else this.visible_products = false;\r\n  }\r\n  handleCancel() {\r\n    this.onClose();\r\n  }\r\n  handleOk() {\r\n    this.addProductInventory(this.currentProduct);\r\n\r\n    this.search_lists = this.inventory_detail\r\n    this.handleCancel();\r\n  }\r\n  checkedProduct(value, input?) {\r\n    if (value.quantity < 0 || value.quantity == null) {\r\n      value.quantity = 0;\r\n    }\r\n    if (input) {\r\n      this.setQuantityProduct(value)\r\n    }\r\n  }\r\n\r\n  selectStocker(_id) {\r\n    this.inventory.id_employee = (_id);\r\n  }\r\n  // addProductInventory(product) {\r\n  //   \r\n\r\n  //   if (product.manylot && !product.lot_number) this.openModalChooseLot(product)\r\n  //   else {\r\n  //     this.inventory.addProductInventory(product);\r\n  //     this.list = this.inventory.getInventoryDetail().concat([]);\r\n  //     this.search_lists = this.inventory.getInventoryDetail();\r\n  //     \r\n\r\n  //     this.handleCancel();\r\n  //   }\r\n  // }\r\n  deleteProduct(item) {\r\n    this.vhComponent.alertConfirm(\r\n      (this.lang.translate(\"Confirm\")), \"\",\r\n      (this.lang.translate(\"Are you sure to delete this product?\")),\r\n      \"OK\",\r\n      (this.lang.translate(\"Cancel\"))\r\n    )\r\n      .then(\r\n        () => {\r\n          this.deleteProductInventory(item);\r\n          this.list_show_products = this.inventory_detail\r\n          this.search_lists = this.inventory_detail\r\n        },\r\n        () => { }\r\n      );\r\n  }\r\n  createOrUpdate(bill_type: 13 | 14) {\r\n    return this.vhQuerySales.updateBill_Billdetail(this.inventory._id, this.createOrUpdateInventory(bill_type), this.getCreateUpdateInventoryDetail())\r\n  }\r\n  exportInventory(bill_type: 13 | 14, print?) {\r\n    this.inventory.note = (this.note);\r\n    this.vhComponent.alertConfirm(\"\", \"\",\r\n      bill_type == 13 ? this.lang.translate('Confirmed Complete ?') : this.lang.translate('Confirmed save ?'),\r\n      \"Ok\", this.lang.translate('Cancel')\r\n    ).then(() => {\r\n      this.vhComponent.showLoadingNotDuration(\"\", \"transparent-loading\").then(() => {\r\n        this.createOrUpdate(bill_type).then(() => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.vhComponent.showToast(2000, this.lang.translate(\"Inventory note has been created successfully\"), 'success-toast')\r\n            if (print) {\r\n              this.showPrint()\r\n            } else {\r\n              this.isExit = true\r\n              this.goBack();\r\n            }\r\n\r\n          })\r\n        })\r\n      })\r\n    }).catch(() => { })\r\n  }\r\n\r\n  searchProduct(value) {\r\n    if (value)\r\n      this.list_show_products = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.search_lists, ['barcode', 'name'])\r\n    else this.list_show_products = this.search_lists\r\n  }\r\n  /*----------Print------------------*/\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_inventory')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /** kiểm tra dữ liệu máy in và show component in tương ứng\r\n  * @example this.showPrint() \r\n  */\r\n  showPrint() {\r\n    this.checkPrint().then((printer) => {\r\n      let billInfo = {\r\n        total_checked: this.getTotalRealQuantity(),\r\n        employee: {\r\n          name: this.vhAuth.getlocalEmployee(this.inventory.id_employee).name\r\n        },\r\n        ...this.inventory\r\n      }\r\n      this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { billInfo: billInfo, billDetails: this.inventory_detail, printer: printer }, false, false, `modal-print-${printer['_id']}`).then(modal => {\r\n        modal.onWillDismiss().then(() => { this.isExit = true; this.goBack() })\r\n      })\r\n    },\r\n      (err) => {\r\n        this.nzModalService.warning({\r\n          nzTitle: this.lang.translate(\"Please turn on the printer function\"),\r\n          nzOnOk: () => {\r\n            this.isExit = true;\r\n            this.goBack();\r\n          }\r\n        })\r\n\r\n      }\r\n    )\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'K57' | 'K80' | 'K80-3' | 'A4') {\r\n    switch (type) {\r\n      default: return InventoryA45Component\r\n    }\r\n  }\r\n  /** ===============Thoát trang==============*/\r\n  isExit: boolean = false;\r\n  // checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n  //   return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Bạn muốn thoát và không chỉnh sửa phiếu kiểm này?\"), \"OK\", (this.lang.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  // }\r\n\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n  tempDetail: any;\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  openModalChooseLot(data) {\r\n\r\n    this.show_modal_select_lots = true;\r\n    data.lots = data.lots.map(e => { return { ...e, quantity: 0 } })\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n\r\n\r\n  }\r\n\r\n\r\n  handleChooseLot() {\r\n\r\n\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot;\r\n    for (let i of this.tempDetail.lots) {\r\n      if (i.choose) {\r\n        this.addProductInventory({ ...this.tempDetail, id_lotproduct: i._id, lot_number: i.lot_number });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n\r\n  // ********************* Xử lý Inventory detail ***************************\r\n  public addProductInventory(value: any) {\r\n    if (value['id_subproduct']) {\r\n      if (value.lot_number) {\r\n        let index = this.inventory_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.inventory_detail.findIndex(detail => detail['id_subproduct'] == value['id_subproduct'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (value.lot_number) {\r\n        let index = this.inventory_detail.findIndex(detail => detail['lot_number'] == value['lot_number'] && detail['id_lotproduct'] == value['id_lotproduct'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n      else {\r\n        let index = this.inventory_detail.findIndex(detail => detail['id_product'] == value['_id'] && detail['ratio'] == value['ratio'])\r\n        if (index != -1) {\r\n          if (this.inventory_detail[index]['quantity'] < 9999999999) this.inventory_detail[index]['quantity'] += 1\r\n        } else {\r\n          this.addBill_Detail(value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  addBill_Detail(value: any) {\r\n    let detail: VhBillType14BillDetail = {\r\n      name: value.name,\r\n      id_product: value._id,\r\n      quantity: value.quantity ? value.quantity : 0,\r\n      ptype: value.type,\r\n      unit: value.unit,\r\n      units: value.units ? value.units : [],\r\n      ratio: value.ratio ? value.ratio : 1,\r\n    }\r\n\r\n    if (value.lot_number) detail['lot_number'] = value.lot_number;\r\n    if (value.id_lotproduct) detail['id_lotproduct'] = value.id_lotproduct;\r\n    if (value.lots) {\r\n      detail['lots'] = value.lots;\r\n      detail['quantity'] = value.lots.find(e => e._id == value.id_lotproduct).quantity\r\n    }\r\n    if (value.id_subproduct) detail['id_subproduct'] = value.id_subproduct;\r\n\r\n    this.inventory_detail.unshift(detail)\r\n    this.inventory_detail = [...this.inventory_detail]\r\n    this.list_show_products = this.inventory_detail\r\n    this.search_lists = this.inventory_detail\r\n  }\r\n  public setQuantityProduct(product) {\r\n    let index: number = this.inventory_detail.findIndex(item => item['id_product'] == product._id);\r\n    if (index != -1) {\r\n      this.inventory_detail[index]['quantity'] = product.quantity;\r\n    }\r\n  }\r\n  public deleteProductInventory(item) {\r\n    this.inventory_detail = this.inventory_detail.filter(e => e != item)\r\n    \r\n  }\r\n  public createOrUpdateInventory(bill_type: 13 | 14) {\r\n    if (bill_type) this.inventory.bill_type = (bill_type);\r\n    return this.inventory\r\n  }\r\n  public getCreateUpdateInventoryDetail(): VhBillType14BillDetail[] {\r\n    return this.inventory_detail.map(item => {\r\n      let detail: VhBillType14BillDetail = {\r\n        id_product: item.id_product, quantity: item.quantity ?item.quantity : 0, ptype: item.ptype,\r\n        ratio: item.ratio\r\n      }\r\n      if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      return detail\r\n    })\r\n  }\r\n  getTotalRealQuantity(): number {\r\n    let total = 0;\r\n    for (let i of this.inventory_detail) {\r\n      total += i.quantity ? i.quantity : 0\r\n    }\r\n    return total;\r\n  }\r\n\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}} |  <b> {{'Edit inventory note' | translate}}</b>\r\n</div>\r\n<nz-layout id=\"product-list\">\r\n    <div nzGutter=\"16\" nz-row class=\"product-list-header\">\r\n        <div nz-col nzSpan=\"4\" class=\"title title-inventory nz-no-margin\">\r\n            <h3>{{'Inventory note' | translate}}</h3>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title\">\r\n            <button (click)=\"visible_products = true\" class=\"btn-data center-all-content nz-hover-border\" nz-button\r\n                nzType=\"default\">\r\n                <ion-icon name=\"search-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                {{'Select or scan product (F4)' | translate}}\r\n            </button>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"title\">\r\n            <nz-select class=\"nz-hover-border\" [(ngModel)]=\"employeeSelected\" (ngModelChange)=\"selectStocker($event)\">\r\n                <nz-option *ngFor=\"let option of employees;let i = index\" nzLabel=\"{{option.name}}\"\r\n                    nzValue=\"{{option._id}}\">\r\n                </nz-option>\r\n            </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"title right-all-content\">\r\n            <button [disabled]=\"!inventory_detail.length || inventory.bill_type == 13\" (click)=\"exportInventory(14)\"\r\n                class=\"btn-data center-all-content nz-hover-border\" nz-button nzType=\"default\">\r\n                <ion-icon name=\"save-outline\" style=\"font-size: 16px;padding-right: 3px;\"></ion-icon>\r\n                {{'Temporary'|translate}}\r\n            </button>\r\n            <button (click)=\"exportInventory(13,false)\" [disabled]=\"!inventory_detail.length\"\r\n                class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);padding-right: 5px;\" src=\"assets/icon/add.svg\">\r\n                </ion-icon>\r\n                {{'Update note'|translate}}\r\n            </button>\r\n            <button (click)=\"exportInventory(13,true)\" [disabled]=\"!inventory_detail.length\"\r\n                class=\"btn-add center-all-content\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);padding-right: 5px;\" src=\"assets/icon/add.svg\">\r\n                </ion-icon>\r\n                {{'Update note & Print'|translate}}\r\n            </button>\r\n        </div>\r\n\r\n        <div nz-col nzSpan=\"24\" class=\"title note\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"2\"><b>{{'Note' | translate}}</b></div>\r\n                <div nz-col nzSpan=\"22\"><input class=\"nz-hover-border\" nz-input\r\n                        placeholder=\"{{'Enter note' | translate}}\" [(ngModel)]=\"note\" /></div>\r\n            </div>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\" class=\"title note\">\r\n            <div nz-row>\r\n                <div nz-col nzSpan=\"14\"> </div>\r\n                <div nz-col nzSpan=\"10\">\r\n                    <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                        <input type=\"text\" #search nz-input\r\n                            placeholder=\"{{'Enter product name or barcode' | translate}}\"\r\n                            (keyup)=\"searchProduct(search.value)\" />\r\n                    </nz-input-group>\r\n                    <ng-template #suffixIconSearch>\r\n                        <i nz-icon nzType=\"search\"></i>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"24\">\r\n            <div class=\"table-inventory\" nz-col nzSpan=\"24\">\r\n                <nz-table [nzScroll]=\"{ y: heightScroll }\" nzShowPagination=\"false\" [nzData]=\"list_show_products\"\r\n                    nzNoResult=\"{{'Please select a product'| translate}}\" #dataTable [nzVirtualItemSize]=\"54\"\r\n                   [nzVirtualForTrackBy]=\"trackByIndex\" [nzFrontPagination]=\"false\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th nzWidth=\"5%\"><b>{{'' | translate}}</b></th>\r\n                            <th nzWidth=\"55%\"><b>{{'Product name' | translate}}</b>\r\n                            </th>\r\n                            <th nzWidth=\"20%\"><b>{{'Unit' | translate}}</b></th>\r\n                            <th nzWidth=\"20%\"><b>{{'Checked' | translate}}</b></th>\r\n                        </tr>\r\n                        <tr style=\"cursor: pointer;height: 55px;\">\r\n                            <th></th>\r\n                            <th style=\"color: var(--ion-color-vh-green); font-weight: bold;\" color=\"vh-green\"\r\n                                colspan=\"2\">{{\"Total\" | translate}}</th>\r\n\r\n                            <th style=\"color: var(--ion-color-vh-green); font-weight: bold;text-align: left;\"\r\n                                colspan=\"1\">\r\n                                {{getTotalRealQuantity()}}\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        \r\n                        <ng-template nz-virtual-scroll let-data let-index=\"index\">\r\n                            <tr   style=\"cursor: pointer;\">\r\n                                <td style=\"color:var(--ion-color-vh-red)\" (click)=\"deleteProduct(data)\"><i nz-icon\r\n                                        nzType=\"close\" nzTheme=\"outline\"></i></td>\r\n                                <td>{{ data.name }}\r\n                                    <ng-container *ngIf=\"data.id_lotproduct\">\r\n                                        <pre style=\"color:var(--ion-color-vh-green);cursor: pointer;\"\r\n                                            (click)=\"openModalChooseLot(data)\">{{getLotNumber(data.lots, data.id_lotproduct)}}</pre>\r\n                                    </ng-container>\r\n                                </td>\r\n                                <td>\r\n                                    <nz-select style=\"width: 100%;\" [(ngModel)]=\"data.ratio\">\r\n                                        <!-- <nz-option [nzLabel]=\"data.unit\" [nzValue]=\"data.unit\"></nz-option> -->\r\n                                        <ng-container *ngIf=\"data.units\">\r\n                                            <nz-option *ngFor=\"let i of data.units as idx\" [nzLabel]=\"i.unit\"\r\n                                                [nzValue]=\"i.ratio\"></nz-option>\r\n    \r\n                                        </ng-container>\r\n                                    </nz-select>\r\n                                </td>\r\n                                <td style=\"text-align: left;\">\r\n                                    <nz-input-number [nzMax]=\"9999999999\" style=\"border-radius:10px\"\r\n                                        (nzBlur)=\"checkedProduct(data,true)\" [(ngModel)]=\"data.quantity\" [nzMin]=\"0\"\r\n                                        [nzStep]=\"1\"></nz-input-number>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-template>\r\n                       \r\n                    </tbody>\r\n                </nz-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!----------------------------- Add Product ------------------------->\r\n    <app-search-goods-inventory [visible_products]=\"visible_products\" (addNewProduct)=\"showModal($event)\">\r\n    </app-search-goods-inventory>\r\n</nz-layout>\r\n<!-- ---------------Modal---------------- -->\r\n<!-- <nz-modal [(nzVisible)]=\"isVisible\" [nzFooter]=\"modalFooterSelectProduct\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"addProductInventory(currentProduct)\">\r\n    <ng-container *nzModalContent>\r\n        <div class=\"choose-product\">\r\n            <img [src]=\"currentProduct.img ? currentProduct.img : '/assets/icon/noimage.svg'\" />\r\n            <h4 class=\"max-width-two-line\">{{currentProduct.name}}</h4>\r\n            <nz-input-number [nzMax]=\"9999999999\" (nzBlur)=\"checkedProduct(currentProduct)\" [(ngModel)]=\"currentProduct.quantity\" [nzMin]=\"0\" [nzStep]=\"1\"></nz-input-number>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #modalFooterCartProducts>\r\n        <button nz-button class=\"nz-hover-border\" nzType=\"default\" (click)=\"handleCancel()\">{{\"Cancel\" |\r\n            translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" (click)=\"addProductInventory(currentProduct)\">OK</button>\r\n    </ng-template>\r\n    <ng-template #modalFooterSelectProduct>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\" (click)=\"handleCancel()\">{{\"Cancel\"|translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\" style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\" class=\"nz-hover-border-green\" (click)=\"addProductInventory(currentProduct)\">OK</button>\r\n    </ng-template>\r\n</nz-modal> -->\r\n\r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\n    nzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n    <ng-container *nzModalContent>\r\n        <div nz-row>\r\n            <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                    (keyup)=\"searchLot(searchValue.value )\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"6\">\r\n                <b>{{'Lot number' | translate}}</b>\r\n            </div>\r\n\r\n            <div nz-col nzSpan=\"6\">\r\n                <b>{{'Barcode' }}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\">\r\n                <b>{{'Manufacturing date - Expiry date' | translate}}</b>\r\n            </div>\r\n            <div nz-col nzSpan=\"6\">\r\n                <b>{{'Checked quantity' | translate}}</b>\r\n            </div>\r\n        </div>\r\n        <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div nz-row>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        <label nz-checkbox [(ngModel)]=\"item.choose\" style=\"width:100%;word-break: break-all;\">\r\n                            {{item.lot_number}}\r\n                        </label>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        {{item.barcode}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        {{item.date_mfg | date : 'dd/MM/yyyy'}} - {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                    </div>\r\n                    <div nz-col nzSpan=\"6\">\r\n                        <nz-input-number [nzMax]=\"9999999999\" style=\"border-radius:10px\"\r\n                            (nzBlur)=\"checkedProduct(item,true)\" [(ngModel)]=\"item.quantity\" [nzMin]=\"0\"\r\n                            [nzStep]=\"1\"></nz-input-number>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n    </ng-container>\r\n    <ng-template #modalFooterEditUnitPrice2>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n            (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n            |translate}}</button>\r\n        <button nz-button class=\"nz-hover-border\"\r\n            style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n            class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n    </ng-template>\r\n</nz-modal>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.component.html',\r\n  styleUrls: ['./cart.component.scss']\r\n})\r\nexport class CartComponent   { \r\n}\r\n","<bill-type14-add></bill-type14-add>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuery, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  bills: Array<any> = [];\r\n  inventory_times: any = {};\r\n  employees: Array<any> = [];\r\n  open_status: boolean = false;\r\n  status: boolean = false;\r\n  /* -----Pagination----- */\r\n  list_show_product_pagination: any;\r\n  list_show_product_not_pagination: any;\r\n  onCurrentPageDataChange(value) {\r\n    this.list_show_product_pagination = value;\r\n  }\r\n  /**--------------------- */\r\n  constructor(\r\n    private router: Router,\r\n    private vhAuth: VhAuth,\r\n    private vhQuery: VhQuery,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private nzModalService:NzModalService,\r\n    private languageService:LanguageService,\r\n    private vhQuerySales:VhQuerySales\r\n  ) {\r\n    this.inventory_times = this.router.getCurrentNavigation().extras.state.inventory_times;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n  /**\r\n   * get phiếu kiểm của đợt kiểm nhận từ state truyền vào\r\n   */\r\n  getData() {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      this.vhQuerySales.getBills_byFields( { bill_type: { $in: [13, 14] }, id_inventorytime: { $eq: this.inventory_times._id } }, {})\r\n        .then((res: any) => {\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.employees = this.vhAuth.getlocalEmployees();\r\n            this.open_status = true;\r\n            if (res.length) {\r\n              this.bills = res.map(item => {\r\n                let index = this.employees.findIndex(data => data._id == item.id_employee);\r\n                return {\r\n                  stocker: this.employees[index].name,\r\n                  status: item.bill_type == 13 ? \"Checked\" : \"Temporary\",\r\n                  ...item\r\n                }\r\n              })\r\n              \r\n            }\r\n          })\r\n        })\r\n    })\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory\"]);\r\n  }\r\n  /**\r\n   * router qua trang tạo phiếu kiểm\r\n   */\r\n  gotoCart() {\r\n    if(this.inventory_times.balanced){\r\n      this.nzModalService.confirm({\r\n        nzTitle : this.languageService.translate(\"Đợt kiểm này đã được cân bằng! Không thể cập nhật\")\r\n      })\r\n    }\r\n    else\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory/detail/cart\"], {\r\n      state: {\r\n        inventory_times: this.inventory_times\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * router qua trang xem chi tiết phiếu kiểm\r\n   */\r\n  gotoDetailNote(item) {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/inventory/detail/note\"], {\r\n      state: {\r\n        inventory_times: this.inventory_times,\r\n        id_inventory_note: item._id\r\n      }\r\n    });\r\n  }\r\n  tableHeight: any;\r\n  ngAfterViewChecked() {\r\n    if (document.getElementById('nz-laypout-detail-inventory') && document.querySelector(\".nz-laypout-detail-inventory-header\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.getElementById('nz-laypout-detail-inventory').clientHeight - document.querySelector(\".nz-laypout-detail-inventory-header\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /** hàm sort cho các cột */\r\n  bill_codeCol = false;\r\n  stockerCol = false;\r\n  statusCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collection\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'bill_code':\r\n        if(this.bill_codeCol){\r\n          this.bills = this.vhAlgorithm.sortStringbyASC([...this.bills], colName);\r\n        }else{\r\n          this.bills = this.vhAlgorithm.sortStringbyDESC([...this.bills], colName);\r\n        }\r\n        break;\r\n      case 'stocker':\r\n        if(this.stockerCol){\r\n          this.bills = this.vhAlgorithm.sortVietnamesebyASC([...this.bills], colName);\r\n        }else{\r\n          this.bills = this.vhAlgorithm.sortVietnamesebyDESC([...this.bills], colName);\r\n        }\r\n        break;\r\n      case 'status':\r\n        if(this.statusCol){\r\n          this.bills = this.vhAlgorithm.sortStringbyASC([...this.bills], colName);\r\n        }else{\r\n          this.bills = this.vhAlgorithm.sortStringbyDESC([...this.bills], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"nz-laypout-detail-inventory\">\r\n    <div nz-row>\r\n        <div nz-col nzSpan=\"19\" class=\"title nz-laypout-detail-inventory-header left-all-content\">\r\n            <b>{{'Inventory' | translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"5\" class=\"add-button\">\r\n            <button (click)=\"gotoCart()\"  class=\"btn-add right-all-content\" nz-button nzType=\"default\">\r\n                <ion-icon style=\"color: var(--ion-color-vh-white);\" src=\"assets/icon/add.svg\"></ion-icon>\r\n                {{'Create inventory note' | translate}}\r\n            </button>\r\n        </div>\r\n        <div class=\"table-inventory\" *ngIf=\"open_status\" nz-col nzSpan=\"24\">\r\n            <nz-table [nzScroll]=\"{ y: tableHeight }\" #rowSelectionTable nzShowPagination nzShowSizeChanger nzNoResult=\"{{'Not inventory note'| translate}}\" (nzCurrentPageDataChange)=\"onCurrentPageDataChange($event)\" [nzData]=\"bills\">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=\"cursor: pointer;\" (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                            <b>{{'Inventory code' | translate}}</b>\r\n                            <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                        </th>\r\n                        <th style=\"cursor: pointer;\" (click)=\"stockerCol = !stockerCol;sortTable('stocker')\">\r\n                            <b>{{'Inventory staff' | translate}}</b>\r\n                            <i nz-icon [nzType]=\"stockerCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                        </th>\r\n                        <th style=\"cursor: pointer;\" (click)=\"statusCol = !statusCol;sortTable('status')\">\r\n                            <b>{{'Status' | translate}}</b>\r\n                            <i nz-icon [nzType]=\"statusCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                        </th>\r\n                        <th>\r\n                            <b>{{'Note' | translate}}</b>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr (click)=\"gotoDetailNote(data)\" *ngFor=\"let data of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                        <td>{{ data.bill_code }}</td>\r\n                        <td>{{ data.stocker }}</td>\r\n                        <td>{{ data.status | translate }} </td>\r\n                        <td>{{ data.note }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </nz-table>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { DetailComponent } from './detail.component';\r\nimport { CartComponent } from './cart/cart.component';\r\nimport { NoteComponent } from './note/note.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { SearchGoodsInventoryComponent } from './search-goods-inventory/search-goods-inventory.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { BillType14Module } from 'src/app/sales/components/bill-type/bill-type-14/bill-type-14.module';\r\nimport { EditComponent } from './edit/edit.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: DetailComponent\r\n  },\r\n  {\r\n    path: \"cart\",\r\n    component: CartComponent,\r\n     \r\n  }, {\r\n    path: \"note\",\r\n    component: NoteComponent\r\n  }, {\r\n    path: \"edit\",\r\n    component: EditComponent\r\n  },\r\n]\r\n\r\n@NgModule({\r\n  declarations: [DetailComponent, CartComponent, NoteComponent, SearchGoodsInventoryComponent, EditComponent],\r\n  entryComponents: [SearchGoodsInventoryComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    FormsModule,\r\n    ScrollingModule,\r\n    BillType14Module\r\n  ],\r\n  providers: [VhComponent]\r\n})\r\nexport class DetailModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-edit',\r\n  templateUrl: './edit.component.html',\r\n  styleUrls: ['./edit.component.scss']\r\n})\r\nexport class EditComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<bill-type14-edit></bill-type14-edit>\r\n<!-- sdfdf -->","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-note',\r\n  templateUrl: './note.component.html',\r\n  styleUrls: ['./note.component.scss']\r\n})\r\nexport class NoteComponent   {\r\n\r\n}\r\n","<bill-type14-detail></bill-type14-detail>","import { Component, ElementRef, HostListener, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Output, EventEmitter } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { VhType } from 'src/app/sales/interface/vh-type';\r\n@Component({\r\n  selector: 'app-search-goods-inventory',\r\n  templateUrl: './search-goods-inventory.component.html',\r\n  styleUrls: ['./search-goods-inventory.component.scss']\r\n})\r\nexport class SearchGoodsInventoryComponent implements OnInit {\r\n\r\n  @ViewChild(\"inputSearchProductInventory\") myInputField: ElementRef;\r\n  @Input(\"visible_products\") visible_products: boolean = false;\r\n  @Output(\"addNewProduct\") addNewProduct = new EventEmitter<any>();\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales,\r\n    private router:Router,\r\n    private vhComponent:VhComponent,\r\n    private languageService:LanguageService\r\n  ) { }\r\n  public goodList: any[] = [];\r\n  public searchList: any[] = [];\r\n  public typeGoods = 1\r\n  search: string = '';\r\n  ngOnInit(): void {\r\n    this.changeTypeGood(this.typeGoods);\r\n  }\r\n  ngAfterViewInit() {\r\n    this.myInputField.nativeElement.focus();\r\n  }\r\n  acticeFocus() {\r\n    this.myInputField.nativeElement.focus();\r\n  }\r\n  goBack() {\r\n    this.addNewProduct.emit(false);\r\n  }\r\n  searchProduct(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.goodList, ['name', 'barcode'])\r\n    else this.searchList = this.goodList\r\n  }\r\n  chooseProduct(item) {\r\n    this.addNewProduct.emit(item)\r\n  }\r\n  changeTypeGood(event) {\r\n    this.goodList = this.vhQuerySales.getlocalDetailProducts(VhType.PRODUCT).filter(e => !e.delete_hidden).map(e=> {return {...e,...this.vhQuerySales.getUnit_byRatio(e.units, 1), }});\r\n    this.searchList = this.goodList;\r\n    this.typeGoods = event\r\n    this.searchProduct('');\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".ant-drawer-body\") && document.querySelector(\".search-product-input\") && document.getElementById(\"search-product-item\")) {\r\n      document.getElementById(\"search-product-item\").style.height = document.querySelector(\".ant-drawer-body\").clientHeight\r\n        - document.querySelector(\".search-product-input\").clientHeight + \"px\";\r\n    }\r\n  }\r\n\r\n  scanBarcode(barcode){\r\n    if (barcode.length > 5) {\r\n      let product = this.goodList.filter(item => item.barcode == barcode || item.units?.find(ele => ele.barcode == barcode));\r\n      if (product[0]) {\r\n        let index = product[0].units?.findIndex(ele => ele.barcode.toString() == barcode)\r\n        if (index && index != -1) {\r\n          product[0].ratio = product[0].units[index].ratio;\r\n          product[0].unit_name = product[0].units[index].unit;\r\n        }\r\n        else {\r\n          product[0].ratio = 1;\r\n          product[0].unit_name = product[0].unit;\r\n        }\r\n        this.chooseProduct(product[0] );\r\n\r\n      }\r\n      else {\r\n        this.vhComponent.alertMessageDesktop('error', this.languageService.translate(\"Not found\"))\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  barcode: string = ''\r\n  barcode_array = [];\r\n  @HostListener(\"window: keypress\", [\"$event\"])\r\n  /**\r\n   * Sự kiện nhận barcode\r\n   */\r\n  getKeyUp(_event: KeyboardEvent) {\r\n    if (this.router.url === \"/sales/dashboard/manage/stock/inventory/detail/cart\" ) {\r\n      if (_event.key == \"Enter\") {\r\n        this.barcode_array.forEach((i, index) => {\r\n          if (i == \"Shift\") {\r\n            this.barcode_array[index + 1] = this.barcode_array[\r\n              index + 1\r\n            ].toUpperCase();\r\n            this.barcode_array.splice(index, 1);\r\n          }\r\n        });\r\n        this.barcode = this.barcode_array.join(\"\");\r\n        setTimeout(() => {\r\n          this.barcode_array = [];\r\n          this.scanBarcode(this.barcode)\r\n        }, 100);\r\n\r\n      } else {\r\n        this.barcode_array.push(_event.key);\r\n      }\r\n      // }\r\n    }\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"500\" [nzTitle]=\"null\" [nzVisible]=\"visible_products\"\r\n    (nzOnClose)=\"goBack()\">\r\n    <ng-container *nzDrawerContent>\r\n        <div nz-row>\r\n            <div nz-col nzSpan=\"24\"><input (blur)=\"acticeFocus()\" #inputSearchProductInventory class=\"nz-hover-border\"\r\n                    placeholder=\"{{ 'Search for product name, barcode' | translate}}\" [(ngModel)]=\"search\"\r\n                    (ngModelChange)=\"searchProduct($event)\" [ngModelOptions]=\"{standalone: true}\" nz-input />\r\n            </div>\r\n        </div>\r\n        <div nz-row style=\"padding-top: 8px;\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <cdk-virtual-scroll-viewport itemSize=\"67.2\" class=\"infinite-container\">\r\n                    <nz-list>\r\n                        <nz-list-item (click)=\"chooseProduct(item)\" *cdkVirtualFor=\"let item of searchList\"\r\n                            style=\"cursor: pointer;\">\r\n                            <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noimage.svg'}}\"\r\n                                nzDescription=\"{{item.name}}\">\r\n                                <nz-list-item-meta-title>\r\n                                    {{vhAlgorithm.vhcurrencyunit_symbol(item.price)}}\r\n                                </nz-list-item-meta-title>\r\n                            </nz-list-item-meta>\r\n                        </nz-list-item>\r\n                        <nz-list-empty *ngIf=\"searchList.length === 0\"></nz-list-empty>\r\n                    </nz-list>\r\n                </cdk-virtual-scroll-viewport>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</nz-drawer>"],"names":[],"sourceRoot":"webpack:///"}