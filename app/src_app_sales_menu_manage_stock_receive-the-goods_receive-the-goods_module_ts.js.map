{"version":3,"file":"src_app_sales_menu_manage_stock_receive-the-goods_receive-the-goods_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/stock/receive-the-goods/detail/detail.component.ts","./src/app/sales/menu/manage/stock/receive-the-goods/detail/detail.component.html","./src/app/sales/menu/manage/stock/receive-the-goods/receive-the-goods.component.ts","./src/app/sales/menu/manage/stock/receive-the-goods/receive-the-goods.component.html","./src/app/sales/menu/manage/stock/receive-the-goods/receive-the-goods.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { Observable } from 'rxjs';\r\nimport { VhBillType2930DetailAdd, VhBillType2930DetailEdit, VhBillType2930Edit } from 'src/app/sales/components/bill-type/bill-type-29-30/bill-type2930-interface';\r\n\r\nimport { ReceiveGoodsA4Component } from 'src/app/sales/components/print/receive-goods/receive-goods-a4/receive-goods-a4.component';\r\nimport { ReceiveGoodsA5Component } from 'src/app/sales/components/print/receive-goods/receive-goods-a5/receive-goods-a5.component';\r\nimport { ReceiveGoodsK57Col3Component } from 'src/app/sales/components/print/receive-goods/receive-goods-k57-col3/receive-goods-k57-col3.component';\r\nimport { ReceiveGoodsK80Col3Component } from 'src/app/sales/components/print/receive-goods/receive-goods-k80-col3/receive-goods-k80-col3.component';\r\nimport { ReceiveGoodsK80Col4Component } from 'src/app/sales/components/print/receive-goods/receive-goods-k80-col4/receive-goods-k80-col4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component'; \r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.scss']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  printer: any;\r\n  tableHeight: string;\r\n  public invoiceInfo: any;\r\n  public invoice: VhBillType2930Edit\r\n  invoiceDetail: VhBillType2930DetailEdit[] =  []\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state.dataRestore\r\n  branchList: any = this.vhQuerySales.getlocalBranchs()\r\n  billInfo: any = this.router.getCurrentNavigation().extras.state.billInfo\r\n  subTotal = 0;\r\n  taxValue = 0\r\n  constructor(\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    private lang: LanguageService,\r\n    private vhAuth: VhAuth,\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n    this.getDataInvoice(this.billInfo._id)\r\n    \r\n    // ------bắt sự kiện nhấn phím nóng-----\r\n    this.eventKeypress();\r\n  }\r\n  ngOnInit() {\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n    this.printer = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)] : { discount_hidden: false, note_hidden: false, fee_hidden: false, tax_hidden: false, debt_hidden: false };\r\n    if (this.printer) {\r\n      this.checkPrinter = this.printer.enable;\r\n    }\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113) event.preventDefault();\r\n      switch (keycode) {\r\n        case 112: this.payInvoice(true)\r\n          break;\r\n        case 113: {\r\n          if (this.checkPrinter) this.payInvoice(false)\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  init(invoice: VhBillType2930Edit = null, invoiceDetail: VhBillType2930DetailEdit[] = null) {\r\n    this.invoice = invoice;\r\n    this.invoiceDetail = invoiceDetail\r\n    if (invoice && invoiceDetail) {\r\n      this.invoiceInfo = {\r\n        employee: this.vhAuth.getlocalEmployee(this.invoice.id_employee),\r\n      }\r\n    } else this.invoiceInfo = { employee: {} }\r\n    //tính tổng tiền\r\n    let subTotal = 0;\r\n    for (let i of this.invoiceDetail) {\r\n      subTotal += (i.price ? i.price * i.quantity : 0)\r\n    }\r\n    this.subTotal = subTotal;\r\n    this.taxValue = this.invoice.total * (this.invoice.tax / 100)\r\n  }\r\n\r\n  private getDataInvoice(id) {\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n      Promise.all([\r\n        this.vhQuerySales.getBill(id),\r\n        this.vhQuerySales.getBill_details_byId_bill(id)\r\n      ]).then(([invoice, invoiceDetail]: any) => {\r\n        if (!invoiceDetail.length)\r\n          this.init(invoice, [])\r\n        else {\r\n          invoiceDetail = this.vhAlgorithm.sortVietnamesebyASC(invoiceDetail, 'name');\r\n          this.init(invoice, invoiceDetail)\r\n        }\r\n        this.vhComponent.hideLoading(0)\r\n\r\n      })\r\n    })\r\n\r\n  }\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id)\r\n    return lot.lot_number + '\\n' + this.fncService.formatDate(lot.date_mfg) + ' - ' + this.fncService.formatDate(lot.date_exp)\r\n  }\r\n  payInvoice(print?) {\r\n    this.vhComponent.alertConfirm(this.lang.translate(\"Confirm\"), \"\", this.lang.translate(\"Receive goods\") + \" ?\", \"Ok\", this.lang.translate(\"Cancel\")).then(() => {\r\n      this.vhComponent.showLoading(\"\", \"current-loading\").then(() => {\r\n        this.vhQuerySales.updateBill_Billdetail(this.invoice._id, this.invoice, this.getCreateUpdateInvoiceDetail()).then(() => {\r\n          \r\n          let invoice: any = {\r\n            ...this.invoice,\r\n            bill_type: 3031,\r\n            id_employee: this.vhAuth.getUser()._id,\r\n          }\r\n          this.vhQuerySales.updateBill_Billdetail(this.invoice._id, invoice, this.getCreateUpdateInvoiceDetail()).then(() => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              this.vhComponent.showToast(2000, this.lang.translate(\"Receive goods successfully\"), \"success-toast\")\r\n              if (print) this.printInvoice(true)\r\n              else this.goBack(true)\r\n            })\r\n          }).catch(err => { console.error(err); this.vhComponent.hideLoading() })\r\n        })\r\n      })\r\n    }).catch(() => { })\r\n  }\r\n  public getCreateUpdateInvoiceDetail(): VhBillType2930DetailAdd[] {\r\n    return this.invoiceDetail.map(item => {\r\n      let detail: VhBillType2930DetailAdd = {\r\n        id_product: item.id_product,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        ptype: item.ptype,\r\n        ratio: item.ratio ? item.ratio : 1,\r\n      }\r\n      if (item.id_lotproduct) detail['id_lotproduct'] = item.id_lotproduct\r\n      if (item.id_subproduct) detail['id_subproduct'] = item.id_subproduct\r\n      if (item.price < item.price_origin) detail['price_origin'] = item.price_origin\r\n      return detail\r\n    })\r\n  }\r\n  /**\r\n  * lấy thông tin dữ liệu trang in\r\n  * @returns Promise<any>\r\n  * @example this.checkPrint()\r\n  */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_delivery_receive_goods')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  printInvoice(goback?) {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice,invoice_detail: this.invoiceDetail }, false, false, `modal-print-${printer['_id']}`).then(modal => {\r\n          modal.onWillDismiss().then(() => { if (goback) this.goBack(true) })\r\n        })\r\n    }, (err) => {\r\n      this.vhComponent.alertMessage(this.lang.translate(\"Function\"), \"\", this.lang.translate(\"Please turn on the printer function\"), \"OK\")\r\n\r\n    })\r\n  }\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ReceiveGoodsK57Col3Component\r\n      case 'print_size_k80_3c': return ReceiveGoodsK80Col3Component\r\n      case 'print_size_k80_4c': return ReceiveGoodsK80Col4Component\r\n      case 'print_size_a5': return ReceiveGoodsA5Component\r\n      case 'print_size_a4': return ReceiveGoodsA4Component\r\n      default: return ReceiveGoodsA4Component\r\n    }\r\n  }\r\n  /**Trở về trang nhận hàng\r\n   */\r\n  goBack(reload) {\r\n    this.router.navigate(['/sales/dashboard/manage/stock/receive'], { state: { ...this.dataRestore, reload: reload } });\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#receive-good-detail-invoice\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".receive-good-detail-invoice-header\") && document.querySelector(\".ant-table-pagination\")) {\r\n      this.tableHeight = document.querySelector(\"#receive-good-detail-invoice\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".receive-good-detail-invoice-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 40 + \"px\";\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack(false)\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n<nz-layout id=\"receive-good-detail-invoice\" *ngIf=\"invoice\">\r\n    <div class=\"sales\">\r\n        <div class=\"sales-cart\">\r\n            <div class=\"sales-cart-header receive-good-detail-invoice-header\" nz-row [nzGutter]=\"16\">\r\n                <div nz-col nzSpan=\"14\" class=\"title\">\r\n                    <b>{{'Goods received receipt' | translate}}</b>\r\n                </div>\r\n                <div nz-col nzSpan=\"10\" class=\"custom-btn right-all-content\">\r\n                    <div *ngIf=\"invoice.bill_type == 31\">\r\n                        <button (click)=\"printInvoice()\" class=\"btn-data nz-hover-border center-all-content\" nz-button\r\n                            nzType=\"default\">\r\n                            <ion-icon style=\"margin-right: 5px;\" src=\"assets/icon/management/printer.svg\"></ion-icon>\r\n                            {{'Print' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"hideScrollbar sales-cart-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\">\r\n                    <nz-table [nzScroll]=\"{ y: tableHeight }\" [nzData]=\"invoiceDetail\" #rowSelectionTable\r\n                        nzShowSizeChanger nzNoResult=\"{{'No data' | translate}}\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th nzWidth=\"35%\"><b>{{'Product name' | translate}}</b></th>\r\n                                <th nzWidth=\"12%\"><b>{{'Unit' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='center'><b>{{'Quantity' | translate}}</b></th>\r\n                                <th nzWidth=\"15%\" nzAlign='right'><b>{{'Unit price' | translate}}</b></th>\r\n                                <th nzWidth=\"25%\" nzAlign='right'><b>{{'Total' | translate}}</b></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let item of rowSelectionTable.data\" style=\"cursor: pointer;\">\r\n                                <td>{{item.name}}\r\n                                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                                      <pre>{{getLotNumber(item.lots, item.id_lotproduct)}} </pre>\r\n                                    </ng-container></td>\r\n                                <td> {{getUnit(item.units, item.ratio)}}</td>\r\n                                <td nzAlign='center'>{{item.quantity}}</td>\r\n                                <td nzAlign='right'>\r\n                                    {{vhAlgorithm.vhcurrencyunit(item.price)}}\r\n                                    <del style=\"font-size: 0.7rem;\" *ngIf=\"display_promotion_selling_price\">\r\n                                        {{item.price_origin > item.price ?\r\n                                        vhAlgorithm.vhcurrencyunit(item.price_origin): ''}}\r\n                                    </del>\r\n                                </td>\r\n                                <td nzAlign='right'><b>{{vhAlgorithm.vhcurrencyunit(item.quantity * item.price)}}</b>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </nz-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div [ngClass]=\"invoice.bill_type == 29 ? 'continue-sell' :'not-continue-sell'\" class=\"sales-bills\">\r\n            <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n                <div>\r\n                    <b>{{'Invoice code' | translate}}</b>\r\n                    <div> {{invoice.bill_code}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Date' | translate}}</b>\r\n                    <div>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Prepared by' | translate}}</b>\r\n                    <div>{{invoiceInfo.employee.name}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Delivery branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name']}}</div>\r\n                </div>\r\n                <div>\r\n                    <b>{{'Receive branch' | translate}}</b>\r\n                    <div>{{billInfo['branch_name_reception']}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n                <b>{{'Delivery information' | translate}}</b>\r\n                <div nz-col nzSpan=\"24\">\r\n                    <span>{{'SubTotal' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(subTotal)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Discount value' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.discount)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Fee' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.fee)}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\" >\r\n                    <span>{{'Tax' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhpercent(invoice.tax/100)}}</div>\r\n                    <div>\r\n                      {{vhAlgorithm.vhcurrencyunit(invoice.total * (invoice.tax / 100))}}</div>\r\n                  </div>\r\n                  <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Total' | translate}}</span>\r\n                    <div>{{vhAlgorithm.vhcurrencyunit(invoice.total)}}</div>\r\n          \r\n                  </div> \r\n                  <div class=\"sales-bills-content-note\" nz-col nzSpan=\"24\">\r\n                    <span>{{'Note' | translate}}</span>\r\n                    <div>{{invoice.note}}</div>\r\n                  </div>\r\n            </div>\r\n            <div *ngIf=\"invoice.bill_type ==29\" nz-row class=\"sales-bills-button\">\r\n                <button [disabled]=\"!checkPrinter\" (click)=\"payInvoice(true)\" nz-button class=\"order-and-print\">\r\n                    {{(\"Receive goods & Print\")|translate}} (F2)\r\n                </button>\r\n                <button (click)=\"payInvoice(false)\" nz-button class=\"order\">\r\n                    {{(\"Receive goods\")|translate}} (F1)</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nz-layout>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VhQuery, VhQuerySales, VhAlgorithm, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhBillType2930Edit } from 'src/app/sales/components/bill-type/bill-type-29-30/bill-type2930-interface';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component'; \r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-receive-the-goods',\r\n  templateUrl: './receive-the-goods.component.html',\r\n  styleUrls: ['./receive-the-goods.component.scss']\r\n})\r\nexport class ReceiveTheGoodsComponent implements OnInit {\r\n  public date: Date[] = [new Date(), new Date()];\r\n  public searchValue: string = ''\r\n  public invoiceShow: VhBillType2930Edit[] = []\r\n  public invoice: VhBillType2930Edit[];\r\n  dataRestore: any = this.router.getCurrentNavigation().extras.state\r\n  tableHeight: string;\r\n  branchList: Array<any> = []\r\n  loadingStatus: boolean = false\r\n  constructor(\r\n    private vhQuery: VhQuery,\r\n    private router: Router,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.dataRestore) {\r\n      this.searchValue = this.dataRestore.searchValue\r\n      this.date = [new Date(this.dataRestore.startTime), new Date(this.dataRestore.endTime)];\r\n      this.invoice = this.dataRestore.invoice\r\n      this.searchBill(this.searchValue)\r\n      if(this.dataRestore.reload) this.getInvoice()\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * lọc bill theo bill_code\r\n   */\r\n  searchBill(value: string) {\r\n    if (value && value.length) {\r\n      let val: string = this.vhAlgorithm.changeAlias(value.trim().toLowerCase())\r\n      this.invoiceShow = this.vhAlgorithm.searchList(val, this.invoice, ['bill_code'])\r\n    } else this.invoiceShow = [...this.invoice]\r\n  }\r\n\r\n  /**\r\n   * get danh sách bill đang chuyển sang chi nhánh này (29) và bill đã nhận hàng (31)\r\n   */\r\n  getInvoice() {\r\n    let id_branch: string = this.vhQuerySales.getDefaultBranch()._id\r\n    this.vhComponent.showLoading(\"\", \"transparent-loading\", null, 0, false).then(() => {\r\n      Promise.all(\r\n        [\r\n          this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, id_branch: { $eq: id_branch }, bill_type: { $eq: 31 } }, {}, {}, 0),\r\n          this.vhQuerySales.getBills_byFields( { date: { $gte: new Date(this.date[0].setHours(0, 0, 0)), $lte: new Date(this.date[1].setHours(23, 59, 59, 59)) }, id_branch_receive: { $eq: id_branch }, bill_type: { $eq: 29 } }, {}, {}, 0)\r\n        ]).then((res: any) => {\r\n          let result = res[0].concat(res[1])\r\n          this.vhComponent.hideLoading(0).then(() => {\r\n            this.branchList = this.vhQuerySales.getlocalBranchs()\r\n            this.invoice = result.map(item => {\r\n              return {\r\n                ...item,\r\n                branch_name: this.checkBranchName(item.bill_type == 29 ? item.id_branch : item.id_branch_send),\r\n                branch_name_reception: this.checkBranchName(item.bill_type == 29 ? item.id_branch_receive : item.id_branch),\r\n                status: this.checkBillType(item.bill_type),\r\n                total: item.total *(1+ item.tax /100)\r\n              }\r\n            }).reverse()\r\n            this.loadingStatus = true\r\n            this.searchBill(this.searchValue)\r\n            this.invoiceShow = this.invoice\r\n            \r\n\r\n          })\r\n        }).catch(err => { this.vhComponent.hideLoading(0); console.error(err) })\r\n    })\r\n  }\r\n  /**\r\n   * trả về tên trạng thái bill qua bill_type\r\n   * @example let status = this.checkBillType(29)\r\n   */\r\n  checkBillType(bill_type) {\r\n    //kiểm tra loại hóa đơn\r\n    switch (bill_type) {\r\n      case 29: { return (this.lang.translate(\"Receive goods\")); }\r\n      case 31: { return (this.lang.translate(\"Received goods\")); }\r\n    }\r\n  }\r\n  /**\r\n   * trả về tên chi nhánh theo id_branch truyền vào\r\n   */\r\n  checkBranchName(id) {\r\n    return this.vhQuerySales.getlocalBranch(id).name\r\n  }\r\n  /**\r\n   * trả về tên phương thức thanh toán của bill\r\n   * @example let payment_name = this.checkPayment(1)\r\n   */\r\n  checkPayment(payment_type, id_wallet?) {\r\n    switch (payment_type) {\r\n      case 1: return this.lang.translate(\"Cash\")\r\n      case 3: return `${this.vhQuerySales.getlocalWallet(id_wallet)['name']}`\r\n    }\r\n  }\r\n  goToDetail(bill) {\r\n    let dataRestore = { searchValue: this.searchValue, startTime: this.date[0], endTime: this.date[1], invoice: this.invoice }\r\n    this.router.navigate([\"/sales/dashboard/manage/stock/receive/detail\"], { state: { billInfo: bill, dataRestore, branchList: this.branchList } })\r\n  }\r\n  onCurrentPageDataChange(event) { }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\"#receive-goods\") && document.querySelector(\".ant-table-thead\") && document.querySelector(\".receive-goods-header\")) {\r\n      this.tableHeight = document.querySelector(\"#receive-goods\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n        - document.querySelector(\".receive-goods-header\").clientHeight - 60 + \"px\";\r\n      if (document.querySelector(\".ant-table-pagination\")) {\r\n        this.tableHeight = document.querySelector(\"#receive-goods\").clientHeight - document.querySelector(\".ant-table-thead\").clientHeight\r\n          - document.querySelector(\".receive-goods-header\").clientHeight - document.querySelector(\".ant-table-pagination\").clientHeight - 60 + \"px\";\r\n      }\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  goBack() {\r\n    this.router.navigate([\"/sales/dashboard/manage/stock\"])\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi thời gian xem báo cáo\r\n   * @param event \r\n   * @example this.changeTime(['2023-06-27T01:21:41.397Z','2023-06-27T01:21:41.397Z'])\r\n   */\r\n  changeTime(event) {\r\n    if (new Date(event[1].setHours(0,0,0,0)).getTime() - new Date(event[0].setHours(0,0,0,0)).getTime() <=  this.fncService.checkDateReport() * 86000000) {\r\n      //this.getExpenses(new Date(this.date[0].setHours(0, 0, 0, 0)), new Date(this.date[1].setHours(23, 59, 59, 59)));\r\n    } else {\r\n      this.vhComponent.alertMessageDesktop(\"error\", this.lang.translate(\"The time limit to view is\") + \" \" + this.fncService.checkDateReport() + \" \" +  this.lang.translate(\"days\"))\r\n      this.date = [new Date(event[0]), new Date(event[0].getTime() + this.fncService.checkDateReport() * 86000000)]\r\n    }\r\n  }\r\n\r\n\r\n  /** hàm sort cho các cột */\r\n  dateCol = false;\r\n  bill_codeCol = false;\r\n  branch_nameCol = false;\r\n  branch_name_receptionCol = false;\r\n  payment_nameCol = false;\r\n  statusCol = false;\r\n  totalCol = false;\r\n  /** Hàm thực hiện sắp xếp theo collect\r\n   *\r\n   * @param colName       // tên cột muôn sắp xếp\r\n   */\r\n  sortTable(colName){\r\n    switch (colName) {\r\n      case 'date':\r\n        if(this.dateCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortDatebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'bill_code':\r\n        if(this.bill_codeCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortStringbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'branch_name':\r\n        if(this.branch_nameCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'branch_name_reception':\r\n        if(this.branch_name_receptionCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'payment_name':\r\n        if(this.payment_nameCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'status':\r\n        if(this.statusCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortVietnamesebyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n      case 'total':\r\n        if(this.totalCol){\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyASC([...this.invoiceShow], colName);\r\n        }else{\r\n          this.invoiceShow = this.vhAlgorithm.sortNumberbyDESC([...this.invoiceShow], colName);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n    <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{'Back' | translate}}\r\n</div>\r\n<nz-layout id=\"receive-goods\">\r\n    <div nz-row class=\"receive-goods-header\">\r\n        <div nz-col nzSpan=\"5\" class=\"title left-all-content\">\r\n            <b>{{'Receive goods'| translate}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"title left-all-content\">\r\n            <nz-input-group style=\"margin-right : 10px;width: 90%;\" [nzSuffix]=\"suffixIconSearch\">\r\n                <input [(ngModel)]=\"searchValue\" (ngModelChange)=\"searchBill($event)\" type=\"text\" nz-input placeholder=\"{{'Search for receipt code' | translate}}\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <i nz-icon nzType=\"search\"></i>\r\n            </ng-template>\r\n        </div>\r\n        <div nz-col nzSpan=\"7\" class=\"date-picker-cus\">\r\n            <nz-range-picker nzFormat='dd/MM/yyyy' [(ngModel)]=\"date\" (ngModelChange)=\"changeTime($event)\"></nz-range-picker>\r\n        </div>\r\n        <div nz-col nzSpan=\"4\" class=\"right-all-content button-group\">\r\n            <div>\r\n                <button class=\"btn-green center-all-content ml-3\" nz-button nzType=\"default\" (click)=\"getInvoice()\">\r\n                    <ion-icon src=\"assets/icon/management/view.svg\"></ion-icon>\r\n                    {{'View' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div nz-row *ngIf=\"!invoiceShow.length && loadingStatus\" style=\"height: 100%;\">\r\n        <div nz-col nzSpan=\"24\" class=\"center-all-content\">\r\n            <p>{{'No data' | translate}}</p>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"invoiceShow.length\" style=\"margin-top: 16px;\">\r\n        <nz-table [nzPageSize]=\"20\" [nzPageSizeOptions]=\"[20, 30, 40, 50, 100, 200]\" [nzScroll]=\"{ y: tableHeight }\" #detailData nzShowPagination nzShowSizeChanger [nzData]=\"invoiceShow\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"cursor: pointer;\" nzLeft nzAlign='left' (click)=\"dateCol = !dateCol;sortTable('date')\">\r\n                        <b>{{'Date' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"dateCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzLeft nzAlign='left' (click)=\"bill_codeCol = !bill_codeCol;sortTable('bill_code')\">\r\n                        <b>{{'Invoice code' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"bill_codeCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"branch_nameCol = !branch_nameCol;sortTable('branch_name')\">\r\n                        <b>{{'Delivery branch' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"branch_nameCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"branch_name_receptionCol = !branch_name_receptionCol;sortTable('branch_name_reception')\">\r\n                        <b>{{'Receive branch' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"branch_name_receptionCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='left' (click)=\"statusCol = !statusCol;sortTable('status')\">\r\n                        <b>{{'Status' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"statusCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                    <th style=\"cursor: pointer;\" nzAlign='right' (click)=\"totalCol = !totalCol;sortTable('total')\">\r\n                        <b>{{'Total' | translate}}</b>\r\n                        <i nz-icon [nzType]=\"totalCol == true ? 'caret-down':'caret-up'\" nzTheme=\"outline\"></i>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr (click)=\"goToDetail(invoice)\" *ngFor=\"let invoice of detailData.data;let i = index\" style=\"cursor: pointer;\">\r\n                    <td nzLeft nzAlign='left'>{{invoice.date | date : \"dd/MM/yyyy HH:mm\"}}</td>\r\n                    <td nzLeft nzAlign='left'>{{invoice.bill_code}}</td>\r\n                    <td nzAlign='left'>{{invoice['branch_name']}}</td>\r\n                    <td nzAlign='left'>{{invoice['branch_name_reception']}}</td>\r\n                    <td nzAlign='left'>{{invoice['status']}}</td>\r\n                    <td nzAlign='right' style=\"color:var(--ion-color-vh-green)\">\r\n                        <b>{{vhAlgorithm.vhcurrencyunit(invoice['total'])}}</b>\r\n                    </td>\r\n            </tbody>\r\n        </nz-table>\r\n    </div>\r\n</nz-layout>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReceiveTheGoodsComponent } from './receive-the-goods.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DetailComponent } from './detail/detail.component';\r\nimport { CanLeavePage } from 'src/app/canLeavePage';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: ReceiveTheGoodsComponent\r\n  },\r\n  {\r\n    path: \"detail\",\r\n    component: DetailComponent,\r\n  },\r\n\r\n]\r\n\r\n@NgModule({\r\n  declarations: [ReceiveTheGoodsComponent, DetailComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n  ]\r\n})\r\nexport class ReceiveTheGoodsModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}