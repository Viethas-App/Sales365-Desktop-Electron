{"version":3,"file":"src_app_sales_menu_manage_warranty_receipt-quote_add_add_module_ts.js","mappings":"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","sources":["./src/app/sales/menu/manage/warranty/receipt-quote/add/add.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/add/add.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/add/add.module.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/add-customer/add-customer.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/add-customer/add-customer.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/bill/bill.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/bill/bill.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/components.module.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/customer-profile/customer-profile.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/customer-profile/customer-profile.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/customer/customer.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/customer/customer.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/retail-info/retail-info.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/retail-info/retail-info.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/search-customer/search-customer.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/search-customer/search-customer.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/staff/staff.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/staff/staff.component.html","./src/app/sales/menu/manage/warranty/receipt-quote/components/tax/tax.component.ts","./src/app/sales/menu/manage/warranty/receipt-quote/components/tax/tax.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { VhAlgorithm, VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { Observable } from 'rxjs';\r\nimport { ReceiptsQuoteA4Component } from 'src/app/sales/components/print/receipts-quote/receipts-quote-a4/receipts-quote-a4.component';\r\nimport { ReceiptsQuoteA5Component } from 'src/app/sales/components/print/receipts-quote/receipts-quote-a5/receipts-quote-a5.component';\r\nimport { ReceiptsQuoteK57Col3Component } from 'src/app/sales/components/print/receipts-quote/receipts-quote-k57-col3/receipts-quote-k57-col3.component';\r\nimport { ReceiptsQuoteK80Col3Component } from 'src/app/sales/components/print/receipts-quote/receipts-quote-k80-col3/receipts-quote-k80-col3.component';\r\nimport { ReceiptsQuoteK80Col4Component } from 'src/app/sales/components/print/receipts-quote/receipts-quote-k80-col4/receipts-quote-k80-col4.component';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { VhQuoteReceiptDetail, VhQuoteReceipts } from 'src/app/sales/interface/vh-quote-receipt';\r\nimport { FunctionService } from 'src/app/sales/services/function.service';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent implements OnInit {\r\n  display_promotion_selling_price: boolean = this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').display_promotion_selling_price\r\n  invoice: VhQuoteReceipts = new VhQuoteReceipts()\r\n  listTax: any[] = this.vhQuerySales.getlocalTaxs().filter(tax => tax.status);\r\n  dataRestore: any;\r\n  private promotions: any = [];\r\n  employee: any = {};\r\n  pickerTime = new Date();\r\n  dateReminder = new Date;\r\n  dateSchedule = new Date;\r\n  customer: any;\r\n  default_price_type: number = 1\r\n  constructor(\r\n    private router: Router,\r\n    private vhComponent: VhComponent,\r\n    private languageService: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth,\r\n    private cdRef: ChangeDetectorRef,\r\n    private fncService: FunctionService,\r\n    private nzModalService: NzModalService\r\n  ) {\r\n    let invoice = this.router.getCurrentNavigation().extras.state;\r\n    this.dataRestore = invoice\r\n    if (invoice.invoice) {\r\n      this.invoice = new VhQuoteReceipts(invoice.invoice, invoice.invoiceDetail, invoice.warranty)\r\n      this.pickerTime = new Date(this.invoice.getDate());\r\n      this.dateReminder = new Date(this.invoice.getDateReminder());\r\n      this.dateSchedule = new Date(this.invoice.getDateSchedule());\r\n      if (this.invoice.getIdPartner() == 'id_retail') {\r\n        this.radioValue = 1\r\n      } else this.radioValue = 2;\r\n    } else {\r\n      this.dateReminder = new Date(this.invoice.getDateReminder());\r\n      this.dateSchedule = new Date(this.invoice.getDateSchedule());\r\n      // set nhân viên mặc định\r\n      if (!this.invoice.getIdTechnician())\r\n        this.invoice.setIdTechnician(this.vhAuth.getUser()._id)\r\n      if (!this.invoice.getIdEmployee())\r\n        this.invoice.setIdEmployee(this.vhAuth.getUser()._id)\r\n      this.employee = this.vhAuth.getlocalEmployee(this.invoice.getIdEmployee());\r\n      this.invoice.setIdBranch(this.vhQuerySales.getDefaultBranch()._id)\r\n    }\r\n    // khởi tạo mặc định 1 sp bảo hành và ghi chú\r\n    if (!this.invoice.getWarrantyProd().length) this.invoice.addWarrantyProd()\r\n    if (!this.invoice.getWarrantyNote().length) this.invoice.addWarrantyNote()\r\n    // check giá bán mặc định\r\n    if (this.vhAuth.checkMyPermission('default_price_type_1')) this.default_price_type = 1;\r\n    else if (this.vhAuth.checkMyPermission('default_price_type_2')) this.default_price_type = 2;\r\n    this.eventKeypress()\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // check thuế\r\n    if (this.invoice.getID() && this.listTax.length > 0) {\r\n      this.id_tax = this.listTax.find(item => item.value == this.invoice.getTax())._id;\r\n    } else {\r\n      let tax = this.listTax.find(item => item.default);\r\n      if (tax) {\r\n        this.id_tax = tax._id\r\n        this.invoice.setTax(tax['value']);\r\n      }\r\n    }\r\n    // check in bill\r\n    let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_warranty')\r\n    this.checkPrinter = printer ? printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable : false;\r\n\r\n  }\r\n  event: any // biến lắng nghe\r\n  ngOnDestroy() {\r\n    document.removeEventListener('keydown', this.event, false);\r\n  }\r\n  checkPrinter: boolean = false;\r\n  \r\n  /**\r\n   * lắng nghe sk nhấn f1 f2 f3 f4 trên bàn phím\r\n   * @example \r\n   */\r\n  eventKeypress() {\r\n    this.event = (event: any) => {\r\n      const keycode = event.keyCode;\r\n      if (keycode === 112 || keycode === 113 || keycode === 114) event.preventDefault();\r\n      if (keycode === 115) this.searchProductList = !this.searchProductList;\r\n      else if (this.invoice.getInvoiceDetail().length > 0) {\r\n        switch (keycode) {\r\n          case 112: this.payInvoice(false)\r\n            break;\r\n          case 113: {\r\n            if (this.checkPrinter) this.payInvoice(true)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.addEventListener('keydown', this.event, false);\r\n  }\r\n  ngAfterViewInit() {\r\n\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.discount_price = this.vhAlgorithm.vhnumeral(\".discount-price\");\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral(\".invoice-fee\")\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   *  hàm xóa sp thanh toán trong local\r\n   * @param detail\r\n   * @example  this.deleteGoods(bill_detail_selected)\r\n   */\r\n  deleteGoods(detail: VhQuoteReceiptDetail, index) {\r\n    this.vhComponent.alertConfirm(\"\", \"\", `${this.languageService.translate(\"Delete\")} ${detail.name}?`, \"OK\", this.languageService.translate(\"Cancel\"))\r\n      .then(() => {\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_warranty)\r\n          this.invoice.removeInvoiceDetail(detail.id_product)\r\n        else {\r\n          this.invoice.getInvoiceDetail().splice(index, 1)\r\n        }\r\n      }, () => { })\r\n  }\r\n  searchProductList: boolean = false;\r\n  /**\r\n   * mở component chọn sp\r\n   * @example this.openSearchProductList()\r\n   */\r\n  openSearchProductList() {\r\n    this.searchProductList = true;\r\n  }\r\n  /**\r\n   * nhận output từ component chọn sp (app-search-product)\r\n   * @param data sp được chọn để thêm vào bill\r\n   * @example this.closeSearchProductList(product_selected)\r\n   */\r\n  closeSearchProductList(data) {\r\n    \r\n\r\n    if (data) {\r\n      if (data.manylot && !data.lot_number) this.openModalChooseLot(data)\r\n      else {\r\n        let price = this.default_price_type == 1 ? data.price : data.price2 ? data.price2 : data.price // check 2 đk là kiểu giá bán và có giá bán sỉ hay ko\r\n        if (!this.vhQuerySales.getLocalAppSettingNameBranch('permission_branch').show_product_mutil_line_warranty)\r\n          this.invoice.addInvoiceDetail({ ...data, price: price }, null)\r\n        else\r\n          this.invoice.addInvoiceDetailMutilLine({ ...data, price: price }, null)\r\n      }\r\n    }\r\n    this.searchProductList = false;\r\n    \r\n\r\n  }\r\n  goBack() {\r\n    this.vhComponent.alertConfirm(`${this.languageService.translate(\"Confirm\")}`, \"\", `${this.languageService.translate(\"Are you sure to cancel the sales order\")}?`, \"OK\", this.languageService.translate('Cancel'))\r\n      .then(() => { this.isExit = true; this.handle() }, () => { })\r\n  }\r\n  /**\r\n   * bắt sk thay đổi số lượng sp trong bill\r\n   * @param product \r\n   * @param event : giá trị thay đổi\r\n   * @example this.checkQuantityProduct(bill_detail_selected, 1)\r\n   */\r\n  checkQuantityProduct(product: VhQuoteReceiptDetail, event) {\r\n    if (!event) product.quantity = 1;\r\n    this.invoice.setSubTotal();\r\n  }\r\n  /**\r\n   * bắt sk thay đổi đơn vị của bill_detail\r\n   * @param ev  ratio được chọn\r\n   * @param item\r\n   * @example  this.changeUnit(24, bill_detail_selected)\r\n   */\r\n  changeUnit(ev, item) {\r\n    if (this.default_price_type == 1) {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price)\r\n      }\r\n    }\r\n    else {\r\n      let unit = this.vhQuerySales.getUnit_byRatio(item.units, ev);\r\n      if (unit) {\r\n        item.unit = unit.unit\r\n        item.price = parseFloat(unit.price2)\r\n        item.ratio = parseFloat(unit.ratio)\r\n        item.price_origin = parseFloat(unit.price2)\r\n      }\r\n    }\r\n    this.invoice.setSubTotal()\r\n  }\r\n  // -------modal edit unit price-------\r\n  isVisibleEditUnitPrice: boolean = false;\r\n  unit_price: any;\r\n  tempDetail: VhQuoteReceiptDetail;\r\n  /**\r\n   * mở modal thay đổi giá bán sản phẩm trong bill\r\n   * @param detail \r\n   * @example this.openEditUnitPrice(bilL_detail_selected)\r\n   */\r\n  openEditUnitPrice(detail: VhQuoteReceiptDetail) {\r\n    this.tempDetail = detail;\r\n    this.isVisibleEditUnitPrice = true;\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.unit_price = this.vhAlgorithm.vhnumeral('.unit_price');\r\n    });\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút Ok modal giảm giá sp\r\n   * @example this.handleEditUnit()\r\n   */\r\n  handleEditUnit() {\r\n    if (this.unit_price.getRawValue() != '' && this.unit_price.getRawValue() >= 0) {\r\n      this.tempDetail.price = parseFloat(this.unit_price.getRawValue());\r\n      this.invoice.setSubTotal();\r\n      this.isVisibleEditUnitPrice = false;\r\n    } else { this.vhComponent.showToast(2000, this.languageService.translate(\"Invalid data, please check again\"), \"alert-toast\") }\r\n  }\r\n  /**\r\n   * tắt modal giảm giá sp\r\n   * @example this.handleCancelEditUnit()\r\n   */\r\n  handleCancelEditUnit() { this.isVisibleEditUnitPrice = false }\r\n  // -------set employee-------\r\n  /**\r\n   * bắt sk thay đổi nv kỹ thuật\r\n   * @param event \r\n   */\r\n  closeAndReceiveTechnician(event) {\r\n    if (event) {\r\n      this.invoice.setIdTechnician(event);\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi nv tạo bill\r\n   * @param event \r\n   */\r\n  closeAndReceiveReceptionist(event) {\r\n    if (event) {\r\n      this.invoice.setIdEmployee(event);\r\n    }\r\n  }\r\n  // ----set customer-----\r\n  radioValue: 1 | 2 | 3 = 1;\r\n  /**\r\n   * bắt sk thay đổi khách hàng\r\n   * @param event \r\n   */\r\n  closeAndReceiveCustomer(event) {\r\n    if (event) {\r\n      this.invoice.setIdPartner(event);\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi loại khách hàng\r\n   * @param event \r\n   */\r\n  changeCustomerType(event) {\r\n    if (this.radioValue == 1) this.invoice.setIdPartner(\"id_retail\")\r\n    if (event == 2 && this.invoice.getRetailName()) {\r\n      this.nzModalService.confirm({\r\n        nzTitle: `${this.languageService.translate('Retail customer information will be lost')}?`,\r\n        nzCancelText: this.languageService.translate(\"Cancel\"),\r\n        nzOkText: \"Ok\",\r\n        nzOnOk: () => { this.clearRetailCustomer() },\r\n        nzOnCancel: () => { this.radioValue = 1 },\r\n      }\r\n      )\r\n    }\r\n  }\r\n  /**\r\n   * clear dữ liệu khách lẻ trong bill trường hợp thay đổi thành khách thành viên\r\n   * @example this.clearRetailCustomer()\r\n   */\r\n  clearRetailCustomer() {\r\n    this.invoice.setRetailName('')\r\n    this.invoice.setRetailPhone('')\r\n    this.invoice.setRetailAddress('')\r\n  }\r\n  /**\r\n   * bắt sk thay đổi phương thức thanh toán\r\n   * @param event \r\n   * @example this.closeAndGetValuePayment(event)\r\n   */\r\n  closeAndGetValuePayment(event) {\r\n    if (event[0] == 1 || event[0] == 2) {\r\n      this.setPaymentType(event[0])\r\n    }\r\n    else if (event[0] == 3) {\r\n      this.setPaymentType(event[0], event[1]);\r\n    }\r\n  }\r\n  /**\r\n   * cập nhật payment_type cho bill\r\n   * @param type \r\n   * @param id_wallet \r\n   * @example  this.setPaymentType(1)\r\n   */\r\n  setPaymentType(type: 1 | 2 | 3, id_wallet?) {\r\n    this.invoice.setPaymentType(type)\r\n    switch (type) {\r\n      case 1: this.invoice.setIdWallet('id_cash'); this.invoice.setPayment(); break;\r\n      case 2: this.invoice.setPayment(0); this.invoice.setIdWallet(null); break\r\n      case 3: {\r\n        if (id_wallet) {\r\n          this.invoice.setIdWallet(id_wallet)\r\n          this.invoice.setPayment()\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk thay đổi date của hóa đơn , gán lại giá trị date mới cho đơn\r\n   * @example this.setPickerTime('2023-06-12T08:02:27.697Z')\r\n   */\r\n  setPickerTime(event) {\r\n    if (event.getTime() < new Date(this.vhAuth.getStore().registrationdate).getTime()) {\r\n      this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the registration date (\")} ${this.fncService.formatDate(this.vhAuth.getStore().registrationdate)} ${\")\"}`, 8000)\r\n      this.pickerTime = new Date(this.invoice.getDate())\r\n      this.invoice.setDate(this.pickerTime);\r\n    }\r\n    else\r\n      this.vhQuerySales.getValidityDate(new Date(event)).then((validitydate: any) => {\r\n        if (validitydate == null) this.invoice.setDate(event);\r\n        else {\r\n          this.pickerTime = new Date(this.invoice.getDate())\r\n          this.invoice.setDate(this.pickerTime);\r\n          this.vhComponent.alertMessageDesktop(\"warning\", `${this.languageService.translate(\"You can only create or edit the invoice from the date\")} ${this.fncService.formatDate(validitydate)}`, 8000)\r\n        }\r\n      })\r\n  }\r\n  /**\r\n   * bắt sk thay đổi ngày hẹn\r\n   * @param event \r\n   */\r\n  setDateSchedule(event) {\r\n    this.invoice.setDateSchedule(event);\r\n  }\r\n  /**\r\n   * bắt sk thay đổi ngày nhắc hẹn\r\n   * @param event \r\n   */\r\n  setDateReminder(event) {\r\n    this.invoice.setDateReminder(event);\r\n  }\r\n  // -------change tax------\r\n  id_tax: string;\r\n  /**\r\n   * bắt sk thay đổi thuế\r\n   * @param event \r\n   */\r\n  changeTax(event) {\r\n    let tax = this.listTax.find(item => item._id == event);\r\n    this.invoice.setTax(tax.value);\r\n  }\r\n  discount_price: any;\r\n  /**\r\n   * bắt sk thay đổi giảm giá của hóa đơn , gán lại giá trị giảm giá mới cho đơn\r\n   * @example this.editDiscount()\r\n   */\r\n  editDiscount() {\r\n    if (this.discount_price.getRawValue() && this.discount_price.getRawValue() >= 0) {\r\n      this.invoice.setDiscount(parseFloat(this.discount_price.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"discount-price\")['value'] = this.invoice.getDiscount();\r\n      this.discount_price = this.vhAlgorithm.vhnumeral('.discount-price');\r\n    }\r\n  }\r\n  invoice_fee: any;\r\n  /**\r\n   * bắt sk thay đổi phí của hóa đơn , gán lại giá trị phí mới cho đơn\r\n   * @example this.editFee()\r\n   */\r\n  editFee() {\r\n    if (this.invoice_fee.getRawValue() && this.invoice_fee.getRawValue() >= 0) {\r\n      this.invoice.setFee(parseFloat(this.invoice_fee.getRawValue()));\r\n    } else {\r\n      document.getElementById(\"invoice-fee\")['value'] = this.invoice.getFee();\r\n      this.invoice_fee = this.vhAlgorithm.vhnumeral('.invoice-fee');\r\n    }\r\n  }\r\n  // -------modal edit pay---------\r\n  edit_pay: boolean = false;\r\n  edit_paytotal: any;\r\n  /**\r\n   * mở modal chỉnh sửa thanh toán của bill\r\n   * @example this.showModalEditTotalPay()\r\n   */\r\n  showModalEditTotalPay() {\r\n    if (this.invoice.getPaymentType() != 2 && this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhAlgorithm.waitingStack().then(() => {\r\n        this.edit_paytotal = this.vhAlgorithm.vhnumeral(\".edit-pay\");\r\n      })\r\n      this.edit_pay = true;\r\n    }\r\n    else if (!this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner()).debt_enable) {\r\n      this.vhComponent.showToast(2000,\r\n        this.languageService.translate(\"This customer is not allowed to debt\"), \"alert-toast\"\r\n      )\r\n    }\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút ok modal chỉnh sửa thanh toán của bill\r\n   * @example this.handleEditPay()\r\n   */\r\n  handleEditPay() {\r\n    if (this.edit_paytotal.getRawValue() >= 0 && this.edit_paytotal.getRawValue() <= this.invoice.getTotalATax()) {\r\n      this.invoice.setPayment(parseFloat(this.edit_paytotal.getRawValue()))\r\n    }\r\n    this.edit_pay = false;\r\n  }\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chỉnh sửa thanh toán của bill\r\n   * @example this.handleCancelEditPay()\r\n   */\r\n  handleCancelEditPay() {\r\n    this.edit_pay = false;\r\n  }\r\n  /**\r\n   * xử lý sk nhấn nút thanh toán hoặc lưu tạm\r\n   * @param bill_type \r\n   * @param print biến cờ để check in hay ko\r\n   * @example this.payInvoice(1)\r\n   */\r\n  payInvoice(print?) {\r\n    if (this.invoice.getWarrantyProd().length == 1 && !this.invoice.getWarrantyProd()[0].content) {\r\n      this.vhComponent.showToast(2000, this.languageService.translate(\"Please add a product warranty\"), \"alert-toast\")\r\n    } else {\r\n      this.vhComponent.alertConfirm(`${this.languageService.translate(\"Save\")}?`, \"\", \"\", \"OK\", this.languageService.translate(\"Cancel\")\r\n      ).then(() => {\r\n        this.vhComponent.showLoading(\"\", \"transparent-loading\").then(() => {\r\n          this.createOrUpdate().then(bill => {\r\n            this.vhComponent.hideLoading(0).then(() => {\r\n              if (bill == \"create\")\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Recepits, quote\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been created successfully\")}`, \"success-toast\"\r\n                )\r\n              else\r\n                this.vhComponent.showToast(2000,\r\n                  `${this.languageService.translate(\"Recepits, quote\")} ${this.invoice.getBillCode()} ${this.languageService.translate(\"has been updated successfully\")}`, \"success-toast\"\r\n                )\r\n              if (print) this.handlePrint();\r\n              else this.handle()\r\n            })\r\n          })\r\n        })\r\n      }, () => { })\r\n    }\r\n  }\r\n  createOrUpdate(): Promise<'create' | 'update'> {\r\n    if (!this.invoice.getID())\r\n      return new Promise<any>(resolve => {\r\n        this.vhQuerySales.createBill_Billdetail(this.invoice.getCreateUpdateInvoice(18), this.invoice.getCreateUpdateInvoiceDetail()).then((res) => {\r\n          this.invoice.setID(res._id)\r\n          this.invoice.setBillCode(res.bill_code)\r\n          this.createWarranty(this.invoice.getCreateWarranty()).then(() => resolve('create'))\r\n        })\r\n      })\r\n    else {\r\n      return new Promise<any>(resolve => {\r\n        this.vhQuerySales.updateBill_Billdetail(this.invoice.getID(), this.invoice.getCreateUpdateInvoice(this.invoice.getBillType()), this.invoice.getCreateUpdateInvoiceDetail()).then((res) => {\r\n          Promise.all([\r\n            this.createWarranty(this.invoice.getCreateWarranty()),\r\n            this.updateWarranty(this.invoice.getUpdateWarranty()),\r\n            this.delWarranty(this.invoice.getDelWarranty())\r\n          ]).then(() => resolve('update'))\r\n        })\r\n      })\r\n    }\r\n  }\r\n  ///////////////////////////////////////////XỬ LÝ WARRANTY///////////////////////////////////////\r\n  /**\r\n   * tạo sp bảo hành cho bill lên DB\r\n   * @param array \r\n   * @returns \r\n   */\r\n  createWarranty(array) {\r\n    const promiseAddWarranty = []\r\n    for (let i = 0; i < array.length; i++) {\r\n      promiseAddWarranty.push(this.vhQuerySales.addWarranty(array[i]))\r\n    }\r\n    return Promise.all(promiseAddWarranty)\r\n  }\r\n  /**\r\n   * cập nhật sp bảo hành cho bill lên DB\r\n   * @param array \r\n   * @returns \r\n   */\r\n  updateWarranty(array) {\r\n    const promiseUpdateWarranty = []\r\n    for (let i = 0; i < array.length; i++) {\r\n      promiseUpdateWarranty.push(this.vhQuerySales.updateWarranty(array[i]._id, array[i]))\r\n    }\r\n    return Promise.all(promiseUpdateWarranty)\r\n  }\r\n  /**\r\n   * xóa sp bảo hành cho bill khỏi DB\r\n   * @param array \r\n   * @returns \r\n   */\r\n  delWarranty(array) {\r\n    const promiseDelWarranty = []\r\n    for (let i = 0; i < array.length; i++) {\r\n      promiseDelWarranty.push(this.vhQuerySales.deleteWarranty(array[i]._id))\r\n    }\r\n    return Promise.all(promiseDelWarranty)\r\n  }\r\n  ///////////////////////////////////////////XỬ LÝ WARRANTY///////////////////////////////////////\r\n   /**\r\n   * lấy thông tin dữ liệu trang in\r\n   * @returns Promise<any>\r\n   * @example this.checkPrint()\r\n   */\r\n  checkPrint() {\r\n    return new Promise((resolve, rejects) => {\r\n      let printer = this.vhQuerySales.getLocalPrintPage('page_desktop_warranty')\r\n      if (printer && printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)].enable) resolve(printer.print_sizes[printer.print_sizes.findIndex(e => e._id == printer.print_size_default)])\r\n      else rejects(\"No\")\r\n    })\r\n  }\r\n\r\n  /**\r\n   * kiểm tra dữ liệu thông tin máy in và mở component in\r\n   * @example this.handlePrint()\r\n   */\r\n  handlePrint() {\r\n    this.checkPrint().then((printer) => {\r\n      if (printer)\r\n        this.vhComponent.showModal(this.renderPrintPage(printer['_id']), { printer: printer, invoice: this.invoice }, false, false, `modal-print-${printer['_id']}`).then((modal) => {\r\n          modal.onWillDismiss().then(() => this.handle())\r\n        })\r\n    }, (err) => this.handle())\r\n  }\r\n\r\n\r\n  /**\r\n   * trả về component của trang in tương ứng\r\n   * @example this.renderPrintPage('print_size_a4')\r\n   * @returns component\r\n   */\r\n  private renderPrintPage(type: 'print_size_a4' | 'print_size_a5' | 'print_size_k80_4c' | 'print_size_k80_3c' | 'print_size_k57_3c') {\r\n    switch (type) {\r\n      case 'print_size_k57_3c': return ReceiptsQuoteK57Col3Component\r\n      case 'print_size_k80_3c': return ReceiptsQuoteK80Col3Component\r\n      case 'print_size_k80_4c': return ReceiptsQuoteK80Col4Component\r\n      case 'print_size_a5': return ReceiptsQuoteA5Component\r\n      case 'print_size_a4': return ReceiptsQuoteA4Component\r\n      default: return ReceiptsQuoteA4Component\r\n    }\r\n  }\r\n  /**\r\n   * trờ về trang danh sách hóa đơn sau khi đã thanh toán xong\r\n   * @example this.handle(true)\r\n   */\r\n  handle() {\r\n    this.isExit = true;\r\n    this.router.navigate(['/sales/dashboard/manage/warranty/receipt-quote'], { state: this.dataRestore['dataRestore'] || this.dataRestore })\r\n  }\r\n\r\n  //--------------visible drawer info customer-----------\r\n  visibleInfoCustomer: boolean = false;\r\n  /**\r\n   * mở modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  openInfoCustomer() {\r\n    if (this.invoice.getIdPartner() != 'id_retail') {\r\n      this.customer = this.vhQuerySales.getlocalCustomer(this.invoice.getIdPartner());\r\n      this.visibleInfoCustomer = true;\r\n    }\r\n  }\r\n  /**\r\n   * đóng modal xem thông tin khách hàng\r\n   * @example this.openInfoCustomer()\r\n   */\r\n  closeInfoCustomer(event) {\r\n    this.visibleInfoCustomer = false;\r\n  }\r\n\r\n  // // ------thoát trang-----\r\n  isExit: boolean = false;\r\n  checkDeactivate(currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState?: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return nextState.url == '/login' ? true : (this.isExit ? this.isExit : this.vhComponent.alertConfirm(this.languageService.translate(\"Confirm\"), \"\", this.languageService.translate(\"Are you sure to cancel the sales order\"), \"OK\", (this.languageService.translate(\"Cancel\"))).then(() => { return true }).catch(() => { return false }))\r\n  }\r\n  ngAfterViewChecked() {\r\n    if (document.querySelector(\".sales-best-selling\") && document.querySelector(\".waranty-invoice-quote-header\") && document.querySelector(\"#waranty-invoice-quote-invoiceDetail\")) {\r\n      document.getElementById(\"waranty-invoice-quote-invoiceDetail\").style.height = document.querySelector(\".sales-best-selling\").clientHeight\r\n        - document.querySelector(\".waranty-invoice-quote-header\").clientHeight - 10 + \"px\";\r\n    }\r\n    if (document.getElementById(\"waranty-invoice-prodAndnote-invoiceDetail\") && document.querySelector(\".sales-cart\") && document.querySelector(\".sales-cart-header\")) {\r\n      document.getElementById(\"waranty-invoice-prodAndnote-invoiceDetail\").style.height = document.querySelector(\".sales-cart\").clientHeight - document.querySelector(\".sales-cart-header\").clientHeight - 10 + 'px';\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n  // -------------xử lý warranty-----------\r\n  searchProductListWarranty: boolean = false;\r\n  /**\r\n   * mở/đóng component chọn sản phẩm bảo hành\r\n   * @example this.openSearchProductListWarranty()\r\n   */\r\n  openSearchProductListWarranty() {\r\n    this.searchProductListWarranty = !this.searchProductListWarranty;\r\n  }\r\n  /**\r\n   * xử lý thêm dữ liệu nhận dc từ component chọn sản phẩm bảo hành\r\n   * @param event \r\n   */\r\n  closeSearchProductListWarranty(event) {\r\n    if (event) {\r\n      this.invoice.addWarrantyProd();\r\n      this.invoice.getWarrantyProd()[0].content = event.name;\r\n    }\r\n    this.searchProductListWarranty = false;\r\n  }\r\n  /**\r\n   * bắt sk thay đổi tên sp bảo hành\r\n   * @param index \r\n   * @param item \r\n   */\r\n  editWarrantyProd(index, item) {\r\n    if (this.invoice.getWarrantyProd().length > 1 && item.content == '') this.invoice.removeWarrantyProd(index, item);\r\n  }\r\n  /**\r\n   * bắt sk thay đổi ghi chú sp bảo hành\r\n   * @param index \r\n   * @param item \r\n   */\r\n  editWarrantyNote(index, item) {\r\n    if (this.invoice.getWarrantyNote().length > 1 && item.content == '') this.invoice.removeWarrantyNote(index, item);\r\n  }\r\n  /**add customer */\r\n  showDrawerAddCusomer: boolean = false;\r\n  showDrawerAddRetail: boolean = false\r\n  /**\r\n   * mở modal thêm khách hàng thành viên mới hoặc thêm thông tin khách lẻ\r\n   * @example this.openDrawerAddCustomerOrRetail()\r\n   */\r\n  openDrawerAddCustomerOrRetail() {\r\n    if (this.radioValue == 1) this.showDrawerAddRetail = true\r\n    else this.showDrawerAddCusomer = true\r\n  }\r\n  /**\r\n   * bắt sk tắt drawer thêm khách hàng\r\n   * @param result output kết quả trả về\r\n   * @example this.closeAddCustomer('NDWOIUHDIUWQHSIOQUH')\r\n   */\r\n  closeAddCustomer(result) {\r\n    if (this.radioValue == 1) {\r\n      if (result) {\r\n        this.invoice.setRetailName(result.retail_name)\r\n        this.invoice.setRetailPhone(result.retail_phone)\r\n        this.invoice.setRetailAddress(result.retail_address)\r\n      }\r\n      this.showDrawerAddRetail = false\r\n    } else  {\r\n      this.showDrawerAddCusomer = false\r\n      if (result) this.invoice.setIdPartner(result)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * trả về tên unit theo ratio truyền vào\r\n   * @param units mảng units của sp\r\n   * @param ratio ratio được chọn\r\n   * @returns string\r\n   * @example let unit_name = this.getUnit([], 1)\r\n   */\r\n  getUnit(units: any[], ratio) {\r\n    return this.vhQuerySales.getUnit_byRatio(units, ratio).unit\r\n  }\r\n\r\n  show_modal_select_lots = false;\r\n  list_search_lot = [];\r\n\r\n  /**\r\n   * trả về tên lô theo id_lot được chọn\r\n   * @param lots \r\n   * @param _id \r\n   * @returns string\r\n   * @example this.getLotNumber([], 'DJWOIDHIEUGHWDSJDNWIHD')\r\n   */\r\n  getLotNumber(lots, _id) {\r\n    let lot = lots.find(item => item._id == _id);\r\n    return lot.lot_number\r\n  }\r\n  /**\r\n   * lọc danh sách lô của sp theo số lô (lot_number)\r\n   * @param value \r\n   */\r\n  searchLot(value) {\r\n    this.tempDetail.lots = this.vhAlgorithm.searchList(this.vhAlgorithm.changeAlias(value), this.list_search_lot, ['lot_number'])\r\n  }\r\n  /**\r\n   * mở modal chọn lô cho sp\r\n   * @param data \r\n   * @example this.openModalChooseLot(bill_detail_selected)\r\n   */\r\n  openModalChooseLot(data) {\r\n    this.tempDetail = data\r\n    this.list_search_lot = this.tempDetail.lots\r\n    if(!this.list_search_lot.length) this.vhComponent.alertMessageDesktop(\"error\", this.languageService.translate(\"Sản phẩm này không có lô khả dụng để bán!\"))\r\n    else this.show_modal_select_lots = true;\r\n  }\r\n\r\n  /**\r\n   * bắt sk thay đổi id_lotnumber của bill-detail\r\n   * @param e id_lotnumber thay đổi\r\n   * @example this.changeLot('DNIUHWIDCHBIQOHSDOIHW')\r\n   */\r\n  changeLot(e) {\r\n    this.tempDetail.lot_number = this.tempDetail.lots.find(item => item._id == e).lot_number\r\n  }\r\n\r\n  /**\r\n   * bắt sk nhấn nút ok của modal chọn lô sp\r\n   * @example this.handleChooseLot()\r\n   */\r\n  handleChooseLot() {\r\n    \r\n\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot;\r\n    if (!this.tempDetail.id_product) this.closeSearchProductList(this.tempDetail);\r\n  }\r\n\r\n\r\n  /**\r\n   * bắt sk nhấn nút hủy modal chọn lô sp\r\n   * @example this.handleCancelChooseLot()\r\n   */\r\n  handleCancelChooseLot() {\r\n    this.show_modal_select_lots = false;\r\n    this.tempDetail.lots = this.list_search_lot\r\n  }\r\n}\r\n","<div nz-row class=\"row-back medium-size\" (click)=\"goBack()\">\r\n  <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>{{\"Back\" | translate}}\r\n</div>\r\n\r\n<nz-layout>\r\n  <div class=\"sales\">\r\n    <div class=\"sales-cart\">\r\n      <div class=\"sales-cart-header\" nz-row [nzGutter]=\"16\">\r\n        <div nz-col nzSpan=\"24\" class=\"title sales-cart-header-title\">\r\n          <b>{{\"Create receipts & quote\" | translate}}</b>\r\n        </div>\r\n        <div id=\"waranty-invoice-prodAndnote-invoiceDetail\"\r\n          class=\"waranty-invoice-prodAndnote-invoiceDetail hideScrollbar\" nz-col nzSpan=\"24\">\r\n          <div nz-row>\r\n            <div nz-col class=\"search-product-warrany\" nzSpan=\"24\">\r\n              <div>\r\n                <h5>{{\"Warranty, repair products\"|translate}}</h5>\r\n              </div>\r\n              <div>\r\n                <ion-icon (click)=\"openSearchProductListWarranty()\" slot=\"end\"\r\n                  style=\"color: var(--ion-color-vh-green); margin-right:10px; font-size: 1.3rem; text-align:end;cursor: pointer;\"\r\n                  name=\"search-outline\"></ion-icon>\r\n                <ion-icon (click)=\"invoice.addWarrantyProd()\" slot=\"end\"\r\n                  style=\"color: var(--ion-color-vh-green); font-size: 1.2rem; text-align:end;cursor: pointer;\"\r\n                  src=\"assets/icon/add.svg\"></ion-icon>\r\n              </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n              <div class=\"hideScrollbar waranty-invoice-prod-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice.getWarrantyProd();let i = index\">\r\n                  <div nz-row>\r\n                    <div (click)=\"invoice.removeWarrantyProd(i,item)\" nz-col nzSpan=\"2\" class=\"center-col\">\r\n                      <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                        style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"18\" class=\"center-col\">\r\n                      <input [(ngModel)]=\"item.content\" (blur)=\"editWarrantyProd(i,item)\"\r\n                        [placeholder]=\"'Enter product name' | translate\" class=\"nz-no-border\" nz-input />\r\n                    </div>\r\n                    <div nz-col nzSpan=\"4\"\r\n                      *ngIf=\"(invoice.getWarrantyProd().length == 1 && invoice.getWarrantyProd()[0].content) || invoice.getWarrantyProd().length>1\">\r\n                      <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"1\" [nzStep]=\"1\" [(ngModel)]=\"item.quantity\"\r\n                        (ngModelChange)=\"checkQuantityProduct(item,$event)\"></nz-input-number>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div nz-col class=\"search-product-warrany\" nzSpan=\"24\">\r\n              <div>\r\n                <h5>{{\"Note\"|translate}}</h5>\r\n              </div>\r\n              <div>\r\n                <ion-icon (click)=\"invoice.addWarrantyNote()\" slot=\"end\"\r\n                  style=\"color: var(--ion-color-vh-green); font-size: 1.2rem; text-align:end;cursor: pointer;\"\r\n                  src=\"assets/icon/add.svg\"></ion-icon>\r\n              </div>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n              <div class=\"hideScrollbar waranty-invoice-prod-invoiceDetail\">\r\n                <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice.getWarrantyNote();let i = index\">\r\n                  <div nz-row>\r\n                    <div (click)=\"invoice.removeWarrantyNote(i,item)\" nz-col nzSpan=\"2\" class=\"center-col\">\r\n                      <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                        style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                    </div>\r\n                    <div nz-col nzSpan=\"18\" class=\"center-col\">\r\n                      <input [(ngModel)]=\"item.content\" (blur)=\"editWarrantyNote(i,item)\"\r\n                        [placeholder]=\"'Enter note' | translate\" class=\"nz-no-border\" nz-input />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"sales-best-selling\">\r\n      <div nz-row class=\"waranty-invoice-quote\">\r\n        <div class=\"waranty-invoice-quote-header\" nz-col nzSpan=\"16\">\r\n          <h5>{{\"Quote\" | translate}}</h5>\r\n        </div>\r\n        <div style=\"text-align: end;\" class=\"waranty-invoice-quote-header\" nz-col nzSpan=\"8\">\r\n          <button style=\"font-size: 0.9rem;\" class=\"btn-data nz-hover-border\" nz-button nzType=\"default\"\r\n            (click)=\"openSearchProductList()\">\r\n            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\r\n            {{'Search (F4)' | translate}}</button>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <div id=\"waranty-invoice-quote-invoiceDetail\" class=\"hideScrollbar waranty-invoice-quote-invoiceDetail\">\r\n            <div class=\"invoiceDetail-item\" *ngFor=\"let item of invoice.getInvoiceDetail(),index as i\">\r\n              <div nz-row>\r\n                <div nz-popconfirm\r\n                    nzPopconfirmTitle=\"{{'Are you sure to delete' | translate}} {{item.name}}\"\r\n                    (nzOnConfirm)=\"deleteGoods(item,i)\" nzPopconfirmPlacement=\"bottomLeft\"\r\n                    nz-col nzSpan=\"1\">\r\n                    <i nz-icon nzType=\"close\" nzTheme=\"outline\"\r\n                        style=\"cursor: pointer;color: var(--ion-color-vh-red)\"></i>\r\n                </div>\r\n                <div nz-col nzSpan=\"8\">\r\n                    <p style=\"margin-bottom: 0;\">{{item.name}}</p>\r\n                    <ng-container *ngIf=\"item.id_lotproduct\">\r\n                        <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(item)\">{{getLotNumber(item.lots, item.id_lotproduct)}}</pre> \r\n                      </ng-container>\r\n                    <p *ngIf=\"item.combos\">\r\n                        <span *ngFor=\"let combo of item.combos;index as i\"\r\n                            style=\"font-size: 0.75rem; color: var(--ion-color-vh-black); font-weight: normal;\">\r\n                            {{ i == item.combos.length-1 ? combo.quantity + 'x ' + combo.name  + ' (' + getUnit(combo.units,combo.ratio)+ ') ' : combo.quantity + 'x ' + combo.name  + ' (' + getUnit(combo.units,combo.ratio)+ ') '+\" ,\"}}\r\n                            <ng-container *ngIf=\"combo.id_lotproduct\">\r\n                                <pre  style=\"color:var(--ion-color-vh-green);cursor: pointer;\"  (click)=\"openModalChooseLot(combo)\">{{getLotNumber(combo.lots, combo.id_lotproduct)}}</pre> \r\n                              </ng-container>\r\n                        </span>\r\n                    </p>\r\n                </div>\r\n                <div nz-col nzSpan=\"3\">\r\n                    <nz-select style=\"width: 100%;\" [(ngModel)]=\"item.ratio\"\r\n                        (ngModelChange)=\"changeUnit($event,item)\">\r\n                        <!-- <nz-option [nzLabel]=\"item.unit\" [nzValue]=\"1\"></nz-option> -->\r\n                        <nz-option *ngFor=\"let i of item.units\" [nzLabel]=\"i.unit\"\r\n                            [nzValue]=\"i.ratio\"></nz-option>\r\n                    </nz-select>\r\n                    <!-- {{item.unit}} -->\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                    <!-- {{item.quantity}} -->\r\n                    <nz-input-number [nzMax]=\"9999999999\" [nzMin]=\"0.1\" [nzStep]=\"1\"\r\n                        [(ngModel)]=\"item.quantity\"\r\n                        (ngModelChange)=\"checkQuantityProduct(item,$event)\" id=\"quantity\">\r\n                    </nz-input-number>\r\n                </div>\r\n                <div (click)=\"openEditUnitPrice(item)\"\r\n                    class=\"invoiceDetail-item-quantity text-end\" nz-col nzSpan=\"4\">\r\n                    <p class=\"max-width-two-line\"\r\n                        style=\"border-bottom: 1px var(--ion-color-vh-gray) solid; margin-left: 16px;\">\r\n                        <span>{{vhAlgorithm.vhcurrencyunit(item.price)}}</span>\r\n                        <del style=\"margin-left:5px;font-size: 0.8rem;\"\r\n                            *ngIf=\"display_promotion_selling_price\">\r\n                            {{item.price_origin > item.price ?\r\n                            vhAlgorithm.vhcurrencyunit(item.price_origin) :\r\n                            ''}}\r\n                        </del>\r\n                    </p>\r\n                </div>\r\n                <div nz-col nzSpan=\"4\" style=\"text-align: right;\">\r\n                    <p class=\"max-width-two-line\">\r\n                        <b>{{vhAlgorithm.vhcurrencyunit(item.price*item.quantity)}}</b>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"sales-bills\">\r\n      <div nz-row class=\"sales-bills-staff hideScrollbar\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div class=\"sales-bills-staff-name\">\r\n            <b>{{'Receptionist' | translate}}</b>\r\n            <app-staff [id_employee]=\"invoice.getIdEmployee()\"\r\n              (closeAndReceiveEmployee)=\"closeAndReceiveReceptionist($event)\"></app-staff>\r\n          </div>\r\n          <div class=\"sales-bills-staff-name\">\r\n            <b>{{'Technician' | translate}}</b>\r\n            <app-staff [id_employee]=\"invoice.getIdTechnician()\"\r\n              (closeAndReceiveEmployee)=\"closeAndReceiveTechnician($event)\"></app-staff>\r\n          </div>\r\n          <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n            <b>{{'Issued date' | translate}}</b>\r\n            <nz-date-picker [(ngModel)]=\"pickerTime\" (ngModelChange)=\"setPickerTime($event)\" nzBorderless nzShowTime\r\n              style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n          </div>\r\n          <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n            <b>{{'Date reminder' | translate}}</b>\r\n            <nz-date-picker [(ngModel)]=\"dateReminder\" (ngModelChange)=\"setDateReminder($event)\" nzBorderless nzShowTime\r\n              style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n          </div>\r\n          <div class=\"sales-bills-staff-time\" nz-col nzSpan=\"24\">\r\n            <b>{{'Date schedule' | translate}}</b>\r\n            <nz-date-picker [(ngModel)]=\"dateSchedule\" (ngModelChange)=\"setDateSchedule($event)\" nzBorderless nzShowTime\r\n              style=\"text-align-last: right;\" nzFormat=\"dd/MM/yyyy HH:mm:ss\"></nz-date-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-customer hideScrollbar\" nz-row style=\"overflow: visible;\">\r\n        <div class=\"sales-bills-customer-title\">\r\n          <b>{{'Customer information' | translate}}</b>\r\n          <ion-icon (click)=\"openDrawerAddCustomerOrRetail()\"\r\n            style=\"color: var(--ion-color-vh-white);padding-right: 5px;\"\r\n            [src]=\"invoice.getRetailName() ? 'assets/icon/eye.svg':'assets/icon/add.svg'\">\r\n          </ion-icon>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <nz-radio-group [(ngModel)]=\"radioValue\" (ngModelChange)=\"changeCustomerType($event)\" nzName=\"radiogroup\">\r\n            <label nz-radio [nzValue]=1>{{'Retail customer' | translate}}</label>\r\n            <label nz-radio [nzValue]=2>{{'Member' | translate}}</label>\r\n            <label nz-radio [nzValue]=3>{{'Search customer' | translate}}</label>\r\n          </nz-radio-group>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <ng-container *ngIf=\"radioValue == 1 && invoice.getRetailName()\">\r\n            {{invoice.getRetailName()}} - {{invoice.getRetailPhone()}} {{invoice.getRetailAddress() ? '-':\r\n            ''}} {{invoice.getRetailAddress()}}\r\n          </ng-container>\r\n          <ng-container *ngIf=\"radioValue == 2\">\r\n            <app-customer [id_customer]=\"invoice.getIdPartner()\"\r\n              (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-customer>\r\n            <i (click)=\"openInfoCustomer()\" [ngClass]=\"invoice.getIdPartner() !='id_retail' ? 'active' : 'deactive'\"\r\n              style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"radioValue == 3\">\r\n              <app-search-customer [id_customer]=\"invoice.id_customer\"\r\n                  (closeAndReceiveCustomer)=\"closeAndReceiveCustomer($event)\"></app-search-customer>\r\n              <i (click)=\"openInfoCustomer()\"\r\n                  [ngClass]=\"invoice.id_customer !='id_retail' ? 'active' : 'deactive'\"\r\n                  style=\"cursor: pointer;\" nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></i>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div class=\"sales-bills-content hideScrollbar\" nz-row>\r\n        <b>{{'Payment information' | translate}}</b>\r\n        <div nz-col nzSpan=\"24\">\r\n          <div>{{'SubTotal' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getSubTotal())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-discount\" nz-col nzSpan=\"24\">\r\n          <div>{{'Discount' | translate}}</div>\r\n          <input (blur)=\"editDiscount()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getDiscount())\"\r\n            class=\"nz-no-border discount-price\" type=\"text\" maxlength=\"15\" id=\"discount-price\" nz-input />\r\n        </div>\r\n        <div class=\"sales-bills-content-fee\" nz-col nzSpan=\"24\">\r\n          <div>{{'Fee' | translate}}</div>\r\n          <input (blur)=\"editFee()\" [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getFee())\"\r\n            class=\"nz-no-border invoice-fee\" type=\"text\" maxlength=\"15\" id=\"invoice-fee\" nz-input />\r\n        </div>\r\n        <div class=\"sales-bills-content-tax\" nz-col nzSpan=\"24\">\r\n          <div>{{'Tax' | translate}}</div>\r\n          <div>\r\n            <nz-select *ngIf=\"listTax.length\" [(ngModel)]=\"id_tax\" (ngModelChange)=\"changeTax($event)\" nzBorderless>\r\n              <nz-option *ngFor=\"let item of listTax\" nzValue=\"{{item._id}}\"\r\n                nzLabel=\"{{vhAlgorithm.vhpercent(item.value/100)}}\">\r\n              </nz-option>\r\n            </nz-select>\r\n            <span class=\"not-found\" *ngIf=\"!listTax.length\">0.00%</span>\r\n          </div>\r\n          <div>\r\n            {{vhAlgorithm.vhcurrencyunit(invoice.getTaxValue())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-total\" nz-col nzSpan=\"24\">\r\n          <div>{{'Total' | translate}}</div>\r\n          <div>{{vhAlgorithm.vhcurrencyunit(invoice.getTotalATax())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-pay\" nz-col nzSpan=\"24\">\r\n          <div><b>{{'Pay' | translate}}</b></div>\r\n          <div> {{vhAlgorithm.vhcurrencyunit(invoice.getPayment())}}<img (click)=\"showModalEditTotalPay()\"\r\n              *ngIf=\"invoice.getPaymentType() != 2\" style=\"width: 16px;margin-left:10px\"\r\n              src=\"assets/icon/Iconfeather-edit.svg\" /></div>\r\n        </div>\r\n        <div class=\"sales-bills-content-rest\" nz-col nzSpan=\"24\">\r\n          <div>{{'Rest' | translate}}</div>\r\n          <div> {{vhAlgorithm.vhcurrencyunit_symbol(invoice.getTotalATax() -\r\n            invoice.getPayment())}}</div>\r\n        </div>\r\n        <div class=\"sales-bills-content-payment_type\" nz-col nzSpan=\"24\">\r\n          <app-tax [payment_type]=\"invoice.getPaymentType()\" [id_wallet]=\"invoice.getIdWallet()\"\r\n            [id_customer]=\"invoice.getIdPartner()\" (closeAndGetValuePayment)=\"closeAndGetValuePayment($event)\">\r\n          </app-tax>\r\n        </div>\r\n      </div>\r\n      <div nz-row class=\"sales-bills-button\">\r\n        <button [disabled]=\"!checkPrinter\" (click)=\"payInvoice(true)\" nz-button class=\"order-and-print\">\r\n          {{\"Complete & Print\"|translate}} (F2)\r\n        </button>\r\n        <button (click)=\"payInvoice(false)\" nz-button class=\"order\">\r\n          {{\"Complete\"|translate}} (F1)</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-layout>\r\n\r\n<!-- -----nz-drawer list-product-------- -->\r\n<app-search-product *ngIf=\"searchProductList\" [searchProductList]=\"searchProductList\"  [default_price_type]=\"default_price_type\"\r\n  (closeSearchProductList)=\"closeSearchProductList($event)\" >\r\n</app-search-product>\r\n<!-- -----nz-drawer list-product-warranty-------- -->\r\n<app-search-product-warranty-invoice *ngIf=\"searchProductListWarranty\"\r\n  [searchProductListWarranty]=\"searchProductListWarranty\"\r\n  (closeSearchProductListWarranty)=\"closeSearchProductListWarranty($event)\">\r\n</app-search-product-warranty-invoice>\r\n\r\n<!--Modal edit unit price-->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice\" *ngIf=\"isVisibleEditUnitPrice\" [(nzVisible)]=\"isVisibleEditUnitPrice\"\r\n  nzTitle=\"{{'Edit unit price' | translate}}\" (nzOnCancel)=\"handleCancelEditUnit()\" (nzOnOk)=\"handleEditUnit()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Unit price' | translate}}</div>\r\n      <div nz-col nzSpan=\"16\">\r\n        <input class=\"unit_price\" type=\"text\" maxlength=\"15\" [value]=\"tempDetail.price\" nz-input\r\n          placeholder=\"{{'Enter unit price' | translate}}\" />\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditUnitPrice>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelEditUnit()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleEditUnit()\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n<!--Modal edit pay-->\r\n<nz-modal [(nzVisible)]=\"edit_pay\" [nzFooter]=\"modalFooterEditPay\" nzTitle=\"{{'Edit' | translate}}\"\r\n  (nzOnCancel)=\"handleCancelEditPay()\" (nzOnOk)=\"handleEditPay()\">\r\n  <ng-container *nzModalContent>\r\n    <div nz-row>\r\n      <div nz-col nzSpan=\"8\" class=\"center-col\">{{'Pay' | translate}}</div>\r\n      <div nz-col nzSpan=\"16\">\r\n        <input [value]=\"vhAlgorithm.vhcurrencyunit(invoice.getPayment())\" class=\"edit-pay\" type=\"text\" maxlength=\"15\"\r\n          nz-input />\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-template #modalFooterEditPay>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n      (click)=\"handleCancelEditPay()\">{{\"Cancel\"\r\n      |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\"\r\n      style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n      class=\"nz-hover-border-green\" (click)=\"handleEditPay()\">{{\"Save\" | translate}}</button>\r\n  </ng-template>\r\n</nz-modal>\r\n \r\n<!-- modal chọn lô/HSD -->\r\n<nz-modal [nzFooter]=\"modalFooterEditUnitPrice2\" [(nzVisible)]=\"show_modal_select_lots\"\r\nnzTitle=\"{{'Select lot number' | translate}}\" (nzOnCancel)=\"handleCancelChooseLot()\" (nzOnOk)=\"handleChooseLot()\">\r\n<ng-container *nzModalContent>\r\n    <div nz-row>\r\n        <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n            <input type=\"text\" nz-input placeholder=\"{{'Find lot number' | translate}}\" #searchValue\r\n                (keyup)=\"searchLot(searchValue.value )\" />\r\n        </nz-input-group>\r\n        <ng-template #suffixIconSearch>\r\n            <i nz-icon nzType=\"search\"></i>\r\n        </ng-template>\r\n    </div>\r\n    <nz-radio-group [(ngModel)]=\"tempDetail.id_lotproduct\" (ngModelChange)=\"changeLot($event)\" style=\"width:100%;\">\r\n        <div nz-row *ngFor=\"let item of tempDetail.lots\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <label class=\"radio-purchase\" nz-radio [nzValue]=\"item._id\" style=\"width:100%;padding: 8px 0;\">\r\n                    <div nz-row>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            {{item.lot_number}}\r\n                        </div>\r\n\r\n                        <div nz-col nzSpan=\"8\">\r\n                            NSX: {{item.date_mfg | date : 'dd/MM/yyyy'}}\r\n                        </div>\r\n                        <div nz-col nzSpan=\"8\">\r\n                            HSD: {{item.date_exp | date : 'dd/MM/yyyy'}}\r\n                        </div>\r\n                    </div>\r\n\r\n                </label>\r\n            </div>\r\n\r\n        </div>\r\n    </nz-radio-group>\r\n    <div *ngIf=\"!tempDetail.lots.length\" style=\"text-align: center;\">{{'No data' | translate}}</div>\r\n</ng-container>\r\n<ng-template #modalFooterEditUnitPrice2>\r\n    <button nz-button class=\"nz-hover-border\"\r\n        style=\"background-color: var(--ion-color-vh-white); color: var(--ion-color-vh-black)\" nzType=\"default\"\r\n        (click)=\"handleCancelChooseLot()\">{{\"Cancel\"\r\n        |translate}}</button>\r\n    <button nz-button class=\"nz-hover-border\" [disabled]=\"!tempDetail.id_lotproduct\"\r\n        style=\"background-color: var(--ion-color-vh-green); color: var(--ion-color-vh-white)\"\r\n        class=\"nz-hover-border-green\" (click)=\"handleChooseLot()\">{{\"Ok\" | translate}}</button>\r\n</ng-template>\r\n</nz-modal>\r\n<!-- --------------visible drawer info customer----------- -->\r\n<app-customer-profile *ngIf=\"visibleInfoCustomer\" [visibleInfoCustomer]=\"visibleInfoCustomer\" [customer]=\"customer\"\r\n  (closeInfoCustomer)=\"closeInfoCustomer($event)\"></app-customer-profile>\r\n<!-- --------------------add customer---------------------- -->\r\n<app-add-customer *ngIf=\"showDrawerAddCusomer\" [showDrawerAddCusomer]=\"showDrawerAddCusomer\"\r\n  (closeAddCustomer)=\"closeAddCustomer($event)\"></app-add-customer>\r\n<app-retail-info *ngIf=\"showDrawerAddRetail\" [showDrawerAddRetail]=\"showDrawerAddRetail\"\r\n  [retail_name]=\"invoice.getRetailName()\" [retail_phone]=\"invoice.getRetailPhone()\"\r\n  [retail_address]=\"invoice.getRetailAddress()\" (closeAddCustomer)=\"closeAddCustomer($event)\"></app-retail-info>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddComponent } from './add.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ComponentsModule } from '../components/components.module';\r\n\r\nimport { SearchModule } from 'src/app/sales/components/search/search.module';\r\nimport { CanLeavePage } from 'src/app/canLeavePage';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddComponent,\r\n    canDeactivate: [CanLeavePage]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [AddComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule,\r\n    NgZorroAntModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    SearchModule\r\n  ]\r\n})\r\nexport class AddModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { VhQuerySales } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\nimport { CountryCode } from 'libphonenumber-js/max';\r\nimport { FunctionService } from 'src/app/cafe/services/function.service';\r\n\r\n@Component({\r\n  selector: 'app-add-customer',\r\n  templateUrl: './add-customer.component.html',\r\n  styleUrls: ['./add-customer.component.scss']\r\n})\r\nexport class AddCustomerComponent implements OnInit {\r\n\r\n  customerGroups = this.vhQuerySales.getlocalCustomerClasss()\r\n  @Input(\"showDrawerAddCusomer\") showDrawerAddCusomer: boolean = false;\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n  addCustomerForm: FormGroup;\r\n  selectedValue: any;\r\n\r\n\r\n\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    private lang: LanguageService,\r\n    private vhQuerySales: VhQuerySales,\r\n    private functionService: FunctionService,\r\n  ) { }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.initaddCustomerForm()\r\n  }\r\n  \r\n\r\n\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? true : false);\r\n  }\r\n\r\n\r\n\r\n  initaddCustomerForm() {\r\n    this.addCustomerForm = new FormGroup({\r\n      img: new FormControl(null),\r\n      name: new FormControl(null, Validators.compose([Validators.required])),\r\n      email: new FormControl(null, Validators.compose([Validators.email])),\r\n      gender: new FormControl(null),\r\n      datebirth: new FormControl(null),\r\n      phone: new FormControl(null, [\r\n        Validators.required,\r\n        this.functionService.phoneValidator(() => this.countryCode),\r\n      ]),\r\n      address: new FormControl(null),\r\n      country: new FormControl(null),\r\n      province: new FormControl(null),\r\n      district: new FormControl(null),\r\n      note: new FormControl(null),\r\n      debt_enable: new FormControl(true),\r\n      id_customer_class : new FormControl(null),\r\n      type : new FormControl(1),\r\n      id_branch : new FormControl(this.vhQuerySales.getDefaultBranch()._id),\r\n      time_for_payment : new FormControl(0, Validators.compose([Validators.required])),\r\n      delete_hidden: new FormControl(false),\r\n      isBusiness: new FormControl(false),\r\n      taxcode: new FormControl(null),\r\n    });\r\n  }\r\n\r\n\r\n\r\n  addCustomer() {\r\n    this.vhComponent.showLoading(\"\").then(() => {\r\n      let customer: any = { ...this.addCustomerForm.value };\r\n\r\n      const phoneNumberValue = customer.phone;\r\n      customer.countryCode = this.countryCode;\r\n      customer.phone = this.functionService.getNationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n      customer.phoneNumber = this.functionService.getInternationalPhoneNumber(phoneNumberValue, this.countryCode);\r\n\r\n      customer.date = new Date();\r\n\r\n      if(customer.isBusiness) {\r\n        delete customer.gender;\r\n        delete customer.datebirth;\r\n      }\r\n      else {\r\n         delete customer.taxcode;\r\n      }\r\n\r\n      this.vhQuerySales.addCustomer(customer)\r\n        .then((res: any) => {\r\n          if(res.vcode == 0) {\r\n            this.vhComponent.hideLoading(0);\r\n            setTimeout(() => {\r\n              this.vhComponent.showToast(1500, `${this.lang.translate(\"Customer\")} ${customer.name} ${this.lang.translate(\"has been added successfully\")}`, \"success-toast\")\r\n              this.closeAddCustomer.emit(res['_id']);\r\n            }, 300);\r\n          }\r\n          else if(res.vcode == 1) {\r\n            //This phone number is already in use with another customer\r\n            this.vhComponent.hideLoading(0);\r\n            this.vhComponent.showToast(1500, this.lang.translate(\"This phone number is already in use with another customer\"), 'alert-toast');\r\n          }\r\n        }, error => {\r\n          this.vhComponent.hideLoading(0);\r\n          this.vhComponent.showToast(1500, this.lang.translate(\"An eror occured while adding customer. Please try again\"), 'alert-toast')\r\n        })\r\n    })\r\n  }\r\n\r\n\r\n\r\n  changeDebt(){\r\n    if(this.addCustomerForm.value.debt_enable)   this.addCustomerForm.addControl('time_for_payment', new FormControl(null, [Validators.required]))\r\n    else    this.addCustomerForm.removeControl('time_for_payment');\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Khi thay đổi Loại khách hàng\r\n   */\r\n  changeBusiness(event) {\r\n    // taxcode required khi isBusiness = true\r\n    if (event) {\r\n      this.addCustomerForm.get('taxcode')?.setValidators([Validators.required]);\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    } \r\n    else {\r\n      this.addCustomerForm.get('taxcode')?.clearValidators();\r\n      this.addCustomerForm.get('taxcode')?.updateValueAndValidity();\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /** Kiểm tra số điện thoại đã tồn tại ha chưa để hiển thị thông báo */\r\n  isExitsPhone: boolean = false;\r\n\r\n  /** Mã quốc gia */\r\n  countryCode: string = this.functionService.defaultCountryCode;\r\n  \r\n  /** Calling code */\r\n  callingCode: string = this.functionService.defaultCallingCode;\r\n  \r\n  /** Số điện thoại đã format. VD: 333 333 333 */\r\n  formattedPhone: string = '';\r\n\r\n\r\n\r\n  /**\r\n   * Mở modal chọn mã quốc gia\r\n   */\r\n  openSearchCountryCode() {\r\n    this.functionService.openSearchCountryCode().then((data) => {\r\n      this.countryCode = data.code;\r\n      this.callingCode = data.callingCode;\r\n      this.formattedPhone = this.functionService.getFormattedPhoneNumber(this.addCustomerForm.value.phone, this.countryCode as CountryCode);\r\n      this.addCustomerForm.get('phone')?.markAsTouched();\r\n      this.addCustomerForm.get('phone')?.markAsDirty();\r\n      this.addCustomerForm.get('phone')?.updateValueAndValidity();\r\n    }).catch((error) => {\r\n      console.error('Error opening country code search:', error);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Format số điện thoại khi nhập và set vào form\r\n   * @param event Sự kiện khi nhập số điện thoại\r\n   */\r\n  formatPhoneNumber(event: Event): void {\r\n    // Lấy số điện thoại đã format\r\n    const input = (event.target as HTMLInputElement).value;\r\n    this.formattedPhone = this.functionService.getFormattedPhoneNumber(input, this.countryCode as CountryCode);\r\n    // Cập nhật vào form\r\n    this.addCustomerForm.get('phone')?.setValue(this.formattedPhone, { emitEvent: false });\r\n  }\r\n\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer\" | translate}}'\r\n  [nzVisible]=\"showDrawerAddCusomer\" [nzFooter]=\"footerAddCustomer\" (nzOnClose)=\"close()\">\r\n  <ng-container *nzDrawerContent>\r\n    <form nz-form [formGroup]=\"addCustomerForm\">\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer name' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n            <nz-input-group>\r\n              <input formControlName=\"name\" nz-input placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n              <ng-template #combineTplName let-control>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Customer name is required' | translate}}\r\n                </ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n            <nz-input-group>\r\n              <div (click)=\"openSearchCountryCode()\" class=\"calling-code\">\r\n                <span>+{{callingCode}}</span>\r\n                <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\"></i>\r\n              </div>\r\n              <input formControlName=\"phone\"\r\n                (input)=\"formatPhoneNumber($event)\"\r\n                [value]=\"formattedPhone\"\r\n                [placeholder]=\"'Enter customer phone' | translate\" type=\"tel\" nz-input required />\r\n              <ng-template #combineTplPhone let-control>\r\n                <ng-container *ngIf=\"control.hasError('invalidPhone')\">{{'_Invalid phone number' | translate}}</ng-container>\r\n                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' | translate}}</ng-container>\r\n              </ng-template>\r\n            </nz-input-group>\r\n            <div *ngIf=\"isExitsPhone\"\r\n              class=\"ng-tns-c300-27 ant-form-item-explain ant-form-item-explain-error ng-star-inserted\"\r\n              ng-reflect-ng-class=\"ant-form-item-explain,ant-form\">\r\n              <div class=\"ng-tns-c300-27 ng-trigger ng-trigger-helpMotion\">\r\n                {{'Phone number already exists' | translate}}\r\n              </div>\r\n            </div>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n\r\n      <!-- Loại khách hàng -->\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer type' | translate}}</b></div>\r\n        <nz-select nzShowSearch nzAllowClear [nzPlaceHolder]=\"'Select customer type' | translate\"\r\n          formControlName=\"isBusiness\" \r\n          (ngModelChange)=\"changeBusiness($event)\">\r\n          <nz-option [nzLabel]=\"'Individual' | translate\" [nzValue]=\"false\"></nz-option>\r\n          <nz-option [nzLabel]=\"'Business/Business household' | translate\" [nzValue]=\"true\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <!-- Mã số thuế -->\r\n      <ng-container *ngIf=\"addCustomerForm.value.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div><b class='label'>{{'Tax code' | translate}}*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"taxcode\">\r\n              <nz-input-group>\r\n                <input formControlName=\"taxcode\" nz-input [placeholder]=\"'Enter tax code' | translate\" />\r\n                <ng-template #taxcode let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'Tax code is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"!addCustomerForm.value.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <div nz-row nzGutter=\"16\">\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b class='label'>{{'Gender' | translate}}</b></div>\r\n              <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"{{'Select gender' | translate}}\"\r\n                [(ngModel)]=\"selectedValue\" formControlName=\"gender\">\r\n                <nz-option nzLabel=\"{{'Female'|translate}}\" nzValue=\"Female\"></nz-option>\r\n                <nz-option nzLabel=\"{{'Male'|translate}}\" nzValue=\"Male\"></nz-option>\r\n              </nz-select>\r\n            </div>\r\n            <div nz-col nzSpan=\"12\">\r\n              <div><b class='label'>{{'Date of birth' | translate}}</b></div>\r\n              <nz-date-picker formControlName=\"datebirth\" nzPlaceHolder=\"{{'Select date of birth' | translate}}\">\r\n              </nz-date-picker>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Email' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control nzErrorTip=\"{{'Email is not correct' | translate}}\">\r\n            <nz-input-group>\r\n              <input type=\"email\" formControlName=\"email\" nz-input\r\n                placeholder=\"{{'Enter customer mail' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Customer tier' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-select nzShowSearch [nzAllowClear]=\"false\" formControlName=\"id_customer_class\">\r\n              <nz-option [nzValue]=\"null\" nzLabel=\"{{'Undefined' | translate}}\">\r\n              </nz-option>\r\n              <nz-option *ngFor=\"let item of customerGroups\" [nzValue]=\"item._id\" [nzLabel]=\"item.name\">\r\n              </nz-option>\r\n            </nz-select>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Address' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"address\" nz-input placeholder=\"{{'Enter address' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Country' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"country\" nz-input placeholder=\"{{'Enter country' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Province' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"province\" nz-input placeholder=\"{{'Enter province' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'District' | translate}}</b></div>\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-input-group>\r\n              <input formControlName=\"district\" nz-input placeholder=\"{{'Enter district' | translate}}\" />\r\n            </nz-input-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <div><b class='label'>{{'Note' | translate}}</b></div>\r\n        <textarea nz-input placeholder=\"{{'Enter note' | translate}}\" [nzAutosize]=\"{ minRows: 3, maxRows: 5 }\"\r\n          formControlName=\"note\"></textarea>\r\n      </div>\r\n      <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n        <div></div>\r\n        <label nz-checkbox formControlName=\"debt_enable\" (ngModelChange)=\"changeDebt()\">{{'Debit permission' | translate}}</label>\r\n      </div>\r\n      \r\n      <div nz-row *ngIf=\"addCustomerForm.value.debt_enable\">\r\n        <div nz-col nzSpan=\"12\" style=\"padding-top: 22px;\">\r\n          <div><b class='label'>{{'Payment term' | translate}}({{'day' | translate}})*</b></div>\r\n          <nz-form-item>\r\n            <nz-form-control [nzErrorTip]=\"combineTplTime\">\r\n              <nz-input-group>\r\n                <input formControlName=\"time_for_payment\" nz-input placeholder=\"{{'Enter number of days' | translate}}\" required type=\"number\" min=\"0\"/>\r\n                <ng-template #combineTplTime let-control>\r\n                  <ng-container *ngIf=\"control.hasError('required')\">{{'This field is required' | translate}}\r\n                  </ng-container>\r\n                </ng-template>\r\n              </nz-input-group>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n  <ng-template #footerAddCustomer>\r\n    <div class=\"footerAddCustomer\" style=\"float: right\">\r\n      <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n      <button [disabled]=\"addCustomerForm.invalid\" [ngStyle]=\"{opacity: addCustomerForm.invalid ? 0.5 : 1}\" nz-button\r\n        (click)=\"addCustomer()\">{{\"Add\" | translate}}</button>\r\n    </div>\r\n  </ng-template>\r\n</nz-drawer>","import { Component, OnInit } from '@angular/core';\r\nimport { VhAlgorithm } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\n\r\n@Component({\r\n  selector: 'app-bill',\r\n  templateUrl: './bill.component.html',\r\n  styleUrls: ['./bill.component.scss']\r\n})\r\nexport class BillComponent implements OnInit {\r\n\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.intStr = parseInt(this.editStr);\r\n  }\r\n  intStr: any;\r\n  discount: any;\r\n  tax: any;\r\n  payment: any;\r\n  ngAfterViewInit() {\r\n    this.vhAlgorithm.waitingStack().then(() => {\r\n      this.discount = this.vhAlgorithm.vhnumeral(\".discount\");\r\n      this.tax = this.vhAlgorithm.vhnumeral(\".tax\");\r\n      this.payment = this.vhAlgorithm.vhnumeral(\".payment-price\");\r\n    });\r\n  }\r\n  type_payment: any = '1';\r\n  id_tax: any = 'a';\r\n  options = [\r\n    {\r\n      value: '1',\r\n      label: 'Tiền mặt',\r\n      isLeaf: true\r\n    },\r\n    {\r\n      value: '2',\r\n      label: 'Công nợ',\r\n      isLeaf: true\r\n    },\r\n    {\r\n      value: '3',\r\n      label: 'Tài khoản',\r\n      children: [\r\n        {\r\n          value: 'vietcombank',\r\n          label: 'Vietcombank',\r\n          isLeaf: true\r\n        },\r\n        {\r\n          value: 'sacombank',\r\n          label: 'Sacombank',\r\n          isLeaf: true\r\n        }\r\n      ]\r\n    }]\r\n\r\n  nzOptions: NzCascaderOption[] = this.options;\r\n  value1: string[] | null = null;\r\n\r\n  onChanges(values: string[]): void {\r\n  }\r\n\r\n  value: any = 0;\r\n  valuetax: any = 0;\r\n  editStr: any = '0';\r\n\r\n}\r\n","<nz-layout>\r\n  <div nz-row>\r\n    <div nz-col nzSpan=\"24\">\r\n      <b>{{'Payment information' | translate}}</b>\r\n    </div>\r\n  </div>\r\n  <div class=\"content\">\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          {{'Quantity' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">1</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          {{'SubTotal' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">15,000</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\" class=\"center-div\">\r\n          {{'Discount' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">\r\n          <input class=\"no-border discount\" type=\"text\" maxlength=\"15\" nz-input placeholder=\"0\" />\r\n        </div>\r\n      </div>\r\n      <div nz-row >\r\n        <div nz-col nzSpan=\"12\" class=\"center-div\">\r\n          {{'Fee' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">\r\n          <input class=\"no-border tax\" type=\"text\" maxlength=\"15\" nz-input placeholder=\"0\" />\r\n        </div>\r\n      </div>\r\n      <div nz-row >\r\n        <div nz-col nzSpan=\"8\" class=\"center-div\">\r\n          {{'Tax' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"8\">\r\n          <nz-select [ngModel]=\"id_tax\" nzBorderless>\r\n            <nz-option  nzValue=\"a\" nzLabel=\"10%\"></nz-option>\r\n            <nz-option  nzValue=\"b\" nzLabel=\"5%\"></nz-option>\r\n          </nz-select>\r\n        </div>\r\n        <div nz-col nzSpan=\"8\" class=\"right-div\" style=\"align-items: center;\">1,500</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          {{'Total' | translate}}\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">16,500</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          <b style=\"font-size: 0.9rem;\">{{'Pay' | translate | uppercase}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"10\" class=\"right-div payment\">\r\n          <input class=\"no-border payment-price payment\" type=\"text\" maxlength=\"15\" nz-input placeholder=\"0\" />\r\n        </div>\r\n        <div nz-col nzSpan=\"2\" class=\"ion-price\">\r\n            <img style=\"width: 16px;\" src=\"assets/icon/Iconfeather-edit.svg\" />\r\n        </div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          <b style=\"font-size: 0.9rem;\">{{'Rest' | translate  | uppercase}}</b>\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div payment\">16,500 đ</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <nz-cascader\r\n            [nzOptions]=\"nzOptions\"\r\n            [(ngModel)]=\"value1\"\r\n            nzPlaceHolder=\"{{'Payment method' | translate}}\"\r\n            (ngModelChange)=\"onChanges($event)\"> </nz-cascader>\r\n        </div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          Tiền khách trả\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">0</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"12\">\r\n          Tiền thừa\r\n        </div>\r\n        <div nz-col nzSpan=\"12\" class=\"right-div\">0</div>\r\n      </div>\r\n      <div nz-row class=\"cus-padd\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <textarea nz-input placeholder=\"{{'Enter note...' | translate}}\"\r\n          [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</nz-layout>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { StaffComponent } from './staff/staff.component';\r\nimport { CustomerComponent } from './customer/customer.component';\r\nimport { BillComponent } from './bill/bill.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { AddCustomerComponent } from './add-customer/add-customer.component';\r\nimport { CustomerProfileComponent } from './customer-profile/customer-profile.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { TaxComponent } from './tax/tax.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { NgZorroAntModule } from 'src/app/ng-zorro-ant.module';\r\nimport { RetailInfoComponent } from './retail-info/retail-info.component';\r\nimport { SearchCustomerComponent } from './search-customer/search-customer.component';\r\n@NgModule({\r\n  declarations: [\r\n    StaffComponent,\r\n    CustomerComponent,\r\n    BillComponent,\r\n    AddCustomerComponent,\r\n    CustomerProfileComponent,\r\n    TaxComponent,\r\n    CustomerProfileComponent,\r\n    RetailInfoComponent,\r\n    SearchCustomerComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgZorroAntModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    ScrollingModule\r\n  ],\r\n  exports: [\r\n    StaffComponent,\r\n    CustomerComponent,\r\n    BillComponent,\r\n    TaxComponent,\r\n    CustomerProfileComponent,\r\n    RetailInfoComponent,\r\n    AddCustomerComponent,\r\n    SearchCustomerComponent\r\n  ]\r\n})\r\nexport class ComponentsModule { }\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-customer-profile',\r\n  templateUrl: './customer-profile.component.html',\r\n  styleUrls: ['./customer-profile.component.scss']\r\n})\r\nexport class CustomerProfileComponent implements OnInit {\r\n  @Input(\"visibleInfoCustomer\") visibleInfoCustomer: boolean = false;\r\n  @Input(\"customer\") customer;\r\n  @Output(\"closeInfoCustomer\") closeInfoCustomer = new EventEmitter<any>();\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  goBack() {\r\n    this.closeInfoCustomer.emit(false)\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" [nzTitle]=\"false\" [nzVisible]=\"visibleInfoCustomer\"\r\n  (nzOnClose)=\"goBack()\">\r\n  <ng-container *nzDrawerContent>\r\n    <h3>{{'Customer information' | translate}}</h3>\r\n    <div class=\"info-customer\" nz-row>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer name' | translate}}:</b><span> {{customer.name}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Phone number' | translate}}:</b><span> {{customer.phone}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Customer type' | translate}}:</b><span> {{(customer.isBusiness ? 'Business/Business household' : 'Individual') | translate}}</span>\r\n      </div>\r\n\r\n      <ng-container *ngIf=\"customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Tax code' | translate}}:</b><span> {{customer.taxcode}}</span>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"!customer.isBusiness\">\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Gender' | translate}}:</b><span> {{customer.gender | translate}}</span>\r\n        </div>\r\n        <div nz-col nzSpan=\"24\">\r\n          <b>{{'Date of birth' | translate}}:</b><span> {{customer.datebirth | date : 'dd/MM/yyyy'}}</span>\r\n        </div>\r\n      </ng-container>\r\n\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Email' | translate}}:</b><span> {{customer.email}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Address' | translate}}:</b><span> {{customer.address}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Country' | translate}}:</b><span> {{customer.country}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Province' | translate}}:</b><span> {{customer.province}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'District' | translate}}:</b><span> {{customer.district}}</span>\r\n      </div>\r\n      <div nz-col nzSpan=\"24\">\r\n        <b>{{'Note' | translate}}:</b><span> {{customer.note}}</span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-customer',\r\n  templateUrl: './customer.component.html',\r\n  styleUrls: ['./customer.component.scss']\r\n})\r\nexport class CustomerComponent implements OnInit {\r\n  @Input(\"id_customer\") id_customer;\r\n  @Output() closeAndReceiveCustomer = new EventEmitter<any>();\r\n  debt: boolean = null;\r\n  public customerList: any[] = []\r\n\r\n  public searchList: any[] = [];\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales\r\n  ) {\r\n    this.searchList = [...this.customerList]\r\n  }\r\n  ngOnInit() {\r\n    this.getData()\r\n  }\r\n  ngOnDestroy() {\r\n    this.observableCustomers.unsubscribe()\r\n  }\r\n  observableCustomers: any;\r\n  getData() {\r\n    this.observableCustomers = this.vhQuerySales.getObservableLocalCustomers().subscribe((localCustomers: any) => {\r\n      this.customerList = localCustomers.filter(customer => {\r\n        if (customer['_id'] != \"id_retail\") {\r\n          if (this.debt == null) return true\r\n          else if (customer['debt_enable'] == this.debt) return true\r\n          else return false\r\n        } return false\r\n      }).map( item => {return {...item, earning_point : item.earning_point ? item.earning_point : 0}})\r\n      this.id_customer = this.id_customer ? this.id_customer : this.customerList[0]._id;\r\n      this.searchList = this.customerList\r\n    })\r\n\r\n  }\r\n  cancel(value) {\r\n    this.closeAndReceiveCustomer.emit(value)\r\n  }\r\n\r\n  search(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.customerList, ['name','phone'])\r\n    else this.searchList = this.customerList\r\n  }\r\n}\r\n","<nz-select [ngModel]=\"id_customer\" (ngModelChange)=\"cancel($event)\" [nzServerSearch]=\"true\" class=\"cus-select\" nzShowSearch (nzOnSearch)=\"search($event)\" nzPlaceHolder=\"{{'Select customer'| translate}}\">\r\n    <nz-option *ngFor=\"let item of searchList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}} - {{item.phone}} \">\r\n    </nz-option>\r\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-retail-info',\r\n  templateUrl: './retail-info.component.html',\r\n  styleUrls: ['./retail-info.component.scss']\r\n})\r\nexport class RetailInfoComponent implements OnInit {\r\n  @Input(\"showDrawerAddRetail\") showDrawerAddRetail: boolean = false;\r\n  @Input(\"retail_name\") retail_name: string = '';\r\n  @Input(\"retail_phone\") retail_phone: string = '';\r\n  @Input(\"retail_address\") retail_address: string = '';\r\n  @Output(\"closeAddCustomer\") closeAddCustomer = new EventEmitter<any>();\r\n\r\n  constructor() { }\r\n  ngOnInit(): void {\r\n    this.initaddRetailForm()\r\n  }\r\n  addRetailForm: FormGroup;\r\n  close(success?) {\r\n    this.closeAddCustomer.emit(success ? this.addRetailForm.value : false);\r\n  }\r\n  initaddRetailForm() {\r\n    this.addRetailForm = new FormGroup({\r\n      retail_name: new FormControl(this.retail_name, Validators.compose([Validators.required])),\r\n      retail_phone: new FormControl(this.retail_phone, Validators.compose([Validators.required, Validators.minLength(6)])),\r\n      retail_address: new FormControl(this.retail_address),\r\n    });\r\n  }\r\n}\r\n","<nz-drawer [nzMaskClosable]=\"true\" [nzWidth]=\"400\" nzTitle='{{\"Add customer retail\" | translate}}'\r\n    [nzVisible]=\"showDrawerAddRetail\" [nzFooter]=\"footerAddRetail\" (nzOnClose)=\"close()\">\r\n    <ng-container *nzDrawerContent>\r\n        <form nz-form [formGroup]=\"addRetailForm\">\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Name' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplName\">\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_name\" nz-input\r\n                                placeholder=\"{{'Enter customer name' | translate}}\" required />\r\n                            <ng-template #combineTplName let-control>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Retail name is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Phone number' | translate}}*</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control [nzErrorTip]=\"combineTplPhone\">\r\n                        <nz-input-group>\r\n                            <input class=\"phone\" formControlName=\"retail_phone\" type=\"tel\" nz-input\r\n                                placeholder=\"{{'Enter customer phone' | translate}}\" minlength=\"6\" required />\r\n                            <ng-template #combineTplPhone let-control>\r\n                                <ng-container *ngIf=\"control.hasError('minlength')\">{{'At least 6 characters' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"control.hasError('required')\">{{'Phone number is required' |\r\n                                    translate}}\r\n                                </ng-container>\r\n                            </ng-template>\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n            <div nz-col nzSpan=\"24\">\r\n                <div><b class='label'>{{'Address' | translate}}</b></div>\r\n                <nz-form-item>\r\n                    <nz-form-control>\r\n                        <nz-input-group>\r\n                            <input formControlName=\"retail_address\" nz-input\r\n                                placeholder=\"{{'Enter address' | translate}}\" />\r\n                        </nz-input-group>\r\n                    </nz-form-control>\r\n                </nz-form-item>\r\n            </div>\r\n        </form>\r\n    </ng-container>\r\n    <ng-template #footerAddRetail>\r\n        <div class=\"footerAddRetail\" style=\"float: right\">\r\n            <button nz-button style=\"margin-right: 8px;\" (click)=\"close()\">{{\"Cancel\" | translate}}</button>\r\n            <button [disabled]=\"addRetailForm.invalid\" [ngStyle]=\"{opacity: addRetailForm.invalid ? 0.5 : 1}\" nz-button\r\n                (click)=\"close(true)\">{{\"Add\" | translate}}</button>\r\n        </div>\r\n    </ng-template>\r\n</nz-drawer>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhQuerySales } from 'ionic-vhframeworks';\r\n\r\n@Component({\r\n  selector: 'app-search-customer',\r\n  templateUrl: './search-customer.component.html',\r\n  styleUrls: ['./search-customer.component.scss']\r\n})\r\nexport class SearchCustomerComponent implements OnInit {\r\n  @Input(\"id_customer\") id_customer;\r\n  @Output() closeAndReceiveCustomer = new EventEmitter<any>();\r\n  debt: boolean = null;\r\n  public customerList: any[] = []\r\n\r\n  public searchList: any[] = [];\r\n  constructor(\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhQuerySales: VhQuerySales\r\n  ) {\r\n    this.searchList = [...this.customerList]\r\n  }\r\n  ngOnInit() {\r\n\r\n  }\r\n  cancel(value) {\r\n    this.closeAndReceiveCustomer.emit(value)\r\n  }\r\n\r\n  timer: any;\r\n  search(value: string) {\r\n    clearTimeout(this.timer);\r\n    // sau 500ms thì thực hiện\r\n    this.timer = setTimeout(() => {\r\n      let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n      if (value.length >= 6) {\r\n        this.vhQuerySales.searchKeyword_NamePhone('customers', tempVal).then((res: any) => {\r\n          this.searchList = res.map(item => {\r\n            return { ...item, earning_point: item.earning_point ? item.earning_point : 0 }\r\n          })\r\n        }\r\n        )\r\n      }\r\n    }, 500);\r\n\r\n  }\r\n}\r\n","<nz-select [ngModel]=\"id_customer\" [nzServerSearch]=\"true\" (ngModelChange)=\"cancel($event)\"\r\n  (nzOnSearch)=\"search($event)\" class=\"cus-select\" nzShowSearch nzPlaceHolder=\"{{'Enter name or phone number to search ...'| translate}}\">\r\n  <nz-option *ngFor=\"let item of searchList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}} - {{item.phone}}\">\r\n  </nz-option>\r\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { VhAlgorithm, VhAuth } from 'ionic-vhframeworks';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\n\r\n@Component({\r\n  selector: 'app-staff',\r\n  templateUrl: './staff.component.html',\r\n  styleUrls: ['./staff.component.scss']\r\n})\r\nexport class StaffComponent {\r\n  @Input(\"id_employee\") id_employee;\r\n  @Output(\"closeAndReceiveEmployee\") closeAndReceiveEmployee = new EventEmitter<any>();\r\n  public employeeList: any[] = this.vhAuth.getlocalEmployees();\r\n  public searchList: any[] = [];\r\n  search: string;\r\n  constructor(\r\n    private vhComponent: VhComponent,\r\n    public vhAlgorithm: VhAlgorithm,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n    this.searchList = [...this.employeeList];\r\n    if (!this.id_employee && this.searchList.length) {\r\n      this.id_employee = this.searchList[0]._id\r\n    }\r\n  }\r\n  cancel(value) {\r\n    if (value) this.closeAndReceiveEmployee.emit(value);\r\n  }\r\n  selectEmployees(value) {\r\n    if (value) this.vhComponent.hideModal(value)\r\n  }\r\n\r\n  searchBar(value: string) {\r\n    let tempVal: string = this.vhAlgorithm.changeAlias(value.toLowerCase());\r\n    if (value.length)\r\n      this.searchList = this.vhAlgorithm.searchList(tempVal, this.employeeList, ['name'])\r\n    else this.searchList = this.employeeList\r\n  }\r\n  goBack() {\r\n    this.closeAndReceiveEmployee.emit(false)\r\n  }\r\n\r\n}\r\n","<!-- <nz-modal [nzBodyStyle]=\"{height : '400px'}\" [nzFooter]=\"null\" (nzOnCancel)=\"goBack()\"\r\n    [(nzVisible)]=\"visible_list_employees\" [nzWidth]=\"400\" [nzTitle]=\"modalTitle\">\r\n    <ng-template #modalTitle>\r\n        <nz-input-group class=\"nz-hover-border input\">\r\n            <input class=\"nz-hover-border input\" style=\"font-size: 0.9rem; border-radius: 10px;\" type=\"text\" nz-input\r\n                [(ngModel)]=\"search\" (ngModelChange)=\"searchBar($event)\"\r\n                placeholder=\"{{'Search for employee name'|translate}}\" />\r\n        </nz-input-group>\r\n    </ng-template>\r\n    <ng-container *nzModalContent>\r\n        <nz-list id=\"search-product-item\" nzItemLayout=\"horizontal\">\r\n            <nz-list-item (click)=\"cancel(item)\" *ngFor=\"let item of searchList\" style=\"cursor: pointer;\">\r\n                <nz-list-item-meta nzAvatar=\"{{item.img ? item.img : 'assets/icon/management/noavatar.svg'}}\"\r\n                    nzDescription=\"{{item.name}}\">\r\n                    <nz-list-item-meta-title>\r\n                        {{item.phone}}\r\n                    </nz-list-item-meta-title>\r\n                </nz-list-item-meta>\r\n            </nz-list-item>\r\n            <nz-list-empty *ngIf=\"searchList.length === 0\"></nz-list-empty>\r\n        </nz-list>\r\n    </ng-container>\r\n</nz-modal> -->\r\n<nz-select nzPlaceHolder=\"{{'Select employee' | translate}}\" [ngModel]=\"id_employee\" (ngModelChange)=\"cancel($event)\"\r\n    nzBorderless class=\"cus-select\" nzShowSearch>\r\n    <nz-option *ngFor=\"let item of searchList\" nzValue=\"{{item._id}}\" nzLabel=\"{{item.name}}\">\r\n    </nz-option>\r\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { VhAuth, VhQuerySales } from 'ionic-vhframeworks';\r\nimport { NzCascaderOption } from 'ng-zorro-antd/cascader';\r\nimport { VhComponent } from 'src/app/sales/components/vh-component/vh-component';\r\nimport { LanguageService } from 'src/app/sales/services/language.service';\r\n\r\n@Component({\r\n  selector: 'app-tax',\r\n  templateUrl: './tax.component.html',\r\n  styleUrls: ['./tax.component.scss']\r\n})\r\nexport class TaxComponent implements OnInit {\r\n  @Input(\"id_customer\") id_customer = 'id_retail';\r\n  @Input(\"payment_type\") payment_type = 1;\r\n  @Input(\"id_wallet\") id_wallet = 'id_cash';\r\n  @Output('closeAndGetValuePayment') closeAndGetValuePayment = new EventEmitter<any>();\r\n  constructor(\r\n    private vhQuerySales: VhQuerySales,\r\n    private languageService: LanguageService,\r\n    private vhAuth: VhAuth\r\n  ) {\r\n  }\r\n  ngOnInit(): void {\r\n    this.listWallets = this.vhQuerySales.getlocalWallets().filter(wallet => wallet._id != 'id_cash' && wallet.id_branch == this.vhQuerySales.getDefaultBranch()._id)\r\n      .map(wallet => { return { label: wallet.name, value: wallet._id, isLeaf: true } })\r\n    this.nzOptions[2].children = this.listWallets;\r\n    if (this.payment_type) {\r\n      if (this.payment_type == 2 || this.payment_type == 1) this.type_payment = [this.payment_type]\r\n      else if (this.payment_type == 3) this.type_payment = [3, this.id_wallet];\r\n    }\r\n  }\r\n  type_payment: any[]\r\n  listWallets: Array<any> = [];\r\n\r\n  nzOptions: NzCascaderOption[] = [\r\n    { value: 1, label: this.languageService.translate(\"Cash\"), isLeaf: true },\r\n    { value: 2, label: this.languageService.translate(\"Debit\"), disabled: true, isLeaf: true },\r\n    { value: 3, label: this.languageService.translate(\"Account\"), children: [] }\r\n  ]\r\n\r\n  onChanges(event) {\r\n    this.closeAndGetValuePayment.emit(event);\r\n  }\r\n  ngOnChanges(valueChange: SimpleChanges) {\r\n    if (valueChange.payment_type) {\r\n      let type = valueChange.payment_type.currentValue;\r\n      if (type == 2 || type == 1) this.type_payment = [this.payment_type]\r\n      else if (type == 3) this.type_payment = [3, this.id_wallet];\r\n    }\r\n    if (valueChange.id_customer) {\r\n      if (valueChange.id_customer.currentValue == \"id_retail\" || (valueChange.id_customer.currentValue != \"id_retail\" && !this.vhQuerySales.getlocalCustomer(valueChange.id_customer.currentValue).debt_enable)) {\r\n        this.disableDebt()\r\n      } else this.nzOptions[1].disabled = false;\r\n    }\r\n    if (this.id_customer == 'id_retail' && this.payment_type == 2) {\r\n      this.disableDebt()\r\n    }\r\n  }\r\n  disableDebt() {\r\n    this.nzOptions[1].disabled = true;\r\n    this.closeAndGetValuePayment.emit([1]);\r\n    this.type_payment = [this.payment_type];\r\n  }\r\n}\r\n","<nz-cascader [nzOptions]=\"nzOptions\" [nzAllowClear]=\"false\" [(ngModel)]=\"type_payment\"\r\n    nzPlaceHolder=\"{{'Payment method' | translate}}\" (ngModelChange)=\"onChanges($event)\"> </nz-cascader>"],"names":[],"sourceRoot":"webpack:///"}